var Y4=Object.defineProperty;var $4=(E,x,c)=>x in E?Y4(E,x,{enumerable:!0,configurable:!0,writable:!0,value:c}):E[x]=c;var Y=(E,x,c)=>($4(E,typeof x!="symbol"?x+"":x,c),c);import{a as tt,i as hC,T as Q4,g as XS,E as Rd,b as au,c as Up,d as Z4,e as AI,f as J4,m as jv,W as Vp,C as ek,h as fC,j as tk,k as YS,S as A2,l as pC,B as nk,n as ik,o as gC,p as rk,q as ok,r as sk,s as uk,t as S2,u as I2,v as ak,w as mC,R as lk,x as ck,y as dk,z as hk,A as fk}from"./CoreExtension-C4ghjkTg.js";function dL(){import.meta.url,import("_").catch(()=>1),async function*(){}().next()}(function(){const x=document.createElement("link").relList;if(x&&x.supports&&x.supports("modulepreload"))return;for(const S of document.querySelectorAll('link[rel="modulepreload"]'))y(S);new MutationObserver(S=>{for(const R of S)if(R.type==="childList")for(const P of R.addedNodes)P.tagName==="LINK"&&P.rel==="modulepreload"&&y(P)}).observe(document,{childList:!0,subtree:!0});function c(S){const R={};return S.integrity&&(R.integrity=S.integrity),S.referrerPolicy&&(R.referrerPolicy=S.referrerPolicy),S.crossOrigin==="use-credentials"?R.credentials="include":S.crossOrigin==="anonymous"?R.credentials="omit":R.credentials="same-origin",R}function y(S){if(S.ep)return;S.ep=!0;const R=c(S);fetch(S.href,R)}})();const vC=(E,x)=>E===x,sI=Symbol("solid-proxy"),pk=Symbol("solid-track"),Aw={equals:vC};let yC=CC;const uu=1,Sw=2,xC={owned:null,cleanups:null,context:null,owner:null};var $t=null;let $S=null,gk=null,mn=null,Ni=null,ru=null,Pw=0;function Fp(E,x){const c=mn,y=$t,S=E.length===0,R=x===void 0?y:x,P=S?xC:{owned:null,cleanups:null,context:R?R.context:null,owner:R},v=S?E:()=>E(()=>xr(()=>jw(P)));$t=P,mn=null;try{return Ld(v,!0)}finally{mn=c,$t=y}}function kn(E,x){x=x?Object.assign({},Aw,x):Aw;const c={value:E,observers:null,observerSlots:null,comparator:x.equals||void 0},y=S=>(typeof S=="function"&&(S=S(c.value)),IC(c,S));return[SC.bind(c),y]}function iu(E,x,c){const y=Uw(E,x,!1,uu);Kp(y)}function ma(E,x,c){yC=Tk;const y=Uw(E,x,!1,uu);y.user=!0,ru?ru.push(y):Kp(y)}function ci(E,x,c){c=c?Object.assign({},Aw,c):Aw;const y=Uw(E,x,!0,0);return y.observers=null,y.observerSlots=null,y.comparator=c.equals||void 0,Kp(y),SC.bind(y)}function mk(E,x=vC,c){const y=new Map,S=Uw(R=>{const P=E();for(const[v,F]of y.entries())if(x(v,P)!==x(v,R))for(const V of F.values())V.state=uu,V.pure?Ni.push(V):ru.push(V);return P},void 0,!0,uu);return Kp(S),R=>{const P=mn;if(P){let v;(v=y.get(R))?v.add(P):y.set(R,v=new Set([P])),va(()=>{v.delete(P),!v.size&&y.delete(R)})}return x(R,S.value)}}function xr(E){if(mn===null)return E();const x=mn;mn=null;try{return E()}finally{mn=x}}function Ow(E,x,c){const y=Array.isArray(E);let S,R=c&&c.defer;return P=>{let v;if(y){v=Array(E.length);for(let V=0;V<E.length;V++)v[V]=E[V]()}else v=E();if(R)return R=!1,P;const F=xr(()=>x(v,S,P));return S=v,F}}function TC(E){ma(()=>xr(E))}function va(E){return $t===null||($t.cleanups===null?$t.cleanups=[E]:$t.cleanups.push(E)),E}function Xv(){return $t}function wC(E,x){const c=$t,y=mn;$t=E,mn=null;try{return Ld(x,!0)}catch(S){II(S)}finally{$t=c,mn=y}}function vk(E){const x=mn,c=$t;return Promise.resolve().then(()=>{mn=x,$t=c;let y;return Ld(E,!1),mn=$t=null,y?y.done:void 0})}function EC(E,x){const c=Symbol("context");return{id:c,Provider:Ek(c),defaultValue:E}}function AC(E){return $t&&$t.context&&$t.context[E.id]!==void 0?$t.context[E.id]:E.defaultValue}function SI(E){const x=ci(E),c=ci(()=>uI(x()));return c.toArray=()=>{const y=c();return Array.isArray(y)?y:y!=null?[y]:[]},c}function SC(){if(this.sources&&this.state)if(this.state===uu)Kp(this);else{const E=Ni;Ni=null,Ld(()=>Cw(this),!1),Ni=E}if(mn){const E=this.observers?this.observers.length:0;mn.sources?(mn.sources.push(this),mn.sourceSlots.push(E)):(mn.sources=[this],mn.sourceSlots=[E]),this.observers?(this.observers.push(mn),this.observerSlots.push(mn.sources.length-1)):(this.observers=[mn],this.observerSlots=[mn.sources.length-1])}return this.value}function IC(E,x,c){let y=E.value;return(!E.comparator||!E.comparator(y,x))&&(E.value=x,E.observers&&E.observers.length&&Ld(()=>{for(let S=0;S<E.observers.length;S+=1){const R=E.observers[S],P=$S&&$S.running;P&&$S.disposed.has(R),(P?!R.tState:!R.state)&&(R.pure?Ni.push(R):ru.push(R),R.observers&&kC(R)),P||(R.state=uu)}if(Ni.length>1e6)throw Ni=[],new Error},!1)),x}function Kp(E){if(!E.fn)return;jw(E);const x=Pw;yk(E,E.value,x)}function yk(E,x,c){let y;const S=$t,R=mn;mn=$t=E;try{y=E.fn(x)}catch(P){return E.pure&&(E.state=uu,E.owned&&E.owned.forEach(jw),E.owned=null),E.updatedAt=c+1,II(P)}finally{mn=R,$t=S}(!E.updatedAt||E.updatedAt<=c)&&(E.updatedAt!=null&&"observers"in E?IC(E,y):E.value=y,E.updatedAt=c)}function Uw(E,x,c,y=uu,S){const R={fn:E,state:y,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:x,owner:$t,context:$t?$t.context:null,pure:c};return $t===null||$t!==xC&&($t.owned?$t.owned.push(R):$t.owned=[R]),R}function Iw(E){if(E.state===0)return;if(E.state===Sw)return Cw(E);if(E.suspense&&xr(E.suspense.inFallback))return E.suspense.effects.push(E);const x=[E];for(;(E=E.owner)&&(!E.updatedAt||E.updatedAt<Pw);)E.state&&x.push(E);for(let c=x.length-1;c>=0;c--)if(E=x[c],E.state===uu)Kp(E);else if(E.state===Sw){const y=Ni;Ni=null,Ld(()=>Cw(E,x[0]),!1),Ni=y}}function Ld(E,x){if(Ni)return E();let c=!1;x||(Ni=[]),ru?c=!0:ru=[],Pw++;try{const y=E();return xk(c),y}catch(y){c||(ru=null),Ni=null,II(y)}}function xk(E){if(Ni&&(CC(Ni),Ni=null),E)return;const x=ru;ru=null,x.length&&Ld(()=>yC(x),!1)}function CC(E){for(let x=0;x<E.length;x++)Iw(E[x])}function Tk(E){let x,c=0;for(x=0;x<E.length;x++){const y=E[x];y.user?E[c++]=y:Iw(y)}for(x=0;x<c;x++)Iw(E[x])}function Cw(E,x){E.state=0;for(let c=0;c<E.sources.length;c+=1){const y=E.sources[c];if(y.sources){const S=y.state;S===uu?y!==x&&(!y.updatedAt||y.updatedAt<Pw)&&Iw(y):S===Sw&&Cw(y,x)}}}function kC(E){for(let x=0;x<E.observers.length;x+=1){const c=E.observers[x];c.state||(c.state=Sw,c.pure?Ni.push(c):ru.push(c),c.observers&&kC(c))}}function jw(E){let x;if(E.sources)for(;E.sources.length;){const c=E.sources.pop(),y=E.sourceSlots.pop(),S=c.observers;if(S&&S.length){const R=S.pop(),P=c.observerSlots.pop();y<S.length&&(R.sourceSlots[P]=y,S[y]=R,c.observerSlots[y]=P)}}if(E.owned){for(x=E.owned.length-1;x>=0;x--)jw(E.owned[x]);E.owned=null}if(E.cleanups){for(x=E.cleanups.length-1;x>=0;x--)E.cleanups[x]();E.cleanups=null}E.state=0}function wk(E){return E instanceof Error?E:new Error(typeof E=="string"?E:"Unknown error",{cause:E})}function II(E,x=$t){throw wk(E)}function uI(E){if(typeof E=="function"&&!E.length)return uI(E());if(Array.isArray(E)){const x=[];for(let c=0;c<E.length;c++){const y=uI(E[c]);Array.isArray(y)?x.push.apply(x,y):x.push(y)}return x}return E}function Ek(E,x){return function(y){let S;return iu(()=>S=xr(()=>($t.context={...$t.context,[E]:y.value},SI(()=>y.children))),void 0),S}}const Ak=Symbol("fallback");function C2(E){for(let x=0;x<E.length;x++)E[x]()}function Sk(E,x,c={}){let y=[],S=[],R=[],P=0,v=x.length>1?[]:null;return va(()=>C2(R)),()=>{let F=E()||[],V,H;return F[pk],xr(()=>{let te=F.length,me,A,q,ie,ve,ue,he,re,ke;if(te===0)P!==0&&(C2(R),R=[],y=[],S=[],P=0,v&&(v=[])),c.fallback&&(y=[Ak],S[0]=Fp(Te=>(R[0]=Te,c.fallback())),P=1);else if(P===0){for(S=new Array(te),H=0;H<te;H++)y[H]=F[H],S[H]=Fp(ee);P=te}else{for(q=new Array(te),ie=new Array(te),v&&(ve=new Array(te)),ue=0,he=Math.min(P,te);ue<he&&y[ue]===F[ue];ue++);for(he=P-1,re=te-1;he>=ue&&re>=ue&&y[he]===F[re];he--,re--)q[re]=S[he],ie[re]=R[he],v&&(ve[re]=v[he]);for(me=new Map,A=new Array(re+1),H=re;H>=ue;H--)ke=F[H],V=me.get(ke),A[H]=V===void 0?-1:V,me.set(ke,H);for(V=ue;V<=he;V++)ke=y[V],H=me.get(ke),H!==void 0&&H!==-1?(q[H]=S[V],ie[H]=R[V],v&&(ve[H]=v[V]),H=A[H],me.set(ke,H)):R[V]();for(H=ue;H<te;H++)H in q?(S[H]=q[H],R[H]=ie[H],v&&(v[H]=ve[H],v[H](H))):S[H]=Fp(ee);S=S.slice(0,P=te),y=F.slice(0)}return S});function ee(te){if(R[H]=te,v){const[me,A]=kn(H);return v[H]=A,x(F[H],me)}return x(F[H])}}}function MC(E,x){return xr(()=>E(x||{}))}function nw(){return!0}const Ik={get(E,x,c){return x===sI?c:E.get(x)},has(E,x){return x===sI?!0:E.has(x)},set:nw,deleteProperty:nw,getOwnPropertyDescriptor(E,x){return{configurable:!0,enumerable:!0,get(){return E.get(x)},set:nw,deleteProperty:nw}},ownKeys(E){return E.keys()}};function QS(E){return(E=typeof E=="function"?E():E)?E:{}}function Ck(){for(let E=0,x=this.length;E<x;++E){const c=this[E]();if(c!==void 0)return c}}function CI(...E){let x=!1;for(let P=0;P<E.length;P++){const v=E[P];x=x||!!v&&sI in v,E[P]=typeof v=="function"?(x=!0,ci(v)):v}if(x)return new Proxy({get(P){for(let v=E.length-1;v>=0;v--){const F=QS(E[v])[P];if(F!==void 0)return F}},has(P){for(let v=E.length-1;v>=0;v--)if(P in QS(E[v]))return!0;return!1},keys(){const P=[];for(let v=0;v<E.length;v++)P.push(...Object.keys(QS(E[v])));return[...new Set(P)]}},Ik);const c={},y=Object.create(null);for(let P=E.length-1;P>=0;P--){const v=E[P];if(!v)continue;const F=Object.getOwnPropertyNames(v);for(let V=F.length-1;V>=0;V--){const H=F[V];if(H==="__proto__"||H==="constructor")continue;const ee=Object.getOwnPropertyDescriptor(v,H);if(!y[H])y[H]=ee.get?{enumerable:!0,configurable:!0,get:Ck.bind(c[H]=[ee.get.bind(v)])}:ee.value!==void 0?ee:void 0;else{const te=c[H];te&&(ee.get?te.push(ee.get.bind(v)):ee.value!==void 0&&te.push(()=>ee.value))}}}const S={},R=Object.keys(y);for(let P=R.length-1;P>=0;P--){const v=R[P],F=y[v];F&&F.get?Object.defineProperty(S,v,F):S[v]=F?F.value:void 0}return S}const kk=E=>"Stale read from <".concat(E,">.");function aI(E){const x="fallback"in E&&{fallback:()=>E.fallback};return ci(Sk(()=>E.each,E.children,x||void 0))}function _C(E){const x=E.keyed,c=ci(()=>E.when,void 0,{equals:(y,S)=>x?y===S:!y==!S});return ci(()=>{const y=c();if(y){const S=E.children;return typeof S=="function"&&S.length>0?xr(()=>S(x?y:()=>{if(!xr(c))throw kk("Show");return E.when})):S}return E.fallback},void 0,void 0)}const Mk=void 0,[RC,_k]=kn(void 0);class LC{constructor(x){Y(this,"releaseCallback");this.releaseCallback=x}}class Rk extends LC{constructor(c,y){var S,R;super(c);Y(this,"textureMap",new Map);Y(this,"zeroReferenceTextureSet",new Set);Y(this,"options");this.options={textureCleanupIntervalMs:(S=y.textureCleanupIntervalMs)!=null?S:1e4,textureCleanupAgeThreadholdMs:(R=y.textureCleanupAgeThreadholdMs)!=null?R:6e4},setInterval(()=>{const P=Date.now(),v=this.options.textureCleanupAgeThreadholdMs;for(const F of this.zeroReferenceTextureSet)P-F.lastUpdate>v&&(this.releaseCallback(F.id),this.textureMap.delete(F.id),this.zeroReferenceTextureSet.delete(F))},this.options.textureCleanupIntervalMs)}registerTexture(c){var S;const y=(S=c.options)==null?void 0:S.id;if(tt(y,"Texture must have an id to be registered"),!this.textureMap.has(y)){const R={id:y,nodeRefCount:0,lastUpdate:Date.now()};this.textureMap.set(y,R),this.zeroReferenceTextureSet.add(R)}}incrementTextureRefCount(c){var R;const y=(R=c.options)==null?void 0:R.id;tt(y,"Texture must have an id to be registered");let S=this.textureMap.get(y);S||(this.registerTexture(c),S=this.textureMap.get(y)),tt(S,"Texture must have been registered"),c.txType==="SubTexture"&&this.incrementTextureRefCount(c.props.texture),S.nodeRefCount++,S.lastUpdate=Date.now(),this.zeroReferenceTextureSet.has(S)&&this.zeroReferenceTextureSet.delete(S)}decrementTextureRefCount(c){var R;const y=(R=c.options)==null?void 0:R.id;tt(y,"Texture must have an id to be registered");const S=this.textureMap.get(y);tt(S,"Texture must have been registered"),S.nodeRefCount--,S.lastUpdate=Date.now(),S.nodeRefCount===0&&this.zeroReferenceTextureSet.add(S),c.txType==="SubTexture"&&this.decrementTextureRefCount(c.props.texture)}}class Lk extends LC{constructor(c){super(c);Y(this,"registry");this.registry=new FinalizationRegistry(c)}registerTexture(c){var y,S;tt((y=c.options)==null?void 0:y.id,"Texture must have an ID to be registered"),this.registry.register(c,(S=c.options)==null?void 0:S.id)}incrementTextureRefCount(){}decrementTextureRefCount(){}}const bv={alpha:E=>E===1?null:{prop:"opacity",value:"".concat(E)},x:E=>({prop:"left",value:"".concat(E,"px")}),y:E=>({prop:"top",value:"".concat(E,"px")}),width:E=>E===0?null:{prop:"width",value:"".concat(E,"px")},height:E=>E===0?null:{prop:"height",value:"".concat(E,"px")},zIndex:()=>"zIndex",fontFamily:()=>"font-family",fontSize:()=>"font-size",fontStyle:()=>"font-style",fontWeight:()=>"font-weight",fontStretch:()=>"font-stretch",lineHeight:()=>"line-height",letterSpacing:()=>"letter-spacing",textAlign:()=>"text-align",overflowSuffix:()=>"overflow-suffix",maxLines:()=>"max-lines",contain:()=>"contain",verticalAlign:()=>"vertical-align",clipping:E=>E===!1?null:{prop:"overflow",value:E?"hidden":"visible"},rotation:E=>E===0?null:{prop:"transform",value:"rotate(".concat(E,"rad)")},scale:E=>E===1?null:{prop:"transform",value:"scale(".concat(E,")")},scaleX:E=>E===1?null:{prop:"transform",value:"scaleX(".concat(E,")")},scaleY:E=>E===1?null:{prop:"transform",value:"scaleY(".concat(E,")")},color:E=>E===0?null:{prop:"color",value:NC(E)}},NC=E=>{const x=(E&255)/255,c=E>>8&255,y=E>>16&255,S=E>>24&255;return"rgba(".concat(S,",").concat(y,",").concat(c,",").concat(x,")")},Nk={id:"id"};class Dk{constructor(x,c){Y(this,"root",null);Y(this,"canvas",null);Y(this,"height",1080);Y(this,"width",1920);Y(this,"scaleX",1);Y(this,"scaleY",1);var R,P,v,F,V,H;if(hC())return;if(!c)throw new Error("settings is required");this.height=Math.ceil((P=c.appHeight)!=null?P:1080/((R=c.deviceLogicalPixelRatio)!=null?R:1)),this.width=Math.ceil((F=c.appWidth)!=null?F:1900/((v=c.deviceLogicalPixelRatio)!=null?v:1)),this.scaleX=(V=c.deviceLogicalPixelRatio)!=null?V:1,this.scaleY=(H=c.deviceLogicalPixelRatio)!=null?H:1,this.canvas=x,this.root=document.createElement("div"),this.setRootPosition(),document.body.appendChild(this.root),new MutationObserver(this.setRootPosition.bind(this)).observe(x,{attributes:!0,childList:!1,subtree:!1}),new ResizeObserver(this.setRootPosition.bind(this)).observe(x),window.addEventListener("resize",this.setRootPosition.bind(this)),console.warn("Inspector is enabled, this will impact performance")}setRootPosition(){if(this.root===null||this.canvas===null)return;const x=this.canvas.getBoundingClientRect(),c=document.documentElement.scrollTop+x.top,y=document.documentElement.scrollLeft+x.left;this.root.id="root",this.root.style.left="".concat(y,"px"),this.root.style.top="".concat(c,"px"),this.root.style.width="".concat(this.width,"px"),this.root.style.height="".concat(this.height,"px"),this.root.style.position="absolute",this.root.style.transformOrigin="0 0 0",this.root.style.transform="scale(".concat(this.scaleX,", ").concat(this.scaleY,")"),this.root.style.overflow="hidden",this.root.style.zIndex="65534"}createDiv(x,c){const y=document.createElement("div");y.style.position="absolute",y.id=x.id.toString();for(const S in c)this.updateNodeProperty(y,S,c[S]);return y}createNode(x,c){const y=x.createNode(c),S=this.createDiv(y,c);return S.node=y,y.div=S,this.createProxy(y,S)}createTextNode(x,c){const y=x.createTextNode(c),S=this.createDiv(y,c);return S.node=y,y.div=S,this.createProxy(y,S)}createProxy(x,c){return new Proxy(x,{set:(y,S,R)=>(this.updateNodeProperty(c,S,R),Reflect.set(y,S,R)),get:(y,S,R)=>(S==="destroy"&&this.destroyNode(y),S==="animate"?(P,v)=>{const F=y.animate(P,v);return new Proxy(F,{get:(V,H,ee)=>(H==="start"&&this.animateNode(c,x,P,v),Reflect.get(V,H,ee))})}:Reflect.get(y,S,R))})}destroyNode(x){const c=document.getElementById(x.id.toString());c==null||c.remove()}updateNodeProperty(x,c,y){var S;if(!(this.root===null||y===void 0||y===null)){if(c==="parent"){const R=y.id;if(R===1){this.root.appendChild(x);return}const P=document.getElementById(R.toString());P==null||P.appendChild(x);return}if(c==="text"){x.innerHTML=String(y),x.style.visibility="hidden";return}if(c==="src"&&y){x.setAttribute("data-src",String(y));return}if(bv[c]){const R=(S=bv[c])==null?void 0:S.call(bv,y);if(R===null)return;if(typeof R=="string"){x.style.setProperty(R,String(y));return}typeof R=="object"&&x.style.setProperty(R.prop,R.value);return}if(Nk[c]){x.setAttribute(String(bv[c]),String(y));return}if(c==="data"){for(const R in y){const P=y[R];P===void 0?x.removeAttribute("data-".concat(R)):x.setAttribute("data-".concat(R),String(P))}return}}}animateNode(x,c,y,S){const{duration:R=1e3,delay:P=0}=S,{x:v,y:F,width:V,height:H,alpha:ee=1,rotation:te=0,scale:me=1,color:A}=y;function q(){setTimeout(()=>{x.style.top="".concat(F,"px"),x.style.left="".concat(v,"px"),x.style.width="".concat(V,"px"),x.style.height="".concat(H,"px"),x.style.opacity="".concat(ee),x.style.rotate="".concat(te,"rad"),x.style.scale="".concat(me),x.style.color=NC(A)},R)}setTimeout(q,P)}}class Ei{constructor(x){Y(this,"priority",1);Y(this,"name","");Y(this,"ref");Y(this,"target");Y(this,"passParameters","");Y(this,"declaredUniforms","");Y(this,"uniformInfo",{});const{ref:c,target:y,props:S={}}=x;this.ref=c,this.target=y;const R={},P=[];let v="";const F=this.constructor.uniforms||{};for(const V in F){const H=F[V],ee=H.type,te="".concat(c,"_").concat(V);let me="";H.size&&(me="[".concat(H.size(S),"]")),P.push(te),v+="uniform ".concat(ee," ").concat(te).concat(me,";"),R[V]={name:te,uniform:F[V].method}}this.passParameters=P.join(","),this.declaredUniforms=v,this.uniformInfo=R}static getEffectKey(x){return""}static getMethodParameters(x,c){const y=[];for(const S in x){const R=x[S];let P="";R.size&&(P="[".concat(R.size(c),"]")),y.push("".concat(R.type," ").concat(S).concat(P))}return y.join(",")}static resolveDefaults(x){return{}}static makeEffectKey(x){return!1}}Y(Ei,"uniforms",{}),Y(Ei,"methods"),Y(Ei,"onShaderMask"),Y(Ei,"onColorize"),Y(Ei,"onEffectMask");const bk={x:(E,x)=>{E.props.x=x},y:(E,x)=>{E.props.y=x},width:(E,x)=>{E.props.width=x},height:(E,x)=>{E.props.height=x},color:(E,x)=>{E.props.color=x},zIndex:(E,x)=>{E.props.zIndex=x},fontFamily:(E,x)=>{E.props.fontFamily=x},fontWeight:(E,x)=>{E.props.fontWeight=x},fontStyle:(E,x)=>{E.props.fontStyle=x},fontStretch:(E,x)=>{E.props.fontStretch=x},fontSize:(E,x)=>{E.props.fontSize=x},text:(E,x)=>{E.props.text=x},textAlign:(E,x)=>{E.props.textAlign=x},contain:(E,x)=>{E.props.contain=x},offsetY:(E,x)=>{E.props.offsetY=x},scrollable:(E,x)=>{E.props.scrollable=x},scrollY:(E,x)=>{E.props.scrollY=x},letterSpacing:(E,x)=>{E.props.letterSpacing=x},lineHeight:(E,x)=>{E.props.lineHeight=x},maxLines:(E,x)=>{E.props.maxLines=x},textBaseline:(E,x)=>{E.props.textBaseline=x},verticalAlign:(E,x)=>{E.props.verticalAlign=x},overflowSuffix:(E,x)=>{E.props.overflowSuffix=x},debug:(E,x)=>{E.props.debug=x}};class DC{constructor(x){Y(this,"stage");Y(this,"set");this.stage=x;const c={...bk,...this.getPropertySetters()};this.set=Object.freeze(Object.fromEntries(Object.entries(c).map(([y,S])=>[y,(R,P)=>{R.props[y]!==P&&(S(R,P),this.stage.requestRender())}])))}setStatus(x,c,y){x.status!==c&&(x.status=c,x.emitter.emit(c,y))}setIsRenderable(x,c){x.isRenderable=c}destroyState(x){["loading","loaded","failed"].forEach(y=>{x.emitter.off(y)})}scheduleUpdateState(x){x.updateScheduled||(x.updateScheduled=!0,queueMicrotask(()=>{x.updateScheduled=!1,this.updateState(x)}))}}class k2 extends Q4{constructor(c,y,S){super(c,y);Y(this,"fontFace");Y(this,"fontUrl");const R=S.replace(/\(|\)/g,""),P=this.descriptors,v={style:P.style,weight:typeof P.weight=="number"?"".concat(P.weight):P.weight,stretch:P.stretch,unicodeRange:P.unicodeRange,variant:P.variant,featureSettings:P.featureSettings,display:P.display},F=new FontFace(c,"url(".concat(R,")"),v);F.load().then(()=>{this.loaded=!0,this.emit("loaded")}).catch(console.error),this.fontFace=F,this.fontUrl=S}}const M2=2048;function _2(E,x,c,y,S){const R=E!=="bottom"?.5*x:0;return c*(y-1)+R+Math.max(c,x)+(S||0)}class Pk{constructor(x,c){Y(this,"_canvas");Y(this,"_context");Y(this,"_settings");Y(this,"renderInfo");this._canvas=x,this._context=c,this._settings=this.mergeDefaults({})}set settings(x){this._settings=this.mergeDefaults(x)}get settings(){return this._settings}getPrecision(){return this._settings.precision}setFontProperties(){this._context.font=this._getFontSetting(),this._context.textBaseline=this._settings.textBaseline}_getFontSetting(){const x=[this._settings.fontFace],c=[];for(let y=0,S=x.length;y<S;y++)x[y]==="serif"||x[y]==="sans-serif"?c.push(x[y]):c.push('"'.concat(x[y],'"'));return"".concat(this._settings.fontStyle," ").concat(this._settings.fontSize*this.getPrecision(),"px ").concat(c.join(","))}_load(){if(document.fonts){const x=this._getFontSetting();try{if(!document.fonts.check(x,this._settings.text))return document.fonts.load(x,this._settings.text).catch(c=>{console.warn("[Lightning] Font load error",c,x)}).then(()=>{document.fonts.check(x,this._settings.text)||console.warn("[Lightning] Font not found",x)})}catch(c){console.warn("[Lightning] Can't check font loading for "+x)}}}calculateRenderInfo(){const x={},c=this.getPrecision(),y=this._settings.paddingLeft*c,S=this._settings.paddingRight*c,R=this._settings.fontSize*c;let P=this._settings.offsetY===null?null:this._settings.offsetY*c,v=(this._settings.lineHeight||R)*c;const F=this._settings.w*c,V=this._settings.h*c;let H=this._settings.wordWrapWidth*c;const ee=this._settings.cutSx*c,te=this._settings.cutEx*c,me=this._settings.cutSy*c,A=this._settings.cutEy*c,q=(this._settings.letterSpacing||0)*c,ie=this._settings.textIndent*c;this.setFontProperties();let ve=F||2048/this.getPrecision(),ue=ve-y;if(ue<10&&(ve+=10-ue,ue=10),H||(H=ue),this._settings.textOverflow&&!this._settings.wordWrap){let Ne;switch(this._settings.textOverflow){case"clip":Ne="";break;case"ellipsis":Ne=this._settings.overflowSuffix;break;default:Ne=this._settings.textOverflow}this._settings.text=this.wrapWord(this._settings.text,H-ie,Ne)}let he;if(this._settings.wordWrap)he=this.wrapText(this._settings.text,H,q,ie);else{he={l:this._settings.text.split(/(?:\r\n|\r|\n)/),n:[]};const Ne=he.l.length;for(let Re=0;Re<Ne-1;Re++)he.n.push(Re)}let re=he.l;if(this._settings.maxLines&&re.length>this._settings.maxLines){const Ne=re.slice(0,this._settings.maxLines);let Re=null;if(this._settings.overflowSuffix){const _e=this._settings.overflowSuffix?this.measureText(this._settings.overflowSuffix):0,we=this.wrapText(Ne[Ne.length-1],H-_e,q,ie);Ne[Ne.length-1]="".concat(we.l[0]).concat(this._settings.overflowSuffix),Re=[we.l.length>1?we.l[1]:""]}else Re=[""];let k;const le=re.length;let ye=0;const He=he.n.length;for(k=this._settings.maxLines;k<le;k++)Re[ye]+="".concat(Re[ye]?" ":"").concat(re[k]),k+1<He&&he.n[k+1]&&ye++;x.remainingText=Re.join("\n"),x.moreTextLines=!0,re=Ne}else x.moreTextLines=!1,x.remainingText="";let ke=0;const Te=[];for(let Ne=0;Ne<re.length;Ne++){const Re=this.measureText(re[Ne],q)+(Ne===0?ie:0);Te.push(Re),ke=Math.max(ke,Re)}x.lineWidths=Te,F||(ve=ke+y+S,ue=ke),v=v||R;let Le;return V?Le=V:Le=_2(this._settings.textBaseline,R,v,re.length,P),P===null&&(P=R),x.w=ve,x.h=Le,x.lines=re,x.precision=c,ve||(ve=1),Le||(Le=1),(ee||te)&&(ve=Math.min(ve,te-ee)),(me||A)&&(Le=Math.min(Le,A-me)),x.width=ve,x.innerWidth=ue,x.height=Le,x.fontSize=R,x.cutSx=ee,x.cutSy=me,x.cutEx=te,x.cutEy=A,x.lineHeight=v,x.lineWidths=Te,x.offsetY=P,x.paddingLeft=y,x.paddingRight=S,x.letterSpacing=q,x.textIndent=ie,x}draw(x,c){const y=this.getPrecision(),S=(c==null?void 0:c.lines)||x.lines,R=(c==null?void 0:c.lineWidths)||x.lineWidths,P=c?_2(this._settings.textBaseline,x.fontSize,x.lineHeight,c.lines.length,this._settings.offsetY===null?null:this._settings.offsetY*y):x.height;this._canvas.width=Math.min(Math.ceil(x.width+this._settings.textRenderIssueMargin),M2),this._canvas.height=Math.min(Math.ceil(P),M2),this.setFontProperties(),x.fontSize>=128&&(this._context.globalAlpha=.01,this._context.fillRect(0,0,.01,.01),this._context.globalAlpha=1),(x.cutSx||x.cutSy)&&this._context.translate(-x.cutSx,-x.cutSy);let v,F;const V=[];for(let ee=0,te=S.length;ee<te;ee++)v=ee===0?x.textIndent:0,F=ee*x.lineHeight+x.offsetY,this._settings.verticalAlign=="middle"?F+=(x.lineHeight-x.fontSize)/2:this._settings.verticalAlign=="bottom"&&(F+=x.lineHeight-x.fontSize),this._settings.textAlign==="right"?v+=x.innerWidth-R[ee]:this._settings.textAlign==="center"&&(v+=(x.innerWidth-R[ee])/2),v+=x.paddingLeft,V.push({text:S[ee],x:v,y:F,w:R[ee]});if(this._settings.highlight){const ee=this._settings.highlightColor,te=this._settings.highlightHeight*y||x.fontSize*1.5,me=this._settings.highlightOffset*y,A=this._settings.highlightPaddingLeft!==null?this._settings.highlightPaddingLeft*y:x.paddingLeft,q=this._settings.highlightPaddingRight!==null?this._settings.highlightPaddingRight*y:x.paddingRight;this._context.fillStyle=XS(ee);for(let ie=0;ie<V.length;ie++){const ve=V[ie];this._context.fillRect(ve.x-A,ve.y-x.offsetY+me,ve.w+q+A,te)}}let H=null;this._settings.shadow&&(H=[this._context.shadowColor,this._context.shadowOffsetX,this._context.shadowOffsetY,this._context.shadowBlur],this._context.shadowColor=XS(this._settings.shadowColor),this._context.shadowOffsetX=this._settings.shadowOffsetX*y,this._context.shadowOffsetY=this._settings.shadowOffsetY*y,this._context.shadowBlur=this._settings.shadowBlur*y),this._context.fillStyle=XS(this._settings.textColor);for(let ee=0,te=V.length;ee<te;ee++){const me=V[ee];if(x.letterSpacing===0)this._context.fillText(me.text,me.x,me.y);else{const A=me.text.split("");let q=me.x;for(let ie=0,ve=A.length;ie<ve;ie++)this._context.fillText(A[ie],q,me.y),q+=this.measureText(A[ie],x.letterSpacing)}}H&&(this._context.shadowColor=H[0],this._context.shadowOffsetX=H[1],this._context.shadowOffsetY=H[2],this._context.shadowBlur=H[3]),(x.cutSx||x.cutSy)&&this._context.translate(x.cutSx,x.cutSy),this.renderInfo=x}wrapWord(x,c,y){const S=this._context.measureText(y).width,R=x.length,P=this._context.measureText(x).width;if(P<=c)return x;let v=Math.floor(c*R/P),F=this._context.measureText(x.substring(0,v)).width+S;if(F>c)for(;v>0&&(F=this._context.measureText(x.substring(0,v)).width+S,F>c);)v-=1;else for(;v<R;)if(F=this._context.measureText(x.substring(0,v)).width+S,F<c)v+=1;else{v-=1;break}return x.substring(0,v)+(c>=S?y:"")}wrapText(x,c,y,S=0){const R=x.split(/\r?\n/g);let P=[];const v=[];for(let F=0;F<R.length;F++){const V=[];let H="",ee=c-S;const te=R[F].split(" ");for(let me=0;me<te.length;me++){const A=this.measureText(te[me],y),q=A+this.measureText(" ",y);me===0||q>ee?(me>0&&(V.push(H),H=""),H+=te[me],ee=c-A-(me===0?S:0)):(ee-=q,H+=" ".concat(te[me]))}V.push(H),H="",P=P.concat(V),F<R.length-1&&v.push(P.length)}return{l:P,n:v}}measureText(x,c=0){return c?x.split("").reduce((y,S)=>y+this._context.measureText(S).width+c,0):this._context.measureText(x).width}mergeDefaults(x){return{text:"",w:0,h:0,fontStyle:"normal",fontSize:40,fontFace:null,wordWrap:!0,wordWrapWidth:0,wordBreak:!1,textOverflow:"",lineHeight:null,textBaseline:"alphabetic",textAlign:"left",verticalAlign:"top",offsetY:null,maxLines:0,overflowSuffix:"...",textColor:[1,1,1,1],paddingLeft:0,paddingRight:0,shadow:!1,shadowColor:[0,0,0,1],shadowOffsetX:0,shadowOffsetY:0,shadowBlur:5,highlight:!1,highlightHeight:0,highlightColor:[0,0,0,1],highlightOffset:0,highlightPaddingLeft:0,highlightPaddingRight:0,letterSpacing:0,textIndent:0,cutSx:0,cutEx:0,cutSy:0,cutEy:0,advancedRenderer:!1,fontBaselineRatio:0,precision:1,textRenderIssueMargin:0,...x}}}const R2=typeof self>"u"?globalThis:self;var dC;const L2=((dC=R2.document)==null?void 0:dC.fonts)||R2.fonts;function Ok(E){const{fontFamily:x,fontStyle:c,fontWeight:y,fontStretch:S,fontSize:R}=E;return[c,y,S,"".concat(R,"px"),x].join(" ")}const Uk=Up(0,0,0,0);class N2 extends DC{constructor(c){super(c);Y(this,"canvas");Y(this,"context");Y(this,"rendererBounds");typeof OffscreenCanvas<"u"?this.canvas=new OffscreenCanvas(0,0):this.canvas=document.createElement("canvas");let y=this.canvas.getContext("2d");y||(this.canvas=document.createElement("canvas"),y=this.canvas.getContext("2d")),tt(y),this.context=y,this.rendererBounds={x1:0,y1:0,x2:this.stage.options.appWidth,y2:this.stage.options.appHeight}}getPropertySetters(){return{fontFamily:(c,y)=>{c.props.fontFamily=y,c.fontInfo=void 0,this.invalidateLayoutCache(c)},fontWeight:(c,y)=>{c.props.fontWeight=y,c.fontInfo=void 0,this.invalidateLayoutCache(c)},fontStyle:(c,y)=>{c.props.fontStyle=y,c.fontInfo=void 0,this.invalidateLayoutCache(c)},fontStretch:(c,y)=>{c.props.fontStretch=y,c.fontInfo=void 0,this.invalidateLayoutCache(c)},fontSize:(c,y)=>{c.props.fontSize=y,c.fontInfo=void 0,this.invalidateLayoutCache(c)},text:(c,y)=>{c.props.text=y,this.invalidateLayoutCache(c)},textAlign:(c,y)=>{c.props.textAlign=y,this.invalidateLayoutCache(c)},color:(c,y)=>{c.props.color=y,this.invalidateLayoutCache(c)},x:(c,y)=>{c.props.x=y,this.invalidateVisibleWindowCache(c)},y:(c,y)=>{c.props.y=y,this.invalidateVisibleWindowCache(c)},contain:(c,y)=>{c.props.contain=y,this.invalidateLayoutCache(c)},width:(c,y)=>{c.props.width=y,c.props.contain!=="none"&&this.invalidateLayoutCache(c)},height:(c,y)=>{c.props.height=y,c.props.contain==="both"&&this.invalidateLayoutCache(c)},offsetY:(c,y)=>{c.props.offsetY=y,this.invalidateLayoutCache(c)},scrollY:(c,y)=>{c.props.scrollY=y},letterSpacing:(c,y)=>{c.props.letterSpacing=y,this.invalidateLayoutCache(c)},lineHeight:(c,y)=>{c.props.lineHeight=y,this.invalidateLayoutCache(c)},maxLines:(c,y)=>{c.props.maxLines=y,this.invalidateLayoutCache(c)},textBaseline:(c,y)=>{c.props.textBaseline=y,this.invalidateLayoutCache(c)},verticalAlign:(c,y)=>{c.props.verticalAlign=y,this.invalidateLayoutCache(c)},overflowSuffix:(c,y)=>{c.props.overflowSuffix=y,this.invalidateLayoutCache(c)}}}canRenderFont(c){return!0}isFontFaceSupported(c){return c instanceof k2}addFontFace(c){tt(c instanceof k2),L2.add(c.fontFace)}createState(c){return{props:c,status:"initialState",updateScheduled:!1,emitter:new Rd,canvasPages:void 0,lightning2TextRenderer:new Pk(this.canvas,this.context),renderWindow:void 0,visibleWindow:{x1:0,y1:0,x2:0,y2:0,valid:!1},renderInfo:void 0,forceFullLayoutCalc:!1,textW:0,textH:0,fontInfo:void 0,fontFaceLoadedHandler:void 0,isRenderable:!1,debugData:{updateCount:0,layoutCount:0,drawCount:0,lastLayoutNumCharacters:0,layoutSum:0,drawSum:0,bufferSize:0}}}updateState(c){var A,q;if(c.status==="initialState"&&this.setStatus(c,"loading"),!c.fontInfo){const ie=Ok(c.props);if(c.fontInfo={cssString:ie,loaded:!1},!c.fontInfo.loaded){L2.load(ie).then(this.onFontLoaded.bind(this,c,ie)).catch(this.onFontLoadError.bind(this,c,ie));return}}if(!c.fontInfo.loaded)return;if(!c.renderInfo){const ie=c.props.maxLines,ve=c.props.contain==="both"?Math.floor((c.props.height-c.props.offsetY)/c.props.lineHeight):0,ue=ve>0&&ie>0?Math.min(ve,ie):Math.max(ve,ie);c.lightning2TextRenderer.settings={text:c.props.text,textAlign:c.props.textAlign,fontFace:c.props.fontFamily,fontSize:c.props.fontSize,fontStyle:[c.props.fontStretch,c.props.fontStyle,c.props.fontWeight].join(" "),textColor:au(c.props.color),offsetY:c.props.fontSize+c.props.offsetY,wordWrap:c.props.contain!=="none",wordWrapWidth:c.props.contain==="none"?void 0:c.props.width,letterSpacing:c.props.letterSpacing,lineHeight:c.props.lineHeight,maxLines:ue,textBaseline:c.props.textBaseline,verticalAlign:c.props.verticalAlign,overflowSuffix:c.props.overflowSuffix},c.renderInfo=c.lightning2TextRenderer.calculateRenderInfo(),c.textH=c.renderInfo.lineHeight*c.renderInfo.lines.length,c.textW=c.renderInfo.width,c.renderWindow=void 0}const{x:y,y:S,width:R,height:P,scrollY:v,contain:F}=c.props,{visibleWindow:V}=c;let{renderWindow:H,canvasPages:ee}=c;if(!V.valid){const ie=Up(y,S,F!=="none"?y+R:1/0,F==="both"?S+P:1/0,Uk);Z4(this.rendererBounds,ie,V),V.valid=!0}const te=V.y2-V.y1,me=Math.ceil(te/c.renderInfo.lineHeight);if(te===0){ee=void 0,H=void 0,this.setStatus(c,"loaded");return}else if(H&&ee){const ie=y+H.x1,ve=S-v+H.y1,ue=y+H.x2,he=S-v+H.y2;if(ie<=V.x1&&ue>=V.x2&&ve<=V.y1&&he>=V.y2){this.setStatus(c,"loaded");return}he<V.y2?(H.y1+=me*c.renderInfo.lineHeight,H.y2+=me*c.renderInfo.lineHeight,ee.push(ee.shift()),ee[2].lineNumStart=ee[1].lineNumStart+me,ee[2].lineNumEnd=ee[2].lineNumStart+me,ee[2].valid=!1):ve>V.y1&&(H.y1-=me*c.renderInfo.lineHeight,H.y2-=me*c.renderInfo.lineHeight,ee.unshift(ee.pop()),ee[0].lineNumStart=ee[1].lineNumStart-me,ee[0].lineNumEnd=ee[0].lineNumStart+me,ee[0].valid=!1)}else{const ie=c.renderInfo.lineHeight*me,ve=Math.ceil(v/ie),ue=ve*me,he=ue-me,re=ue+me;ee=[{texture:ee==null?void 0:ee[0].texture,lineNumStart:he,lineNumEnd:he+me,valid:!1},{texture:ee==null?void 0:ee[1].texture,lineNumStart:ue,lineNumEnd:ue+me,valid:!1},{texture:ee==null?void 0:ee[2].texture,lineNumStart:re,lineNumEnd:re+me,valid:!1}],c.canvasPages=ee;const ke=ve*ie;H={x1:0,y1:ke-ie,x2:R,y2:ke+ie*2}}c.renderWindow=H,performance.now();for(const ie of ee)if(!ie.valid){if(ie.lineNumStart<0){(A=ie.texture)==null||A.setRenderableOwner(c,!1),ie.texture=this.stage.txManager.loadTexture("ImageTexture",{src:""}),ie.texture.setRenderableOwner(c,c.isRenderable),ie.valid=!0;continue}c.lightning2TextRenderer.draw(c.renderInfo,{lines:c.renderInfo.lines.slice(ie.lineNumStart,ie.lineNumEnd),lineWidths:c.renderInfo.lineWidths.slice(ie.lineNumStart,ie.lineNumEnd)}),this.canvas.width===0||this.canvas.height===0||((q=ie.texture)==null||q.setRenderableOwner(c,!1),ie.texture=this.stage.txManager.loadTexture("ImageTexture",{src:this.context.getImageData(0,0,this.canvas.width,this.canvas.height)},{preload:!0}),ie.texture.setRenderableOwner(c,c.isRenderable)),ie.valid=!0}this.setStatus(c,"loaded")}renderQuads(c,y,S,R){var Ne,Re,k,le,ye,He,_e,we,st,Et,Vn,Mn;const{stage:P}=this,{canvasPages:v,textW:F=0,textH:V=0,renderWindow:H}=c;if(!v||!H)return;const{x:ee,y:te,scrollY:me,contain:A,width:q,height:ie}=c.props,ve={x:ee,y:te,width:A!=="none"?q:F,height:A==="both"?ie:V};AI({x:0,y:0,width:P.options.appWidth,height:P.options.appHeight},ve),tt(v,"canvasPages is not defined"),tt(H,"renderWindow is not defined");const he=(H.y2-H.y1)/3,{zIndex:re,color:ke}=c.props,Te=R*J4(ke),Le=jv(4294967295,Te);v[0].valid&&this.stage.renderer.addQuad({alpha:Te,clippingRect:S,colorBl:Le,colorBr:Le,colorTl:Le,colorTr:Le,width:((Re=(Ne=v[0].texture)==null?void 0:Ne.dimensions)==null?void 0:Re.width)||0,height:((le=(k=v[0].texture)==null?void 0:k.dimensions)==null?void 0:le.height)||0,texture:v[0].texture,textureOptions:{},shader:null,shaderProps:null,zIndex:re,tx:y.tx,ty:y.ty-me+H.y1,ta:y.ta,tb:y.tb,tc:y.tc,td:y.td}),v[1].valid&&this.stage.renderer.addQuad({alpha:Te,clippingRect:S,colorBl:Le,colorBr:Le,colorTl:Le,colorTr:Le,width:((He=(ye=v[1].texture)==null?void 0:ye.dimensions)==null?void 0:He.width)||0,height:((we=(_e=v[1].texture)==null?void 0:_e.dimensions)==null?void 0:we.height)||0,texture:v[1].texture,textureOptions:{},shader:null,shaderProps:null,zIndex:re,tx:y.tx,ty:y.ty-me+H.y1+he,ta:y.ta,tb:y.tb,tc:y.tc,td:y.td}),v[2].valid&&this.stage.renderer.addQuad({alpha:Te,clippingRect:S,colorBl:Le,colorBr:Le,colorTl:Le,colorTr:Le,width:((Et=(st=v[2].texture)==null?void 0:st.dimensions)==null?void 0:Et.width)||0,height:((Mn=(Vn=v[2].texture)==null?void 0:Vn.dimensions)==null?void 0:Mn.height)||0,texture:v[2].texture,textureOptions:{},shader:null,shaderProps:null,zIndex:re,tx:y.tx,ty:y.ty-me+H.y1+he+he,ta:y.ta,tb:y.tb,tc:y.tc,td:y.td})}setIsRenderable(c,y){var S;super.setIsRenderable(c,y),(S=c.canvasPages)==null||S.forEach(R=>{var P;(P=R.texture)==null||P.setRenderableOwner(c,y)})}destroyState(c){var y;(y=c.canvasPages)==null||y.forEach(S=>{var R;(R=S.texture)==null||R.setRenderableOwner(c,!1)})}invalidateVisibleWindowCache(c){c.visibleWindow.valid=!1,this.setStatus(c,"loading"),this.scheduleUpdateState(c)}invalidateLayoutCache(c){c.renderInfo=void 0,c.visibleWindow.valid=!1,this.setStatus(c,"loading"),this.scheduleUpdateState(c)}onFontLoaded(c,y){var S;y!==((S=c.fontInfo)==null?void 0:S.cssString)||!c.fontInfo||(c.fontInfo.loaded=!0,this.scheduleUpdateState(c))}onFontLoadError(c,y,S){var R;y!==((R=c.fontInfo)==null?void 0:R.cssString)||!c.fontInfo||(c.fontInfo.loaded=!0,console.error("CanvasTextRenderer: Error loading font '".concat(c.fontInfo.cssString,"'"),S),this.scheduleUpdateState(c))}}class bC extends Vp{constructor(x){super({renderer:x,attributes:["a_position","a_textureCoordinate","a_color"],uniforms:[{name:"u_resolution",uniform:"uniform2fv"},{name:"u_pixelRatio",uniform:"uniform1f"},{name:"u_texture",uniform:"uniform2fv"}]})}bindTextures(x){const{glw:c}=this;c.activeTexture(0),c.bindTexture(x[0].ctxTexture)}}Y(bC,"shaderSources",{vertex:"\n      # ifdef GL_FRAGMENT_PRESICISON_HIGH\n      precision highp float;\n      # else\n      precision mediump float;\n      # endif\n\n      attribute vec2 a_position;\n      attribute vec2 a_textureCoordinate;\n      attribute vec4 a_color;\n\n      uniform vec2 u_resolution;\n      uniform float u_pixelRatio;\n\n\n      varying vec4 v_color;\n      varying vec2 v_textureCoordinate;\n\n      void main() {\n        vec2 normalized = a_position * u_pixelRatio;\n        vec2 screenSpace = vec2(2.0 / u_resolution.x, -2.0 / u_resolution.y);\n\n        v_color = a_color;\n        v_textureCoordinate = a_textureCoordinate;\n\n        gl_Position = vec4(normalized.x * screenSpace.x - 1.0, normalized.y * -abs(screenSpace.y) + 1.0, 0.0, 1.0);\n        gl_Position.y = -sign(screenSpace.y) * gl_Position.y;\n      }\n    ",fragment:"\n      # ifdef GL_FRAGMENT_PRESICISON_HIGH\n      precision highp float;\n      # else\n      precision mediump float;\n      # endif\n\n      uniform vec2 u_resolution;\n      uniform sampler2D u_texture;\n\n      varying vec4 v_color;\n      varying vec2 v_textureCoordinate;\n\n      void main() {\n          vec4 color = texture2D(u_texture, v_textureCoordinate);\n          gl_FragColor = vec4(v_color) * texture2D(u_texture, v_textureCoordinate);\n      }\n    "});class PC extends Vp{constructor(c){super({renderer:c,attributes:["a_position","a_textureCoordinate","a_color","a_textureIndex"],uniforms:[{name:"u_resolution",uniform:"uniform2fv"},{name:"u_pixelRatio",uniform:"uniform1f"},{name:"u_textures[0]",uniform:"uniform1iv"}]});Y(this,"supportsIndexedTextures",!0)}bindTextures(c){const{renderer:y,glw:S}=this;if(c.length>y.system.parameters.MAX_VERTEX_TEXTURE_IMAGE_UNITS)throw new Error("DefaultShaderBatched: Cannot bind more than ".concat(y.system.parameters.MAX_VERTEX_TEXTURE_IMAGE_UNITS," textures"));c.forEach((P,v)=>{S.activeTexture(v),S.bindTexture(P.ctxTexture)});const R=Array.from(Array(c.length).keys());this.setUniform("u_textures[0]",R)}}Y(PC,"shaderSources",{vertex:"\n      # ifdef GL_FRAGMENT_PRESICISON_HIGH\n      precision highp float;\n      # else\n      precision mediump float;\n      # endif\n\n      attribute vec2 a_textureCoordinate;\n      attribute vec2 a_position;\n      attribute vec4 a_color;\n      attribute float a_textureIndex;\n      attribute float a_depth;\n\n      uniform vec2 u_resolution;\n      uniform float u_pixelRatio;\n\n      varying vec4 v_color;\n      varying vec2 v_textureCoordinate;\n      varying float v_textureIndex;\n\n      void main(){\n        vec2 normalized = a_position * u_pixelRatio / u_resolution;\n        vec2 zero_two = normalized * 2.0;\n        vec2 clip_space = zero_two - 1.0;\n\n        // pass to fragment\n        v_color = a_color;\n        v_textureCoordinate = a_textureCoordinate;\n        v_textureIndex = a_textureIndex;\n\n        // flip y\n        gl_Position = vec4(clip_space * vec2(1.0, -1.0), 0, 1);\n      }\n    ",fragment:c=>"\n      #define txUnits ".concat(c,"\n      # ifdef GL_FRAGMENT_PRESICISON_HIGH\n      precision highp float;\n      # else\n      precision mediump float;\n      # endif\n\n      uniform vec2 u_resolution;\n      uniform sampler2D u_image;\n      uniform sampler2D u_textures[txUnits];\n\n      varying vec4 v_color;\n      varying vec2 v_textureCoordinate;\n      varying float v_textureIndex;\n\n      vec4 sampleFromTexture(sampler2D textures[").concat(c,"], int idx, vec2 uv) {\n        ").concat(Array.from(Array(c).keys()).map(y=>"\n          ".concat(y!==0?"else ":"","if (idx == ").concat(y,") {\n            return texture2D(textures[").concat(y,"], uv);\n          }\n        ")).join(""),"\n        return texture2D(textures[0], uv);\n      }\n\n      void main(){\n        gl_FragColor = vec4(v_color) * sampleFromTexture(u_textures, int(v_textureIndex), v_textureCoordinate);\n      }\n    ")});function OC(E,x){var c=0,y,S;x=x||{};function R(){var P=y,v=arguments.length,F,V;e:for(;P;){if(P.args.length!==arguments.length){P=P.next;continue}for(V=0;V<v;V++)if(P.args[V]!==arguments[V]){P=P.next;continue e}return P!==y&&(P===S&&(S=P.prev),P.prev.next=P.next,P.next&&(P.next.prev=P.prev),P.next=y,P.prev=null,y.prev=P,y=P),P.val}for(F=new Array(v),V=0;V<v;V++)F[V]=arguments[V];return P={args:F,val:E.apply(null,F)},y?(y.prev=P,P.next=y):S=P,c===x.maxSize?(S=S.prev,S.next=null):c++,y=P,P.val}return R.clear=function(){y=null,S=null,c=0},R}const ZS=new Map,jk=(E,x)=>{const c=JSON.stringify(E);if(ZS.has(c))return ZS.get(c);const y=(E!=null?E:[]).map(S=>({type:S.type,props:x[S.type].resolveDefaults(S.props||{})}));return ZS.set(c,y),y},ga=class ga extends Vp{constructor(c,y,S){const R=ga.createShader(y,S);super({renderer:c,attributes:["a_position","a_textureCoordinate","a_color"],uniforms:[{name:"u_resolution",uniform:"uniform2fv"},{name:"u_pixelRatio",uniform:"uniform1f"},{name:"u_texture",uniform:"uniform2fv"},{name:"u_dimensions",uniform:"uniform2fv"},{name:"u_alpha",uniform:"uniform1f"},...R.uniforms],shaderSources:{vertex:R.vertex,fragment:R.fragment}});Y(this,"effects",[]);this.effects=R.effects,this.calculateProps=OC(this.calculateProps.bind(this))}bindTextures(c){const{glw:y}=this;y.activeTexture(0),y.bindTexture(c[0].ctxTexture)}calculateProps(c){const y=this.renderer.shManager.getRegisteredEffects(),S=[];return c==null||c.forEach((R,P)=>{var ee;const v=this.effects[P],F=y[v.name],V=(ee=R.props)!=null?ee:{},H=v.uniformInfo;Object.keys(V).forEach(te=>{const me=F.uniforms[te],A=H[te];let q=me.validator?me.validator(V[te],V):V[te];Array.isArray(q)&&(q=new Float32Array(q)),S.push({name:A.name,value:q})})}),S}bindProps(c){this.calculateProps(c.effects).forEach(S=>{this.setUniform(S.name,S.value)})}canBatchShaderProps(c,y){if(c.$dimensions.width!==y.$dimensions.width||c.$dimensions.height!==y.$dimensions.height||c.effects.length!==y.effects.length)return!1;const S=c.effects.length;let R=0;for(;R<S;R++){const P=c.effects[R],v=y.effects[R];if(P.type!==v.type)return!1;for(const F in P.props)if(v.props&&!v.props[F]||P.props[F]!==v.props[F])return!1}return!0}static createShader(c,y){const S={},R={};let P="";const v=[],F=[],V=c.effects.map(A=>{const q=y[A.type],ie=q.getEffectKey(A.props||{});S[ie]=S[ie]?++S[ie]:1;const ve=S[ie];ve===1&&F.push({key:ie,type:A.type,props:A.props});const ue=new q({ref:"".concat(ie).concat(ve===1?"":ve),target:ie,props:A.props});return P+=ue.declaredUniforms,v.push(...Object.values(ue.uniformInfo)),ue});let H="";F==null||F.forEach(A=>{var Le;const q=y[A.type],ie=q.resolveDefaults((Le=A.props)!=null?Le:{}),ve=[];for(const Ne in q.methods){let Re=Ne;const k=q.methods[Ne];R[Ne]&&R[Ne]!==k&&(Re=ga.resolveMethodDuplicate(Ne,k,R)),R[Re]=k.replace("function",Re),ve.push({m:Ne,cm:Re})}let ue=q.onShaderMask instanceof Function?q.onShaderMask(ie):q.onShaderMask,he=q.onColorize instanceof Function?q.onColorize(ie):q.onColorize,re=q.onEffectMask instanceof Function?q.onEffectMask(ie):q.onEffectMask;ve.forEach(Ne=>{const{m:Re,cm:k}=Ne,le=new RegExp("\\$".concat(Re),"g");ue&&(ue=ue.replace(le,k)),he&&(he=he.replace(le,k)),re&&(re=re.replace(le,k))});const ke=q.getMethodParameters(q.uniforms,ie),Te=ke.length>0?", ".concat(ke):"";ue&&(H+="\n        float fx_".concat(A.key,"_onShaderMask(float shaderMask ").concat(Te,") {\n          ").concat(ue,"\n        }\n        ")),he&&(H+="\n          vec4 fx_".concat(A.key,"_onColorize(float shaderMask, vec4 maskColor, vec4 shaderColor").concat(Te,") {\n            ").concat(he,"\n          }\n        ")),re&&(H+="\n          vec4 fx_".concat(A.key,"_onEffectMask(float shaderMask, vec4 maskColor, vec4 shaderColor").concat(Te,") {\n            ").concat(re,"\n          }\n        "))});let ee="";for(const A in R)ee+=R[A];let te="mix(shaderColor, maskColor, clamp(-(lng_DefaultMask), 0.0, 1.0))",me="\n\n    ";for(let A=0;A<V.length;A++){const q=V[A],ie=q.passParameters.length>0?", ".concat(q.passParameters):"",ve=y[q.name];ve.onShaderMask&&(me+="\n        shaderMask = fx_".concat(q.target,"_onShaderMask(shaderMask ").concat(ie,");\n        ")),ve.onColorize&&(me+="\n        maskColor = fx_".concat(q.target,"_onColorize(shaderMask, maskColor, shaderColor").concat(ie,");\n        ")),ve.onEffectMask&&(te="fx_".concat(q.target,"_onEffectMask(shaderMask, maskColor, shaderColor").concat(ie,")"));const ue=V[A+1];(ue===void 0||y[ue.name].onEffectMask)&&(me+="\n          shaderColor = ".concat(te,";\n        "))}return{effects:V,uniforms:v,fragment:ga.fragment(P,ee,H,me),vertex:ga.vertex()}}static resolveMethodDuplicate(c,y,S,R=0){const P=c+(R>0?R:"");return S[P]&&S[P]!==y?this.resolveMethodDuplicate(c,y,S,++R):P}static resolveDefaults(c,y){return{effects:jk(c.effects,y),$dimensions:{width:0,height:0},$alpha:0}}static makeCacheKey(c,y){var R;let S="";return(R=c.effects)==null||R.forEach(P=>{const F=y[P.type].getEffectKey(P.props||{});S+=",".concat(F)}),"DynamicShader".concat(S)}};Y(ga,"z$__type__Props"),Y(ga,"vertex",()=>"\n    # ifdef GL_FRAGMENT_PRESICISON_HIGH\n    precision highp float;\n    # else\n    precision mediump float;\n    # endif\n\n    attribute vec2 a_textureCoordinate;\n    attribute vec2 a_position;\n    attribute vec4 a_color;\n    attribute float a_textureIndex;\n\n    uniform vec2 u_resolution;\n    uniform float u_pixelRatio;\n\n    varying vec4 v_color;\n    varying vec2 v_textureCoordinate;\n    varying float v_textureIndex;\n\n    void main(){\n      vec2 normalized = a_position * u_pixelRatio / u_resolution;\n      vec2 zero_two = normalized * 2.0;\n      vec2 clip_space = zero_two - 1.0;\n\n      // pass to fragment\n      v_color = a_color;\n      v_textureCoordinate = a_textureCoordinate;\n      v_textureIndex = a_textureIndex;\n\n      // flip y\n      gl_Position = vec4(clip_space * vec2(1.0, -1.0), 0, 1);\n    }\n  "),Y(ga,"fragment",(c,y,S,R)=>"\n    # ifdef GL_FRAGMENT_PRESICISON_HIGH\n    precision highp float;\n    # else\n    precision mediump float;\n    # endif\n\n    #define PI 3.14159265359\n\n    uniform vec2 u_resolution;\n    uniform vec2 u_dimensions;\n    uniform float u_alpha;\n    uniform float u_radius;\n    uniform sampler2D u_texture;\n    uniform float u_pixelRatio;\n\n    ".concat(c,"\n\n    varying vec4 v_color;\n    varying vec2 v_textureCoordinate;\n\n    ").concat(y,"\n\n    ").concat(S,"\n\n    void main() {\n      vec2 p = v_textureCoordinate.xy * u_dimensions - u_dimensions * 0.5;\n      vec2 d = abs(p) - (u_dimensions) * 0.5;\n      float lng_DefaultMask = min(max(d.x, d.y), 0.0) + length(max(d, 0.0));\n\n      vec4 shaderColor = vec4(0.0);\n      float shaderMask = lng_DefaultMask;\n\n      vec4 maskColor = texture2D(u_texture, v_textureCoordinate) * v_color;\n\n      shaderColor = mix(shaderColor, maskColor, clamp(-(lng_DefaultMask + 0.5), 0.0, 1.0));\n\n      ").concat(R,"\n\n      gl_FragColor = shaderColor * u_alpha;\n    }\n  "));let jp=ga;class lI extends Vp{constructor(x){super({renderer:x,attributes:["a_position","a_textureCoordinate","a_color"],uniforms:[{name:"u_resolution",uniform:"uniform2fv"},{name:"u_pixelRatio",uniform:"uniform1f"},{name:"u_texture",uniform:"uniform2f"},{name:"u_dimensions",uniform:"uniform2fv"},{name:"u_radius",uniform:"uniform1f"}]})}static resolveDefaults(x){return{radius:x.radius||10,$dimensions:{width:0,height:0}}}bindTextures(x){const{glw:c}=this;c.activeTexture(0),c.bindTexture(x[0].ctxTexture)}bindProps(x){this.setUniform("u_radius",x.radius)}canBatchShaderProps(x,c){return x.radius===c.radius&&x.$dimensions.width===c.$dimensions.width&&x.$dimensions.height===c.$dimensions.height}}Y(lI,"z$__type__Props"),Y(lI,"shaderSources",{vertex:"\n      # ifdef GL_FRAGMENT_PRESICISON_HIGH\n      precision highp float;\n      # else\n      precision mediump float;\n      # endif\n\n      attribute vec2 a_position;\n      attribute vec2 a_textureCoordinate;\n      attribute vec4 a_color;\n      attribute float a_textureIndex;\n      attribute float a_depth;\n\n      uniform vec2 u_resolution;\n      uniform float u_pixelRatio;\n\n      varying vec4 v_color;\n      varying vec2 v_textureCoordinate;\n\n      void main() {\n        vec2 normalized = a_position * u_pixelRatio / u_resolution;\n        vec2 zero_two = normalized * 2.0;\n        vec2 clip_space = zero_two - 1.0;\n\n        // pass to fragment\n        v_color = a_color;\n        v_textureCoordinate = a_textureCoordinate;\n\n        // flip y\n        gl_Position = vec4(clip_space * vec2(1.0, -1.0), 0, 1);\n      }\n    ",fragment:"\n      # ifdef GL_FRAGMENT_PRESICISON_HIGH\n      precision highp float;\n      # else\n      precision mediump float;\n      # endif\n\n      uniform vec2 u_resolution;\n      uniform vec2 u_dimensions;\n      uniform float u_radius;\n      uniform sampler2D u_texture;\n\n      varying vec4 v_color;\n      varying vec2 v_textureCoordinate;\n\n      float boxDist(vec2 p, vec2 size, float radius){\n        size -= vec2(radius);\n        vec2 d = abs(p) - size;\n        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0)) - radius;\n      }\n\n      float fillMask(float dist) {\n        return clamp(-dist, 0.0, 1.0);\n      }\n\n      void main() {\n        vec4 color = texture2D(u_texture, v_textureCoordinate) * v_color;\n        vec2 halfDimensions = u_dimensions * 0.5;\n\n        float d = boxDist(v_textureCoordinate.xy * u_dimensions - halfDimensions, halfDimensions + 0.5, u_radius);\n        gl_FragColor = mix(vec4(0.0), color, fillMask(d));\n      }\n    "});const Bk=new Float32Array([1,0,0,0,1,0,0,0,1]),bw=class bw extends Vp{constructor(x){super({renderer:x,attributes:["a_position","a_textureCoordinate"],uniforms:[{name:"u_resolution",uniform:"uniform2fv"},{name:"u_transform",uniform:"uniformMatrix3fv"},{name:"u_scrollY",uniform:"uniform1f"},{name:"u_pixelRatio",uniform:"uniform1f"},{name:"u_texture",uniform:"uniform2f"},{name:"u_color",uniform:"uniform4fv"},{name:"u_size",uniform:"uniform1f"},{name:"u_distanceRange",uniform:"uniform1f"},{name:"u_debug",uniform:"uniform1i"}]})}bindTextures(x){const{glw:c}=this;c.activeTexture(0),c.bindTexture(x[0].ctxTexture)}bindProps(x){const c=bw.resolveDefaults(x);for(const y in c)if(y==="transform")this.setUniform("u_transform",!1,c[y]);else if(y==="scrollY")this.setUniform("u_scrollY",c[y]);else if(y==="color"){const S=au(c.color);this.setUniform("u_color",S)}else y==="size"?this.setUniform("u_size",c[y]):y==="distanceRange"?this.setUniform("u_distanceRange",c[y]):y==="debug"&&this.setUniform("u_debug",c[y]?1:0)}static resolveDefaults(x={}){var c,y,S,R,P,v;return{transform:(c=x.transform)!=null?c:Bk,scrollY:(y=x.scrollY)!=null?y:0,color:(S=x.color)!=null?S:4294967295,size:(R=x.size)!=null?R:16,distanceRange:(P=x.distanceRange)!=null?P:1,debug:(v=x.debug)!=null?v:!1}}};Y(bw,"shaderSources",{vertex:"\n      // an attribute is an input (in) to a vertex shader.\n      // It will receive data from a buffer\n      attribute vec2 a_position;\n      attribute vec2 a_textureCoordinate;\n\n      uniform vec2 u_resolution;\n      uniform mat3 u_transform;\n      uniform float u_scrollY;\n      uniform float u_pixelRatio;\n      uniform float u_size;\n\n      varying vec2 v_texcoord;\n\n      void main() {\n        vec2 scrolledPosition = a_position * u_size - vec2(0, u_scrollY);\n        vec2 transformedPosition = (u_transform * vec3(scrolledPosition, 1)).xy;\n\n        // Calculate screen space with pixel ratio\n        vec2 screenSpace = (transformedPosition * u_pixelRatio / u_resolution * 2.0 - 1.0) * vec2(1, -1);\n\n        gl_Position = vec4(screenSpace, 0.0, 1.0);\n        v_texcoord = a_textureCoordinate;\n\n      }\n    ",fragment:"\n      precision highp float;\n\n      uniform vec4 u_color;\n      uniform sampler2D u_texture;\n      uniform float u_distanceRange;\n      uniform float u_pixelRatio;\n      uniform int u_debug;\n\n      varying vec2 v_texcoord;\n\n      float median(float r, float g, float b) {\n          return max(min(r, g), min(max(r, g), b));\n      }\n\n      void main() {\n          vec3 sample = texture2D(u_texture, v_texcoord).rgb;\n          if (u_debug == 1) {\n            gl_FragColor = vec4(sample.r, sample.g, sample.b, 1.0);\n            return;\n          }\n          float scaledDistRange = u_distanceRange * u_pixelRatio;\n          float sigDist = scaledDistRange * (median(sample.r, sample.g, sample.b) - 0.5);\n          float opacity = clamp(sigDist + 0.5, 0.0, 1.0) * u_color.a;\n\n          // Build the final color.\n          // IMPORTANT: We must premultiply the color by the alpha value before returning it.\n          gl_FragColor = vec4(u_color.r * opacity, u_color.g * opacity, u_color.b * opacity, opacity);\n      }\n    "});let cI=bw;class Rp extends Ei{constructor(){super(...arguments);Y(this,"name","radius")}static getEffectKey(){return"radius"}static resolveDefaults(c){var y;return{radius:(y=c.radius)!=null?y:10}}}Y(Rp,"z$__type__Props"),Y(Rp,"uniforms",{radius:{value:0,method:"uniform4fv",type:"vec4",validator:c=>{let y=c;return Array.isArray(y)?y.length===2?y=[y[0],y[1],y[0],y[1]]:y.length===3?y=[y[0],y[1],y[2],y[0]]:y.length!==4&&(y=[y[0],y[0],y[0],y[0]]):typeof y=="number"&&(y=[y,y,y,y]),y}}}),Y(Rp,"methods",{fillMask:"\n      float function(float dist) {\n        return clamp(-dist, 0.0, 1.0);\n      }\n    ",boxDist:"\n      float function(vec2 p, vec2 size, float radius) {\n        size -= vec2(radius);\n        vec2 d = abs(p) - size;\n        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0)) - radius;\n      }\n    "}),Y(Rp,"onShaderMask","\n  vec2 halfDimensions = u_dimensions * 0.5;\n  float r = radius[0] * step(v_textureCoordinate.x, 0.5) * step(v_textureCoordinate.y, 0.5);\n  r = r + radius[1] * step(0.5, v_textureCoordinate.x) * step(v_textureCoordinate.y, 0.5);\n  r = r + radius[2] * step(0.5, v_textureCoordinate.x) * step(0.5, v_textureCoordinate.y);\n  r = r + radius[3] * step(v_textureCoordinate.x, 0.5) * step(0.5, v_textureCoordinate.y);\n  return $boxDist(v_textureCoordinate.xy * u_dimensions - halfDimensions, halfDimensions, r);\n  "),Y(Rp,"onEffectMask","\n  return mix(vec4(0.0), maskColor, $fillMask(shaderMask));\n  ");class Bv extends Ei{constructor(){super(...arguments);Y(this,"name","border")}static getEffectKey(){return"border"}static resolveDefaults(c){var y,S;return{width:(y=c.width)!=null?y:10,color:(S=c.color)!=null?S:4294967295}}}Y(Bv,"z$__type__Props"),Y(Bv,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},color:{value:4294967295,validator:c=>au(c),method:"uniform4fv",type:"vec4"}}),Y(Bv,"onEffectMask","\n  float mask = clamp(shaderMask + width, 0.0, 1.0) - clamp(shaderMask, 0.0, 1.0);\n  return mix(shaderColor, mix(shaderColor, maskColor, maskColor.a), mask);\n  "),Y(Bv,"onColorize","\n    return color;\n  ");const Ol=class Ol extends Ei{constructor(){super(...arguments);Y(this,"name","linearGradient")}static getEffectKey(c){return"linearGradient".concat(c.colors.length)}static resolveDefaults(c){var R,P;const y=(R=c.colors)!=null?R:[4278190080,4294967295];let S=c.stops||[];if(S.length===0||S.length!==y.length){const v=y.length;let F=0;const V=S;for(;F<v;F++)S[F]?(V[F]=S[F],S[F-1]===void 0&&V[F-2]!==void 0&&(V[F-1]=V[F-2]+(S[F]-V[F-2])/2)):V[F]=F*(1/(y.length-1));S=V}return{colors:y,stops:S,angle:(P=c.angle)!=null?P:0}}};Y(Ol,"z$__type__Props"),Y(Ol,"uniforms",{angle:{value:0,method:"uniform1f",type:"float"},colors:{value:4294967295,validator:c=>c.map(S=>au(S)).reduce((S,R)=>S.concat(R),[]),size:c=>c.colors.length,method:"uniform4fv",type:"vec4"},stops:{value:[],size:c=>c.colors.length,method:"uniform1fv",type:"float"}}),Y(Ol,"methods",{fromLinear:"\n      vec4 function(vec4 linearRGB) {\n        vec4 higher = vec4(1.055)*pow(linearRGB, vec4(1.0/2.4)) - vec4(0.055);\n        vec4 lower = linearRGB * vec4(12.92);\n        return mix(higher, lower, 1.0);\n      }\n    ",toLinear:"\n      vec4 function(vec4 sRGB) {\n        vec4 higher = pow((sRGB + vec4(0.055))/vec4(1.055), vec4(2.4));\n        vec4 lower = sRGB/vec4(12.92);\n        return mix(higher, lower, 1.0);\n      }\n    ",calcPoint:"\n      vec2 function(float d, float angle) {\n        return d * vec2(cos(angle), sin(angle)) + (u_dimensions * 0.5);\n      }\n    "}),Y(Ol,"ColorLoop",c=>{let y="";for(let S=2;S<c;S++)y+="colorOut = mix(colorOut, colors[".concat(S,"], clamp((dist - stops[").concat(S-1,"]) / (stops[").concat(S,"] - stops[").concat(S-1,"]), 0.0, 1.0));");return y}),Y(Ol,"onColorize",c=>{const y=c.colors.length||1;return"\n      float a = angle - (PI / 180.0 * 90.0);\n      float lineDist = abs(u_dimensions.x * cos(a)) + abs(u_dimensions.y * sin(a));\n      vec2 f = $calcPoint(lineDist * 0.5, a);\n      vec2 t = $calcPoint(lineDist * 0.5, a + PI);\n      vec2 gradVec = t - f;\n      float dist = dot(v_textureCoordinate.xy * u_dimensions - f, gradVec) / dot(gradVec, gradVec);\n\n      float stopCalc = (dist - stops[0]) / (stops[1] - stops[0]);\n      vec4 colorOut = $fromLinear(mix($toLinear(colors[0]), $toLinear(colors[1]), stopCalc));\n      ".concat(Ol.ColorLoop(y),"\n      return mix(maskColor, colorOut, clamp(colorOut.a, 0.0, 1.0));\n    ")});let dI=Ol;class hI extends Ei{constructor(){super(...arguments);Y(this,"name","grayscale")}static getEffectKey(){return"grayscale"}static resolveDefaults(c){var y;return{amount:(y=c.amount)!=null?y:1}}}Y(hI,"uniforms",{amount:{value:1,method:"uniform1f",type:"float"}}),Y(hI,"onColorize","\n    float grayness = 0.2 * maskColor.r + 0.6 * maskColor.g + 0.2 * maskColor.b;\n    return vec4(amount * vec3(grayness) + (1.0 - amount) * maskColor.rgb, maskColor.a);\n  ");class Lp extends Ei{constructor(){super(...arguments);Y(this,"name","borderRight")}static getEffectKey(){return"borderRight"}static resolveDefaults(c){var y,S;return{width:(y=c.width)!=null?y:10,color:(S=c.color)!=null?S:4294967295}}}Y(Lp,"z$__type__Props"),Y(Lp,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},color:{value:4294967295,validator:c=>au(c),method:"uniform4fv",type:"vec4"}}),Y(Lp,"methods",{fillMask:"\n      float function(float dist) {\n        return clamp(-dist, 0.0, 1.0);\n      }\n    ",rectDist:"\n      float function(vec2 p, vec2 size) {\n        vec2 d = abs(p) - size;\n        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0));\n      }\n    "}),Y(Lp,"onEffectMask","\n  vec2 pos = vec2(u_dimensions.x - width * 0.5, 0.0);\n  float mask = $rectDist(v_textureCoordinate.xy * u_dimensions - pos, vec2(width*0.5, u_dimensions.y));\n  return mix(shaderColor, maskColor, $fillMask(mask));\n  "),Y(Lp,"onColorize","\n    return color;\n  ");class Np extends Ei{constructor(){super(...arguments);Y(this,"name","borderTop")}static getEffectKey(){return"borderTop"}static resolveDefaults(c){var y,S;return{width:(y=c.width)!=null?y:10,color:(S=c.color)!=null?S:4294967295}}}Y(Np,"z$__type__Props"),Y(Np,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},color:{value:4294967295,validator:c=>au(c),method:"uniform4fv",type:"vec4"}}),Y(Np,"methods",{fillMask:"\n      float function(float dist) {\n        return clamp(-dist, 0.0, 1.0);\n      }\n    ",rectDist:"\n      float function(vec2 p, vec2 size) {\n        vec2 d = abs(p) - size;\n        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0));\n      }\n    "}),Y(Np,"onEffectMask","\n  vec2 pos = vec2(0.0, width * 0.5);\n  float mask = $rectDist(v_textureCoordinate.xy * u_dimensions - pos, vec2(u_dimensions.x, width*0.5));\n  return mix(shaderColor, maskColor, $fillMask(mask));\n  "),Y(Np,"onColorize","\n    return color;\n  ");class Dp extends Ei{constructor(){super(...arguments);Y(this,"name","borderBottom")}static getEffectKey(){return"borderBottom"}static resolveDefaults(c){var y,S;return{width:(y=c.width)!=null?y:10,color:(S=c.color)!=null?S:4294967295}}}Y(Dp,"z$__type__Props"),Y(Dp,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},color:{value:4294967295,validator:c=>au(c),method:"uniform4fv",type:"vec4"}}),Y(Dp,"methods",{fillMask:"\n      float function(float dist) {\n        return clamp(-dist, 0.0, 1.0);\n      }\n    ",rectDist:"\n      float function(vec2 p, vec2 size) {\n        vec2 d = abs(p) - size;\n        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0));\n      }\n    "}),Y(Dp,"onEffectMask","\n  vec2 pos = vec2(0.0, u_dimensions.y - width * 0.5);\n  float mask = $rectDist(v_textureCoordinate.xy * u_dimensions - pos, vec2(u_dimensions.x, width*0.5));\n  return mix(shaderColor, maskColor, $fillMask(mask));\n  "),Y(Dp,"onColorize","\n    return color;\n  ");class bp extends Ei{constructor(){super(...arguments);Y(this,"name","borderLeft")}static getEffectKey(){return"borderLeft"}static resolveDefaults(c){var y,S;return{width:(y=c.width)!=null?y:10,color:(S=c.color)!=null?S:4294967295}}}Y(bp,"z$__type__Props"),Y(bp,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},color:{value:4294967295,validator:c=>au(c),method:"uniform4fv",type:"vec4"}}),Y(bp,"methods",{fillMask:"\n      float function(float dist) {\n        return clamp(-dist, 0.0, 1.0);\n      }\n    ",rectDist:"\n      float function(vec2 p, vec2 size) {\n        vec2 d = abs(p) - size;\n        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0));\n      }\n    "}),Y(bp,"onEffectMask","\n  vec2 pos = vec2(width * 0.5, 0.0);\n  float mask = $rectDist(v_textureCoordinate.xy * u_dimensions - pos, vec2(width*0.5, u_dimensions.y));\n  return mix(shaderColor, maskColor, $fillMask(mask));\n  "),Y(bp,"onColorize","\n    return color;\n  ");class Fv extends Ei{constructor(){super(...arguments);Y(this,"name","glitch")}static getEffectKey(c){return"glitch"}static resolveDefaults(c){var y,S,R,P,v;return{amplitude:(y=c.amplitude)!=null?y:.2,narrowness:(S=c.narrowness)!=null?S:4,blockiness:(R=c.blockiness)!=null?R:2,minimizer:(P=c.minimizer)!=null?P:8,time:(v=c.time)!=null?v:Date.now()}}}Y(Fv,"z$__type__Props"),Y(Fv,"uniforms",{amplitude:{value:0,method:"uniform1f",type:"float"},narrowness:{value:0,method:"uniform1f",type:"float"},blockiness:{value:0,method:"uniform1f",type:"float"},minimizer:{value:0,method:"uniform1f",type:"float"},time:{value:0,method:"uniform1f",validator:c=>(Date.now()-c)%1e3,type:"float"}}),Y(Fv,"methods",{rand:"\n      float function(vec2 p, float time) {\n        float t = floor(time * 20.) / 10.;\n        return fract(sin(dot(p, vec2(t * 12.9898, t * 78.233))) * 43758.5453);\n      }\n    ",noise:"\n      float function(vec2 uv, float blockiness, float time) {\n        vec2 lv = fract(uv);\n        vec2 id = floor(uv);\n\n        float n1 = rand(id, time);\n        float n2 = rand(id+vec2(1,0), time);\n        float n3 = rand(id+vec2(0,1), time);\n        float n4 = rand(id+vec2(1,1), time);\n        vec2 u = smoothstep(0.0, 1.0 + blockiness, lv);\n        return mix(mix(n1, n2, u.x), mix(n3, n4, u.x), u.y);\n      }\n    ",fbm:"\n      float function(vec2 uv, int count, float blockiness, float complexity, float time) {\n        float val = 0.0;\n        float amp = 0.5;\n        const int MAX_ITERATIONS = 10;\n\n        for(int i = 0; i < MAX_ITERATIONS; i++) {\n          if(i >= count) {break;}\n          val += amp * noise(uv, blockiness, time);\n          amp *= 0.5;\n          uv *= complexity;\n        }\n        return val;\n      }\n    "}),Y(Fv,"onColorize","\n    vec2 uv = v_textureCoordinate.xy;\n    float aspect = u_dimensions.x / u_dimensions.y;\n    vec2 a = vec2(uv.x * aspect , uv.y);\n    vec2 uv2 = vec2(a.x / u_dimensions.x, exp(a.y));\n\n    float shift = amplitude * pow($fbm(uv2, 4, blockiness, narrowness, time), minimizer);\n    float colR = texture2D(u_texture, vec2(uv.x + shift, uv.y)).r * (1. - shift);\n    float colG = texture2D(u_texture, vec2(uv.x - shift, uv.y)).g * (1. - shift);\n    float colB = texture2D(u_texture, vec2(uv.x - shift, uv.y)).b * (1. - shift);\n\n    vec3 f = vec3(colR, colG, colB);\n    return vec4(f, texture2D(u_texture, vec2(uv.x - shift, uv.y)).a);\n  ");class xw extends Ei{constructor(){super(...arguments);Y(this,"name","fadeOut")}static getEffectKey(){return"fadeOut"}static resolveDefaults(c){var y;return{fade:(y=c.fade)!=null?y:10}}}Y(xw,"z$__type__Props"),Y(xw,"uniforms",{fade:{value:0,method:"uniform4fv",type:"vec4",validator:c=>{let y=c;return Array.isArray(y)?y.length===2?y=[y[0],y[1],y[0],y[1]]:y.length===3?y=[y[0],y[1],y[2],y[0]]:y.length!==4&&(y=[y[0],y[0],y[0],y[0]]):typeof y=="number"&&(y=[y,y,y,y]),y}}}),Y(xw,"onColorize","\n  vec2 point = v_textureCoordinate.xy * u_dimensions.xy;\n  vec2 pos1;\n  vec2 pos2;\n  vec2 d;\n  float c;\n  vec4 result = maskColor;\n\n\n  if(fade[0] > 0.0) {\n    pos1 = vec2(point.x, point.y);\n    pos2 = vec2(point.x, point.y + fade[0]);\n    d = pos2 - pos1;\n    c = dot(pos1, d) / dot(d, d);\n    result = mix(vec4(0.0), result, smoothstep(0.0, 1.0, clamp(c, 0.0, 1.0)));\n  }\n\n  if(fade[1] > 0.0) {\n    pos1 = vec2(point.x - u_dimensions.x - fade[1], v_textureCoordinate.y);\n    pos2 = vec2(point.x - u_dimensions.x, v_textureCoordinate.y);\n    d = pos1 - pos2;\n    c = dot(pos2, d) / dot(d, d);\n    result = mix(vec4(0.0), result, smoothstep(0.0, 1.0, clamp(c, 0.0, 1.0)));\n  }\n\n  if(fade[2] > 0.0) {\n    pos1 = vec2(v_textureCoordinate.x, point.y - u_dimensions.y - fade[2]);\n    pos2 = vec2(v_textureCoordinate.x, point.y - u_dimensions.y);\n    d = pos1 - pos2;\n    c = dot(pos2, d) / dot(d, d);\n    result = mix(vec4(0.0), result, smoothstep(0.0, 1.0, clamp(c, 0.0, 1.0)));\n  }\n\n  if(fade[3] > 0.0) {\n    pos1 = vec2(point.x, point.y);\n    pos2 = vec2(point.x + fade[3], point.y);\n    d = pos2 - pos1;\n    c = dot(pos1, d) / dot(d, d);\n    result = mix(vec4(0.0), result, smoothstep(0.0, 1.0, clamp(c, 0.0, 1.0)));\n  }\n\n  return result;\n  ");const kd=class kd extends Ei{constructor(){super(...arguments);Y(this,"name","radialGradient")}static getEffectKey(c){return"radialGradient".concat(c.colors.length)}static resolveDefaults(c){var R,P,v,F,V;const y=(R=c.colors)!=null?R:[4278190080,4294967295];let S=c.stops||[];if(S.length===0||S.length!==y.length){const H=y.length;let ee=0;const te=S;for(;ee<H;ee++)S[ee]?(te[ee]=S[ee],S[ee-1]===void 0&&te[ee-2]!==void 0&&(te[ee-1]=te[ee-2]+(S[ee]-te[ee-2])/2)):te[ee]=ee*(1/(y.length-1));S=te}return{colors:y,stops:S,width:(P=c.width)!=null?P:0,height:(F=(v=c.height)!=null?v:c.width)!=null?F:0,pivot:(V=c.pivot)!=null?V:[.5,.5]}}};Y(kd,"z$__type__Props"),Y(kd,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},height:{value:0,method:"uniform1f",type:"float"},pivot:{value:[.5,.5],method:"uniform2fv",type:"vec2"},colors:{value:4294967295,validator:c=>c.map(S=>au(S)).reduce((S,R)=>S.concat(R),[]),size:c=>c.colors.length,method:"uniform4fv",type:"vec4"},stops:{value:[],size:c=>c.colors.length,method:"uniform1fv",type:"float"}}),Y(kd,"ColorLoop",c=>{let y="";for(let S=2;S<c;S++)y+="colorOut = mix(colorOut, colors[".concat(S,"], clamp((dist - stops[").concat(S-1,"]) / (stops[").concat(S,"] - stops[").concat(S-1,"]), 0.0, 1.0));");return y}),Y(kd,"onColorize",c=>{const y=c.colors.length||1;return"\n      vec2 point = v_textureCoordinate.xy * u_dimensions;\n      vec2 projection = vec2(pivot.x * u_dimensions.x, pivot.y * u_dimensions.y);\n\n      float dist = length((point - projection) / vec2(width, height));\n\n      float stopCalc = (dist - stops[0]) / (stops[1] - stops[0]);\n      vec4 colorOut = mix(colors[0], colors[1], stopCalc);\n      ".concat(kd.ColorLoop(y),"\n      return mix(maskColor, colorOut, clamp(colorOut.a, 0.0, 1.0));\n    ")});let fI=kd;class Pp extends Ei{constructor(){super(...arguments);Y(this,"name","radialProgress")}static getEffectKey(){return"radialProgress"}static resolveDefaults(c){var y,S,R,P,v,F,V;return{width:(y=c.width)!=null?y:10,progress:(S=c.progress)!=null?S:.5,offset:(R=c.offset)!=null?R:0,range:(P=c.range)!=null?P:Math.PI*2,rounded:(v=c.rounded)!=null?v:!1,radius:(F=c.radius)!=null?F:1,color:(V=c.color)!=null?V:4294967295}}}Y(Pp,"z$__type__Props"),Y(Pp,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},progress:{value:.5,method:"uniform1f",type:"float"},offset:{value:0,method:"uniform1f",type:"float"},range:{value:0,method:"uniform1f",type:"float"},rounded:{value:0,method:"uniform1f",type:"float",validator:c=>c?1:0},radius:{value:1,method:"uniform1f",type:"float"},color:{value:4294967295,validator:c=>au(c),method:"uniform4fv",type:"vec4"}}),Y(Pp,"methods",{rotateUV:"\n    vec2 function(vec2 uv, float d) {\n      float s = sin(d);\n      float c = cos(d);\n      mat2 rotMatrix = mat2(c, -s, s, c);\n      return uv * rotMatrix;\n    }\n    ",drawDot:"\n    float function(vec2 uv, vec2 p, float r) {\n      uv += p;\n      float circle = length(uv) - r;\n      return clamp(-circle, 0.0, 1.0);\n    }\n    "}),Y(Pp,"onEffectMask","\n    float outerRadius = radius * u_dimensions.y * 0.5;\n\n    float endAngle = range * progress - 0.0005;\n\n    vec2 uv = v_textureCoordinate.xy * u_dimensions.xy - u_dimensions * 0.5;\n\n    uv = $rotateUV(uv, -(offset));\n    float linewidth = width * u_pixelRatio;\n    float circle = length(uv) - (outerRadius - linewidth) ;\n    circle = abs(circle) - linewidth;\n    circle = clamp(-circle, 0.0, 1.0);\n\n    float angle = (atan(uv.x, -uv.y) / 3.14159265359 * 0.5);\n    float p = endAngle / (PI * 2.);\n\n    circle *= step(fract(angle), fract(p));\n\n    circle = rounded < 1. ? circle : max(circle, $drawDot(uv, vec2(0, outerRadius - linewidth), linewidth));\n    circle = rounded < 1. ? circle : max(circle, $drawDot($rotateUV(uv, -(endAngle)), vec2(0, outerRadius - linewidth), linewidth));\n\n    return mix(shaderColor, maskColor, circle);\n  "),Y(Pp,"onColorize","\n    return color;\n  ");class Op extends Ei{constructor(){super(...arguments);Y(this,"name","holePunch")}static getEffectKey(){return"holePunch"}static resolveDefaults(c){var y;return{x:c.x||0,y:c.y||0,width:c.width||50,height:c.height||50,radius:(y=c.radius)!=null?y:0}}}Y(Op,"z$__type__Props"),Y(Op,"uniforms",{x:{value:0,method:"uniform1f",type:"float"},y:{value:0,method:"uniform1f",type:"float"},width:{value:0,method:"uniform1f",type:"float"},height:{value:0,method:"uniform1f",type:"float"},radius:{value:0,method:"uniform4fv",type:"vec4",validator:c=>{let y=c;return Array.isArray(y)?y.length===2?y=[y[0],y[1],y[0],y[1]]:y.length===3?y=[y[0],y[1],y[2],y[0]]:y.length!==4&&(y=[y[0],y[0],y[0],y[0]]):typeof y=="number"&&(y=[y,y,y,y]),y}}}),Y(Op,"methods",{fillMask:"\n      float function(float dist) {\n        return clamp(-dist, 0.0, 1.0);\n      }\n    ",boxDist:"\n      float function(vec2 p, vec2 size, float radius) {\n        size -= vec2(radius);\n        vec2 d = abs(p) - size;\n        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0)) - radius;\n      }\n    "}),Y(Op,"onShaderMask","\n  vec2 halfDimensions = u_dimensions * 0.5;\n  vec2 size = vec2(width, height) * 0.5;\n  vec2 basePos = v_textureCoordinate.xy * u_dimensions.xy - vec2(x, y);\n  vec2 pos = basePos - size;\n  float r = radius[0] * step(pos.x, 0.5) * step(pos.y, 0.5);\n  r = r + radius[1] * step(0.5, pos.x) * step(pos.y, 0.5);\n  r = r + radius[2] * step(0.5, pos.x) * step(0.5, pos.y);\n  r = r + radius[3] * step(pos.x, 0.5) * step(0.5, pos.y);\n  return $boxDist(pos, size, r);\n  "),Y(Op,"onEffectMask","\n  return mix(maskColor, vec4(0.0), $fillMask(shaderMask));\n  ");const UC="RoundedRectangle";class jC extends ek{constructor(c){super();Y(this,"shType");this.shType=c,c!==UC&&console.warn("Unsupported shader:",c)}bindRenderOp(){}bindProps(){}attach(){}detach(){}}class Fk{constructor(){Y(this,"shCache",new Map);Y(this,"shConstructors",{});Y(this,"attachedShader",null);Y(this,"effectConstructors",{});Y(this,"renderer");this.registerShaderType("DefaultShader",bC),this.registerShaderType("DefaultShaderBatched",PC),this.registerShaderType("RoundedRectangle",lI),this.registerShaderType("DynamicShader",jp),this.registerShaderType("SdfShader",cI),this.registerEffectType("border",Bv),this.registerEffectType("borderBottom",Dp),this.registerEffectType("borderLeft",bp),this.registerEffectType("borderRight",Lp),this.registerEffectType("borderTop",Np),this.registerEffectType("fadeOut",xw),this.registerEffectType("linearGradient",dI),this.registerEffectType("radialGradient",fI),this.registerEffectType("grayscale",hI),this.registerEffectType("glitch",Fv),this.registerEffectType("radius",Rp),this.registerEffectType("radialProgress",Pp),this.registerEffectType("holePunch",Op)}registerShaderType(x,c){this.shConstructors[x]=c}registerEffectType(x,c){this.effectConstructors[x]=c}getRegisteredEffects(){return this.effectConstructors}getRegisteredShaders(){return this.shConstructors}loadShader(x,c){if(!this.renderer)throw new Error("Renderer is not been defined");const y=this.shConstructors[x];if(!y)throw new Error('Shader type "'.concat(x,'" is not registered'));if(this.renderer.mode==="canvas"&&y.prototype instanceof Vp)return{shader:new jC(x),props:c};if(x==="DynamicShader")return this.loadDynamicShader(c);const S=y.resolveDefaults(c),R=y.makeCacheKey(S)||y.name;if(R&&this.shCache.has(R))return{shader:this.shCache.get(R),props:S};const P=new y(this.renderer,c);return R&&this.shCache.set(R,P),{shader:P,props:S}}loadDynamicShader(x){if(!this.renderer)throw new Error("Renderer is not been defined");const c=jp.resolveDefaults(x,this.effectConstructors),y=jp.makeCacheKey(c,this.effectConstructors);if(y&&this.shCache.has(y))return{shader:this.shCache.get(y),props:c};const S=new jp(this.renderer,x,this.effectConstructors);return y&&this.shCache.set(y,S),{shader:S,props:c}}useShader(x){this.attachedShader!==x&&(this.attachedShader&&this.attachedShader.detach(),x.attach(),this.attachedShader=x)}}function zk(E){return/\.(ktx|pvr)$/.test(E)}const Gk=async E=>{const c=await(await fetch(E)).arrayBuffer();return E.indexOf(".ktx")!==-1?Vk(c):Kk(c)},Vk=async E=>{const x=new DataView(E),c=x.getUint32(12)===16909060,y=[],S={glInternalFormat:x.getUint32(28,c),pixelWidth:x.getUint32(36,c),pixelHeight:x.getUint32(40,c),numberOfMipmapLevels:x.getUint32(56,c),bytesOfKeyValueData:x.getUint32(60,c)};let R=64;R+=S.bytesOfKeyValueData;for(let P=0;P<S.numberOfMipmapLevels;P++){const v=x.getUint32(R);R+=4,y.push(x.buffer.slice(R,v)),R+=v}return{data:{glInternalFormat:S.glInternalFormat,mipmaps:y,width:S.pixelWidth||0,height:S.pixelHeight||0,type:"ktx"},premultiplyAlpha:!1}},Kk=async E=>{const v=E,F=new Int32Array(v,0,13),V=F[12]+52,H=new Uint8Array(v,V),ee=[],te={pixelWidth:F[7],pixelHeight:F[6],numberOfMipmapLevels:F[11]||0};let me=0,A=te.pixelWidth||0,q=te.pixelHeight||0;for(let ie=0;ie<te.numberOfMipmapLevels;ie++){const ve=(A+3>>2)*(q+3>>2)*8,ue=new Uint8Array(v,H.byteOffset+me,ve);ee.push(ue),me+=ve,A=A>>1,q=q>>1}return{data:{glInternalFormat:36196,mipmaps:ee,width:te.pixelWidth||0,height:te.pixelHeight||0,type:"pvr"},premultiplyAlpha:!1}},Hv=class Hv extends fC{constructor(c,y){super(c);Y(this,"props");this.props=Hv.resolveDefaults(y)}hasAlphaChannel(c){return c.indexOf("image/png")!==-1}async getTextureData(){const{src:c,premultiplyAlpha:y}=this.props;if(!c)return{data:null};if(c instanceof ImageData)return{data:c,premultiplyAlpha:y};if(zk(c))return Gk(c);if(this.txManager.imageWorkerManager)return await this.txManager.imageWorkerManager.getImage(c,y);if(this.txManager.hasCreateImageBitmap){const R=await(await fetch(c)).blob(),P=y!=null?y:this.hasAlphaChannel(R.type);return{data:await createImageBitmap(R,{premultiplyAlpha:P?"premultiply":"none",colorSpaceConversion:"none",imageOrientation:"none"}),premultiplyAlpha:P}}else{const S=new Image;return c.substr(0,5)!=="data:"&&(S.crossOrigin="Anonymous"),S.src=c,await new Promise((R,P)=>{S.onload=()=>R(),S.onerror=()=>P(new Error("Failed to load image"))}).catch(R=>{console.error(R)}),{data:S,premultiplyAlpha:y!=null?y:!0}}}static makeCacheKey(c){const y=Hv.resolveDefaults(c);return y.src instanceof ImageData?!1:"ImageTexture,".concat(y.src,",").concat(y.premultiplyAlpha)}static resolveDefaults(c){var y,S;return{src:(y=c.src)!=null?y:"",premultiplyAlpha:(S=c.premultiplyAlpha)!=null?S:!0}}};Y(Hv,"z$__type__Props");let pI=Hv;const Hk=24;function Wk(E,x,c,y,S,R,P,v,F){const V=Math.min(Math.max(P.firstLineIdx,0),v.length),H=0;let ee=0;y==="middle"?ee=(x-E)/2:y==="bottom"&&(ee=x-E);const me=S/R+V*x+ee;if(!(F&&me>=F/R))return{sdfX:H,sdfY:me,lineIndex:V}}class zv{constructor(x,c=0){Y(this,"iterator");Y(this,"peekBuffer",[]);Y(this,"_lastIndex");this.iterator=x,this.iterator=x,this._lastIndex=c-1,this.peekBuffer=[]}next(){const x=this.peekBuffer.length>0?this.peekBuffer.pop():this.iterator.next();return x.done?this._lastIndex=-1:this._lastIndex++,x}peek(){if(this.peekBuffer.length>0)return this.peekBuffer[0];const x=this.iterator.next();return this.peekBuffer.push(x),x}get lastIndex(){return this._lastIndex}}function*Gv(E,x=0){let c=x;for(;c<E.length;){const y=E.codePointAt(c);if(y===void 0)throw new Error("Invalid Unicode code point");yield y,c+=y<=65535?1:2}}function qk(E,x,c){const y=c.shapeText(x,new zv(Gv(E,0),0));let S=0;for(const R of y)R.mapped&&(S+=R.xAdvance);return S}function Xk(E,x,c,y,S,R,P,v,F,V,H,ee,te,me,A,q,ie,ve,ue){tt(A,"Font face must be loaded"),tt(A.loaded,"Font face must be loaded"),tt(A.data,"Font face must be loaded"),tt(A.shaper,"Font face must be loaded");const he=v/A.data.info.size,re=F/he,ke=R/he,Te=V/he,Le=te[E],Ne=(Le==null?void 0:Le.codepointIndex)||0,Re=(Le==null?void 0:Le.maxX)||0,k=(Le==null?void 0:Le.maxY)||0;let le=Re,ye=k,He=x,_e=c,we=0;const st={codepointIndex:-1,bufferOffset:-1,xStart:-1},Et=A.shaper,Vn={letterSpacing:Te};let Mn=Et.shapeText(Vn,new zv(Gv(y,Ne),Ne)),_n,Bn=-1;const go=[],ya=P/he,j=qk(ve,Vn,Et);let fn=!0;for(;fn;){const Ut=(ue===0||E+1<ue)&&(ee!=="both"||ie||_e+re+A.maxCharHeight<=ya),ti=Ut?ke:ke-j;let Tn=0;const Di=_e+re>=me.y1,mo=_e<=me.y2,bi=Di&&mo;for(;(_n=Mn.next())&&!_n.done;){const pe=_n.value;if(E===te.length)te.push({codepointIndex:pe.cluster,maxY:ye,maxX:le});else if(E>te.length)throw new Error("Unexpected lineCache length");if(pe.codepoint===32||pe.codepoint===10?st.codepointIndex!==-1&&(st.codepointIndex=-1,Tn=He):st.codepointIndex===-1&&(st.codepointIndex=pe.cluster,st.bufferOffset=we,st.xStart=Tn),pe.mapped){const Fe=He+pe.xOffset+pe.width;if(ee!=="none"&&Fe>=ti&&st.codepointIndex!==-1&&st.xStart>0)if(Ut){Mn=Et.shapeText(Vn,new zv(Gv(y,st.codepointIndex),st.codepointIndex)),we=st.bufferOffset;break}else Mn=Et.shapeText(Vn,new zv(Gv(ve,0),0)),He=st.xStart,we=st.bufferOffset,ee="none";else{const er=He+pe.xOffset,ni=_e+pe.yOffset;if(bi){Bn===-1&&(Bn=we);const Ko=A.getAtlasEntry(pe.glyphId),Rn=Ko.x/A.data.common.scaleW,ze=Ko.y/A.data.common.scaleH,Kn=Ko.width/A.data.common.scaleW,lu=Ko.height/A.data.common.scaleH;H[we++]=er,H[we++]=ni,H[we++]=Rn,H[we++]=ze,H[we++]=er+pe.width,H[we++]=ni,H[we++]=Rn+Kn,H[we++]=ze,H[we++]=er,H[we++]=ni+pe.height,H[we++]=Rn,H[we++]=ze+lu,H[we++]=er+pe.width,H[we++]=ni+pe.height,H[we++]=Rn+Kn,H[we++]=ze+lu}ye=Math.max(ye,ni+pe.height),le=Math.max(le,er+pe.width),He+=pe.xAdvance}}else if(pe.codepoint===10){if(Ut)break;Mn=Et.shapeText(Vn,new zv(Gv(ve,0),0)),ee="none"}}Bn!==-1&&(go.push({bufferStart:Bn,bufferEnd:we}),Bn=-1),He=0,_e+=re,E++,st.codepointIndex=-1,Tn=0,!q&&ee==="both"&&_e>me.y2||_n&&_n.done?fn=!1:Ut||(fn=!1)}if(S==="center"){const Ut=ee==="none"?le:ke;for(let ti=0;ti<go.length;ti++){const Tn=go[ti],Di=H[Tn.bufferEnd-4]-H[Tn.bufferStart],mo=(Ut-Di)/2;for(let bi=Tn.bufferStart;bi<Tn.bufferEnd;bi+=4)H[bi]+=mo}}else if(S==="right"){const Ut=ee==="none"?le:ke;for(let ti=0;ti<go.length;ti++){const Tn=go[ti],Di=Tn.bufferEnd===Tn.bufferStart?0:H[Tn.bufferEnd-4]-H[Tn.bufferStart],mo=Ut-Di;for(let bi=Tn.bufferStart;bi<Tn.bufferEnd;bi+=4)H[bi]+=mo}}return tt(_n),{bufferNumFloats:we,bufferNumQuads:we/16,layoutNumCharacters:_n.done?y.length-Ne:_n.value.cluster-Ne+1,fullyProcessed:!!_n.done,maxX:le,maxY:ye}}function Yk(E,x){return Math.ceil(E/x)*x}function $k(E,x){return Math.floor(E/x)*x}function Qk(E,x,c,y,S,R,P,v){const{screen:F,sdf:V}=E;if(!tk(P))F.x1=0,F.y1=0,F.x2=0,F.y2=0,V.x1=0,V.y1=0,V.x2=0,V.y2=0,E.numLines=0,E.firstLineIdx=0;else{const H=P.x1-x,ee=H+(P.x2-P.x1),te=P.y1-c+y,me=$k(te-R,S||1),A=Yk(te+(P.y2-P.y1)+R,S||1);F.x1=H,F.y1=me,F.x2=ee,F.y2=A,V.x1=H/v,V.y1=me/v,V.x2=ee/v,V.y2=A/v,E.numLines=Math.ceil((A-me)/S),E.firstLineIdx=S?Math.floor(me/S):0}E.valid=!0}const Zk={normal:400,bold:700,bolder:900,lighter:100},D2=E=>typeof E=="number"?E:Zk[E]||400;function Jk(E,x,c,y,S){let R=D2(c);for(const P of E){const v=P[x];if(!v)continue;if(v.size===1)return console.warn("TrFontManager: Only one font face found for family: '".concat(x,"' - will be used for all weights and styles")),v.values().next().value;const F=new Map;for(const H of v){const ee=D2(H.descriptors.weight);if(ee===R&&H.descriptors.style===y&&H.descriptors.stretch===S)return H;F.set(ee,H)}const V="TrFontManager: No exact match: '".concat(x," Weight: ").concat(R," Style: ").concat(y," Stretch: ").concat(S,"'");if(console.error(V),R===400&&F.has(500))return F.get(500);if(R===500&&F.has(400))return F.get(400);if(R<400){for(;R>0;){if(F.has(R))return F.get(R);R-=100}R=600}for(;R<1e3;){if(F.has(R))return F.get(R);R+=100}for(R=500;R>0;){if(F.has(R))return F.get(R);R-=100}}}const eM=OC(Jk);class BC{constructor(x){Y(this,"textRenderers");this.textRenderers=x}addFontFace(x){for(const c in this.textRenderers){const y=this.textRenderers[c];y&&y.isFontFaceSupported(x)&&y.addFontFace(x)}}static resolveFontFace(x,c){const{fontFamily:y,fontWeight:S,fontStyle:R,fontStretch:P}=c;return eM(x,y,S,R,P)}}const tM={x:0,y:0,width:0,height:0};class nM extends DC{constructor(c){super(c);Y(this,"ssdfFontFamilies",{});Y(this,"msdfFontFamilies",{});Y(this,"fontFamilyArray",[this.ssdfFontFamilies,this.msdfFontFamilies]);Y(this,"sdfShader");Y(this,"rendererBounds");this.sdfShader=this.stage.shManager.loadShader("SdfShader").shader,this.rendererBounds={x1:0,y1:0,x2:this.stage.options.appWidth,y2:this.stage.options.appHeight}}getPropertySetters(){return{fontFamily:(c,y)=>{c.props.fontFamily=y,this.releaseFontFace(c),this.invalidateLayoutCache(c)},fontWeight:(c,y)=>{c.props.fontWeight=y,this.releaseFontFace(c),this.invalidateLayoutCache(c)},fontStyle:(c,y)=>{c.props.fontStyle=y,this.releaseFontFace(c),this.invalidateLayoutCache(c)},fontStretch:(c,y)=>{c.props.fontStretch=y,this.releaseFontFace(c),this.invalidateLayoutCache(c)},fontSize:(c,y)=>{c.props.fontSize=y,this.invalidateLayoutCache(c)},text:(c,y)=>{c.props.text=y,this.invalidateLayoutCache(c)},textAlign:(c,y)=>{c.props.textAlign=y,this.invalidateLayoutCache(c)},color:(c,y)=>{c.props.color=y},x:(c,y)=>{c.props.x=y,c.elementBounds.valid&&(this.setElementBoundsX(c),!c.renderWindow.valid&&YS(c.elementBounds,this.rendererBounds)&&this.scheduleUpdateState(c))},y:(c,y)=>{c.props.y=y,c.elementBounds.valid&&(this.setElementBoundsY(c),!c.renderWindow.valid&&YS(c.elementBounds,this.rendererBounds)&&this.scheduleUpdateState(c))},contain:(c,y)=>{c.props.contain=y,this.invalidateLayoutCache(c)},width:(c,y)=>{c.props.width=y,c.props.contain!=="none"&&this.invalidateLayoutCache(c)},height:(c,y)=>{c.props.height=y,c.props.contain==="both"&&this.invalidateLayoutCache(c)},offsetY:(c,y)=>{c.props.offsetY=y,this.invalidateLayoutCache(c)},scrollable:(c,y)=>{c.props.scrollable=y,this.invalidateLayoutCache(c)},scrollY:(c,y)=>{c.props.scrollY=y,this.scheduleUpdateState(c)},letterSpacing:(c,y)=>{c.props.letterSpacing=y,this.invalidateLayoutCache(c)},lineHeight:(c,y)=>{c.props.lineHeight=y,this.invalidateLayoutCache(c)},maxLines:(c,y)=>{c.props.maxLines=y,this.invalidateLayoutCache(c)},textBaseline:(c,y)=>{c.props.textBaseline=y,this.invalidateLayoutCache(c)},verticalAlign:(c,y)=>{c.props.verticalAlign=y,this.invalidateLayoutCache(c)},overflowSuffix:(c,y)=>{c.props.overflowSuffix=y,this.invalidateLayoutCache(c)},debug:(c,y)=>{c.props.debug=y}}}canRenderFont(c){const{fontFamily:y}=c;return y in this.ssdfFontFamilies||y in this.msdfFontFamilies||y==="$$SDF_FAILURE_TEST$$"}isFontFaceSupported(c){return c instanceof A2}addFontFace(c){tt(c instanceof A2);const y=c.fontFamily,S=c.type==="ssdf"?this.ssdfFontFamilies:c.type==="msdf"?this.msdfFontFamilies:void 0;if(!S){console.warn("Invalid font face type: ".concat(c.type));return}let R=S[y];R||(R=new Set,S[y]=R),R.add(c)}createState(c){return{props:c,status:"initialState",updateScheduled:!1,emitter:new Rd,lineCache:[],forceFullLayoutCalc:!1,renderWindow:{screen:{x1:0,y1:0,x2:0,y2:0},sdf:{x1:0,y1:0,x2:0,y2:0},firstLineIdx:0,numLines:0,valid:!1},elementBounds:{x1:0,y1:0,x2:0,y2:0,valid:!1},clippingRect:{x:0,y:0,width:0,height:0,valid:!1},bufferNumFloats:0,bufferNumQuads:0,vertexBuffer:void 0,webGlBuffers:null,bufferUploaded:!1,textH:void 0,textW:void 0,distanceRange:0,trFontFace:void 0,isRenderable:!1,debugData:{updateCount:0,layoutCount:0,lastLayoutNumCharacters:0,layoutSum:0,drawSum:0,drawCount:0,bufferSize:0}}}updateState(c){let{trFontFace:y}=c;const{textH:S,lineCache:R,debugData:P,forceFullLayoutCalc:v}=c;if(P.updateCount++,c.status==="initialState"&&this.setStatus(c,"loading"),!y){if(y=this.resolveFontFace(c.props),c.trFontFace=y,!y){const Et="SdfTextRenderer: Could not resolve font face for family: '".concat(c.props.fontFamily,"'");console.error(Et),this.setStatus(c,"failed",new Error(Et));return}y.texture.setRenderableOwner(c,c.isRenderable)}if(!y.loaded){y.once("loaded",()=>{this.scheduleUpdateState(c)});return}tt(y.data,"Font face data should be loaded");const{text:F,fontSize:V,x:H,y:ee,contain:te,width:me,height:A,lineHeight:q,verticalAlign:ie,scrollable:ve,overflowSuffix:ue,maxLines:he}=c.props,re=te==="both"&&ve?c.props.scrollY:0,{renderWindow:ke}=c,Te=y.data.info.size,Le=V/Te,Ne=q/Le;c.distanceRange=Le*y.data.distanceField.distanceRange;const Re=F.length*Hk;let k=c.vertexBuffer;(!k||k.length<Re)&&(k=new Float32Array(Re*2));const le=c.elementBounds;if(le.valid||(this.setElementBoundsX(c),this.setElementBoundsY(c),le.valid=!0),!v&&ke.valid){const Et=ke.screen;if(H+Et.x1<=le.x1&&H+Et.x2>=le.x2&&ee-re+Et.y1<=le.y1&&ee-re+Et.y2>=le.y2){this.setStatus(c,"loaded");return}ke.valid=!1,this.setStatus(c,"loading")}const{offsetY:ye,textAlign:He}=c.props;if(!ke.valid){if(!YS(le,this.rendererBounds))return;Qk(ke,H,ee,re,q,te==="both"?le.y2-le.y1:0,le,Le)}const _e=Wk(Te,Ne,q,ie,ye,Le,ke,R,S);if(!_e){this.setStatus(c,"loaded");return}const{letterSpacing:we}=c.props,st=Xk(_e.lineIndex,_e.sdfX,_e.sdfY,F,He,me,A,V,q,we,k,te,R,ke.sdf,y,v,ve,ue,he);c.bufferUploaded=!1,c.bufferNumFloats=st.bufferNumFloats,c.bufferNumQuads=st.bufferNumQuads,c.vertexBuffer=k,c.renderWindow=ke,P.lastLayoutNumCharacters=st.layoutNumCharacters,P.bufferSize=k.byteLength,st.fullyProcessed&&(c.textW=st.maxX*Le,c.textH=st.maxY*Le),this.setStatus(c,"loaded")}renderQuads(c,y,S,R,P,v){var le,ye,He;if(!c.vertexBuffer)return;const F=this.stage.renderer;tt(F instanceof pC);const{fontSize:V,color:H,contain:ee,scrollable:te,zIndex:me,debug:A}=c.props,q=ee==="both"&&te?c.props.scrollY:0,{textW:ie=0,textH:ve=0,distanceRange:ue,vertexBuffer:he,bufferUploaded:re,trFontFace:ke,elementBounds:Te}=c;let{webGlBuffers:Le}=c;if(!Le){const _e=F.glw,we=4*Float32Array.BYTES_PER_ELEMENT,st=_e.createBuffer();tt(st),c.webGlBuffers=new nk([{buffer:st,attributes:{a_position:{name:"a_position",size:2,type:_e.FLOAT,normalized:!1,stride:we,offset:0},a_textureCoordinate:{name:"a_textureCoordinate",size:2,type:_e.FLOAT,normalized:!1,stride:we,offset:2*Float32Array.BYTES_PER_ELEMENT}}}]),c.bufferUploaded=!1,tt(c.webGlBuffers),Le=c.webGlBuffers}if(!re){const _e=F.glw,we=(le=Le==null?void 0:Le.getBuffer("a_textureCoordinate"))!=null?le:null;_e.arrayBufferData(we,he,_e.STATIC_DRAW),c.bufferUploaded=!0}if(tt(ke),te&&ee==="both"){tt(Te.valid);const _e=ik(Te,tM);S.valid?(c.clippingRect.valid=!0,S=AI(S,_e,c.clippingRect)):(c.clippingRect.valid=!0,S=gC(_e,c.clippingRect))}const Ne=new rk(F.glw,F.options,Le,this.sdfShader,{transform:y.data,color:ok(H,R),size:V/(((ye=ke.data)==null?void 0:ye.info.size)||0),scrollY:q,distanceRange:ue,debug:A.sdfShaderDebug},R,S,{height:ve,width:ie},0,me,!1,P,v),Re=(He=c.trFontFace)==null?void 0:He.texture;tt(Re);const k=this.stage.txManager.getCtxTexture(Re);Ne.addTexture(k),Ne.length=c.bufferNumFloats,Ne.numQuads=c.bufferNumQuads,F.addRenderOp(Ne)}setIsRenderable(c,y){var S;super.setIsRenderable(c,y),(S=c.trFontFace)==null||S.texture.setRenderableOwner(c,y)}destroyState(c){var y;super.destroyState(c),(y=c.trFontFace)==null||y.texture.setRenderableOwner(c,!1)}resolveFontFace(c){return BC.resolveFontFace(this.fontFamilyArray,c)}releaseFontFace(c){c.trFontFace&&(c.trFontFace.texture.setRenderableOwner(c,!1),c.trFontFace=void 0)}invalidateLayoutCache(c){c.renderWindow.valid=!1,c.elementBounds.valid=!1,c.textH=void 0,c.textW=void 0,c.lineCache=[],this.setStatus(c,"loading"),this.scheduleUpdateState(c)}setElementBoundsX(c){const{x:y,contain:S,width:R}=c.props,{elementBounds:P}=c;P.x1=y,P.x2=S!=="none"?y+R:1/0}setElementBoundsY(c){const{y,contain:S,height:R}=c.props,{elementBounds:P}=c;P.y1=y,P.y2=S==="both"?y+R:1/0}}function iM(E){return E.prototype instanceof sk}async function rM(E,x){let c;try{console.log("Loading core extension",E),c=await import(E)}catch(S){console.error("The core extension module at '".concat(E,"' could not be loaded.")),console.error(S);return}if(!c.default){console.error("The core extension module at '".concat(E,"' does not have a default export."));return}const y=c.default;if(iM(y)){const S=new y;try{await S.run(x)}catch(R){console.error("The core extension at '".concat(E,"' threw an error.")),console.error(R)}}else console.error("The core extension at '".concat(E,"' does not extend CoreExtension."))}function FC(E){const x={boolean:!0,string:!0,number:!0,undefined:!0},c=Object.keys(E);for(let y=0;y<c.length;y++){const S=c[y];if(!S)continue;const R=E[S],P=typeof R;P==="string"&&R.length>2048&&(console.warn("Custom Data value for ".concat(S," is too long, it will be truncated to 2048 characters")),E[S]=R.substring(0,2048)),x[P]||(console.warn("Custom Data value for ".concat(S," is not a boolean, string, or number, it will be ignored")),delete E[S])}return E}class oM extends Rd{constructor(c,y,S){var ve,ue,he,re,ke;super();Y(this,"root",null);Y(this,"driver");Y(this,"canvas");Y(this,"settings");Y(this,"inspector",null);Y(this,"nodes",new Map);Y(this,"nextTextureId",1);Y(this,"textureTracker");const R={appWidth:c.appWidth||1920,appHeight:c.appHeight||1080,txMemByteThreshold:c.txMemByteThreshold||124e6,boundsMargin:c.boundsMargin||0,deviceLogicalPixelRatio:c.deviceLogicalPixelRatio||1,devicePhysicalPixelRatio:c.devicePhysicalPixelRatio||window.devicePixelRatio,clearColor:(ve=c.clearColor)!=null?ve:0,coreExtensionModule:c.coreExtensionModule||null,experimental_FinalizationRegistryTextureUsageTracker:(ue=c.experimental_FinalizationRegistryTextureUsageTracker)!=null?ue:!1,textureCleanupOptions:c.textureCleanupOptions||{},fpsUpdateInterval:c.fpsUpdateInterval||0,numImageWorkers:c.numImageWorkers!==void 0?c.numImageWorkers:2,enableContextSpy:(he=c.enableContextSpy)!=null?he:!1,enableInspector:(re=c.enableInspector)!=null?re:!1,renderMode:(ke=c.renderMode)!=null?ke:"webgl"};this.settings=R;const{appWidth:P,appHeight:v,deviceLogicalPixelRatio:F,devicePhysicalPixelRatio:V,enableInspector:H}=R,ee=Te=>{this.driver.releaseTexture(Te)},te=R.experimental_FinalizationRegistryTextureUsageTracker&&typeof FinalizationRegistry=="function";this.textureTracker=te?new Lk(ee):new Rk(ee,this.settings.textureCleanupOptions);const me=P*F,A=v*F;this.driver=S;const q=document.createElement("canvas");this.canvas=q,q.width=me*V,q.height=A*V,q.style.width="".concat(me,"px"),q.style.height="".concat(A,"px");let ie;if(typeof y=="string"?ie=document.getElementById(y):ie=y,!ie)throw new Error("Could not find target element");S.onCreateNode=Te=>{this.nodes.set(Te.id,Te)},S.onBeforeDestroyNode=Te=>{this.nodes.delete(Te.id)},S.onFpsUpdate=Te=>{this.emit("fpsUpdate",Te)},S.onFrameTick=Te=>{this.emit("frameTick",Te)},S.onIdle=()=>{this.emit("idle")},ie.appendChild(q),H&&!hC()&&(this.inspector=new Dk(q,R))}async init(){await this.driver.init(this,this.settings,this.canvas),this.root=this.driver.getRootNode()}createNode(c){return this.inspector?this.inspector.createNode(this.driver,this.resolveNodeDefaults(c)):this.driver.createNode(this.resolveNodeDefaults(c))}createTextNode(c){var R,P,v,F,V,H,ee,te,me,A,q,ie,ve,ue,he,re,ke,Te,Le;const y=(R=c.fontSize)!=null?R:16,S={...this.resolveNodeDefaults(c),text:(P=c.text)!=null?P:"",textRendererOverride:(v=c.textRendererOverride)!=null?v:null,fontSize:y,fontFamily:(F=c.fontFamily)!=null?F:"sans-serif",fontStyle:(V=c.fontStyle)!=null?V:"normal",fontWeight:(H=c.fontWeight)!=null?H:"normal",fontStretch:(ee=c.fontStretch)!=null?ee:"normal",textAlign:(te=c.textAlign)!=null?te:"left",contain:(me=c.contain)!=null?me:"none",scrollable:(A=c.scrollable)!=null?A:!1,scrollY:(q=c.scrollY)!=null?q:0,offsetY:(ie=c.offsetY)!=null?ie:0,letterSpacing:(ve=c.letterSpacing)!=null?ve:0,lineHeight:(ue=c.lineHeight)!=null?ue:y,maxLines:(he=c.maxLines)!=null?he:0,textBaseline:(re=c.textBaseline)!=null?re:"alphabetic",verticalAlign:(ke=c.verticalAlign)!=null?ke:"top",overflowSuffix:(Te=c.overflowSuffix)!=null?Te:"...",debug:(Le=c.debug)!=null?Le:{}};return this.inspector?this.inspector.createTextNode(this.driver,S):this.driver.createTextNode(S)}resolveNodeDefaults(c){var V,H,ee,te,me,A,q,ie,ve,ue,he,re,ke,Te,Le,Ne,Re,k,le,ye,He,_e,we,st,Et,Vn,Mn,_n,Bn,go,ya,j,fn,Ut,ti,Tn,Di,mo,bi,pe,Fe,er,ni,Ko,Rn,ze,Kn,lu;const y=(V=c.color)!=null?V:4294967295,S=(te=(ee=(H=c.colorTl)!=null?H:c.colorTop)!=null?ee:c.colorLeft)!=null?te:y,R=(q=(A=(me=c.colorTr)!=null?me:c.colorTop)!=null?A:c.colorRight)!=null?q:y,P=(ue=(ve=(ie=c.colorBl)!=null?ie:c.colorBottom)!=null?ve:c.colorLeft)!=null?ue:y,v=(ke=(re=(he=c.colorBr)!=null?he:c.colorBottom)!=null?re:c.colorRight)!=null?ke:y,F=FC((Te=c.data)!=null?Te:{});return{x:(Le=c.x)!=null?Le:0,y:(Ne=c.y)!=null?Ne:0,width:(Re=c.width)!=null?Re:0,height:(k=c.height)!=null?k:0,alpha:(le=c.alpha)!=null?le:1,autosize:(ye=c.autosize)!=null?ye:!1,clipping:(He=c.clipping)!=null?He:!1,color:y,colorTop:(_e=c.colorTop)!=null?_e:y,colorBottom:(we=c.colorBottom)!=null?we:y,colorLeft:(st=c.colorLeft)!=null?st:y,colorRight:(Et=c.colorRight)!=null?Et:y,colorBl:P,colorBr:v,colorTl:S,colorTr:R,zIndex:(Vn=c.zIndex)!=null?Vn:0,zIndexLocked:(Mn=c.zIndexLocked)!=null?Mn:0,parent:(_n=c.parent)!=null?_n:null,texture:(Bn=c.texture)!=null?Bn:null,shader:(go=c.shader)!=null?go:null,src:(ya=c.src)!=null?ya:"",scale:(j=c.scale)!=null?j:null,scaleX:(Ut=(fn=c.scaleX)!=null?fn:c.scale)!=null?Ut:1,scaleY:(Tn=(ti=c.scaleY)!=null?ti:c.scale)!=null?Tn:1,mount:(Di=c.mount)!=null?Di:0,mountX:(bi=(mo=c.mountX)!=null?mo:c.mount)!=null?bi:0,mountY:(Fe=(pe=c.mountY)!=null?pe:c.mount)!=null?Fe:0,pivot:(er=c.pivot)!=null?er:.5,pivotX:(Ko=(ni=c.pivotX)!=null?ni:c.pivot)!=null?Ko:.5,pivotY:(ze=(Rn=c.pivotY)!=null?Rn:c.pivot)!=null?ze:.5,rotation:(Kn=c.rotation)!=null?Kn:0,rtt:(lu=c.rtt)!=null?lu:!1,data:F}}destroyNode(c){return this.inspector&&this.inspector.destroyNode(c),this.driver.destroyNode(c)}createTexture(c,y,S){const R=this.nextTextureId++,P={descType:"texture",txType:c,props:y,options:{...S,id:R}};return this.textureTracker.registerTexture(P),P}createShader(c,y){return{descType:"shader",shType:c,props:y}}getNodeById(c){return this.nodes.get(c)||null}toggleFreeze(){throw new Error("Not implemented")}advanceFrame(){throw new Error("Not implemented")}rerender(){throw new Error("Not implemented")}}class sM extends Rd{constructor(c,y,S){super();Y(this,"node");Y(this,"props");Y(this,"settings");Y(this,"propStartValues",{});Y(this,"restoreValues",{});Y(this,"progress",0);Y(this,"delayFor",0);Y(this,"timingFunction");Y(this,"propsList");this.node=c,this.props=y,this.settings=S,this.propStartValues={},this.propsList=Object.keys(y),this.propsList.forEach(R=>{this.propStartValues[R]=c[R]}),this.timingFunction=R=>R,S.easing&&typeof S.easing=="string"&&(this.timingFunction=uk(S.easing)),this.delayFor=S.delay||0}reset(){this.progress=0,this.delayFor=this.settings.delay||0,this.update(0)}restore(){this.reset(),Object.keys(this.props).forEach(c=>{this.node[c]=this.propStartValues[c]})}reverse(){this.progress=0,Object.keys(this.props).forEach(c=>{const y=this.props[c],S=this.propStartValues[c];this.props[c]=S,this.propStartValues[c]=y}),this.settings.loop||(this.settings.stopMethod=!1)}applyEasing(c,y,S){return(this.timingFunction(c)||c)*(S-y)+y}update(c){const{duration:y,loop:S,easing:R,stopMethod:P}=this.settings;if(!y){this.emit("finished",{});return}if(this.delayFor>0){this.delayFor-=c;return}if(this.delayFor<=0&&this.progress===0&&this.emit("start",{}),this.progress+=c/y,this.progress>1&&(this.progress=S?0:1,P)){this.emit("finished",{});return}for(let v=0;v<this.propsList.length;v++){const F=this.propsList[v],V=this.props[F],H=this.propStartValues[F],ee=V;if(F.indexOf("color")!==-1){if(H===ee){this.node[F]=H;continue}if(R){const te=this.timingFunction(this.progress)||this.progress,me=S2(H,ee,te);this.node[F]=me;continue}this.node[F]=S2(H,ee,this.progress);continue}if(R){this.node[F]=this.applyEasing(this.progress,H,ee);continue}this.node[F]=H+(ee-H)*this.progress}this.progress===1&&this.emit("finished",{})}}class uM{constructor(x,c){Y(this,"manager");Y(this,"animation");Y(this,"startedPromise",null);Y(this,"startedResolve",null);Y(this,"stoppedPromise",null);Y(this,"stoppedResolve",null);Y(this,"state");this.manager=x,this.animation=c,this.state="stopped"}start(){return this.makeStartedPromise(),this.animation.once("start",this.started.bind(this)),this.makeStoppedPromise(),this.animation.once("finished",this.finished.bind(this)),this.manager.activeAnimations.has(this.animation)||this.manager.registerAnimation(this.animation),this.state="running",this}stop(){return this.manager.unregisterAnimation(this.animation),this.stoppedResolve!==null&&(this.stoppedResolve(),this.stoppedResolve=null),this.animation.reset(),this.state="stopped",this}pause(){return this.manager.unregisterAnimation(this.animation),this.state="paused",this}restore(){return this.stoppedResolve=null,this.animation.restore(),this}waitUntilStarted(){this.makeStartedPromise();const x=this.startedPromise;return tt(x),x}waitUntilStopped(){this.makeStoppedPromise();const x=this.stoppedPromise;return tt(x),x}makeStartedPromise(){this.startedResolve===null&&(this.startedPromise=new Promise(x=>{this.startedResolve=x}))}makeStoppedPromise(){this.stoppedResolve===null&&(this.stoppedPromise=new Promise(x=>{this.stoppedResolve=x}))}started(){tt(this.startedResolve),this.startedResolve(this),this.startedResolve=null}finished(){tt(this.stoppedResolve);const{loop:x,stopMethod:c}=this.animation.settings;if(c==="reverse"){this.animation.reverse(),this.start();return}this.stoppedResolve(),this.stoppedResolve=null,!x&&this.manager.unregisterAnimation(this.animation)}}const Zn=0,Jn=3,Zi=6,qn=1,ei=4,vr=7,zo=2,Go=5,Vo=8;class Vr{constructor(x){Y(this,"data");x?(this.data=new Float32Array(9),this.data[Zn]=x[0],this.data[Jn]=x[3],this.data[Zi]=x[6],this.data[qn]=x[1],this.data[ei]=x[4],this.data[vr]=x[7],this.data[zo]=x[2],this.data[Go]=x[5],this.data[Vo]=x[8]):this.data=new Float32Array(9)}static get temp(){return aM}static multiply(x,c,y){const S=x.data[Zn]*c.data[Zn]+x.data[Jn]*c.data[qn]+x.data[Zi]*c.data[zo],R=x.data[Zn]*c.data[Jn]+x.data[Jn]*c.data[ei]+x.data[Zi]*c.data[Go],P=x.data[Zn]*c.data[Zi]+x.data[Jn]*c.data[vr]+x.data[Zi]*c.data[Vo],v=x.data[qn]*c.data[Zn]+x.data[ei]*c.data[qn]+x.data[vr]*c.data[zo],F=x.data[qn]*c.data[Jn]+x.data[ei]*c.data[ei]+x.data[vr]*c.data[Go],V=x.data[qn]*c.data[Zi]+x.data[ei]*c.data[vr]+x.data[vr]*c.data[Vo],H=x.data[zo]*c.data[Zn]+x.data[Go]*c.data[qn]+x.data[Vo]*c.data[zo],ee=x.data[zo]*c.data[Jn]+x.data[Go]*c.data[ei]+x.data[Vo]*c.data[Go],te=x.data[zo]*c.data[Zi]+x.data[Go]*c.data[vr]+x.data[Vo]*c.data[Vo];return y||(y=new Vr),y.data[Zn]=S,y.data[Jn]=R,y.data[Zi]=P,y.data[qn]=v,y.data[ei]=F,y.data[vr]=V,y.data[zo]=H,y.data[Go]=ee,y.data[Vo]=te,y}static identity(x){return x||(x=new Vr),x.data[Zn]=1,x.data[Jn]=0,x.data[Zi]=0,x.data[qn]=0,x.data[ei]=1,x.data[vr]=0,x.data[zo]=0,x.data[Go]=0,x.data[Vo]=1,x}static translate(x,c,y){return y||(y=new Vr),y.data[Zn]=1,y.data[Jn]=0,y.data[Zi]=x,y.data[qn]=0,y.data[ei]=1,y.data[vr]=c,y.data[zo]=0,y.data[Go]=0,y.data[Vo]=1,y}static scale(x,c,y){return y||(y=new Vr),y.data[Zn]=x,y.data[Jn]=0,y.data[Zi]=0,y.data[qn]=0,y.data[ei]=c,y.data[vr]=0,y.data[zo]=0,y.data[Go]=0,y.data[Vo]=1,y}static rotate(x,c){const y=Math.cos(x),S=Math.sin(x);return c||(c=new Vr),c.data[Zn]=y,c.data[Jn]=-S,c.data[Zi]=0,c.data[qn]=S,c.data[ei]=y,c.data[vr]=0,c.data[zo]=0,c.data[Go]=0,c.data[Vo]=1,c}static copy(x,c,y){return c||(c=new Vr),c.data[0]=x.data[0],c.data[1]=x.data[1],c.data[2]=x.data[2],c.data[3]=x.data[3],c.data[4]=x.data[4],c.data[5]=x.data[5],c.data[6]=x.data[6],c.data[7]=x.data[7],c.data[8]=x.data[8],c}translate(x,c){return this.data[Zi]=this.data[Zn]*x+this.data[Jn]*c+this.data[Zi],this.data[vr]=this.data[qn]*x+this.data[ei]*c+this.data[vr],this}scale(x,c){return this.data[Zn]=this.data[Zn]*x,this.data[Jn]=this.data[Jn]*c,this.data[qn]=this.data[qn]*x,this.data[ei]=this.data[ei]*c,this}rotate(x){if(x===0||!(x%Math.PI*2))return this;const c=Math.cos(x),y=Math.sin(x),S=this.data[Zn]*c+this.data[Jn]*y,R=this.data[Jn]*c-this.data[Zn]*y,P=this.data[qn]*c+this.data[ei]*y,v=this.data[ei]*c-this.data[qn]*y;return this.data[Zn]=S,this.data[Jn]=R,this.data[qn]=P,this.data[ei]=v,this}multiply(x){return Vr.multiply(this,x,this)}get tx(){return this.data[Zi]}get ty(){return this.data[vr]}get ta(){return this.data[Zn]}get tb(){return this.data[Jn]}get tc(){return this.data[qn]}get td(){return this.data[ei]}transformPoint(x,c){return[this.data[Zn]*x+this.data[Jn]*c+this.data[Zi],this.data[qn]*x+this.data[ei]*c+this.data[qn]]}}const aM=new Vr,iw=0,rw=2,ow=4,sw=6,uw=1,aw=3,lw=5,cw=7;class kw{constructor(x){Y(this,"data");this.data=new Float32Array(8),x&&(this.data[iw]=x[iw],this.data[rw]=x[rw],this.data[ow]=x[ow],this.data[sw]=x[sw],this.data[uw]=x[uw],this.data[aw]=x[aw],this.data[lw]=x[lw],this.data[cw]=x[cw])}static translate(x,c,y,S,R,P,v,F,V){return V||(V=new kw),V.data[iw]=x,V.data[rw]=y,V.data[ow]=R,V.data[sw]=v,V.data[uw]=c,V.data[aw]=S,V.data[lw]=P,V.data[cw]=F,V}get x1(){return this.data[iw]}get x2(){return this.data[rw]}get x3(){return this.data[ow]}get x4(){return this.data[sw]}get y1(){return this.data[uw]}get y2(){return this.data[aw]}get y3(){return this.data[lw]}get y4(){return this.data[cw]}}var Xn;(function(E){E[E.Init=0]="Init",E[E.OutOfBounds=2]="OutOfBounds",E[E.InBounds=4]="InBounds",E[E.InViewport=8]="InViewport"})(Xn||(Xn={}));const _d=new Map;_d.set(Xn.Init,"init");_d.set(Xn.OutOfBounds,"outOfBounds");_d.set(Xn.InBounds,"inBounds");_d.set(Xn.InViewport,"inViewport");var je;(function(E){E[E.Children=1]="Children",E[E.ScaleRotate=2]="ScaleRotate",E[E.Local=4]="Local",E[E.Global=8]="Global",E[E.Clipping=16]="Clipping",E[E.CalculatedZIndex=32]="CalculatedZIndex",E[E.ZIndexSortedChildren=64]="ZIndexSortedChildren",E[E.PremultipliedColors=128]="PremultipliedColors",E[E.WorldAlpha=256]="WorldAlpha",E[E.RenderState=512]="RenderState",E[E.IsRenderable=1024]="IsRenderable",E[E.RenderTexture=2048]="RenderTexture",E[E.ParentRenderTexture=4096]="ParentRenderTexture",E[E.None=0]="None",E[E.All=8191]="All"})(je||(je={}));class kI extends Rd{constructor(c,y){super();Y(this,"stage");Y(this,"children",[]);Y(this,"props");Y(this,"updateType",je.All);Y(this,"globalTransform");Y(this,"scaleRotateTransform");Y(this,"localTransform");Y(this,"renderCoords");Y(this,"renderBound");Y(this,"strictBound");Y(this,"preloadBound");Y(this,"clippingRect",{x:0,y:0,width:0,height:0,valid:!1});Y(this,"isRenderable",!1);Y(this,"renderState",Xn.Init);Y(this,"worldAlpha",1);Y(this,"premultipliedColorTl",0);Y(this,"premultipliedColorTr",0);Y(this,"premultipliedColorBl",0);Y(this,"premultipliedColorBr",0);Y(this,"calcZIndex",0);Y(this,"hasRTTupdates",!1);Y(this,"parentHasRenderTexture",!1);Y(this,"onTextureLoaded",(c,y)=>{this.autosizeNode(y),this.stage.requestRender(),this.parentHasRenderTexture&&this.setRTTUpdates(1),this.emit("loaded",{type:"texture",dimensions:y})});Y(this,"onTextureFailed",(c,y)=>{this.emit("failed",{type:"texture",error:y})});Y(this,"onTextureFreed",c=>{this.emit("freed",{type:"texture"})});this.stage=c,this.props={...y,parent:null},this.parent=y.parent,this.rtt=y.rtt,this.updateScaleRotateTransform()}loadTexture(c,y,S=null){this.props.texture&&this.unloadTexture();const{txManager:R}=this.stage,P=R.loadTexture(c,y,S);this.props.texture=P,this.props.textureOptions=S,this.setUpdateType(je.IsRenderable),queueMicrotask(()=>{P.state==="loaded"?this.onTextureLoaded(P,P.dimensions):P.state==="failed"?this.onTextureFailed(P,P.error):P.state==="freed"&&this.onTextureFreed(P),P.on("loaded",this.onTextureLoaded),P.on("failed",this.onTextureFailed),P.on("freed",this.onTextureFreed)})}unloadTexture(){if(this.props.texture){const{texture:c}=this.props;c.off("loaded",this.onTextureLoaded),c.off("failed",this.onTextureFailed),c.off("freed",this.onTextureFreed),c.setRenderableOwner(this,!1)}this.props.texture=null,this.props.textureOptions=null,this.setUpdateType(je.IsRenderable)}autosizeNode(c){this.autosize&&(this.width=c.width,this.height=c.height)}loadShader(c,y){const S=this.stage.renderer.getShaderManager();tt(S);const{shader:R,props:P}=S.loadShader(c,y);this.props.shader=R,this.props.shaderProps=P,this.setUpdateType(je.IsRenderable)}setUpdateType(c){this.updateType|=c;const y=this.props.parent;y&&!(y.updateType&je.Children)&&y.setUpdateType(je.Children),this.parentHasRenderTexture&&this.setRTTUpdates(c)}sortChildren(){this.children.sort((c,y)=>c.calcZIndex-y.calcZIndex)}updateScaleRotateTransform(){this.scaleRotateTransform=Vr.rotate(this.props.rotation,this.scaleRotateTransform).scale(this.props.scaleX,this.props.scaleY)}updateLocalTransform(){tt(this.scaleRotateTransform);const c=this.props.pivotX*this.props.width,y=this.props.pivotY*this.props.height,S=this.props.mountX*this.props.width,R=this.props.mountY*this.props.height;this.localTransform=Vr.translate(c-S+this.props.x,y-R+this.props.y,this.localTransform).multiply(this.scaleRotateTransform).translate(-c,-y),this.setUpdateType(je.Global)}update(c,y){var P;this.updateType&je.ScaleRotate&&(this.updateScaleRotateTransform(),this.setUpdateType(je.Local)),this.updateType&je.Local&&(this.updateLocalTransform(),this.setUpdateType(je.Global));const S=this.props.parent;let R=je.None;if(this.updateType&je.ParentRenderTexture){let v=this.parent;for(;v;)v.rtt&&(this.parentHasRenderTexture=!0),v=v.parent}this.updateType^je.All&&this.updateType&je.RenderTexture&&this.children.forEach(v=>{v.setUpdateType(je.All)}),this.updateType&je.Global&&(tt(this.localTransform),this.globalTransform=Vr.copy((S==null?void 0:S.globalTransform)||this.localTransform,this.globalTransform),this.parentHasRenderTexture&&((P=this.props.parent)!=null&&P.rtt)&&(this.globalTransform=Vr.identity()),S&&this.globalTransform.multiply(this.localTransform),this.calculateRenderCoords(),this.updateBoundingRect(),this.setUpdateType(je.Clipping|je.RenderState|je.Children),R|=je.Global),this.updateType&je.Clipping&&(this.calculateClippingRect(y),this.setUpdateType(je.Children),R|=je.Clipping),this.updateType&je.WorldAlpha&&(S?this.worldAlpha=S.worldAlpha*this.props.alpha:this.worldAlpha=this.props.alpha,this.setUpdateType(je.Children|je.PremultipliedColors|je.IsRenderable),R|=je.WorldAlpha),this.updateType&je.PremultipliedColors&&(this.premultipliedColorTl=jv(this.props.colorTl,this.worldAlpha,!0),this.props.colorTl===this.props.colorTr&&this.props.colorBl===this.props.colorBr&&this.props.colorTl===this.props.colorBl?this.premultipliedColorTr=this.premultipliedColorBl=this.premultipliedColorBr=this.premultipliedColorTl:(this.premultipliedColorTr=jv(this.props.colorTr,this.worldAlpha,!0),this.premultipliedColorBl=jv(this.props.colorBl,this.worldAlpha,!0),this.premultipliedColorBr=jv(this.props.colorBr,this.worldAlpha,!0))),this.updateType&je.RenderState&&(this.updateRenderState(y),this.setUpdateType(je.IsRenderable)),this.updateType&je.IsRenderable&&this.updateIsRenderable(),S&&this.updateType&je.CalculatedZIndex&&(this.calculateZIndex(),S.setUpdateType(je.ZIndexSortedChildren)),this.updateType&je.Children&&this.children.length&&!this.rtt&&this.children.forEach(v=>{v.setUpdateType(R),v.updateType!==0&&v.update(c,this.clippingRect)}),this.updateType&je.ZIndexSortedChildren&&this.sortChildren(),this.updateType=0}checkRenderProps(){return this.props.texture?!0:!this.props.width||!this.props.height?!1:!!(this.props.shader||this.props.clipping||this.props.color!==0||this.props.colorTop!==0||this.props.colorBottom!==0||this.props.colorLeft!==0||this.props.colorRight!==0||this.props.colorTl!==0||this.props.colorTr!==0||this.props.colorBl!==0||this.props.colorBr!==0)}checkRenderBounds(c){tt(this.renderBound);const y=c.width||this.stage.root.width,S=c.height||this.stage.root.height;this.strictBound=Up(c.x,c.y,c.x+y,c.y+S,this.strictBound);const R=this.stage.boundsMargin;return this.preloadBound=Up(c.x-R[3],c.y-R[0],c.x+y+R[1],c.y+S+R[2],this.preloadBound),I2(this.renderBound,this.strictBound)?Xn.InViewport:I2(this.renderBound,this.preloadBound)?Xn.InBounds:Xn.OutOfBounds}updateRenderState(c){const y=this.checkRenderBounds(c);if(y!==this.renderState){let S=this.renderState;this.renderState=y,S===Xn.InViewport&&this.emit("outOfViewport",{previous:S,current:y}),S<Xn.InBounds&&y===Xn.InViewport?(this.emit(_d.get(Xn.InBounds),{previous:S,current:y}),S=Xn.InBounds):S>Xn.InBounds&&y===Xn.OutOfBounds&&(this.emit(_d.get(Xn.InBounds),{previous:S,current:y}),S=Xn.InBounds);const R=_d.get(y);tt(R),this.emit(R,{previous:S,current:y})}}setRenderState(c){c!==this.renderState&&(this.renderState=c,this.emit(Xn[c]))}updateIsRenderable(){let c;this.worldAlpha===0||!this.checkRenderProps()?c=!1:c=this.renderState>Xn.OutOfBounds,this.isRenderable!==c&&(this.isRenderable=c,this.onChangeIsRenderable(c))}onChangeIsRenderable(c){var y;(y=this.props.texture)==null||y.setRenderableOwner(this,c)}calculateRenderCoords(){const{width:c,height:y,globalTransform:S}=this;tt(S);const{tx:R,ty:P,ta:v,tb:F,tc:V,td:H}=S;if(F===0&&V===0){const ee=R,te=R+c*v,me=P,A=P+y*H;this.renderCoords=kw.translate(ee,me,te,me,te,A,ee,A,this.renderCoords)}else this.renderCoords=kw.translate(R,P,R+c*v,P+c*V,R+c*v+y*F,P+c*V+y*H,R+y*F,P+y*H,this.renderCoords)}updateBoundingRect(){const{renderCoords:c,globalTransform:y}=this;tt(y),tt(c);const{tb:S,tc:R}=y,{x1:P,y1:v,x3:F,y3:V}=c;if(S===0||R===0)this.renderBound=Up(P,v,F,V,this.renderBound);else{const{x2:H,x4:ee,y2:te,y4:me}=c;this.renderBound=Up(Math.min(P,H,F,ee),Math.min(v,te,V,me),Math.max(P,H,F,ee),Math.max(v,te,V,me),this.renderBound)}}calculateClippingRect(c){tt(this.globalTransform);const{clippingRect:y,props:S,globalTransform:R}=this,{clipping:P}=S,v=R.tb!==0||R.tc!==0;P&&!v?(y.x=R.tx,y.y=R.ty,y.width=this.width*R.ta,y.height=this.height*R.td,y.valid=!0):y.valid=!1,c.valid&&y.valid?AI(c,y,y):c.valid&&(gC(c,y),y.valid=!0)}calculateZIndex(){var P,v;const c=this.props,y=c.zIndex||0,S=((P=c.parent)==null?void 0:P.zIndex)||0;let R=y;(v=c.parent)!=null&&v.zIndexLocked&&(R=y<S?y:S),this.calcZIndex=R}destroy(){this.unloadTexture(),this.clippingRect.valid=!1,this.isRenderable=!1,delete this.renderCoords,delete this.renderBound,delete this.strictBound,delete this.preloadBound,delete this.globalTransform,delete this.scaleRotateTransform,delete this.localTransform,this.props.texture=null,this.props.shader=null,this.rtt&&this.stage.renderer.removeRTTNode(this),this.removeAllListeners(),this.parent=null}renderQuads(c){const{width:y,height:S,texture:R,textureOptions:P,shader:v,shaderProps:F,rtt:V}=this.props;if(this.parentHasRenderTexture&&(!c.renderToTextureActive||this.parentRenderTexture!==c.activeRttNode))return;const{premultipliedColorTl:H,premultipliedColorTr:ee,premultipliedColorBl:te,premultipliedColorBr:me}=this,{zIndex:A,worldAlpha:q,globalTransform:ie,clippingRect:ve}=this;tt(ie),c.addQuad({width:y,height:S,colorTl:H,colorTr:ee,colorBl:te,colorBr:me,texture:R,textureOptions:P,zIndex:A,shader:v,shaderProps:F,alpha:q,clippingRect:ve,tx:ie.tx,ty:ie.ty,ta:ie.ta,tb:ie.tb,tc:ie.tc,td:ie.td,rtt:V,parentHasRenderTexture:this.parentHasRenderTexture,framebufferDimensions:this.framebufferDimensions})}get id(){return this.props.id}get x(){return this.props.x}set x(c){this.props.x!==c&&(this.props.x=c,this.setUpdateType(je.Local))}get absX(){var c,y,S;return this.props.x+(((c=this.props.parent)==null?void 0:c.absX)||((S=(y=this.props.parent)==null?void 0:y.globalTransform)==null?void 0:S.tx)||0)}get absY(){var c,y;return this.props.y+((y=(c=this.props.parent)==null?void 0:c.absY)!=null?y:0)}get y(){return this.props.y}set y(c){this.props.y!==c&&(this.props.y=c,this.setUpdateType(je.Local))}get width(){return this.props.width}set width(c){this.props.width!==c&&(this.props.width=c,this.setUpdateType(je.Local),this.props.rtt&&this.setUpdateType(je.RenderTexture))}get height(){return this.props.height}set height(c){this.props.height!==c&&(this.props.height=c,this.setUpdateType(je.Local),this.props.rtt&&this.setUpdateType(je.RenderTexture))}get scale(){return this.scaleX}set scale(c){this.scaleX=c,this.scaleY=c}get scaleX(){return this.props.scaleX}set scaleX(c){this.props.scaleX!==c&&(this.props.scaleX=c,this.setUpdateType(je.ScaleRotate))}get scaleY(){return this.props.scaleY}set scaleY(c){this.props.scaleY!==c&&(this.props.scaleY=c,this.setUpdateType(je.ScaleRotate))}get mount(){return this.props.mount}set mount(c){(this.props.mountX!==c||this.props.mountY!==c)&&(this.props.mountX=c,this.props.mountY=c,this.props.mount=c,this.setUpdateType(je.Local))}get mountX(){return this.props.mountX}set mountX(c){this.props.mountX!==c&&(this.props.mountX=c,this.setUpdateType(je.Local))}get mountY(){return this.props.mountY}set mountY(c){this.props.mountY!==c&&(this.props.mountY=c,this.setUpdateType(je.Local))}get pivot(){return this.props.pivot}set pivot(c){(this.props.pivotX!==c||this.props.pivotY!==c)&&(this.props.pivotX=c,this.props.pivotY=c,this.props.pivot=c,this.setUpdateType(je.Local))}get pivotX(){return this.props.pivotX}set pivotX(c){this.props.pivotX!==c&&(this.props.pivotX=c,this.setUpdateType(je.Local))}get pivotY(){return this.props.pivotY}set pivotY(c){this.props.pivotY!==c&&(this.props.pivotY=c,this.setUpdateType(je.Local))}get rotation(){return this.props.rotation}set rotation(c){this.props.rotation!==c&&(this.props.rotation=c,this.setUpdateType(je.ScaleRotate))}get alpha(){return this.props.alpha}set alpha(c){this.props.alpha=c,this.setUpdateType(je.PremultipliedColors|je.WorldAlpha)}get autosize(){return this.props.autosize}set autosize(c){this.props.autosize=c}get clipping(){return this.props.clipping}set clipping(c){this.props.clipping=c,this.setUpdateType(je.Clipping)}get color(){return this.props.color}set color(c){(this.props.colorTl!==c||this.props.colorTr!==c||this.props.colorBl!==c||this.props.colorBr!==c)&&(this.colorTl=c,this.colorTr=c,this.colorBl=c,this.colorBr=c),this.props.color=c,this.setUpdateType(je.PremultipliedColors)}get colorTop(){return this.props.colorTop}set colorTop(c){(this.props.colorTl!==c||this.props.colorTr!==c)&&(this.colorTl=c,this.colorTr=c),this.props.colorTop=c,this.setUpdateType(je.PremultipliedColors)}get colorBottom(){return this.props.colorBottom}set colorBottom(c){(this.props.colorBl!==c||this.props.colorBr!==c)&&(this.colorBl=c,this.colorBr=c),this.props.colorBottom=c,this.setUpdateType(je.PremultipliedColors)}get colorLeft(){return this.props.colorLeft}set colorLeft(c){(this.props.colorTl!==c||this.props.colorBl!==c)&&(this.colorTl=c,this.colorBl=c),this.props.colorLeft=c,this.setUpdateType(je.PremultipliedColors)}get colorRight(){return this.props.colorRight}set colorRight(c){(this.props.colorTr!==c||this.props.colorBr!==c)&&(this.colorTr=c,this.colorBr=c),this.props.colorRight=c,this.setUpdateType(je.PremultipliedColors)}get colorTl(){return this.props.colorTl}set colorTl(c){this.props.colorTl=c,this.setUpdateType(je.PremultipliedColors)}get colorTr(){return this.props.colorTr}set colorTr(c){this.props.colorTr=c,this.setUpdateType(je.PremultipliedColors)}get colorBl(){return this.props.colorBl}set colorBl(c){this.props.colorBl=c,this.setUpdateType(je.PremultipliedColors)}get colorBr(){return this.props.colorBr}set colorBr(c){this.props.colorBr=c,this.setUpdateType(je.PremultipliedColors)}get zIndexLocked(){return this.props.zIndexLocked||0}set zIndexLocked(c){this.props.zIndexLocked=c,this.setUpdateType(je.CalculatedZIndex|je.Children),this.children.forEach(y=>{y.setUpdateType(je.CalculatedZIndex)})}get zIndex(){return this.props.zIndex}set zIndex(c){this.props.zIndex=c,this.setUpdateType(je.CalculatedZIndex|je.Children),this.children.forEach(y=>{y.setUpdateType(je.CalculatedZIndex)})}get parent(){return this.props.parent}set parent(c){const y=this.props.parent;if(y!==c){if(this.props.parent=c,y){const S=y.children.indexOf(this);tt(S!==-1,"CoreNode.parent: Node not found in old parent's children!"),y.children.splice(S,1),y.setUpdateType(je.Children|je.ZIndexSortedChildren)}c&&(c.children.push(this),this.setUpdateType(je.All),c.setUpdateType(je.Children|je.ZIndexSortedChildren),(c.rtt||c.parentHasRenderTexture)&&this.setRTTUpdates(je.All)),this.updateScaleRotateTransform()}}get rtt(){return this.props.rtt}set rtt(c){var y,S;if(!c){this.props.rtt&&(this.props.rtt=!1,this.unloadTexture(),this.setUpdateType(je.All),this.children.forEach(R=>{R.parentHasRenderTexture=!1}),(y=this.stage.renderer)==null||y.removeRTTNode(this));return}this.props.rtt=!0,this.hasRTTupdates=!0,this.setUpdateType(je.All),this.children.forEach(R=>{R.setUpdateType(je.All)}),(S=this.stage.renderer)==null||S.renderToTexture(this)}get framebufferDimensions(){return this.parentHasRenderTexture&&!this.rtt&&this.parent?this.parent.framebufferDimensions:{width:this.width,height:this.height}}get parentRenderTexture(){let c=this.parent;for(;c;){if(c.rtt)return c;c=c.parent}return null}get texture(){return this.props.texture}setRTTUpdates(c){var y;this.hasRTTupdates=!0,(y=this.parent)==null||y.setRTTUpdates(c)}}let lM=1;function MI(){return lM++}class gI extends Rd{constructor(c,y,S,R){var P;super();Y(this,"rendererMain");Y(this,"stage");Y(this,"id");Y(this,"coreNode");Y(this,"_children",[]);Y(this,"_src","");Y(this,"_parent",null);Y(this,"_texture",null);Y(this,"_shader",null);Y(this,"_data",{});Y(this,"onTextureLoaded",(c,y)=>{this.emit("loaded",y)});Y(this,"onTextureFailed",(c,y)=>{this.emit("failed",y)});Y(this,"onTextureFreed",(c,y)=>{this.emit("freed",y)});Y(this,"onOutOfBounds",(c,y)=>{this.emit("outOfBounds",y)});Y(this,"onInBounds",(c,y)=>{this.emit("inBounds",y)});Y(this,"onOutOfViewport",(c,y)=>{this.emit("outOfViewport",y)});Y(this,"onInViewport",(c,y)=>{this.emit("inViewport",y)});this.rendererMain=y,this.stage=S,this.id=(P=R==null?void 0:R.id)!=null?P:MI(),this.coreNode=R||new kI(this.stage,{id:this.id,x:c.x,y:c.y,width:c.width,height:c.height,alpha:c.alpha,autosize:c.autosize,clipping:c.clipping,color:c.color,colorTop:c.colorTop,colorBottom:c.colorBottom,colorLeft:c.colorLeft,colorRight:c.colorRight,colorTl:c.colorTl,colorTr:c.colorTr,colorBl:c.colorBl,colorBr:c.colorBr,zIndex:c.zIndex,zIndexLocked:c.zIndexLocked,scaleX:c.scaleX,scaleY:c.scaleY,mountX:c.mountX,mountY:c.mountY,mount:c.mount,pivot:c.pivot,pivotX:c.pivotX,pivotY:c.pivotY,rotation:c.rotation,parent:null,shader:null,shaderProps:null,texture:null,textureOptions:null,rtt:c.rtt}),this.coreNode.on("loaded",this.onTextureLoaded),this.coreNode.on("failed",this.onTextureFailed),this.coreNode.on("freed",this.onTextureFreed),this.coreNode.on("outOfBounds",this.onOutOfBounds),this.coreNode.on("inBounds",this.onInBounds),this.coreNode.on("outOfViewport",this.onOutOfViewport),this.coreNode.on("inViewport",this.onInViewport),this.parent=c.parent,this.shader=c.shader,this.texture=c.texture,this.src=c.src,this.rtt=c.rtt,this._data=c.data}get x(){return this.coreNode.x}set x(c){this.coreNode.x=c}get y(){return this.coreNode.y}set y(c){this.coreNode.y=c}get width(){return this.coreNode.width}set width(c){c!==this.coreNode.width&&this.coreNode.rtt&&(this.texture=this.rendererMain.createTexture("RenderTexture",{width:this.width,height:this.height},{preload:!0,flipY:!0})),this.coreNode.width=c}get height(){return this.coreNode.height}set height(c){c!==this.coreNode.height&&this.coreNode.rtt&&(this.texture=this.rendererMain.createTexture("RenderTexture",{width:this.width,height:this.height},{preload:!0,flipY:!0})),this.coreNode.height=c}get alpha(){return this.coreNode.alpha}set alpha(c){this.coreNode.alpha=c}get autosize(){return this.coreNode.autosize}set autosize(c){this.coreNode.autosize=c}get clipping(){return this.coreNode.clipping}set clipping(c){this.coreNode.clipping=c}get color(){return this.coreNode.color}set color(c){this.coreNode.color=c}get colorTop(){return this.coreNode.colorTop}set colorTop(c){this.coreNode.colorTop=c}get colorBottom(){return this.coreNode.colorBottom}set colorBottom(c){this.coreNode.colorBottom=c}get colorLeft(){return this.coreNode.colorLeft}set colorLeft(c){this.coreNode.colorLeft=c}get colorRight(){return this.coreNode.colorRight}set colorRight(c){this.coreNode.colorRight=c}get colorTl(){return this.coreNode.colorTl}set colorTl(c){this.coreNode.colorTl=c}get colorTr(){return this.coreNode.colorTr}set colorTr(c){this.coreNode.colorTr=c}get colorBl(){return this.coreNode.colorBl}set colorBl(c){this.coreNode.colorBl=c}get colorBr(){return this.coreNode.colorBr}set colorBr(c){this.coreNode.colorBr=c}get scale(){return this.scaleX!==this.scaleY?null:this.coreNode.scaleX}set scale(c){c!==null&&(this.coreNode.scaleX=c,this.coreNode.scaleY=c)}get scaleX(){return this.coreNode.scaleX}set scaleX(c){this.coreNode.scaleX=c}get scaleY(){return this.coreNode.scaleY}set scaleY(c){this.coreNode.scaleY=c}get mount(){return this.coreNode.mount}set mount(c){this.coreNode.mount=c}get mountX(){return this.coreNode.mountX}set mountX(c){this.coreNode.mountX=c}get mountY(){return this.coreNode.mountY}set mountY(c){this.coreNode.mountY=c}get pivot(){return this.coreNode.pivot}set pivot(c){this.coreNode.pivot=c}get pivotX(){return this.coreNode.pivotX}set pivotX(c){this.coreNode.pivotX=c}get pivotY(){return this.coreNode.pivotY}set pivotY(c){this.coreNode.pivotY=c}get rotation(){return this.coreNode.rotation}set rotation(c){this.coreNode.rotation=c}get parent(){return this._parent}set parent(c){var S;const y=this._parent;if(this._parent=c,this.coreNode.parent=(S=c==null?void 0:c.coreNode)!=null?S:null,y){const R=y.children.indexOf(this);tt(R!==-1,"MainOnlyNode.parent: Node not found in old parent's children!"),y.children.splice(R,1)}c&&c.children.push(this)}get children(){return this._children}get zIndex(){return this.coreNode.zIndex}set zIndex(c){this.coreNode.zIndex=c}get zIndexLocked(){return this.coreNode.zIndexLocked}set zIndexLocked(c){this.coreNode.zIndexLocked=c}get src(){return this._src}set src(c){if(this._src!==c){if(this._src=c,!c){this.texture=null;return}this.texture=this.rendererMain.createTexture("ImageTexture",{src:c})}}get texture(){return this._texture}set texture(c){this._texture!==c&&(this._texture&&this.rendererMain.textureTracker.decrementTextureRefCount(this._texture),c&&this.rendererMain.textureTracker.incrementTextureRefCount(c),this._texture=c,c?this.coreNode.loadTexture(c.txType,c.props,c.options):this.coreNode.unloadTexture())}get rtt(){return this.coreNode.rtt}set rtt(c){c&&(this.texture=this.rendererMain.createTexture("RenderTexture",{width:this.width,height:this.height},{preload:!0,flipY:!0})),this.coreNode.rtt=c}get parentHasRenderTexture(){return this.coreNode.parentHasRenderTexture}get shader(){return this._shader}set shader(c){this._shader!==c&&(this._shader=c,c&&this.coreNode.loadShader(c.shType,c.props))}get data(){return this._data}set data(c){this._data=FC(c)}destroy(){this.emit("beforeDestroy",{});let c=this.children[0];for(;c;)c.destroy(),c=this.children[0];this.coreNode.destroy(),this.parent=null,this.texture=null,this.emit("afterDestroy",{}),this.removeAllListeners()}flush(){}animate(c,y){const S=new sM(this.coreNode,c,y);return new uM(this.stage.animationManager,S)}}const cM=E=>{let x=!1;const c=()=>{if(E.updateAnimations(),!E.hasSceneUpdates()){E.calculateFps(),setTimeout(c,16.666666666666668),x||(E.emit("idle"),x=!0);return}x=!1,E.drawFrame(),requestAnimationFrame(c)};requestAnimationFrame(c)},dM=()=>performance?performance.now():Date.now();class hM{constructor(){Y(this,"activeAnimations",new Set)}registerAnimation(x){this.activeAnimations.add(x)}unregisterAnimation(x){this.activeAnimations.delete(x)}update(x){this.activeAnimations.forEach(c=>{c.update(x)})}}class fM{constructor(x){Y(this,"imageWorkersEnabled",!0);Y(this,"messageManager",{});Y(this,"workers",[]);Y(this,"workerIndex",0);Y(this,"nextId",0);this.workers=this.createWorkers(x),this.workers.forEach(c=>{c.onmessage=this.handleMessage.bind(this)})}handleMessage(x){const{id:c,data:y,error:S}=x.data,R=this.messageManager[c];if(R){const[P,v]=R;delete this.messageManager[c],S?v(new Error(S)):P(y)}}createWorkers(x=1){const c="\n      function hasAlphaChannel(mimeType) {\n          return (mimeType.indexOf(\"image/png\") !== -1);\n      }\n\n      function getImage(src, premultiplyAlpha) {\n        return new Promise(function(resolve, reject) {\n          var xhr = new XMLHttpRequest();\n          xhr.open('GET', src, true);\n          xhr.responseType = 'blob';\n\n          xhr.onload = function() {\n            if (xhr.status === 200) {\n              var blob = xhr.response;\n              var hasAlphaChannel = premultiplyAlpha !== undefined ? premultiplyAlpha : hasAlphaChannel(blob.type);\n\n              createImageBitmap(blob, {\n                premultiplyAlpha: hasAlphaChannel ? 'premultiply' : 'none',\n                colorSpaceConversion: 'none',\n                imageOrientation: 'none'\n              }).then(function(data) {\n                resolve({ data: data, premultiplyAlpha: premultiplyAlpha });\n              }).catch(function(error) {\n                reject(error);\n              });\n            } else {\n              reject(new Error('Failed to load image: ' + xhr.statusText));\n            }\n          };\n\n          xhr.onerror = function() {\n            reject(new Error('Network error occurred while trying to fetch the image.'));\n          };\n\n          xhr.send();\n        });\n      }\n\n      self.onmessage = (event) => {\n        var id = event.data.id;\n        var src = event.data.src;\n        var premultiplyAlpha = event.data.premultiplyAlpha;\n\n        getImage(src, premultiplyAlpha)\n          .then(function(data) {\n              self.postMessage({ id: id, data: data }, [data.data]);\n          })\n          .catch(function(error) {\n              self.postMessage({ id: id, error: error.message });\n          });\n      };\n    ",y=new Blob([c.replace("","")],{type:"application/javascript"}),S=(self.URL?URL:webkitURL).createObjectURL(y),R=[];for(let P=0;P<x;P++)R.push(new Worker(S));return R}getNextWorker(){const x=this.workers[this.workerIndex];return this.workerIndex=(this.workerIndex+1)%this.workers.length,x}convertUrlToAbsolute(x){return new URL(x,self.location.href).href}getImage(x,c){return new Promise((y,S)=>{try{if(this.workers){const R=this.convertUrlToAbsolute(x),P=this.nextId++;this.messageManager[P]=[y,S],this.getNextWorker().postMessage({id:P,src:R,premultiplyAlpha:c})}}catch(R){S(R)}})}}const Wv=class Wv extends fC{constructor(c,y){super(c);Y(this,"props");this.props=Wv.resolveDefaults(y)}async getTextureData(){const{width:c,height:y}=this.props,S=c*y*4,R=new Uint8ClampedArray(S);for(let P=0;P<S;P+=4){const v=Math.floor(Math.random()*256);R[P]=v,R[P+1]=v,R[P+2]=v,R[P+3]=255}return{data:new ImageData(R,c,y)}}static makeCacheKey(c){const y=Wv.resolveDefaults(c);return"NoiseTexture,".concat(y.width,",").concat(y.height,",").concat(y.cacheId)}static resolveDefaults(c){var y,S,R;return{width:(y=c.width)!=null?y:128,height:(S=c.height)!=null?S:128,cacheId:(R=c.cacheId)!=null?R:0}}};Y(Wv,"z$__type__Props");let mI=Wv;class pM{constructor(x){Y(this,"usedMemory",0);Y(this,"txConstructors",{});Y(this,"textureKeyCache",new Map);Y(this,"textureIdCache",new Map);Y(this,"ctxTextureCache",new WeakMap);Y(this,"textureRefCountMap",new WeakMap);Y(this,"imageWorkerManager",null);Y(this,"hasCreateImageBitmap",!!self.createImageBitmap);Y(this,"hasWorker",!!self.Worker);Y(this,"renderer");this.hasCreateImageBitmap&&this.hasWorker&&(this.imageWorkerManager=new fM(x)),this.hasCreateImageBitmap||console.warn("[Lightning] createImageBitmap is not supported on this browser. ImageTexture will be slower."),this.registerTextureType("ImageTexture",pI),this.registerTextureType("ColorTexture",ak),this.registerTextureType("NoiseTexture",mI),this.registerTextureType("SubTexture",mC),this.registerTextureType("RenderTexture",lk)}registerTextureType(x,c){this.txConstructors[x]=c}loadTexture(x,c,y=null){var P;const S=this.txConstructors[x];if(!S)throw new Error('Texture type "'.concat(x,'" is not registered'));let R;if((y==null?void 0:y.id)!==void 0&&this.textureIdCache.has(y.id)&&(R=this.textureIdCache.get(y.id)),!R){const v=y==null?void 0:y.id,F=(P=y==null?void 0:y.cacheKey)!=null?P:S.makeCacheKey(c);F&&this.textureKeyCache.has(F)?R=this.textureKeyCache.get(F):R=new S(this,c),v&&this.addTextureIdToCache(v,F,R)}return y!=null&&y.preload&&this.getCtxTexture(R).load(),R}addTextureIdToCache(x,c,y){const{textureIdCache:S,textureRefCountMap:R}=this;S.set(x,y),R.has(y)?R.get(y).count++:(R.set(y,{cacheKey:c,count:1}),c&&this.textureKeyCache.set(c,y))}removeTextureIdFromCache(x){var R;const{textureIdCache:c,textureRefCountMap:y}=this,S=c.get(x);if(S){if(c.delete(x),y.has(S)){const P=y.get(S);tt(P),P.count--,P.count===0&&(y.delete(S),P.cacheKey&&this.textureKeyCache.delete(P.cacheKey))}(R=this.ctxTextureCache.get(S))==null||R.free()}}getDebugInfo(){return{keyCacheSize:this.textureKeyCache.size,idCacheSize:this.textureIdCache.size}}getCtxTexture(x){if(this.ctxTextureCache.has(x))return this.ctxTextureCache.get(x);const c=this.renderer.createCtxTexture(x);return this.ctxTextureCache.set(x,c),c}}class gM{constructor(){Y(this,"data",{})}reset(){this.data={}}increment(x){this.data[x]||(this.data[x]=0),this.data[x]++}getData(){return{...this.data}}}class mM{constructor(x){Y(this,"memUsed",0);Y(this,"textures",new Map);Y(this,"threshold");Y(this,"gcRequested",!1);this.threshold=x,x===0&&(this.setTextureMemUse=()=>{})}setTextureMemUse(x,c){if(this.textures.has(x)&&(this.memUsed-=this.textures.get(x)),c===0){this.textures.delete(x);return}else this.memUsed+=c,this.textures.set(x,c);this.memUsed>this.threshold&&(this.gcRequested=!0)}gc(){this.gcRequested=!1,this.textures.forEach((x,c)=>{c.renderable||c.free()})}}const vM={isWhite:!0,a:1,r:255,g:255,b:255};function JS(E){if(E===4294967295)return vM;const x=(E>>>24&255)/255,c=E>>>16&255&255,y=E>>>8&255&255,S=E&255&255;return{isWhite:!1,a:x,r:S,g:y,b:c}}function Tw({a:E,r:x,g:c,b:y}){return"rgba(".concat(x,",").concat(c,",").concat(y,",").concat(E,")")}class yM extends ck{constructor(){super(...arguments);Y(this,"image");Y(this,"tintCache")}load(){this.textureSource.state==="freed"&&(this.textureSource.setState("loading"),this.onLoadRequest().then(c=>{this.textureSource.setState("loaded",c),this.updateMemSize()}).catch(c=>{this.textureSource.setState("failed",c)}))}free(){this.image=void 0,this.tintCache=void 0,this.textureSource.setState("freed"),this.memManager.setTextureMemUse(this,0)}updateMemSize(){const c=this.tintCache?8:4;if(this.textureSource.dimensions){const{width:y,height:S}=this.textureSource.dimensions;this.memManager.setTextureMemUse(this,y*S*c)}}hasImage(){return this.image!==void 0}getImage(c){var P;const y=this.image;if(tt(y,"Attempt to get unloaded image texture"),c.isWhite)return this.tintCache&&(this.tintCache=void 0,this.updateMemSize()),y;const S=Tw(c);if(((P=this.tintCache)==null?void 0:P.key)===S)return this.tintCache.image;const R=this.tintTexture(y,S);return this.tintCache={key:S,image:R},this.updateMemSize(),R}tintTexture(c,y){const{width:S,height:R}=c,P=document.createElement("canvas");P.width=S,P.height=R;const v=P.getContext("2d");return v&&(v.fillStyle=y,v.globalCompositeOperation="copy",v.fillRect(0,0,S,R),v.globalCompositeOperation="multiply",v.drawImage(c,0,0,S,R,0,0,S,R),v.globalCompositeOperation="destination-in",v.drawImage(c,0,0,S,R,0,0,S,R)),P}get renderable(){return this.textureSource.renderable}async onLoadRequest(){const{data:c}=await this.textureSource.getTextureData();if(c instanceof ImageData){const y=document.createElement("canvas");y.width=c.width,y.height=c.height;const S=y.getContext("2d");return S&&S.putImageData(c,0,0),this.image=y,{width:c.width,height:c.height}}else if(c instanceof ImageBitmap)return this.image=c,{width:c.width,height:c.height};return{width:0,height:0}}}function xM(E){var x,c;return E.shader instanceof jC&&E.shader.shType===UC&&(c=(x=E.shaderProps)==null?void 0:x.radius)!=null?c:0}class TM extends dk{constructor(c){super(c);Y(this,"context");Y(this,"canvas");Y(this,"pixelRatio");Y(this,"clearColor");Y(this,"renderToTextureActive",!1);Y(this,"activeRttNode",null);this.mode="canvas",this.shManager.renderer=this;const{canvas:y,pixelRatio:S,clearColor:R}=c;this.canvas=y,this.context=y.getContext("2d"),this.pixelRatio=S,this.clearColor=R?hk(R):void 0}reset(){this.canvas.width=this.canvas.width;const c=this.context;if(this.clearColor){const[y,S,R,P]=this.clearColor;c.fillStyle="rgba(".concat(y,", ").concat(S,", ").concat(R,", ").concat(P/255,")"),c.fillRect(0,0,this.canvas.width,this.canvas.height)}c.scale(this.pixelRatio,this.pixelRatio)}render(){}addQuad(c){const y=this.context,{tx:S,ty:R,width:P,height:v,alpha:F,colorTl:V,colorTr:H,colorBr:ee,ta:te,tb:me,tc:A,td:q,clippingRect:ie}=c;let ve=c.texture,ue,he;if(ve){if(ve instanceof mC&&(he=ve.props,ve=ve.parentTexture),ue=this.txManager.getCtxTexture(ve),ve.state==="freed"){ue.load();return}if(ve.state!=="loaded"||!ue.hasImage())return}const re=JS(V),ke=te!==1,Te=ie.width!==0&&ie.height!==0,Le=V!==H||V!==ee,Ne=c.shader?xM(c):0;if((ke||Te||Ne)&&y.save(),Te){const Re=new Path2D,{x:k,y:le,width:ye,height:He}=ie;Re.rect(k,le,ye,He),y.clip(Re)}if(ke){const Re=this.pixelRatio;y.setTransform(te,A,me,q,S*Re,R*Re),y.scale(Re,Re),y.translate(-S,-R)}if(Ne){const Re=new Path2D;Re.roundRect(S,R,P,v,Ne),y.clip(Re)}if(ue){const Re=ue.getImage(re);y.globalAlpha=F,he?y.drawImage(Re,he.x,he.y,he.width,he.height,S,R,P,v):y.drawImage(Re,S,R,P,v),y.globalAlpha=1}else if(Le){let Re=S,k=R,le;V===H?(Re=S,k=R+v,le=JS(ee)):(Re=S+P,k=R,le=JS(H));const ye=y.createLinearGradient(S,R,Re,k);ye.addColorStop(0,Tw(re)),ye.addColorStop(1,Tw(le)),y.fillStyle=ye,y.fillRect(S,R,P,v)}else y.fillStyle=Tw(re),y.fillRect(S,R,P,v);(ke||Te||Ne)&&y.restore()}createCtxTexture(c){return new yM(this.txMemManager,c)}getShaderManager(){return this.shManager}renderRTTNodes(){}removeRTTNode(c){}renderToTexture(c){}}const wM=2e6;class EM extends Rd{constructor(c){super();Y(this,"options");Y(this,"animationManager");Y(this,"txManager");Y(this,"txMemManager");Y(this,"fontManager");Y(this,"textRenderers");Y(this,"shManager");Y(this,"renderer");Y(this,"root");Y(this,"boundsMargin");Y(this,"deltaTime",0);Y(this,"lastFrameTime",0);Y(this,"currentFrameTime",0);Y(this,"fpsNumFrames",0);Y(this,"fpsElapsedTime",0);Y(this,"renderRequested",!1);Y(this,"contextSpy",null);this.options=c;const{canvas:y,clearColor:S,rootId:R,debug:P,appWidth:v,appHeight:F,boundsMargin:V,enableContextSpy:H,numImageWorkers:ee,txMemByteThreshold:te,renderMode:me}=c;this.txManager=new pM(ee),this.txMemManager=new mM(te),this.shManager=new Fk,this.animationManager=new hM,this.contextSpy=H?new gM:null;let A=[0,0,0,0];V&&(A=Array.isArray(V)?V:[V,V,V,V]),this.boundsMargin=A,P!=null&&P.monitorTextureCache&&setInterval(()=>{tt(this.txManager);const ve=this.txManager.getDebugInfo();console.log("Texture ID Cache Size: ",ve.idCacheSize),console.log("Texture Key Cache Size: ",ve.keyCacheSize)},1e3);const q={stage:this,canvas:y,pixelRatio:c.devicePhysicalPixelRatio*c.deviceLogicalPixelRatio,clearColor:S!=null?S:4278190080,bufferMemory:wM,txManager:this.txManager,txMemManager:this.txMemManager,shManager:this.shManager,contextSpy:this.contextSpy};me==="canvas"?this.renderer=new TM(q):this.renderer=new pC(q),fk(me),this.txManager.renderer=this.renderer,this.textRenderers=me==="webgl"?{canvas:new N2(this),sdf:new nM(this)}:{canvas:new N2(this)},this.fontManager=new BC(this.textRenderers);const ie=new kI(this,{id:R,x:0,y:0,width:v,height:F,alpha:1,autosize:!1,clipping:!1,color:0,colorTop:0,colorBottom:0,colorLeft:0,colorRight:0,colorTl:0,colorTr:0,colorBl:0,colorBr:0,zIndex:0,zIndexLocked:0,scaleX:1,scaleY:1,mountX:0,mountY:0,mount:0,pivot:.5,pivotX:.5,pivotY:.5,rotation:0,parent:null,texture:null,textureOptions:null,shader:null,shaderProps:null,rtt:!1});this.root=ie,cM(this)}updateAnimations(){const{animationManager:c}=this;this.root&&(this.lastFrameTime=this.currentFrameTime,this.currentFrameTime=dM(),this.deltaTime=this.lastFrameTime?this.currentFrameTime-this.lastFrameTime:100/6,this.emit("frameTick",{time:this.currentFrameTime,delta:this.deltaTime}),c.update(this.deltaTime))}hasSceneUpdates(){return!!this.root.updateType||this.renderRequested}drawFrame(){const{renderer:c,renderRequested:y}=this;tt(c),this.root.updateType!==0&&this.root.update(this.deltaTime,this.root.clippingRect),c.reset(),c.txMemManager.gcRequested&&c.txMemManager.gc(),c.rttNodes.length>0&&c.renderRTTNodes(),this.addQuads(this.root),c==null||c.render(),this.calculateFps(),y&&(this.renderRequested=!1)}calculateFps(){var y,S,R;const{fpsUpdateInterval:c}=this.options;if(c&&(this.fpsNumFrames++,this.fpsElapsedTime+=this.deltaTime,this.fpsElapsedTime>=c)){const P=Math.round(this.fpsNumFrames*1e3/this.fpsElapsedTime);this.fpsNumFrames=0,this.fpsElapsedTime=0,this.emit("fpsUpdate",{fps:P,contextSpyData:(S=(y=this.contextSpy)==null?void 0:y.getData())!=null?S:null}),(R=this.contextSpy)==null||R.reset()}}addQuads(c){tt(this.renderer&&c.globalTransform),c.isRenderable&&c.renderQuads(this.renderer);for(let y=0;y<c.children.length;y++){const S=c.children[y];S&&(S==null?void 0:S.worldAlpha)!==0&&this.addQuads(S)}}requestRender(){this.renderRequested=!0}resolveTextRenderer(c,y=null){let S=y,R=!1;if(S){const v=this.textRenderers[S];v?v.canRenderFont(c)||(console.warn("Cannot use override text renderer '".concat(S,"' for font"),c),S=null,R=!0):(console.warn("Text renderer override '".concat(S,"' not found.")),S=null,R=!0)}if(!S){for(const[v,F]of Object.entries(this.textRenderers))if(v!=="canvas"&&F.canRenderFont(c)){S=v;break}S||(S="canvas")}R&&console.warn("Falling back to text renderer ".concat(String(S)));const P=this.textRenderers[S];return tt(P,"resolvedTextRenderer undefined"),P}}class AM extends kI{constructor(c,y){super(c,y);Y(this,"textRenderer");Y(this,"trState");Y(this,"_textRendererOverride",null);Y(this,"onTextLoaded",()=>{const{contain:c}=this,y=this.trState.props.width,S=this.trState.props.height,R=this.trState.textW||0,P=this.trState.textH||0;c==="both"?(this.props.width=y,this.props.height=S):c==="width"?(this.props.width=y,this.props.height=P):c==="none"&&(this.props.width=R,this.props.height=P),this.updateLocalTransform(),this.stage.requestRender(),this.emit("loaded",{type:"text",dimensions:{width:this.trState.textW||0,height:this.trState.textH||0}})});Y(this,"onTextFailed",(c,y)=>{this.emit("failed",{type:"text",error:y})});this._textRendererOverride=y.textRendererOverride;const{resolvedTextRenderer:S,textRendererState:R}=this.resolveTextRendererAndState({x:this.absX,y:this.absY,width:y.width,height:y.height,textAlign:y.textAlign,color:y.color,zIndex:y.zIndex,contain:y.contain,scrollable:y.scrollable,scrollY:y.scrollY,offsetY:y.offsetY,letterSpacing:y.letterSpacing,debug:y.debug,fontFamily:y.fontFamily,fontSize:y.fontSize,fontStretch:y.fontStretch,fontStyle:y.fontStyle,fontWeight:y.fontWeight,text:y.text,lineHeight:y.lineHeight,maxLines:y.maxLines,textBaseline:y.textBaseline,verticalAlign:y.verticalAlign,overflowSuffix:y.overflowSuffix});this.textRenderer=S,this.trState=R}get width(){return this.props.width}set width(c){this.props.width=c,this.textRenderer.set.width(this.trState,c),this.contain==="none"&&this.setUpdateType(je.Local)}get height(){return this.props.height}set height(c){this.props.height=c,this.textRenderer.set.height(this.trState,c),this.contain!=="both"&&this.setUpdateType(je.Local)}get color(){return this.trState.props.color}set color(c){this.textRenderer.set.color(this.trState,c)}get text(){return this.trState.props.text}set text(c){this.textRenderer.set.text(this.trState,c)}get textRendererOverride(){return this._textRendererOverride}set textRendererOverride(c){this._textRendererOverride=c,this.textRenderer.destroyState(this.trState);const{resolvedTextRenderer:y,textRendererState:S}=this.resolveTextRendererAndState(this.trState.props);this.textRenderer=y,this.trState=S}get fontSize(){return this.trState.props.fontSize}set fontSize(c){this.textRenderer.set.fontSize(this.trState,c)}get fontFamily(){return this.trState.props.fontFamily}set fontFamily(c){this.textRenderer.set.fontFamily(this.trState,c)}get fontStretch(){return this.trState.props.fontStretch}set fontStretch(c){this.textRenderer.set.fontStretch(this.trState,c)}get fontStyle(){return this.trState.props.fontStyle}set fontStyle(c){this.textRenderer.set.fontStyle(this.trState,c)}get fontWeight(){return this.trState.props.fontWeight}set fontWeight(c){this.textRenderer.set.fontWeight(this.trState,c)}get textAlign(){return this.trState.props.textAlign}set textAlign(c){this.textRenderer.set.textAlign(this.trState,c)}get contain(){return this.trState.props.contain}set contain(c){this.textRenderer.set.contain(this.trState,c)}get scrollable(){return this.trState.props.scrollable}set scrollable(c){this.textRenderer.set.scrollable(this.trState,c)}get scrollY(){return this.trState.props.scrollY}set scrollY(c){this.textRenderer.set.scrollY(this.trState,c)}get offsetY(){return this.trState.props.offsetY}set offsetY(c){this.textRenderer.set.offsetY(this.trState,c)}get letterSpacing(){return this.trState.props.letterSpacing}set letterSpacing(c){this.textRenderer.set.letterSpacing(this.trState,c)}get lineHeight(){return this.trState.props.lineHeight}set lineHeight(c){this.textRenderer.set.lineHeight&&this.textRenderer.set.lineHeight(this.trState,c)}get maxLines(){return this.trState.props.maxLines}set maxLines(c){this.textRenderer.set.maxLines&&this.textRenderer.set.maxLines(this.trState,c)}get textBaseline(){return this.trState.props.textBaseline}set textBaseline(c){this.textRenderer.set.textBaseline&&this.textRenderer.set.textBaseline(this.trState,c)}get verticalAlign(){return this.trState.props.verticalAlign}set verticalAlign(c){this.textRenderer.set.verticalAlign&&this.textRenderer.set.verticalAlign(this.trState,c)}get overflowSuffix(){return this.trState.props.overflowSuffix}set overflowSuffix(c){this.textRenderer.set.overflowSuffix&&this.textRenderer.set.overflowSuffix(this.trState,c)}get debug(){return this.trState.props.debug}set debug(c){this.textRenderer.set.debug(this.trState,c)}update(c,y){super.update(c,y),tt(this.globalTransform),this.textRenderer.set.x(this.trState,this.globalTransform.tx),this.textRenderer.set.y(this.trState,this.globalTransform.ty)}checkRenderProps(){return this.trState.props.text!==""?!0:super.checkRenderProps()}onChangeIsRenderable(c){super.onChangeIsRenderable(c),this.textRenderer.setIsRenderable(this.trState,c)}renderQuads(c){var y;tt(this.globalTransform),!(this.parentHasRenderTexture&&(!c.renderToTextureActive||this.parentRenderTexture!==c.activeRttNode))&&(this.parentHasRenderTexture&&((y=this.props.parent)!=null&&y.rtt)&&(this.globalTransform=Vr.identity(),this.localTransform&&this.globalTransform.multiply(this.localTransform)),tt(this.globalTransform),this.textRenderer.renderQuads(this.trState,this.globalTransform,this.clippingRect,this.worldAlpha,this.parentHasRenderTexture,this.framebufferDimensions))}destroy(){super.destroy(),this.textRenderer.destroyState(this.trState)}resolveTextRendererAndState(c){const y=this.stage.resolveTextRenderer(c,this._textRendererOverride),S=y.createState(c);return S.emitter.on("loaded",this.onTextLoaded),S.emitter.on("failed",this.onTextFailed),y.scheduleUpdateState(S),{resolvedTextRenderer:y,textRendererState:S}}}class SM extends gI{constructor(x,c,y){super(x,c,y,new AM(y,{id:MI(),x:x.x,y:x.y,width:x.width,height:x.height,alpha:x.alpha,autosize:x.autosize,clipping:x.clipping,color:x.color,colorTop:x.colorTop,colorBottom:x.colorBottom,colorLeft:x.colorLeft,colorRight:x.colorRight,colorTl:x.colorTl,colorTr:x.colorTr,colorBl:x.colorBl,colorBr:x.colorBr,zIndex:x.zIndex,zIndexLocked:x.zIndexLocked,scaleX:x.scaleX,scaleY:x.scaleY,mountX:x.mountX,mountY:x.mountY,mount:x.mount,pivot:x.pivot,pivotX:x.pivotX,pivotY:x.pivotY,rotation:x.rotation,text:x.text,fontSize:x.fontSize,fontFamily:x.fontFamily,fontWeight:x.fontWeight,fontStretch:x.fontStretch,fontStyle:x.fontStyle,contain:x.contain,scrollable:x.scrollable,letterSpacing:x.letterSpacing,textAlign:x.textAlign,scrollY:x.scrollY,offsetY:x.offsetY,textRendererOverride:x.textRendererOverride,lineHeight:x.lineHeight,maxLines:x.maxLines,textBaseline:x.textBaseline,verticalAlign:x.verticalAlign,overflowSuffix:x.overflowSuffix,debug:x.debug,parent:null,texture:null,textureOptions:null,shader:null,shaderProps:null,rtt:!1}))}get text(){return this.coreNode.text}set text(x){this.coreNode.text=x}get textRendererOverride(){return this.coreNode.textRendererOverride}set textRendererOverride(x){this.coreNode.textRendererOverride=x}get fontSize(){return this.coreNode.fontSize}set fontSize(x){this.coreNode.fontSize=x}get fontFamily(){return this.coreNode.fontFamily}set fontFamily(x){this.coreNode.fontFamily=x}get fontWeight(){return this.coreNode.fontWeight}set fontWeight(x){this.coreNode.fontWeight=x}get fontStretch(){return this.coreNode.fontStretch}set fontStretch(x){this.coreNode.fontStretch=x}get fontStyle(){return this.coreNode.fontStyle}set fontStyle(x){this.coreNode.fontStyle=x}get textAlign(){return this.coreNode.textAlign}set textAlign(x){this.coreNode.textAlign=x}get contain(){return this.coreNode.contain}set contain(x){this.coreNode.contain=x}get scrollable(){return this.coreNode.scrollable}set scrollable(x){this.coreNode.scrollable=x}get scrollY(){return this.coreNode.scrollY}set scrollY(x){this.coreNode.scrollY=x}get offsetY(){return this.coreNode.offsetY}set offsetY(x){this.coreNode.offsetY=x}get letterSpacing(){return this.coreNode.letterSpacing}set letterSpacing(x){this.coreNode.letterSpacing=x}get lineHeight(){return this.coreNode.lineHeight}set lineHeight(x){x&&(this.coreNode.lineHeight=x)}get maxLines(){return this.coreNode.maxLines}set maxLines(x){x&&(this.coreNode.maxLines=x)}get textBaseline(){return this.coreNode.textBaseline}set textBaseline(x){x&&(this.coreNode.textBaseline=x)}get verticalAlign(){return this.coreNode.verticalAlign}set verticalAlign(x){x&&(this.coreNode.verticalAlign=x)}get overflowSuffix(){return this.coreNode.overflowSuffix}set overflowSuffix(x){x&&(this.coreNode.overflowSuffix=x)}get debug(){return this.coreNode.debug}set debug(x){this.coreNode.debug=x}}class IM{constructor(){Y(this,"root",null);Y(this,"stage",null);Y(this,"rendererMain",null)}async init(x,c,y){this.stage=new EM({rootId:MI(),appWidth:c.appWidth,appHeight:c.appHeight,txMemByteThreshold:c.txMemByteThreshold,boundsMargin:c.boundsMargin,deviceLogicalPixelRatio:c.deviceLogicalPixelRatio,devicePhysicalPixelRatio:c.devicePhysicalPixelRatio,clearColor:c.clearColor,canvas:y,fpsUpdateInterval:c.fpsUpdateInterval,enableContextSpy:c.enableContextSpy,numImageWorkers:c.numImageWorkers,renderMode:c.renderMode,debug:{monitorTextureCache:!1}}),this.rendererMain=x,tt(this.stage.root);const S=new gI(x.resolveNodeDefaults({}),this.rendererMain,this.stage,this.stage.root);this.root=S,S.once("beforeDestroy",this.onBeforeDestroyNode.bind(this,S)),this.onCreateNode(S),c.coreExtensionModule&&await rM(c.coreExtensionModule,this.stage),this.stage.on("fpsUpdate",(R,P)=>{this.onFpsUpdate(P)}),this.stage.on("frameTick",(R,P)=>{this.onFrameTick(P)}),this.stage.on("idle",()=>{this.onIdle()})}createNode(x){tt(this.rendererMain),tt(this.stage);const c=new gI(x,this.rendererMain,this.stage);return c.once("beforeDestroy",this.onBeforeDestroyNode.bind(this,c)),this.onCreateNode(c),c}createTextNode(x){tt(this.rendererMain),tt(this.stage);const c=new SM(x,this.rendererMain,this.stage);return c.once("beforeDestroy",this.onBeforeDestroyNode.bind(this,c)),this.onCreateNode(c),c}destroyNode(x){x.destroy()}releaseTexture(x){const{stage:c}=this;tt(c),c.txManager.removeTextureIdFromCache(x)}getRootNode(){return tt(this.root),this.root}onCreateNode(x){throw new Error("Method not implemented.")}onBeforeDestroyNode(x){throw new Error("Method not implemented.")}onFpsUpdate(x){throw new Error("Method not implemented.")}onFrameTick(x){throw new Error("Method not implemented.")}onIdle(){throw new Error("Method not implemented.")}}let Bp,_I;function CM(E={},x="app"){const c=new IM;return Bp=new oM(E,x,c),_I=Bp.createShader.bind(Bp),Bp}class kM extends Array{constructor(x){super(),this._parent=x}get selected(){return this[this._parent.selected||0]}get firstChild(){return this[0]}insert(x,c){if(c){const y=this.indexOf(c);this.splice(y,0,x)}else this.push(x);x.parent=this._parent}remove(x){const c=this.indexOf(x);c>=0&&this.splice(c,1)}}function MM(){return{BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1,LEGACY:!1}&&!1}const _M=MM()||!1,ou={debug:!1,animationsEnabled:!0,animationSettings:{duration:250,easing:"ease-in-out"},fontSettings:{fontFamily:"Ubuntu",fontSize:100}};function b2(E){return RM(E)&&E.debug}function Md(E,x,...c){_M&&(ou.debug||b2(x)||b2(c[0]))&&console.log(E,x,...c)}function dw(E){return typeof E=="function"}function RM(E){return typeof E=="object"}function Mw(E){return Array.isArray(E)}function LM(E){return typeof E=="string"}function NM(E){return typeof E=="number"}function DM(E){return Number.isInteger(E)}function bM(E,x){for(const c of x)if(c in E)return!0;return!1}function zC(E,x={}){if(Mw(E))E.forEach(c=>{zC(c,x)});else if(E)for(const c in E)x[c]===void 0&&(x[c]=E[c]);return x}class P2 extends Array{constructor(x,c={}){return Mw(c)?super(...c):LM(c)?super(c):super(...Object.entries(c).filter(([y,S])=>S).map(([y])=>y)),this.onChange=x,this}has(x){return this.indexOf(x)>=0}is(x){return this.indexOf(x)>=0}add(x){this.push(x),this.onChange()}toggle(x){this.has(x)?this.remove(x):this.add(x)}remove(x){const c=this.indexOf(x);c>=0&&(this.splice(c,1),this.onChange())}}function PM(E){const x=[];let c=!1;for(let he=0;he<E.children.length;he++){const re=E.children[he];if(re.name!=="TextNode"&&re.flexItem!==!1){if(re.name==="text"&&re.text!==""&&!(re.width||re.height))return!1;re.flexOrder!==void 0&&(c=!0),x.push(re)}}c&&x.sort((he,re)=>(he.flexOrder||0)-(re.flexOrder||0));const y=x.length,R=(E.flexDirection||"row")==="row",P=R?"width":"height",v=R?"height":"width",F=R?"marginLeft":"marginTop",V=R?"marginRight":"marginBottom",H=R?"x":"y",ee=R?"y":"x",te=E[P]||0,me=E[v]||0,A=E.gap||0,q=E.justifyContent||"flexStart",ie=E.alignItems;let ve=0;["center","spaceBetween","spaceEvenly"].includes(q)&&(ve=x.reduce((he,re)=>he+(re[P]||0),0));const ue=me&&ie?he=>{ie==="flexStart"?he[ee]=0:ie==="center"?he[ee]=(me-(he[v]||0))/2:ie==="flexEnd"&&(he[ee]=me-(he[v]||0))}:he=>he;if(q==="flexStart"){let he=0;if(x.forEach(re=>{re[H]=he+(re[F]||0),he+=(re[P]||0)+A+(re[F]||0)+(re[V]||0),ue(re)}),E.flexBoundary!=="fixed"){const re=he-A;if(re!==E[P])return E[P]=re,!0}}else if(q==="flexEnd"){let he=te;for(let re=y-1;re>=0;re--){const ke=x[re];tt(ke),ke[H]=he-(ke[P]||0)-(ke[V]||0),he-=(ke[P]||0)+A+(ke[F]||0)+(ke[V]||0),ue(ke)}}else if(q==="center"){let he=(te-(ve+A*(y-1)))/2;x.forEach(re=>{re[H]=he,he+=(re[P]||0)+A,ue(re)})}else if(q==="spaceBetween"){const he=(te-ve)/(y-1);let re=0;x.forEach(ke=>{ke[H]=re,re+=(ke[P]||0)+he,ue(ke)})}else if(q==="spaceEvenly"){const he=(te-ve)/(y+1);let re=he;x.forEach(ke=>{ke[H]=re,re+=(ke[P]||0)+he,ue(ke)})}return!1}const{animationSettings:OM}=ou,hw=[];let eI=!0;function O2(E){const x=[];for(const[c,y]of Object.entries(E))x.push({type:c,props:y});return _I("DynamicShader",{effects:x})}function Pv(E=""){return{set(x){NM(x)&&(x={width:x,color:255}),this.effects={...this.effects||{},["border".concat(E)]:x},this["_border".concat(E)]=x},get(){return this["_border".concat(E)]}}}const UM=["alpha","color","colorTop","colorRight","colorLeft","colorBottom","colorTl","colorTr","colorBl","colorBr","height","fontSize","lineHeight","mount","mountX","mountY","pivot","pivotX","pivotY","rotation","scale","width","worldX","worldY","x","y","zIndex","zIndexLocked"],jM=["autosize","clipping","contain","fontFamily","fontStretch","fontStyle","fontWeight","letterSpacing","maxLines","offsetY","overflowSuffix","rtt","scrollable","scrollY","src","text","textAlign","textBaseline","textOverflow","texture","verticalAlign","wordWrap"];class ws extends Object{constructor(x){super(),this._animationQueue=[],this._animationRunning=!1,this.name=x,this._renderProps={},this.children=new kM(this)}get effects(){return this._effects}set effects(x){this._effects=x,this.lng&&(this.shader=O2(x))}get parent(){return this._parent}set parent(x){var c;this._parent=x,this.lng&&(this.lng.parent=(c=x==null?void 0:x.lng)!=null?c:null)}get shader(){return this._shader}set shader(x){Mw(x)?this._shader=_I(...x):this._shader=x,this._sendToLightning("shader",this._shader)}_sendToLightningAnimatable(x,c){if(this.lng){if(this.transition&&(this.transition===!0||this.transition[x])){const y=this.transition===!0||this.transition[x]===!0?void 0:this.transition[x];return this.animate({[x]:c},y).start()}this.lng[x]=c}else this._renderProps[x]=c}_sendToLightning(x,c){this.lng?this.lng[x]=c:this._renderProps[x]=c}animate(x,c){return tt(this.lng,"Node must be rendered before animating"),this.lng.animate(x,c||this.animationSettings)}chain(x,c){return this._animationRunning&&(this._animationQueue=[],this._animationRunning=!1),c?this._animationQueueSettings=c:this._animationQueueSettings||(this._animationQueueSettings=c||this.animationSettings),c=c||this._animationQueueSettings,this._animationQueue.push({props:x,animationSettings:c}),this}async start(){let x=this._animationQueue.shift();for(;x;)this._animationRunning=!0,await this.animate(x.props,x.animationSettings).start().waitUntilStopped(),x=this._animationQueue.shift();this._animationRunning=!1,this._animationQueueSettings=void 0}setFocus(){if(this.lng){if(this.forwardFocus!==void 0)if(dw(this.forwardFocus)){if(this.forwardFocus.call(this,this)!==!1)return}else{const x=typeof this.forwardFocus=="number"?this.forwardFocus:null;if(x!==null&&x<this.children.length){const c=this.children[x];c instanceof ws&&c.setFocus();return}}queueMicrotask(()=>_k(this))}else this.autofocus=!0}isTextNode(){return this.name==="text"}_layoutOnLoad(){this.lng.on("loaded",(x,c)=>{const{dimensions:y}=c;this.parent.updateLayout(this,y)})}getText(){return this.children.map(x=>x.text).join("")}destroy(){var x;this._queueDelete&&((x=this.lng)==null||x.destroy())}set onEvents(x){this._events=x}get onEvents(){return this._events||[]}set style(x){Mw(x)?this._style=zC(x):this._style=x;for(const c in this._style)this[c]===void 0&&(this[c]=this._style[c])}get style(){return this._style}get hasChildren(){return this.children.length>0}getChildById(x){return this.children.find(c=>c.id===x)}searchChildrenById(x){for(let c=0;c<this.children.length;c++){const y=this.children[c];if(y instanceof ws){if(y.id===x)return y;const S=y.searchChildrenById(x);if(S)return S}}}set states(x){this._states=new P2(this._stateChanged.bind(this),x),this.lng&&this._stateChanged()}get states(){return this._states=this._states||new P2(this._stateChanged.bind(this)),this._states}get animationSettings(){return this._animationSettings||OM}set animationSettings(x){this._animationSettings=x}requiresLayout(){return this.display==="flex"||this.onBeforeLayout}updateLayout(x,c){var y,S;if(this.hasChildren){Md("Layout: ",this);let R=!1;dw(this.onBeforeLayout)&&(R=this.onBeforeLayout.call(this,this,x,c)),this.display==="flex"?(PM(this)||R)&&((y=this.parent)==null||y.updateLayout()):R&&((S=this.parent)==null||S.updateLayout()),dw(this.onLayout)&&this.onLayout.call(this,this,x,c)}}_stateChanged(){if(Md("State Changed: ",this,this.states),this.forwardStates){const c=this.states.slice();this.children.forEach(y=>y.states=c)}const x=this.states;if(this._undoStyles||this.style&&bM(this.style,x)){this._undoStyles=this._undoStyles||[];const c={};this._undoStyles.forEach(S=>{c[S]=this.style[S]});const y=x.reduce((S,R)=>{const P=this.style[R];return P&&(S={...S,...P}),S},{});this._undoStyles=Object.keys(y),y.transition!==void 0&&(this.transition=y.transition),Object.assign(this,c,y)}}render(){const x=this,c=this.parent;if(!c){console.warn("Parent not set - no node created for: ",this);return}if(!c.lng){console.warn("Parent not rendered yet: ",this);return}if(this.lng){console.warn("Node already rendered: ",this);return}c.requiresLayout()&&hw.indexOf(c)===-1&&(hw.push(c),eI&&(eI=!1,queueMicrotask(()=>{for(eI=!0;hw.length;)hw.pop().updateLayout()}))),this.states.length&&this._stateChanged();const y=x._renderProps;if(y.x=y.x||0,y.y=y.y||0,c.lng&&(y.parent=c.lng),x._effects&&(this.shader=O2(x._effects)),x.isTextNode()){if(ou.fontSettings)for(const S in ou.fontSettings)y[S]===void 0&&(y[S]=ou.fontSettings[S]);y.text=x.getText(),y.contain&&(y.width||(y.width=(c.width||0)-y.x-(y.marginRight||0)),y.contain==="both"&&!y.height&&!y.maxLines?y.height=(c.height||0)-y.y-(y.marginBottom||0):y.maxLines===1&&(y.height=y.height||y.lineHeight||y.fontSize)),Md("Rendering: ",this,y),x.lng=Bp.createTextNode(y),c.requiresLayout()&&(!y.width||!y.height)&&x._layoutOnLoad()}else y.texture||(isNaN(y.width)&&(y.width=(c.width||0)-y.x),isNaN(y.height)&&(y.height=(c.height||0)-y.y),!y.color&&!y.src&&(y.color=0)),Md("Rendering: ",this,y),x.lng=Bp.createNode(y);y.autosize&&c.requiresLayout()&&x._layoutOnLoad(),x.onFail&&x.lng.on("failed",x.onFail),x.onLoad&&x.lng.on("loaded",x.onLoad),dw(this.onCreate)&&this.onCreate.call(this,x),x.onEvents.forEach(([S,R])=>{var P;(P=x.lng)==null||P.on(S,(v,F)=>R(x,F))}),x.lng.div&&(x.lng.div.solid=x),x.name!=="text"&&x.children.forEach(S=>{S.render?S.render():S.text!==""&&console.warn("TextNode outside of <Text>: ",S)}),x.autofocus&&x.setFocus(),this._renderProps={}}}for(const E of UM)Object.defineProperty(ws.prototype,E,{get(){return this.lng?this.lng[E]:this._renderProps[E]},set(x){this._sendToLightningAnimatable(E,x)}});for(const E of jM)Object.defineProperty(ws.prototype,E,{get(){return this.lng?this.lng[E]:this._renderProps[E]},set(x){this._sendToLightning(E,x)}});Object.defineProperties(ws.prototype,{borderRadius:{set(E){this._borderRadius=E,this.effects={...this.effects||{},radius:{radius:E}}},get(){return this._borderRadius}},border:Pv(),borderLeft:Pv("Left"),borderRight:Pv("Right"),borderTop:Pv("Top"),borderBottom:Pv("Bottom")});Object.defineProperties(ws.prototype,{linearGradient:{set(E={}){this._linearGradient=E,this.effects={...this.effects||{},linearGradient:E}},get(){return this._linearGradient}}});const su=E=>(()=>{var x=KC("text");return HC(x,E,!1),x})(),Ji=E=>(()=>{var x=KC("node");return HC(x,E,!1),x})();function BM({createElement:E,createTextNode:x,isTextNode:c,replaceText:y,insertNode:S,removeNode:R,setProperty:P,getParentNode:v,getFirstChild:F,getNextSibling:V}){function H(ue,he,re,ke){if(re!==void 0&&!ke&&(ke=[]),typeof he!="function")return ee(ue,he,ke,re);iu(Te=>ee(ue,he(),Te,re),ke)}function ee(ue,he,re,ke,Te){for(;typeof re=="function";)re=re();if(he===re)return re;const Le=typeof he,Ne=ke!==void 0;if(Le==="string"||Le==="number")if(Le==="number"&&(he=he.toString()),Ne){let Re=re[0];Re&&c(Re)?y(Re,he):Re=x(he),re=A(ue,re,ke,Re)}else re!==""&&typeof re=="string"?y(F(ue),re=he):(A(ue,re,ke,x(he)),re=he);else if(he==null||Le==="boolean")re=A(ue,re,ke);else{if(Le==="function")return iu(()=>{let Re=he();for(;typeof Re=="function";)Re=Re();re=ee(ue,Re,re,ke)}),()=>re;if(Array.isArray(he)){const Re=[];if(te(Re,he,Te))return iu(()=>re=ee(ue,Re,re,ke,!0)),()=>re;if(Re.length===0){const k=A(ue,re,ke);if(Ne)return re=k}else Array.isArray(re)?re.length===0?q(ue,Re,ke):me(ue,re,Re):re==null||re===""?q(ue,Re):me(ue,Ne&&re||[F(ue)],Re);re=Re}else{if(Array.isArray(re)){if(Ne)return re=A(ue,re,ke,he);A(ue,re,null,he)}else re==null||re===""||!F(ue)?S(ue,he):ie(ue,he,F(ue));re=he}}return re}function te(ue,he,re){let ke=!1;for(let Te=0,Le=he.length;Te<Le;Te++){let Ne=he[Te],Re;if(!(Ne==null||Ne===!0||Ne===!1))if(Array.isArray(Ne))ke=te(ue,Ne)||ke;else if((Re=typeof Ne)=="string"||Re==="number")ue.push(x(Ne));else if(Re==="function")if(re){for(;typeof Ne=="function";)Ne=Ne();ke=te(ue,Array.isArray(Ne)?Ne:[Ne])||ke}else ue.push(Ne),ke=!0;else ue.push(Ne)}return ke}function me(ue,he,re){let ke=re.length,Te=he.length,Le=ke,Ne=0,Re=0,k=V(he[Te-1]),le=null;for(;Ne<Te||Re<Le;){if(he[Ne]===re[Re]){Ne++,Re++;continue}for(;he[Te-1]===re[Le-1];)Te--,Le--;if(Te===Ne){const ye=Le<ke?Re?V(re[Re-1]):re[Le-Re]:k;for(;Re<Le;)S(ue,re[Re++],ye)}else if(Le===Re)for(;Ne<Te;)(!le||!le.has(he[Ne]))&&R(ue,he[Ne]),Ne++;else if(he[Ne]===re[Le-1]&&re[Re]===he[Te-1]){const ye=V(he[--Te]);S(ue,re[Re++],V(he[Ne++])),S(ue,re[--Le],ye),he[Te]=re[Le]}else{if(!le){le=new Map;let He=Re;for(;He<Le;)le.set(re[He],He++)}const ye=le.get(he[Ne]);if(ye!=null)if(Re<ye&&ye<Le){let He=Ne,_e=1,we;for(;++He<Te&&He<Le&&!((we=le.get(he[He]))==null||we!==ye+_e);)_e++;if(_e>ye-Re){const st=he[Ne];for(;Re<ye;)S(ue,re[Re++],st)}else ie(ue,re[Re++],he[Ne++])}else Ne++;else R(ue,he[Ne++])}}}function A(ue,he,re,ke){if(re===void 0){let Le;for(;Le=F(ue);)R(ue,Le);return ke&&S(ue,ke),""}const Te=ke||x("");if(he.length){let Le=!1;for(let Ne=he.length-1;Ne>=0;Ne--){const Re=he[Ne];if(Te!==Re){const k=v(Re)===ue;!Le&&!Ne?k?ie(ue,Te,Re):S(ue,Te,re):k&&R(ue,Re)}else Le=!0}}else S(ue,Te,re);return[Te]}function q(ue,he,re){for(let ke=0,Te=he.length;ke<Te;ke++)S(ue,he[ke],re)}function ie(ue,he,re){S(ue,he,re),R(ue,re)}function ve(ue,he,re={},ke){return he||(he={}),ke||iu(()=>re.children=ee(ue,he.children,re.children)),iu(()=>he.ref&&he.ref(ue)),iu(()=>{for(const Te in he){if(Te==="children"||Te==="ref")continue;const Le=he[Te];Le!==re[Te]&&(P(ue,Te,Le,re[Te]),re[Te]=Le)}}),re}return{render(ue,he){let re;return Fp(ke=>{re=ke,H(he,ue())}),re},insert:H,spread(ue,he,re){typeof he=="function"?iu(ke=>ve(ue,he(),ke,re)):ve(ue,he,void 0,re)},createElement:E,createTextNode:x,insertNode:S,setProp(ue,he,re,ke){return P(ue,he,re,ke),re},mergeProps:CI,effect:iu,memo:ci,createComponent:MC,use(ue,he,re){return xr(()=>ue(he,re))}}}function FM(E){const x=BM(E);return x.mergeProps=CI,x}const GC={createElement(E){return new ws(E)},createTextNode(E){return{name:"TextNode",text:E,parent:void 0}},replaceText(E,x){Md("Replace Text: ",E,x),E.text=x;const c=E.parent;tt(c),c.text=c.getText()},setProperty(E,x,c=!0){E[x]=c},insertNode(E,x,c){Md("INSERT: ",E,x,c),E.children.insert(x,c),x._queueDelete=!1,x instanceof ws?E.lng&&x.render():E.isTextNode()&&(E.text=E.getText())},isTextNode(E){return E.isTextNode()},removeNode(E,x){Md("REMOVE: ",E,x),E.children.remove(x),x._queueDelete=!0,x instanceof ws&&queueMicrotask(()=>x.destroy())},getParentNode(E){return E.parent},getFirstChild(E){return E.children[0]},getNextSibling(E){const x=E.parent.children||[],c=x.indexOf(E)+1;if(c<x.length)return x[c]}},VC=FM(GC);let _w;async function zM(E,x){return _w=CM(ou.rendererOptions,"app"),await _w.init()}const GM=async function(E,x){const c=GC.createElement("App");return await zM(),c.lng=_w.root,{dispose:VC.render(E,c),rootNode:c,renderer:_w}},{effect:fL,memo:Rw,createComponent:ot,createElement:KC,createTextNode:pL,insertNode:gL,insert:mL,spread:HC,setProp:vL,mergeProps:Fl,use:yL}=VC;function fa(E=""){return DM(E)?E:typeof E=="string"?E.startsWith("#")?+(E.replace("#","0x")+(E.length===7?"ff":"")):E.startsWith("0x")?Number(E):+("0x"+(E.length===6?E+"ff":E)):0}const U2="_$DX_DELEGATE";function VM(E,x=window.document){const c=x[U2]||(x[U2]=new Set);for(let y=0,S=E.length;y<S;y++){const R=E[y];c.has(R)||(c.add(R),x.addEventListener(R,KM))}}function KM(E){const x="$$".concat(E.type);let c=E.composedPath&&E.composedPath()[0]||E.target;for(E.target!==c&&Object.defineProperty(E,"target",{configurable:!0,value:c}),Object.defineProperty(E,"currentTarget",{configurable:!0,get(){return c||document}});c;){const y=c[x];if(y&&!c.disabled){const S=c["".concat(x,"Data")];if(S!==void 0?y.call(c,S,E):y.call(c,E),E.cancelBubble)return}c=c._$host||c.parentNode||c.host}}const HM=!1;function WC(){let E=new Set;function x(S){return E.add(S),()=>E.delete(S)}let c=!1;function y(S,R){if(c)return!(c=!1);const P={to:S,options:R,defaultPrevented:!1,preventDefault:()=>P.defaultPrevented=!0};for(const v of E)v.listener({...P,from:v.location,retry:F=>{F&&(c=!0),v.navigate(S,{...R,resolve:!1})}});return!P.defaultPrevented}return{subscribe:x,confirm:y}}let vI;function RI(){(!window.history.state||window.history.state._depth==null)&&window.history.replaceState({...window.history.state,_depth:window.history.length-1},""),vI=window.history.state._depth}RI();function WM(E){return{...E,_depth:window.history.state&&window.history.state._depth}}function qM(E,x){let c=!1;return()=>{const y=vI;RI();const S=y==null?null:vI-y;if(c){c=!1;return}S&&x(S)?(c=!0,window.history.go(-S)):E()}}const XM=/^(?:[a-z0-9]+:)?\/\//i,YM=/^\/+|(\/)\/+$/g,qC="http://sr";function Vv(E,x=!1){const c=E.replace(YM,"$1");return c?x||/^[?#]/.test(c)?c:"/"+c:""}function ww(E,x,c){if(XM.test(x))return;const y=Vv(E),S=c&&Vv(c);let R="";return!S||x.startsWith("/")?R=y:S.toLowerCase().indexOf(y.toLowerCase())!==0?R=y+S:R=S,(R||"/")+Vv(x,!R)}function $M(E,x){if(E==null)throw new Error(x);return E}function QM(E,x){return Vv(E).replace(/\/*(\*.*)?$/g,"")+Vv(x)}function XC(E){const x={};return E.searchParams.forEach((c,y)=>{x[y]=c}),x}function YC(E,x,c){const[y,S]=E.split("/*",2),R=y.split("/").filter(Boolean),P=R.length;return v=>{const F=v.split("/").filter(Boolean),V=F.length-P;if(V<0||V>0&&S===void 0&&!x)return null;const H={path:P?"":"/",params:{}},ee=te=>c===void 0?void 0:c[te];for(let te=0;te<P;te++){const me=R[te],A=F[te],q=me[0]===":",ie=q?me.slice(1):me;if(q&&tI(A,ee(ie)))H.params[ie]=A;else if(q||!tI(A,me))return null;H.path+="/".concat(A)}if(S){const te=V?F.slice(-V).join("/"):"";if(tI(te,ee(S)))H.params[S]=te;else return null}return H}}function tI(E,x){const c=y=>y.localeCompare(E,void 0,{sensitivity:"base"})===0;return x===void 0?!0:typeof x=="string"?c(x):typeof x=="function"?x(E):Array.isArray(x)?x.some(c):x instanceof RegExp?x.test(E):!1}function ZM(E){const[x,c]=E.pattern.split("/*",2),y=x.split("/").filter(Boolean);return y.reduce((S,R)=>S+(R.startsWith(":")?2:3),y.length-(c===void 0?0:1))}function $C(E){const x=new Map,c=Xv();return new Proxy({},{get(y,S){return x.has(S)||wC(c,()=>x.set(S,ci(()=>E()[S]))),x.get(S)()},getOwnPropertyDescriptor(){return{enumerable:!0,configurable:!0}},ownKeys(){return Reflect.ownKeys(E())}})}function LI(E){let x=/(\/?\:[^\/]+)\?/.exec(E);if(!x)return[E];let c=E.slice(0,x.index),y=E.slice(x.index+x[0].length);const S=[c,c+=x[1]];for(;x=/^(\/\:[^\/]+)\?/.exec(y);)S.push(c+=x[1]),y=y.slice(x[0].length);return LI(y).reduce((R,P)=>[...R,...S.map(v=>v+P)],[])}const JM=100,QC=EC(),ZC=EC(),NI=()=>$M(AC(QC),"<A> and 'use' router primitives can be only used inside a Route."),Bw=()=>NI().navigatorFactory(),e_=()=>NI().location,t_=(E,x)=>{const c=e_(),y=ci(()=>LI(E()).map(S=>YC(S,void 0,x)));return ci(()=>{for(const S of y()){const R=S(c.pathname);if(R)return R}})},JC=()=>NI().params;function n_(E,x=""){const{component:c,load:y,children:S,info:R}=E,P=!S||Array.isArray(S)&&!S.length,v={key:E,component:c,load:y,info:R};return e4(E.path).reduce((F,V)=>{for(const H of LI(V)){const ee=QM(x,H);let te=P?ee:ee.split("/*",1)[0];te=te.split("/").map(me=>me.startsWith(":")||me.startsWith("*")?me:encodeURIComponent(me)).join("/"),F.push({...v,originalPath:V,pattern:te,matcher:YC(te,!P,E.matchFilters)})}return F},[])}function i_(E,x=0){return{routes:E,score:ZM(E[E.length-1])*1e4-x,matcher(c){const y=[];for(let S=E.length-1;S>=0;S--){const R=E[S],P=R.matcher(c);if(!P)return null;y.unshift({...P,route:R})}return y}}}function e4(E){return Array.isArray(E)?E:[E]}function t4(E,x="",c=[],y=[]){const S=e4(E);for(let R=0,P=S.length;R<P;R++){const v=S[R];if(v&&typeof v=="object"){v.hasOwnProperty("path")||(v.path="");const F=n_(v,x);for(const V of F){c.push(V);const H=Array.isArray(v.children)&&v.children.length===0;if(v.children&&!H)t4(v.children,V.pattern,c,y);else{const ee=i_([...c],y.length);y.push(ee)}c.pop()}}}return c.length?y:y.sort((R,P)=>P.score-R.score)}function nI(E,x){for(let c=0,y=E.length;c<y;c++){const S=E[c].matcher(x);if(S)return S}return[]}function r_(E,x){const c=new URL(qC),y=ci(F=>{const V=E();try{return new URL(V,c)}catch(H){return console.error("Invalid path ".concat(V)),F}},c,{equals:(F,V)=>F.href===V.href}),S=ci(()=>y().pathname),R=ci(()=>y().search,!0),P=ci(()=>y().hash),v=()=>"";return{get pathname(){return S()},get search(){return R()},get hash(){return P()},get state(){return x()},get key(){return v()},query:$C(Ow(R,()=>XC(y())))}}let pa;function o_(){return pa}function s_(E,x,c,y={}){const{signal:[S,R],utils:P={}}=E,v=P.parsePath||(ye=>ye),F=P.renderPath||(ye=>ye),V=P.beforeLeave||WC(),H=ww("",y.base||"");if(H===void 0)throw new Error("".concat(H," is not a valid base path"));H&&!S().value&&R({value:H,replace:!0,scroll:!1});const[ee,te]=kn(!1),me=async ye=>{te(!0);try{await vk(ye)}finally{te(!1)}},[A,q]=kn(S().value),[ie,ve]=kn(S().state),ue=r_(A,ie),he=[],re=kn([]),ke=ci(()=>typeof y.transformUrl=="function"?nI(x(),y.transformUrl(ue.pathname)):nI(x(),ue.pathname)),Te=$C(()=>{const ye=ke(),He={};for(let _e=0;_e<ye.length;_e++)Object.assign(He,ye[_e].params);return He}),Le={pattern:H,path:()=>H,outlet:()=>null,resolvePath(ye){return ww(H,ye)}};return iu(()=>{const{value:ye,state:He}=S();xr(()=>{me(()=>{pa="native",ye!==A()&&q(ye),ve(He),re[1]([])}).then(()=>{pa=void 0})})}),{base:Le,location:ue,params:Te,isRouting:ee,renderPath:F,parsePath:v,navigatorFactory:Re,matches:ke,beforeLeave:V,preloadRoute:le,singleFlight:y.singleFlight===void 0?!0:y.singleFlight,submissions:re};function Ne(ye,He,_e){xr(()=>{if(typeof He=="number"){He&&(P.go?P.go(He):console.warn("Router integration does not support relative routing"));return}const{replace:we,resolve:st,scroll:Et,state:Vn}={replace:!1,resolve:!0,scroll:!0,..._e},Mn=st?ye.resolvePath(He):ww("",He);if(Mn===void 0)throw new Error("Path '".concat(He,"' is not a routable path"));if(he.length>=JM)throw new Error("Too many redirects");const _n=A();if((Mn!==_n||Vn!==ie())&&!HM){if(V.confirm(Mn,_e)){const Bn=he.push({value:_n,replace:we,scroll:Et,state:ie()});me(()=>{pa="navigate",q(Mn),ve(Vn),re[1]([])}).then(()=>{he.length===Bn&&(pa=void 0,k({value:Mn,state:Vn}))})}}})}function Re(ye){return ye=ye||AC(ZC)||Le,(He,_e)=>Ne(ye,He,_e)}function k(ye){const He=he[0];He&&((ye.value!==He.value||ye.state!==He.state)&&R({...ye,replace:He.replace,scroll:He.scroll}),he.length=0)}function le(ye,He){const _e=nI(x(),ye.pathname),we=pa;pa="preload";for(let st in _e){const{route:Et,params:Vn}=_e[st];Et.component&&Et.component.preload&&Et.component.preload();const{load:Mn}=Et;He&&Mn&&wC(c(),()=>Mn({params:Vn,location:{pathname:ye.pathname,search:ye.search,hash:ye.hash,query:XC(ye),state:null,key:""},intent:"preload"}))}pa=we}}function u_(E,x,c,y){const{base:S,location:R,params:P}=E,{pattern:v,component:F,load:V}=y().route,H=ci(()=>y().path);F&&F.preload&&F.preload();const ee=V?V({params:P,location:R,intent:pa||"initial"}):void 0;return{parent:x,pattern:v,path:H,outlet:()=>F?MC(F,{params:P,location:R,data:ee,get children(){return c()}}):c(),resolvePath(me){return ww(S.path(),me,H())}}}const a_=E=>x=>{const{base:c}=x,y=SI(()=>x.children),S=ci(()=>t4(y(),x.base||""));let R;const P=s_(E,S,()=>R,{base:c,singleFlight:x.singleFlight,transformUrl:x.transformUrl});return E.create&&E.create(P),ot(QC.Provider,{value:P,get children(){return ot(l_,{routerState:P,get root(){return x.root},get load(){return x.rootLoad},get children(){return[Rw(()=>(R=Xv())&&null),ot(c_,{routerState:P,get branches(){return S()}})]}})}})};function l_(E){const x=E.routerState.location,c=E.routerState.params,y=ci(()=>E.load&&xr(()=>{E.load({params:c,location:x,intent:o_()||"initial"})}));return ot(_C,{get when(){return E.root},keyed:!0,get fallback(){return E.children},children:S=>ot(S,{params:c,location:x,get data(){return y()},get children(){return E.children}})})}function c_(E){const x=[];let c;const y=ci(Ow(E.routerState.matches,(S,R,P)=>{let v=R&&S.length===R.length;const F=[];for(let V=0,H=S.length;V<H;V++){const ee=R&&R[V],te=S[V];P&&ee&&te.route.key===ee.route.key?F[V]=P[V]:(v=!1,x[V]&&x[V](),Fp(me=>{x[V]=me,F[V]=u_(E.routerState,F[V-1]||E.routerState.base,j2(()=>y()[V+1]),()=>E.routerState.matches()[V])}))}return x.splice(S.length).forEach(V=>V()),P&&v?P:(c=F[0],F)}));return j2(()=>y()&&c)()}const j2=E=>()=>ot(_C,{get when(){return E()},keyed:!0,children:x=>ot(ZC.Provider,{value:x,get children(){return x.outlet()}})}),Ov=E=>{const x=SI(()=>E.children);return CI(E,{get children(){return x()}})};function d_([E,x],c,y){return[E,y?S=>x(y(S)):x]}function h_(E){if(E==="#")return null;try{return document.querySelector(E)}catch(x){return null}}function f_(E){let x=!1;const c=S=>typeof S=="string"?{value:S}:S,y=d_(kn(c(E.get()),{equals:(S,R)=>S.value===R.value&&S.state===R.state}),void 0,S=>(!x&&E.set(S),S));return E.init&&va(E.init((S=E.get())=>{x=!0,y[1](c(S)),x=!1})),a_({signal:y,create:E.create,utils:E.utils})}function p_(E,x,c){return E.addEventListener(x,c),()=>E.removeEventListener(x,c)}function g_(E,x){const c=h_("#".concat(E));c?c.scrollIntoView():x&&window.scrollTo(0,0)}const m_=new Map;function v_(E=!0,x=!1,c="/_server",y){return S=>{const R=S.base.path(),P=S.navigatorFactory(S.base);let v={};function F(q){return q.namespaceURI==="http://www.w3.org/2000/svg"}function V(q){if(q.defaultPrevented||q.button!==0||q.metaKey||q.altKey||q.ctrlKey||q.shiftKey)return;const ie=q.composedPath().find(Te=>Te instanceof Node&&Te.nodeName.toUpperCase()==="A");if(!ie||x&&!ie.hasAttribute("link"))return;const ve=F(ie),ue=ve?ie.href.baseVal:ie.href;if((ve?ie.target.baseVal:ie.target)||!ue&&!ie.hasAttribute("state"))return;const re=(ie.getAttribute("rel")||"").split(/\s+/);if(ie.hasAttribute("download")||re&&re.includes("external"))return;const ke=ve?new URL(ue,document.baseURI):new URL(ue);if(!(ke.origin!==window.location.origin||R&&ke.pathname&&!ke.pathname.toLowerCase().startsWith(R.toLowerCase())))return[ie,ke]}function H(q){const ie=V(q);if(!ie)return;const[ve,ue]=ie,he=S.parsePath(ue.pathname+ue.search+ue.hash),re=ve.getAttribute("state");q.preventDefault(),P(he,{resolve:!1,replace:ve.hasAttribute("replace"),scroll:!ve.hasAttribute("noscroll"),state:re&&JSON.parse(re)})}function ee(q){const ie=V(q);if(!ie)return;const[ve,ue]=ie;v[ue.pathname]||S.preloadRoute(ue,ve.getAttribute("preload")!=="false")}function te(q){const ie=V(q);if(!ie)return;const[ve,ue]=ie;v[ue.pathname]||(v[ue.pathname]=setTimeout(()=>{S.preloadRoute(ue,ve.getAttribute("preload")!=="false"),delete v[ue.pathname]},200))}function me(q){const ie=V(q);if(!ie)return;const[,ve]=ie;v[ve.pathname]&&(clearTimeout(v[ve.pathname]),delete v[ve.pathname])}function A(q){if(q.defaultPrevented)return;let ie=q.submitter&&q.submitter.hasAttribute("formaction")?q.submitter.getAttribute("formaction"):q.target.getAttribute("action");if(!ie)return;if(!ie.startsWith("https://action/")){const ue=new URL(ie,qC);if(ie=S.parsePath(ue.pathname+ue.search),!ie.startsWith(c))return}if(q.target.method.toUpperCase()!=="POST")throw new Error("Only POST forms are supported for Actions");const ve=m_.get(ie);if(ve){q.preventDefault();const ue=new FormData(q.target);q.submitter&&q.submitter.name&&ue.append(q.submitter.name,q.submitter.value),ve.call({r:S,f:q.target},ue)}}VM(["click","submit"]),document.addEventListener("click",H),E&&(document.addEventListener("mouseover",te),document.addEventListener("mouseout",me),document.addEventListener("focusin",ee),document.addEventListener("touchstart",ee)),document.addEventListener("submit",A),va(()=>{document.removeEventListener("click",H),E&&(document.removeEventListener("mouseover",te),document.removeEventListener("mouseout",me),document.removeEventListener("focusin",ee),document.removeEventListener("touchstart",ee)),document.removeEventListener("submit",A)})}}function y_(E){const x=E.replace(/^.*?#/,"");if(!x.startsWith("/")){const[,c="/"]=window.location.hash.split("#",2);return"".concat(c,"#").concat(x)}return x}function x_(E){const x=()=>window.location.hash.slice(1),c=WC();return f_({get:x,set({value:y,replace:S,scroll:R,state:P}){S?window.history.replaceState(WM(P),"","#"+y):window.location.hash=y;const v=y.indexOf("#"),F=v>=0?y.slice(v+1):"";g_(F,R),RI()},init:y=>p_(window,"hashchange",qM(y,S=>!c.confirm(S&&S<0?S:x()))),create:v_(E.preload,E.explicitLinks,E.actionBase),utils:{go:y=>window.history.go(y),renderPath:y=>"#".concat(y),parsePath:y_,beforeLeave:c}})(E)}var T_=!!Mk,w_=T_?E=>Xv()?va(E):E:va;function E_(E,x,c,y){return E.addEventListener(x,c,y),w_(E.removeEventListener.bind(E,x,c,y))}function A_(E,x=Xv()){let c=0,y,S;return()=>(c++,va(()=>{c--,queueMicrotask(()=>{!c&&S&&(S(),S=y=void 0)})}),S||Fp(R=>y=E(S=R),x),y)}var S_=A_(()=>{const[E,x]=kn(null);return E_(window,"keydown",c=>{x(c),setTimeout(()=>x(null))}),E});function fw(E){return typeof E=="function"}function I_(E){return Array.isArray(E)}const pw={ArrowLeft:"Left",ArrowRight:"Right",ArrowUp:"Up",ArrowDown:"Down",Enter:"Enter",l:"Last"," ":"Space",Backspace:"Back",Escape:"Escape"},[Lw,C_]=kn([]),k_=E=>{const x=S_();if(E)for(const[c,y]of Object.entries(E))I_(y)?y.forEach(S=>{pw[S]=c}):pw[y]=c;return ma(Ow(RC,(c,y,S=[])=>{let R=c;const P=[];for(;R;)R.states.has("focus")||(R.states.add("focus"),fw(R.onFocus)&&R.onFocus.call(R,c,y)),P.push(R),R=R.parent;return S.forEach(v=>{P.includes(v)||(v.states.remove("focus"),fw(v.onBlur)&&v.onBlur.call(v,c,y))}),C_(P),P},{defer:!0})),ma(()=>{const c=x();if(c){const y=pw[c.key]||pw[c.keyCode];xr(()=>{const S=Lw();let R;for(const P of S){if(R=R||P,y){const v=P["on".concat(y)];if(fw(v)&&v.call(P,c,P,R)===!0)break}else console.log("Unhandled key event: ".concat(c.key||c.keyCode));if(fw(P.onKeyPress)&&P.onKeyPress.call(P,c,y,P,R)===!0)break}return!1})}}),Lw};function M_(E=[]){const x=[];let c;for(c=0;c<E.length;c++){const y=E[c];if(typeof y=="string"&&!y.includes("PAUSE-"))x.push(E[c]);else break}return[x.join(",\b ")].concat(E.slice(c))}function B2(E){return new Promise(x=>{setTimeout(x,E)})}function __(E,x,c="en-US"){const y=window.speechSynthesis;return new Promise((S,R)=>{const P=new SpeechSynthesisUtterance(E);P.lang=c,P.onend=()=>{S()},P.onerror=v=>{R(v)},x.push(P),y.speak(P)})}function yI(E,x,c=!0){const y=window.speechSynthesis,S=M_(Array.isArray(E)?E:[E]),R=[],P=[];let v=!0;return{series:(async()=>{try{for(;v&&S.length;){const V=await Promise.resolve(S.shift());if(v){if(typeof V=="string"&&V.includes("PAUSE-")){let H=Number(V.split("PAUSE-")[1])*1e3;isNaN(H)&&(H=0),await B2(H)}else if(typeof V=="string"&&V.length){let ee=3;for(;v&&ee>0;)try{await __(V,P,x),ee=0}catch(te){if(te instanceof SpeechSynthesisErrorEvent)if(te.error==="network")ee--,console.warn("Speech synthesis network error. Retries left: ".concat(ee)),await B2(500*(3-ee));else if(te.error==="canceled"||te.error==="interrupted")ee=0;else throw new Error("SpeechSynthesisErrorEvent: ".concat(te.error));else throw te}}else if(typeof V=="function"){const H=yI(V(),x,!1);R.push(H),await H.series}else if(Array.isArray(V)){const H=yI(V,x,!1);R.push(H),await H.series}}else break}}finally{v=!1}})(),get active(){return v},append:V=>{S.push(V)},cancel:()=>{v&&(c&&y.cancel(),R.forEach(V=>{V.cancel()}),v=!1)}}}let gw;function R_(E,x="en-US"){return gw&&gw.cancel(),gw=yI(E,x),gw}var L_=(E,x)=>{let c;const y=()=>clearTimeout(c);return Xv()&&va(y),Object.assign((...R)=>{c!==void 0&&y(),c=setTimeout(()=>E(...R),x)},{clear:y})};let xI,Kv=[],nu,TI=!1;const N_=3e5;function F2(E,x){const c=L_(E,x);let y;const S=R=>{y=R,c(R)};return S.flush=()=>{c.clear(),E(y)},S.clear=c.clear,S}function Uv(E){return E.id||E.name}function D_(E=[]){if(!wi.onFocusChange||!wi.enabled)return;const x=E.every(R=>!R.loading),c=E.filter(R=>!Kv.includes(R));if(xI(),!x&&wi.onFocusChange){wi.onFocusChange([]);return}Kv=E.slice(0);const y=[],S=c.reduce((R,P)=>(P.announce?(R.push([Uv(P),"Announce",P.announce]),y.push(P.announce)):P.title?(R.push([Uv(P),"Title",P.title]),y.push(P.title)):R.push([Uv(P),"No Announce",""]),R),[]);if(c.reverse().reduce((R,P)=>(P.announceContext?(R.push([Uv(P),"Context",P.announceContext]),y.push(P.announceContext)):R.push([Uv(P),"No Context",""]),R),S),wi.debug&&console.table(S),y.length)return wi.speak(y.reduce((R,P)=>R.concat(P),[]))}function b_(E){if(!TI)return nu=R_(E)}const wi={debug:!1,enabled:!0,cancel:function(){nu&&nu.cancel()},clearPrevFocus:function(E=0){Kv=Kv.slice(0,E),xI()},speak:function(E,{append:x=!1,notification:c=!1}={}){return wi.onFocusChange&&wi.enabled&&(wi.onFocusChange.flush(),x&&nu&&nu.active?nu.append(E):(wi.cancel(),b_(E)),c&&(TI=!0,nu==null||nu.series.finally(()=>{TI=!1,wi.refresh()}).catch(console.error))),nu},refresh:function(E=0){wi.clearPrevFocus(E),wi.onFocusChange&&wi.onFocusChange(xr(()=>Lw()))},setupTimers:function({focusDebounce:E=400,focusChangeTimeout:x=N_}={}){wi.onFocusChange=F2(D_,E),xI=F2(()=>{Kv=[]},x)}},P_=()=>(wi.setupTimers(),ma(Ow(Lw,wi.onFocusChange,{defer:!0})),wi),jn={white:fa("#ffffff"),black:fa("#000000"),background:fa("#253C3C"),teal:fa("#008080"),posterUnfocused:fa("#767676"),buttonUnfocused:fa("#55C9C9"),butonFocused:fa("#FFEBCD")};function O_(){return ot(Ji,{width:1920,height:1080,zIndex:-5,get children(){return ot(Ji,{get color(){return jn.background},width:1920,height:1080})}})}const U_={Page:{width:1920,height:1080}},j_=E=>{k_({Announcer:["a"],Menu:["m"],Escape:["Escape",27],Backspace:["Backspace",8],Left:["ArrowLeft",37],Right:["ArrowRight",39],Up:["ArrowUp",38],Down:["ArrowDown",40],Enter:["Enter",13]});const x=Bw(),c=P_();return c.debug=!1,c.enabled=!1,ot(Ji,{ref(y){var S=window.APP;typeof S=="function"?S(y):window.APP=y},get style(){return U_.Page},onAnnouncer:()=>c.enabled=!c.enabled,onLast:()=>history.back(),onMenu:()=>x("/browse/all"),onBackspace:()=>x("/browse/all"),get children(){return[ot(O_,{}),Rw(()=>E.children)]}})},Q={name:"Base Lightning TV",alpha:{primary:1,secondary:.7,tertiary:.1,inactive:.5,full:1,none:0,alpha1:.1,alpha2:.3,alpha3:.5,alpha4:.7,alpha5:.9,alpha6:.95},animation:{duration:{none:0,xfast:100,fast:250,normal:500,slow:750,xslow:900},delay:{none:0,xfast:10,fast:25,normal:50,slow:75,xslow:90},expressive:{timingFunction:"cubic-bezier(0, 0, 1, 1)",delay:0,duration:.25},expressiveEntrance:{timingFunction:"cubic-bezier(0, 0, 1, 1)",delay:0,duration:.25},expressiveExit:{timingFunction:"cubic-bezier(0, 0, 1, 1)",delay:0,duration:.25},standard:{timingFunction:"cubic-bezier(0, 0, 1, 1)",delay:0,duration:.25},standardEntrance:{timingFunction:"cubic-bezier(0, 0, 1, 1)",delay:0,duration:.25},standardExit:{timingFunction:"cubic-bezier(0, 0, 1, 1)",delay:0,duration:.25},utility:{timingFunction:"cubic-bezier(0, 0, 1, 1)",delay:0,duration:.25},utilityEntrance:{timingFunction:"cubic-bezier(0, 0, 1, 1)",delay:0,duration:.25},utilityExit:{timingFunction:"cubic-bezier(0, 0, 1, 1)",delay:0,duration:.25}},asset:{arrowLeft:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAGKADAAQAAAABAAAAGAAAAADiNXWtAAAAi0lEQVRIDWNgGAWjIfD//38JID5Fk5AAGqwKxPeA+D/VLQCaaQLEr0CGgwBVLQCa5wbEn0EGwwDVLAAaGA3Ev2AGw2iqWAA0rBiI/8EMRaYptgBoWDeygehsci1gIlcjWfqArqZdEMFcBLSEdpGMZAntkimSJbTLaEiW0K6oQLKEdoUdzJJRemiHAAD4n+yzPWCs7QAAAABJRU5ErkJggg==",arrowRight:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAGKADAAQAAAABAAAAGAAAAADiNXWtAAAAg0lEQVRIDWNgGAWjIYArBP7//38KiCVwyVMsDjQcBO4BsSrFhmEzAGw8hHgFpEywqaFIDMkCEPMzELtRZCC6ZjQLQNxfQByNro5sPhYLQEL/gLiYbEORNeKwACbcDVPLBGMMOhrmVDSapkFE00imaTKlaUajaVFB28Ju0CXrUQfhDAEAEgHss6NhpLQAAAAASUVORK5CYII=",backspaceOutline:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJAAAACQCAYAAADnRuK4AAAAAXNSR0IArs4c6QAACmpJREFUeF7tnVmoZUcVhv/feY4gBEVEH/KgCCZxCK2itNo4xQQH+kUN0TjEiDGKKBqnaExwBjUaR6KY+NQgiQkOMSYhYEScIopGJOqDE2hHjfP0y4p1Oqdv33v2qr32Prv2Paug6Ye7Vu2qv75TtWvtGohMqUBAAQZ80zUVQAKUEIQUSIBC8qVzApQMhBRIgELypXMClAyEFEiAQvKlcwKUDIQUSIBC8qVzApQMhBRIgELypXMClAyEFEiAQvKlcwKUDIQUSIBC8qVzApQMhBRIgELypXMClAyEFEiAQvKlcwKUDIQUSIBC8qVzApQMhBRIgELypXMClAyEFEiAQvKlcwKUDIQUSIBC8qVzApQMhBRIgELypfPsAJJ0NYC92XRHKPB3AAfLv18BuBLAFSR/NKZWswJI0vkA3jCmILsw75sAvIfkR8eo22wAknQSgMvGEGFD8vwxgFeQvGrI+s4CIEnHAPgugHsMWfkNzevDAM4i+Z8h6t88QJLuXOB5yBAVzjxuVeBaAM8ieXNUjzkAdAmA50Yrmv5HKPATACeQ/GNEm6YBkvRyANblZhpHAXsfekpkOGsWIEmPAHA9gDuOo13mWhS4gOSZfdVoEiBJ9wFwA4D7961Y+lUpsK/v7KxVgL4K4ElOCS4l+Uyn7a41k3Q0gMcC2ANgH4CHV1T2OyStx69OzQEk6TwAZztr8lMAx5P8s9N+Y8wk2cTjfQDu66z080h+zml7yKwpgCSdCOByZyX+BuBRJH/otN84M0kWN/s0gOc4Kv8Nko922B1m0gxAkh4I4AcVwcL9JA/UVnjT7CXdHYD9yEzfVUkAjib5uxqNmgCoBAu/CeBhzsJ/kORZTtuNN5Nk70bXAZ0Hy59G8qIawVoB6LMAnu8suE3tH0/y3077NAMg6esAuoaoC0la7M2dJgdI0ssAXOgs8W8BHEvS/s9UoYCkdwN4bYfL5STto7U7TQpQZbDQehzreawHylSpgKSTAVza4XYDyeNqsp4MoB7BwteQfH9N5dL2NgWK3l0vyAdJWhDXnSYBSNLtANh3GO/KwgMk97trlYbbKiDJPpzea5U8JKuYqDIeql0kvQPAG5352ZLMR5L8q9M+zXZQYFcAJOnJAL7sbGWLMFuk2SLOmYIKzB6gEiz8HoB7O7U4meQXnLZp1qGApD8BuOcsh7AewcL3kuyadg4OjSSbhRxH0j4BjJok2Ufga0j+YdQHlcznDlBNsPAa+xpP8r/rEHbxjAKPbRuyHvKFY0Ik6QUALOprPfIT1gHRbAGSdDoA77aSX5Zg4e8nhGfx6FEgWoJn8Zy1QCTplq5vjc3NwnoEC/eQ/HYD8IwC0TbwrA2i2QHUI1h4JskLGoJnUIhWwLMWiGYFkCSLMX2t5WDhlneeLm5Dw5kDntEhkmRhEVvesWNqZgiTdC6AN3W1Svn72oOFkuxF+WcVIQUrai+IKuA5BBHJ453auc1mA1AJFn7Jsf7EKj9ZsLBHw1ZDtI5neAmaBUBzCxaO2cBj5u2FZtlO0l8A3K3ZIaxHsPB8kt5vYn00c/mM0dBj5OmqzAqjOQDUfLBwJ32HbPAh84pCM5seSNJLAHzcWeFJgoVdZRui4YfIo6ucff8uyVY03LW5IawyWPgvW5u77mChV/QIABFfb/kidk0CVKbDth3Huw35dJLeniqiV2/fniDYx1f7vlWTeoUFah6wZQhrqwcqwUKbrtsaH0+6mOQpHsOpbXpCVFPstcJjBZNkmzHv0swQJultAN7iVO375TyafzjtJzcbEaK1w9McQJXBQlvvYmtsfjE5FZUFGAGiSeBpCqDKYKFtmX0qya9Utl0z5gNCNBk8BSA7CtiODNwxjf4trEew8BySNtTNOg0A0aTwtARQTbDQeh3rfawXmn0KQDQ5PC0B9EkAL3LSkAD9X6hWALIJzJ3mNoSdS9I7U3NyuX6zQO+zKOzkEEmaHqDSFdpZM97tOfkSfRvvk0LUDEAFIgseetf85DS+AYgk/bPr1NvRZ2HLg4ektwI4xzmgZCBxYohaBMjWPeenDOcvaIvZ2oez5gAqQ5mtLbb3oa4z+Bb6nTHW1UP92vFIr54vzJ8BcGplGdYKkSRbCXGHSWdh2z1ckp1taGccroxyFt9cznG4iGuDqFmASk9kZxxakNGTckHZBBA1DVCB6BMAXuwhyA4VmGL/+05l6zlsbdt7DJmXU0uXmSQ7JvD2zQ1hiwJJsotRvlVxXO87SU5+heUYDT5Gni5KVhg1D1DphWqCjOYy6RlAYzb0mHn3gWkWABWIaoKMubHwSBpGebGWZNdc2vmUO6a1BhJXFUSSff/yLuOYamvzzwEcVfFr7tWwPXqi6uN2PXWYG0C1Qca1n8RaDlewl3kPRL3gWXo/XBwo1dXWdk/a3jEOnJoVQGUoqw0yvpLkh7oUHvLvTohC8FRANBo8pT3sxLeVJ/M2M4QtiVYTZJzkNPoOiAaBxwHRqPDMFqBS8Jog4yT3YewA0aDwrIBodHhmDVApvG0mtO3PnjTJjTxbIBoFnm0gWgs8pQ06lxY3N4QtCWZBRgPDezdnHvPr+alV2EiaL0DlF2Dbn20bdB40XtHwQ5nOHqAC0SyCjEM1Wkv57AqACkRvBvB2p7hrDzI6yzU7s90EUPNBxtnR4SjwrgGo9EK1Qca8cM4ByU4mkuz++F93ZHELyZX3iW31n+S+sKWZWfNBxkCbNeUq6ekArugo1I0kH1xT8EkBKj1R80HGGkFbtZVkZ3bb2d2r0tUkn1hTh8kBKhB9DMBLnQWfJMjoLFuTZpJsO/ONAB7UUcBLSHqvX781q1YAqg0yfoDkq5psrQYLJeldAF7nKFr1x+wmACq9kAUZLazvvTV4P8kDDlE22kTSQ4uuK9dCF5HuR/I3NYI1A1CBaB+AK50VsAMj7TJeixNl2kYBSccCsB/ZMQ6Brif5GIfdYSZNAVQg8rzsLSphl/Hapby2LDZTUaBcq/56ALb1fOVxLkuinULy4loRmwOoQGQX7T7DWZnPk3y203bXmkl6AIA91isDOBGADV3e1HsJbasA1QYZvUKl3fYKPI2knXFQnZoEqPRCNUHG6oqnwyEFLiJ5Wl89mgWoQFQTZOyrwSb7WUztcSRtu0+v1DRABaKPADijV+3SaZUCNgE5geTNEZnmAFBtkDGix6b4Xld2BNvJcaHUPEClF6oNMoZE2eXOtm3q1ZFha1mfWQBUINoL4Kqurbm7vPEj1bOAqx3udW0kk62+swGoQHQ2gPOGFGAD8roJgF0t+qkx6jorgApElwE4aQwxZp6n3YNxsPyzA7yst/4iSdvEMFqaHUCjKZEZ91IgAeolWzotFEiAkoWQAglQSL50ToCSgZACCVBIvnROgJKBkAIJUEi+dE6AkoGQAglQSL50ToCSgZACCVBIvnROgJKBkAIJUEi+dE6AkoGQAglQSL50ToCSgZACCVBIvnROgJKBkAIJUEi+dE6AkoGQAglQSL50ToCSgZACCVBIvnROgJKBkAIJUEi+dE6AkoGQAglQSL50ToCSgZACCVBIvnT+H0jPT81J3xWWAAAAAElFTkSuQmCC",check:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAAOCAYAAAAi2ky3AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAACtSURBVHgBvdPdDcIgEAfwoy8Nb45QN3AGF2s36Ahu4gpuIDoBfSgfpdoTlCbEWEMh6T8hFzjyg5AAkBHOcQe5UWqspRx435sDpMYj6IYQwwVSEiJ2MKVUBWuzLSLl2HL+uxmNCGFO8yaL7RHxve6qRZoAuS4hxac8735elWVx7jrtMKL1o0Gcat9jhExHSukN/kUIFZ7MpDRtzE1isDRkAUtDvrA8ZI597FUf8gWH9P0b4gko9wAAAABJRU5ErkJggg=="},color:{palette:{},white:"0xffffffff",black:"0x000000ff",grey:"0x929096ff",red:"0xe74c3cff",orange:"0xdc7633ff",yellow:"0xf7dc6fff",green:"0x2ecc71ff",blue:"0x93a9fdff",purple:"0x663399ff",overlay:"0x181819b3",material:"0x181819ff",materialNeutral:"0x181819ff",materialNeutralElevated:"0x373639ff",materialInverse:"0xf8f7faff",materialInverseElevated:"0xffffffff",materialBrand:"0x000033ff",materialBrandElevated:"0x242a65ff",textNeutral:"0xf8f7faff",textNeutralSecondary:"0xf8f7fab3",textNeutralTertiary:"0xf8f7fa1a",textNeutralDisabled:"0xf8f7fa80",textInverse:"0x181819ff",textInverseSecondary:"0x181819b3",textInverseTertiary:"0x1818191a",textInverseDisabled:"0x18181980",textBrand:"0x93a9fdff",textBrandSecondary:"0x93a9fdb3",textBrandTertiary:"0x93a9fd1a",textBrandDisabled:"0x93a9fd80",textPositive:"0x2ecc71ff",textNegative:"0xe74c3cff",textInfo:"0x93a9fdff",textCaution:"0xdc7633ff",fillTransparent:"0xffffff0",fillNeutral:"0xf8f7faff",fillNeutralSecondary:"0xf8f7fab3",fillNeutralTertiary:"0xf8f7fa1a",fillNeutralDisabled:"0xf8f7fa80",fillInverse:"0x181819ff",fillInverseSecondary:"0x181819b3",fillInverseTertiary:"0x1818191a",fillInverseDisabled:"0x18181980",fillBrand:"0x93a9fdff",fillBrandSecondary:"0x93a9fdb3",fillBrandTertiary:"0x93a9fd1a",fillBrandDisabled:"0x93a9fd80",fillPositive:"0x2ecc71ff",fillNegative:"0xe74c3cff",fillInfo:"0x93a9fdff",fillCaution:"0xdc7633ff",strokeNeutral:"0xf8f7faff",strokeNeutralSecondary:"0xf8f7fab3",strokeNeutralTertiary:"0xf8f7fa1a",strokeNeutralDisabled:"0xf8f7fa80",strokeInverse:"0x181819ff",strokeInverseSecondary:"0x181819b3",strokeInverseTertiary:"0x1818191a",strokeInverseDisabled:"0x18181980",strokeBrand:"0x93a9fdff",strokeBrandSecondary:"0x93a9fdb3",strokeBrandTertiary:"0x93a9fd1a",strokeBrandDisabled:"0x93a9fd80",strokePositive:"0x2ecc71ff",strokeNegative:"0xe74c3cff",strokeInfo:"0x93a9fdff",strokeCaution:"0xdc7633ff",interactiveNeutral:"0xffffff1a",interactiveNeutralFocus:"0xffffffff",interactiveNeutralFocusSoft:"0xffffff1a",interactiveInverse:"0x48474b1a",interactiveInverseFocus:"0x48474bff",interactiveInverseFocusSoft:"0x48474b1a",interactiveBrand:"0xbecffe1a",interactiveBrandFocus:"0xbecffeff",interactiveBrandFocusSoft:"0xbecffe1a",shadowNeutral:"0x000000b3",shadowNeutralFocus:"0x000000b3",shadowNeutralFocusSoft:"0x000000b3",shadowNeutralText:"0x000000ff",shadowInverse:"0x000000b3",shadowInverseFocus:"0x000000b3",shadowInverseFocusSoft:"0x000000b3",shadowInverseText:"0x000000ff",shadowBrand:"0x000000b3",shadowBrandFocus:"0x000000b3",shadowBrandFocusSoft:"0x000000b3",shadowBrandText:"0x000000ff"},font:[],layout:{columnCount:10,focusScale:1.2,gutterX:20,gutterY:20,marginX:150,marginY:150,safe:50,screenW:1920,screenH:1080},radius:{none:0,xs:2,sm:4,md:8,lg:16,xl:24},spacer:{none:0,xxs:2,xs:4,sm:8,md:10,lg:20,xl:30,xxl:40,xxxl:50},stroke:{none:0,sm:2,md:4,lg:6,xl:8},typography:{display1:{fontFamily:"Arial",fontSize:75,lineHeight:85,fontWeight:500,verticalAlign:"middle",textBaseline:"bottom"},display2:{fontFamily:"Arial",fontSize:50,lineHeight:60,fontWeight:500,verticalAlign:"middle",textBaseline:"bottom"},display3:{fontFamily:"Arial",fontSize:56,fontWeight:400,lineHeight:68,verticalAlign:"middle",textBaseline:"bottom"},display4:{fontFamily:"Arial",fontSize:48,fontWeight:400,lineHeight:64,verticalAlign:"middle",textBaseline:"bottom"},headline1:{fontFamily:"Arial",fontSize:35,fontWeight:500,lineHeight:48,verticalAlign:"middle",textBaseline:"bottom"},headline2:{fontFamily:"Arial",fontSize:30,fontWeight:500,lineHeight:40,verticalAlign:"middle",textBaseline:"bottom"},headline3:{fontFamily:"Arial",fontSize:25,fontWeight:500,lineHeight:36,verticalAlign:"middle",textBaseline:"bottom"},body1:{fontFamily:"Arial",fontSize:25,fontWeight:300,lineHeight:40,verticalAlign:"middle",textBaseline:"bottom"},body2:{fontFamily:"Arial",fontSize:22,fontWeight:300,lineHeight:32,verticalAlign:"middle",textBaseline:"bottom"},body3:{fontFamily:"Arial",fontSize:20,fontWeight:300,lineHeight:32,verticalAlign:"middle",textBaseline:"bottom"},button1:{fontFamily:"Arial",fontSize:25,fontWeight:500,lineHeight:32,verticalAlign:"middle",textBaseline:"bottom"},button2:{fontFamily:"Arial",fontSize:20,fontWeight:500,lineHeight:32,verticalAlign:"middle",textBaseline:"bottom"},callout1:{fontFamily:"Arial",fontSize:20,fontWeight:500,lineHeight:32,verticalAlign:"middle",textBaseline:"bottom"},caption1:{fontFamily:"Arial",fontSize:15,fontWeight:500,lineHeight:24,verticalAlign:"middle",textBaseline:"bottom"},tag1:{fontFamily:"Arial",fontSize:20,fontWeight:500,lineHeight:24,verticalAlign:"middle",textBaseline:"bottom"},footnote1:{fontFamily:"Arial",fontSize:22,fontWeight:300,lineHeight:30,verticalAlign:"middle",textBaseline:"bottom"},subtitle1:{fontFamily:"Arial",fontSize:32,fontWeight:400,lineHeight:36,verticalAlign:"middle",textBaseline:"bottom"},subtitle2:{fontFamily:"Arial",fontSize:28,fontWeight:500,lineHeight:32,verticalAlign:"middle",textBaseline:"bottom"},navigation:{fontFamily:"Arial",fontSize:28,fontWeight:400,lineHeight:32,verticalAlign:"middle",textBaseline:"bottom"}},componentConfig:{Keyboard:{base:{keyProps:{delete:{title:null,icon:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJAAAACQCAYAAADnRuK4AAAAAXNSR0IArs4c6QAACmpJREFUeF7tnVmoZUcVhv/feY4gBEVEH/KgCCZxCK2itNo4xQQH+kUN0TjEiDGKKBqnaExwBjUaR6KY+NQgiQkOMSYhYEScIopGJOqDE2hHjfP0y4p1Oqdv33v2qr32Prv2Paug6Ye7Vu2qv75TtWvtGohMqUBAAQZ80zUVQAKUEIQUSIBC8qVzApQMhBRIgELypXMClAyEFEiAQvKlcwKUDIQUSIBC8qVzApQMhBRIgELypXMClAyEFEiAQvKlcwKUDIQUSIBC8qVzApQMhBRIgELypXMClAyEFEiAQvKlcwKUDIQUSIBC8qVzApQMhBRIgELypXMClAyEFEiAQvKlcwKUDIQUSIBC8qVzApQMhBRIgELypfPsAJJ0NYC92XRHKPB3AAfLv18BuBLAFSR/NKZWswJI0vkA3jCmILsw75sAvIfkR8eo22wAknQSgMvGEGFD8vwxgFeQvGrI+s4CIEnHAPgugHsMWfkNzevDAM4i+Z8h6t88QJLuXOB5yBAVzjxuVeBaAM8ieXNUjzkAdAmA50Yrmv5HKPATACeQ/GNEm6YBkvRyANblZhpHAXsfekpkOGsWIEmPAHA9gDuOo13mWhS4gOSZfdVoEiBJ9wFwA4D7961Y+lUpsK/v7KxVgL4K4ElOCS4l+Uyn7a41k3Q0gMcC2ANgH4CHV1T2OyStx69OzQEk6TwAZztr8lMAx5P8s9N+Y8wk2cTjfQDu66z080h+zml7yKwpgCSdCOByZyX+BuBRJH/otN84M0kWN/s0gOc4Kv8Nko922B1m0gxAkh4I4AcVwcL9JA/UVnjT7CXdHYD9yEzfVUkAjib5uxqNmgCoBAu/CeBhzsJ/kORZTtuNN5Nk70bXAZ0Hy59G8qIawVoB6LMAnu8suE3tH0/y3077NAMg6esAuoaoC0la7M2dJgdI0ssAXOgs8W8BHEvS/s9UoYCkdwN4bYfL5STto7U7TQpQZbDQehzreawHylSpgKSTAVza4XYDyeNqsp4MoB7BwteQfH9N5dL2NgWK3l0vyAdJWhDXnSYBSNLtANh3GO/KwgMk97trlYbbKiDJPpzea5U8JKuYqDIeql0kvQPAG5352ZLMR5L8q9M+zXZQYFcAJOnJAL7sbGWLMFuk2SLOmYIKzB6gEiz8HoB7O7U4meQXnLZp1qGApD8BuOcsh7AewcL3kuyadg4OjSSbhRxH0j4BjJok2Ufga0j+YdQHlcznDlBNsPAa+xpP8r/rEHbxjAKPbRuyHvKFY0Ik6QUALOprPfIT1gHRbAGSdDoA77aSX5Zg4e8nhGfx6FEgWoJn8Zy1QCTplq5vjc3NwnoEC/eQ/HYD8IwC0TbwrA2i2QHUI1h4JskLGoJnUIhWwLMWiGYFkCSLMX2t5WDhlneeLm5Dw5kDntEhkmRhEVvesWNqZgiTdC6AN3W1Svn72oOFkuxF+WcVIQUrai+IKuA5BBHJ453auc1mA1AJFn7Jsf7EKj9ZsLBHw1ZDtI5neAmaBUBzCxaO2cBj5u2FZtlO0l8A3K3ZIaxHsPB8kt5vYn00c/mM0dBj5OmqzAqjOQDUfLBwJ32HbPAh84pCM5seSNJLAHzcWeFJgoVdZRui4YfIo6ucff8uyVY03LW5IawyWPgvW5u77mChV/QIABFfb/kidk0CVKbDth3Huw35dJLeniqiV2/fniDYx1f7vlWTeoUFah6wZQhrqwcqwUKbrtsaH0+6mOQpHsOpbXpCVFPstcJjBZNkmzHv0swQJultAN7iVO375TyafzjtJzcbEaK1w9McQJXBQlvvYmtsfjE5FZUFGAGiSeBpCqDKYKFtmX0qya9Utl0z5gNCNBk8BSA7CtiODNwxjf4trEew8BySNtTNOg0A0aTwtARQTbDQeh3rfawXmn0KQDQ5PC0B9EkAL3LSkAD9X6hWALIJzJ3mNoSdS9I7U3NyuX6zQO+zKOzkEEmaHqDSFdpZM97tOfkSfRvvk0LUDEAFIgseetf85DS+AYgk/bPr1NvRZ2HLg4ektwI4xzmgZCBxYohaBMjWPeenDOcvaIvZ2oez5gAqQ5mtLbb3oa4z+Bb6nTHW1UP92vFIr54vzJ8BcGplGdYKkSRbCXGHSWdh2z1ckp1taGccroxyFt9cznG4iGuDqFmASk9kZxxakNGTckHZBBA1DVCB6BMAXuwhyA4VmGL/+05l6zlsbdt7DJmXU0uXmSQ7JvD2zQ1hiwJJsotRvlVxXO87SU5+heUYDT5Gni5KVhg1D1DphWqCjOYy6RlAYzb0mHn3gWkWABWIaoKMubHwSBpGebGWZNdc2vmUO6a1BhJXFUSSff/yLuOYamvzzwEcVfFr7tWwPXqi6uN2PXWYG0C1Qca1n8RaDlewl3kPRL3gWXo/XBwo1dXWdk/a3jEOnJoVQGUoqw0yvpLkh7oUHvLvTohC8FRANBo8pT3sxLeVJ/M2M4QtiVYTZJzkNPoOiAaBxwHRqPDMFqBS8Jog4yT3YewA0aDwrIBodHhmDVApvG0mtO3PnjTJjTxbIBoFnm0gWgs8pQ06lxY3N4QtCWZBRgPDezdnHvPr+alV2EiaL0DlF2Dbn20bdB40XtHwQ5nOHqAC0SyCjEM1Wkv57AqACkRvBvB2p7hrDzI6yzU7s90EUPNBxtnR4SjwrgGo9EK1Qca8cM4ByU4mkuz++F93ZHELyZX3iW31n+S+sKWZWfNBxkCbNeUq6ekArugo1I0kH1xT8EkBKj1R80HGGkFbtZVkZ3bb2d2r0tUkn1hTh8kBKhB9DMBLnQWfJMjoLFuTZpJsO/ONAB7UUcBLSHqvX781q1YAqg0yfoDkq5psrQYLJeldAF7nKFr1x+wmACq9kAUZLazvvTV4P8kDDlE22kTSQ4uuK9dCF5HuR/I3NYI1A1CBaB+AK50VsAMj7TJeixNl2kYBSccCsB/ZMQ6Brif5GIfdYSZNAVQg8rzsLSphl/Hapby2LDZTUaBcq/56ALb1fOVxLkuinULy4loRmwOoQGQX7T7DWZnPk3y203bXmkl6AIA91isDOBGADV3e1HsJbasA1QYZvUKl3fYKPI2knXFQnZoEqPRCNUHG6oqnwyEFLiJ5Wl89mgWoQFQTZOyrwSb7WUztcSRtu0+v1DRABaKPADijV+3SaZUCNgE5geTNEZnmAFBtkDGix6b4Xld2BNvJcaHUPEClF6oNMoZE2eXOtm3q1ZFha1mfWQBUINoL4Kqurbm7vPEj1bOAqx3udW0kk62+swGoQHQ2gPOGFGAD8roJgF0t+qkx6jorgApElwE4aQwxZp6n3YNxsPyzA7yst/4iSdvEMFqaHUCjKZEZ91IgAeolWzotFEiAkoWQAglQSL50ToCSgZACCVBIvnROgJKBkAIJUEi+dE6AkoGQAglQSL50ToCSgZACCVBIvnROgJKBkAIJUEi+dE6AkoGQAglQSL50ToCSgZACCVBIvnROgJKBkAIJUEi+dE6AkoGQAglQSL50ToCSgZACCVBIvnROgJKBkAIJUEi+dE6AkoGQAglQSL50ToCSgZACCVBIvnT+H0jPT81J3xWWAAAAAElFTkSuQmCC"}}}}}};var z2,G2,V2,K2,H2,W2,q2,X2,Y2,$2,Q2,Z2,J2,eC,tC,nC,iC,rC,oC;function mw(E){if(!E||!E[Symbol.iterator])throw new Error("objectFromEntries requires a single iterable argument");const x={};for(const[c,y]of E)x[c]=y;return x}const B_=["focus","disabled"],F_=["brand","inverse","neutral"];function Dt({themeKeys:E,base:x,modes:c,tones:y,themeStyles:S,modeKeys:R=B_,toneKeys:P=F_},v=!1){const F=(A,q,ie)=>{const ve=P.map(ue=>{var ke,Te;const he={};return new Set([].concat.apply([],[(ke=A==null?void 0:A[ue])!=null?ke:{},(Te=q==null?void 0:q[ue])!=null?Te:{}].map(Object.keys))).forEach(Le=>{var k;var Ne,Re;R.includes(Le)||(he[Le]=(k=(Ne=q==null?void 0:q[ue])==null?void 0:Ne[Le])!=null?k:(Re=A==null?void 0:A[ue])==null?void 0:Re[Le])}),R.forEach(Le=>{var Ne,Re;he[Le]={...ie[Le],...(Ne=A==null?void 0:A[ue])==null?void 0:Ne[Le],...(Re=q==null?void 0:q[ue])==null?void 0:Re[Le]}}),[ue,he]});return mw(ve)},V=(A,q)=>{const ie=R.map(ue=>[ue,{...A==null?void 0:A[ue],...q==null?void 0:q[ue]}]);return mw(ie)},H=(A,q)=>({...A,...q.base}),ee=A=>mw(Object.entries(E).filter(([q,ie])=>A[ie]).map(([q,ie])=>[q,A[ie]])),te=A=>mw(Object.entries(A).map(([ie,ve])=>{const ue=ee(ve);return Object.entries(ve).filter(([he,re])=>R.includes(he)).forEach(([he,re])=>{ue[he]=ee(re)}),[ie,ue]}));return((A,q,ie)=>{const ve=te(S);v&&console.log(ve);const ue=H(A,ve);v&&console.log(ue);const he=V(q,ve);v&&console.log(he);const re=F(ie,ve,he);return v&&console.log(re),{base:{...ue,...he},tones:re}})(x,c,y)}function Nw(E=0){return(x,c,y=0,S)=>{var ie,ve,ue,he;if(x.children.length===0)return;const R=x.flexDirection==="row"?"width":"height",P=x.flexDirection==="row"?"x":"y",v=x.gap||0,F=x.scroll||"auto",[V,H]=z_(x);let ee=(ie=x[P])!=null?ie:0;const te=(ve=c==null?void 0:c[P])!=null?ve:0,me=(ue=c==null?void 0:c[R])!=null?ue:0,A=S===void 0?"none":y>S?"positive":"negative";let q=ee;if(F==="auto")x.scrollIndex!=null&&x.scrollIndex>=0?x.selected>=x.scrollIndex&&(A==="positive"?q=ee-me-v:q=ee+me+v):(Math.abs(ee)+H<V.position+V.size||te<Math.abs(ee))&&(q=-te+E);else if(F==="always"||F==="edge"&&A==="negative"&&Math.abs(ee)>te)q=-te+E;else if(F==="edge"&&A==="positive"&&Math.abs(ee)+H<te+me)q=ee-me-v;else if(F==="edge"&&A==="none"){let re=0,ke,Te;for(;re<x.children.length&&Math.abs(ee)+H<te+me;)ke=x.children[re++],Te=(he=ke[R])!=null?he:0,ee-=Te+v;q=ee}P==="x"&&x.x!==q?x.x=q:P==="y"&&x.y!==q&&(x.y=q)}}function z_(E){var y,S,R,P,v,F;let x,c;return E.flexDirection==="row"?(x={position:(y=E.children[E.children.length-1].x)!=null?y:0,size:(S=E.children[E.children.length-1].width)!=null?S:0},c=(R=E.width)!=null?R:0):(x={position:(P=E.children[E.children.length-1].y)!=null?P:0,size:(v=E.children[E.children.length-1].height)!=null?v:0},c=(F=E.height)!=null?F:0),[x,c]}function Ul(...E){const x=E.filter(c=>typeof c=="function");if(x.length!==0)return x.length===1?x[0]:function(...c){let y;for(const S of x)if(y=S.apply(this,c),y===!0)return y;return y}}function n4(){if(!this||this.selected===void 0||this.children.length===0)return!1;let E=this.children[this.selected];for(;E!=null&&E.skipFocus;)this.selected++,E=this.children[this.selected];return E instanceof ws?(E.setFocus(),!0):!1}function Dw(E){return function(){var x,c,y;const S=this.children.length,R=this.wrap,P=this.selected||0;if(S===0)return!1;if(E==="right"||E==="down")do if(this.selected=(this.selected||0)%S+1,this.selected>=S){if(!R){this.selected=void 0;break}this.selected=0}while((x=this.children[this.selected])!=null&&x.skipFocus);else if(E==="left"||E==="up")do if(this.selected=(this.selected||0)%S-1,this.selected<0){if(!R){this.selected=void 0;break}this.selected=S-1}while((c=this.children[this.selected])!=null&&c.skipFocus);if(this.selected===void 0&&(this.selected=P,(y=this.children[this.selected])!=null&&y.states.has("focus")))return!1;const v=this.children[this.selected];if(this.onSelectedChanged&&this.onSelectedChanged.call(this,this,v,this.selected,P),this.plinko&&P!==void 0){const V=this.children[P].selected||0;v.selected=V<v.children.length?V:v.children.length-1}return v.setFocus(),!0}}function G_(E=1){const x=Q.layout.screenW,c=Q.layout.columnCount,y=Q.layout.marginX,S=Q.layout.gutterX;if(E<1||E>c){console.error("Column expects a number between 1 & ".concat(c,". Received ").concat(E));return}const R=x-y*2,P=(E-1)*S;return(R-P)/E}const{Artwork:{defaultTone:xL,...V_}={styles:{}}}=(z2=Q)==null?void 0:z2.componentConfig,K_={themeKeys:{fillColor:"fillColor",scale:"imageScale",pivotX:"imageScalePivotX",pivotY:"imageScalePivotY"},base:{fallbackSrc:void 0,fillColor:Q.color.overlay,gradientColor:Q.color.material,pivotX:.5,pivotY:.5,scale:void 0,borderRadius:Q.radius.md},themeStyles:V_};Dt(K_);const{Badge:{defaultTone:TL,...DI}={styles:{}}}=(G2=Q)==null?void 0:G2.componentConfig,H_={themeKeys:{color:"backgroundColor"},base:{color:Q.color.fillInverseSecondary,borderRadius:Q.radius.sm,border:{color:Q.color.strokeInverse,width:Q.stroke.sm},display:"flex",justifyContent:"spaceEvenly",padding:[Q.spacer.md-Q.stroke.sm,Q.spacer.xs+Q.stroke.sm,Q.spacer.md+Q.stroke.sm,Q.spacer.md+Q.stroke.sm]},tones:{inverse:{color:Q.color.fillNeutralSecondary,borderRadius:Q.radius.sm,border:{color:Q.color.strokeInverseSecondary,width:Q.stroke.sm}},brand:{color:Q.color.fillBrand,borderRadius:Q.radius.sm,border:{color:Q.color.strokeInverseSecondary,width:Q.stroke.sm}}},themeStyles:DI},W_={themeKeys:{color:"textColor"},base:{...Q.typography.tag1,color:Q.color.textNeutral},tones:{inverse:{color:Q.color.textInverse},brand:{color:Q.color.textNeutral}},themeStyles:DI},q_={themeKeys:{color:"iconColor"},base:{color:Q.color.textNeutral},tones:{inverse:{color:Q.color.textInverse},brand:{color:Q.color.textNeutral}},themeStyles:DI};Dt(H_);Dt(q_);Dt(W_);const{Button:{defaultTone:X_,...bI}={styles:{}}}=(V2=Q)==null?void 0:V2.componentConfig,{Surface:{surfaceDefaultTone:Y_,...PI}={styles:{}}}=(K2=Q)==null?void 0:K2.componentConfig,$_={themeKeys:{textAlign:"textAlign",borderRadius:"radius",color:"backgroundColor",justifyContent:"justifyContent"},base:{height:Q.typography.button1.lineHeight+Q.spacer.xl*2,display:"flex",padding:[Q.spacer.xxxl,Q.spacer.xl],color:Q.color.interactiveNeutral,justifyContent:"center",alignItems:"center",borderRadius:Q.radius.sm,contentColor:Q.color.fillNeutral},modes:{focus:{color:Q.color.interactiveNeutralFocus,contentColor:Q.color.fillInverse},disabled:{color:Q.color.fillNeutralDisabled}},tones:{inverse:{color:Q.color.interactiveInverse},brand:{color:Q.color.interactiveBrand,focus:{color:Q.color.fillNeutral}}},themeStyles:{...PI,...bI}},Q_={themeKeys:{color:"contentColor"},base:{color:Q.color.textNeutral},modes:{focus:{color:Q.color.textInverse},disabled:{color:Q.color.textNeutralDisabled}},tones:{inverse:{color:Q.color.fillNeutral},brand:{color:Q.color.fillBrand,focus:{color:Q.color.fillBrand}}},themeStyles:{...PI,...bI}},Z_={themeKeys:{color:"textColor"},base:{textAlign:"left",color:Q.color.textNeutral,...Q.typography.button1},modes:{focus:{color:Q.color.textInverse},disabled:{color:Q.color.textNeutralDisabled}},tones:{inverse:{color:Q.color.fillNeutral},brand:{color:Q.color.fillBrand,focus:{color:Q.color.fillBrand}}},themeStyles:{...PI,...bI}},J_=Dt($_),eR=Dt(Q_),tR=Dt(Z_),Mp={tone:X_||Y_||"neutral",Container:J_,Content:eR,Text:tR},wI=E=>ot(Ji,Fl(E,{get style(){var c;var x;return[E.style,(x=Mp.Container.tones)==null?void 0:x[(c=E.tone)!=null?c:Mp.tone],Mp.Container.base]},forwardStates:!0,get children(){return ot(su,{get style(){var x;return[Mp.Text.tones[(x=E.tone)!=null?x:Mp.tone],Mp.Text.base]},get children(){return E.children}})}})),{Checkbox:{defaultTone:wL,...i4}={styles:{}}}=(H2=Q)==null?void 0:H2.componentConfig,Cd=Q.stroke.sm,ha=Q.spacer.xxl,nR={themeKeys:{color:"color",borderRadius:"borderRadius",border:"border",justifyContent:"justifyContent"},base:{width:ha,height:ha,display:"flex",justifyContent:"center",color:Q.color.fillNeutral,alignItems:"center",borderRadius:ha/4,border:{color:Q.color.strokeInverse,width:Cd}},modes:{disabled:{alpha:Q.alpha.inactive}},tones:{brand:{borderRadius:ha/4,border:{color:Q.color.strokeNeutralSecondary,width:Cd},color:Q.color.fillNeutralSecondary,checked:{borderRadius:ha/4,border:{color:Q.color.strokeNeutralSecondary,width:Cd},color:Q.color.fillBrand}},neutral:{borderRadius:ha/4,border:{color:Q.color.strokeNeutralSecondary,width:Cd},color:Q.color.fillInverseSecondary,checked:{borderRadius:ha/4,border:{color:Q.color.strokeNeutralSecondary,width:Cd},color:Q.color.fillNeutral}},inverse:{borderRadius:ha/4,border:{color:Q.color.strokeInverseSecondary,width:Cd},color:Q.color.fillNeutralSecondary,checked:{borderRadius:ha/4,border:{color:Q.color.strokeInverseSecondary,width:Cd},color:Q.color.fillInverse}}},modeKeys:["focus","disabled","checked"],themeStyles:i4},iR={themeKeys:{color:"color"},base:{width:Q.spacer.lg,height:Q.spacer.lg,src:Q.asset.check},tones:{neutral:{color:Q.color.fillInverse},inverse:{color:Q.color.fillNeutral},brand:{color:Q.color.fillInverse}},themeStyles:i4};Dt(nR);Dt(iR);const{Icon:{defaultTone:EL,...rR}={styles:{}}}=(W2=Q)==null?void 0:W2.componentConfig,oR={themeKeys:{color:"color"},base:{width:100,height:100,color:Q.color.fillInverse},tones:{inverse:{color:Q.color.fillInverse},brand:{color:Q.color.fillBrand}},themeStyles:rR};Dt(oR);const{Column:{defaultTone:sR,...uR}={styles:{}}}=(q2=Q)==null?void 0:q2.componentConfig,aR={themeKeys:{gap:"itemSpacing",scrollIndex:"scrollIndex",itemTransition:"itemTransition"},base:{display:"flex",flexBoundary:"fixed",flexDirection:"column",gap:Q.layout.gutterY,itemTransition:{...Q.animation.standardEntrance,duration:Q.animation.duration.fast}},themeStyles:uR},lR=Dt(aR),iI={tone:sR||"neutral",Container:lR},OI=E=>{const x=Dw("up"),c=Dw("down");return ot(Ji,Fl(E,{get onUp(){return Ul(E.onUp,x)},get onDown(){return Ul(E.onDown,c)},get selected(){return E.selected||0},forwardFocus:n4,get onLayout(){return Ul(y=>{var S,R;return Nw(E.y).call(y,y,y.children[(S=E.selected)!=null?S:0],(R=E.selected)!=null?R:0,void 0)},E.onLayout)},get onSelectedChanged(){return Ul(E.onSelectedChanged,E.scroll!=="none"?Nw(E.y):void 0)},get style(){var y;return[E.style,iI.Container.tones[(y=E.tone)!=null?y:iI.tone],iI.Container.base]}}))},{Label:{defaultTone:AL,...r4}={styles:{}}}=(X2=Q)==null?void 0:X2.componentConfig,cR={themeKeys:{color:"backgroundColor",borderRadius:"radius"},base:{display:"flex",justifyContent:"center",color:Q.color.textNeutral,padding:[Q.spacer.md,Q.spacer.lg],borderRadius:[Q.radius.md,Q.radius.md,Q.radius.md,Q.radius.none],height:Q.typography.caption1.lineHeight+Q.spacer.md,neutral:{backgroundColor:Q.color.fillNeutral}},tones:{inverse:{color:Q.color.fillInverse},brand:{color:Q.color.fillBrand,focus:{color:Q.color.orange}}},themeStyles:r4},dR={themeKeys:{color:"textColor"},base:{...Q.typography.caption1,color:Q.color.textInverse},tones:{inverse:{color:Q.color.textNeutral},brand:{color:Q.color.textNeutral}},themeStyles:r4};Dt(cR);Dt(dR);const{Details:{defaultTone:SL,...o4}={styles:{}}}=(Y2=Q)==null?void 0:Y2.componentConfig,hR={themeKeys:{alignItems:"alignItems",contentSpacing:"contentSpacing",badgeContentSpacing:"badgeContentSpacing",ratingContentSpacing:"ratingContentSpacing"},base:{display:"flex",flexDirection:"row",alignItems:"center",contentSpacing:Q.spacer.lg,badgeContentSpacing:Q.spacer.sm,ratingContentSpacing:Q.spacer.lg},themeStyles:o4},fR={themeKeys:{color:"textColor"},base:{...Q.typography.body2,marginRight:Q.spacer.lg,color:Q.color.textNeutral},tones:{neutral:{disabled:{color:Q.color.textNeutralDisabled}},inverse:{color:Q.color.textInverse,disabled:{color:Q.color.textNeutralDisabled}},brand:{color:Q.color.textNeutral,disabled:{color:Q.color.textNeutralDisabled}}},themeStyles:o4};Dt(hR);Dt(fR);const{Rating:{styles:UI,defaultTone:IL}={styles:{},defaultTone:"neutral"}}=($2=Q)==null?void 0:$2.componentConfig,pR={themeKeys:{justifyContent:"justifyContent",itemSpacing:"itemSpacing"},base:{display:"flex",flexDirection:"column",justifyContent:"flexStart",itemSpacing:Q.spacer.sm},toneModes:{},themeStyles:UI},gR={themeKeys:{color:"textColor"},base:{color:Q.color.textNeutral,...Q.typography.body2},toneModes:{},themeStyles:UI},mR={themeKeys:{color:"color"},base:{height:Q.typography.body2.lineHeight,width:Q.typography.body2.lineHeight,color:Q.color.fillNeutral,marginRight:Q.spacer.sm},toneModes:{},themeStyles:UI};Dt(pR);Dt(mR);Dt(gR);const{Metadata:{defaultTone:CL,...jI}={styles:{}}}=(Q2=Q)==null?void 0:Q2.componentConfig,vR={themeKeys:{justifyContent:"justifyContent",alpha:"alpha"},base:{display:"flex",flexDirection:"column",justifyContent:"flexStart",flexBoundary:"contain",alpha:Q.alpha.primary},modes:{disabled:{alpha:Q.alpha.inactive}},themeStyles:jI},yR={themeKeys:{color:"textColor"},base:{maxLines:1,contain:"width",...Q.typography.headline3,color:Q.color.textNeutral},tones:{neutral:{disabled:{color:Q.color.textNeutralDisabled}},inverse:{color:Q.color.textInverse,disabled:{color:Q.color.textNeutralDisabled}},brand:{color:Q.color.textNeutral,disabled:{color:Q.color.textNeutralDisabled}}},themeStyles:jI},xR={themeKeys:{color:"textColor"},base:{contain:"width",maxLines:2,...Q.typography.body2,color:Q.color.textNeutralSecondary},tones:{neutral:{disabled:{color:Q.color.textNeutralDisabled}},inverse:{color:Q.color.textInverseSecondary,disabled:{color:Q.color.textNeutralDisabled}},brand:{color:Q.color.textNeutralSecondary,disabled:{color:Q.color.textNeutralDisabled}}},themeStyles:jI};Dt(vR);Dt(xR);Dt(yR);const{ProgressBar:{defaultTone:kL,...s4}={styles:{}}}=(Z2=Q)==null?void 0:Z2.componentConfig,TR={themeKeys:{color:"barColor",borderRadius:"borderRadius"},base:{height:Q.spacer.md,color:Q.color.fillNeutralTertiary,borderRadius:Q.radius.xs},tones:{inverse:{color:Q.color.fillInverseTertiary}},themeStyles:s4},wR={themeKeys:{color:"progressColor",borderRadius:"borderRadius"},base:{borderRadius:Q.radius.xs,color:Q.color.fillNeutral},tones:{inverse:{color:Q.color.fillInverse},brand:{color:Q.color.fillBrand}},themeStyles:s4};Dt(TR);Dt(wR);const{Radio:{defaultTone:ML,...u4}={themeStyles:{}}}=(J2=Q)==null?void 0:J2.componentConfig,zp=Q.spacer.xxl,_p=Q.stroke.sm,ER={themeKeys:{borderRadius:"strokeRadius",color:"backgroundColor",colorChecked:"backgroundColorChecked"},base:{color:Q.color.fillNeutralSecondary,colorChecked:Q.color.fillInverse,height:zp+_p*2,width:zp+_p*2,borderRadius:zp/2+_p,border:{color:Q.color.strokeNeutralSecondary,width:_p}},tones:{inverse:{border:{color:Q.color.strokeInverseSecondary,width:_p}},brand:{border:{color:Q.color.fillBrand,width:_p}}},themeStyles:u4},AR={themeKeys:{width:"knobWidth",height:"knobHeight",borderRadius:"knobRadius",color:"knobColor"},base:{color:Q.color.fillInverse,width:zp,height:zp,borderRadius:zp/2},tones:{inverse:{color:Q.color.fillNeutral}},themeStyles:u4};Dt(ER);Dt(AR);const{Row:{defaultTone:SR,...IR}={styles:{}}}=(eC=Q)==null?void 0:eC.componentConfig,CR={themeKeys:{gap:"itemSpacing",scrollIndex:"scrollIndex",itemTransition:"itemTransition"},base:{display:"flex",flexBoundary:"fixed",flexDirection:"row",gap:Q.layout.gutterX,itemTransition:{...Q.animation.standardEntrance,duration:Q.animation.duration.fast}},themeStyles:IR},kR=Dt(CR),rI={tone:SR,Container:kR},a4=E=>{const x=Dw("left"),c=Dw("right");return ot(Ji,Fl(E,{get selected(){return E.selected||0},get onLeft(){return Ul(E.onLeft,x)},get onRight(){return Ul(E.onRight,c)},forwardFocus:n4,get onLayout(){return Ul(y=>Nw(E.x).call(y,y,y.children[y.selected],y.selected,void 0),E.onLayout)},get onSelectedChanged(){return Ul(E.onSelectedChanged,E.scroll!=="none"?Nw(E.x):void 0)},get style(){return[E.style,rI.Container.tones[E.tone||rI.tone],rI.Container.base]}}))},{Keyboard:{defaultTone:_L,...BI}={styles:{}}}=(tC=Q)==null?void 0:tC.componentConfig,MR={themeKeys:{keySpacing:"keySpacing",screenW:"screenW",marginX:"marginX"},base:{keySpacing:Q.spacer.md,screenW:Q.layout.screenW,marginX:Q.layout.marginX,height:100},themeStyles:BI},_R={themeKeys:{keySpacing:"keySpacing",textAlign:"textAlign",borderRadius:"borderRadius",color:"backgroundColor",justifyContent:"justifyContent",baseWidth:"baseWidth",sizes:"sizes",contentColor:"contentColor"},base:{keySpacing:Q.spacer.md,height:Q.spacer.md*9,paddingX:Q.spacer.md,sizes:{sm:1,md:2,lg:3,xl:4,xxl:5},contentColor:Q.color.fillNeutral,padding:[Q.spacer.xxxl,Q.spacer.xl],baseWidth:Q.spacer.md*7,color:Q.color.interactiveNeutral,display:"flex",justifyContent:"center",alignItems:"center",borderRadius:Q.radius.sm},modes:{focus:{color:Q.color.interactiveNeutralFocus,contentColor:Q.color.fillInverse},disabled:{color:Q.color.fillNeutralDisabled,contentColor:Q.color.fillNeutralDisabled}},tones:{inverse:{color:Q.color.interactiveInverse,focus:{color:Q.color.interactiveInverseFocus,contentColor:Q.color.fillNeutral}},brand:{focus:{contentColor:Q.color.fillNeutral}}},themeStyles:BI},RR={themeKeys:{color:"textColor"},base:{textAlign:"left",color:Q.color.textNeutral,...Q.typography.headline2},modes:{focus:{color:Q.color.textInverse},disabled:{color:Q.color.textNeutralDisabled}},tones:{inverse:{focus:{color:Q.color.textNeutral}}},themeStyles:BI};Dt(MR);Dt(_R);Dt(RR);const{Key:{defaultTone:RL,...l4}={styles:{}}}=(nC=Q)==null?void 0:nC.componentConfig,LR={themeKeys:{keySpacing:"keySpacing",textAlign:"textAlign",borderRadius:"borderRadius",color:"backgroundColor",justifyContent:"justifyContent",baseWidth:"baseWidth",sizes:"sizes",contentColor:"contentColor"},base:{keySpacing:Q.spacer.md,height:Q.spacer.md*9,paddingX:Q.spacer.md,contentColor:Q.color.fillNeutral,sizes:{sm:1,md:2,lg:3,xl:4,xxl:5},padding:[Q.spacer.md],baseWidth:Q.spacer.md*7,color:Q.color.interactiveNeutral,display:"flex",justifyContent:"center",alignItems:"center",borderRadius:Q.radius.sm},modes:{focus:{color:Q.color.interactiveNeutralFocus,contentColor:Q.color.fillInverse},disabled:{color:Q.color.fillNeutralDisabled,contentColor:Q.color.fillNeutralDisabled}},tones:{inverse:{color:Q.color.interactiveInverse,focus:{color:Q.color.interactiveInverseFocus,contentColor:Q.color.fillNeutral}},brand:{focus:{contentColor:Q.color.fillNeutral}}},themeStyles:l4},NR={themeKeys:{color:"textColor"},base:{textAlign:"left",color:Q.color.textNeutral,...Q.typography.headline2},modes:{focus:{color:Q.color.textInverse},disabled:{color:Q.color.textNeutralDisabled}},tones:{inverse:{focus:{color:Q.color.textNeutral}}},themeStyles:l4};Dt(LR);Dt(NR);const{Input:{defaultTone:LL,...FI}={styles:{}}}=(iC=Q)==null?void 0:iC.componentConfig,DR={themeKeys:{justifyContent:"justifyContent"},base:{display:"flex",justifyContent:"flexStart",flexDirection:"column",width:100,height:100,actualTitle:""},themeStyles:FI},bR={themeKeys:{borderRadius:"borderRadius",color:"backgroundColor"},base:{width:G_(4),height:100,display:"flex",flexDirection:"column",padding:[Q.spacer.xxxl,Q.spacer.xl],color:Q.color.interactiveNeutral,contentColor:Q.color.fillInverse,borderRadius:Q.radius.sm,marginX:Q.spacer.xxxl},modes:{focus:{color:Q.color.interactiveNeutralFocus},disabled:{color:Q.color.fillNeutralDisabled}},tones:{inverse:{color:Q.color.interactiveInverse},brand:{color:Q.color.interactiveBrand,focus:{color:Q.color.fillNeutral}}},themeStyles:FI},PR={themeKeys:{color:"textColor"},base:{textAlign:"left",color:Q.color.textNeutral,...Q.typography.button1},themeStyles:FI};Dt(DR);Dt(bR);Dt(PR);const{Tile:{defaultTone:NL,...Fw}={styles:{}}}=(rC=Q)==null?void 0:rC.componentConfig,{Surface:{defaultSurfaceTone:DL,...OR}={styles:{}}}=(oC=Q)==null?void 0:oC.componentConfig,UR={themeKeys:{alpha:"alpha",paddingYProgress:"paddingYProgress",borderRadius:"radius"},base:{width:400,height:240,padding:[40,10],paddingYProgress:Q.spacer.xl,paddingYBetweenContent:Q.spacer.md,borderRadius:Q.radius.md,alpha:Q.alpha.primary},modes:{disabled:{alpha:Q.alpha.inactive}},themeStyles:{...OR,...Fw}},jR={themeKeys:{},base:{display:"flex",flexDirection:"column",flexBoundary:"contain",mountY:1},themeStyles:Fw},BR={themeKeys:{},base:{display:"flex",flexDirection:"column",justifyContent:"flexStart"},themeStyles:Fw},FR={themeKeys:{},base:{width:Q.spacer.lg*5,height:Q.spacer.xxl+Q.spacer.md},themeStyles:Fw};Dt(UR);Dt(jR);Dt(BR);Dt(FR);fa("#f6f6f6");fa("#f6f6f6");kn(0);kn(0);kn(99);kn(0);kn(0);kn(0);kn(0);var c4=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function zR(E){return E&&E.__esModule&&Object.prototype.hasOwnProperty.call(E,"default")?E.default:E}var d4={},Gp={},yr={};Object.defineProperty(yr,"__esModule",{value:!0});yr.params=h4=yr.DEFAULT_VIDEO_URL=yr.CLOUDINARY_CLOUD_NAME=yr.TMDB_API_KEY=void 0;yr.TMDB_API_KEY="66683917a94e703e14ca150023f4ea7c";yr.CLOUDINARY_CLOUD_NAME="dhcb7oxjd";var h4=yr.DEFAULT_VIDEO_URL="http://commondatastorage.googleapis.com/gtv-videos-bucket/sample/BigBuckBunny.mp4";yr.params=new URL(window.location.href).searchParams;var Kr={},jl={};Object.defineProperty(jl,"__esModule",{value:!0});jl.tvItemVideos=jl.tvItem=jl.tvPopular=void 0;jl.tvPopular={page:1,results:[{backdrop_path:"/4N6zEMfZ57zNEQcM8gWeERFupMv.jpg",first_air_date:"2021-08-11",genre_ids:[16,10759,10765],id:91363,name:"What If...?",origin_country:["US"],original_language:"en",original_name:"What If...?",overview:"Taking inspiration from the comic books of the same name, each episode explores a pivotal moment from the Marvel Cinematic Universe and turns it on its head, leading the audience into uncharted territory.",popularity:2271.98,poster_path:"/lztz5XBMG1x6Y5ubz7CxfPFsAcW.jpg",vote_average:8.6,vote_count:1064},{backdrop_path:"/bjsoOPkViI5WIREQb94XDeXrZlF.jpg",first_air_date:"2021-07-26",genre_ids:[10764],id:129936,name:"Ilha Record",origin_country:["BR"],original_language:"pt",original_name:"Ilha Record",overview:"Ilha Record is a Brazilian reality television competition format originally created and aired by RecordTV. The series is hosted by Sabrina Sato and premiered on Monday, July 26, 2021 at 10:30 p.m. / 9:30 p.m.  www.youtube.com/channel/UCW3Ve61iGOQQoE8UrPMOZcQ",popularity:1504.551,poster_path:"/43pX5G2eL4H6EppxVcirMxdkcGN.jpg",vote_average:2.9,vote_count:8},{backdrop_path:"/zN8vBX1jDRxIDqFQ2ARcodTHhdt.jpg",first_air_date:"2021-08-17",genre_ids:[18,10751],id:129203,name:"The Bond",origin_country:["CN"],original_language:"zh",original_name:"乔家的儿女",overview:"",popularity:1387.833,poster_path:"/dLUJGSrFWA1h3pnAqygAHK7ShVb.jpg",vote_average:1,vote_count:1},{backdrop_path:"/qZtAf4Z1lazGQoYVXiHOrvLr5lI.jpg",first_air_date:"2017-01-26",genre_ids:[9648,18,80],id:69050,name:"Riverdale",origin_country:["US"],original_language:"en",original_name:"Riverdale",overview:"Set in the present, the series offers a bold, subversive take on Archie, Betty, Veronica and their friends, exploring the surreality of small-town life, the darkness and weirdness bubbling beneath Riverdale’s wholesome facade.",popularity:1220.838,poster_path:"/wRbjVBdDo5qHAEOVYoMWpM58FSA.jpg",vote_average:8.6,vote_count:11828},{backdrop_path:"/wvdWb5kTQipdMDqCclC6Y3zr4j3.jpg",first_air_date:"2010-10-31",genre_ids:[10759,18,10765],id:1402,name:"The Walking Dead",origin_country:["US"],original_language:"en",original_name:"The Walking Dead",overview:"Sheriff's deputy Rick Grimes awakens from a coma to find a post-apocalyptic world dominated by flesh-eating zombies. He sets out to find his family and encounters many other survivors along the way.",popularity:1138.365,poster_path:"/w21lgYIi9GeUH5dO8l3B9ARZbCB.jpg",vote_average:8.1,vote_count:11467},{backdrop_path:"/8C0eT8anizQBe8QoD4tY9GXq7tj.jpg",first_air_date:"2017-09-25",genre_ids:[18],id:71712,name:"The Good Doctor",origin_country:["US"],original_language:"en",original_name:"The Good Doctor",overview:"A young surgeon with Savant syndrome is recruited into the surgical unit of a prestigious hospital. The question will arise: can a person who doesn't have the ability to relate to people actually save their lives",popularity:1024.738,poster_path:"/6tfT03sGp9k4c0J3dypjrI8TSAI.jpg",vote_average:8.6,vote_count:9240},{backdrop_path:"/f5tjVQtxihaVwXOdpITSPeIqlpX.jpg",first_air_date:"2021-06-09",genre_ids:[18,10765],id:84958,name:"Loki",origin_country:["US"],original_language:"en",original_name:"Loki",overview:"After stealing the Tesseract during the events of “Avengers: Endgame,” an alternate version of Loki is brought to the mysterious Time Variance Authority, a bureaucratic organization that exists outside of time and space and monitors the timeline. They give Loki a choice: face being erased from existence due to being a “time variant” or help fix the timeline and stop a greater threat.",popularity:979.914,poster_path:"/kEl2t3OhXc3Zb9FBh1AuYzRTgZp.jpg",vote_average:8.2,vote_count:7464},{backdrop_path:"/pXjpqrx65mlQskf9mfTWSszYODn.jpg",first_air_date:"2020-05-18",genre_ids:[10765,10759,18],id:80986,name:"DC's Stargirl",origin_country:["US"],original_language:"en",original_name:"DC's Stargirl",overview:'Courtney Whitmore, a smart, athletic and above all else kind girl, discovers her step-father has a secret: he used to be the sidekick to a superhero. "Borrowing" the long-lost hero’s cosmic staff, she becomes the unlikely inspiration for an entirely new generation of superheroes.',popularity:865.358,poster_path:"/rbkGgrEHOPyAEZqPk609QN1Ird6.jpg",vote_average:7.9,vote_count:808},{backdrop_path:"/ujuhz8nVza03gXk2zRcx54LxA9Y.jpg",first_air_date:"2021-08-12",genre_ids:[18],id:130816,name:"The Ideal City",origin_country:["CN"],original_language:"zh",original_name:"理想之城",overview:"",popularity:862.001,poster_path:"/ap9bYavkoEusEZSNuNQ0WKhDs2z.jpg",vote_average:7,vote_count:4},{backdrop_path:"/ktDJ21QQscbMNQfPpZBsNORxdDx.jpg",first_air_date:"2016-01-25",genre_ids:[80,10765],id:63174,name:"Lucifer",origin_country:["US"],original_language:"en",original_name:"Lucifer",overview:"Bored and unhappy as the Lord of Hell, Lucifer Morningstar abandoned his throne and retired to Los Angeles, where he has teamed up with LAPD detective Chloe Decker to take down criminals. But the longer he's away from the underworld, the greater the threat that the worst of humanity could escape.",popularity:838.517,poster_path:"/ekZobS8isE6mA53RAiGDG93hBxL.jpg",vote_average:8.5,vote_count:9974},{backdrop_path:"/aSFDMJGik0vLzUoyl9uQPWstmup.jpg",first_air_date:"2021-08-14",genre_ids:[10765],id:131009,name:"Demi-Gods and Semi-Devils",origin_country:["CN"],original_language:"zh",original_name:"天龙八部",overview:"",popularity:836.816,poster_path:"/A0gvywTPbbHLcJDedoLdciaiB2t.jpg",vote_average:8,vote_count:1},{backdrop_path:"/gMNDllBAxn3SuW12qZU0tIZaeY3.jpg",first_air_date:"2021-07-21",genre_ids:[35,10751,10759,80],id:114503,name:"Turner & Hooch",origin_country:["US"],original_language:"en",original_name:"Turner & Hooch",overview:"A Deputy Marshal inherits an unruly dog who helps him solve crimes and investigate a family mystery.",popularity:787.984,poster_path:"/1VLk2ObY5298UoGaFARqt0SDyTh.jpg",vote_average:7.5,vote_count:113},{backdrop_path:"/zJZfxi8X3XPHAhxXseRugtnNVtt.jpg",first_air_date:"2013-12-02",genre_ids:[16,35,10765,10759],id:60625,name:"Rick and Morty",origin_country:["US"],original_language:"en",original_name:"Rick and Morty",overview:"Rick is a mentally-unbalanced but scientifically-gifted old man who has recently reconnected with his family. He spends most of his time involving his young grandson Morty in dangerous, outlandish adventures throughout space and alternate universes. Compounded with Morty's already unstable family life, these events cause Morty much distress at home and school.",popularity:783.298,poster_path:"/8kOWDBK6XlPUzckuHDo3wwVRFwt.jpg",vote_average:8.8,vote_count:5231},{backdrop_path:"/eyG9srihv68ScRdEbJZj66WT4O0.jpg",first_air_date:"2014-10-07",genre_ids:[18,10765],id:60735,name:"The Flash",origin_country:["US"],original_language:"en",original_name:"The Flash",overview:'After a particle accelerator causes a freak storm, CSI Investigator Barry Allen is struck by lightning and falls into a coma. Months later he awakens with the power of super speed, granting him the ability to move through Central City like an unseen guardian angel. Though initially excited by his newfound powers, Barry is shocked to discover he is not the only "meta-human" who was created in the wake of the accelerator explosion -- and not everyone is using their new powers for good. Barry partners with S.T.A.R. Labs and dedicates his life to protect the innocent. For now, only a few close friends and associates know that Barry is literally the fastest man alive, but it won\'t be long before the world learns what Barry Allen has become...The Flash.',popularity:769.575,poster_path:"/lJA2RCMfsWoskqlQhXPSLFQGXEJ.jpg",vote_average:7.8,vote_count:8353},{backdrop_path:"/aGULNElJVpSru19WP2pUjopPX1U.jpg",first_air_date:"2021-07-28",genre_ids:[80,10766],id:128252,name:"The Snitch Cartel: Origins",origin_country:["CO"],original_language:"es",original_name:"El cartel de los sapos: El origen",overview:"In Cali during the '60s and '70s, two brothers juggle family, romance and the joint pursuit of a burning ambition: to rule Colombia's drug industry.",popularity:759.919,poster_path:"/A17Rt6BLHno0puR1QXbsSKhBfA4.jpg",vote_average:8,vote_count:100},{backdrop_path:"/9abMIArcm95q0CtTOTZnLdUIoSm.jpg",first_air_date:"1973-03-26",genre_ids:[10766],id:1054,name:"The Young and the Restless",origin_country:["US"],original_language:"en",original_name:"The Young and the Restless",overview:"The rivalries, romances, hopes and fears of the residents of the fictional Midwestern metropolis, Genoa City. The lives and loves of a wide variety of characters mingle through the generations, dominated by the Newman, Abbott, Baldwin and Winters families.",popularity:754.065,poster_path:"/5h58tbqpUhpdiQR1i4FawKWOidh.jpg",vote_average:6.4,vote_count:91},{backdrop_path:"/3IIBf6VlwEyKAX4cN2XCM1gKdgM.jpg",first_air_date:"2005-03-27",genre_ids:[18],id:1416,name:"Grey's Anatomy",origin_country:["US"],original_language:"en",original_name:"Grey's Anatomy",overview:"Follows the personal and professional lives of a group of doctors at Seattle’s Grey Sloan Memorial Hospital.",popularity:700.043,poster_path:"/clnyhPqj1SNgpAdeSS6a6fwE6Bo.jpg",vote_average:8.2,vote_count:6619},{backdrop_path:null,first_air_date:"2021-01-04",genre_ids:[10766],id:115810,name:"Amor Amor",origin_country:["PT"],original_language:"pt",original_name:"Amor Amor",overview:"This is the story of a woman who fell in love and was betrayed. Her beloved was successful at the expense of a song that stole from her, while she was forced to fight for survival, far from her homeland.\n\nIt is also the story of a girl forced to mature quickly, to raise her daughter, without knowing that, after all, it was not her daughter she was raising...",popularity:689.095,poster_path:"/wksRAOMoyHDxJWSW6bG4MyECW9G.jpg",vote_average:3.6,vote_count:10},{backdrop_path:"/5DN8LSWLCQySuPoQ5ozDqo9GR9o.jpg",first_air_date:"1991-12-30",genre_ids:[10766],id:25778,name:"Familie",origin_country:["BE"],original_language:"nl",original_name:"Familie",overview:"Famile is a Flemish television series, which is broadcast on VTM since December 30th, 1991. It's the longest running Belgian soap opera. The storylines take place mostly in and around the city of Mechelen, where the family Van Den Bossche longstanding operates its family business. The soap has a diverse cast where Jef De Smedt, Jacky Lafon and Annie Geeraerts all continuous part of it since the very beginning. Several times the series was subjected to a thorough facelift in order to stay fresh and innovative. Often thereby also young actors added to the series, without touching the base. Familie is from Monday to Friday to see about 19:45 on VTM, except from late June to late August.",popularity:628.733,poster_path:"/bPBeBzhhfbF0aYZaHd7ESe0TVwK.jpg",vote_average:7,vote_count:4},{backdrop_path:"/ki2V3d7DrQ79mYWvnXjTPLCgBdW.jpg",first_air_date:"2021-08-06",genre_ids:[18,10765],id:95281,name:"S.O.Z: Soldiers or Zombies",origin_country:["ES"],original_language:"es",original_name:"S.O.Z: Soldados o Zombies",overview:"Drug lord Alonso Marroquín escapes from a Mexican prison in an attempt to go into hiding. A US military secret experiment goes wrong and the elite unit from the Mexican Police that is after Marroquín gets infected, creating a new zombie species. The Army and the zombies end up at the drug lord’s hideout and a battle for human survival begins.",popularity:616.774,poster_path:"/arYdHX708nDq6oWNOSjw6NczWc5.jpg",vote_average:7.4,vote_count:338}],total_pages:500,total_results:1e4};jl.tvItem={backdrop_path:"/4N6zEMfZ57zNEQcM8gWeERFupMv.jpg",created_by:[],episode_run_time:[34],first_air_date:"2021-08-11",genres:[{id:16,name:"Animation"},{id:10759,name:"Action & Adventure"},{id:10765,name:"Sci-Fi & Fantasy"}],homepage:"https://www.disneyplus.com/series/what-if/7672ZVj1ZxU9",id:91363,in_production:!0,languages:["en"],last_air_date:"2021-08-25",last_episode_to_air:{air_date:"2021-08-25",episode_number:3,id:3062391,name:"What If… The World Lost Its Mightiest Heroes?",overview:"Nick Fury struggles to launch The Avengers when candidates are targeted by a serial killer.",production_code:"",season_number:1,still_path:"/jUFFhj6bFtQbvhmVEt0GDpJAPuf.jpg",vote_average:7.6,vote_count:9},name:"What If...?",next_episode_to_air:{air_date:"2021-09-01",episode_number:4,id:3062392,name:"What If… Doctor Strange Lost His Heart Instead of His Hands?",overview:"A grief-stricken Doctor Strange uses the Eye of Agamotto in a dangerous effort to change the past.",production_code:"",season_number:1,still_path:"/zOBb8e3pljjO4GPh2oa7LXHKWjn.jpg",vote_average:6.75,vote_count:4},networks:[{name:"Disney+",id:2739,logo_path:"/gJ8VX6JSu3ciXHuC2dDGAo2lvwM.png",origin_country:"US"}],number_of_episodes:9,number_of_seasons:1,origin_country:["US"],original_language:"en",original_name:"What If...?",overview:"Taking inspiration from the comic books of the same name, each episode explores a pivotal moment from the Marvel Cinematic Universe and turns it on its head, leading the audience into uncharted territory.",popularity:2271.98,poster_path:"/lztz5XBMG1x6Y5ubz7CxfPFsAcW.jpg",production_companies:[{id:420,logo_path:"/hUzeosd33nzE5MCNsZxCGEKTXaQ.png",name:"Marvel Studios",origin_country:"US"},{id:42171,logo_path:"/yTvfCUChMCmeEbjWNyIFGwgiXQE.png",name:"Blue Spirit",origin_country:"FR"},{id:129671,logo_path:null,name:"Squeeze",origin_country:"CA"},{id:20187,logo_path:"/bYdzRm9r74bIWlSRKIWZeZyDBFD.png",name:"Flying Bark Productions",origin_country:"AU"}],production_countries:[{iso_3166_1:"AU",name:"Australia"},{iso_3166_1:"CA",name:"Canada"},{iso_3166_1:"FR",name:"France"},{iso_3166_1:"US",name:"United States of America"}],seasons:[{air_date:"2021-08-11",episode_count:9,id:134723,name:"Season 1",overview:"",poster_path:"/lztz5XBMG1x6Y5ubz7CxfPFsAcW.jpg",season_number:1}],spoken_languages:[{english_name:"English",iso_639_1:"en",name:"English"}],status:"Returning Series",tagline:"One question changes everything.",type:"Scripted",vote_average:8.6,vote_count:1102};jl.tvItemVideos={id:91363,results:[{iso_639_1:"en",iso_3166_1:"US",name:"“Are You Seeing This?” Official Clip",key:"IPjjbhAJyZM",site:"YouTube",size:1080,type:"Clip",official:!0,published_at:"2021-08-10T22:06:57.000Z",id:"611362a7770700005de71311"},{iso_639_1:"en",iso_3166_1:"US",name:"Moment",key:"xV5Wm7qixyQ",site:"YouTube",size:1080,type:"Teaser",official:!0,published_at:"2021-08-09T18:00:18.000Z",id:"6111794e8d1b8e0046e96bea"},{iso_639_1:"en",iso_3166_1:"US",name:"“What Is What If…?” Featurette",key:"wzjQsZ_Wr50",site:"YouTube",size:1080,type:"Featurette",official:!0,published_at:"2021-08-04T18:00:41.000Z",id:"610b0da07719d70072c5ad8f"},{iso_639_1:"en",iso_3166_1:"US",name:"“Steve” Official Clip",key:"7U48ewCum88",site:"YouTube",size:1080,type:"Clip",official:!0,published_at:"2021-08-04T13:05:50.000Z",id:"610a922bee43e80027ccac53"},{iso_639_1:"en",iso_3166_1:"US",name:"Ask The Question",key:"HwioB_clHgg",site:"YouTube",size:1080,type:"Teaser",official:!0,published_at:"2021-08-03T16:00:08.000Z",id:"610969e1c613ce0047d2fffa"},{iso_639_1:"en",iso_3166_1:"US",name:"Changed",key:"G-7Q7bUYgKk",site:"YouTube",size:1080,type:"Teaser",official:!0,published_at:"2021-07-29T18:17:51.000Z",id:"6102fec68e8d30005e090739"},{iso_639_1:"en",iso_3166_1:"US",name:"Official Trailer",key:"x9D0uUKJ5KI",site:"YouTube",size:1080,type:"Trailer",official:!0,published_at:"2021-07-08T16:00:02.000Z",id:"60e723804ca676002de84948"},{iso_639_1:"en",iso_3166_1:"US",name:"Exclusive First Look",key:"4iLVoEg9aLk",site:"YouTube",size:1080,type:"Trailer",official:!0,published_at:"2020-12-11T00:49:50.000Z",id:"5fd2c2ee5aadc400425b52b5"}]};var oI;Object.defineProperty(Kr,"__esModule",{value:!0});Kr.getBackdropSize=Kr.getPosterSize=Kr.imageUrl=Kr.getVideos=f4=Kr.getDetails=Kr.getPopular=void 0;const zI=yr,GI=jl,VI=zI.params.has("debug"),GR=+((oI=zI.params.get("apidelay"))!==null&&oI!==void 0?oI:0),VR="https://api.themoviedb.org/3/",KR="https://image.tmdb.org/t/p/",zw=async E=>await new Promise(x=>setTimeout(()=>{x(E)},GR)),KI=async E=>{const x=new URL("".concat(VR).concat(E));return x.searchParams.set("api_key",zI.TMDB_API_KEY),await(await zw(await fetch(x.toString(),{headers:{accept:"application/json"}}))).json()},HR=async(E,x=1)=>VI?zw(GI.tvPopular):await KI("".concat(E,"/popular?page=").concat(x));Kr.getPopular=HR;const WR=async(E,x)=>VI?zw(GI.tvItem):await KI("".concat(E,"/").concat(x));var f4=Kr.getDetails=WR;const qR=async(E,x)=>VI?zw(GI.tvItemVideos):await KI("".concat(E,"/").concat(x,"/videos"));Kr.getVideos=qR;const XR=(E,x)=>(x!=null?x:"")===""?"":"".concat(KR).concat(E).concat(x);Kr.imageUrl=XR;const YR=E=>E>780?"original":E>500?"w780":E>342?"w500":E>200?"w342":E>185?"w200":E>154?"w185":E>92?"w154":"w92";Kr.getPosterSize=YR;const $R=E=>E>1280?"original":E>780?"w1280":E>300?"w780":"w300";Kr.getBackdropSize=$R;(function(E){Object.defineProperty(E,"__esModule",{value:!0}),E.getBackdropUrl=E.getPosterUrl=E.getBackdropSize=E.getPosterSize=E.getImagePath=E.getRuntimeStr=E.getRuntime=E.getYouTubeEmbedUrl=E.getVideo=E.getVideos=E.getDetails=E.getPopular=E.getDetail=void 0;const x=yr,c=Kr,y=(ie,ve)=>({id:ve.id,name:ve.name,poster:ve.poster_path,backdrop:ve.backdrop_path,airDate:"first_air_date"in ve?new Date(ve.first_air_date):void 0,releaseDate:"release_date"in ve?new Date(ve.release_date):void 0,description:ve.overview,popularity:ve.popularity,voteAverage:ve.vote_average,video:x.DEFAULT_VIDEO_URL,type:ie});E.getDetail=y;const S=async(ie,ve=1)=>(await c.getPopular(ie,ve)).results.map(he=>(0,E.getDetail)(ie,he));E.getPopular=S;const R=async(ie,ve)=>await c.getDetails(ie,ve);E.getDetails=R;const P=async(ie,ve)=>(await c.getVideos(ie,ve)).results;E.getVideos=P;const v=async(ie,ve)=>(await(0,E.getVideos)(ie,ve)).filter(he=>he.type==="Trailer").reverse().pop();E.getVideo=v;const F=ie=>"https://www.youtube-nocookie.com/embed/".concat(ie,"?controls=0&autoplay=0&enablejsapi=1");E.getYouTubeEmbedUrl=F;const V=ie=>"runtime"in ie?ie.runtime:"episode_run_time"in ie?ie.episode_run_time[0]:0;E.getRuntime=V;const H=ie=>{if(ie===0)return"";const ve=Math.floor(ie/60),ue=ie-ve*60;return(ve>0?"".concat(ve,"h "):"")+(ue>0?"".concat(ue,"m"):"")};E.getRuntimeStr=H;const ee=(ie,ve)=>"".concat(ve,"/").concat(ie);E.getImagePath=ee;const te=ie=>c.getPosterSize(ie);E.getPosterSize=te;const me=ie=>c.getBackdropSize(ie);E.getBackdropSize=me;const A=(ie,ve)=>{const ue=c.getPosterSize(ve);return c.imageUrl(ue,ie)};E.getPosterUrl=A;const q=(ie,ve)=>{const ue=c.getBackdropSize(ve);return c.imageUrl(ue,ie)};E.getBackdropUrl=q})(Gp);var p4={};(function(E){Object.defineProperty(E,"__esModule",{value:!0}),E.adjustLeft=E.getX=E.shouldLoadMore=E.ITEM_POSITION_LEFT=E.TOTAL_ITEM_WIDTH=E.ITEM_MARGIN=E.ITEM_WIDTH=E.TOTAL_HEIGHT=E.MARGIN=E.HEIGHT=void 0,E.HEIGHT=23.75,E.MARGIN=.625,E.TOTAL_HEIGHT=E.HEIGHT+E.MARGIN*2,E.ITEM_WIDTH=12.5,E.ITEM_MARGIN=.625,E.TOTAL_ITEM_WIDTH=E.ITEM_WIDTH+E.ITEM_MARGIN*2,E.ITEM_POSITION_LEFT=13.75;const x=(S,R)=>R>=S-15;E.shouldLoadMore=x;const c=S=>E.TOTAL_ITEM_WIDTH*S;E.getX=c;const y=S=>"".concat(E.ITEM_POSITION_LEFT*S,"rem");E.adjustLeft=y})(p4);(function(E){Object.defineProperty(E,"__esModule",{value:!0}),E.adjustTop=E.getY=E.isCarousel=E.getPage=E.renderRange=E.carouselsToLoad=E.startingCarousels=E.shouldAddList=E.getIndex=E.subtitle=E.title=E.CAROUSEL_POSITION_TOP=E.STARTING_CAROUSELS=E.TYPE=void 0;const x=Gp,c=p4,y=yr;E.TYPE="tv",E.STARTING_CAROUSELS=4,E.CAROUSEL_POSITION_TOP=25;const S=q=>"".concat(q," Demo App");E.title=S;const R=q=>q.width===0?"":"".concat(q.width,"x").concat(q.height);E.subtitle=R;const P=q=>+q.split(":")[1]-1;E.getIndex=P;const v=(q,ie)=>q>=(0,E.startingCarousels)()&&ie>=q-3;E.shouldAddList=v;const F=()=>y.params.has("startingCarousels")&&!isNaN(y.params.get("startingCarousels"))?Math.round(Number(y.params.get("startingCarousels"))):E.STARTING_CAROUSELS;E.startingCarousels=F;const V=()=>y.params.has("loadCarousels")&&!isNaN(y.params.get("loadCarousels"))?Math.round(Number(y.params.get("loadCarousels"))):1;E.carouselsToLoad=V;const H=()=>y.params.has("renderRange")&&!isNaN(y.params.get("renderRange"))?Math.round(Number(y.params.get("renderRange"))):0;E.renderRange=H;const ee=async q=>await(0,x.getPopular)(E.TYPE,q);E.getPage=ee;const te=q=>q.startsWith("carousel:");E.isCarousel=te;const me=q=>c.TOTAL_HEIGHT*q;E.getY=me;const A=q=>"".concat(E.CAROUSEL_POSITION_TOP*q,"rem");E.adjustTop=A})(d4);var qv={};Object.defineProperty(qv,"__esModule",{value:!0});qv.ITEMS=g4=qv.TITLE=void 0;var g4=qv.TITLE="Categories";qv.ITEMS=["TV Series","Movies","Documentaries","Short Films","Indie Films","Sports"];const sC={Column:{flexDirection:"column",display:"flex",justifyContent:"center",alignItems:"center",color:jn.teal,width:600,height:1080,gap:20,zIndex:101,transition:{x:{duration:250,easing:"ease-in-out"}},x:-450,focus:{width:600,x:0}},SidebarBtn:{color:jn.buttonUnfocused,focus:{color:jn.butonFocused}}};function QR(E){const x=Bw();function c(){this.children.forEach(P=>P.states.add("active")),this.children.selected.setFocus()}function y(){this.selected=0,this.children.forEach(P=>P.states.remove("active"))}const S=[{key:"tv",title:"TV Series"},{key:"movie",title:"Movies"},{key:"documentaries",title:"Documentaries"},{key:"trending",title:"Trending"}];function R(P){if(t_(()=>P)())return E.focusPage();x(P)}return ot(OI,Fl(E,{onFocus:c,onBlur:y,get style(){return sC.Column},scroll:"none",get children(){return[ot(su,{skipFocus:!0,fontSize:42,get color(){return jn.white},children:g4}),ot(aI,{each:S,children:(P,v)=>ot(wI,{width:250,height:80,get style(){return sC.SidebarBtn},onEnter:()=>R("/browse/".concat(P.key)),get children(){return P.title}})})]}}))}var m4={},Bl={};Object.defineProperty(Bl,"__esModule",{value:!0});Bl.imageUrl=Bl.imagePath=Bl.isEnabled=void 0;const v4=yr,ZR=()=>v4.params.has("cloudinary");Bl.isEnabled=ZR;const JR=E=>"tmdb/".concat(E);Bl.imagePath=JR;const eL=(E,x,c,y,S,R,P)=>{if(P===0)return"";const v=P/200,F=V=>Math.ceil(V*v);return encodeURI("https://res.cloudinary.com/".concat(v4.CLOUDINARY_CLOUD_NAME,"/image/upload/c_fill,g_auto,h_").concat(F(300),",w_").concat(F(200),"/b_rgb:").concat(E?"000000":"1C1C1C",",bo_").concat(F(10),"px_solid_rgb:").concat(E?"000000":"1C1C1C",",co_rgb:ffffff,g_south_east,l_text:merriweather_").concat(F(20),":").concat(encodeURIComponent(x),",o_").concat(F(100),",r_").concat(F(0),",x_").concat(F(15),",y_").concat(F(15),"/b_rgb:").concat(E?"ffffff":"1C1C1C",",c_pad,g_north,h_").concat(F(380),",w_").concat(F(200),"/co_rgb:").concat(E?"000000":"ffffff",",g_west,l_text:merriweather_").concat(F(18),":").concat(encodeURIComponent(c),",x_").concat(F(10),",y_").concat(F(128),"/co_rgb:").concat(E?"000000":"ffffff",",g_west,l_text:merriweather_").concat(F(20),"_bold:").concat(encodeURIComponent(y),",x_").concat(F(10),",y_").concat(F(150),"/co_rgb:").concat(E?"000000":"ffffff",",g_west,l_text:merriweather_").concat(F(18),":").concat(S.toString(),",x_").concat(F(10),",y_").concat(F(172),"/").concat(R))};Bl.imageUrl=eL;(function(E){Object.defineProperty(E,"__esModule",{value:!0}),E.preload=E.imageAlt=E.cloudinaryUrl=E.airDate=E.name=E.ITEM_WIDTH=void 0;const x=yr,c=Gp,y=Bl;E.ITEM_WIDTH=12.5;const S=14,R=H=>H.length>S?"".concat(H.substring(0,S-1),"..."):H;E.name=R;const P=H=>H===void 0?"":H.toLocaleDateString();E.airDate=P;const v=(H,ee,te)=>{var me;if(!y.isEnabled()||((me=H.poster)!==null&&me!==void 0?me:"").length===0)return"";const A=(0,c.getPosterSize)(te),q=(0,c.getImagePath)(H.poster,A),ie=y.imagePath(q);return y.imageUrl(ee,"1 min",(0,E.airDate)(H.airDate),(0,E.name)(H.name),H.voteAverage,ie,te)};E.cloudinaryUrl=v;const F=H=>"Poster image for '".concat(H,"'");E.imageAlt=F;const V=()=>x.params.has("preload");E.preload=V})(m4);const uC={Container:{width:200,height:350,borderRadius:6,scale:1,color:jn.posterUnfocused,transition:{color:!0,scale:!0},focus:{scale:1.1,color:jn.white}},assetContainer:{width:200,height:100,color:jn.black,transition:{color:!0,scale:!0},focus:{scale:1.1,color:jn.white},y:340}};function tL(E){const[x,c]=kn(jn.black),y=()=>x()===jn.white?jn.black:jn.white;return ot(Ji,Fl(E,{onFocus:()=>c(jn.white),onBlur:()=>c(jn.black),get style(){return uC.Container},get src(){return Gp.getPosterUrl(E.poster,200)},get children(){return ot(Ji,{get style(){return uC.assetContainer},get color(){return x()},get children(){return[ot(su,{x:10,y:10,fontSize:20,width:200,height:42,contain:"both",get color(){return y()},get children(){return m4.airDate(E.airDate)}}),ot(su,{x:10,y:40,fontSize:24,width:200,height:42,contain:"both",get color(){return y()},get children(){return E.name}}),ot(su,{x:10,y:70,fontSize:20,width:200,height:42,contain:"both",get color(){return y()},get children(){return E.voteAverage}})]}})}}))}const aC={LoadingContainer:{width:1920,height:1080,display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",zIndex:100},Spinner:{width:150,height:150,rotation:0,transition:{rotation:{duration:1e3,easing:"ease-in-out"}}}},HI=()=>{let E,x,c=0;return TC(()=>{x=setInterval(()=>{c=(c+10)%360,E.rotation=c},1e3)}),va(()=>{clearInterval(x)}),ot(Ji,{get style(){return aC.LoadingContainer},get children(){return[ot(Ji,{ref(y){var S=E;typeof S=="function"?S(y):E=y},src:"../../assets/spinner.png",get style(){return aC.Spinner}}),ot(su,{children:"Loading..."})]}})},vw={AppHeader:{width:1920,height:175,display:"flex",justifyContent:"center",flexDirection:"row",y:0,zIndex:99,color:jn.background},AppTitle:{textAlign:"center",fontSize:64,y:50},LoadingContainer:{width:1920,height:1080,display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",zIndex:100},Spinner:{width:150,height:150,rotation:0,transition:{rotation:{duration:1e3,easing:"ease-in-out"}}},Row:{display:"flex",justifyContent:"spaceBetween",width:1760,height:300,gap:26,transition:{x:{duration:250,easing:"ease-in-out"}}},Column:{display:"flex",flexDirection:"column",justifyContent:"flexStart",width:1760,height:500,gap:50,y:200,x:80},CarouselAnimation:{transition:{y:{duration:250,easing:"ease-in-out"}}}},lC=()=>{let E,x,c=10;const y=Bw(),[S,R]=kn(Array.from({length:c},()=>[])),[P,v]=kn(!1),F=mk(()=>0),V=async te=>{const me=await d4.getPage(te);R(A=>{const q=[...A];return q[te-1]=me,q})};ma(()=>{v(!0);for(let te=1;te<=c;te++)V(te);v(!1)});function H(){return E.states.has("focus")?!1:(x=RC(),E.setFocus())}function ee(te){y("details/".concat(te.type,"/").concat(te.id))}return Rw(()=>Rw(()=>!!P())()?ot(HI,{}):ot(Ji,{onLeft:H,onRight:()=>E.states.has("focus")&&x.setFocus(),get children(){return[ot(Ji,{get style(){return vw.AppHeader},get children(){return ot(su,{get style(){return vw.AppTitle},children:"Solid Demo App"})}}),ot(QR,{ref(te){var me=E;typeof me=="function"?me(te):E=te},focusPage:()=>x.setFocus()}),ot(OI,{scroll:"auto",y:200,x:170,gap:200,get style(){return vw.CarouselAnimation},get children(){return ot(aI,{get each(){return S()},children:(te,me)=>ot(a4,{get style(){return vw.Row},justifyContent:"center",gap:40,get children(){return ot(aI,{each:te,children:(A,q)=>ot(tL,Fl({get autofocus(){return F(q())},get index(){return q()+1}},A,{onEnter:()=>ee(A)}))})}})})}})]}}))},yw={Container:{width:1920,height:1080,borderRadius:6,scale:1,color:jn.posterUnfocused,zIndex:105},Poster:{y:300,x:200,width:300,height:450,color:jn.white,zIndex:99},Button:{color:jn.buttonUnfocused,focus:{color:jn.butonFocused}}};function nL(E){const x=Bw();JC();const[c,y]=kn(""),[S,R]=kn("");ma(()=>{y(Gp.getPosterUrl(E.poster_path,300))}),ma(()=>{R(Gp.getBackdropUrl(E.backdrop_path,window.innerWidth))});function P(){x("/video")}return ot(Ji,Fl(E,{get style(){return yw.Container},x:0,get src(){return S()},get children(){return[ot(Ji,{get style(){return yw.Poster},get src(){return c()}}),ot(Ji,{get style(){return{y:500,x:0,width:1920,height:100,color:jn.background}},get children(){return ot(a4,{x:550,y:25,gap:40,scroll:"none",get children(){return[ot(wI,{autofocus:!0,width:150,height:50,get style(){return yw.Button},onEnter:P,children:"Play"}),ot(wI,{width:150,height:50,get style(){return yw.Button},onEnter:()=>history.back(),children:"Back"})]}})}}),ot(OI,{y:620,width:1920,height:480,get color(){return jn.teal},get children(){return[ot(su,{x:550,y:20,fontSize:36,marginTop:20,get children(){return E.name}}),ot(su,{x:550,width:900,fontSize:24,contain:"width",lineHeight:30,get children(){return E.overview}})]}})]}}))}const iL=()=>{const E=JC(),[x,c]=kn({}),[y,S]=kn(!1),R=async(P,v)=>{const F=await f4(P,v);c(F)};return ma(()=>{S(!0),R(E.type,E.id),S(!1)}),y()?ot(HI,{}):ot(nL,Fl(x))};var Ew={};(function(E){Object.defineProperty(E,"__esModule",{value:!0}),E.shouldPause=E.onKeyDown=E.playPause=E.play=E.isYouTube=void 0;const x=yr,c=v=>(v==null?void 0:v.site)==="YouTube";E.isYouTube=c;const y=async(v,F)=>{var V;if(F instanceof HTMLIFrameElement){const H=F.getAttribute("data-playing")==="true";if(H===v)return;(V=F.contentWindow)===null||V===void 0||V.postMessage(JSON.stringify({event:"command",func:H?"pauseVideo":"playVideo",args:""}),"*"),F.setAttribute("data-playing",H?"false":"true")}else if(F instanceof HTMLVideoElement){if(F.paused===!v)return;F.paused?await F.play():F.pause()}};E.play=y;const S=async v=>{const F=v instanceof HTMLIFrameElement?v.getAttribute("data-playing")==="true":v instanceof HTMLVideoElement?!v.paused:!1;await(0,E.play)(!F,v)};E.playPause=S;const R=async(v,F)=>{if(F!==null)switch(v.key){case" ":v.preventDefault(),await(0,E.playPause)(F);break}};E.onKeyDown=R;const P=()=>x.params.has("pauseVideoOnBrowse");E.shouldPause=P})(Ew);var y4={};/*
 @license
 Shaka Player
 Copyright 2016 Google LLC
 SPDX-License-Identifier: Apache-2.0
*/(function(E){(function(){var x=typeof window<"u"?window:c4,c={};(function(S,R,P){/*
 @license
 Shaka Player
 Copyright 2016 Google LLC
 SPDX-License-Identifier: Apache-2.0
*/var v;function F(t){var i=0;return function(){return i<t.length?{done:!1,value:t[i++]}:{done:!0}}}var V=typeof Object.defineProperties=="function"?Object.defineProperty:function(t,i,o){return t==Array.prototype||t==Object.prototype||(t[i]=o.value),t};function H(t){t=[typeof globalThis=="object"&&globalThis,t,typeof S=="object"&&S,typeof self=="object"&&self,typeof R=="object"&&R];for(var i=0;i<t.length;++i){var o=t[i];if(o&&o.Math==Math)return o}throw Error("Cannot find global object")}var ee=H(this);function te(t,i){if(i)e:{var o=ee;t=t.split(".");for(var u=0;u<t.length-1;u++){var l=t[u];if(!(l in o))break e;o=o[l]}t=t[t.length-1],u=o[t],i=i(u),i!=u&&i!=null&&V(o,t,{configurable:!0,writable:!0,value:i})}}te("Symbol",function(t){function i(h){if(this instanceof i)throw new TypeError("Symbol is not a constructor");return new o(u+(h||"")+"_"+l++,h)}function o(h,p){this.g=h,V(this,"description",{configurable:!0,writable:!0,value:p})}if(t)return t;o.prototype.toString=function(){return this.g};var u="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",l=0;return i}),te("Symbol.iterator",function(t){if(t)return t;t=Symbol("Symbol.iterator");for(var i="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),o=0;o<i.length;o++){var u=ee[i[o]];typeof u=="function"&&typeof u.prototype[t]!="function"&&V(u.prototype,t,{configurable:!0,writable:!0,value:function(){return me(F(this))}})}return t});function me(t){return t={next:t},t[Symbol.iterator]=function(){return this},t}function A(t){var i=typeof Symbol<"u"&&Symbol.iterator&&t[Symbol.iterator];return i?i.call(t):{next:F(t)}}function q(t){if(!(t instanceof Array)){t=A(t);for(var i,o=[];!(i=t.next()).done;)o.push(i.value);t=o}return t}var ie=typeof Object.create=="function"?Object.create:function(t){function i(){}return i.prototype=t,new i},ve;if(typeof Object.setPrototypeOf=="function")ve=Object.setPrototypeOf;else{var ue;e:{var he={a:!0},re={};try{re.__proto__=he,ue=re.a;break e}catch(t){}ue=!1}ve=ue?function(t,i){if(t.__proto__=i,t.__proto__!==i)throw new TypeError(t+" is not extensible");return t}:null}var ke=ve;function Te(t,i){if(t.prototype=ie(i.prototype),t.prototype.constructor=t,ke)ke(t,i);else for(var o in i)if(o!="prototype")if(Object.defineProperties){var u=Object.getOwnPropertyDescriptor(i,o);u&&Object.defineProperty(t,o,u)}else t[o]=i[o];t.zh=i.prototype}function Le(){this.o=!1,this.l=null,this.h=void 0,this.g=1,this.j=this.m=0,this.u=this.i=null}function Ne(t){if(t.o)throw new TypeError("Generator is already running");t.o=!0}Le.prototype.s=function(t){this.h=t};function Re(t,i){t.i={Ee:i,Le:!0},t.g=t.m||t.j}Le.prototype.return=function(t){this.i={return:t},this.g=this.j};function k(t,i,o){return t.g=o,{value:i}}Le.prototype.A=function(t){this.g=t};function le(t){t.g=0}function ye(t,i,o){t.m=i,o!=null&&(t.j=o)}function He(t){t.m=0,t.j=2}function _e(t,i){t.g=i,t.m=0}function we(t){t.m=0;var i=t.i.Ee;return t.i=null,i}function st(t){t.u=[t.i],t.m=0,t.j=0}function Et(t,i){var o=t.u.splice(0)[0];(o=t.i=t.i||o)?o.Le?t.g=t.m||t.j:o.A!=null&&t.j<o.A?(t.g=o.A,t.i=null):t.g=t.j:t.g=i}function Vn(t){this.g=new Le,this.h=t}function Mn(t,i){Ne(t.g);var o=t.g.l;return o?_n(t,"return"in o?o.return:function(u){return{value:u,done:!0}},i,t.g.return):(t.g.return(i),Bn(t))}function _n(t,i,o,u){try{var l=i.call(t.g.l,o);if(!(l instanceof Object))throw new TypeError("Iterator result "+l+" is not an object");if(!l.done)return t.g.o=!1,l;var h=l.value}catch(p){return t.g.l=null,Re(t.g,p),Bn(t)}return t.g.l=null,u.call(t.g,h),Bn(t)}function Bn(t){for(;t.g.g;)try{var i=t.h(t.g);if(i)return t.g.o=!1,{value:i.value,done:!1}}catch(o){t.g.h=void 0,Re(t.g,o)}if(t.g.o=!1,t.g.i){if(i=t.g.i,t.g.i=null,i.Le)throw i.Ee;return{value:i.return,done:!0}}return{value:void 0,done:!0}}function go(t){this.next=function(i){return Ne(t.g),t.g.l?i=_n(t,t.g.l.next,i,t.g.s):(t.g.s(i),i=Bn(t)),i},this.throw=function(i){return Ne(t.g),t.g.l?i=_n(t,t.g.l.throw,i,t.g.s):(Re(t.g,i),i=Bn(t)),i},this.return=function(i){return Mn(t,i)},this[Symbol.iterator]=function(){return this}}function ya(t){function i(u){return t.next(u)}function o(u){return t.throw(u)}return new Promise(function(u,l){function h(p){p.done?u(p.value):Promise.resolve(p.value).then(i,o).then(h,l)}h(t.next())})}function j(t){return ya(new go(new Vn(t)))}function fn(){for(var t=Number(this),i=[],o=t;o<arguments.length;o++)i[o-t]=arguments[o];return i}te("Promise",function(t){function i(p){this.h=0,this.i=void 0,this.g=[],this.o=!1;var m=this.j();try{p(m.resolve,m.reject)}catch(w){m.reject(w)}}function o(){this.g=null}function u(p){return p instanceof i?p:new i(function(m){m(p)})}if(t)return t;o.prototype.h=function(p){if(this.g==null){this.g=[];var m=this;this.i(function(){m.l()})}this.g.push(p)};var l=ee.setTimeout;o.prototype.i=function(p){l(p,0)},o.prototype.l=function(){for(;this.g&&this.g.length;){var p=this.g;this.g=[];for(var m=0;m<p.length;++m){var w=p[m];p[m]=null;try{w()}catch(C){this.j(C)}}}this.g=null},o.prototype.j=function(p){this.i(function(){throw p})},i.prototype.j=function(){function p(C){return function(_){w||(w=!0,C.call(m,_))}}var m=this,w=!1;return{resolve:p(this.F),reject:p(this.l)}},i.prototype.F=function(p){if(p===this)this.l(new TypeError("A Promise cannot resolve to itself"));else if(p instanceof i)this.H(p);else{e:switch(typeof p){case"object":var m=p!=null;break e;case"function":m=!0;break e;default:m=!1}m?this.D(p):this.m(p)}},i.prototype.D=function(p){var m=void 0;try{m=p.then}catch(w){this.l(w);return}typeof m=="function"?this.J(m,p):this.m(p)},i.prototype.l=function(p){this.s(2,p)},i.prototype.m=function(p){this.s(1,p)},i.prototype.s=function(p,m){if(this.h!=0)throw Error("Cannot settle("+p+", "+m+"): Promise already settled in state"+this.h);this.h=p,this.i=m,this.h===2&&this.G(),this.u()},i.prototype.G=function(){var p=this;l(function(){if(p.B()){var m=ee.console;typeof m<"u"&&m.error(p.i)}},1)},i.prototype.B=function(){if(this.o)return!1;var p=ee.CustomEvent,m=ee.Event,w=ee.dispatchEvent;return typeof w>"u"?!0:(typeof p=="function"?p=new p("unhandledrejection",{cancelable:!0}):typeof m=="function"?p=new m("unhandledrejection",{cancelable:!0}):(p=ee.document.createEvent("CustomEvent"),p.initCustomEvent("unhandledrejection",!1,!0,p)),p.promise=this,p.reason=this.i,w(p))},i.prototype.u=function(){if(this.g!=null){for(var p=0;p<this.g.length;++p)h.h(this.g[p]);this.g=null}};var h=new o;return i.prototype.H=function(p){var m=this.j();p.Lc(m.resolve,m.reject)},i.prototype.J=function(p,m){var w=this.j();try{p.call(m,w.resolve,w.reject)}catch(C){w.reject(C)}},i.prototype.then=function(p,m){function w(b,U){return typeof b=="function"?function(K){try{C(b(K))}catch(Z){_(Z)}}:U}var C,_,D=new i(function(b,U){C=b,_=U});return this.Lc(w(p,C),w(m,_)),D},i.prototype.catch=function(p){return this.then(void 0,p)},i.prototype.Lc=function(p,m){function w(){switch(C.h){case 1:p(C.i);break;case 2:m(C.i);break;default:throw Error("Unexpected state: "+C.h)}}var C=this;this.g==null?h.h(w):this.g.push(w),this.o=!0},i.resolve=u,i.reject=function(p){return new i(function(m,w){w(p)})},i.race=function(p){return new i(function(m,w){for(var C=A(p),_=C.next();!_.done;_=C.next())u(_.value).Lc(m,w)})},i.all=function(p){var m=A(p),w=m.next();return w.done?u([]):new i(function(C,_){function D(K){return function(Z){b[K]=Z,U--,U==0&&C(b)}}var b=[],U=0;do b.push(void 0),U++,u(w.value).Lc(D(b.length-1),_),w=m.next();while(!w.done)})},i});function Ut(t,i){return Object.prototype.hasOwnProperty.call(t,i)}te("WeakMap",function(t){function i(w){if(this.g=(m+=Math.random()+1).toString(),w){w=A(w);for(var C;!(C=w.next()).done;)C=C.value,this.set(C[0],C[1])}}function o(){}function u(w){var C=typeof w;return C==="object"&&w!==null||C==="function"}function l(w){if(!Ut(w,p)){var C=new o;V(w,p,{value:C})}}function h(w){var C=Object[w];C&&(Object[w]=function(_){return _ instanceof o?_:(Object.isExtensible(_)&&l(_),C(_))})}if(function(){if(!t||!Object.seal)return!1;try{var w=Object.seal({}),C=Object.seal({}),_=new t([[w,2],[C,3]]);return _.get(w)!=2||_.get(C)!=3?!1:(_.delete(w),_.set(C,4),!_.has(w)&&_.get(C)==4)}catch(D){return!1}}())return t;var p="$jscomp_hidden_"+Math.random();h("freeze"),h("preventExtensions"),h("seal");var m=0;return i.prototype.set=function(w,C){if(!u(w))throw Error("Invalid WeakMap key");if(l(w),!Ut(w,p))throw Error("WeakMap key fail: "+w);return w[p][this.g]=C,this},i.prototype.get=function(w){return u(w)&&Ut(w,p)?w[p][this.g]:void 0},i.prototype.has=function(w){return u(w)&&Ut(w,p)&&Ut(w[p],this.g)},i.prototype.delete=function(w){return u(w)&&Ut(w,p)&&Ut(w[p],this.g)?delete w[p][this.g]:!1},i}),te("Map",function(t){function i(){var m={};return m.Qa=m.next=m.head=m}function o(m,w){var C=m.g;return me(function(){if(C){for(;C.head!=m.g;)C=C.Qa;for(;C.next!=C.head;)return C=C.next,{done:!1,value:w(C)};C=null}return{done:!0,value:void 0}})}function u(m,w){var C=w&&typeof w;C=="object"||C=="function"?h.has(w)?C=h.get(w):(C=""+ ++p,h.set(w,C)):C="p_"+w;var _=m.h[C];if(_&&Ut(m.h,C))for(m=0;m<_.length;m++){var D=_[m];if(w!==w&&D.key!==D.key||w===D.key)return{id:C,list:_,index:m,fa:D}}return{id:C,list:_,index:-1,fa:void 0}}function l(m){if(this.h={},this.g=i(),this.size=0,m){m=A(m);for(var w;!(w=m.next()).done;)w=w.value,this.set(w[0],w[1])}}if(function(){if(!t||typeof t!="function"||!t.prototype.entries||typeof Object.seal!="function")return!1;try{var m=Object.seal({x:4}),w=new t(A([[m,"s"]]));if(w.get(m)!="s"||w.size!=1||w.get({x:4})||w.set({x:4},"t")!=w||w.size!=2)return!1;var C=w.entries(),_=C.next();return _.done||_.value[0]!=m||_.value[1]!="s"?!1:(_=C.next(),!(_.done||_.value[0].x!=4||_.value[1]!="t"||!C.next().done))}catch(D){return!1}}())return t;var h=new WeakMap;l.prototype.set=function(m,w){m=m===0?0:m;var C=u(this,m);return C.list||(C.list=this.h[C.id]=[]),C.fa?C.fa.value=w:(C.fa={next:this.g,Qa:this.g.Qa,head:this.g,key:m,value:w},C.list.push(C.fa),this.g.Qa.next=C.fa,this.g.Qa=C.fa,this.size++),this},l.prototype.delete=function(m){return m=u(this,m),m.fa&&m.list?(m.list.splice(m.index,1),m.list.length||delete this.h[m.id],m.fa.Qa.next=m.fa.next,m.fa.next.Qa=m.fa.Qa,m.fa.head=null,this.size--,!0):!1},l.prototype.clear=function(){this.h={},this.g=this.g.Qa=i(),this.size=0},l.prototype.has=function(m){return!!u(this,m).fa},l.prototype.get=function(m){return(m=u(this,m).fa)&&m.value},l.prototype.entries=function(){return o(this,function(m){return[m.key,m.value]})},l.prototype.keys=function(){return o(this,function(m){return m.key})},l.prototype.values=function(){return o(this,function(m){return m.value})},l.prototype.forEach=function(m,w){for(var C=this.entries(),_;!(_=C.next()).done;)_=_.value,m.call(w,_[1],_[0],this)},l.prototype[Symbol.iterator]=l.prototype.entries;var p=0;return l}),te("Set",function(t){function i(o){if(this.g=new Map,o){o=A(o);for(var u;!(u=o.next()).done;)this.add(u.value)}this.size=this.g.size}return function(){if(!t||typeof t!="function"||!t.prototype.entries||typeof Object.seal!="function")return!1;try{var o=Object.seal({x:4}),u=new t(A([o]));if(!u.has(o)||u.size!=1||u.add(o)!=u||u.size!=1||u.add({x:4})!=u||u.size!=2)return!1;var l=u.entries(),h=l.next();return h.done||h.value[0]!=o||h.value[1]!=o?!1:(h=l.next(),h.done||h.value[0]==o||h.value[0].x!=4||h.value[1]!=h.value[0]?!1:l.next().done)}catch(p){return!1}}()?t:(i.prototype.add=function(o){return o=o===0?0:o,this.g.set(o,o),this.size=this.g.size,this},i.prototype.delete=function(o){return o=this.g.delete(o),this.size=this.g.size,o},i.prototype.clear=function(){this.g.clear(),this.size=0},i.prototype.has=function(o){return this.g.has(o)},i.prototype.entries=function(){return this.g.entries()},i.prototype.values=function(){return this.g.values()},i.prototype.keys=i.prototype.values,i.prototype[Symbol.iterator]=i.prototype.values,i.prototype.forEach=function(o,u){var l=this;this.g.forEach(function(h){return o.call(u,h,h,l)})},i)});function ti(t,i,o){t instanceof String&&(t=String(t));for(var u=t.length,l=0;l<u;l++){var h=t[l];if(i.call(o,h,l,t))return{Je:l,v:h}}return{Je:-1,v:void 0}}te("Array.prototype.findIndex",function(t){return t||function(i,o){return ti(this,i,o).Je}}),te("Object.is",function(t){return t||function(i,o){return i===o?i!==0||1/i===1/o:i!==i&&o!==o}}),te("Array.prototype.includes",function(t){return t||function(i,o){var u=this;u instanceof String&&(u=String(u));var l=u.length;for(o=o||0,0>o&&(o=Math.max(o+l,0));o<l;o++){var h=u[o];if(h===i||Object.is(h,i))return!0}return!1}});function Tn(t,i,o){if(t==null)throw new TypeError("The 'this' value for String.prototype."+o+" must not be null or undefined");if(i instanceof RegExp)throw new TypeError("First argument to String.prototype."+o+" must not be a regular expression");return t+""}te("String.prototype.includes",function(t){return t||function(i,o){return Tn(this,i,"includes").indexOf(i,o||0)!==-1}}),te("Array.prototype.find",function(t){return t||function(i,o){return ti(this,i,o).v}}),te("String.prototype.startsWith",function(t){return t||function(i,o){var u=Tn(this,i,"startsWith"),l=u.length,h=i.length;o=Math.max(0,Math.min(o|0,u.length));for(var p=0;p<h&&o<l;)if(u[o++]!=i[p++])return!1;return p>=h}});function Di(t,i){t instanceof String&&(t+="");var o=0,u=!1,l={next:function(){if(!u&&o<t.length){var h=o++;return{value:i(h,t[h]),done:!1}}return u=!0,{done:!0,value:void 0}}};return l[Symbol.iterator]=function(){return l},l}te("Array.prototype.keys",function(t){return t||function(){return Di(this,function(i){return i})}});var mo=typeof Object.assign=="function"?Object.assign:function(t,i){for(var o=1;o<arguments.length;o++){var u=arguments[o];if(u)for(var l in u)Ut(u,l)&&(t[l]=u[l])}return t};te("Object.assign",function(t){return t||mo}),te("Array.from",function(t){return t||function(i,o,u){o=o!=null?o:function(m){return m};var l=[],h=typeof Symbol<"u"&&Symbol.iterator&&i[Symbol.iterator];if(typeof h=="function"){i=h.call(i);for(var p=0;!(h=i.next()).done;)l.push(o.call(u,h.value,p++))}else for(h=i.length,p=0;p<h;p++)l.push(o.call(u,i[p],p));return l}}),te("Array.prototype.values",function(t){return t||function(){return Di(this,function(i,o){return o})}}),te("Promise.prototype.finally",function(t){return t||function(i){return this.then(function(o){return Promise.resolve(i()).then(function(){return o})},function(o){return Promise.resolve(i()).then(function(){throw o})})}}),te("Array.prototype.entries",function(t){return t||function(){return Di(this,function(i,o){return[i,o]})}}),te("String.prototype.repeat",function(t){return t||function(i){var o=Tn(this,null,"repeat");if(0>i||1342177279<i)throw new RangeError("Invalid count value");i|=0;for(var u="";i;)i&1&&(u+=o),(i>>>=1)&&(o+=o);return u}}),te("Number.isNaN",function(t){return t||function(i){return typeof i=="number"&&isNaN(i)}}),te("Object.values",function(t){return t||function(i){var o=[],u;for(u in i)Ut(i,u)&&o.push(i[u]);return o}}),te("Math.log2",function(t){return t||function(i){return Math.log(i)/Math.LN2}}),te("Math.trunc",function(t){return t||function(i){if(i=Number(i),isNaN(i)||i===1/0||i===-1/0||i===0)return i;var o=Math.floor(Math.abs(i));return 0>i?-o:o}}),te("Object.entries",function(t){return t||function(i){var o=[],u;for(u in i)Ut(i,u)&&o.push([u,i[u]]);return o}});var bi=this||self;function pe(t,i){t=t.split(".");var o=bi;t[0]in o||typeof o.execScript>"u"||o.execScript("var "+t[0]);for(var u;t.length&&(u=t.shift());)t.length||i===void 0?o[u]&&o[u]!==Object.prototype[u]?o=o[u]:o=o[u]={}:o[u]=i}function Fe(t){this.g=Math.exp(Math.log(.5)/t),this.i=this.h=0}Fe.prototype.sample=function(t,i){var o=Math.pow(this.g,t);i=i*(1-o)+o*this.h,isNaN(i)||(this.h=i,this.i+=t)};function er(t){return t.h/(1-Math.pow(t.g,t.i))}function ni(){this.h=new Fe(2),this.j=new Fe(5),this.g=0,this.i=128e3,this.l=16e3}ni.prototype.configure=function(t){this.i=t.minTotalBytes,this.l=t.minBytes,this.h.g=Math.exp(Math.log(.5)/t.fastHalfLife),this.j.g=Math.exp(Math.log(.5)/t.slowHalfLife)},ni.prototype.sample=function(t,i){if(!(i<this.l)){var o=8e3*i/t;t/=1e3,this.g+=i,this.h.sample(t,o),this.j.sample(t,o)}},ni.prototype.getBandwidthEstimate=function(t){return this.g<this.i?t:Math.min(er(this.h),er(this.j))};function Ko(){}function Rn(){}function ze(){}function Kn(t){var i=fn.apply(1,arguments);Hp.has(t)||(Hp.add(t),ze.apply(Ko,q(i)))}function lu(){}function x4(){}function T4(){}function w4(){}var Hp=new Set;if(S.console&&S.console.log.bind){var tr={},Wp=(tr[1]=console.error.bind(console),tr[2]=console.warn.bind(console),tr[3]=console.info.bind(console),tr[4]=console.log.bind(console),tr[5]=console.debug.bind(console),tr[6]=console.debug.bind(console),tr);ze=Wp[2],Rn=Wp[1]}function ii(t){if(vt.has(t))return vt.get(t);var i=MediaSource.isTypeSupported(t);return vt.set(t,i),i}var vt=new Map;function qp(t,i){return typeof t=="number"&&typeof i=="number"&&isNaN(t)&&isNaN(i)?!0:t===i}function Hr(t,i){i=t.indexOf(i),-1<i&&t.splice(i,1)}function xa(t,i,o){if(o||(o=qp),t.length!=i.length)return!1;i=i.slice();var u={};t=A(t);for(var l=t.next();!l.done;u={md:u.md},l=t.next()){if(u.md=l.value,l=i.findIndex(function(h){return function(p){return o(h.md,p)}}(u)),l==-1)return!1;i[l]=i[i.length-1],i.pop()}return i.length==0}function Es(t,i,o){if(o||(o=qp),t.length!=i.length)return!1;for(var u=0;u<t.length;u++)if(!o(t[u],i[u]))return!1;return!0}function Ht(t,i,o){this.startTime=t,this.direction=Xp,this.endTime=i,this.payload=o,this.region=new Aa,this.position=null,this.positionAlign=zl,this.size=0,this.textAlign=Wr,this.writingMode=Ea,this.lineInterpretation=Yp,this.line=null,this.lineHeight="",this.lineAlign=cu,this.displayAlign=Ho,this.fontSize=this.textStrokeWidth=this.textStrokeColor=this.textShadow=this.border=this.backgroundImage=this.backgroundColor=this.color="",this.fontWeight=Qp,this.fontStyle=se,this.linePadding=this.letterSpacing=this.fontFamily="",this.opacity=1,this.textDecoration=[],this.wrapLine=!0,this.id="",this.nestedCues=[],this.lineBreak=this.isContainer=!1,this.cellResolution={columns:32,rows:15}}Ht.prototype.clone=function(){var t=new Ht(0,0,""),i;for(i in this)t[i]=this[i],t[i]&&t[i].constructor==Array&&(t[i]=t[i].slice());return t};function Pi(t,i){if(t.startTime!=i.startTime||t.endTime!=i.endTime||t.payload!=i.payload)return!1;for(var o in t)if(o!="startTime"&&o!="endTime"&&o!="payload"){if(o=="nestedCues"){if(!Es(t.nestedCues,i.nestedCues,Pi))return!1}else if(o=="region"||o=="cellResolution"){for(var u in t[o])if(t[o][u]!=i[o][u])return!1}else if(Array.isArray(t[o])){if(!Es(t[o],i[o]))return!1}else if(t[o]!=i[o])return!1}return!0}pe("shaka.text.Cue",Ht);var zl="auto";Ht.positionAlign={LEFT:"line-left",RIGHT:"line-right",CENTER:"center",AUTO:zl};var Wr="center",Ta={LEFT:"left",RIGHT:"right",CENTER:Wr,START:"start",END:"end"};Ht.textAlign=Ta;var Ho="after",wa={BEFORE:"before",CENTER:"center",AFTER:Ho};Ht.displayAlign=wa;var Xp="ltr";Ht.direction={HORIZONTAL_LEFT_TO_RIGHT:Xp,HORIZONTAL_RIGHT_TO_LEFT:"rtl"};var Ea="horizontal-tb";Ht.writingMode={HORIZONTAL_TOP_TO_BOTTOM:Ea,VERTICAL_LEFT_TO_RIGHT:"vertical-lr",VERTICAL_RIGHT_TO_LEFT:"vertical-rl"};var Yp=0;Ht.lineInterpretation={LINE_NUMBER:Yp,PERCENTAGE:1};var cu="start",$p={CENTER:"center",START:cu,END:"end"};Ht.lineAlign=$p;var Yv={white:"#FFF",lime:"#0F0",cyan:"#0FF",red:"#F00",yellow:"#FF0",magenta:"#F0F",blue:"#00F",black:"#000"};Ht.defaultTextColor=Yv;var du={bg_white:"#FFF",bg_lime:"#0F0",bg_cyan:"#0FF",bg_red:"#F00",bg_yellow:"#FF0",bg_magenta:"#F0F",bg_blue:"#00F",bg_black:"#000"};Ht.defaultTextBackgroundColor=du;var Qp=400;Ht.fontWeight={NORMAL:Qp,BOLD:700};var se="normal",Nd={NORMAL:se,ITALIC:"italic",OBLIQUE:"oblique"};Ht.fontStyle=Nd,Ht.textDecoration={UNDERLINE:"underline",LINE_THROUGH:"lineThrough",OVERLINE:"overline"};function Aa(){this.id="",this.regionAnchorY=this.regionAnchorX=this.viewportAnchorY=this.viewportAnchorX=0,this.height=this.width=100,this.viewportAnchorUnits=this.widthUnits=this.heightUnits=ri,this.scroll=Ai}pe("shaka.text.CueRegion",Aa);var ri=1;Aa.units={PX:0,PERCENTAGE:ri,LINES:2};var Ai="";Aa.scrollMode={NONE:Ai,UP:"up"};function qr(){}function Xr(t,i){if(!t&&!i)return!0;if(!t||!i||t.byteLength!=i.byteLength)return!1;if(As(t)==As(i)&&(t.byteOffset||0)==(i.byteOffset||0))return!0;var o=$e(t);i=$e(i);for(var u=0;u<t.byteLength;u++)if(o[u]!=i[u])return!1;return!0}function As(t){return t instanceof ArrayBuffer?t:t.buffer}function yt(t){return t instanceof ArrayBuffer?t:t.byteOffset==0&&t.byteLength==t.buffer.byteLength?t.buffer:new Uint8Array(t).buffer}function $e(t,i,o){return o=o===void 0?1/0:o,nr(t,i===void 0?0:i,o,Uint8Array)}function Oi(t,i,o){return o=o===void 0?1/0:o,nr(t,i===void 0?0:i,o,DataView)}function nr(t,i,o,u){var l=(t.byteOffset||0)+t.byteLength;return i=Math.max(0,Math.min((t.byteOffset||0)+i,l)),new u(As(t),i,Math.min(i+Math.max(o,0),l)-i)}pe("shaka.util.BufferUtils",qr),qr.toDataView=Oi,qr.toUint8=$e,qr.toArrayBuffer=yt,qr.equal=Xr;function oe(t,i,o){var u=fn.apply(3,arguments);this.severity=t,this.category=i,this.code=o,this.data=u,this.handled=!1}oe.prototype.toString=function(){return"shaka.util.Error "+JSON.stringify(this,null,"  ")},pe("shaka.util.Error",oe),oe.Severity={RECOVERABLE:1,CRITICAL:2},oe.Category={NETWORK:1,TEXT:2,MEDIA:3,MANIFEST:4,STREAMING:5,DRM:6,PLAYER:7,CAST:8,STORAGE:9,ADS:10},oe.Code={UNSUPPORTED_SCHEME:1e3,BAD_HTTP_STATUS:1001,HTTP_ERROR:1002,TIMEOUT:1003,MALFORMED_DATA_URI:1004,REQUEST_FILTER_ERROR:1006,RESPONSE_FILTER_ERROR:1007,MALFORMED_TEST_URI:1008,UNEXPECTED_TEST_REQUEST:1009,ATTEMPTS_EXHAUSTED:1010,SEGMENT_MISSING:1011,INVALID_TEXT_HEADER:2e3,INVALID_TEXT_CUE:2001,UNABLE_TO_DETECT_ENCODING:2003,BAD_ENCODING:2004,INVALID_XML:2005,INVALID_MP4_TTML:2007,INVALID_MP4_VTT:2008,UNABLE_TO_EXTRACT_CUE_START_TIME:2009,INVALID_MP4_CEA:2010,TEXT_COULD_NOT_GUESS_MIME_TYPE:2011,CANNOT_ADD_EXTERNAL_TEXT_TO_SRC_EQUALS:2012,TEXT_ONLY_WEBVTT_SRC_EQUALS:2013,MISSING_TEXT_PLUGIN:2014,CHAPTERS_TRACK_FAILED:2015,CANNOT_ADD_EXTERNAL_THUMBNAILS_TO_SRC_EQUALS:2016,UNSUPPORTED_EXTERNAL_THUMBNAILS_URI:2017,BUFFER_READ_OUT_OF_BOUNDS:3e3,JS_INTEGER_OVERFLOW:3001,EBML_OVERFLOW:3002,EBML_BAD_FLOATING_POINT_SIZE:3003,MP4_SIDX_WRONG_BOX_TYPE:3004,MP4_SIDX_INVALID_TIMESCALE:3005,MP4_SIDX_TYPE_NOT_SUPPORTED:3006,WEBM_CUES_ELEMENT_MISSING:3007,WEBM_EBML_HEADER_ELEMENT_MISSING:3008,WEBM_SEGMENT_ELEMENT_MISSING:3009,WEBM_INFO_ELEMENT_MISSING:3010,WEBM_DURATION_ELEMENT_MISSING:3011,WEBM_CUE_TRACK_POSITIONS_ELEMENT_MISSING:3012,WEBM_CUE_TIME_ELEMENT_MISSING:3013,MEDIA_SOURCE_OPERATION_FAILED:3014,MEDIA_SOURCE_OPERATION_THREW:3015,VIDEO_ERROR:3016,QUOTA_EXCEEDED_ERROR:3017,TRANSMUXING_FAILED:3018,CONTENT_TRANSFORMATION_FAILED:3019,UNABLE_TO_GUESS_MANIFEST_TYPE:4e3,DASH_INVALID_XML:4001,DASH_NO_SEGMENT_INFO:4002,DASH_EMPTY_ADAPTATION_SET:4003,DASH_EMPTY_PERIOD:4004,DASH_WEBM_MISSING_INIT:4005,DASH_UNSUPPORTED_CONTAINER:4006,DASH_PSSH_BAD_ENCODING:4007,DASH_NO_COMMON_KEY_SYSTEM:4008,DASH_MULTIPLE_KEY_IDS_NOT_SUPPORTED:4009,DASH_CONFLICTING_KEY_IDS:4010,RESTRICTIONS_CANNOT_BE_MET:4012,HLS_PLAYLIST_HEADER_MISSING:4015,INVALID_HLS_TAG:4016,HLS_INVALID_PLAYLIST_HIERARCHY:4017,DASH_DUPLICATE_REPRESENTATION_ID:4018,HLS_MULTIPLE_MEDIA_INIT_SECTIONS_FOUND:4020,HLS_REQUIRED_ATTRIBUTE_MISSING:4023,HLS_REQUIRED_TAG_MISSING:4024,HLS_COULD_NOT_GUESS_CODECS:4025,HLS_KEYFORMATS_NOT_SUPPORTED:4026,DASH_UNSUPPORTED_XLINK_ACTUATE:4027,DASH_XLINK_DEPTH_LIMIT:4028,CONTENT_UNSUPPORTED_BY_BROWSER:4032,CANNOT_ADD_EXTERNAL_TEXT_TO_LIVE_STREAM:4033,NO_VARIANTS:4036,PERIOD_FLATTENING_FAILED:4037,INCONSISTENT_DRM_ACROSS_PERIODS:4038,HLS_VARIABLE_NOT_FOUND:4039,HLS_MSE_ENCRYPTED_MP2T_NOT_SUPPORTED:4040,HLS_MSE_ENCRYPTED_LEGACY_APPLE_MEDIA_KEYS_NOT_SUPPORTED:4041,NO_WEB_CRYPTO_API:4042,HLS_AES_128_INVALID_IV_LENGTH:4043,HLS_AES_128_INVALID_KEY_LENGTH:4044,CANNOT_ADD_EXTERNAL_THUMBNAILS_TO_LIVE_STREAM:4045,STREAMING_ENGINE_STARTUP_INVALID_STATE:5006,NO_RECOGNIZED_KEY_SYSTEMS:6e3,REQUESTED_KEY_SYSTEM_CONFIG_UNAVAILABLE:6001,FAILED_TO_CREATE_CDM:6002,FAILED_TO_ATTACH_TO_VIDEO:6003,INVALID_SERVER_CERTIFICATE:6004,FAILED_TO_CREATE_SESSION:6005,FAILED_TO_GENERATE_LICENSE_REQUEST:6006,LICENSE_REQUEST_FAILED:6007,LICENSE_RESPONSE_REJECTED:6008,ENCRYPTED_CONTENT_WITHOUT_DRM_INFO:6010,NO_LICENSE_SERVER_GIVEN:6012,OFFLINE_SESSION_REMOVED:6013,EXPIRED:6014,SERVER_CERTIFICATE_REQUIRED:6015,INIT_DATA_TRANSFORM_ERROR:6016,SERVER_CERTIFICATE_REQUEST_FAILED:6017,LOAD_INTERRUPTED:7e3,OPERATION_ABORTED:7001,NO_VIDEO_ELEMENT:7002,OBJECT_DESTROYED:7003,CONTENT_NOT_LOADED:7004,CAST_API_UNAVAILABLE:8e3,NO_CAST_RECEIVERS:8001,ALREADY_CASTING:8002,UNEXPECTED_CAST_ERROR:8003,CAST_CANCELED_BY_USER:8004,CAST_CONNECTION_TIMED_OUT:8005,CAST_RECEIVER_APP_UNAVAILABLE:8006,STORAGE_NOT_SUPPORTED:9e3,INDEXED_DB_ERROR:9001,DEPRECATED_OPERATION_ABORTED:9002,REQUESTED_ITEM_NOT_FOUND:9003,MALFORMED_OFFLINE_URI:9004,CANNOT_STORE_LIVE_OFFLINE:9005,NO_INIT_DATA_FOR_OFFLINE:9007,LOCAL_PLAYER_INSTANCE_REQUIRED:9008,NEW_KEY_OPERATION_NOT_SUPPORTED:9011,KEY_NOT_FOUND:9012,MISSING_STORAGE_CELL:9013,STORAGE_LIMIT_REACHED:9014,DOWNLOAD_SIZE_CALLBACK_ERROR:9015,MODIFY_OPERATION_NOT_SUPPORTED:9016,INDEXED_DB_INIT_TIMED_OUT:9017,CS_IMA_SDK_MISSING:1e4,CS_AD_MANAGER_NOT_INITIALIZED:10001,SS_IMA_SDK_MISSING:10002,SS_AD_MANAGER_NOT_INITIALIZED:10003,CURRENT_DAI_REQUEST_NOT_FINISHED:10004};/*
 @license
 Copyright 2008 The Closure Library Authors
 SPDX-License-Identifier: Apache-2.0
*/var Gl=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#(.*))?$");/*
 @license
 Copyright 2006 The Closure Library Authors
 SPDX-License-Identifier: Apache-2.0
*/function Si(t){var i;t instanceof Si?(At(this,t.Ea),this.pb=t.pb,this.Ha=t.Ha,Dd(this,t.Kb),this.qa=t.qa,vo(this,t.g.clone()),this.fb=t.fb):t&&(i=String(t).match(Gl))?(At(this,i[1]||"",!0),this.pb=yo(i[2]||""),this.Ha=yo(i[3]||"",!0),Dd(this,i[4]),this.qa=yo(i[5]||"",!0),vo(this,i[6]||"",!0),this.fb=yo(i[7]||"")):this.g=new Sa(null)}v=Si.prototype,v.Ea="",v.pb="",v.Ha="",v.Kb=null,v.qa="",v.fb="",v.toString=function(){var t=[],i=this.Ea;if(i&&t.push(hu(i,Zp,!0),":"),i=this.Ha){t.push("//");var o=this.pb;o&&t.push(hu(o,Zp,!0),"@"),t.push(encodeURIComponent(i).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),i=this.Kb,i!=null&&t.push(":",String(i))}return(i=this.qa)&&(this.Ha&&i.charAt(0)!="/"&&t.push("/"),t.push(hu(i,i.charAt(0)=="/"?$v:Fn,!0))),(i=this.g.toString())&&t.push("?",i),(i=this.fb)&&t.push("#",hu(i,Jp)),t.join("")},v.resolve=function(t){var i=this.clone();i.Ea==="data"&&(i=new Si);var o=!!t.Ea;o?At(i,t.Ea):o=!!t.pb,o?i.pb=t.pb:o=!!t.Ha,o?i.Ha=t.Ha:o=t.Kb!=null;var u=t.qa;if(o)Dd(i,t.Kb);else if(o=!!t.qa){if(u.charAt(0)!="/")if(this.Ha&&!this.qa)u="/"+u;else{var l=i.qa.lastIndexOf("/");l!=-1&&(u=i.qa.substr(0,l+1)+u)}if(u==".."||u==".")u="";else if(u.indexOf("./")!=-1||u.indexOf("/.")!=-1){l=u.lastIndexOf("/",0)==0,u=u.split("/");for(var h=[],p=0;p<u.length;){var m=u[p++];m=="."?l&&p==u.length&&h.push(""):m==".."?((1<h.length||h.length==1&&h[0]!="")&&h.pop(),l&&p==u.length&&h.push("")):(h.push(m),l=!0)}u=h.join("/")}}return o?i.qa=u:o=t.g.toString()!=="",o?vo(i,t.g.clone()):o=!!t.fb,o&&(i.fb=t.fb),i},v.clone=function(){return new Si(this)};function At(t,i,o){t.Ea=o?yo(i,!0):i,t.Ea&&(t.Ea=t.Ea.replace(/:$/,""))}function Dd(t,i){if(i){if(i=Number(i),isNaN(i)||0>i)throw Error("Bad port number "+i);t.Kb=i}else t.Kb=null}function vo(t,i,o){i instanceof Sa?t.g=i:(o||(i=hu(i,Gw)),t.g=new Sa(i))}function yo(t,i){return t?i?decodeURI(t):decodeURIComponent(t):""}function hu(t,i,o){return t!=null?(t=encodeURI(t).replace(i,bd),o&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function bd(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var Zp=/[#\/\?@]/g,Fn=/[#\?:]/g,$v=/[#\?]/g,Gw=/[#\?@]/g,Jp=/#/g;function Sa(t){this.g=t||null}function Vl(t){if(!t.la&&(t.la={},t.Oc=0,t.g))for(var i=t.g.split("&"),o=0;o<i.length;o++){var u=i[o].indexOf("="),l=null;if(0<=u){var h=i[o].substring(0,u);l=i[o].substring(u+1)}else h=i[o];h=decodeURIComponent(h.replace(/\+/g," ")),l=l||"",t.add(h,decodeURIComponent(l.replace(/\+/g," ")))}}v=Sa.prototype,v.la=null,v.Oc=null,v.add=function(t,i){Vl(this),this.g=null;var o=this.la.hasOwnProperty(t)?this.la[t]:null;return o||(this.la[t]=o=[]),o.push(i),this.Oc++,this},v.set=function(t,i){return Vl(this),this.g=null,this.la.hasOwnProperty(t)?this.la[t]=[i]:this.add(t,i),this},v.toString=function(){if(this.g)return this.g;if(!this.la)return"";var t=[],i;for(i in this.la)for(var o=encodeURIComponent(i),u=this.la[i],l=0;l<u.length;l++){var h=o;u[l]!==""&&(h+="="+encodeURIComponent(u[l])),t.push(h)}return this.g=t.join("&")},v.clone=function(){var t=new Sa;if(t.g=this.g,this.la){var i={},o;for(o in this.la)i[o]=this.la[o].concat();t.la=i,t.Oc=this.Oc}return t};function Kl(t,i){return t.concat(i)}function Hl(){}function Hn(t){return t!=null}function di(t,i){if(i.length==0)return t;var o=i.map(function(u){return new Si(u)});return t.map(function(u){return new Si(u)}).map(function(u){return o.map(function(l){return u.resolve(l)})}).reduce(Kl,[]).map(function(u){return u.toString()})}function Ss(t,i){return{keySystem:t,licenseServerUri:"",distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,serverCertificateUri:"",sessionType:"",initData:i||[],keyIds:new Set}}function Ii(t,i){if(i.length==1)return i[0];if(t=xo(t,i),t!=null)return t;throw new oe(2,4,4025,i)}function xo(t,i){for(var o=A(Qv[t]),u=o.next();!u.done;u=o.next()){u=u.value;for(var l=A(i),h=l.next();!h.done;h=l.next())if(h=h.value,u.test(h.trim()))return h.trim()}return t==Lt?"":null}var Lt="text",xt={va:"video",Hc:"audio",X:Lt,Wb:"image",Gg:"application"},Qv={audio:[/^vorbis$/,/^opus$/,/^flac$/,/^mp4a/,/^[ae]c-3$/,/^ac-4$/,/^dts[cx]$/,/^[du]dts$/],video:[/^avc/,/^hev/,/^hvc/,/^vp0?[89]/,/^av01/,/^dvhe/],text:[/^vtt$/,/^wvtt/,/^stpp/]};function Wt(){var t,i,o=new Promise(function(u,l){t=u,i=l});return o.resolve=t,o.reject=i,o}Wt.prototype.resolve=function(){},Wt.prototype.reject=function(){};function Ui(t){this.h=t,this.g=void 0}Ui.prototype.value=function(){return this.g==null&&(this.g=this.h()),this.g};function fu(t){this.h=t,this.g=null}fu.prototype.N=function(t){var i=this;this.stop();var o=!0,u=null;return this.g=function(){S.clearTimeout(u),o=!1},u=S.setTimeout(function(){o&&i.h()},1e3*t),this},fu.prototype.stop=function(){this.g&&(this.g(),this.g=null)};function ht(t){this.h=t,this.g=null}ht.prototype.Mb=function(){return this.stop(),this.h(),this},ht.prototype.N=function(t){var i=this;return this.stop(),this.g=new fu(function(){i.h()}).N(t),this},ht.prototype.Ca=function(t){var i=this;return this.stop(),this.g=new fu(function(){i.g.N(t),i.h()}).N(t),this},ht.prototype.stop=function(){this.g&&(this.g.stop(),this.g=null)},pe("shaka.util.Timer",ht),ht.prototype.stop=ht.prototype.stop,ht.prototype.tickEvery=ht.prototype.Ca,ht.prototype.tickAfter=ht.prototype.N,ht.prototype.tickNow=ht.prototype.Mb;function Tr(){return!!(S.MediaSource&&MediaSource.isTypeSupported)}function Is(t){return Od().canPlayType(t)!=""}function Wo(){return Qt("Xbox One")}function Cs(){return Qt("Tizen")}function ks(){return Qt("Web0S")&&Qt("Chrome/38.0.2125.122 Safari/537.36")}function Ia(){return!!navigator.vendor&&navigator.vendor.includes("Apple")&&!Cs()&&!Qt("PC=EOS")&&!Qt("VirginMedia")&&!Ca()&&!Qt("AFT")}function Ca(){return Qt("PlayStation 4")}function Pd(){if(!Ia())return null;var t=navigator.userAgent.match(/Version\/(\d+)/);return t||(t=navigator.userAgent.match(/OS (\d+)(?:_\d+)?/))?parseInt(t[1],10):null}function Qt(t){return(navigator.userAgent||"").includes(t)}function Od(){return Yr||(Ud||(Ud=new ht(function(){Yr=null})),(Yr=document.getElementsByTagName("video")[0]||document.getElementsByTagName("audio")[0])||(Yr=document.createElement("video")),Ud.N(1),Yr)}var Ud=null,Yr=null;function hi(){}function an(t){if(!t)return"";if(t=$e(t),t[0]==239&&t[1]==187&&t[2]==191&&(t=t.subarray(3)),S.TextDecoder&&!Ca())return t=new TextDecoder().decode(t),t.includes("�")&&Rn('Decoded string contains an "unknown character" codepoint.  That probably means the UTF8 encoding was incorrect!'),t;for(var i="",o=0;o<t.length;++o){var u=65533;if(t[o]&128?t.length>=o+2&&(t[o]&224)==192&&(t[o+1]&192)==128?(u=(t[o]&31)<<6|t[o+1]&63,o+=1):t.length>=o+3&&(t[o]&240)==224&&(t[o+1]&192)==128&&(t[o+2]&192)==128?(u=(t[o]&15)<<12|(t[o+1]&63)<<6|t[o+2]&63,o+=2):t.length>=o+4&&(t[o]&241)==240&&(t[o+1]&192)==128&&(t[o+2]&192)==128&&(t[o+3]&192)==128&&(u=(t[o]&7)<<18|(t[o+1]&63)<<12|(t[o+2]&63)<<6|t[o+3]&63,o+=3):u=t[o],65535>=u)i+=String.fromCharCode(u);else{u-=65536;var l=u&1023;i+=String.fromCharCode(55296+(u>>10)),i+=String.fromCharCode(56320+l)}}return i}function wr(t,i,o){if(!t)return"";if(!o&&t.byteLength%2!=0)throw new oe(2,2,2004);o=Math.floor(t.byteLength/2);var u=new Uint16Array(o);t=Oi(t);for(var l=0;l<o;l++)u[l]=t.getUint16(2*l,i);return Tt.value()(u)}function ir(t){function i(u){return o.byteLength<=u||32<=o[u]&&126>=o[u]}if(!t)return"";var o=$e(t);if(o[0]==239&&o[1]==187&&o[2]==191)return an(o);if(o[0]==254&&o[1]==255)return wr(o.subarray(2),!1);if(o[0]==255&&o[1]==254)return wr(o.subarray(2),!0);if(o[0]==0&&o[2]==0)return wr(t,!1);if(o[1]==0&&o[3]==0)return wr(t,!0);if(i(0)&&i(1)&&i(2)&&i(3))return an(t);throw new oe(2,2,2003)}function To(t){if(S.TextEncoder&&!Ca()){var i=new TextEncoder;return yt(i.encode(t))}t=encodeURIComponent(t),t=unescape(t),i=new Uint8Array(t.length);for(var o=0;o<t.length;o++)i[o]=t[o].charCodeAt(0);return yt(i)}function ji(t,i){for(var o=new ArrayBuffer(2*t.length),u=new DataView(o),l=0;l<t.length;++l)u.setUint16(2*l,t.charCodeAt(l),i);return o}pe("shaka.util.StringUtils",hi),hi.resetFromCharCode=function(){Tt.g=void 0},hi.toUTF16=ji,hi.toUTF8=To,hi.fromBytesAutoDetect=ir,hi.fromUTF16=wr,hi.fromUTF8=an;var Tt=new Ui(function(){function t(o){try{var u=new Uint8Array(o);return 0<String.fromCharCode.apply(null,u).length}catch(l){return!1}}for(var i={Ua:65536};0<i.Ua;i={Ua:i.Ua},i.Ua/=2)if(t(i.Ua))return function(o){return function(u){for(var l="",h=0;h<u.length;h+=o.Ua)l+=String.fromCharCode.apply(null,u.subarray(h,h+o.Ua));return l}}(i);return null});function Ln(){}function eg(t){return t=$e(t),t=Tt.value()(t),btoa(t)}function bt(t,i){return i=i==null?!0:i,t=eg(t).replace(/\+/g,"-").replace(/\//g,"_"),i?t:t.replace(/[=]*$/,"")}function Bi(t){t=S.atob(t.replace(/-/g,"+").replace(/_/g,"/"));for(var i=new Uint8Array(t.length),o=0;o<t.length;++o)i[o]=t.charCodeAt(o);return i}function qo(t){for(var i=t.length/2,o=new Uint8Array(i),u=0;u<i;u++)o[u]=S.parseInt(t.substr(2*u,2),16);return o}function Qe(t){var i=$e(t);t="",i=A(i);for(var o=i.next();!o.done;o=i.next())o=o.value,o=o.toString(16),o.length==1&&(o="0"+o),t+=o;return t}function Ci(){for(var t=fn.apply(0,arguments),i=0,o=A(t),u=o.next();!u.done;u=o.next())i+=u.value.byteLength;for(i=new Uint8Array(i),o=0,t=A(t),u=t.next();!u.done;u=t.next())u=u.value,i.set($e(u),o),o+=u.byteLength;return i}pe("shaka.util.Uint8ArrayUtils",Ln),Ln.concat=Ci,Ln.toHex=Qe,Ln.fromHex=qo,Ln.fromBase64=Bi,Ln.toBase64=bt,Ln.toStandardBase64=eg;function Xo(){}pe("shaka.dependencies",Xo),Xo.has=function(t){return Yo.has(t)},Xo.add=function(t,i){if(!ka[t])throw Error(t+" is not supported");Yo.set(t,function(){return i})};var ka={muxjs:"muxjs"};Xo.Allowed=ka;var Yo=new Map([["muxjs",function(){return S.muxjs}]]);function tg(t){var i=this;this.o=t,this.m=Yo.get("muxjs")(),this.g=new this.m.mp4.Transmuxer({keepOriginalTimestamps:!0}),this.h=null,this.l=[],this.i=[],this.j=!1,this.g.on("data",function(o){i.i=o.captions,i.l.push(Ci(o.initSegment,o.data))}),this.g.on("done",function(){var o={data:Ci.apply(Ln,q(i.l)),captions:i.i};i.h.resolve(o),i.j=!1})}tg.prototype.destroy=function(){return this.g.dispose(),this.g=null,Promise.resolve()};function pu(t,i){var o=Ma(t),u=t.toLowerCase().split(";")[0]=="audio/aac";return!Yo.get("muxjs")()||!o&&!u?!1:u?ii('audio/mp4; codecs="mp4a.40.2"'):i?ii(zt(i,t)):(i=zt("audio",t),t=zt("video",t),ii(i)||ii(t))}function Ma(t){return t.toLowerCase().split(";")[0].split("/")[1]=="mp2t"}function jd(t,i){return i.toLowerCase().split(";")[0]=="audio/aac"?'audio/mp4; codecs="mp4a.40.2"':Ma(i)?zt(t,i):i}function zt(t,i){if(i=i.replace(/mp2t/i,"mp4"),t=="audio"&&(i=i.replace("video","audio")),t=/avc1\.(66|77|100)\.(\d+)/.exec(i)){var o="avc1.",u=t[1],l=Number(t[2]);o=(u=="66"?o+"4200":u=="77"?o+"4d00":o+"6400")+(l>>4).toString(16),o+=(l&15).toString(16),i=i.replace(t[0],o)}return i}function Zv(t,i){return t.j=!0,t.h=new Wt,t.l=[],t.i=[],i=$e(i),t.g.push(i),t.g.flush(),t.j&&t.h.reject(new oe(2,3,3018)),t.h}function Bd(){}function ki(t,i){return i&&(t+='; codecs="'+i+'"'),t}function Er(t,i,o){return t=ki(t,i),pu(t,o)?jd(o,t):o=="audio"?t.replace("video","audio"):t}function Bt(t){var i=$r(t);switch(t=i[0],i=i[1].toLowerCase(),!0){case(t==="mp4a"&&i==="69"):case(t==="mp4a"&&i==="6b"):return"mp3";case(t==="mp4a"&&i==="66"):case(t==="mp4a"&&i==="67"):case(t==="mp4a"&&i==="68"):case(t==="mp4a"&&i==="40.2"):case(t==="mp4a"&&i==="40.02"):case(t==="mp4a"&&i==="40.5"):case(t==="mp4a"&&i==="40.05"):case(t==="mp4a"&&i==="40.29"):case(t==="mp4a"&&i==="40.42"):return"aac";case(t==="mp4a"&&i==="a5"):return"ac-3";case(t==="mp4a"&&i==="a6"):return"ec-3";case(t==="mp4a"&&i==="b2"):return"dtsx";case(t==="mp4a"&&i==="a9"):return"dtsc";case t==="avc1":case t==="avc3":return"avc";case t==="hvc1":case t==="hev1":return"hevc";case t==="dvh1":case t==="dvhe":return"dovi"}return t}function $o(t){return t=t.split(/ *; */),t.shift(),(t=t.find(function(i){return i.startsWith("codecs=")}))?t.split("=")[1].replace(/^"|"$/g,""):""}function $r(t){t=t.split(".");var i=t[0];return t.shift(),[i,t.join(".")]}pe("shaka.util.MimeUtils",Bd),Bd.getFullType=ki,new Map().set("codecs","codecs").set("frameRate","framerate").set("bandwidth","bitrate").set("width","width").set("height","height").set("channelsCount","channels");function fi(t){this.j=null,this.i=t,this.u=!1,this.l=this.s=0,this.m=1/0,this.h=this.g=null,this.B="",this.o=new Map}function _a(t){return!!(vn[t]||t=="application/cea-608"||t=="application/cea-708")}fi.prototype.destroy=function(){return this.i=this.j=null,this.o.clear(),Promise.resolve()};function ng(t,i,o,u){var l,h,p,m;return j(function(w){if(w.g==1)return k(w,Promise.resolve(),2);if(!t.j||!t.i)return w.return();if(o==null||u==null)return t.j.parseInit($e(i)),w.return();l=t.u?o:t.s,h={periodStart:t.s,segmentStart:o,segmentEnd:u,vttOffset:l},p=t.j.parseMedia($e(i),h),m=p.filter(function(C){return C.startTime>=t.l&&C.startTime<t.m}),t.i.append(m),t.g==null&&(t.g=Math.max(o,t.l)),t.h=Math.min(u,t.m),le(w)})}fi.prototype.remove=function(t,i){var o=this;return j(function(u){if(u.g==1)return k(u,Promise.resolve(),2);!o.i||!o.i.remove(t,i)||o.g==null||i<=o.g||t>=o.h||(t<=o.g&&i>=o.h?o.g=o.h=null:t<=o.g&&i<o.h?o.g=i:t>o.g&&i>=o.h&&(o.h=t)),le(u)})};function Ms(t,i,o){t.l=i,t.m=o}function ig(t,i,o){if(t.B=i,i=t.o.get(i))for(var u=A(i.keys()),l=u.next();!l.done;l=u.next())(l=i.get(l.value).filter(function(h){return h.endTime<=o}))&&t.i.append(l)}function gu(t){var i=[];t=A(t);for(var o=t.next();!o.done;o=t.next())o=o.value,i.push({stream:o.stream,cue:new Ht(o.startTime,o.endTime,o.text)});return i}function wo(t,i,o){i.startTime+=o,i.endTime+=o,i=A(i.nestedCues);for(var u=i.next();!u.done;u=i.next())wo(t,u.value,o)}function Ra(t,i,o,u,l){var h=o+" "+u,p=new Map;i=A(i);for(var m=i.next();!m.done;m=i.next()){var w=m.value;m=w.stream,w=w.cue,p.has(m)||p.set(m,new Map),p.get(m).has(h)||p.get(m).set(h,[]),wo(t,w,l),w.startTime>=t.l&&w.startTime<t.m&&(p.get(m).get(h).push(w),m==t.B&&t.i.append([w]))}for(l=A(p.keys()),h=l.next();!h.done;h=l.next())for(h=h.value,t.o.has(h)||t.o.set(h,new Map),i=A(p.get(h).keys()),m=i.next();!m.done;m=i.next())m=m.value,w=p.get(h).get(m),t.o.get(h).set(m,w);t.g=t.g==null?Math.max(o,t.l):Math.min(t.g,Math.max(o,t.l)),t.h=Math.max(t.h,Math.min(u,t.m))}pe("shaka.text.TextEngine",fi),fi.prototype.destroy=fi.prototype.destroy,fi.findParser=function(t){return vn[t]},fi.unregisterParser=function(t){delete vn[t]},fi.registerParser=function(t,i){vn[t]=i};var vn={};function pi(){}function mu(t,i){return t=Mt(t),i=Mt(i),t.split("-")[0]==i.split("-")[0]}function La(t,i){return t=Mt(t),i=Mt(i),t=t.split("-"),i=i.split("-"),t[0]==i[0]&&t.length==1&&i.length==2}function Na(t,i){return t=Mt(t),i=Mt(i),t=t.split("-"),i=i.split("-"),t.length==2&&i.length==2&&t[0]==i[0]}function Mt(t){var i=t.split("-");return t=i[0]||"",i=i[1]||"",t=t.toLowerCase(),t=Jv.get(t)||t,(i=i.toUpperCase())?t+"-"+i:t}function Qo(t,i){return t=Mt(t),i=Mt(i),i==t?4:La(i,t)?3:Na(i,t)?2:La(t,i)?1:0}function Fd(t){var i=t.indexOf("-");return t=0<=i?t.substring(0,i):t,t=t.toLowerCase(),t=Jv.get(t)||t}function zd(t){return t.language?Mt(t.language):t.audio&&t.audio.language?Mt(t.audio.language):t.video&&t.video.language?Mt(t.video.language):"und"}function vu(t,i){t=Mt(t);var o=new Set,u=A(i);for(i=u.next();!i.done;i=u.next())o.add(Mt(i.value));for(u=A(o),i=u.next();!i.done;i=u.next())if(i=i.value,i==t)return i;for(u=A(o),i=u.next();!i.done;i=u.next())if(i=i.value,La(i,t))return i;for(u=A(o),i=u.next();!i.done;i=u.next())if(i=i.value,Na(i,t))return i;for(o=A(o),i=o.next();!i.done;i=o.next())if(i=i.value,La(t,i))return i;return null}pe("shaka.util.LanguageUtils",pi),pi.findClosestLocale=vu,pi.getLocaleForVariant=zd,pi.getLocaleForText=function(t){return Mt(t.language||"und")},pi.getBase=Fd,pi.relatedness=Qo,pi.areSiblings=function(t,i){var o=Fd(t),u=Fd(i);return t!=o&&i!=u&&o==u},pi.normalize=Mt,pi.isSiblingOf=Na,pi.isParentOf=La,pi.areLanguageCompatible=mu,pi.areLocaleCompatible=function(t,i){return t=Mt(t),i=Mt(i),t==i};var Jv=new Map([["aar","aa"],["abk","ab"],["afr","af"],["aka","ak"],["alb","sq"],["amh","am"],["ara","ar"],["arg","an"],["arm","hy"],["asm","as"],["ava","av"],["ave","ae"],["aym","ay"],["aze","az"],["bak","ba"],["bam","bm"],["baq","eu"],["bel","be"],["ben","bn"],["bih","bh"],["bis","bi"],["bod","bo"],["bos","bs"],["bre","br"],["bul","bg"],["bur","my"],["cat","ca"],["ces","cs"],["cha","ch"],["che","ce"],["chi","zh"],["chu","cu"],["chv","cv"],["cor","kw"],["cos","co"],["cre","cr"],["cym","cy"],["cze","cs"],["dan","da"],["deu","de"],["div","dv"],["dut","nl"],["dzo","dz"],["ell","el"],["eng","en"],["epo","eo"],["est","et"],["eus","eu"],["ewe","ee"],["fao","fo"],["fas","fa"],["fij","fj"],["fin","fi"],["fra","fr"],["fre","fr"],["fry","fy"],["ful","ff"],["geo","ka"],["ger","de"],["gla","gd"],["gle","ga"],["glg","gl"],["glv","gv"],["gre","el"],["grn","gn"],["guj","gu"],["hat","ht"],["hau","ha"],["heb","he"],["her","hz"],["hin","hi"],["hmo","ho"],["hrv","hr"],["hun","hu"],["hye","hy"],["ibo","ig"],["ice","is"],["ido","io"],["iii","ii"],["iku","iu"],["ile","ie"],["ina","ia"],["ind","id"],["ipk","ik"],["isl","is"],["ita","it"],["jav","jv"],["jpn","ja"],["kal","kl"],["kan","kn"],["kas","ks"],["kat","ka"],["kau","kr"],["kaz","kk"],["khm","km"],["kik","ki"],["kin","rw"],["kir","ky"],["kom","kv"],["kon","kg"],["kor","ko"],["kua","kj"],["kur","ku"],["lao","lo"],["lat","la"],["lav","lv"],["lim","li"],["lin","ln"],["lit","lt"],["ltz","lb"],["lub","lu"],["lug","lg"],["mac","mk"],["mah","mh"],["mal","ml"],["mao","mi"],["mar","mr"],["may","ms"],["mkd","mk"],["mlg","mg"],["mlt","mt"],["mon","mn"],["mri","mi"],["msa","ms"],["mya","my"],["nau","na"],["nav","nv"],["nbl","nr"],["nde","nd"],["ndo","ng"],["nep","ne"],["nld","nl"],["nno","nn"],["nob","nb"],["nor","no"],["nya","ny"],["oci","oc"],["oji","oj"],["ori","or"],["orm","om"],["oss","os"],["pan","pa"],["per","fa"],["pli","pi"],["pol","pl"],["por","pt"],["pus","ps"],["que","qu"],["roh","rm"],["ron","ro"],["rum","ro"],["run","rn"],["rus","ru"],["sag","sg"],["san","sa"],["sin","si"],["slk","sk"],["slo","sk"],["slv","sl"],["sme","se"],["smo","sm"],["sna","sn"],["snd","sd"],["som","so"],["sot","st"],["spa","es"],["sqi","sq"],["srd","sc"],["srp","sr"],["ssw","ss"],["sun","su"],["swa","sw"],["swe","sv"],["tah","ty"],["tam","ta"],["tat","tt"],["tel","te"],["tgk","tg"],["tgl","tl"],["tha","th"],["tib","bo"],["tir","ti"],["ton","to"],["tsn","tn"],["tso","ts"],["tuk","tk"],["tur","tr"],["twi","tw"],["uig","ug"],["ukr","uk"],["urd","ur"],["uzb","uz"],["ven","ve"],["vie","vi"],["vol","vo"],["wel","cy"],["wln","wa"],["wol","wo"],["xho","xh"],["yid","yi"],["yor","yo"],["zha","za"],["zho","zh"],["zul","zu"]]);function yu(){this.g={}}v=yu.prototype,v.push=function(t,i){this.g.hasOwnProperty(t)?this.g[t].push(i):this.g[t]=[i]},v.get=function(t){return(t=this.g[t])?t.slice():null},v.remove=function(t,i){t in this.g&&(this.g[t]=this.g[t].filter(function(o){return o!=i}),this.g[t].length==0&&delete this.g[t])},v.forEach=function(t){for(var i in this.g)t(i,this.g[i])},v.size=function(){return Object.keys(this.g).length},v.keys=function(){return Object.keys(this.g)};function Qr(t,i,o,u,l){var h=t.variants;(i.length||o.length)&&(h=ey(h,i,o)),h=cg(h,u),i=Da(h),i=_s(i);var p=Wl(i,l);t.variants=t.variants.filter(function(m){return ty(m)==p})}function Da(t){var i=new yu;t=A(t);for(var o=t.next();!o.done;o=t.next()){o=o.value;var u=ty(o);i.push(u,o)}return i}function _s(t){var i=0,o=new Map,u=t.size();return t.forEach(function(l,h){h=A(h);for(var p=h.next();!p.done;p=h.next()){p=p.value;var m=p.video;if(m&&m.width&&m.height){m=m.width*m.height*(m.frameRate||1),o.has(m)||o.set(m,new yu);var w=o.get(m);w.push(l,p),w.size()===u&&(i=Math.max(i,m))}}}),i?o.get(i):t}function ey(t,i,o){var u={};i=A(i);for(var l=i.next();!l.done;u={xd:u.xd},l=i.next())if(u.xd=l.value,l=t.filter(function(h){return function(p){return p.video&&p.video.codecs.startsWith(h.xd)}}(u)),l.length){t=l;break}for(u={},o=A(o),i=o.next();!i.done;u={jd:u.jd},i=o.next())if(u.jd=i.value,i=t.filter(function(h){return function(p){return p.audio&&p.audio.codecs.startsWith(h.jd)}}(u)),i.length){t=i;break}return t}function Wl(t,i){i=A(i);for(var o=i.next();!o.done;o=i.next())if(o=o.value,o==Wd||o==fg){if(t=Zo(t,o),t.size()==1)return t.keys()[0]}else if(o==pg)break;return Gd(t)}function Zo(t,i){var o=0,u=new yu;return t.forEach(function(l,h){for(var p=0,m=0,w=A(h),C=w.next();!C.done;C=w.next())C=C.value,C.decodingInfos.length&&(p+=C.decodingInfos[0][i]?1:0,m++);p/=m,p>o?(u.g={},u.push(l,h),o=p):p==o&&u.push(l,h)}),u}function Gd(t){var i="",o=1/0;return t.forEach(function(u,l){var h=0,p=0;l=A(l);for(var m=l.next();!m.done;m=l.next())h+=m.value.bandwidth||0,++p;h/=p,h<o&&(i=u,o=h)}),i}function ty(t){var i="";t.video&&(i=Bt(t.video.codecs));var o="";return t.audio&&(o=Bt(t.audio.codecs)),i+"-"+o}function Vw(t,i,o){t.variants=t.variants.filter(function(u){return Vd(u,i,o)})}function Vd(t,i,o){function u(h,p,m){return h>=p&&h<=m}var l=t.video;if(t.disabledUntilTime!=0){if(t.disabledUntilTime>Date.now()/1e3)return!1;t.disabledUntilTime=0}return!(l&&l.width&&l.height&&(!u(l.width,i.minWidth,Math.min(i.maxWidth,o.width))||!u(l.height,i.minHeight,Math.min(i.maxHeight,o.height))||!u(l.width*l.height,i.minPixels,i.maxPixels))||t&&t.video&&t.video.frameRate&&!u(t.video.frameRate,i.minFrameRate,i.maxFrameRate)||!u(t.bandwidth,i.minBandwidth,i.maxBandwidth))}function rg(t,i,o){var u=!1;t=A(t);for(var l=t.next();!l.done;l=t.next()){l=l.value;var h=l.allowedByApplication;l.allowedByApplication=Vd(l,i,o),h!=l.allowedByApplication&&(u=!0)}return u}function ny(t,i){return j(function(o){return o.g==1?k(o,og(i,0<i.offlineSessionIds.length),2):(ry(t,i),Kw(i),k(o,Hw(i),0))})}function og(t,i){return j(function(o){if(o.g==1)return k(o,Nn(t.variants,i,!1),2);t.variants=t.variants.filter(function(u){var l=u.video;if(l){var h=Kd(l.codecs);if(l.codecs.includes(",")){var p=l.codecs.split(",");h=Ii("video",p),h=Kd(h),p=Ii("audio",p),p=sg(p);var m=Er(l.mimeType,p,"audio");if(!ii(m))return!1;h=[h,p].join()}if(p=Er(l.mimeType,h,"video"),!ii(p))return!1;l.codecs=h}if(h=u.audio){if(p=sg(h.codecs),m=Er(h.mimeType,p,"audio"),!ii(m))return!1;h.codecs=p}return Wo()&&l&&(l.width&&1920<l.width||l.height&&1080<l.height)&&(l.codecs.includes("avc1.")||l.codecs.includes("avc3."))?(uy(u),!1):((l=u.decodingInfos.some(function(w){return w.supported}))||(uy(u),void 0),l)}),le(o)})}function Nn(t,i,o){var u,l,h,p,m,w,C,_,D,b;return j(function(U){if(t.some(function(K){return K.decodingInfos.length}))return U.return();for(u=navigator.mediaCapabilities,l=[],h=function(K,Z){var B;return j(function(X){if(X.g==1)return ye(X,2),k(X,u.decodingInfo(Z),4);if(X.g!=2)return B=X.h,K.decodingInfos.push(B),_e(X,0);we(X),JSON.stringify(Z),le(X)})},p=A(t),m=p.next();!m.done;m=p.next())for(w=m.value,C=iy(w,i,o),_=A(C),D=_.next();!D.done;D=_.next())b=D.value,l.push(h(w,b));return k(U,Promise.all(l),0)})}function iy(t,i,o){var u=t.audio,l=t.video;if(o={type:o?"file":"media-source"},l){var h=l.codecs;if(l.codecs.includes(",")){var p=l.codecs.split(",");h=Ii("video",p),h=Kd(h),p=Ii("audio",p),p=Er(l.mimeType,p,"audio"),o.audio={contentType:p,channels:2,bitrate:t.bandwidth||1,samplerate:1,spatialRendering:!1}}if(h=Kd(h),h=Er(l.mimeType,h,"video"),o.video={contentType:h,width:l.width||64,height:l.height||64,bitrate:l.bandwidth||t.bandwidth||1,framerate:l.frameRate||1},l.hdr)switch(l.hdr){case"SDR":o.video.transferFunction="srgb";break;case"PQ":o.video.transferFunction="pq";break;case"HLG":o.video.transferFunction="hlg"}}if(u&&(h=sg(u.codecs),h=Er(u.mimeType,h,"audio"),o.audio={contentType:h,channels:u.channelsCount||2,bitrate:u.bandwidth||t.bandwidth||1,samplerate:u.audioSamplingRate||1,spatialRendering:u.spatialAudio}),p=(t.video?t.video.drmInfos:[]).concat(t.audio?t.audio.drmInfos:[]),!p.length)return[o];t=[],h=new Map,p=A(p);for(var m=p.next();!m.done;m=p.next()){var w=m.value;h.get(w.keySystem)||h.set(w.keySystem,[]),h.get(w.keySystem).push(w)}p=i?"required":"optional",i=i?["persistent-license"]:["temporary"],w=A(h.keys());for(var C=w.next();!C.done;C=w.next()){var _=C.value;C=Object.assign({},o);var D=h.get(_);for(_={keySystem:_,initDataType:"cenc",persistentState:p,distinctiveIdentifier:"optional",sessionTypes:i},D=A(D),m=D.next();!m.done;m=D.next()){if(m=m.value,m.initData&&m.initData.length){for(var b=new Set,U=A(m.initData),K=U.next();!K.done;K=U.next())b.add(K.value.initDataType);_.initDataType=m.initData[0].initDataType}m.distinctiveIdentifierRequired&&(_.distinctiveIdentifier="required"),m.persistentStateRequired&&(_.persistentState="required"),m.sessionType&&(_.sessionTypes=[m.sessionType]),u&&(_.audio?_.audio.robustness=_.audio.robustness||m.audioRobustness:_.audio={robustness:m.audioRobustness}),l&&(_.video?_.video.robustness=_.video.robustness||m.videoRobustness:_.video={robustness:m.videoRobustness})}C.keySystemConfiguration=_,t.push(C)}return t}function sg(t){return Cs()&&t.toLowerCase()=="ac-3"?"ec-3":t}function Kd(t){if(t.includes("avc1")){var i=t.split(".");if(i.length==3)return t=i.shift()+".",t+=parseInt(i.shift(),10).toString(16),t+=("000"+parseInt(i.shift(),10).toString(16)).slice(-4)}else if(t=="vp9")return"vp09.00.41.08";return t}function ry(t,i){i.variants=i.variants.filter(function(o){var u=o.audio;return o=o.video,!(u&&t&&t.audio&&!ug(u,t.audio)||o&&t&&t.video&&!ug(o,t.video))})}function Kw(t){t.textStreams=t.textStreams.filter(function(i){return _a(ki(i.mimeType,i.codecs))})}function Hw(t){var i,o,u,l,h,p,m;return j(function(w){switch(w.g){case 1:i=[],o=A(t.imageStreams),u=o.next();case 2:if(u.done){w.A(4);break}if(l=u.value,h=l.mimeType,Yl.has(h)){w.A(5);break}if(p=qd.get(h),!p){Yl.set(h,!1),w.A(5);break}return k(w,Ww(p),7);case 7:m=w.h,Yl.set(h,m);case 5:Yl.get(h)&&i.push(l),u=o.next(),w.A(2);break;case 4:t.imageStreams=i,le(w)}})}function Ww(t){return new Promise(function(i){var o=new Image;o.src=t,"decode"in o?o.decode().then(function(){i(!0)}).catch(function(){i(!1)}):o.onload=o.onerror=function(){i(o.height===2)}})}function ug(t,i){return!(t.mimeType!=i.mimeType||t.codecs.split(".")[0]!=i.codecs.split(".")[0])}function xu(t){var i=t.audio,o=t.video,u=i?i.mimeType:null,l=o?o.mimeType:null,h=i?i.codecs:null,p=o?o.codecs:null,m=[];p&&m.push(p),h&&m.push(h);var w=[];o&&w.push(o.mimeType),i&&w.push(i.mimeType),w=w[0]||null;var C=[];i&&C.push(i.kind),o&&C.push(o.kind),C=C[0]||null;var _=new Set;if(i)for(var D=A(i.roles),b=D.next();!b.done;b=D.next())_.add(b.value);if(o)for(D=A(o.roles),b=D.next();!b.done;b=D.next())_.add(b.value);return t={id:t.id,active:!1,type:"variant",bandwidth:t.bandwidth,language:t.language,label:null,kind:C,width:null,height:null,frameRate:null,pixelAspectRatio:null,hdr:null,mimeType:w,audioMimeType:u,videoMimeType:l,codecs:m.join(", "),audioCodec:h,videoCodec:p,primary:t.primary,roles:Array.from(_),audioRoles:null,forced:!1,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null,originalImageId:null},o&&(t.videoId=o.id,t.originalVideoId=o.originalId,t.width=o.width||null,t.height=o.height||null,t.frameRate=o.frameRate||null,t.pixelAspectRatio=o.pixelAspectRatio||null,t.videoBandwidth=o.bandwidth||null),i&&(t.audioId=i.id,t.originalAudioId=i.originalId,t.channelsCount=i.channelsCount,t.audioSamplingRate=i.audioSamplingRate,t.audioBandwidth=i.bandwidth||null,t.spatialAudio=i.spatialAudio,t.label=i.label,t.audioRoles=i.roles),t}function ba(t){return{id:t.id,active:!1,type:Lt,bandwidth:0,language:t.language,label:t.label,kind:t.kind||null,width:null,height:null,frameRate:null,pixelAspectRatio:null,hdr:null,mimeType:t.mimeType,audioMimeType:null,videoMimeType:null,codecs:t.codecs||null,audioCodec:null,videoCodec:null,primary:t.primary,roles:t.roles,audioRoles:null,forced:t.forced,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:t.originalId,originalImageId:null}}function ql(t){var i=t.width||null,o=t.height||null,u=null;t.segmentIndex&&(u=t.segmentIndex.get(0));var l=t.tilesLayout;return u&&(l=u.tilesLayout||l),l&&i!=null&&(i/=Number(l.split("x")[0])),l&&o!=null&&(o/=Number(l.split("x")[1])),{id:t.id,active:!1,type:"image",bandwidth:t.bandwidth||0,language:"",label:null,kind:null,width:i,height:o,frameRate:null,pixelAspectRatio:null,hdr:null,mimeType:t.mimeType,audioMimeType:null,videoMimeType:null,codecs:null,audioCodec:null,videoCodec:null,primary:!1,roles:[],audioRoles:null,forced:!1,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:l||null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null,originalImageId:t.originalId}}function ag(t){return t.__shaka_id||(t.__shaka_id=wu++),t.__shaka_id}function lg(t){var i=oy(t);return i.active=t.mode!="disabled",i.type="text",i.originalTextId=t.id,t.kind=="captions"&&(i.mimeType="application/cea-608"),t.kind&&(i.roles=[t.kind]),t.kind=="forced"&&(i.forced=!0),i}function Xl(t){var i=oy(t);return i.active=t.enabled,i.type="variant",i.originalAudioId=t.id,t.kind=="main"&&(i.primary=!0),t.kind&&(i.roles=[t.kind],i.audioRoles=[t.kind],i.label=t.label),i}function oy(t){return{id:ag(t),active:!1,type:"",bandwidth:0,language:Mt(t.language),label:t.label,kind:t.kind,width:null,height:null,frameRate:null,pixelAspectRatio:null,hdr:null,mimeType:null,audioMimeType:null,videoMimeType:null,codecs:null,audioCodec:null,videoCodec:null,primary:!1,roles:[],forced:!1,audioRoles:null,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null,originalImageId:null}}function Tu(t){return t.allowedByApplication&&t.allowedByKeySystem}function Hd(t){return t.filter(function(i){return Tu(i)})}function cg(t,i){var o=t.filter(function(p){return p.audio&&p.audio.channelsCount}),u=new Map;o=A(o);for(var l=o.next();!l.done;l=o.next()){l=l.value;var h=l.audio.channelsCount;u.has(h)||u.set(h,[]),u.get(h).push(l)}return o=Array.from(u.keys()),o.length==0?t:(t=o.filter(function(p){return p<=i}),t.length?u.get(Math.max.apply(Math,q(t))):u.get(Math.min.apply(Math,q(o))))}function dg(t,i,o,u){var l=t,h=t.filter(function(w){return w.primary});h.length&&(l=h);var p=l.length?l[0].language:"";if(l=l.filter(function(w){return w.language==p}),i){var m=vu(Mt(i),t.map(function(w){return w.language}));m&&(l=t.filter(function(w){return Mt(w.language)==m}))}if(l=l.filter(function(w){return w.forced==u}),o){if(t=sy(l,o),t.length)return t}else if(t=l.filter(function(w){return w.roles.length==0}),t.length)return t;return t=l.map(function(w){return w.roles}).reduce(Kl,[]),t.length?sy(l,t[0]):l}function sy(t,i){return t.filter(function(o){return o.roles.includes(i)})}function uy(t){var i=[];return t.audio&&i.push(hg(t.audio)),t.video&&i.push(hg(t.video)),i.join(", ")}function hg(t){return t.type=="audio"?"type=audio codecs="+t.codecs+" bandwidth="+t.bandwidth+" channelsCount="+t.channelsCount+" audioSamplingRate="+t.audioSamplingRate:t.type=="video"?"type=video codecs="+t.codecs+" bandwidth="+t.bandwidth+" frameRate="+t.frameRate+" width="+t.width+" height="+t.height:"unexpected stream type"}var wu=0,Wd="smooth",fg="powerEfficient",pg="bandwidth",Yl=new Map().set("image/svg+xml",!0).set("image/png",!0).set("image/jpeg",!0).set("image/jpg",!0),qd=new Map().set("image/webp","data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA").set("image/avif","data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A=");function ln(){var t=this;this.l=null,this.o=!1,this.i=new ni,navigator.connection&&navigator.connection.addEventListener("change",function(){if(t.g.useNetworkInformation&&t.o){t.i=new ni,t.g&&t.i.configure(t.g.advanced);var i=t.chooseVariant();i&&t.l(i)}}),this.m=[],this.u=1,this.B=!1,this.h=this.j=this.g=this.s=null,this.D=new ht(function(){if(t.g.restrictToElementSize){var i=t.chooseVariant();i&&t.l(i)}})}v=ln.prototype,v.stop=function(){this.l=null,this.o=!1,this.m=[],this.u=1,this.j=this.s=null,this.h&&(this.h.disconnect(),this.h=null),this.D.stop()},v.init=function(t){this.l=t},v.chooseVariant=function(){var t=1/0,i=1/0;this.g.restrictToScreenSize&&(i=this.g.ignoreDevicePixelRatio?1:S.devicePixelRatio,t=S.screen.height*i,i*=S.screen.width),this.h&&this.g.restrictToElementSize&&(i=this.g.ignoreDevicePixelRatio?1:S.devicePixelRatio,t=this.j.clientWidth*i,i*=this.j.clientHeight),t=ay(this.g.restrictions,this.m,t,i),i=this.i.getBandwidthEstimate(Eu(this)),this.m.length&&!t.length&&(t=ay(null,this.m,1/0,1/0),t=[t[0]]);for(var o=t[0]||null,u=0;u<t.length;u++){for(var l=t[u],h=isNaN(this.u)?1:Math.abs(this.u),p=h*l.bandwidth/this.g.bandwidthDowngradeTarget,m={bandwidth:1/0},w=u+1;w<t.length;w++)if(l.bandwidth!=t[w].bandwidth){m=t[w];break}h=h*m.bandwidth/this.g.bandwidthUpgradeTarget,i>=p&&i<=h&&o.bandwidth!=l.bandwidth&&(o=l)}return this.s=Date.now(),o},v.enable=function(){this.o=!0},v.disable=function(){this.o=!1},v.segmentDownloaded=function(t,i){if(this.i.sample(t,i),this.s!=null&&this.o)e:{if(this.B){if(Date.now()-this.s<1e3*this.g.switchInterval)break e}else{if(t=this.i,!(t.g>=t.i))break e;this.B=!0}t=this.chooseVariant(),this.i.getBandwidthEstimate(Eu(this)),t&&this.l(t)}},v.getBandwidthEstimate=function(){return this.i.getBandwidthEstimate(Eu(this))},v.setVariants=function(t){this.m=t},v.playbackRateChanged=function(t){this.u=t},v.setMediaElement=function(t){var i=this;this.j=t,this.h&&(this.h.disconnect(),this.h=null),this.j&&"ResizeObserver"in S&&(this.h=new ResizeObserver(function(){i.D.N(ly)}),this.h.observe(this.j))},v.configure=function(t){this.g=t,this.i&&this.g&&this.i.configure(this.g.advanced)};function Eu(t){var i=t.g.defaultBandwidthEstimate;return navigator.connection&&navigator.connection.downlink&&t.g.useNetworkInformation&&(i=1e6*navigator.connection.downlink),i}function ay(t,i,o,u){return t&&(i=i.filter(function(l){return Vd(l,t,{width:u,height:o})})),i.sort(function(l,h){return l.bandwidth-h.bandwidth})}pe("shaka.abr.SimpleAbrManager",ln),ln.prototype.configure=ln.prototype.configure,ln.prototype.setMediaElement=ln.prototype.setMediaElement,ln.prototype.playbackRateChanged=ln.prototype.playbackRateChanged,ln.prototype.setVariants=ln.prototype.setVariants,ln.prototype.getBandwidthEstimate=ln.prototype.getBandwidthEstimate,ln.prototype.segmentDownloaded=ln.prototype.segmentDownloaded,ln.prototype.disable=ln.prototype.disable,ln.prototype.enable=ln.prototype.enable,ln.prototype.chooseVariant=ln.prototype.chooseVariant,ln.prototype.init=ln.prototype.init,ln.prototype.stop=ln.prototype.stop;var ly=1;function $l(t,i){this.g=t,this.h=i}$l.prototype.toString=function(){return"v"+this.g+"."+this.h};function gg(t,i){var o=new $l(5,0),u=hy,l=u.g,h=o.h-l.h;(0<(o.g-l.g||h)?u.i:u.h)(u.g,o,t,i)}function cy(t,i,o,u){ze([o,"has been deprecated and will be removed in",i,". We are currently at version",t,". Additional information:",u].join(" "))}function dy(t,i,o,u){Rn([o,"has been deprecated and has been removed in",i,". We are now at version",t,". Additional information:",u].join(""))}var hy=null;pe("shaka.config.AutoShowText",{NEVER:0,ALWAYS:1,IF_PREFERRED_TEXT_LANGUAGE:2,IF_SUBTITLES_MAY_BE_NEEDED:3});function Xd(t,i){for(this.h=t,this.g=new Set([t]),i=i||[],t=A(i),i=t.next();!i.done;i=t.next())this.add(i.value)}Xd.prototype.add=function(t){return mg(this.h,t)?(this.g.add(t),!0):!1};function mg(t,i){var o;if(!(o=!!t.audio!=!!i.audio||!!t.video!=!!i.video||t.language!=i.language)&&(o=t.audio&&i.audio)){o=t.audio;var u=i.audio;o=!((!(!o.channelsCount||!u.channelsCount||2<o.channelsCount||2<u.channelsCount)||o.channelsCount==u.channelsCount)&&fy(o,u)&&Ql(o.roles,u.roles))}return!o&&(o=t.video&&i.video)&&(t=t.video,i=i.video,o=!(fy(t,i)&&Ql(t.roles,i.roles))),!o}Xd.prototype.values=function(){return this.g.values()};function fy(t,i){if(t.mimeType!=i.mimeType||(t=t.codecs.split(",").map(function(u){return $r(u)[0]}),i=i.codecs.split(",").map(function(u){return $r(u)[0]}),t.length!=i.length))return!1;t.sort(),i.sort();for(var o=0;o<t.length;o++)if(t[o]!=i[o])return!1;return!0}function Ql(t,i){if(t=new Set(t),i=new Set(i),t.delete("main"),i.delete("main"),t.size!=i.size)return!1;t=A(t);for(var o=t.next();!o.done;o=t.next())if(!i.has(o.value))return!1;return!0}function py(t){this.g=t,this.h=new qt(t.language,"",t.audio&&t.audio.channelsCount?t.audio.channelsCount:0,"")}py.prototype.create=function(t){var i=this,o=t.filter(function(u){return mg(i.g,u)});return o.length?new Xd(o[0],o):this.h.create(t)};function qt(t,i,o,u){this.i=t,this.j=i,this.g=o,this.h=u===void 0?"":u}qt.prototype.create=function(t){var i=[];i=vg(t,this.i);var o=t.filter(function(u){return u.primary});for(i=i.length?i:o.length?o:t,t=gy(i,this.j),t.length&&(i=t),this.g&&(t=cg(i,this.g),t.length&&(i=t)),this.h&&(t=qw(i,this.h),t.length&&(i=t)),t=new Xd(i[0]),i=A(i),o=i.next();!o.done;o=i.next())o=o.value,mg(t.h,o)&&t.add(o);return t};function vg(t,i){i=Mt(i);var o=vu(i,t.map(function(u){return zd(u)}));return o?t.filter(function(u){return o==zd(u)}):[]}function gy(t,i){return t.filter(function(o){return o.audio?i?o.audio.roles.includes(i):o.audio.roles.length==0:!1})}function qw(t,i){return t.filter(function(o){return o.audio?o.audio.label.toLowerCase()==i.toLowerCase():!1})}function yg(){this.g=Yd,this.h=new Map().set(Yd,2).set(Pa,1)}function xg(t,i,o){t.h.set(Yd,o).set(Pa,i)}var Pa=0,Yd=1;function Tg(t,i){var o=Rs();this.l=t.maxAttempts==null?o.maxAttempts:t.maxAttempts,this.j=t.baseDelay==null?o.baseDelay:t.baseDelay,this.o=t.fuzzFactor==null?o.fuzzFactor:t.fuzzFactor,this.m=t.backoffFactor==null?o.backoffFactor:t.backoffFactor,this.g=0,this.h=this.j,(this.i=i===void 0?!1:i)&&(this.g=1)}function Zl(t){var i,o;return j(function(u){if(u.g==1){if(t.g>=t.l)if(t.i)t.g=1,t.h=t.j;else throw new oe(2,7,1010);return i=t.g,t.g++,i==0?u.return():(o=t.h*(1+(2*Math.random()-1)*t.o),k(u,new Promise(function(l){new ht(l).N(o/1e3)}),2))}t.h*=t.m,le(u)})}function Rs(){return{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:3e4,stallTimeout:5e3,connectionTimeout:1e4}}function Zt(t,i){this.promise=t,this.i=i,this.g=!1}function Ls(t){return new Zt(Promise.reject(t),function(){return Promise.resolve()})}function $d(){var t=Promise.reject(new oe(2,7,7001));return t.catch(function(){}),new Zt(t,function(){return Promise.resolve()})}function Zr(t){return new Zt(Promise.resolve(t),function(){return Promise.resolve()})}function Eo(t){return new Zt(t,function(){return t.catch(function(){})})}Zt.prototype.abort=function(){return this.g=!0,this.i()};function my(t){return new Zt(Promise.all(t.map(function(i){return i.promise})),function(){return Promise.all(t.map(function(i){return i.abort()}))})}Zt.prototype.finally=function(t){return this.promise.then(function(){return t(!0)},function(){return t(!1)}),this},Zt.prototype.Y=function(t,i){function o(m){return function(w){if(l.g&&m)h.reject(p);else{var C=m?t:i;C?u=Xw(C,w,h):(m?h.resolve:h.reject)(w)}}}function u(){return h.reject(p),l.abort()}var l=this,h=new Wt,p=new oe(2,7,7001);return this.promise.then(o(!0),o(!1)),new Zt(h,function(){return u()})};function Xw(t,i,o){try{var u=t(i);return u&&u.promise&&u.abort?(o.resolve(u.promise),function(){return u.abort()}):(o.resolve(u),function(){return Promise.resolve(u).then(function(){},function(){})})}catch(l){return o.reject(l),function(){return Promise.resolve()}}}pe("shaka.util.AbortableOperation",Zt),Zt.prototype.chain=Zt.prototype.Y,Zt.prototype.finally=Zt.prototype.finally,Zt.all=my,Zt.prototype.abort=Zt.prototype.abort,Zt.notAbortable=Eo,Zt.completed=Zr,Zt.aborted=$d,Zt.failed=Ls;function dt(t,i){if(i)if(i instanceof Map)for(var o=A(i.keys()),u=o.next();!u.done;u=o.next())u=u.value,Object.defineProperty(this,u,{value:i.get(u),writable:!0,enumerable:!0});else for(o in i)Object.defineProperty(this,o,{value:i[o],writable:!0,enumerable:!0});this.defaultPrevented=this.cancelable=this.bubbles=!1,this.timeStamp=S.performance&&S.performance.now?S.performance.now():Date.now(),this.type=t,this.isTrusted=!1,this.target=this.currentTarget=null,this.g=!1}function wg(t){var i=new dt(t.type),o;for(o in t)Object.defineProperty(i,o,{value:t[o],writable:!0,enumerable:!0});return i}dt.prototype.preventDefault=function(){this.cancelable&&(this.defaultPrevented=!0)},dt.prototype.stopImmediatePropagation=function(){this.g=!0},dt.prototype.stopPropagation=function(){},pe("shaka.util.FakeEvent",dt);var Jo={Ig:"abrstatuschanged",Jg:"adaptation",Kg:"buffering",Mg:"downloadfailed",Ng:"downloadheadersreceived",Og:"drmsessionupdate",Qg:"emsg",dh:"prft",Error:"error",Rg:"expirationupdated",Sg:"gapjumped",Vg:"loaded",Wg:"loading",Yg:"manifestparsed",Zg:"mediaqualitychanged",Metadata:"metadata",ah:"onstatechange",bh:"onstateidle",eh:"ratechange",gh:"segmentappended",hh:"sessiondata",ih:"stalldetected",jh:"streaming",kh:"textchanged",lh:"texttrackvisibility",mh:"timelineregionadded",nh:"timelineregionenter",oh:"timelineregionexit",ph:"trackschanged",rh:"unloading",sh:"variantchanged"};function kt(){this.ca=new yu,this.Wc=this}kt.prototype.addEventListener=function(t,i){this.ca&&this.ca.push(t,i)},kt.prototype.removeEventListener=function(t,i){this.ca&&this.ca.remove(t,i)},kt.prototype.dispatchEvent=function(t){if(!this.ca)return!0;var i=this.ca.get(t.type)||[],o=this.ca.get("All");for(o&&(i=i.concat(o)),i=A(i),o=i.next();!o.done;o=i.next()){o=o.value,t.target=this.Wc,t.currentTarget=this.Wc;try{o.handleEvent?o.handleEvent(t):o.call(this,t)}catch(u){}if(t.g)break}return t.defaultPrevented},kt.prototype.release=function(){this.ca=null};function Au(t){function i(u){switch(typeof u){case"undefined":case"boolean":case"number":case"string":case"symbol":case"function":return u;default:if(!u||u.buffer&&u.buffer.constructor==ArrayBuffer)return u;if(o.has(u))return null;var l=u.constructor==Array;if(u.constructor!=Object&&!l)return null;o.add(u);var h=l?[]:{},p;for(p in u)h[p]=i(u[p]);return l&&(h.length=u.length),h}}var o=new Set;return i(t)}function Eg(t){var i={},o;for(o in t)i[o]=t[o];return i}function es(){this.g=[]}function jt(t,i){t.g.push(i.finally(function(){Hr(t.g,i)}))}es.prototype.destroy=function(){for(var t=[],i=A(this.g),o=i.next();!o.done;o=i.next())o=o.value,o.promise.catch(function(){}),t.push(o.abort());return this.g=[],Promise.all(t)};function Nt(t,i,o){kt.call(this),this.i=!1,this.m=new es,this.g=new Set,this.h=new Set,this.l=t||null,this.j=i||null,this.s=o||null,this.o=!1}Te(Nt,kt),v=Nt.prototype,v.je=function(t){this.o=t};function Jr(t,i,o,u){o=o||Iu;var l=Ot[t];(!l||o>=l.priority)&&(Ot[t]={priority:o,jg:i,kg:u===void 0?!1:u})}v.lg=function(t){this.g.add(t)},v.Bg=function(t){this.g.delete(t)},v.rf=function(){this.g.clear()},v.mg=function(t){this.h.add(t)},v.Cg=function(t){this.h.delete(t)},v.tf=function(){this.h.clear()};function oi(t,i,o){return{uris:t,method:"GET",body:null,headers:{},allowCrossSiteCredentials:!1,retryParameters:i,licenseRequestType:null,sessionId:null,drmInfo:null,initData:null,initDataType:null,streamDataCallback:o===void 0?null:o}}v.destroy=function(){return this.i=!0,this.g.clear(),this.h.clear(),kt.prototype.release.call(this),this.m.destroy()},v.request=function(t,i){var o=this,u=new Su;if(this.i){var l=Promise.reject(new oe(2,7,7001));return l.catch(function(){}),new Jl(l,function(){return Promise.resolve()},u)}i.method=i.method||"GET",i.headers=i.headers||{},i.retryParameters=i.retryParameters?Au(i.retryParameters):Rs(),i.uris=Au(i.uris),l=Ao(this,t,i);var h=l.Y(function(){return Ag(o,t,i,new Tg(i.retryParameters,!1),0,null,u)}),p=h.Y(function(D){return Yw(o,t,D)}),m=Date.now(),w=0;l.promise.then(function(){w=Date.now()-m},function(){});var C=0;h.promise.then(function(){C=Date.now()},function(){});var _=p.Y(function(D){var b=Date.now()-C,U=D.response;return U.timeMs+=w,U.timeMs+=b,D.Yf||!o.l||U.fromCache||t!=eo||o.l(U.timeMs,U.data.byteLength),U},function(D){throw D&&(D.severity=2),D});return l=new Jl(_.promise,function(){return _.abort()},u),jt(this.m,l),l};function Ao(t,i,o){var u=Zr(void 0),l={};t=A(t.g);for(var h=t.next();!h.done;l={sd:l.sd},h=t.next())l.sd=h.value,u=u.Y(function(p){return function(){return o.body&&(o.body=yt(o.body)),p.sd(i,o)}}(l));return u.Y(void 0,function(p){throw p instanceof oe&&p.code==7001?p:new oe(2,1,1006,p)})}function Ag(t,i,o,u,l,h,p){t.o&&(o.uris[l]=o.uris[l].replace("http://","https://"));var m=new Si(o.uris[l]),w=m.Ea,C=!1;w||(w=location.protocol,w=w.slice(0,-1),At(m,w),o.uris[l]=m.toString()),w=w.toLowerCase();var _=(w=Ot[w])?w.jg:null;if(!_)return Ls(new oe(2,1,1e3,m));var D=w.kg,b=null,U=null,K=!1,Z=!1,B;return Eo(Zl(u)).Y(function(){if(t.i)return $d();B=Date.now();var X=_(o.uris[l],o,i,function(ce,de,Ee){b&&b.stop(),U&&U.N(ne/1e3),t.l&&i==eo&&(t.l(ce,de),C=!0,p.g=Ee)},function(ce){t.j&&t.j(ce,o,i),Z=!0});if(!D)return X;var ge=o.retryParameters.connectionTimeout;ge&&(b=new ht(function(){K=!0,X.abort()}),b.N(ge/1e3));var ne=o.retryParameters.stallTimeout;return ne&&(U=new ht(function(){K=!0,X.abort()})),X}).Y(function(X){b&&b.stop(),U&&U.stop(),X.timeMs==null&&(X.timeMs=Date.now()-B);var ge={response:X,Yf:C};return!Z&&t.j&&t.j(X.headers,o,i),ge},function(X){if(b&&b.stop(),U&&U.stop(),t.s){var ge=null,ne=0;X instanceof oe&&(ge=X,X.code==1001&&(ne=X.data[1])),t.s(o,ge,ne,K)}if(t.i)return $d();if(K&&(X=new oe(1,1,1003,o.uris[l],i)),X instanceof oe){if(X.code==7001)throw X;if(X.code==1010)throw h;if(X.severity==1)return ge=new Map().set("error",X),ge=new dt("retry",ge),t.dispatchEvent(ge),l=(l+1)%o.uris.length,Ag(t,i,o,u,l,X,p)}throw X})}function Yw(t,i,o){var u=Zr(void 0),l={};t=A(t.h);for(var h=t.next();!h.done;l={td:l.td},h=t.next())l.td=h.value,u=u.Y(function(p){return function(){var m=o.response;return m.data&&(m.data=yt(m.data)),p.td(i,m)}}(l));return u.Y(function(){return o},function(p){var m=2;if(p instanceof oe){if(p.code==7001)throw p;m=p.severity}throw new oe(m,1,1007,p)})}pe("shaka.net.NetworkingEngine",Nt),Nt.prototype.request=Nt.prototype.request,Nt.prototype.destroy=Nt.prototype.destroy,Nt.makeRequest=oi,Nt.defaultRetryParameters=function(){return Rs()},Nt.prototype.clearAllResponseFilters=Nt.prototype.tf,Nt.prototype.unregisterResponseFilter=Nt.prototype.Cg,Nt.prototype.registerResponseFilter=Nt.prototype.mg,Nt.prototype.clearAllRequestFilters=Nt.prototype.rf,Nt.prototype.unregisterRequestFilter=Nt.prototype.Bg,Nt.prototype.registerRequestFilter=Nt.prototype.lg,Nt.unregisterScheme=function(t){delete Ot[t]},Nt.registerScheme=Jr,Nt.prototype.setForceHTTPS=Nt.prototype.je;function Su(){this.g=0}Nt.NumBytesRemainingClass=Su;function Jl(t,i,o){Zt.call(this,t,i),this.h=o}Te(Jl,Zt),Nt.PendingRequest=Jl;var eo=1;Nt.RequestType={MANIFEST:0,SEGMENT:eo,LICENSE:2,APP:3,TIMING:4,SERVER_CERTIFICATE:5,KEY:6};var Iu=3;Nt.PluginPriority={FALLBACK:1,PREFERRED:2,APPLICATION:Iu};var Ot={};function Mi(t){this.g=!1,this.h=new Wt,this.i=t}Mi.prototype.destroy=function(){var t=this;return this.g?this.h:(this.g=!0,this.i().then(function(){t.h.resolve()},function(){t.h.resolve()}))};function Ct(t,i){if(t.g)throw i instanceof oe&&i.code==7003?i:new oe(2,7,7003,i)}function Xt(){this.g=new yu}v=Xt.prototype,v.release=function(){this.nb(),this.g=null},v.C=function(t,i,o,u){this.g&&(t=new Sg(t,i,o,u),this.g.push(i,t))},v.ma=function(t,i,o,u){function l(p){h.zc(t,i,l),o(p)}var h=this;this.C(t,i,l,u)},v.zc=function(t,i,o){if(this.g){var u=this.g.get(i)||[];u=A(u);for(var l=u.next();!l.done;l=u.next())l=l.value,l.target!=t||o!=l.listener&&o||(l.zc(),this.g.remove(i,l))}},v.nb=function(){if(this.g){var t=this.g,i=[],o;for(o in t.g)i.push.apply(i,q(t.g[o]));for(t=A(i),i=t.next();!i.done;i=t.next())i.value.zc();this.g.g={}}},pe("shaka.util.EventManager",Xt),Xt.prototype.removeAll=Xt.prototype.nb,Xt.prototype.unlisten=Xt.prototype.zc,Xt.prototype.listenOnce=Xt.prototype.ma,Xt.prototype.listen=Xt.prototype.C,Xt.prototype.release=Xt.prototype.release;function Sg(t,i,o,u){this.target=t,this.type=i,this.listener=o,this.g=$w(t,u),this.target.addEventListener(i,o,this.g)}Sg.prototype.zc=function(){this.target.removeEventListener(this.type,this.listener,this.g),this.listener=this.target=null,this.g=!1};function $w(t,i){if(i==null)return!1;if(typeof i=="boolean")return i;var o=new Set(["passive","capture"]);return Object.keys(i).filter(function(u){return!o.has(u)}),vy(t)?i:i.capture||!1}function vy(t){var i=ec;if(i==null){i=!1;try{var o={},u={get:function(){return i=!0,!1}};Object.defineProperty(o,"passive",u),Object.defineProperty(o,"capture",u),u=function(){},t.addEventListener("test",u,o),t.removeEventListener("test",u,o)}catch(l){i=!1}ec=i}return i||!1}var ec=void 0;function ts(t,i){var o=[];t=A(t);for(var u=t.next();!u.done;u=t.next())o.push(i(u.value));return o}function yy(t,i){t=A(t);for(var o=t.next();!o.done;o=t.next())if(!i(o.value))return!1;return!0}function Ns(t){for(var i=new Map,o=A(Object.keys(t)),u=o.next();!u.done;u=o.next())u=u.value,i.set(u,t[u]);return i}function ns(t){var i={};return t.forEach(function(o,u){i[u]=o}),i}function Gt(t,i){if(t||i){if(t&&!i||i&&!t)return!1}else return!0;if(t.size!=i.size)return!1;t=A(t);for(var o=t.next();!o.done;o=t.next()){var u=A(o.value);if(o=u.next().value,u=u.next().value,!i.has(o)||(o=i.get(o),o!=u||o==null))return!1}return!0}function Ve(t,i){this.S=Oi(t),this.h=i==xy,this.g=0}v=Ve.prototype,v.ga=function(){return this.g<this.S.byteLength},v.Z=function(){return this.g},v.Gf=function(){return this.S.byteLength},v.Ra=function(){try{var t=this.S.getUint8(this.g);return this.g+=1,t}catch(i){throw So()}},v.$d=function(){try{var t=this.S.getUint16(this.g,this.h);return this.g+=2,t}catch(i){throw So()}},v.K=function(){try{var t=this.S.getUint32(this.g,this.h);return this.g+=4,t}catch(i){throw So()}},v.Pe=function(){try{var t=this.S.getInt32(this.g,this.h);return this.g+=4,t}catch(i){throw So()}},v.$a=function(){try{if(this.h)var t=this.S.getUint32(this.g,!0),i=this.S.getUint32(this.g+4,!0);else i=this.S.getUint32(this.g,!1),t=this.S.getUint32(this.g+4,!1)}catch(o){throw So()}if(2097151<i)throw new oe(2,3,3001);return this.g+=8,i*Math.pow(2,32)+t},v.Za=function(t){if(this.g+t>this.S.byteLength)throw So();var i=$e(this.S,this.g,t);return this.g+=t,i},v.skip=function(t){if(this.g+t>this.S.byteLength)throw So();this.g+=t},v.sg=function(t){if(this.g<t)throw So();this.g-=t},v.seek=function(t){if(0>t||t>this.S.byteLength)throw So();this.g=t},v.sc=function(){for(var t=this.g;this.ga()&&this.S.getUint8(this.g)!=0;)this.g+=1;return t=$e(this.S,t,this.g-t),this.g+=1,an(t)};function So(){return new oe(2,3,3e3)}pe("shaka.util.DataViewReader",Ve),Ve.prototype.readTerminatedString=Ve.prototype.sc,Ve.prototype.seek=Ve.prototype.seek,Ve.prototype.rewind=Ve.prototype.sg,Ve.prototype.skip=Ve.prototype.skip,Ve.prototype.readBytes=Ve.prototype.Za,Ve.prototype.readUint64=Ve.prototype.$a,Ve.prototype.readInt32=Ve.prototype.Pe,Ve.prototype.readUint32=Ve.prototype.K,Ve.prototype.readUint16=Ve.prototype.$d,Ve.prototype.readUint8=Ve.prototype.Ra,Ve.prototype.getLength=Ve.prototype.Gf,Ve.prototype.getPosition=Ve.prototype.Z,Ve.prototype.hasMoreData=Ve.prototype.ga;var xy=1;Ve.Endianness={BIG_ENDIAN:0,LITTLE_ENDIAN:xy};function Vt(){this.i=[],this.h=[],this.g=!1}v=Vt.prototype,v.box=function(t,i){return t=Pt(t),this.i[t]=Kt,this.h[t]=i,this},v.P=function(t,i){return t=Pt(t),this.i[t]=en,this.h[t]=i,this},v.stop=function(){this.g=!0},v.parse=function(t,i,o){for(t=new Ve(t,0),this.g=!1;t.ga()&&!this.g;)this.qc(0,t,i,o)},v.qc=function(t,i,o,u){var l=i.Z();if(u&&l+8>i.S.byteLength)this.g=!0;else{var h=i.K(),p=i.K(),m=Ar(p),w=!1;switch(h){case 0:h=i.S.byteLength-l;break;case 1:if(u&&i.Z()+8>i.S.byteLength){this.g=!0;return}h=i.$a(),w=!0}var C=this.h[p];if(C){var _=null,D=null;if(this.i[p]==en){if(u&&i.Z()+4>i.S.byteLength){this.g=!0;return}D=i.K(),_=D>>>24,D&=16777215}p=l+h,o&&p>i.S.byteLength&&(p=i.S.byteLength),u&&p>i.S.byteLength?this.g=!0:(u=p-i.Z(),i=0<u?i.Za(u):new Uint8Array(0),i=new Ve(i,0),C({name:m,parser:this,partialOkay:o||!1,version:_,flags:D,reader:i,size:h,start:l+t,has64BitSize:w}))}else i.skip(Math.min(l+h-i.Z(),i.S.byteLength-i.Z()))}};function Jt(t){for(var i=Ua(t);t.reader.ga()&&!t.parser.g;)t.parser.qc(t.start+i,t.reader,t.partialOkay)}function is(t){for(var i=Ua(t),o=t.reader.K(),u=0;u<o&&(t.parser.qc(t.start+i,t.reader,t.partialOkay),!t.parser.g);u++);}function Qd(t){var i=Ua(t);for(t.reader.skip(78);t.reader.ga()&&!t.parser.g;)t.parser.qc(t.start+i,t.reader,t.partialOkay)}function Oa(t){return function(i){t(i.reader.Za(i.reader.S.byteLength-i.reader.Z()))}}function Pt(t){var i=0;t=A(t);for(var o=t.next();!o.done;o=t.next())i=i<<8|o.value.charCodeAt(0);return i}function Ar(t){return String.fromCharCode(t>>24&255,t>>16&255,t>>8&255,t&255)}function Ua(t){return 8+(t.has64BitSize?8:0)+(t.flags!=null?4:0)}pe("shaka.util.Mp4Parser",Vt),Vt.headerSize=Ua,Vt.typeToString=Ar,Vt.allData=Oa,Vt.visualSampleEntry=Qd,Vt.sampleDescription=is,Vt.children=Jt,Vt.prototype.parseNext=Vt.prototype.qc,Vt.prototype.parse=Vt.prototype.parse,Vt.prototype.stop=Vt.prototype.stop,Vt.prototype.fullBox=Vt.prototype.P,Vt.prototype.box=Vt.prototype.box;var Kt=0,en=1;function ja(t){var i=this;this.g=[],this.h=[],this.data=[],new Vt().box("moov",Jt).box("moof",Jt).P("pssh",function(o){if(!(1<o.version)){var u=$e(o.reader.S,-12,o.size);if(i.data.push(u),i.g.push(Qe(o.reader.Za(16))),0<o.version){u=o.reader.K();for(var l=0;l<u;l++){var h=Qe(o.reader.Za(16));i.h.push(h)}}}}).parse(t)}function Zd(t,i,o,u){var l=t.length,h=i.length+16+l;0<u&&(h+=4+16*o.size);var p=new Uint8Array(h),m=Oi(p),w=0;if(m.setUint32(w,h),w+=4,m.setUint32(w,1886614376),w+=4,1>u?m.setUint32(w,0):m.setUint32(w,16777216),w+=4,p.set(i,w),w+=i.length,0<u)for(m.setUint32(w,o.size),w+=4,i=A(o),o=i.next();!o.done;o=i.next())o=qo(o.value),p.set(o,w),w+=o.length;return m.setUint32(w,l),p.set(t,w+4),p}function rs(t,i){return t=tn(t,i),t.length!=1?null:t[0]}function tc(t,i,o){return t=Ty(t,i,o),t.length!=1?null:t[0]}function tn(t,i){var o=[];t=A(t.childNodes);for(var u=t.next();!u.done;u=t.next())u=u.value,u instanceof Element&&u.tagName==i&&o.push(u);return o}function nc(t){return Array.from(t.childNodes).filter(function(i){return i instanceof Element})}function Ty(t,i,o){var u=[];t=A(t.childNodes);for(var l=t.next();!l.done;l=t.next())l=l.value,l instanceof Element&&l.localName==o&&l.namespaceURI==i&&u.push(l);return u}function Ds(t,i,o){return t.hasAttributeNS(i,o)?t.getAttributeNS(i,o):null}function Io(t,i,o){i=A(i);for(var u=i.next();!u.done;u=i.next())if(u=u.value,t.hasAttributeNS(u,o))return t.getAttributeNS(u,o);return null}function Ba(t){return Array.from(t.childNodes).every(ic)?t.textContent.trim():null}function ic(t){return t.nodeType==Node.TEXT_NODE||t.nodeType==Node.CDATA_SECTION_NODE}function Ft(t,i,o,u){u=u===void 0?null:u;var l=null;return t=t.getAttribute(i),t!=null&&(l=o(t)),l==null?u:l}function on(t){return t?(/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(t)&&(t+="Z"),t=Date.parse(t),isNaN(t)?null:t/1e3):null}function os(t){return!t||(t=RegExp("^P(?:([0-9]*)Y)?(?:([0-9]*)M)?(?:([0-9]*)D)?(?:T(?:([0-9]*)H)?(?:([0-9]*)M)?(?:([0-9.]*)S)?)?$").exec(t),!t)?null:(t=31536e3*Number(t[1]||null)+2592e3*Number(t[2]||null)+86400*Number(t[3]||null)+3600*Number(t[4]||null)+60*Number(t[5]||null)+Number(t[6]||null),isFinite(t)?t:null)}function rc(t){var i=/([0-9]+)-([0-9]+)/.exec(t);return!i||(t=Number(i[1]),!isFinite(t))?null:(i=Number(i[2]),isFinite(i)?{start:t,end:i}:null)}function Cu(t){return t=Number(t),t%1===0?t:null}function Sr(t){return t=Number(t),t%1===0&&0<t?t:null}function rr(t){return t=Number(t),t%1===0&&0<=t?t:null}function Fa(t){return t=Number(t),isNaN(t)?null:t}function nn(t){var i,o=(i=t.match(/^(\d+)\/(\d+)$/))?Number(i[1])/Number(i[2]):Number(t);return isNaN(o)?null:o}function za(t,i){var o=new DOMParser,u=Jd.value()(t);t=null;try{t=o.parseFromString(u,"text/xml")}catch(l){return null}if(o=t.documentElement,!o||o.getElementsByTagName("parsererror").length||o.tagName!=i)return null;for(i=document.createNodeIterator(t,NodeFilter.SHOW_ALL);t=i.nextNode();)if(t instanceof HTMLElement||t instanceof SVGElement)return null;return o}function Co(t,i){try{var o=an(t);return za(o,i)}catch(u){return null}}var Jd=new Ui(function(){if(typeof trustedTypes<"u"){var t=trustedTypes.createPolicy("shaka-player#xml",{createHTML:function(i){return i}});return function(i){return t.createHTML(i)}}return function(i){return i}});function eh(t,i){var o=this;i=i===void 0?1:i,this.D=t,this.G=new Set,this.l=this.u=null,this.da=this.W=!1,this.H=0,this.g=null,this.s=new Xt,this.i=new Map,this.B=[],this.o=new Wt,this.h=null,this.m=function(u){o.o.reject(u),t.onError(u)},this.ia=new Map,this.ba=new Map,this.O=new ht(function(){return nE(o)}),this.L=!1,this.J=[],this.M=!1,this.ca=new ht(function(){oE(o)}).Ca(i),this.o.catch(function(){}),this.j=new Mi(function(){return th(o)}),this.V=!1,this.F=null}v=eh.prototype,v.destroy=function(){return this.j.destroy()};function th(t){return j(function(i){switch(i.g){case 1:return t.s.release(),t.s=null,t.o.reject(),t.ca.stop(),t.ca=null,t.O.stop(),t.O=null,k(i,Lg(t),2);case 2:if(!t.l){i.A(3);break}return ye(i,4),k(i,t.l.setMediaKeys(null),6);case 6:_e(i,5);break;case 4:we(i);case 5:t.l=null;case 3:t.g=null,t.G.clear(),t.u=null,t.B=[],t.h=null,t.m=function(){},t.D=null,t.V=!1,t.F=null,le(i)}})}v.configure=function(t){this.h=t};function ko(t,i,o){return t.da=!0,t.B=[],t.L=o,Va(t,i)}function Ga(t,i,o){return t.B=o,t.L=0<o.length,Va(t,i)}function Qw(t,i,o,u,l,h){var p=new Map;return l={audioCapabilities:l,videoCapabilities:h,distinctiveIdentifier:"optional",persistentState:"required",sessionTypes:["persistent-license"],label:i},l.drmInfos=[{keySystem:i,licenseServerUri:o,distinctiveIdentifierRequired:!1,persistentStateRequired:!0,audioRobustness:"",videoRobustness:"",serverCertificate:u,serverCertificateUri:"",initData:null,keyIds:null}],p.set(i,l),kg(t,p,[])}function Va(t,i){var o,u,l,h,p,m,w,C,_,D,b,U,K,Z;return j(function(B){if(B.g==1){if(o=tE(t))for(u=A(i),l=u.next();!l.done;l=u.next())h=l.value,h.video&&(h.video.drmInfos=[o]),h.audio&&(h.audio.drmInfos=[o]);for(p=i.some(function(X){return!!(X.video&&X.video.drmInfos.length||X.audio&&X.audio.drmInfos.length)}),p||(m=Ns(t.h.servers),sE(i,m)),w=A(i),l=w.next();!l.done;l=w.next())for(C=l.value,_=rh(C),D=A(_),b=D.next();!b.done;b=D.next())U=b.value,uE(U,Ns(t.h.servers),Ns(t.h.advanced||{}),t.h.keySystemsMapping);return k(B,Nn(i,t.L,t.V),2)}return K=p||Object.keys(t.h.servers).length,K?(Z=kg(t,void 0,i),B.return(p?Z:Z.catch(function(){}))):(t.W=!0,B.return(Promise.resolve()))})}function Ig(t){var i;return j(function(o){switch(o.g){case 1:if(t.l.mediaKeys)return o.return();if(!t.F){o.A(2);break}return k(o,t.F,3);case 3:return Ct(t.j),o.return();case 2:return ye(o,4),t.F=t.l.setMediaKeys(t.u),k(o,t.F,6);case 6:_e(o,5);break;case 4:i=we(o),t.m(new oe(2,6,6003,i.message));case 5:Ct(t.j),le(o)}})}function Zw(t,i){return j(function(o){if(o.g==1)return k(o,Ig(t),2);Ha(t,i.initDataType,$e(i.initData)),le(o)})}v.Yb=function(t){var i=this,o;return j(function(u){if(u.g==1)return i.u?(i.l=t,i.s.ma(i.l,"play",function(){for(var l=A(i.J),h=l.next();!h.done;h=l.next())nh(i,h.value);i.M=!0,i.J=[]}),"webkitCurrentPlaybackTargetIsWireless"in i.l&&i.s.C(i.l,"webkitcurrentplaybacktargetiswirelesschanged",function(){return Lg(i)}),(o=i.g.initData.find(function(l){return 0<l.initData.length}))||i.g.keySystem!=="com.apple.fps"||i.B.length?k(u,Ig(i),2):u.A(2)):(i.s.ma(t,"encrypted",function(){i.m(new oe(2,6,6010))}),u.return());wy(i),o||i.B.length||i.h.parseInbandPsshEnabled||i.s.C(i.l,"encrypted",function(l){return Zw(i,l)}),le(u)})};function Ka(t){var i,o,u,l,h;return j(function(p){switch(p.g){case 1:if(!t.u||!t.g)return p.return();if(!t.g.serverCertificateUri||t.g.serverCertificate&&t.g.serverCertificate.length){p.A(2);break}return i=oi([t.g.serverCertificateUri],t.h.retryParameters),ye(p,3),o=t.D.kb.request(5,i),k(p,o.promise,5);case 5:u=p.h,t.g.serverCertificate=$e(u.data),_e(p,4);break;case 3:throw l=we(p),new oe(2,6,6017,l);case 4:if(t.j.g)return p.return();case 2:return!t.g.serverCertificate||!t.g.serverCertificate.length?p.return():(ye(p,6),k(p,t.u.setServerCertificate(t.g.serverCertificate),8));case 8:_e(p,0);break;case 6:throw h=we(p),new oe(2,6,6004,h.message)}})}function Jw(t,i){var o,u,l;return j(function(h){if(h.g==1)return k(h,_g(t,i),2);if(h.g!=3)return o=h.h,o?(u=[],(l=t.i.get(o))&&(l.Ja=new Wt,u.push(l.Ja)),u.push(o.remove()),k(h,Promise.all(u),3)):h.return();t.i.delete(o),le(h)})}function wy(t){for(var i=(t.g?t.g.initData:[])||[],o=A(i),u=o.next();!u.done;u=o.next())u=u.value,Ha(t,u.initDataType,u.initData);for(o=A(t.B),u=o.next();!u.done;u=o.next())_g(t,u.value);return i.length||t.B.length||t.o.resolve(),t.o}function Ha(t,i,o){if(o.length){var u=t.i.values();u=A(u);for(var l=u.next();!l.done;l=u.next())if(Xr(o,l.value.initData)&&!Qt("Tizen 2"))return;0<t.i.size&&sc(t)&&(t.o.resolve(),t.o=new Wt,t.o.catch(function(){})),oc(t,i,o,t.g.sessionType)}}function Ey(t){return t?!!t.match(/^com\.(microsoft|chromecast)\.playready/):!1}function Cg(t){return t=t.i.keys(),t=ts(t,function(i){return i.sessionId}),Array.from(t)}v.ic=function(){var t=1/0,i=this.i.keys();i=A(i);for(var o=i.next();!o.done;o=i.next())o=o.value,isNaN(o.expiration)||(t=Math.min(t,o.expiration));return t},v.Qc=function(){return ns(this.ba)};function kg(t,i,o){var u,l,h,p,m,w,C,_,D,b,U,K,Z;return j(function(B){switch(B.g){case 1:if(u=new Map,o.length){l=eE(t,o,u),B.A(2);break}return k(B,Mg(t,i),3);case 3:l=B.h;case 2:if(h=l,!h)throw new oe(2,6,6001);for(Ct(t.j),ye(B,4),t.G.clear(),p=h.getConfiguration(),m=p.audioCapabilities||[],w=p.videoCapabilities||[],C=A(m),_=C.next();!_.done;_=C.next())D=_.value,t.G.add(D.contentType.toLowerCase());for(b=A(w),_=b.next();!_.done;_=b.next())U=_.value,t.G.add(U.contentType.toLowerCase());if(o.length){var X=h.keySystem,ge=u.get(h.keySystem),ne=[],ce=[],de=[],Ee=[],Ie=new Set;Sy(ge,ne,de,ce,Ee,Ie);var be=t.L?"persistent-license":"temporary";for(X={keySystem:X,licenseServerUri:ne[0],distinctiveIdentifierRequired:ge[0].distinctiveIdentifierRequired,persistentStateRequired:ge[0].persistentStateRequired,sessionType:ge[0].sessionType||be,audioRobustness:ge[0].audioRobustness||"",videoRobustness:ge[0].videoRobustness||"",serverCertificate:de[0],serverCertificateUri:ce[0],initData:Ee,keyIds:Ie},ge=A(ge),ne=ge.next();!ne.done;ne=ge.next())ne=ne.value,ne.distinctiveIdentifierRequired&&(X.distinctiveIdentifierRequired=ne.distinctiveIdentifierRequired),ne.persistentStateRequired&&(X.persistentStateRequired=ne.persistentStateRequired);ge=X}else ge=h.keySystem,X=i.get(h.keySystem),ne=[],ce=[],de=[],Ee=[],Ie=new Set,Sy(X.drmInfos,ne,de,ce,Ee,Ie),ge={keySystem:ge,licenseServerUri:ne[0],distinctiveIdentifierRequired:X.distinctiveIdentifier=="required",persistentStateRequired:X.persistentState=="required",sessionType:X.sessionTypes[0]||"temporary",audioRobustness:(X.audioCapabilities?X.audioCapabilities[0].robustness:"")||"",videoRobustness:(X.videoCapabilities?X.videoCapabilities[0].robustness:"")||"",serverCertificate:de[0],serverCertificateUri:ce[0],initData:Ee,keyIds:Ie};if(t.g=ge,!t.g.licenseServerUri)throw new oe(2,6,6012,t.g.keySystem);return k(B,h.createMediaKeys(),6);case 6:return K=B.h,Ct(t.j),t.u=K,t.W=!0,k(B,Ka(t),7);case 7:Ct(t.j),_e(B,0);break;case 4:throw Z=we(B),Ct(t.j,Z),t.g=null,t.G.clear(),Z instanceof oe?Z:new oe(2,6,6002,Z.message)}})}function eE(t,i,o){for(var u=A(i),l=u.next();!l.done;l=u.next()){var h=A(rh(l.value));for(l=h.next();!l.done;l=h.next())l=l.value,o.has(l.keySystem)||o.set(l.keySystem,[]),o.get(l.keySystem).push(l)}if(o.size==1&&o.has(""))throw new oe(2,6,6e3);for(u={},t=A(t.h.preferredKeySystems),l=t.next();!l.done;u={qd:u.qd},l=t.next())for(u.qd=l.value,h=A(i),l=h.next();!l.done;l=h.next())if(l=l.value.decodingInfos.find(function(C){return function(_){return _.supported&&_.keySystemAccess!=null&&_.keySystemAccess.keySystem==C.qd}}(u)))return l.keySystemAccess;for(t=A([!0,!1]),l=t.next();!l.done;l=t.next())for(u=l.value,h=A(i),l=h.next();!l.done;l=h.next()){var p=A(l.value.decodingInfos);for(l=p.next();!l.done;l=p.next()){var m=l.value;if(m.supported&&m.keySystemAccess){l=o.get(m.keySystemAccess.keySystem);var w=A(l);for(l=w.next();!l.done;l=w.next())if(!!l.value.licenseServerUri==u)return m.keySystemAccess}}}return null}function Mg(t,i){var o,u,l,h,p,m,w,C,_,D,b,U,K,Z,B;return j(function(X){switch(X.g){case 1:if(i.size==1&&i.has(""))throw new oe(2,6,6e3);for(u=A(i.values()),l=u.next();!l.done;l=u.next())h=l.value,h.audioCapabilities.length==0&&delete h.audioCapabilities,h.videoCapabilities.length==0&&delete h.videoCapabilities;p=A(t.h.preferredKeySystems),m=p.next();case 2:if(m.done){X.A(4);break}if(w=m.value,!i.has(w)){X.A(3);break}return C=i.get(w),ye(X,6),k(X,navigator.requestMediaKeySystemAccess(w,[C]),8);case 8:return o=X.h,X.return(o);case 6:we(X);case 7:Ct(t.j);case 3:m=p.next(),X.A(2);break;case 4:_=A([!0,!1]),D=_.next();case 9:if(D.done){X.A(11);break}b=D.value,U=A(i.keys()),m=U.next();case 12:if(m.done){D=_.next(),X.A(9);break}if(K=m.value,Z=i.get(K),B=Z.drmInfos.some(function(ge){return!!ge.licenseServerUri}),B!=b){X.A(13);break}return ye(X,15),k(X,navigator.requestMediaKeySystemAccess(K,[Z]),17);case 17:return o=X.h,X.return(o);case 15:we(X);case 16:Ct(t.j);case 13:m=U.next(),X.A(12);break;case 11:return X.return(o)}})}function tE(t){if(t=Ns(t.h.clearKeys),t.size==0)return null;var i=[],o=[];t.forEach(function(l,h){var p=h;p.length!=22&&(p=bt(qo(h),!1)),h=l,h.length!=22&&(h=bt(qo(l),!1)),l={kty:"oct",kid:p,k:h},i.push(l),o.push(l.kid)}),t=JSON.stringify({keys:i});var u=JSON.stringify({kids:o});return u=[{initData:$e(To(u)),initDataType:"keyids"}],{keySystem:"org.w3.clearkey",licenseServerUri:"data:application/json;base64,"+S.btoa(t),distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,serverCertificateUri:"",sessionType:"",initData:u,keyIds:new Set(o)}}function _g(t,i){var o,u,l,h,p;return j(function(m){switch(m.g){case 1:try{o=t.u.createSession("persistent-license")}catch(w){return u=new oe(2,6,6005,w.message),t.m(u),m.return(Promise.reject(u))}return t.s.C(o,"message",function(w){t.l&&t.h.delayLicenseRequestUntilPlayed&&t.l.paused&&!t.M?t.J.push(w):nh(t,w)}),t.s.C(o,"keystatuseschange",function(w){return Rg(t,w)}),l={initData:null,initDataType:null,loaded:!1,Vd:1/0,Ja:null,type:"persistent-license"},t.i.set(o,l),ye(m,2),k(m,o.load(i),4);case 4:return h=m.h,Ct(t.j),h?(l.loaded=!0,sc(t)&&t.o.resolve(),m.return(o)):(t.i.delete(o),t.m(new oe(2,6,6013)),m.return(Promise.resolve()));case 2:p=we(m),Ct(t.j,p),t.i.delete(o),t.m(new oe(2,6,6005,p.message));case 3:return m.return(Promise.resolve())}})}function oc(t,i,o,u){try{var l=t.u.createSession(u)}catch(h){t.m(new oe(2,6,6005,h.message));return}t.s.C(l,"message",function(h){t.l&&t.h.delayLicenseRequestUntilPlayed&&t.l.paused&&!t.M?t.J.push(h):nh(t,h)}),t.s.C(l,"keystatuseschange",function(h){return Rg(t,h)}),t.i.set(l,{initData:o,initDataType:i,loaded:!1,Vd:1/0,Ja:null,type:u});try{o=t.h.initDataTransform(o,i,t.g)}catch(h){i=h,h instanceof oe||(i=new oe(2,6,6016,h)),t.m(i);return}t.h.logLicenseExchange&&bt(o),l.generateRequest(i,o).catch(function(h){if(!t.j.g){t.i.delete(l);var p=h.errorCode;if(p&&p.systemCode){var m=p.systemCode;0>m&&(m+=Math.pow(2,32)),m="0x"+m.toString(16)}t.m(new oe(2,6,6006,h.message,h,m))}})}function nh(t,i){var o,u,l,h,p,m,w,C,_,D,b,U,K,Z;j(function(B){switch(B.g){case 1:return o=i.target,t.h.logLicenseExchange&&bt(i.message),u=t.i.get(o),l=t.g.licenseServerUri,h=t.h.advanced[t.g.keySystem],i.messageType=="individualization-request"&&h&&h.individualizationServer&&(l=h.individualizationServer),p=oi([l],t.h.retryParameters),p.body=i.message,p.method="POST",p.licenseRequestType=i.messageType,p.sessionId=o.sessionId,p.drmInfo=t.g,u&&(p.initData=u.initData,p.initDataType=u.initDataType),Ey(t.g.keySystem)&&Ay(p),m=Date.now(),ye(B,2),C=t.D.kb.request(2,p),k(B,C.promise,4);case 4:w=B.h,_e(B,3);break;case 2:return _=we(B),D=new oe(2,6,6007,_),t.m(D),u&&u.Ja&&u.Ja.reject(D),B.return();case 3:return t.j.g?B.return():(t.H+=(Date.now()-m)/1e3,t.h.logLicenseExchange&&bt(w.data),ye(B,5),k(B,o.update(w.data),7));case 7:_e(B,6);break;case 5:return b=we(B),U=new oe(2,6,6008,b.message),t.m(U),u&&u.Ja&&u.Ja.reject(U),B.return();case 6:if(t.j.g)return B.return();K=new dt("drmsessionupdate"),t.D.onEvent(K),u&&(u.Ja&&u.Ja.resolve(),Z=new ht(function(){u.loaded=!0,sc(t)&&t.o.resolve()}),Z.N(oh)),le(B)}})}function Ay(t){var i=wr(t.body,!0,!0);if(i.includes("PlayReadyKeyMessage")){i=za(i,"PlayReadyKeyMessage");for(var o=A(i.getElementsByTagName("HttpHeader")),u=o.next();!u.done;u=o.next())u=u.value,t.headers[u.getElementsByTagName("name")[0].textContent]=u.getElementsByTagName("value")[0].textContent;t.body=Bi(i.getElementsByTagName("Challenge")[0].textContent)}else t.headers["Content-Type"]="text/xml; charset=utf-8"}function Rg(t,i){i=i.target;var o=t.i.get(i),u=!1;i.keyStatuses.forEach(function(h,p){if(typeof p=="string"){var m=p;p=h,h=m}if(Ey(t.g.keySystem)&&p.byteLength==16&&(navigator.userAgent.match(/Edge?\//)||Ca())){m=Oi(p);var w=m.getUint32(0,!0),C=m.getUint16(4,!0),_=m.getUint16(6,!0);m.setUint32(0,w,!1),m.setUint16(4,C,!1),m.setUint16(6,_,!1)}h!="status-pending"&&(o.loaded=!0),h=="expired"&&(u=!0),p=Qe(p).slice(0,32),t.ia.set(p,h)});var l=i.expiration-Date.now();(0>l||u&&1e3>l)&&o&&!o.Ja&&(t.i.delete(i),i.close().catch(function(){})),sc(t)&&(t.o.resolve(),t.O.N(Cy))}function nE(t){var i=t.ia,o=t.ba;o.clear(),i.forEach(function(u,l){return o.set(l,u)}),i=Array.from(o.values()),i.length&&i.every(function(u){return u=="expired"})&&t.m(new oe(2,6,6014)),t.D.cd(ns(o))}function iE(){var t,i,o,u,l,h,p,m;return j(function(w){return w.g==1?(t="org.w3.clearkey com.widevine.alpha com.microsoft.playready com.microsoft.playready.recommendation com.apple.fps.1_0 com.apple.fps com.adobe.primetime".split(" "),i=[{contentType:'video/mp4; codecs="avc1.42E01E"'},{contentType:'video/webm; codecs="vp8"'}],o={initDataTypes:["cenc"],videoCapabilities:i},u={videoCapabilities:i,persistentState:"required",sessionTypes:["persistent-license"]},l=[u,o],h=new Map,p=function(C){var _,D,b;return j(function(U){switch(U.g){case 1:if(ye(U,2),C==="org.w3.clearkey"&&Pd())throw Error("Unsupported keySystem");return k(U,navigator.requestMediaKeySystemAccess(C,l),4);case 4:return _=U.h,b=(D=_.getConfiguration().sessionTypes)?D.includes("persistent-license"):!1,Qt("Tizen 3")&&(b=!1),h.set(C,{persistentState:b}),k(U,_.createMediaKeys(),5);case 5:_e(U,0);break;case 2:we(U),h.set(C,null),le(U)}})},m=t.map(function(C){return p(C)}),k(w,Promise.all(m),2)):w.return(ns(h))})}function rE(t){var i;return j(function(o){if(o.g==1)return i=new Promise(function(u,l){new ht(l).N(Iy)}),ye(o,2),k(o,Promise.race([Promise.all([t.close(),t.closed]),i]),4);if(o.g!=2)return _e(o,0);we(o),le(o)})}function Lg(t){var i;return j(function(o){return i=Array.from(t.i.entries()),t.i.clear(),k(o,Promise.all(i.map(function(u){u=A(u);var l=u.next().value,h=u.next().value;return j(function(p){if(p.g==1)return ye(p,2),t.da||t.B.includes(l.sessionId)||h.type!=="persistent-license"?k(p,rE(l),5):k(p,l.remove(),5);if(p.g!=2)return _e(p,0);we(p),le(p)})})),0)})}function ih(t,i){if(!t.length)return i;if(!i.length)return t;var o=[];t=A(t);for(var u=t.next();!u.done;u=t.next()){u=u.value;for(var l={},h=A(i),p=h.next();!p.done;l={Da:l.Da},p=h.next())if(p=p.value,u.keySystem==p.keySystem){l.Da=[],l.Da=l.Da.concat(u.initData||[]),l.Da=l.Da.concat(p.initData||[]),l.Da=l.Da.filter(function(m){return function(w,C){return w.keyId===void 0||C===m.Da.findIndex(function(_){return _.keyId===w.keyId})}}(l)),h=u.keyIds&&p.keyIds?new Set([].concat(q(u.keyIds),q(p.keyIds))):u.keyIds||p.keyIds,o.push({keySystem:u.keySystem,licenseServerUri:u.licenseServerUri||p.licenseServerUri,distinctiveIdentifierRequired:u.distinctiveIdentifierRequired||p.distinctiveIdentifierRequired,persistentStateRequired:u.persistentStateRequired||p.persistentStateRequired,videoRobustness:u.videoRobustness||p.videoRobustness,audioRobustness:u.audioRobustness||p.audioRobustness,serverCertificate:u.serverCertificate||p.serverCertificate,serverCertificateUri:u.serverCertificateUri||p.serverCertificateUri,initData:l.Da,keyIds:h});break}}return o}function rh(t){return(t.video?t.video.drmInfos:[]).concat(t.audio?t.audio.drmInfos:[])}function oE(t){t.i.forEach(function(i,o){var u=i.Vd,l=o.expiration;isNaN(l)&&(l=1/0),l!=u&&(t.D.onExpirationUpdated(o.sessionId,l),i.Vd=l)})}function sc(t){return t=t.i.values(),yy(t,function(i){return i.loaded})}function sE(t,i){var o=[];for(i.forEach(function(u,l){o.push({keySystem:l,licenseServerUri:u,distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,serverCertificateUri:"",initData:[],keyIds:new Set})}),t=A(t),i=t.next();!i.done;i=t.next())i=i.value,i.video&&(i.video.drmInfos=o),i.audio&&(i.audio.drmInfos=o)}function Sy(t,i,o,u,l,h){var p={};t=A(t);for(var m=t.next();!m.done;p={oa:p.oa},m=t.next()){if(p.oa=m.value,i.includes(p.oa.licenseServerUri)||i.push(p.oa.licenseServerUri),u.includes(p.oa.serverCertificateUri)||u.push(p.oa.serverCertificateUri),p.oa.serverCertificate&&(o.some(function(_){return function(D){return Xr(D,_.oa.serverCertificate)}}(p))||o.push(p.oa.serverCertificate)),p.oa.initData){m={};for(var w=A(p.oa.initData),C=w.next();!C.done;m={Dc:m.Dc},C=w.next())m.Dc=C.value,l.some(function(_){return function(D){var b=_.Dc;return D.keyId&&D.keyId==b.keyId?!0:D.initDataType==b.initDataType&&Xr(D.initData,b.initData)}}(m))||l.push(m.Dc)}if(p.oa.keyIds)for(m=A(p.oa.keyIds),w=m.next();!w.done;w=m.next())h.add(w.value)}}function uE(t,i,o,u){var l=t.keySystem;l&&(l!="org.w3.clearkey"||!t.licenseServerUri)&&(i.size&&(i=i.get(l)||"",t.licenseServerUri=i),t.keyIds||(t.keyIds=new Set),(o=o.get(l))&&(t.distinctiveIdentifierRequired||(t.distinctiveIdentifierRequired=o.distinctiveIdentifierRequired),t.persistentStateRequired||(t.persistentStateRequired=o.persistentStateRequired),t.videoRobustness||(t.videoRobustness=o.videoRobustness),t.audioRobustness||(t.audioRobustness=o.audioRobustness),t.serverCertificate||(t.serverCertificate=o.serverCertificate),o.sessionType&&(t.sessionType=o.sessionType),t.serverCertificateUri||(t.serverCertificateUri=o.serverCertificateUri)),u[l]&&(t.keySystem=u[l]),S.cast&&S.cast.__platform__&&l=="com.microsoft.playready"&&(t.keySystem="com.chromecast.playready"))}var Iy=1,oh=5,Cy=.5,sh=new Ui(function(){return yt(new Uint8Array([0]))});function ku(){}function ky(t,i,o,u){var l,h,p,m;return j(function(w){if(w.g==1)return u&&(l=Ir[u.toLowerCase()])?w.return(l):(h=Wa(t))&&(p=Mu[h])?w.return(p):u?w.A(2):k(w,Ng(t,i,o),3);if(w.g!=2&&(u=w.h)&&(m=Ir[u]))return w.return(m);throw new oe(2,4,4e3,t)})}function Ng(t,i,o){var u,l,h;return j(function(p){return p.g==1?(u=oi([t],o),u.method="HEAD",k(p,i.request(0,u).promise,2)):(l=p.h,h=l.headers["content-type"],p.return(h?h.toLowerCase().split(";").shift():""))})}function Wa(t){return t=new Si(t).qa.split("/").pop().split("."),t.length==1?"":t.pop().toLowerCase()}pe("shaka.media.ManifestParser",ku),ku.unregisterParserByMime=function(t){delete Ir[t]},ku.registerParserByMime=function(t,i){Ir[t]=i},ku.registerParserByExtension=function(t,i){Mu[t]=i};var Ir={},Mu={};function aE(t){function i(){u=!0}function o(C){h.push(C),Jt(C)}t=$e(t);var u=!1,l,h=[],p=[];if(new Vt().box("moov",o).box("trak",o).box("mdia",o).box("minf",o).box("stbl",o).P("stsd",function(C){l=C,h.push(C),is(C)}).P("encv",i).P("enca",i).P("hev1",function(C){p.push({box:C,lb:1701733238})}).P("hvc1",function(C){p.push({box:C,lb:1701733238})}).P("avc1",function(C){p.push({box:C,lb:1701733238})}).P("avc3",function(C){p.push({box:C,lb:1701733238})}).P("ac-3",function(C){p.push({box:C,lb:1701733217})}).P("ec-3",function(C){p.push({box:C,lb:1701733217})}).P("mp4a",function(C){p.push({box:C,lb:1701733217})}).parse(t),u)return t;if(p.length==0||!l)throw Qe(t),new oe(2,3,3019);p.reverse();for(var m=A(p),w=m.next();!w.done;w=m.next())w=w.value,t=uh(t,l,w.box,h,w.lb);return t}function uh(t,i,o,u,l){var h=My.value(),p=t.subarray(o.start,o.start+o.size),m=Oi(p),w=new Uint8Array(o.size+h.byteLength);for(w.set(p,0),p=Oi(w),p.setUint32(4,l),w.set(h,o.size),l=m.getUint32(4),p.setUint32(o.size+16,l),uc(w,0,w.byteLength),l=new Uint8Array(t.byteLength+w.byteLength),o=Wo()?o.start:o.start+o.size,h=t.subarray(o),l.set(t.subarray(0,o)),l.set(w,o),l.set(h,o+w.byteLength),t=A(u),u=t.next();!u.done;u=t.next())u=u.value,uc(l,u.start,u.size+w.byteLength);return w=Oi(l,i.start),i=Ua(i),t=w.getUint32(i),w.setUint32(i,t+1),l}function uc(t,i,o){t=Oi(t,i),i=t.getUint32(0),i!=0&&(i==1?(t.setUint32(8,o>>32),t.setUint32(12,o&4294967295)):t.setUint32(0,o))}var My=new Ui(function(){return new Uint8Array([0,0,0,80,115,105,110,102,0,0,0,12,102,114,109,97,0,0,0,0,0,0,0,20,115,99,104,109,0,0,0,0,99,101,110,99,0,1,0,0,0,0,0,40,115,99,104,105,0,0,0,32,116,101,110,99,0,0,0,0,0,0,1,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0])});function Dg(t,i,o,u,l){if(u>=l)return null;for(var h=-1,p=-1,m=0;m<o.length;m++)if(o[m].some(function(ce){return ce!=null&&ce.g.trim()!=""})){h=m;break}for(m=o.length-1;0<=m;m--)if(o[m].some(function(ce){return ce!=null&&ce.g.trim()!=""})){p=m;break}if(h===-1||p===-1)return null;for(var w=m=!1,C="white",_="black",D=bs(u,l,m,w,C,_);h<=p;h++){for(var b=o[h],U=-1,K=-1,Z=0;Z<b.length;Z++)if(b[Z]!=null&&b[Z].g.trim()!==""){U=Z;break}for(Z=b.length-1;0<=Z;Z--)if(b[Z]!=null&&b[Z].g.trim()!==""){K=Z;break}if(U===-1||K===-1)b=or(u,l),t.nestedCues.push(b);else{for(;U<=K;U++)if(Z=b[U]){var B=Z.l,X=Z.i,ge=Z.j,ne=Z.h;(B!=m||X!=w||ge!=C||ne!=_)&&(D.payload&&t.nestedCues.push(D),D=bs(u,l,B,X,ge,ne),m=B,w=X,C=ge,_=ne),D.payload+=Z.g}else D.payload+=" ";D.payload&&t.nestedCues.push(D),h!==p&&(D=or(u,l),t.nestedCues.push(D)),D=bs(u,l,m,w,C,_)}}return t.nestedCues.length?{cue:t,stream:i}:null}function bs(t,i,o,u,l,h){return t=new Ht(t,i,""),o&&t.textDecoration.push("underline"),u&&(t.fontStyle="italic"),t.color=l,t.backgroundColor=h,t}function or(t,i){return t=new Ht(t,i,""),t.lineBreak=!0,t}function Ps(t,i,o,u,l){this.g=t,this.l=i,this.i=o,this.h=u,this.j=l}function bg(t,i){this.i=[],this.g=1,this.h=0,this.u=t,this.s=i,this.j=this.m=!1,this.l="white",this.o="black",qa(this)}function ah(t,i,o){return Dg(new Ht(i,o,""),"CC"+(t.u<<1|t.s+1),t.i,i,o)}function qa(t){to(t,0,15),t.g=1}function Xa(t,i,o){if(!(32>o||127<o)){var u="";switch(i){case Ya:u=$a.has(o)?$a.get(o):String.fromCharCode(o);break;case Og:u=Qa.get(o);break;case lh:t.i[t.g].pop(),u=_y.get(o);break;case ac:t.i[t.g].pop(),u=ss.get(o)}u&&t.i[t.g].push(new Ps(u,t.m,t.j,t.o,t.l))}}function Pg(t,i,o,u){if(!(0>o||0>i))if(i>=o)for(--u;0<=u;u--)t.i[i+u]=t.i[o+u].map(function(h){return h});else for(var l=0;l<u;l++)t.i[i+l]=t.i[o+l].map(function(h){return h})}function to(t,i,o){for(var u=0;u<=o;u++)t.i[i+u]=[]}var Ya=0,Og=1,lh=2,ac=3,$a=new Map([[39,"’"],[42,"á"],[92,"é"],[92,"é"],[94,"í"],[95,"ó"],[96,"ú"],[123,"ç"],[124,"÷"],[125,"Ñ"],[126,"ñ"],[127,"█"]]),Qa=new Map([[48,"®"],[49,"°"],[50,"½"],[51,"¿"],[52,"™"],[53,"¢"],[54,"£"],[55,"♪"],[56,"à"],[57,"⠀"],[58,"è"],[59,"â"],[60,"ê"],[61,"î"],[62,"ô"],[63,"û"]]),_y=new Map([[32,"Á"],[33,"É"],[34,"Ó"],[35,"Ú"],[36,"Ü"],[37,"ü"],[38,"‘"],[39,"¡"],[40,"*"],[41,"'"],[42,"─"],[43,"©"],[44,"℠"],[45,"·"],[46,"“"],[47,"”"],[48,"À"],[49,"Â"],[50,"Ç"],[51,"È"],[52,"Ê"],[53,"Ë"],[54,"ë"],[55,"Î"],[56,"Ï"],[57,"ï"],[58,"Ô"],[59,"Ù"],[60,"ù"],[61,"Û"],[62,"«"],[63,"»"]]),ss=new Map([[32,"Ã"],[33,"ã"],[34,"Í"],[35,"Ì"],[36,"ì"],[37,"Ò"],[38,"ò"],[39,"Õ"],[40,"õ"],[41,"{"],[42,"}"],[43,"\\"],[44,"^"],[45,"_"],[46,"|"],[47,"~"],[48,"Ä"],[49,"ä"],[50,"Ö"],[51,"ö"],[52,"ß"],[53,"¥"],[54,"¤"],[55,"│"],[56,"Å"],[57,"å"],[58,"Ø"],[59,"ø"],[60,"┌"],[61,"┐"],[62,"└"],[63,"┘"]]);function Os(t,i){this.h=Ry,this.o=new bg(t,i),this.i=new bg(t,i),this.l=new bg(t,i),this.g=this.i,this.j=0,this.m=null}function ch(t,i,o){t.g=t.i;var u=t.g,l=null;return t.h!==dh&&t.h!==lc&&(l=ah(u,t.j,o),o=t.i,o.g=0<o.h?o.h:0,to(o,0,15),o=t.l,o.g=0<o.h?o.h:0,to(o,0,15),u.g=15),t.h=dh,u.h=i,l}function Ug(t){t.h=lE,t.g=t.l,t.g.h=0}function jg(t){Kn("Cea608DataChannel","CEA-608 text mode entered, but is unsupported"),t.g=t.o,t.h=lc}var Ry=0,lE=1,dh=3,lc=4,hh="black green blue cyan red yellow magenta black".split(" "),fh="white green blue cyan red yellow magenta white_italics".split(" ");function Bg(){this.l=!1,this.B=this.F=0,this.D=Ny,this.i=[],this.g=this.h=this.j=0,this.u=this.o=!1,this.s="white",this.m="black",ph(this)}function ph(t){t.i=[];for(var i=0;16>i;i++)t.i.push(Fg())}function Fg(){for(var t=[],i=0;42>i;i++)t.push(null);return t}function _u(t,i){cc(t)&&(t.i[t.h][t.g]=new Ps(i,t.u,t.o,t.m,t.s),t.g++)}function cc(t){var i=t.g<t.B&&0<=t.g;return t.h<t.F&&0<=t.h&&i}Bg.prototype.isVisible=function(){return this.l};function no(t,i,o){var u=new Ht(t.j,i,"");return u.textAlign=t.D===cE?"left":t.D===Ly?"right":Wr,(o=Dg(u,"svc"+o,t.i,t.j,i))&&(t.j=i),o}var cE=0,Ly=1,Ny=2;function zg(){this.i=[],this.h=null,this.g=0}function Gg(t,i){i.type===3?(t.g=2*(i.value&63)-1,t.h=[]):t.h&&(0<t.g&&(t.h.push(i),t.g--),t.g===0&&(t.i.push(new Mo(t.h)),t.h=null,t.g=0))}function Mo(t){this.g=0,this.h=t}Mo.prototype.ga=function(){return this.g<this.h.length},Mo.prototype.Z=function(){return this.g};function En(t){if(!t.ga())throw new oe(2,2,3e3);return t.h[t.g++]}Mo.prototype.skip=function(t){if(this.g+t>this.h.length)throw new oe(2,2,3e3);this.g+=t};function Ru(t){this.i=t,this.h=[null,null,null,null,null,null,null,null],this.g=null}function dE(t,i,o,u){if(128<=o&&135>=o)u=o&7,t.h[u]&&(t.g=t.h[u]);else{if(o===136){o=En(i).value,i=null,o=A(dc(t,o));for(var l=o.next();!l.done;l=o.next())l=t.h[l.value],l.isVisible()&&(i=no(l,u,t.i)),ph(l);return i}if(o===137)for(i=En(i).value,i=A(dc(t,i)),o=i.next();!o.done;o=i.next())o=t.h[o.value],o.isVisible()||(o.j=u),o.l=!0;else{if(o===138){for(o=En(i).value,i=null,o=A(dc(t,o)),l=o.next();!l.done;l=o.next())l=t.h[l.value],l.isVisible()&&(i=no(l,u,t.i)),l.l=!1;return i}if(o===139){for(o=En(i).value,i=null,o=A(dc(t,o)),l=o.next();!l.done;l=o.next())l=t.h[l.value],l.isVisible()?i=no(l,u,t.i):l.j=u,l.l=!l.l;return i}if(o===140)return i=En(i).value,Dy(t,i,u);if(o===143)return u=Dy(t,255,u),by(t),u;if(o===144)i.skip(1),u=En(i).value,t.g&&(t.g.o=0<(u&128),t.g.u=0<(u&64));else if(o===145)u=En(i).value,o=En(i).value,i.skip(1),t.g&&(i=Py((o&48)>>4,(o&12)>>2,o&3),t.g.s=Py((u&48)>>4,(u&12)>>2,u&3),t.g.m=i);else if(o===146)u=En(i).value,i=En(i).value,t.g&&(t=t.g,t.h=u&15,t.g=i&63);else if(o===151)i.skip(1),i.skip(1),u=En(i).value,i.skip(1),t.g&&(t.g.D=u&3);else if(152<=o&&159>=o){if(o=(o&15)-8,l=t.h[o]!==null,!l){var h=new Bg;h.j=u,t.h[o]=h}u=En(i).value,En(i),En(i),h=En(i).value;var p=En(i).value;i=En(i).value,l&&!(i&7)||(i=t.h[o],i.h=0,i.g=0,i.u=!1,i.o=!1,i.s="white",i.m="black"),i=t.h[o],i.l=0<(u&32),i.F=(h&15)+1,i.B=(p&63)+1,t.g=t.h[o]}}}return null}function dc(t,i){for(var o=[],u=0;8>u;u++)(i&1)===1&&t.h[u]&&o.push(u),i>>=1;return o}function Dy(t,i,o){var u=null;i=A(dc(t,i));for(var l=i.next();!l.done;l=i.next()){l=l.value;var h=t.h[l];h.isVisible()&&(u=no(h,o,t.i)),t.h[l]=null}return u}function by(t){t.g=null,t.h=[null,null,null,null,null,null,null,null]}function Py(t,i,o){var u={0:0,1:0,2:1,3:1};return t=u[t],i=u[i],o=u[o],Dn[t<<2|i<<1|o]}var hc=new Map([[32," "],[33," "],[37,"…"],[42,"Š"],[44,"Œ"],[48,"█"],[49,"‘"],[50,"’"],[51,"“"],[52,"”"],[53,"•"],[57,"™"],[58,"š"],[60,"œ"],[61,"℠"],[63,"Ÿ"],[118,"⅛"],[119,"⅜"],[120,"⅝"],[121,"⅞"],[122,"│"],[123,"┐"],[124,"└"],[125,"─"],[126,"┘"],[127,"┌"]]),Dn="black blue green cyan red magenta yellow white".split(" ");function hE(){this.h=[],this.g=[],this.i=new zg,this.l=0,this.s=new Map([["CC1",new Os(0,0)],["CC2",new Os(0,1)],["CC3",new Os(1,0)],["CC4",new Os(1,1)]]),this.o=this.m=0,this.j=new Map,Vg(this)}function Vg(t){t.m=0,t.o=0,t=A(t.s.values());for(var i=t.next();!i.done;i=t.next())i=i.value,i.h=2,i.g=i.i,i.m=null,qa(i.i),qa(i.l),qa(i.o)}function fc(t){function i(h,p){return h.pts-p.pts||h.order-p.order}var o=[];t.h.sort(i),t.g.sort(i);for(var u=A(t.h),l=u.next();!l.done;l=u.next())(l=Oy(t,l.value))&&o.push(l);for(u=A(t.g),l=u.next();!l.done;l=u.next())Gg(t.i,l.value);for(u=A(t.i.i),l=u.next();!l.done;l=u.next())l=Uy(t,l.value),o.push.apply(o,q(l));return t.i.i=[],t.h=[],t.g=[],o}function Oy(t,i){var o=i.type;if((i.xa&112)===16){var u=i.xa>>3&1;o===0?t.m=u:t.o=u}if(o=t.s.get("CC"+(o<<1|(o?t.o:t.m)+1)),i.xa===255&&i.La===255||!i.xa&&!i.La||!Kg(i.xa)||!Kg(i.La))return 45<=++t.l&&Vg(t),null;if(t.l=0,i.xa&=127,i.La&=127,!i.xa&&!i.La)return null;if(t=null,(i.xa&112)===16)e:{if(u=i.xa,t=i.La,o.m===(u<<8|t))o.m=null;else if(o.m=u<<8|t,(u&240)===16&&(t&192)===64){i=[11,11,1,2,3,4,12,13,14,15,5,6,7,8,9,10][(u&7)<<1|t>>5&1];var l=(t&30)>>1;u="white";var h=!1;if(7>l?u=fh[l]:l===7&&(h=!0),t=(t&1)===1,o.h!==lc){if(l=o.g,o.h===dh&&i!==l.g){var p=1+i-l.h;Pg(l,p,1+l.g-l.h,l.h),to(l,0,p-1),to(l,i+1,15-i)}l.g=i,o.g.m=t,o.g.j=h,o.g.l=u,o.g.o="black"}}else if((u&247)===17&&(t&240)===32)o.g.m=!1,o.g.j=!1,o.g.l="white",Xa(o.g,Ya,32),u=!1,i=fh[(t&14)>>1],i==="white_italics"&&(i="white",u=!0),o.g.m=(t&1)===1,o.g.j=u,o.g.l=i;else if((u&247)===16&&(t&240)===32||(u&247)===23&&(t&255)===45)i="black",!(u&7)&&(i=hh[(t&14)>>1]),o.g.o=i;else if((u&247)===17&&(t&240)===48)Xa(o.g,Og,t);else if((u&246)===18&&(t&224)===32)Xa(o.g,u&1?ac:lh,t);else if((u&246)===20&&(t&240)===32){switch(t=i.pts,u=null,i.La){case 32:Ug(o);break;case 33:o=o.g,o.i[o.g].pop();break;case 37:u=ch(o,2,t);break;case 38:u=ch(o,3,t);break;case 39:u=ch(o,4,t);break;case 40:Xa(o.g,Ya,32);break;case 41:o.h=2,o.g=o.i,o.g.h=0,o.j=t;break;case 42:qa(o.o),jg(o);break;case 43:jg(o);break;case 44:i=o.i,u=null,o.h!==lc&&(u=ah(i,o.j,t)),to(i,0,15);break;case 45:i=o.g,o.h!==dh?u=null:(u=ah(i,o.j,t),h=i.g-i.h+1,Pg(i,h-1,h,i.h),to(i,0,h-1),to(i,i.g,15-i.g),o.j=t);break;case 46:to(o.l,0,15);break;case 47:i=null,o.h!==lc&&(i=ah(o.i,o.j,t)),u=o.l,o.l=o.i,o.i=u,Ug(o),o.j=t,u=i}t=u;break e}t=null}else u=i.La,Xa(o.g,Ya,i.xa),Xa(o.g,Ya,u);return t}function Uy(t,i){var o=[];try{for(;i.ga();){var u=En(i).value,l=(u&224)>>5,h=u&31;if(l===7&&h!=0&&(l=En(i).value&63),l!=0){t.j.has(l)||t.j.set(l,new Ru(l));for(var p=t.j.get(l),m=i.Z();i.Z()-m<h;){l=i;var w=En(l),C=w.value,_=w.pts;if(C===16){var D=En(l);C=C<<16|D.value}if(0<=C&&31>=C){var b=_;if(p.g){var U=p.g;switch(l=null,C){case 8:!cc(U)||0>=U.g&&0>=U.h||(0>=U.g?(U.g=U.B-1,U.h--):U.g--,U.i[U.h][U.g]=null);break;case 13:if(U.isVisible()&&(l=no(U,b,p.i)),U.h+1>=U.F){b=U;for(var K=0,Z=1;16>Z;Z++,K++)b.i[K]=b.i[Z];for(Z=0;1>Z;Z++,K++)b.i[K]=Fg()}else U.h++;U.g=0;break;case 14:U.isVisible()&&(l=no(U,b,p.i)),U.i[U.h]=Fg(),U.g=0;break;case 12:U.isVisible()&&(l=no(U,b,p.i)),ph(U),b=U,b.h=0,b.g=0}var B=l}else B=null}else if(128<=C&&159>=C)B=dE(p,l,C,_);else{if(4096<=C&&4127>=C)b=C&255,8<=b&&15>=b?l.skip(1):16<=b&&23>=b?l.skip(2):24<=b&&31>=b&&l.skip(3);else if(4224<=C&&4255>=C)b=C&255,128<=b&&135>=b?l.skip(4):136<=b&&143>=b&&l.skip(5);else if(32<=C&&127>=C)l=C,p.g&&(l===127?_u(p.g,"♪"):_u(p.g,String.fromCharCode(l)));else if(160<=C&&255>=C)p.g&&_u(p.g,String.fromCharCode(C));else if(4128<=C&&4223>=C){if(l=C&255,p.g)if(hc.has(l)){var X=hc.get(l);_u(p.g,X)}else _u(p.g,"_")}else 4256<=C&&4351>=C&&p.g&&((C&255)!=160?_u(p.g,"_"):_u(p.g,"[CC]"));B=null}(l=B)&&o.push(l)}}}}catch(ge){if(ge instanceof oe&&ge.code===3e3)Kn("CEA708_INVALID_DATA","Buffer read out of bounds / invalid CEA-708 Data.");else throw ge}return o}function Kg(t){for(var i=0;t;)i^=t&1,t>>=1;return i===1}function gh(){}gh.prototype.init=function(){},gh.prototype.parse=function(){return[]};function jy(t,i){var o=null,u=null,l=null,h=t.K();return i&1&&(l=t.$a()),i&2&&t.skip(4),i&8&&(o=t.K()),i&16&&(u=t.K()),{trackId:h,Ce:o,xf:u,th:l}}function By(t,i){return{we:i==1?t.$a():t.K()}}function pc(t,i){return i==1?(t.skip(8),t.skip(8)):(t.skip(4),t.skip(4)),{timescale:t.K()}}function Fy(t,i,o){var u=t.K(),l=[],h=null;o&1&&(h=t.K()),o&4&&t.skip(4);for(var p=0;p<u;p++){var m={ee:null,sampleSize:null,ed:null};o&256&&(m.ee=t.K()),o&512&&(m.sampleSize=t.K()),o&1024&&t.skip(4),o&2048&&(m.ed=i==0?t.K():t.Pe()),l.push(m)}return{yh:u,Re:l,wf:h}}function Hg(){this.j=new Map,this.i=this.h=0,this.g=Wg}Hg.prototype.init=function(t){function i(h){h=h.name,h in gc&&(o.g=gc[h])}var o=this,u=[],l=[];if(new Vt().box("moov",Jt).box("mvex",Jt).P("trex",function(h){var p=h.reader;p.skip(4),p.skip(4),h=p.K(),p=p.K(),o.h=h,o.i=p}).box("trak",Jt).P("tkhd",function(h){var p=h.reader;h.version==1?(p.skip(8),p.skip(8)):(p.skip(4),p.skip(4)),h=p.K(),u.push(h)}).box("mdia",Jt).P("mdhd",function(h){h=pc(h.reader,h.version),l.push(h.timescale)}).box("minf",Jt).box("stbl",Jt).P("stsd",is).box("avc1",i).box("avc3",i).box("hev1",i).box("hvc1",i).box("dvh1",i).box("dvhe",i).box("encv",Qd).box("sinf",Jt).box("frma",function(h){h=h.reader.K(),h=Ar(h),h in gc&&(o.g=gc[h])}).parse(t,!0),!u.length||!l.length||u.length!=l.length)throw new oe(2,2,2010);this.g==Wg&&ze("Unable to determine bitstream format for CEA parsing!"),u.forEach(function(h,p){o.j.set(h,l[p])})},Hg.prototype.parse=function(t){var i=this;if(this.g==Wg)return[];var o=[],u=this.h,l=this.i,h=[],p=null,m=null,w=null,C=9e4;return new Vt().box("moof",function(_){p=_.start,Jt(_)}).box("traf",Jt).P("trun",function(_){_=Fy(_.reader,_.version,_.flags),h=_.Re,m=_.wf}).P("tfhd",function(_){_=jy(_.reader,_.flags),u=_.Ce||i.h,l=_.xf||i.i,_=_.trackId,i.j.has(_)&&(C=i.j.get(_))}).P("tfdt",function(_){w=By(_.reader,_.version).we}).box("mdat",function(_){if(w===null)throw new oe(2,2,2010);e:{var D=_.reader,b=w,U=C,K=u,Z=l,B=h,X=0,ge=Z;for(B.length&&(ge=B[0].sampleSize||Z),D.skip((p||0)+(m||0)-_.start-8);D.ga();){_=D.K();var ne=D.Ra();switch(i.g){case mh:ne&=31,ne=ne==6;break;case Lu:ne=ne>>1&63,ne=ne==39||ne==40;break;default:break e}if(ne){ne=0,B.length>X&&(ne=B[X].ed||0),ne=(b+ne)/U;for(var ce=[],de,Ee=D.Za(_-1),Ie=de=0;Ie<Ee.length;)de==2&&Ee[Ie]==3?(de=0,Ee=[].concat(q(Ee)),Ee.splice(Ie,1),Ee=new Uint8Array(Ee)):Ee[Ie]==0?de++:de=0,Ie++;for(de=Ee,Ie=0;Ie<de.length;){for(Ee=0;de[Ie]==255;)Ee+=255,Ie++;Ee+=de[Ie++];for(var be=0;de[Ie]==255;)be+=255,Ie++;be+=de[Ie++],Ee==4&&ce.push(de.subarray(Ie,Ie+be)),Ie+=be}for(ce=A(ce),de=ce.next();!de.done;de=ce.next())o.push({ig:de.value,pts:ne})}else try{D.skip(_-1)}catch(Pe){break}ge-=_+4,ge==0&&(b=B.length>X?b+(B[X].ee||K):b+K,X++,ge=B.length>X&&B[X].sampleSize||Z)}}}).parse(t,!1),o};var Wg=0,mh=1,Lu=2,gc={avc1:mh,avc3:mh,hev1:Lu,hvc1:Lu,dvh1:Lu,dvhe:Lu};function qg(t){this.h=new gh,t.includes("video/mp4")&&(this.h=new Hg),this.g=new hE}qg.prototype.init=function(t){this.h.init(t)};function Xg(t,i){i=t.h.parse(i),i=A(i);for(var o=i.next();!o.done;o=i.next()){var u=o.value,l=$e(u.ig);if(0<l.length&&(o=t.g,u=u.pts,l=new Ve(l,0),l.Ra()===181&&l.$d()===49&&l.K()===1195456820&&l.Ra()===3)){var h=l.Ra();if(h&64){h&=31,l.skip(1);for(var p=0;p<h;p++){var m=l.Ra(),w=(m&4)>>2,C=l.Ra(),_=l.Ra();w&&(m&=3,m===0||m===1?o.h.push({pts:u,type:m,xa:C,La:_,order:o.h.length}):(o.g.push({pts:u,type:m,value:C,order:o.g.length}),o.g.push({pts:u,type:2,value:_,order:o.g.length})))}}}}return fc(t.g)}function sr(t,i,o,u,l){this.ya=t,this.Ba=i,this.ka=o,this.Od=u===void 0?null:u,this.timescale=l}sr.prototype.lc=function(){return this.Ba},sr.prototype.hc=function(){return this.ka};function Yg(t,i){return t&&i?t.lc()==i.lc()&&t.hc()==i.hc()&&Es(t.ya(),i.ya()):t==i}pe("shaka.media.InitSegmentReference",sr),sr.prototype.getEndByte=sr.prototype.hc,sr.prototype.getStartByte=sr.prototype.lc;function St(t,i,o,u,l,h,p,m,w,C,_,D,b,U,K){C=C===void 0?[]:C,U=U===void 0?Za:U,this.startTime=t,this.j=this.endTime=i,this.u=o,this.Ba=u,this.ka=l,this.h=h,this.timestampOffset=p,this.appendWindowStart=m,this.appendWindowEnd=w,this.i=C,this.tilesLayout=_===void 0?"":_,this.s=D===void 0?null:D,this.g=b===void 0?null:b,this.status=U,this.l=K===void 0?null:K,this.o=null,this.m=0}v=St.prototype,v.ya=function(){return this.u()},v.getStartTime=function(){return this.startTime},v.Ef=function(){return this.endTime},v.lc=function(){return this.Ba},v.hc=function(){return this.ka},v.Vf=function(){return this.tilesLayout},v.Uf=function(){return this.s},v.Eb=function(){return this.status},v.bg=function(){this.status=Ja},v.Ye=function(t){this.o=t},v.Sf=function(){return this.o},v.offset=function(t){this.startTime+=t,this.endTime+=t,this.j+=t;for(var i=A(this.i),o=i.next();!o.done;o=i.next())o=o.value,o.startTime+=t,o.endTime+=t,o.j+=t},v.oe=function(t){this.g==null?Rn("Sync attempted without sync time!"):(t=this.g-t-this.startTime,.001<=Math.abs(t)&&this.offset(t))},pe("shaka.media.SegmentReference",St),St.prototype.syncAgainst=St.prototype.oe,St.prototype.offset=St.prototype.offset,St.prototype.getThumbnailSprite=St.prototype.Sf,St.prototype.setThumbnailSprite=St.prototype.Ye,St.prototype.markAsUnavailable=St.prototype.bg,St.prototype.getStatus=St.prototype.Eb,St.prototype.getTileDuration=St.prototype.Uf,St.prototype.getTilesLayout=St.prototype.Vf,St.prototype.getEndByte=St.prototype.hc,St.prototype.getStartByte=St.prototype.lc,St.prototype.getEndTime=St.prototype.Ef,St.prototype.getStartTime=St.prototype.getStartTime,St.prototype.getUris=St.prototype.ya;var Za=0,Ja=1;St.Status={Hg:Za,qh:Ja,Xg:2};function mc(t){return!t||t.length==1&&1e-6>t.end(0)-t.start(0)?null:t.length==1&&0>t.start(0)?0:t.length?t.start(0):null}function vh(t){return!t||t.length==1&&1e-6>t.end(0)-t.start(0)?null:t.length?t.end(t.length-1):null}function $g(t,i){return!t||!t.length||t.length==1&&1e-6>t.end(0)-t.start(0)||i>t.end(t.length-1)?!1:i>=t.start(0)}function ur(t,i){if(!t||!t.length||t.length==1&&1e-6>t.end(0)-t.start(0))return 0;var o=0;t=A(ft(t));for(var u=t.next();!u.done;u=t.next()){var l=u.value;u=l.start,l=l.end,l>i&&(o+=l-Math.max(u,i))}return o}function fE(t,i,o){return!t||!t.length||t.length==1&&1e-6>t.end(0)-t.start(0)?null:(t=ft(t).findIndex(function(u,l,h){return u.start>i&&(l==0||h[l-1].end-i<=o)}),0<=t?t:null)}function ft(t){if(!t)return[];for(var i=[],o=0;o<t.length;o++)i.push({start:t.start(o),end:t.end(o)});return i}function vc(){}function Qg(t,i){var o=(t[i]&127)<<21;return o|=(t[i+1]&127)<<14,o|=(t[i+2]&127)<<7,o|=t[i+3]&127}function zy(t){var i={key:t.type,description:"",data:""};if(t.type==="TXXX"){if(2>t.size||t.data[0]!==3)return null;var o=t.data.subarray(1).indexOf(0);if(o===-1)return null;var u=an($e(t.data,1,o));return t=an($e(t.data,2+o)).replace(/\0*$/,""),i.description=u,i.data=t,i}return t.type==="WXXX"?2>t.size||t.data[0]!==3||(o=t.data.subarray(1).indexOf(0),o===-1)?null:(u=an($e(t.data,1,o)),t=an($e(t.data,2+o)).replace(/\0*$/,""),i.description=u,i.data=t,i):t.type==="PRIV"?2>t.size||(u=t.data.indexOf(0),u===-1)?null:(u=an($e(t.data,0,u)),t=yt(t.data.subarray(u.length+1)),i.description=u,i.data=t,i):t.type[0]==="T"?2>t.size||t.data[0]!==3?null:(t=an(t.data.subarray(1)).replace(/\0*$/,""),i.data=t,i):t.type[0]==="W"?(t=an(t.data).replace(/\0*$/,""),i.data=t,i):t.data?(i.data=yt(t.data),i):null}function el(t){for(var i=0,o=[];i+10<=t.length&&t[i]===73&&t[i+1]===68&&t[i+2]===51&&255>t[i+3]&&255>t[i+4]&&128>t[i+6]&&128>t[i+7]&&128>t[i+8]&&128>t[i+9];){var u=Qg(t,i+6);for(t[i+5]>>6&1&&(i+=10),i+=10,u=i+u;i+10<u;){var l=t.subarray(i),h=Qg(l,4);l={type:String.fromCharCode(l[0],l[1],l[2],l[3]),size:h,data:l.subarray(10,10+h)},(h=zy(l))&&o.push(h),i+=l.size+10}i+10<=t.length&&t[i]===51&&t[i+1]===68&&t[i+2]===73&&255>t[i+3]&&255>t[i+4]&&128>t[i+6]&&128>t[i+7]&&128>t[i+8]&&128>t[i+9]&&(i+=10)}return o}pe("shaka.util.Id3Utils",vc),vc.getID3Frames=el;function tl(){this.o=null,this.s=!1,this.l=this.m=null,this.B=[],this.g=this.h=null,this.u=[],this.j=null,this.i=[]}tl.prototype.parse=function(t){if(564>t.length)return this;for(var i=Math.max(0,us(t)),o=t.length-(t.length+i)%188,u=!1,l=i;l<o;l+=188)if(t[l]===71){var h=!!(t[l+1]&64),p=((t[l+1]&31)<<8)+t[l+2];if(1<(t[l+3]&48)>>4){var m=l+5+t[l+4];if(m===l+188)continue}else m=l+4;switch(p){case 0:h&&(m+=t[m]+1),this.o=(t[m+10]&31)<<8|t[m+11];break;case 17:case 8191:break;case this.o:h&&(m+=t[m]+1),h=t,p={audio:-1,video:-1,Ed:-1,audioCodec:"",videoCodec:""};var w=m+3+((h[m+1]&15)<<8|h[m+2])-4;for(m+=12+((h[m+10]&15)<<8|h[m+11]);m<w;){var C=(h[m+1]&31)<<8|h[m+2];switch(h[m]){case 15:p.audio===-1&&(p.audio=C,p.audioCodec="aac");break;case 21:p.Ed===-1&&(p.Ed=C);break;case 27:p.video===-1&&(p.video=C,p.videoCodec="avc");break;case 3:case 4:p.audio===-1&&(p.audio=C,p.audioCodec="mp3");break;case 36:p.video===-1&&(p.video=C,p.videoCodec="hvc")}m+=((h[m+3]&15)<<8|h[m+4])+5}h=p,this.l==null&&(this.l=h.video),this.g==null&&(this.g=h.audio),this.j==null&&(this.j=h.Ed),u&&!this.s&&(u=!1,l=i-188),this.s=!0;break;case this.l:h=t.subarray(m,l+188),this.m==null&&(m=yh(h))&&m.pts!=null&&(this.m=m.pts/9e4),this.B.push(h);break;case this.g:h=t.subarray(m,l+188),this.h==null&&(m=yh(h))&&m.pts!=null&&(this.h=m.pts/9e4),this.u.push(h);break;case this.j:this.i.push(t.subarray(m,l+188));break;default:u=!0}}return this};function yh(t){if((t[0]<<16|t[1]<<8|t[2])!==1)return null;var i={data:new Uint8Array(0),xh:6+(t[4]<<8|t[5]),pts:null,dts:null},o=t[7];return o&192&&(i.pts=536870912*(t[9]&14)+4194304*(t[10]&255)+16384*(t[11]&254)+128*(t[12]&255)+(t[13]&254)/2,i.dts=i.pts,o&64&&(i.dts=536870912*(t[14]&14)+4194304*(t[15]&255)+16384*(t[16]&254)+128*(t[17]&255)+(t[18]&254)/2)),i.data=t.subarray(9+t[8]),i}function pE(t){for(var i=[],o=new Uint8Array(0),u=t.i.length-1;0<=u;u--){o=Ci(t.i[u],o);var l=yh(o);l&&(i.unshift({cueTime:l.pts?l.pts/9e4:null,data:l.data,frames:el(l.data),dts:l.dts,pts:l.pts}),o=new Uint8Array(0))}return i}tl.prototype.getStartTime=function(){return{audio:this.h,video:this.m}};function us(t){for(var i=Math.min(1e3,t.length-564),o=0;o<i;){if(t[o]===71&&t[o+188]===71&&t[o+376]===71)return o;o++}return-1}pe("shaka.util.TsParser",tl);function nl(t,i,o){this.g=null,this.i=-1,this.j=t,this.h=i,this.l=o,typeof libDPIModule>"u"&&ze("Could not Find LCEVC Library dependencies on this page"),typeof LcevcDil>"u"?ze("Could not Find LCEVC Library on this page"):LcevcDil.SupportObject.SupportStatus||ze(LcevcDil.SupportObject.SupportError),typeof LcevcDil<"u"&&typeof libDPIModule<"u"&&this.h instanceof HTMLCanvasElement&&LcevcDil.SupportObject.SupportStatus&&!this.g&&LcevcDil.SupportObject.webGLSupport(this.h)&&(this.h.classList.remove("shaka-hidden"),this.g=new LcevcDil.LcevcDil(this.j,this.h,this.l))}nl.prototype.release=function(){this.g&&(this.g.close(),this.g=null)};function Zg(t,i){var o=gE;switch(i.mimeType){case"video/webm":o=xh;break;case"video/mp4":o=Th}t.g&&(t.i=i.id,t.g.setLevelSwitching(i.id,!0),t.g.setContainerFormat(o))}pe("shaka.lcevc.Dil",nl),nl.prototype.release=nl.prototype.release;var gE=0,xh=1,Th=2;function wh(t,i,o,u){var l=this;this.j=t,this.F=null,this.m=i,this.h={},this.L={},this.O={},this.g=null,this.H=!1,this.V=o||function(){},this.D=u||null,this.i={},this.u=new Xt,this.o={},this.s=null,this.J=new Wt,this.l=mE(this,this.J),this.G=new Mi(function(){return Gy(l)}),this.M="",this.B=!1,this.W=new Wt}function mE(t,i){var o=new MediaSource;return t.u.ma(o,"sourceopen",function(){URL.revokeObjectURL(t.M),i.resolve()}),t.M=il(o),t.j.src=t.M,o}v=wh.prototype,v.destroy=function(){return this.G.destroy()};function Gy(t){var i,o,u,l,h,p,m,w;return j(function(C){if(C.g==1){i=[];for(o in t.i)for(u=t.i[o],l=u[0],t.i[o]=u.slice(0,1),l&&i.push(l.p.catch(Hl)),h=A(u.slice(1)),p=h.next();!p.done;p=h.next())m=p.value,m.p.reject(new oe(2,7,7003,void 0));t.g&&i.push(t.g.destroy()),t.m&&i.push(t.m.destroy());for(w in t.o)i.push(t.o[w].destroy());return k(C,Promise.all(i),2)}t.u&&(t.u.release(),t.u=null),t.j&&(t.j.removeAttribute("src"),t.j.load(),t.j=null),t.F=null,t.l=null,t.g=null,t.m=null,t.h={},t.o={},t.s=null,t.i={},t.D=null,le(C)})}v.init=function(t,i,o){o=o===void 0?!1:o;var u=this,l,h,p,m,w,C,_,D;return j(function(b){if(b.g==1)return l=xt,k(b,u.J,2);for(u.B=o,h={},p=A(t.keys()),m=p.next();!m.done;h={na:h.na},m=p.next())h.na=m.value,w=t.get(h.na),C=ki(w.mimeType,w.codecs),h.na==l.X?as(u,C,o):(!i&&ii(C)||!pu(C,h.na)||(u.o[h.na]=new tg(C),C=jd(h.na,C)),_=C+u.F.sourceBufferExtraFeatures,D=u.l.addSourceBuffer(_),u.u.C(D,"error",function(U){return function(){u.i[U.na][0].p.reject(new oe(2,3,3014,u.j.error?u.j.error.code:0))}}(h)),u.u.C(D,"updateend",function(U){return function(){return Nu(u,U.na)}}(h)),u.h[h.na]=D,u.L[h.na]=C,u.i[h.na]=[],u.O[h.na]=!!w.drmInfos.length);le(b)})},v.configure=function(t){this.F=t};function as(t,i,o){t.g||(t.g=new fi(t.m));var u=t.g;t=t.H,i!="application/cea-608"&&i!="application/cea-708"&&(u.j=(0,vn[i])(),u.j.setSequenceMode?u.j.setSequenceMode(o):ze('Text parsers should have a "setSequenceMode" method!'),u.u=t)}function Jg(t){return t.l?t.l.readyState=="ended":!0}function Vy(t,i){return i==Lt?t.g.g:mc(Us(t,i))}function Eh(t,i){return i==Lt?t.g.h:vh(Us(t,i))}function vE(t,i,o){return i==Lt?(t=t.g,t.h==null||t.h<o?0:t.h-Math.max(o,t.g)):(t=Us(t,i),ur(t,o))}v.Na=function(){var t={total:ft(this.j.buffered),audio:ft(Us(this,"audio")),video:ft(Us(this,"video")),text:[]};if(this.g){var i=this.g.g,o=this.g.h;i!=null&&o!=null&&t.text.push({start:i,end:o})}return t};function Us(t,i){try{return t.h[i].buffered}catch(o){return null}}function Ky(t,i,o,u,l,h,p){h=h===void 0?!1:h,p=p===void 0?!1:p;var m,w,C,_,D,b,U,K,Z,B,X,ge,ne,ce,de,Ee,Ie,be,Pe,Ke,Ze,et,mt;return j(function(qe){switch(qe.g){case 1:if(m=xt,i!=m.X){qe.A(2);break}if(!t.B){qe.A(3);break}return k(qe,t.W,4);case 4:w=qe.h,t.g.s=w;case 3:return k(qe,ng(t.g,o,u?u.startTime:null,u?u.endTime:null),5);case 5:return qe.return();case 2:if(C=$e(o),_=t.L[i],t.o[i]&&(_=t.o[i].o),0>us(C)?Cr.includes(_)&&(K=el(C),K.length&&u&&(Z={cueTime:u.startTime,data:C,frames:K,dts:u.startTime,pts:u.startTime},t.V([Z],0,u.endTime))):(D=new tl().parse(C),b=u.startTime-(D.getStartTime()[i]||0),U=pE(D),U.length&&t.V(U,b,u?u.endTime:null)),!t.o[i]){l&&i==m.va&&(t.g||as(t,"text/vtt",t.B),t.s||(t.s=new qg(_)),u?(B=Xg(t.s,o),B.length&&(X=t.h[m.va].timestampOffset,Ra(t.g,B,u.startTime,u.endTime,X))):t.s.init(o)),qe.A(6);break}return h&&t.o[i].g.resetCaptions(),k(qe,Zv(t.o[i],o),7);case 7:ge=qe.h,t.g||as(t,"text/vtt",t.B),ge.captions&&ge.captions.length&&(ne=t.h[m.va].timestampOffset,ce=gu(ge.captions),Ra(t.g,ce,u?u.startTime:null,u?u.endTime:null,ne)),o=ge.data;case 6:if(o=rm(t,o,u?u.startTime:null,i),de=t.h[i],Ee=om,!t.B||de.mode==Ee||!u){qe.A(8);break}if(Ie=t.l.duration,be=i==m.va||!(m.va in t.h),!be){qe.A(9);break}return Pe=[de.appendWindowStart,de.appendWindowEnd],de.appendWindowStart=0,de.appendWindowEnd=1/0,Ke=de.timestampOffset,de.timestampOffset=0,k(qe,gi(t,i,function(){return Wy(t,i,o)}),10);case 10:return k(qe,gi(t,i,function(){return xc(t,i)}),11);case 11:return de.timestampOffset=Ke,de.appendWindowStart=Pe[0],de.appendWindowEnd=Pe[1],Ze=mc(Us(t,i)),et=(u.startTime||0)-(Ze||0),t.W.resolve(et),k(qe,gi(t,i,function(){return ls(t,i,0,Ie)}),12);case 12:if(i!=m.va){qe.A(9);break}return k(qe,gi(t,i,function(){t.j.currentTime-=.001,Nu(t,i)}),9);case 9:return de.mode=Ee,k(qe,t.Aa(Ie),8);case 8:return u&&t.B&&i!=m.X&&(h||p)&&(mt=u.startTime,gi(t,i,function(){return xc(t,i)}),gi(t,i,function(){return tm(t,i,mt)})),k(qe,gi(t,i,function(){Wy(t,i,o)}),16);case 16:le(qe)}})}function yE(t,i){var o=Eh(t,"video")||0;ig(t.g,i,o)}function yc(t){t.g&&ig(t.g,"",0)}v.remove=function(t,i,o){var u=this,l;return j(function(h){return l=xt,t==l.X?k(h,u.g.remove(i,o),0):k(h,gi(u,t,function(){return ls(u,t,i,o)}),0)})};function em(t,i){var o;return j(function(u){return o=xt,i==o.X?t.g?k(u,t.g.remove(0,1/0),0):u.return():k(u,gi(t,i,function(){return ls(t,i,0,t.l.duration)}),0)})}v.flush=function(t){var i=this,o;return j(function(u){return o=xt,t==o.X?u.return():k(u,gi(i,t,function(){i.j.currentTime-=.001,Nu(i,t)}),0)})};function Hy(t,i,o,u,l,h){var p;return j(function(m){return p=xt,i==p.X?(h||(t.g.s=o),Ms(t.g,u,l),m.return()):k(m,Promise.all([gi(t,i,function(){return xc(t,i)}),h?Promise.resolve():gi(t,i,function(){return tm(t,i,o)}),gi(t,i,function(){t.h[i].appendWindowStart=0,t.h[i].appendWindowEnd=l,t.h[i].appendWindowStart=u,Nu(t,i)})]),0)})}function Ah(t,i,o){var u;return j(function(l){return u=xt,i==u.X?l.return():(gi(t,i,function(){return xc(t,i)}),k(l,gi(t,i,function(){return tm(t,i,o)}),0))})}v.endOfStream=function(t){var i=this;return j(function(o){return k(o,qy(i,function(){Jg(i)||(t?i.l.endOfStream(t):i.l.endOfStream())}),0)})},v.Aa=function(t){var i=this;return j(function(o){return k(o,qy(i,function(){if(t<i.l.duration)for(var u in i.h){var l={start:function(){},p:new Wt};i.i[u].unshift(l)}i.l.duration=t}),0)})},v.getDuration=function(){return this.l.duration};function Wy(t,i,o){if(i=="video"&&t.D){var u=t.D;u.g&&u.g.appendBuffer(o,"video",u.i)}t.h[i].appendBuffer(o)}function ls(t,i,o,u){u<=o?Nu(t,i):t.h[i].remove(o,u)}function xc(t,i){var o=t.h[i].appendWindowStart,u=t.h[i].appendWindowEnd;t.h[i].abort(),t.h[i].appendWindowStart=o,t.h[i].appendWindowEnd=u,Nu(t,i)}function tm(t,i,o){0>o&&(o+=.001),t.h[i].timestampOffset=o,Nu(t,i)}function Nu(t,i){var o=t.i[i][0];o&&(o.p.resolve(),nm(t,i))}function gi(t,i,o){return Ct(t.G),o={start:o,p:new Wt},t.i[i].push(o),t.i[i].length==1&&im(t,i),o.p}function qy(t,i){var o,u,l,h,p,m;return j(function(w){switch(w.g){case 1:Ct(t.G),o=[],u={};for(l in t.h)u.Ub=new Wt,h={start:function(C){return function(){return C.Ub.resolve()}}(u),p:u.Ub},t.i[l].push(h),o.push(u.Ub),t.i[l].length==1&&h.start(),u={Ub:u.Ub};return ye(w,2),k(w,Promise.all(o),4);case 4:_e(w,3);break;case 2:throw p=we(w),p;case 3:try{i()}catch(C){throw new oe(2,3,3015,C)}finally{for(m in t.h)nm(t,m)}le(w)}})}function nm(t,i){t.i[i].shift(),im(t,i)}function im(t,i){var o=t.i[i][0];if(o)try{o.start()}catch(u){u.name=="QuotaExceededError"?o.p.reject(new oe(2,3,3017,i)):o.p.reject(new oe(2,3,3015,u)),nm(t,i)}}function rm(t,i,o,u){var l=t.O[u];return o==null&&l&&(Cs()||Wo())&&t.L[u].split(";")[0].split("/")[1]=="mp4"&&(i=aE(i)),i}var il=S.URL.createObjectURL,om="sequence",Cr=["audio/aac","audio/ac3","audio/ec3","audio/mpeg"];function Ge(t,i,o){this.i=t,this.m=i,this.o=this.j=1/0,this.g=1,this.h=this.l=null,this.s=0,this.u=!0,this.B=0,this.D=o===void 0?!0:o,this.F=0,this.G=!1}v=Ge.prototype,v.getDuration=function(){return this.j},v.Kf=function(){return this.g},v.Xe=function(t){this.i=t},v.Aa=function(t){this.j=t},v.Pf=function(){return this.i},v.Ve=function(t){this.s=t},v.yc=function(t){this.u=t},v.me=function(t){this.o=t},v.We=function(t){this.m=t},v.Df=function(){return this.m},v.Ib=function(t){if(t.length!=0){var i=t[0].startTime,o=t[0].endTime;t=A(t);for(var u=t.next();!u.done;u=t.next())u=u.value,i=Math.min(i,u.startTime),o=Math.max(o,u.endTime),this.g=Math.max(this.g,u.endTime-u.startTime);this.Td(i),this.h=Math.max(this.h,o),this.i!=null&&this.D&&!this.G&&(this.i=(Date.now()+this.s)/1e3-this.h-this.g)}},v.Md=function(){this.G=!0},v.Td=function(t){this.l=this.l==null?t:Math.min(this.l,t)},v.Sd=function(t){this.g=Math.max(this.g,t)},v.offset=function(t){this.l!=null&&(this.l+=t),this.h!=null&&(this.h+=t)},v.U=function(){return this.j==1/0&&!this.u},v.jb=function(){return this.j!=1/0&&!this.u},v.Pa=function(){return Math.max(this.B,this.gb()-this.o)},v.Ze=function(t){this.B=t},v.gb=function(){return this.U()||this.jb()?Math.min(Math.max(0,(Date.now()+this.s)/1e3-this.g-this.i)+this.F,this.j):this.h?Math.min(this.h,this.j):this.j},v.kc=function(t){var i=Math.max(this.l,this.B);return this.o==1/0?Math.ceil(1e3*i)/1e3:Math.max(i,Math.min(this.gb()-this.o+t,this.Oa()))},v.Db=function(){return this.kc(0)},v.Oa=function(){return Math.max(0,this.gb()-(this.U()||this.jb()?this.m:0))},v.df=function(){return!(this.i==null||this.h!=null&&this.D)},v.Ue=function(t){this.F=t},pe("shaka.media.PresentationTimeline",Ge),Ge.prototype.setAvailabilityTimeOffset=Ge.prototype.Ue,Ge.prototype.usingPresentationStartTime=Ge.prototype.df,Ge.prototype.getSeekRangeEnd=Ge.prototype.Oa,Ge.prototype.getSeekRangeStart=Ge.prototype.Db,Ge.prototype.getSafeSeekRangeStart=Ge.prototype.kc,Ge.prototype.getSegmentAvailabilityEnd=Ge.prototype.gb,Ge.prototype.setUserSeekStart=Ge.prototype.Ze,Ge.prototype.getSegmentAvailabilityStart=Ge.prototype.Pa,Ge.prototype.isInProgress=Ge.prototype.jb,Ge.prototype.isLive=Ge.prototype.U,Ge.prototype.offset=Ge.prototype.offset,Ge.prototype.notifyMaxSegmentDuration=Ge.prototype.Sd,Ge.prototype.notifyMinSegmentStartTime=Ge.prototype.Td,Ge.prototype.lockStartTime=Ge.prototype.Md,Ge.prototype.notifySegments=Ge.prototype.Ib,Ge.prototype.getDelay=Ge.prototype.Df,Ge.prototype.setDelay=Ge.prototype.We,Ge.prototype.setSegmentAvailabilityDuration=Ge.prototype.me,Ge.prototype.setStatic=Ge.prototype.yc,Ge.prototype.setClockOffset=Ge.prototype.Ve,Ge.prototype.getPresentationStartTime=Ge.prototype.Pf,Ge.prototype.setDuration=Ge.prototype.Aa,Ge.prototype.setPresentationStartTime=Ge.prototype.Xe,Ge.prototype.getMaxSegmentDuration=Ge.prototype.Kf,Ge.prototype.getDuration=Ge.prototype.getDuration;function sm(t,i,o){this.l=o,this.j=t,this.s=Yy(t),this.g=t.g.currentTime,this.m=Date.now()/1e3,this.h=!1,this.o=0,this.u=i,this.i=function(){}}sm.prototype.release=function(){this.l=this.j=null,this.i=function(){}};function um(t,i){t.i=i}function Xy(t){this.g=t}function Yy(t){if(t.g.paused||t.g.playbackRate==0||t.g.buffered.length==0)var i=!1;else e:{i=t.g.currentTime,t=A(ft(t.g.buffered));for(var o=t.next();!o.done;o=t.next())if(o=o.value,!(i<o.start-.1||i>o.end-.5)){i=!0;break e}i=!1}return i}function Tc(t,i,o,u,l){var h=this;this.o=l,this.g=t,this.s=i,this.D=o,this.i=new Xt,this.m=!1,this.B=t.readyState,this.u=0,this.h=u,this.l=!1,this.i.C(t,"waiting",function(){return am(h)}),this.j=new ht(function(){am(h)}).Ca(.25)}Tc.prototype.release=function(){this.i&&(this.i.release(),this.i=null),this.j!=null&&(this.j.stop(),this.j=null),this.h&&(this.h.release(),this.h=null),this.g=this.s=this.o=null},Tc.prototype.Wd=function(){this.l=!0,am(this)};function am(t){if(t.g.readyState!=0){if(t.g.seeking){if(!t.m)return}else t.m=!1;if(!t.g.paused||t.g.currentTime==0&&(t.g.autoplay||t.g.currentTime!=0)){t.g.readyState!=t.B&&(t.B=t.g.readyState);var i;if(!(i=!t.h)){i=t.h;var o=i.j,u=Yy(o),l=o.g.currentTime,h=Date.now()/1e3;(i.g!=l||i.s!=u)&&(i.m=h,i.g=l,i.s=u,i.h=!1),l=h-i.m,(u=l>=i.u&&u&&!i.h)&&(i.i(i.g,l),i.h=!0,i.g=o.g.currentTime,i.o++,i.l(new dt("stalldetected"))),i=!u}i&&(i=t.g.currentTime,o=t.g.buffered,u=fE(o,i,t.D.gapDetectionThreshold),u==null||u==0&&!t.l||(l=o.start(u),l>=t.s.Oa()||.001>l-i||(u!=0&&o.end(u-1),t.g.currentTime=l,t.u++,t.o(new dt("gapjumped")))))}}}function io(t,i,o,u){i==HTMLMediaElement.HAVE_NOTHING||t.readyState>=i?u():(i=nt.value().get(i),o.ma(t,i,u))}var nt=new Ui(function(){return new Map([[HTMLMediaElement.HAVE_METADATA,"loadedmetadata"],[HTMLMediaElement.HAVE_CURRENT_DATA,"loadeddata"],[HTMLMediaElement.HAVE_FUTURE_DATA,"canplay"],[HTMLMediaElement.HAVE_ENOUGH_DATA,"canplaythrough"]])});function lm(t,i,o){var u=this;this.g=t,this.l=i,this.j=o,this.m=!1,this.h=new Xt,this.i=new Ih(t),io(this.g,HTMLMediaElement.HAVE_METADATA,this.h,function(){dm(u,u.j)})}lm.prototype.release=function(){this.h&&(this.h.release(),this.h=null),this.i!=null&&(this.i.release(),this.i=null),this.l=function(){},this.g=null};function cm(t){return t.m?t.g.currentTime:t.j}function $y(t,i){0<t.g.readyState?Du(t.i,i):io(t.g,HTMLMediaElement.HAVE_METADATA,t.h,function(){dm(t,t.j)})}function dm(t,i){.001>Math.abs(t.g.currentTime-i)?Sh(t):(t.h.ma(t.g,"seeking",function(){Sh(t)}),Du(t.i,t.g.currentTime==0?i:t.g.currentTime))}function Sh(t){t.m=!0,t.h.C(t.g,"seeking",function(){return t.l()})}function Ih(t){var i=this;this.h=t,this.m=10,this.l=this.j=this.i=0,this.g=new ht(function(){0>=i.i||i.h.currentTime!=i.j?i.g.stop():(i.h.currentTime=i.l,i.i--)})}Ih.prototype.release=function(){this.g&&(this.g.stop(),this.g=null),this.h=null};function Du(t,i){t.j=t.h.currentTime,t.l=i,t.i=t.m,t.h.currentTime=i,t.g.Ca(.1)}function Qy(t){this.g=t,this.j=!1,this.h=null,this.i=new Xt}v=Qy.prototype,v.yd=function(){function t(){i.h==null||i.h==0?i.j=!0:(i.i.ma(i.g,"seeking",function(){i.j=!0}),i.g.currentTime=Math.max(0,i.g.currentTime+i.h))}var i=this;io(this.g,HTMLMediaElement.HAVE_CURRENT_DATA,this.i,function(){t()})},v.release=function(){this.i&&(this.i.release(),this.i=null),this.g=null},v.zd=function(t){this.h=this.j?this.h:t},v.Ic=function(){return(this.j?this.g.currentTime:this.h)||0},v.ue=function(){return 0},v.te=function(){return 0},v.Ne=function(){};function hm(t,i,o,u,l,h){var p=this;this.i=t,this.g=i.presentationTimeline,this.B=i.minBufferTime||0,this.l=o,this.u=l,this.s=null,this.o=Zy(t,o,h),this.j=new Tc(t,i.presentationTimeline,o,this.o,h),this.h=new lm(t,function(){e:{var m=p.j;m.m=!0,m.l=!1;var w=cm(p.h);if(m=gm(p,w),.001<Math.abs(m-w)&&(w=Date.now()/1e3,!p.s||p.s<w-1)){p.s=w,$y(p.h,m),m=void 0;break e}p.u(),m=void 0}return m},fm(this,u)),this.m=new ht(function(){if(p.i.readyState!=0&&!p.i.paused){var m=cm(p.h),w=p.g.Db(),C=p.g.Oa();3>C-w&&(w=C-3),m<w&&(m=gm(p,m),p.i.currentTime=m)}})}v=hm.prototype,v.yd=function(){this.m.Ca(.25)},v.release=function(){this.h&&(this.h.release(),this.h=null),this.j&&(this.j.release(),this.j=null),this.m&&(this.m.stop(),this.m=null),this.i=this.h=this.g=this.l=null,this.u=function(){}},v.zd=function(t){$y(this.h,t)},v.Ic=function(){var t=cm(this.h);return 0<this.i.readyState&&!this.i.paused?mm(this,t):t},v.ue=function(){return this.o?this.o.o:0},v.te=function(){return this.j.u};function fm(t,i){return i==null?i=1/0>t.g.getDuration()?t.g.Db():t.g.Oa():0>i&&(i=t.g.Oa()+i),pm(t,mm(t,i))}v.Ne=function(){this.j.Wd()};function pm(t,i){var o=t.g.getDuration();return i>=o?o-t.l.durationBackoff:i}function gm(t,i){var o=Math.max(t.B,t.l.rebufferingGoal),u=t.l.safeSeekOffset,l=t.g.Db(),h=t.g.Oa(),p=t.g.getDuration();3>h-l&&(l=h-3);var m=t.g.kc(o),w=t.g.kc(u);return o=t.g.kc(o+u),i>=p?pm(t,i):i>h?h:i<l?$g(t.i.buffered,w)?w:o:i>=m||$g(t.i.buffered,i)?i:o}function mm(t,i){var o=t.g.Db();return i<o?o:(t=t.g.Oa(),i>t?t:i)}function Zy(t,i,o){if(!i.stallEnabled)return null;var u=i.stallSkip;return i=new sm(new Xy(t),i.stallThreshold,o),um(i,function(){u?t.currentTime+=u:(t.pause(),t.play())}),i}function _t(t){this.g=t,this.h=null,this.i=0,this.j=!1}v=_t.prototype,v.release=function(){this.j||(this.g=[],this.h&&this.h.stop(),this.h=null)},v.cg=function(){this.j=!0};function Jy(t,i){t=A(t.g);for(var o=t.next();!o.done;o=t.next())i(o.value)}v.find=function(t){for(var i=this.g.length-1,o=i;0<=o;--o){var u=this.g[o],l=o<i?this.g[o+1].startTime:u.endTime;if(t>=u.startTime&&t<l)return o+this.i}return this.g.length&&t<this.g[0].startTime?this.i:null},v.get=function(t){return this.g.length==0?null:(t-=this.i,0>t||t>=this.g.length?null:this.g[t])},v.offset=function(t){if(!this.j)for(var i=A(this.g),o=i.next();!o.done;o=i.next())o.value.offset(t)},v.pc=function(t){if(!this.j&&t.length){var i=Math.round(1e3*t[0].startTime)/1e3;this.g=this.g.filter(function(o){return Math.round(1e3*o.startTime)/1e3<i}),this.g.push.apply(this.g,q(t))}},v.Hb=function(t,i){var o=this;t=t.filter(function(u){return u.endTime>i&&(o.g.length==0||u.endTime>o.g[0].startTime)}),this.pc(t),this.eb(i)},v.eb=function(t){if(!this.j){var i=this.g.length;this.g=this.g.filter(function(o){return o.endTime>t}),this.i+=i-this.g.length}},v.Wa=function(t,i,o){if(o=o===void 0?!1:o,!this.j){for(;this.g.length&&this.g[this.g.length-1].startTime>=i;)this.g.pop();for(;this.g.length&&this.g[0].endTime<=t;)this.g.shift(),o||this.i++;this.g.length!=0&&(t=this.g[this.g.length-1],this.g[this.g.length-1]=new St(t.startTime,i,t.u,t.Ba,t.ka,t.h,t.timestampOffset,t.appendWindowStart,t.appendWindowEnd,t.i,t.tilesLayout,t.s,t.g,t.status,t.l))}},v.fd=function(t,i){var o=this;this.j||(this.h&&this.h.stop(),this.h=new ht(function(){var u=i();u?o.g.push.apply(o.g,q(u)):(o.h.stop(),o.h=null)}),this.h.Ca(t))},_t.prototype[Symbol.iterator]=function(){return this.Cb(0)},_t.prototype.Cb=function(t){var i=this.find(t);if(i==null)return null;i--;var o=this.get(i+1),u=-1;if(o&&0<o.i.length)for(var l=o.i.length-1;0<=l;--l){var h=o.i[l];if(t>=h.startTime&&t<h.endTime){i++,u=l-1;break}}return new ro(this,i,u)};function Ch(t,i,o){return new _t([new St(t,t+i,function(){return o},0,null,null,t,t,t+i)])}pe("shaka.media.SegmentIndex",_t),_t.forSingleSegment=Ch,_t.prototype.getIteratorForTime=_t.prototype.Cb,_t.prototype.updateEvery=_t.prototype.fd,_t.prototype.fit=_t.prototype.Wa,_t.prototype.evict=_t.prototype.eb,_t.prototype.mergeAndEvict=_t.prototype.Hb,_t.prototype.offset=_t.prototype.offset,_t.prototype.get=_t.prototype.get,_t.prototype.find=_t.prototype.find,_t.prototype.markImmutable=_t.prototype.cg,_t.prototype.release=_t.prototype.release;function ro(t,i,o){this.i=t,this.g=i,this.h=o}ro.prototype.vf=function(){return this.g},ro.prototype.current=function(){var t=this.i.get(this.g);return t&&0<t.i.length&&t.ya().length&&this.h>=t.i.length&&(this.g++,this.h=0,t=this.i.get(this.g)),t&&0<t.i.length?t.i[this.h]:t},ro.prototype.next=function(){var t=this.i.get(this.g);return t&&0<t.i.length?(this.h++,t.ya().length&&this.h==t.i.length&&(this.g++,this.h=0)):(this.g++,this.h=0),t=this.current(),{value:t,done:!t}},pe("shaka.media.SegmentIterator",ro),ro.prototype.next=ro.prototype.next,ro.prototype.current=ro.prototype.current,ro.prototype.currentPosition=ro.prototype.vf;function cn(){_t.call(this,[]),this.l=[]}Te(cn,_t),v=cn.prototype,v.clone=function(){var t=new cn;return t.l=this.l.slice(),t},v.release=function(){for(var t=A(this.l),i=t.next();!i.done;i=t.next())i.value.release();this.l=[]},v.find=function(t){for(var i=0,o=A(this.l),u=o.next();!u.done;u=o.next()){u=u.value;var l=u.find(t);if(l!=null)return l+i;i+=u.i+u.g.length}return null},v.get=function(t){for(var i=0,o=A(this.l),u=o.next();!u.done;u=o.next()){u=u.value;var l=u.get(t-i);if(l)return l;i+=u.i+u.g.length}return null},v.offset=function(){},v.pc=function(){},v.eb=function(){},v.Hb=function(){},v.Wa=function(){},v.fd=function(){},pe("shaka.media.MetaSegmentIndex",cn),cn.prototype.updateEvery=cn.prototype.fd,cn.prototype.fit=cn.prototype.Wa,cn.prototype.mergeAndEvict=cn.prototype.Hb,cn.prototype.evict=cn.prototype.eb,cn.prototype.merge=cn.prototype.pc,cn.prototype.offset=cn.prototype.offset,cn.prototype.get=cn.prototype.get,cn.prototype.find=cn.prototype.find,cn.prototype.release=cn.prototype.release;function rl(t){var i=this;this.g=t,this.j=!1,this.i=this.g.Tc(),this.h=new ht(function(){i.g.Me(.25*i.i)})}rl.prototype.release=function(){this.h&&(this.h.stop(),this.h=null),this.g=null},rl.prototype.set=function(t){this.i=t,vm(this)},rl.prototype.Pc=function(){return this.g.Pc()};function vm(t){t.h.stop();var i=t.j?0:t.i;if(0<=i)try{t.g.Tc()!=i&&t.g.le(i);return}catch(o){}t.h.Ca(.25),t.g.Tc()!=0&&t.g.le(0)}function e1(t){var i=this;this.h=t,this.g=new Set,this.i=new ht(function(){Rt(i,!1)}).Ca(.25)}e1.prototype.release=function(){this.i.stop();for(var t=A(this.g),i=t.next();!i.done;i=t.next())i.value.release();this.g.clear()};function Rt(t,i){for(var o=A(t.g),u=o.next();!u.done;u=o.next())u.value.j(t.h.currentTime,i)}function kh(t){kt.call(this),this.g=new Map,this.h=t}Te(kh,kt),kh.prototype.release=function(){this.g.clear(),kt.prototype.release.call(this)};function ym(t,i){var o=t.g.get(i);return o||(o={rc:[],Ae:null,contentType:i},t.g.set(i,o)),o}function oo(t,i,o){var u=ym(t,i.contentType);pn(t,u),t={Od:i,position:o},u=u.rc,i=u.findIndex(function(l){return l.position>=o}),0<=i?u.splice(i,u[i].position==o?1:0,t):u.push(t)}kh.prototype.j=function(t){for(var i=A(this.g.values()),o=i.next();!o.done;o=i.next()){o=o.value;e:{for(var u=o.rc,l=u.length-1;0<=l;l--){var h=u[l];if(h.position<=t){u=h.Od;break e}}u=null}if((l=u)&&(l=o.Ae,l=!(l===u||l&&u&&l.bandwidth==u.bandwidth&&l.audioSamplingRate==u.audioSamplingRate&&l.codecs==u.codecs&&l.contentType==u.contentType&&l.frameRate==u.frameRate&&l.height==u.height&&l.mimeType==u.mimeType&&l.channelsCount==u.channelsCount&&l.pixelAspectRatio==u.pixelAspectRatio&&l.width==u.width)),l)e:{if(l=t,h=u.contentType,(h=this.h()[h])&&0<h.length){var p=h[h.length-1].end;if(l>=h[0].start&&l<p){l=!0;break e}}l=!1}l&&(o.Ae=u,JSON.stringify(u),o=new dt("qualitychange",new Map([["quality",u],["position",t]])),this.dispatchEvent(o))}};function pn(t,i){if((t=t.h()[i.contentType])&&0<t.length){var o=t[0].start,u=t[t.length-1].end,l=i.rc;i.rc=l.filter(function(h,p){return!(h.position<=o&&p+1<l.length&&l[p+1].position<=o||h.position>=u)})}else i.rc=[]}function bu(t){kt.call(this);var i=this;this.g=new Set,this.i=t,this.h=new ht(function(){for(var o=i.i(),u=A(i.g),l=u.next();!l.done;l=u.next())l=l.value,l.endTime<o.start&&(i.g.delete(l),l=new dt("regionremove",new Map([["region",l]])),i.dispatchEvent(l))}).Ca(2)}Te(bu,kt),bu.prototype.release=function(){this.g.clear(),this.h.stop(),kt.prototype.release.call(this)};function wc(t){kt.call(this);var i=this;this.i=t,this.g=new Map,this.l=[{rb:null,qb:cs,ib:function(o,u){return js(i,"enter",o,u)}},{rb:ol,qb:cs,ib:function(o,u){return js(i,"enter",o,u)}},{rb:Ec,qb:cs,ib:function(o,u){return js(i,"enter",o,u)}},{rb:cs,qb:ol,ib:function(o,u){return js(i,"exit",o,u)}},{rb:cs,qb:Ec,ib:function(o,u){return js(i,"exit",o,u)}},{rb:ol,qb:Ec,ib:function(o,u){return js(i,"skip",o,u)}},{rb:Ec,qb:ol,ib:function(o,u){return js(i,"skip",o,u)}}],this.h=new Xt,this.h.C(this.i,"regionremove",function(o){i.g.delete(o.region)})}Te(wc,kt),wc.prototype.release=function(){this.i=null,this.g.clear(),this.h.release(),this.h=null,kt.prototype.release.call(this)},wc.prototype.j=function(t,i){for(var o=A(this.i.g),u=o.next();!u.done;u=o.next()){u=u.value;var l=this.g.get(u),h=t<u.startTime?ol:t>u.endTime?Ec:cs;this.g.set(u,h);for(var p=A(this.l),m=p.next();!m.done;m=p.next())m=m.value,m.rb==l&&m.qb==h&&m.ib(u,i)}};function js(t,i,o,u){i=new dt(i,new Map([["region",o],["seeking",u]])),t.dispatchEvent(i)}var ol=1,cs=2,Ec=3;function xm(t,i,o,u,l){return t=oi(t,u,l),(i!=0||o!=null)&&(t.headers.Range=o?"bytes="+i+"-"+o:"bytes="+i+"-"),t}function t1(t,i){var o=this;this.g=i,this.m=t,this.i=null,this.u=1,this.o=this.l=null,this.D=!1,this.j=new Map,this.B=!1,this.F=null,this.s=!1,this.h=new Mi(function(){return Tm(o)})}v=t1.prototype,v.destroy=function(){return this.h.destroy()};function Tm(t){var i,o,u,l;return j(function(h){if(h.g==1){for(i=[],o=A(t.j.values()),u=o.next();!u.done;u=o.next())l=u.value,Ac(l),i.push(u1(l));return k(h,Promise.all(i),2)}t.j.clear(),t.g=null,t.m=null,t.i=null,le(h)})}v.configure=function(t){this.i=t,this.F=new Tg({maxAttempts:Math.max(t.retryParameters.maxAttempts,2),baseDelay:t.retryParameters.baseDelay,backoffFactor:t.retryParameters.backoffFactor,fuzzFactor:t.retryParameters.fuzzFactor,timeout:0,stallTimeout:0,connectionTimeout:0},!0)},v.start=function(){var t=this;return j(function(i){if(i.g==1)return k(i,TE(t),2);Ct(t.h),t.B=!0,le(i)})};function Mh(t,i){var o,u,l,h,p;j(function(m){switch(m.g){case 1:return o=xt,ye(m,2),k(m,em(t.g.R,o.X),4);case 4:_e(m,3);break;case 2:u=we(m),t.g&&t.g.onError(u);case 3:l=ki(i.mimeType,i.codecs),as(t.g.R,l,t.m.sequenceMode),h=t.g.R.m,(h.isTextVisible()||t.i.alwaysStreamText)&&(p=i1(i),t.j.set(o.X,p),kr(t,p,0)),le(m)}})}function Pu(t){var i=t.j.get(Lt);i&&(Ac(i),u1(i).catch(function(){}),t.j.delete(Lt)),t.o=null}function sl(t,i){var o=t.j.get("video");if(o){var u=o.stream;u&&(i?(i=u.trickModeVideo)&&!o.ob&&(Fs(t,i,!1,0,!1),o.ob=u):(u=o.ob)&&(o.ob=null,Fs(t,u,!0,0,!1)))}}function Ou(t,i,o,u,l,h){o=o===void 0?!1:o,u=u===void 0?0:u,l=l===void 0?!1:l,h=h===void 0?!1:h,t.l=i,t.B&&(i.video&&Fs(t,i.video,o,u,l,h),i.audio&&Fs(t,i.audio,o,u,l,h))}function Bs(t,i){t.o=i,t.B&&Fs(t,i,!0,0,!1)}function Fs(t,i,o,u,l,h){var p=t.j.get(i.type);p||i.type!=Lt?p&&(p.ob&&(i.trickModeVideo?(p.ob=i,i=i.trickModeVideo):p.ob=null),p.stream!=i||l)&&(i.type==Lt&&as(t.g.R,ki(i.mimeType,i.codecs),t.m.sequenceMode),p.stream.closeSegmentIndex&&p.stream.closeSegmentIndex(),p.stream=i,p.aa=null,p.ve=!!h,o&&(p.ac?p.hd=!0:p.ra?(p.bb=!0,p.Nc=u,p.hd=!0):(Ac(p),Sm(t,p,!0,u).catch(function(m){t.g&&t.g.onError(m)}))),n1(t,p).catch(function(m){t.g&&t.g.onError(m)})):Mh(t,i)}function n1(t,i){var o,u;return j(function(l){if(l.g==1)return i.ta?(o=i.stream,u=i.ta,o.segmentIndex?l.A(2):k(l,o.createSegmentIndex(),2)):l.return();if(i.ta!=u||i.stream!=o)return l.return();var h=t.g.Sc(),p=Eh(t.g.R,i.type),m=i.stream.segmentIndex.find(i.pa?i.pa.endTime:h),w=m==null?null:i.stream.segmentIndex.get(m);m=w&&w.ka?w.ka-w.Ba:null,w&&!m&&(m=(w.endTime-w.getStartTime())*(i.stream.bandwidth||0)/8),m?((w=w.h)&&(m+=(w.ka?w.ka-w.Ba:null)||0),w=t.g.getBandwidthEstimate(),h=8*m/w<(p||0)-h-Math.max(t.m.minBufferTime||0,t.i.rebufferingGoal)||i.ta.h.g>m):h=!1,h&&i.ta.abort(),le(l)})}v.vc=function(){if(this.g)for(var t=this.g.Sc(),i=A(this.j.keys()),o=i.next();!o.done;o=i.next()){var u=o.value;o=this.j.get(u),o.aa=null;var l=this.g.R;if(u==Lt?(l=l.g,l=l.g==null||l.h==null?!1:t>=l.g&&t<l.h):(l=Us(l,u),l=$g(l,t)),!l){if((Eh(this.g.R,u)!=null||o.ra)&&xE(this,o),o.ta&&(o.ta.abort(),o.ta=null),u===Lt&&(u=this.g.R,u.s))for(u=u.s.g,u.l=0,u.h=[],u.g=[],l=u.i,l.i=[],l.h=[],l.g=0,Vg(u),u=A(u.j.values()),l=u.next();!l.done;l=u.next())by(l.value);o.vc=!0}}};function xE(t,i){i.ac||i.bb||(i.ra?(i.bb=!0,i.Nc=0):Vy(t.g.R,i.type)==null?i.Ka==null&&kr(t,i,0):(Ac(i),Sm(t,i,!1,0).catch(function(o){t.g&&t.g.onError(o)})))}function TE(t){var i,o,u,l,h,p,m,w,C,_;return j(function(D){if(D.g==1){if(i=xt,!t.l)throw new oe(2,5,5006);return o=new Map,u=new Set,t.l.audio&&(o.set(i.Hc,t.l.audio),u.add(t.l.audio)),t.l.video&&(o.set(i.va,t.l.video),u.add(t.l.video)),t.o&&(o.set(i.X,t.o),u.add(t.o)),l=t.g.R,h=t.i.forceTransmux,k(D,l.init(o,h,t.m.sequenceMode),2)}for(Ct(t.h),t.updateDuration(),p=A(o.keys()),m=p.next();!m.done;m=p.next())w=m.value,C=o.get(w),t.j.has(w)||(_=i1(C),t.j.set(w,_),kr(t,_,0));le(D)})}function i1(t){return{stream:t,type:t.type,aa:null,pa:null,Zc:null,Kd:null,Jd:null,Id:null,ob:null,endOfStream:!1,ra:!1,Ka:null,bb:!1,Nc:0,hd:!1,ac:!1,vc:!0,Rd:!1,be:!1,nc:!1,ta:null}}v.updateDuration=function(){var t=this.m.presentationTimeline.getDuration();1/0>t?this.g.R.Aa(t):this.g.R.Aa(Math.pow(2,32))};function r1(t,i){var o,u,l,h,p;return j(function(m){switch(m.g){case 1:if(Ct(t.h),i.ra||i.Ka==null||i.ac)return m.return();if(i.Ka=null,!i.bb){m.A(2);break}return k(m,Sm(t,i,i.hd,i.Nc),3);case 3:return m.return();case 2:if(i.stream.segmentIndex){m.A(4);break}return o=i.stream,k(m,i.stream.createSegmentIndex(),5);case 5:if(o!=i.stream)return o.closeSegmentIndex&&o.closeSegmentIndex(),i.ra||i.Ka||kr(t,i,0),m.return();case 4:ye(m,6),u=o1(t,i),u!=null&&(kr(t,i,u),i.nc=!1),_e(m,7);break;case 6:return l=we(m),k(m,Rh(t,l),8);case 8:return m.return();case 7:if(h=Array.from(t.j.values()),!t.B||!h.every(function(w){return w.endOfStream})){m.A(0);break}return k(m,t.g.R.endOfStream(),10);case 10:Ct(t.h),p=t.g.R.getDuration(),p!=0&&p<t.m.presentationTimeline.getDuration()&&t.m.presentationTimeline.Aa(p),le(m)}})}function o1(t,i){if(Em(i))return yE(t.g.R,i.stream.originalId||""),null;i.type==Lt&&yc(t.g.R);var o=t.g.Sc(),u=i.pa?i.pa.endTime:o,l=vE(t.g.R,i.type,o),h=Math.max(t.m.minBufferTime||0,t.i.rebufferingGoal,t.i.bufferingGoal)*t.u,p=t.m.presentationTimeline.getDuration()-u,m=Eh(t.g.R,i.type);if(1e-6>p&&m)return i.endOfStream=!0,i.type=="video"&&(t=t.j.get(Lt))&&Em(t)&&(t.endOfStream=!0),null;if(i.endOfStream=!1,l>=h)return t.i.updateIntervalSeconds/2;if(l=_h(t,i,o,m),!l)return t.i.updateIntervalSeconds;for(h=1/0,p=Array.from(t.j.values()),p=A(p),m=p.next();!m.done;m=p.next())m=m.value,Em(m)||m.aa&&!m.aa.current()||(h=Math.min(h,m.pa?m.pa.endTime:o));return u>=h+t.m.presentationTimeline.g?t.i.updateIntervalSeconds:(ul(t,i,o,l).catch(function(){}),null)}function _h(t,i,o,u){if(i.aa)return i.aa.current();if(i.pa||u)return o=i.pa?i.pa.endTime:u,i.Rd=!0,i.aa=i.stream.segmentIndex.Cb(o),i.aa&&i.aa.next().value;t=t.i.inaccurateManifestTolerance,u=Math.max(o-t,0);var l=null;return t&&(i.aa=i.stream.segmentIndex.Cb(u),l=i.aa&&i.aa.next().value),l||(i.aa=i.stream.segmentIndex.Cb(o),l=i.aa&&i.aa.next().value),l}function ul(t,i,o,u){var l,h,p,m,w,C,_,D,b,U,K,Z,B,X,ge;return j(function(ne){switch(ne.g){case 1:if(l=xt,h=i.stream,p=i.aa,i.ra=!0,ye(ne,2),u.Eb()==2)throw new oe(1,1,1011);return k(ne,s1(t,i,u),4);case 4:return Ct(t.h),t.s?ne.return():(m=h.mimeType=="video/mp4"||h.mimeType=="audio/mp4",w=S.ReadableStream,t.i.lowLatencyMode&&w&&m&&!u.l?(D=new Uint8Array(0),U=b=!1,K=function(ce){var de,Ee,Ie;return j(function(be){return b||(U=!0,Ct(t.h),t.s)?be.return():(D=EE(D,ce),de=!1,Ee=0,new Vt().box("mdat",function(Pe){Ee=Pe.size+Pe.start,de=!0}).parse(D,!1,!0),de?(Ie=D.subarray(0,Ee),D=D.subarray(Ee),k(be,wm(t,i,o,h,u,Ie),0)):be.A(0))})},k(ne,Am(t,i,u,K),11)):(C=Am(t,i,u),k(ne,C,7)));case 7:if(_=ne.h,Ct(t.h),t.s)return ne.return();if(!u.l){ne.A(8);break}return k(ne,wE(_,u,p),9);case 9:_=ne.h;case 8:return Ct(t.h),i.bb?(i.ra=!1,kr(t,i,0),ne.return()):k(ne,wm(t,i,o,h,u,_),6);case 11:if(Z=ne.h,U){ne.A(6);break}return b=!0,Ct(t.h),t.s?ne.return():i.bb?(i.ra=!1,kr(t,i,0),ne.return()):k(ne,wm(t,i,o,h,u,Z),6);case 6:if(Ct(t.h),t.s)return ne.return();i.pa=u,p.next(),i.ra=!1,i.be=!1,B=t.g.R.Na(),X=B[i.type],JSON.stringify(X),i.bb||t.g.Wd(u.startTime,u.endTime,i.type),kr(t,i,0),_e(ne,0);break;case 2:if(ge=we(ne),Ct(t.h,ge),t.s)return ne.return();if(i.ra=!1,ge.code==7001)i.ra=!1,Ac(i),kr(t,i,0),ne.A(0);else if(i.type==l.X&&t.i.ignoreTextStreamFailures)t.j.delete(l.X),ne.A(0);else if(ge.code==3017)AE(t,i,ge),ne.A(0);else return i.nc=!0,ge.severity=2,k(ne,Rh(t,ge),0)}})}function wE(t,i,o){var u,l,h,p;return j(function(m){if(m.g==1)return u=i.l,u.cryptoKey?m.A(2):k(m,u.fetchKey(),3);if(l=u.iv,!l)for(l=$e(new ArrayBuffer(16)),h=u.firstMediaSequenceNumber+o.g,p=l.byteLength-1;0<=p;p--)l[p]=h&255,h>>=8;return m.return(S.crypto.subtle.decrypt({name:"AES-CBC",iv:l},u.cryptoKey,t))})}function EE(t,i){var o=new Uint8Array(t.length+i.length);return o.set(t),o.set(i,t.length),o}function AE(t,i,o){if(!Array.from(t.j.values()).some(function(l){return l!=i&&l.be})){var u=Math.round(100*t.u);if(20<u)t.u-=.2;else if(4<u)t.u-=.04;else{i.nc=!0,t.s=!0,t.g.onError(o);return}i.be=!0}kr(t,i,4)}function s1(t,i,o){var u,l,h,p,m,w,C,_;return j(function(D){return u=[],l=Math.max(0,o.appendWindowStart-.1),h=o.appendWindowEnd+.01,p=o.timestampOffset,(p!=i.Kd||l!=i.Jd||h!=i.Id)&&(m=function(){var b;return j(function(U){if(U.g==1)return ye(U,2),i.Jd=l,i.Id=h,i.Kd=p,k(U,Hy(t.g.R,i.type,p,l,h,t.m.sequenceMode),4);if(U.g!=2)return _e(U,0);throw b=we(U),i.Jd=null,i.Id=null,i.Kd=null,b})},u.push(m())),!Yg(o.h,i.Zc)&&(i.Zc=o.h)&&(w=Am(t,i,o.h),C=function(){var b,U,K,Z;return j(function(B){switch(B.g){case 1:return ye(B,2),k(B,w,4);case 4:return b=B.h,Ct(t.h),U=new Vt,U.box("moov",Jt).box("trak",Jt).box("mdia",Jt).P("mdhd",function(X){X=pc(X.reader||0,X.version||0),o.h.timescale=X.timescale}).parse(b),K=i.stream.closedCaptions&&0<i.stream.closedCaptions.size,k(B,t.g.xe(i.type,b),5);case 5:return k(B,Ky(t.g.R,i.type,b,null,K),6);case 6:_e(B,0);break;case 2:throw Z=we(B),i.Zc=null,Z}})},t.g.fg(o.startTime,o.h),u.push(C())),t.m.sequenceMode&&(_=i.pa?i.pa.m:null,o.m!=_||i.Rd)&&(i.Rd=!1,u.push(Ah(t.g.R,i.type,o.startTime))),k(D,Promise.all(u),0)})}function wm(t,i,o,u,l,h){var p,m,w,C,_,D;return j(function(b){switch(b.g){case 1:return p=u.closedCaptions&&0<u.closedCaptions.size,w=u.emsgSchemeIdUris!=null&&0<u.emsgSchemeIdUris.length||t.i.dispatchAllEmsgBoxes,C=t.i.parsePrftBox&&!t.D,(w||C)&&(m=new Vt),w&&m.P("emsg",function(U){var K=u.emsgSchemeIdUris;if(U.version===0)var Z=U.reader.sc(),B=U.reader.sc(),X=U.reader.K(),ge=U.reader.K(),ne=U.reader.K(),ce=U.reader.K(),de=l.startTime+ge/X;else X=U.reader.K(),de=U.reader.$a()/X+l.timestampOffset,ge=de-l.startTime,ne=U.reader.K(),ce=U.reader.K(),Z=U.reader.sc(),B=U.reader.sc();U=U.reader.Za(U.reader.S.byteLength-U.reader.Z()),(K&&K.includes(Z)||t.i.dispatchAllEmsgBoxes)&&(Z=="urn:mpeg:dash:event:2012"?t.g.gg():Z=="https://aomedia.org/emsg/ID3"?(K=el(U),K.length&&l&&t.g.hg([{cueTime:l.startTime,data:U,frames:K,dts:l.startTime,pts:l.startTime}],0,l.endTime)):(K=new Map().set("detail",{startTime:de,endTime:de+ne/X,schemeIdUri:Z,value:B,timescale:X,presentationTimeDelta:ge,eventDuration:ne,id:ce,messageData:U}),K=new dt("emsg",K),t.g.onEvent(K)))}),C&&m.P("prft",function(U){e:{if(!t.D&&l.h.timescale){U.reader.K();var K=U.reader.K(),Z=U.reader.K();if(K=1e3*K+Z/Math.pow(2,32)*1e3,U.version===0)var B=U.reader.K();else try{B=U.reader.$a()}catch(X){t.D=!0,B=void 0;break e}U=new Date(new Date(Date.UTC(1900,0,1,0,0,0)).getTime()+K).getTime(),B=new Map().set("detail",{wallClockTime:U,programStartDate:new Date(U-B/l.h.timescale*1e3)}),B=new dt("prft",B),t.g.onEvent(B),t.D=!0}B=void 0}return B}),(w||C)&&m.parse(h),k(b,SE(t,i,o),2);case 2:return Ct(t.h),_=i.vc,i.vc=!1,D=i.ve,i.ve=!1,k(b,t.g.xe(i.type,h),3);case 3:return k(b,Ky(t.g.R,i.type,h,l,p,_,D),4);case 4:Ct(t.h),le(b)}})}function SE(t,i,o){var u,l,h,p;return j(function(m){if(m.g==1)return u=Math.max(t.i.bufferBehind,t.m.presentationTimeline.g),l=Vy(t.g.R,i.type),l==null?m.return():(h=o-l,p=h-u,.01>=p?m.return():k(m,t.g.R.remove(i.type,l,l+p),2));Ct(t.h),le(m)})}function Em(t){return t&&t.type==Lt&&(t.stream.mimeType=="application/cea-608"||t.stream.mimeType=="application/cea-708")}function Am(t,i,o,u){var l,h,p,m,w;return j(function(C){return C.g==1?(l=eo,h=xm(o.ya(),o.Ba,o.ka,t.i.retryParameters,u),p=i.stream,t.g.modifySegmentRequest(h,{type:p.type,init:o instanceof sr,duration:o.endTime-o.startTime,mimeType:p.mimeType,codecs:p.codecs,bandwidth:p.bandwidth}),m=t.g.kb.request(l,h),i.ta=m,k(C,m.promise,2)):(w=C.h,i.ta=null,C.return(w.data))})}function Sm(t,i,o,u){var l,h;return j(function(p){if(p.g==1)return i.bb=!1,i.hd=!1,i.Nc=0,i.ac=!0,i.pa=null,i.Zc=null,i.aa=null,u?(l=t.g.Sc(),h=t.g.R.getDuration(),k(p,t.g.R.remove(i.type,l+u,h),3)):k(p,em(t.g.R,i.type),4);if(p.g!=3)return Ct(t.h),o?k(p,t.g.R.flush(i.type),3):p.A(3);Ct(t.h),i.ac=!1,i.endOfStream=!1,i.ra||i.Ka||kr(t,i,0),le(p)})}function kr(t,i,o){var u=i.type;(u!=Lt||t.j.has(u))&&(i.Ka=new fu(function(){var l;return j(function(h){if(h.g==1)return ye(h,2),k(h,r1(t,i),4);if(h.g!=2)return _e(h,0);l=we(h),t.g&&t.g.onError(l),le(h)})}).N(o))}function Ac(t){t.Ka!=null&&(t.Ka.stop(),t.Ka=null)}function u1(t){return j(function(i){return t.ta?k(i,t.ta.abort(),0):i.A(0)})}function Rh(t,i){return j(function(o){if(o.g==1)return k(o,Zl(t.F),2);Ct(t.h),t.g.onError(i),i.handled||t.i.failureCallback(i),le(o)})}function a1(t,i){var o=zs(),u=this;this.j=i,this.i=t,this.l=o,this.o=null,this.m=[],this.h=this.g=null,this.u=Promise.resolve().then(function(){return Cm(u)}),this.s=new Mi(function(){return Im(u)})}a1.prototype.destroy=function(){return this.s.destroy()};function Im(t){var i,o,u;return j(function(l){if(l.g==1)return t.h&&t.h.abort(),al(t),k(l,t.u,2);for(t.g&&t.g.Ia.mb(),i=A(t.m),o=i.next();!o.done;o=i.next())u=o.value,u.Ia.mb();t.g=null,t.m=[],t.j=null,le(l)})}function Uu(t,i){var o={Jb:function(){},bd:function(){},mb:function(){},onError:function(){},dd:function(){},wh:function(){}};return t.m.push({create:i,Ia:o}),t.h&&t.h.abort(),al(t),o}function Cm(t){return j(function(i){if(t.s.g)i=i.A(0);else{if(t.m.length==0||t.g&&!t.g.hb)var o=!1;else{t.g&&(t.g.Ia.mb(),t.g=null),o=t.m.shift();var u=o.create(t.l);u?(o.Ia.Jb(),t.g={node:u.node,payload:u.payload,hb:u.hb,Ia:o.Ia}):o.Ia.dd(),o=!0}o?o=Promise.resolve():t.g?o=Mr(t):(t.j.eg(t.i),t.o=new Wt,o=t.o),i=k(i,o,1)}return i})}function Mr(t){var i,o;return j(function(u){switch(u.g){case 1:return t.i=t.j.Mf(t.i,t.l,t.g.node,t.g.payload),ye(u,2),t.h=t.j.yf(t.i,t.l,t.g.payload),k(u,t.h.promise,4);case 4:t.h=null,t.i==t.g.node&&(t.g.Ia.bd(),t.g=null),_e(u,0);break;case 2:return i=we(u),i.code==7001?t.g.Ia.mb():t.g.Ia.onError(i),t.g=null,t.h=null,o=t,k(u,t.j.handleError(t.l,i),5);case 5:o.i=u.h,le(u)}})}function al(t){t.o&&(t.o.resolve(),t.o=null)}function km(t){var i=[],o=700<=t.fontWeight,u=t.fontStyle=="italic",l=t.textDecoration.includes("underline");return o&&i.push("b"),u&&i.push("i"),l&&i.push("u"),o=i.reduce(function(h,p){return h+"<"+p+">"},""),i=i.reduceRight(function(h,p){return h+"</"+p+">"},""),t.lineBreak?"\n":t.nestedCues.length?t.nestedCues.map(km).join(""):o+t.payload+i}function Lh(t,i){t=A(t);for(var o=t.next();!o.done;o=t.next())if(o=o.value,o.isContainer)Lh(o.nestedCues,i);else{var u=o.clone();u.nestedCues=[],u.payload=km(o),i.push(u)}return i}function Fi(t){this.g=null;for(var i=A(Array.from(t.textTracks)),o=i.next();!o.done;o=i.next())o=o.value,o.mode="disabled",o.label=="Shaka Player TextTrack"&&(this.g=o);this.g||(this.g=t.addTextTrack("subtitles","Shaka Player TextTrack")),this.g.mode="hidden"}v=Fi.prototype,v.remove=function(t,i){return this.g?(ll(this.g,function(o){return o.startTime<i&&o.endTime>t}),!0):!1},v.append=function(t){var i=Lh(t,[]),o=[];t=this.g.cues?Array.from(this.g.cues):[];var u={};i=A(i);for(var l=i.next();!l.done;u={sb:u.sb},l=i.next())u.sb=l.value,t.some(function(h){return function(p){return p.startTime==h.sb.startTime&&p.endTime==h.sb.endTime&&p.text==h.sb.payload}}(u))||(l=IE(u.sb))&&o.push(l);for(t=o.slice().sort(function(h,p){return h.startTime!=p.startTime?h.startTime-p.startTime:h.endTime!=p.endTime?h.endTime-p.startTime:"line"in VTTCue.prototype?o.indexOf(p)-o.indexOf(h):o.indexOf(h)-o.indexOf(p)}),t=A(t),u=t.next();!u.done;u=t.next())this.g.addCue(u.value)},v.destroy=function(){return this.g&&(ll(this.g,function(){return!0}),this.g.mode="disabled"),this.g=null,Promise.resolve()},v.isTextVisible=function(){return this.g.mode=="showing"},v.setTextVisibility=function(t){this.g.mode=t?"showing":"hidden"};function IE(t){if(t.startTime>=t.endTime)return null;var i=new VTTCue(t.startTime,t.endTime,t.payload);i.lineAlign=t.lineAlign,i.positionAlign=t.positionAlign,t.size&&(i.size=t.size);try{i.align=t.textAlign}catch(o){}return t.textAlign=="center"&&i.align!="center"&&(i.align="middle"),t.writingMode=="vertical-lr"?i.vertical="lr":t.writingMode=="vertical-rl"&&(i.vertical="rl"),t.lineInterpretation==1&&(i.snapToLines=!1),t.line!=null&&(i.line=t.line),t.position!=null&&(i.position=t.position),i}function ll(t,i){var o=t.mode;t.mode=o=="showing"?"showing":"hidden";for(var u=A(Array.from(t.cues)),l=u.next();!l.done;l=u.next())(l=l.value)&&i(l)&&t.removeCue(l);t.mode=o}pe("shaka.text.SimpleTextDisplayer",Fi),Fi.prototype.setTextVisibility=Fi.prototype.setTextVisibility,Fi.prototype.isTextVisible=Fi.prototype.isTextVisible,Fi.prototype.destroy=Fi.prototype.destroy,Fi.prototype.append=Fi.prototype.append,Fi.prototype.remove=Fi.prototype.remove;function l1(){}function Nh(t){for(;t.firstChild;)t.removeChild(t.firstChild)}pe("shaka.util.Dom",l1),l1.removeAllChildren=Nh;function zi(t,i){var o=this;this.j=!1,this.i=[],this.B=t,this.m=i,this.g=document.createElement("div"),this.g.classList.add("shaka-text-container"),this.g.style.textAlign="center",this.g.style.display="flex",this.g.style.flexDirection="column",this.g.style.alignItems="center",this.g.style.justifyContent="flex-end",this.m.appendChild(this.g),this.u=new ht(function(){si(o)}).Ca(.25),this.h=new Map,this.s=new Xt,this.s.C(document,"fullscreenchange",function(){si(o,!0)}),this.l=null,"ResizeObserver"in S&&(this.l=new ResizeObserver(function(){si(o,!0)}),this.l.observe(this.g)),this.o=new Map}v=zi.prototype,v.append=function(t){var i=[].concat(q(this.i)),o={};t=A(t);for(var u=t.next();!u.done;o={Cc:o.Cc},u=t.next())o.Cc=u.value,i.some(function(l){return function(h){return Pi(h,l.Cc)}}(o))||this.i.push(o.Cc);si(this)},v.destroy=function(){this.m.removeChild(this.g),this.g=null,this.j=!1,this.i=[],this.u&&this.u.stop(),this.h.clear(),this.s&&(this.s.release(),this.s=null),this.l&&(this.l.disconnect(),this.l=null)},v.remove=function(t,i){if(!this.g)return!1;var o=this.i.length;return this.i=this.i.filter(function(u){return u.startTime<t||u.endTime>=i}),si(this,o>this.i.length),!0},v.isTextVisible=function(){return this.j},v.setTextVisibility=function(t){this.j=t};function c1(t,i){for(;i!=null;){if(i==t.g)return!0;i=i.parentElement}return!1}function Dh(t,i,o,u,l){var h=!1,p=[],m=[];i=A(i);for(var w=i.next();!w.done;w=i.next()){w=w.value,l.push(w);var C=t.h.get(w),_=w.startTime<=u&&w.endTime>u,D=C?C.ef:null;C&&(p.push(C.Bd),C.tc&&p.push(C.tc),_||(h=!0,t.h.delete(w),C=null)),_&&(m.push(w),C?c1(t,D)||(h=!0):(CE(t,w,l),C=t.h.get(w),D=C.ef,h=!0)),0<w.nestedCues.length&&D&&Dh(t,w.nestedCues,D,u,l),l.pop()}if(h){for(u=A(p),l=u.next();!l.done;l=u.next())l=l.value,l.parentElement&&l.parentElement.removeChild(l);for(m.sort(function(b,U){return b.startTime!=U.startTime?b.startTime-U.startTime:b.endTime-U.endTime}),m=A(m),w=m.next();!w.done;w=m.next())u=t.h.get(w.value),u.tc?(o.appendChild(u.tc),u.tc.appendChild(u.Bd)):o.appendChild(u.Bd)}}function si(t,i){if(t.g){var o=t.B.currentTime;if(!t.j||i!==void 0&&i){i=A(t.o.values());for(var u=i.next();!u.done;u=i.next())Nh(u.value);Nh(t.g),t.h.clear(),t.o.clear()}if(t.j){i=new Map,u=A(t.h.keys());for(var l=u.next();!l.done;l=u.next())l=l.value,i.set(l,t.h.get(l));Dh(t,t.i,t.g,o,[])}}}function CE(t,i,o){var u=1<o.length,l=u?"span":"div";i.lineBreak&&(l="br"),u=!u&&0<i.nestedCues.length;var h=document.createElement(l);if(l!="br"&&d1(t,h,i,o,u),o=null,i.region&&i.region.id)if(o=i.region,l=o.id+"_"+o.width+"x"+o.height+(o.heightUnits==ri?"%":"px")+"-"+o.viewportAnchorX+"x"+o.viewportAnchorY+(o.viewportAnchorUnits==ri?"%":"px"),t.o.has(l))o=t.o.get(l);else{var p=document.createElement("span"),m=o.heightUnits==ri?"%":"px",w=o.widthUnits==ri?"%":"px",C=o.viewportAnchorUnits==ri?"%":"px";p.id="shaka-text-region---"+l,p.classList.add("shaka-text-region"),p.style.height=o.height+m,p.style.width=o.width+w,p.style.position="absolute",p.style.top=o.viewportAnchorY+C,p.style.left=o.viewportAnchorX+C,p.style.display="flex",p.style.flexDirection="column",p.style.alignItems="center",p.style.justifyContent=i.displayAlign=="before"?"flex-start":i.displayAlign=="center"?"center":"flex-end",t.o.set(l,p),o=p}l=h,u&&(l=document.createElement("span"),l.classList.add("shaka-text-wrapper"),l.style.backgroundColor=i.backgroundColor,h.appendChild(l)),t.h.set(i,{Bd:h,ef:l,tc:o})}function d1(t,i,o,u,l){var h=i.style,p=o.nestedCues.length==0,m=1<u.length;h.whiteSpace="pre-wrap";var w=o.payload.replace(/\s+$/g,function(_){return" ".repeat(_.length)});if(h.webkitTextStrokeColor=o.textStrokeColor,h.webkitTextStrokeWidth=o.textStrokeWidth,h.color=o.color,h.direction=o.direction,h.opacity=o.opacity,h.paddingLeft=bh(o.linePadding,o,t.m),h.paddingRight=bh(o.linePadding,o,t.m),h.textShadow=o.textShadow,o.backgroundImage)h.backgroundImage="url('"+o.backgroundImage+"')",h.backgroundRepeat="no-repeat",h.backgroundSize="contain",h.backgroundPosition="center",h.width="100%",h.height="100%";else{if(o.nestedCues.length)var C=i;else C=document.createElement("span"),i.appendChild(C);o.border&&(C.style.border=o.border),l||((i=We(u,function(_){return _.backgroundColor}))?C.style.backgroundColor=i:w&&(C.style.backgroundColor="rgba(0, 0, 0, 0.8)")),w&&(C.textContent=w)}m&&!u[u.length-1].isContainer?h.display="inline":(h.display="flex",h.flexDirection="column",h.alignItems="center",h.justifyContent=o.displayAlign=="before"?"flex-start":o.displayAlign=="center"?"center":"flex-end"),p||(h.margin="0"),h.fontFamily=o.fontFamily,h.fontWeight=o.fontWeight.toString(),h.fontStyle=o.fontStyle,h.letterSpacing=o.letterSpacing,h.fontSize=bh(o.fontSize,o,t.m),o.line!=null&&o.lineInterpretation==1&&(h.position="absolute",o.writingMode==Ea?(h.width="100%",o.lineAlign==cu?h.top=o.line+"%":o.lineAlign=="end"&&(h.bottom=100-o.line+"%")):o.writingMode=="vertical-lr"?(h.height="100%",o.lineAlign==cu?h.left=o.line+"%":o.lineAlign=="end"&&(h.right=100-o.line+"%")):(h.height="100%",o.lineAlign==cu?h.right=o.line+"%":o.lineAlign=="end"&&(h.left=100-o.line+"%"))),h.lineHeight=o.lineHeight,o.position!=null&&(o.writingMode==Ea?h.paddingLeft=o.position:h.paddingTop=o.position),o.positionAlign=="line-left"?h.cssFloat="left":o.positionAlign=="line-right"&&(h.cssFloat="right"),h.textAlign=o.textAlign,h.textDecoration=o.textDecoration.join(" "),h.writingMode=o.writingMode,"writingMode"in document.documentElement.style&&h.writingMode==o.writingMode||(h.webkitWritingMode=o.writingMode),o.size&&(o.writingMode==Ea?h.width=o.size+"%":h.height=o.size+"%")}function bh(t,i,o){var u=(u=new RegExp(/(\d*\.?\d+)([a-z]+|%+)/).exec(t))?{value:Number(u[1]),unit:u[2]}:null;if(!u)return t;var l=u.value;switch(u.unit){case"%":return l/100*o.clientHeight/i.cellResolution.rows+"px";case"c":return o.clientHeight*l/i.cellResolution.rows+"px";default:return t}}function We(t,i){for(var o=t.length-1;0<=o;o--){var u=i(t[o]);if(u||u===0)return u}return null}pe("shaka.text.UITextDisplayer",zi),zi.prototype.setTextVisibility=zi.prototype.setTextVisibility,zi.prototype.isTextVisible=zi.prototype.isTextVisible,zi.prototype.remove=zi.prototype.remove,zi.prototype.destroy=zi.prototype.destroy,zi.prototype.append=zi.prototype.append;function bn(t,i){function o(h){for(var p=h,m=A(i),w=m.next();!w.done;w=m.next())w=w.value,w.end&&w.start<h&&(p+=w.end-w.start);return h=Math.floor(p/3600),m=Math.floor(p/60%60),w=Math.floor(p%60),p=Math.floor(1e3*p%1e3),(10>h?"0":"")+h+":"+(10>m?"0":"")+m+":"+(10>w?"0":"")+w+"."+(100>p?10>p?"00":"0":"")+p}var u=Lh(t,[]);t="WEBVTT\n\n",u=A(u);for(var l=u.next();!l.done;l=u.next())l=l.value,t+=o(l.startTime)+" --> "+o(l.endTime)+function(h){var p=[];switch(h.textAlign){case"left":p.push("align:left");break;case"right":p.push("align:right");break;case Wr:p.push("align:middle");break;case"start":p.push("align:start");break;case"end":p.push("align:end")}switch(h.writingMode){case"vertical-lr":p.push("vertical:lr");break;case"vertical-rl":p.push("vertical:rl")}return p.length?" "+p.join(" "):""}(l)+"\n",t+=l.payload+"\n\n";return t}pe("shaka.text.WebVttGenerator",function(){});function ju(t,i){this.h=t,this.g=i,this.j="",this.o=void 0,this.i=!1,this.m=!0,this.l=!1}function Gi(t,i,o){try{if(t.g.enabled){var u={d:1e3*o.duration,st:t.h.U()?NE:Uh};u.ot=ME(o);var l=u.ot===cl||u.ot===Lm||u.ot===dl||u.ot===Dm;l&&(u.bl=_E(t,o.type)),o.bandwidth&&(u.br=o.bandwidth/1e3),l&&u.ot!==Dm&&(u.tb=Mm(t,u.ot)/1e3),Bu(t,i,u)}}catch(h){Kn("CMCD_SEGMENT_ERROR","Could not generate segment CMCD data.",h)}}function kE(t,i,o){try{if(!t.g.enabled)return i;var u=Ph(t);e:{switch(o){case"video/webm":case"video/mp4":var l=dl;break e;case"application/x-mpegurl":l=Rm;break e}l=void 0}u.ot=l,u.su=!0;var h=Oh(u);return _m(i,h)}catch(p){return Kn("CMCD_SRC_ERROR","Could not generate src CMCD data.",p),i}}function Ph(t){return t.j||(t.j=t.g.sessionId||S.crypto.randomUUID()),{v:1,sf:t.o,sid:t.j,cid:t.g.contentId,mtp:t.h.getBandwidthEstimate()/1e3}}function Bu(t,i,o){o=o===void 0?{}:o;var u=u===void 0?t.g.useHeaders:u;if(t.g.enabled){Object.assign(o,Ph(t)),o.pr=t.h.Rc();var l=o.ot===cl||o.ot===dl;if(t.l&&l&&(o.bs=!0,o.su=!0,t.l=!1),o.su==null&&(o.su=t.m),u)t=RE(o),Object.keys(t).length&&Object.assign(i.headers,t);else{var h=Oh(o);h&&(i.uris=i.uris.map(function(p){return _m(p,h)}))}}}function ME(t){var i=t.type;if(t.init)return LE;if(i=="video")return t.codecs.includes(",")?dl:cl;if(i=="audio")return Lm;if(i=="text")return t.mimeType==="application/mp4"?Dm:Nm}function _E(t,i){if(i=t.h.Na()[i],!i.length)return NaN;var o=t.h.getCurrentTime();return(t=i.find(function(u){return u.start<=o&&u.end>=o}))?1e3*(t.end-o):NaN}function Mm(t,i){var o=t.h.Xa();if(!o.length)return NaN;t=o[0],o=A(o);for(var u=o.next();!u.done;u=o.next())u=u.value,u.type==="variant"&&u.bandwidth>t.bandwidth&&(t=u);switch(i){case cl:return t.videoBandwidth||NaN;case Lm:return t.audioBandwidth||NaN;default:return t.bandwidth}}function Oh(t){function i(D){return 100*o(D/100)}function o(D){return Math.round(D)}function u(D){return!Number.isNaN(D)&&D!=null&&D!==""&&D!==!1}var l=[],h={br:o,d:o,bl:i,dl:i,mtp:i,nor:function(D){return encodeURIComponent(D)},rtp:i,tb:o},p=Object.keys(t||{}).sort();p=A(p);for(var m=p.next();!m.done;m=p.next()){m=m.value;var w=t[m];if(u(w)&&(m!=="v"||w!==1)&&(m!="pr"||w!==1)){var C=h[m];C&&(w=C(w)),C=typeof w;var _=void 0;_=C==="string"&&m!=="ot"&&m!=="sf"&&m!=="st"?m+"="+JSON.stringify(w):C==="boolean"?m:C==="symbol"?m+"="+w.description:m+"="+w,l.push(_)}}return l.join(",")}function RE(t){var i=Object.keys(t),o={},u=["Object","Request","Session","Status"],l=[{},{},{},{}],h={br:0,d:0,ot:0,tb:0,bl:1,dl:1,mtp:1,nor:1,nrr:1,su:1,cid:2,pr:2,sf:2,sid:2,st:2,v:2,bs:3,rtp:3};i=A(i);for(var p=i.next();!p.done;p=i.next())p=p.value,l[h[p]!=null?h[p]:1][p]=t[p];for(t=0;t<l.length;t++)(h=Oh(l[t]))&&(o["CMCD-"+u[t]]=h);return o}function _m(t,i){return!i||t.includes("offline:")?t:(t=new Si(t),t.g.set("CMCD",i),t.toString())}var Rm="m",Lm="a",cl="v",dl="av",LE="i",Nm="c",Dm="tt",Uh="v",NE="l";pe("shaka.util.CmcdManager.StreamingFormat",{Lg:"d",Tg:"h",fh:"s",$g:"o"});function Sc(){}function jh(t,i,o,u,l){var h=l in u,p=!0,m;for(m in i){var w=l+"."+m,C=h?u[l]:o[m];h||m in o?i[m]===void 0?C===void 0||h?delete t[m]:t[m]=Au(C):C.constructor==Object&&i[m]&&i[m].constructor==Object?(t[m]||(t[m]=Au(C)),w=jh(t[m],i[m],C,u,w),p=p&&w):typeof i[m]!=typeof C||i[m]==null||typeof i[m]!="function"&&i[m].constructor!=C.constructor?(Rn("Invalid config, wrong type for "+w),p=!1):(typeof o[m]=="function"&&o[m].length!=i[m].length&&ze("Unexpected number of arguments for "+w),t[m]=i[m]):(Rn("Invalid config, unrecognized key "+w),p=!1)}return p}function Ic(t,i){for(var o={},u=o,l=0,h=0;l=t.indexOf(".",l),!(0>l);)(l==0||t[l-1]!="\\")&&(h=t.substring(h,l).replace(/\\\./g,"."),u[h]={},u=u[h],h=l+1),l+=1;return u[t.substring(h).replace(/\\\./g,".")]=i,o}function hl(t,i){return t&&i}pe("shaka.util.ConfigUtils",Sc),Sc.convertToConfigObject=Ic,Sc.mergeConfigObjects=jh;function Vi(){}function h1(t){return t=ir(t),new Si(t).Ha}function Fu(t,i,o){function u(m){Oi(h).setUint32(p,m.byteLength,!0),p+=4,h.set($e(m),p),p+=m.byteLength}if(!o||!o.byteLength)throw new oe(2,6,6015);var l;typeof i=="string"?l=ji(i,!0):l=i,t=ir(t),t=ji(t,!0);var h=new Uint8Array(12+t.byteLength+l.byteLength+o.byteLength),p=0;return u(t),u(l),u(o),h}pe("shaka.util.FairPlayUtils",Vi),Vi.commonFairPlayResponse=function(t,i){if(t===2){try{var o=an(i.data)}catch(l){return}t=!1,o=o.trim(),o.substr(0,5)==="<ckc>"&&o.substr(-6)==="</ckc>"&&(o=o.slice(5,-6),t=!0);try{var u=JSON.parse(o);u.ckc&&(o=u.ckc,t=!0),u.CkcMessage&&(o=u.CkcMessage,t=!0),u.License&&(o=u.License,t=!0)}catch(l){}t&&(i.data=yt(Bi(o)))}},Vi.conaxFairPlayRequest=function(t,i){t===2&&(i.headers["Content-Type"]="application/octet-stream")},Vi.ezdrmFairPlayRequest=function(t,i){t===2&&(i.headers["Content-Type"]="application/octet-stream")},Vi.verimatrixFairPlayRequest=function(t,i){t===2&&(t=$e(i.body),t=bt(t),i.headers["Content-Type"]="application/x-www-form-urlencoded",i.body=To("spc="+t))},Vi.conaxInitDataTransform=function(t,i,o){if(i!=="skd")return t;i=o.serverCertificate,o=ir(t).split("skd://").pop().split("?").shift(),o=S.atob(o);var u=new ArrayBuffer(2*o.length);u=new Uint16Array(u);for(var l=0,h=o.length;l<h;l++)u[l]=o.charCodeAt(l);return Fu(t,u,i)},Vi.ezdrmInitDataTransform=function(t,i,o){return i!=="skd"?t:(i=o.serverCertificate,o=ir(t).split(";").pop(),Fu(t,o,i))},Vi.verimatrixInitDataTransform=function(t,i,o){return i!=="skd"?t:(i=o.serverCertificate,o=ir(t).split("skd://").pop(),Fu(t,o,i))},Vi.initDataTransform=Fu,Vi.defaultGetContentId=h1,Vi.isFairPlaySupported=function(){var t;return j(function(i){return i.g==1?(t={initDataTypes:["cenc","sinf","skd"],videoCapabilities:[{contentType:'video/mp4; codecs="avc1.42E01E"'}]},ye(i,2),k(i,navigator.requestMediaKeySystemAccess("com.apple.fps",[t]),4)):i.g!=2?i.return(!0):(we(i),i.return(!1))})};function Cc(){}function fl(){var t=1/0;navigator.connection&&navigator.connection.saveData&&(t=360);var i={retryParameters:Rs(),servers:{},clearKeys:{},advanced:{},delayLicenseRequestUntilPlayed:!1,initDataTransform:function(p,m,w){return w.keySystem=="com.apple.fps.1_0"&&m=="skd"&&(m=w.serverCertificate,w=h1(p),p=Fu(p,w,m)),p},logLicenseExchange:!1,updateExpirationTime:1,preferredKeySystems:[],keySystemsMapping:{},parseInbandPsshEnabled:Wo()},o={retryParameters:Rs(),availabilityWindowOverride:NaN,disableAudio:!1,disableVideo:!1,disableText:!1,disableThumbnails:!1,defaultPresentationDelay:0,segmentRelativeVttTiming:!1,dash:{clockSyncUri:"",ignoreDrmInfo:!1,disableXlinkProcessing:!1,xlinkFailGracefully:!1,ignoreMinBufferTime:!1,autoCorrectDrift:!0,initialSegmentLimit:1e3,ignoreSuggestedPresentationDelay:!1,ignoreEmptyAdaptationSet:!1,ignoreMaxSegmentDuration:!1,keySystemsByURI:{"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:e2719d58-a985-b3c9-781a-b030af78d30e":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:79f0049a-4098-8642-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb":"com.adobe.primetime"},manifestPreprocessor:function(p){return hl([p],p)},sequenceMode:!1},hls:{ignoreTextStreamFailures:!1,ignoreImageStreamFailures:!1,defaultAudioCodec:"mp4a.40.2",defaultVideoCodec:"avc1.42E01E",ignoreManifestProgramDateTime:!1,mediaPlaylistFullMimeType:'video/mp2t; codecs="avc1.42E01E, mp4a.40.2"',useSafariBehaviorForLive:!0,liveSegmentsDelay:3}},u={retryParameters:Rs(),failureCallback:function(p){return hl([p])},rebufferingGoal:2,bufferingGoal:10,bufferBehind:30,ignoreTextStreamFailures:!1,alwaysStreamText:!1,startAtSegmentBoundary:!1,gapDetectionThreshold:.5,durationBackoff:1,forceTransmux:!1,safeSeekOffset:5,stallEnabled:!0,stallThreshold:1,stallSkip:.1,useNativeHlsOnSafari:!0,inaccurateManifestTolerance:2,lowLatencyMode:!1,autoLowLatencyMode:!1,forceHTTPS:!1,preferNativeHls:!1,updateIntervalSeconds:1,dispatchAllEmsgBoxes:!1,observeQualityChanges:!1,maxDisabledTime:30,parsePrftBox:!1};(Qt("Web0S")||Cs()||Qt("CrKey"))&&(u.stallSkip=0);var l={trackSelectionCallback:function(p){return j(function(m){return m.return(p)})},downloadSizeCallback:function(p){var m;return j(function(w){return w.g==1?navigator.storage&&navigator.storage.estimate?k(w,navigator.storage.estimate(),3):w.return(!0):(m=w.h,w.return(m.usage+p<.95*m.quota))})},progressCallback:function(p,m){return hl([p,m])},usePersistentLicense:!0,numberOfParallelDownloads:5},h={drm:i,manifest:o,streaming:u,mediaSource:{sourceBufferExtraFeatures:""},offline:l,abrFactory:function(){return new ln},abr:{enabled:!0,useNetworkInformation:!0,defaultBandwidthEstimate:1e6,switchInterval:8,bandwidthUpgradeTarget:.85,bandwidthDowngradeTarget:.95,restrictions:{minWidth:0,maxWidth:1/0,minHeight:0,maxHeight:t,minPixels:0,maxPixels:1/0,minFrameRate:0,maxFrameRate:1/0,minBandwidth:0,maxBandwidth:1/0},advanced:{minTotalBytes:128e3,minBytes:16e3,fastHalfLife:2,slowHalfLife:5},restrictToElementSize:!1,restrictToScreenSize:!1,ignoreDevicePixelRatio:!1},autoShowText:3,preferredAudioLanguage:"",preferredTextLanguage:"",preferredVariantRole:"",preferredTextRole:"",preferredAudioChannelCount:2,preferredVideoCodecs:[],preferredAudioCodecs:[],preferForcedSubs:!1,preferredDecodingAttributes:[],restrictions:{minWidth:0,maxWidth:1/0,minHeight:0,maxHeight:1/0,minPixels:0,maxPixels:1/0,minFrameRate:0,maxFrameRate:1/0,minBandwidth:0,maxBandwidth:1/0},playRangeStart:0,playRangeEnd:1/0,textDisplayFactory:function(){return null},cmcd:{enabled:!1,sessionId:"",contentId:"",useHeaders:!1},lcevc:{enabled:!1,dynamicPerformanceScaling:!0,logLevel:0,drawLogo:!1}};return l.trackSelectionCallback=function(p){return j(function(m){return m.return(bm(p,h.preferredAudioLanguage))})},h}function pl(t,i,o){var u={".drm.keySystemsMapping":"",".drm.servers":"",".drm.clearKeys":"",".drm.advanced":{distinctiveIdentifierRequired:!1,persistentStateRequired:!1,videoRobustness:"",audioRobustness:"",sessionType:"",serverCertificate:new Uint8Array(0),serverCertificateUri:"",individualizationServer:""}};return jh(t,i,o||fl(),u,"")}function bm(t,i){var o=t.filter(function(p){return p.type=="variant"}),u=[],l=vu(i,o.map(function(p){return p.language}));l&&(u=o.filter(function(p){return Mt(p.language)==l})),u.length==0&&(u=o.filter(function(p){return p.primary})),u.length==0&&(o.map(function(p){return p.language}),u=o);var h=u.filter(function(p){return p.height&&480>=p.height});for(h.length&&(h.sort(function(p,m){return m.height-p.height}),u=h.filter(function(p){return p.height==h[0].height})),i=[],u.length&&(o=Math.floor(u.length/2),u.sort(function(p,m){return p.bandwidth-m.bandwidth}),i.push(u[o])),t=A(t),u=t.next();!u.done;u=t.next())u=u.value,u.type!=Lt&&u.type!="image"||i.push(u);return i}pe("shaka.util.PlayerConfiguration",Cc),Cc.mergeConfigObjects=pl,Cc.createDefault=fl;function kc(){this.g=null,this.h=[]}function zu(t,i){if(t.g==null)t.g={timestamp:Date.now()/1e3,state:i,duration:0};else{var o=Date.now()/1e3;t.g.duration=o-t.g.timestamp,t.g.state!=i&&(t.h.push(t.g),t.g={timestamp:o,state:i,duration:0})}}function Mc(t,i){var o=0;t.g&&t.g.state==i&&(o+=t.g.duration),t=A(t.h);for(var u=t.next();!u.done;u=t.next())u=u.value,o+=u.state==i?u.duration:0;return o}function so(t){function i(h){return{timestamp:h.timestamp,state:h.state,duration:h.duration}}for(var o=[],u=A(t.h),l=u.next();!l.done;l=u.next())o.push(i(l.value));return t.g&&o.push(i(t.g)),o}function f1(){this.i=this.h=null,this.g=[]}function Gu(t,i,o){t.i!=i&&(t.i=i,t.g.push({timestamp:Date.now()/1e3,id:i.id,type:"text",fromAdaptation:o,bandwidth:null}))}function Bh(){this.u=this.B=this.G=this.D=this.s=this.j=this.F=this.m=this.i=this.M=this.O=this.H=this.J=this.L=this.l=this.o=NaN,this.g=new kc,this.h=new f1}function Ae(t,i){kt.call(this);var o=this;this.l=Yh,this.Uc=this.g=null,this.ia=!1,this.Xc=new Xt,this.Xb=new Xt,this.s=new Xt,this.Nb=this.i=this.Yc=this.J=this.j=this.ua=this.L=this.cf=this.V=this.Fa=this.M=this.Vc=this.H=this.xb=this.B=this.G=this.m=this.D=null,this.dc=!1,this.Nd=this.u=null,this.Yd=1e9,this.h=gl(this),this.ec={width:1/0,height:1/0},this.o=null,this.ub=new qt(this.h.preferredAudioLanguage,this.h.preferredVariantRole,this.h.preferredAudioChannelCount),this.vb=this.h.preferredTextLanguage,this.cc=this.h.preferredTextRole,this.$b=this.h.preferForcedSubs,this.Zb=[],this.fc=null,i&&i(this),this.D=BE(this),this.D.je(this.h.streaming.forceHTTPS),this.F=null,Ro&&(this.F=Ro()),this.Xc.C(S,"online",function(){o.ce()}),this.O={name:"detach"},this.W={name:"attach"},this.da={name:"unload"},this.Zd={name:"manifest-parser"},this.Xd={name:"manifest"},this.wb={name:"media-source"},this.Qd={name:"drm-engine"},this.ba={name:"load"},this.de={name:"src-equals-drm-engine"},this.yb={name:"src-equals"};var u=new Map;u.set(this.W,function(l,h){return Eo(Pm(o,l,h))}),u.set(this.O,function(l){return l.mediaElement&&(o.Xb.nb(),l.mediaElement=null),o.F&&o.F.release(),o.g=null,l=Promise.resolve(),Eo(l)}),u.set(this.da,function(l){return Eo(p1(o,l))}),u.set(this.wb,function(l){return l=bE(o,l),Eo(l)}),u.set(this.Zd,function(l,h){return l=Om(o,l,h),Eo(l)}),u.set(this.Xd,function(l){return g1(o,l)}),u.set(this.Qd,function(l){return l=Ce(o,l),Eo(l)}),u.set(this.ba,function(l,h){return Eo(zh(o,l,h))}),u.set(this.de,function(l,h){return l=PE(o,l,h),Eo(l)}),u.set(this.yb,function(l,h){return xn(o,l,h)}),this.Ga=new a1(this.O,{Mf:function(l,h,p,m){var w=null;return l==o.O&&(w=p==o.O?o.O:o.W),l==o.W&&(w=p==o.O||h.mediaElement!=m.mediaElement?o.O:p==o.W?o.W:p==o.wb||p==o.ba?o.wb:p==o.yb?o.de:null),l==o.wb&&(w=p==o.ba&&h.mediaElement==m.mediaElement?o.Zd:o.da),l==o.Zd&&(w=Ku(o.ba,o.Xd,o.da,p,h,m)),l==o.Xd&&(w=Ku(o.ba,o.Qd,o.da,p,h,m)),l==o.Qd&&(w=Ku(o.ba,o.ba,o.da,p,h,m)),l==o.de&&(w=p==o.yb&&h.mediaElement==m.mediaElement?o.yb:o.da),(l==o.ba||l==o.yb)&&(w=o.da),l==o.da&&(w=m.mediaElement&&h.mediaElement==m.mediaElement?o.W:o.O),w},yf:function(l,h,p){return o.dispatchEvent(yn("onstatechange",new Map().set("state",l.name))),u.get(l)(h,p)},handleError:function(l){return j(function(h){return h.g==1?k(h,p1(o,l),2):h.return(l.mediaElement?o.W:o.O)})},eg:function(l){o.dispatchEvent(yn("onstateidle",new Map().set("state",l.name)))}}),this.af=new ht(function(){rg(o.i.variants,o.h.restrictions,o.ec)&&hs(o)}),t&&this.Yb(t,!0)}Te(Ae,kt);function ds(t){t.L!=null&&(t.L.release(),t.L=null)}function DE(t,i){if(i.lcevc.enabled){var o=t.Xa();o&&o[0]&&o[0].videoMimeType==wl.ts&&(navigator.userAgent.match(/Edge?\//)||navigator.userAgent.match(/Edge\//))&&(i.streaming.forceTransmux||ze("LCEVC Warning: For MPEG-2 TS decoding the config.streaming.forceTransmux must be enabled.")),ds(t),t.L==null&&(t.L=new nl(t.g,t.cf,i.lcevc),t.G&&(t.G.D=t.L))}else ds(t)}function yn(t,i){return new dt(t,i)}v=Ae.prototype,v.destroy=function(){var t=this,i;return j(function(o){switch(o.g){case 1:return t.l==Rr?o.return():(ds(t),t.l=Rr,i=Uu(t.Ga,function(){return{node:t.O,payload:zs(),hb:!1}}),k(o,new Promise(function(u){i.Jb=function(){},i.bd=function(){u()},i.mb=function(){u()},i.onError=function(){u()},i.dd=function(){u()}}),2));case 2:return k(o,t.Ga.destroy(),3);case 3:if(t.Xc&&(t.Xc.release(),t.Xc=null),t.Xb&&(t.Xb.release(),t.Xb=null),t.s&&(t.s.release(),t.s=null),t.Nd=null,t.u=null,t.h=null,t.o=null,t.Uc=null,t.V=null,!t.D){o.A(4);break}return k(o,t.D.destroy(),5);case 5:t.D=null;case 4:kt.prototype.release.call(t),le(o)}})},v.Yb=function(t,i){if(i=i===void 0?!0:i,this.l==Rr)return Promise.reject(lr());var o=zs();o.mediaElement=t,Tr()||(i=!1);var u=i?this.wb:this.W;return t=Uu(this.Ga,function(){return{node:u,payload:o,hb:!1}}),t.Jb=function(){},Xh(t)},v.lf=function(t){this.cf=t},v.detach=function(){var t=this;if(this.l==Rr)return Promise.reject(lr());var i=Uu(this.Ga,function(){return{node:t.O,payload:zs(),hb:!1}});return i.Jb=function(){},Xh(i)},v.re=function(t){var i=this;if(t=t===void 0?!0:t,this.l==Rr)return Promise.reject(lr());this.dc=!1,Tr()||(t=!1),ds(this);var o=zs(),u=Uu(this.Ga,function(l){var h=l.mediaElement&&t?i.wb:l.mediaElement?i.W:i.O;return o.mediaElement=l.mediaElement,{node:h,payload:o,hb:!1}});return u.Jb=function(){},Xh(u)},v.Fg=function(t){this.fc=t},v.load=function(t,i,o){var u=this;if(this.fc=null,this.dc=!1,this.l==Rr)return Promise.reject(lr());this.dispatchEvent(yn("loading"));var l=zs();l.uri=t,l.ne=Date.now()/1e3,o&&(l.mimeType=o),i!==void 0&&(l.startTime=i);var h=Fh(this,l)?this.yb:this.ba,p=Uu(this.Ga,function(m){return m.mediaElement==null?null:(l.mediaElement=m.mediaElement,{node:h,payload:l,hb:!0})});return this.o=new Bh,this.V=w1(this),p.Jb=function(){},new Promise(function(m,w){p.dd=function(){return w(new oe(2,7,7002))},p.bd=function(){m(),u.dispatchEvent(yn("loaded"))},p.mb=function(){return w(lr())},p.onError=function(C){return w(C)}})};function Fh(t,i){if(!Tr())return!0;var o=i.mimeType,u=i.uri||"";if(o||(o=Wa(u),o=wl[o]),o){if((i.mediaElement||Od()).canPlayType(o)=="")return!1;if(!Tr()||!(o in Ir||Wa(u)in Mu)||t.h.streaming.preferNativeHls)return!0;if(Ia())return t.h.streaming.useNativeHlsOnSafari}return!1}function Pm(t,i,o){return i.mediaElement==null&&(i.mediaElement=o.mediaElement,t.Xb.C(i.mediaElement,"error",function(){var u=Dc(t);u&&_o(t,u)})),t.g=i.mediaElement,Promise.resolve()}function p1(t,i){var o,u,l,h,p,m,w,C,_;return j(function(D){switch(D.g){case 1:return t.l!=Rr&&(t.l=Yh),o=t.Zb.map(function(b){return b()}),t.Zb=[],k(D,Promise.all(o),2);case 2:if(t.dispatchEvent(yn("unloading")),i.mimeType=null,i.startTime=null,i.uri=null,t.Fa&&(t.Fa.release(),t.Fa=null),i.mediaElement&&t.s.nb(),t.af.stop(),t.xb&&(t.xb.release(),t.xb=null),t.Vc&&(t.Vc.stop(),t.Vc=null),!t.J){D.A(3);break}return k(D,t.J.stop(),4);case 4:t.J=null,t.Yc=null;case 3:if(!t.u){D.A(5);break}return k(D,t.u.stop(),5);case 5:if(!t.j){D.A(7);break}return k(D,t.j.destroy(),8);case 8:t.j=null;case 7:if(t.H&&(t.H.release(),t.H=null),t.B&&(t.B.release(),t.B=null),!t.G){D.A(9);break}return k(D,t.G.destroy(),10);case 10:t.G=null;case 9:if(t.F&&t.F.onAssetUnload(),!i.mediaElement||!i.mediaElement.src){D.A(11);break}return k(D,new Promise(function(b){return new ht(b).N(.1)}),12);case 12:for(i.mediaElement.removeAttribute("src"),i.mediaElement.load();i.mediaElement.lastChild;)i.mediaElement.removeChild(i.mediaElement.firstChild);case 11:if(!t.m){D.A(13);break}return k(D,t.m.destroy(),14);case 14:t.m=null;case 13:if(t.Nb=null,t.M=null,t.i){for(u=A(t.i.variants),l=u.next();!l.done;l=u.next())for(h=l.value,p=A([h.audio,h.video]),m=p.next();!m.done;m=p.next())(w=m.value)&&w.segmentIndex&&w.segmentIndex.release();for(C=A(t.i.textStreams),m=C.next();!m.done;m=C.next())_=m.value,_.segmentIndex&&_.segmentIndex.release()}t.i=null,t.o=new Bh,t.Ud=null,Rc(t),le(D)}})}function bE(t,i){var o,u,l,h,p;return j(function(m){if(m.g==1)return o=t.h.textDisplayFactory,u=o(),t.Ud=o,l=GE(i.mediaElement,u,function(w,C,_){Um(t,w,C,_)},t.L),l.configure(t.h.mediaSource),h=t.h.manifest,p=h.segmentRelativeVttTiming,l.H=p,k(m,l.J,2);t.G=l,le(m)})}function Om(t,i,o){var u,l,h,p;return j(function(m){if(m.g==1)return i.mimeType=o.mimeType,i.uri=o.uri,u=i.uri,l=t.D,t.Nb=u,h=t,k(m,ky(u,l,t.h.manifest.retryParameters,i.mimeType),2);h.Yc=m.h,t.J=t.Yc(),p=Au(t.h.manifest),o.mediaElement&&o.mediaElement.nodeName==="AUDIO"&&(p.disableVideo=!0),t.J.configure(p),le(m)})}function g1(t,i){var o=i.uri;i=t.D,t.Fa=new bu(function(){return t.uc()}),t.Fa.addEventListener("regionadd",function(h){h=h.region,fs(t,"timelineregionadded",h),t.F&&t.F.onDashTimedMetadata(h)}),t.ua=null,t.h.streaming.observeQualityChanges&&(t.ua=new kh(function(){return t.Na()}),t.ua.addEventListener("qualitychange",function(h){var p=h.quality;h=h.position,p=new Map().set("mediaQuality",{bandwidth:p.bandwidth,audioSamplingRate:p.audioSamplingRate,codecs:p.codecs,contentType:p.contentType,frameRate:p.frameRate,height:p.height,mimeType:p.mimeType,channelsCount:p.channelsCount,pixelAspectRatio:p.pixelAspectRatio,width:p.width}).set("position",h),t.dispatchEvent(yn("mediaqualitychanged",p))}));var u={networkingEngine:i,modifyManifestRequest:function(h,p){var m=t.V;try{m.g.enabled&&(m.o=p.format,Bu(m,h,{ot:Rm,su:!m.i}))}catch(w){Kn("CMCD_MANIFEST_ERROR","Could not generate manifest CMCD data.",w)}},modifySegmentRequest:function(h,p){Gi(t.V,h,p)},filter:function(h){return C1(t,h)},makeTextStreamsForClosedCaptions:function(h){return VE(t,h)},onTimelineRegionAdded:function(h){var p=t.Fa;e:{for(var m=A(p.g),w=m.next();!w.done;w=m.next())if(w=w.value,w.schemeIdUri==h.schemeIdUri&&w.id==h.id&&w.startTime==h.startTime&&w.endTime==h.endTime){m=w;break e}m=null}m==null&&(p.g.add(h),h=new dt("regionadd",new Map([["region",h]])),p.dispatchEvent(h))},onEvent:function(h){return t.dispatchEvent(h)},onError:function(h){return _o(t,h)},isLowLatencyMode:function(){return t.h.streaming.lowLatencyMode},isAutoLowLatencyMode:function(){return t.h.streaming.autoLowLatencyMode},enableLowLatencyMode:function(){t.configure("streaming.lowLatencyMode",!0)},updateDuration:function(){t.j&&t.j.updateDuration()},newDrmInfo:function(h){var p=t.m?t.m.g:null;p&&t.m.u&&zm(t,p.keySystem,h)}},l=Date.now()/1e3;return new Zt(function(){var h,p,m,w;return j(function(C){if(C.g==1)return h=t,k(C,t.J.start(o,u),2);if(h.i=C.h,p=yn("manifestparsed"),t.dispatchEvent(p),t.i.variants.length==0)throw new oe(2,4,4036);jE(t.i),m=Date.now()/1e3,w=m-l,t.o.F=w,le(C)})}(),function(){return t.J.stop()})}function Ce(t,i){var o,u;return j(function(l){return l.g==1?(o=Date.now()/1e3,u=!0,t.m=x1(t,{kb:t.D,onError:function(h){_o(t,h)},cd:function(h){R1(t,h)},onExpirationUpdated:function(h,p){Km(t,h,p)},onEvent:function(h){t.dispatchEvent(h),h.type=="drmsessionupdate"&&u&&(u=!1,t.o.j=Date.now()/1e3-o,t.L&&(h=t.L,h.g&&h.h.classList.add("shaka-hidden")))}}),t.m.configure(t.h.drm),k(l,Ga(t.m,t.i.variants,t.i.offlineSessionIds),2)):l.g!=3?k(l,t.m.Yb(i.mediaElement),3):k(l,C1(t,t.i),0)})}function zh(t,i,o){var u,l,h,p,m,w,C,_,D,b,U,K,Z,B,X,ge,ne;return j(function(ce){switch(ce.g){case 1:for(i.startTime=o.startTime,t.fc!=null&&(i.startTime=t.fc,t.fc=null),u=i.mediaElement,l=i.uri,t.Nb=l,t.H=new rl({Tc:function(){return u.playbackRate},Pc:function(){return u.defaultPlaybackRate},le:function(de){u.playbackRate=de},Me:function(de){u.currentTime+=de}}),h=function(){return vl(t)},p=function(){return Gm(t)},t.s.C(u,"playing",h),t.s.C(u,"pause",h),t.s.C(u,"ended",h),t.s.C(u,"ratechange",p),DE(t,t.h),m=t.h.abrFactory,t.u&&t.Nd==m||(t.Nd=m,t.u=m(),typeof t.u.setMediaElement!="function"&&(gg("AbrManager","Please use an AbrManager with setMediaElement function."),t.u.setMediaElement=function(){}),t.u.configure(t.h.abr)),t.ub=new qt(t.h.preferredAudioLanguage,t.h.preferredVariantRole,t.h.preferredAudioChannelCount),t.vb=t.h.preferredTextLanguage,t.cc=t.h.preferredTextRole,t.$b=t.h.preferForcedSubs,ar(t.i.presentationTimeline,t.h.playRangeStart,t.h.playRangeEnd),t.u.init(function(de,Ee,Ie){t.j&&de!=t.j.l&&xl(t,de,!0,Ee===void 0?!1:Ee,Ie===void 0?0:Ie)}),t.u.setMediaElement(u),Qr(t.i,t.h.preferredVideoCodecs,t.h.preferredAudioCodecs,t.h.preferredAudioChannelCount,t.h.preferredDecodingAttributes),t.j=E1(t),t.j.configure(t.h.streaming),t.l=Ki,u.textTracks&&t.s.C(u.textTracks,"addtrack",function(de){if(de.track)switch(de=de.track,de.kind){case"chapters":y1(t,de)}}),t.dispatchEvent(yn("streaming")),w=null,(C=t.j.l)||(w=hs(t)),_=[],D=C||w,b=A([D.video,D.audio]),U=b.next();!U.done;U=b.next())(K=U.value)&&!K.segmentIndex&&_.push(K.createSegmentIndex());if(!(0<_.length)){ce.A(2);break}return k(ce,Promise.all(_),2);case 2:if(t.B=FE(t,i.startTime),t.xb=zE(t),Z=Math.max(t.i.minBufferTime,t.h.streaming.rebufferingGoal),T1(t,Z),C){ce.A(4);break}if(xl(t,w,!0,!1,0),!t.h.streaming.startAtSegmentBoundary){ce.A(5);break}return B=t.B.Ic(),k(ce,M1(w,B),6);case 6:X=ce.h,t.B.zd(X);case 5:Hh(t,null,xu(w));case 4:return t.B.yd(),ge=t.Fb().find(function(de){return de.active}),ge||((ne=dg(t.i.textStreams,t.vb,t.cc,t.$b)[0]||null)&&Gu(t.o.h,ne,!0),w&&(ne?(w.audio&&_1(t,w.audio,ne)&&(t.ia=!0),t.ia&&t.G.m.setTextVisibility(!0),Nc(t)):t.ia=!1),ne&&(t.h.streaming.alwaysStreamText||t.Hd())&&Bs(t.j,ne)),k(ce,t.j.start(),7);case 7:t.h.abr.enabled&&(t.u.enable(),Tl(t)),ry(t.j?t.j.l:null,t.i),bc(t.i),_r(t),yl(t),t.i.variants.some(function(de){return de.primary}),t.dc=!0,t.s.ma(u,"loadedmetadata",function(){t.o.m=Date.now()/1e3-o.ne}),le(ce)}})}function PE(t,i,o){var u,l,h,p,m,w,C;return j(function(_){return _.g==1?(u=xt,l=Date.now()/1e3,h=!0,t.m=x1(t,{kb:t.D,onError:function(D){_o(t,D)},cd:function(D){R1(t,D)},onExpirationUpdated:function(D,b){Km(t,D,b)},onEvent:function(D){t.dispatchEvent(D),D.type=="drmsessionupdate"&&h&&(h=!1,t.o.j=Date.now()/1e3-l)}}),t.m.configure(t.h.drm),p=o.uri||"",m=Wa(p),w=wl[m],w=="application/x-mpegurl"&&Ia()&&(w="application/vnd.apple.mpegurl"),w||(w="video/mp4"),C={id:0,language:"und",disabledUntilTime:0,primary:!1,audio:null,video:{id:0,originalId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:null,mimeType:o.mimeType?o.mimeType.split(";")[0]:w,codecs:o.mimeType?$o(o.mimeType):"",encrypted:!0,drmInfos:[],keyIds:new Set,language:"und",label:null,type:u.va,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null},bandwidth:100,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]},t.m.V=!0,k(_,Ga(t.m,[C],[]),2)):k(_,t.m.Yb(i.mediaElement),0)})}function xn(t,i,o){function u(){return vl(t)}i.uri=o.uri,i.startTime=o.startTime,t.Nb=i.uri;var l=i.mediaElement;t.B=new Qy(l);var h=!1;t.Zb.push(function(){h=!0}),i.startTime!=null&&t.B.zd(i.startTime),t.H=new rl({Tc:function(){return l.playbackRate},Pc:function(){return l.defaultPlaybackRate},le:function(w){l.playbackRate=w},Me:function(w){l.currentTime+=w}}),T1(t,t.h.streaming.rebufferingGoal),t.s.C(l,"playing",u),t.s.C(l,"pause",u),t.s.C(l,"ended",u),t.s.C(l,"ratechange",function(){return Gm(t)}),l.preload!="none"&&t.s.ma(l,"loadedmetadata",function(){t.o.m=Date.now()/1e3-o.ne}),l.audioTracks&&(t.s.C(l.audioTracks,"addtrack",function(){return _r(t)}),t.s.C(l.audioTracks,"removetrack",function(){return _r(t)}),t.s.C(l.audioTracks,"change",function(){return _r(t)})),l.textTracks&&(t.s.C(l.textTracks,"addtrack",function(w){if(w.track)switch(w=w.track,w.kind){case"metadata":UE(t,w);break;case"chapters":y1(t,w);break;default:_r(t)}}),t.s.C(l.textTracks,"removetrack",function(){return _r(t)}),t.s.C(l.textTracks,"change",function(){return _r(t)}));var p=Wa(i.uri);l.src=kE(t.V,i.uri,wl[p]),(Cs()||Qt("Web0S"))&&l.load(),t.l=cr,t.dispatchEvent(yn("streaming"));var m=new Wt;return io(l,HTMLMediaElement.HAVE_METADATA,t.s,function(){t.B.yd(),m.resolve()}),io(l,HTMLMediaElement.HAVE_CURRENT_DATA,t.s,function(){var w;return j(function(C){if(C.g==1)return m1(t),w=_c(t),w.find(function(_){return _.mode!="disabled"})?C.A(2):k(C,new Promise(function(_){t.s.ma(l.textTracks,"change",_),new ht(_).N(1)}),2);if(h)return C.return();OE(t),le(C)})}),l.error?m.reject(Dc(t)):l.preload=="none"&&(ze('With <video preload="none">, the browser will not load anything until play() is called. We are unable to measure load latency in a meaningful way, and we cannot provide track info yet. Please do not use preload="none" with Shaka Player.'),m.resolve()),t.s.ma(l,"error",function(){m.reject(Dc(t))}),new Zt(m,function(){return m.reject(new oe(2,7,7001)),Promise.resolve()}).Y(function(){t.dc=!0})}function m1(t){var i=t.h.preferredAudioLanguage;if(i!=""){t.ge(i);var o=t.h.preferredVariantRole;o!=""&&t.ge(i,o)}}function OE(t){var i=t.h.preferredTextLanguage,o=t.h.preferForcedSubs;if(i!=""){t.he(i,"",o);var u=t.h.preferredTextRole;u!=""&&t.he(i,u,o)}}function UE(t,i){if(i.kind=="metadata"){i.mode="hidden",t.s.C(i,"cuechange",function(){if(i.activeCues)for(var u=A(i.activeCues),l=u.next();!l.done;l=u.next())l=l.value,v1(t,l.startTime,l.endTime,l.type,l.value),t.F&&t.F.onCueMetadataChange(l.value)});var o=new ht(function(){var u=A1(t);u=A(u);for(var l=u.next();!l.done;l=u.next())l.value.mode="hidden"}).Mb().N(.5);t.Zb.push(function(){o.stop()})}}function Um(t,i,o,u){i=A(i);for(var l=i.next();!l.done;l=i.next())if(l=l.value,l.data&&l.cueTime&&l.frames){var h=l.cueTime+o,p=u;p&&h>p&&(p=h);for(var m=A(l.frames),w=m.next();!w.done;w=m.next())v1(t,h,p,"org.id3",w.value);t.F&&t.F.onHlsTimedMetadata(l,h)}}function v1(t,i,o,u,l){i=new Map().set("startTime",i).set("endTime",o).set("metadataType",u).set("payload",l),t.dispatchEvent(yn("metadata",i))}function y1(t,i){if(i&&i.kind=="chapters"){i.mode="hidden";var o=new ht(function(){i.mode="hidden"}).Mb().N(.5);t.Zb.push(function(){o.stop()})}}function jE(t){function i(o){return o.video&&o.audio||o.video&&o.video.codecs.includes(",")}t.variants.some(i)&&(t.variants=t.variants.filter(i))}function x1(t,i){return new eh(i,t.h.drm.updateExpirationTime)}function BE(t){return new Nt(function(i,o){t.u&&t.u.segmentDownloaded(i,o)},function(i,o,u){i=new Map().set("headers",i).set("request",o).set("requestType",u),t.dispatchEvent(yn("downloadheadersreceived",i))},function(i,o,u,l){i=new Map().set("request",i).set("error",o).set("httpResponseCode",u).set("aborted",l),t.dispatchEvent(yn("downloadfailed",i))})}function FE(t,i){return new hm(t.g,t.i,t.h.streaming,i,function(){t.xb&&Rt(t.xb,!0),t.j&&t.j.vc(),t.M&&jm(t)},function(o){return t.dispatchEvent(o)})}function zE(t){var i=new wc(t.Fa);i.addEventListener("enter",function(u){fs(t,"timelineregionenter",u.region)}),i.addEventListener("exit",function(u){fs(t,"timelineregionexit",u.region)}),i.addEventListener("skip",function(u){var l=u.region;u.seeking||(fs(t,"timelineregionenter",l),fs(t,"timelineregionexit",l))});var o=new e1(t.g);return o.g.add(i),t.ua&&o.g.add(t.ua),o}function T1(t,i){t.M=new yg,t.M.g=Pa,xg(t.M,i,Math.min(.5,i/2)),Rc(t),t.Vc=new ht(function(){jm(t)}).Ca(.25)}function jm(t){switch(t.l){case cr:if(t.g.ended)var i=!0;else{var o=vh(t.g.buffered);i=o!=null&&o>=t.g.duration-1}break;case Ki:e:if(t.g.ended||Jg(t.G))i=!0;else{if(t.i.presentationTimeline.U()){o=t.i.presentationTimeline.gb();var u=vh(t.g.buffered);if(u!=null&&u>=o){i=!0;break e}}i=!1}break;default:i=!1}u=ur(t.g.buffered,t.g.currentTime),o=t.M;var l=i,h=o.h.get(o.g);i=o.g,u=l||u>=h?Yd:Pa,o.g=u,i!=u&&Rc(t)}function GE(t,i,o,u){return new wh(t,i,o,u)}function w1(t){return new ju({getBandwidthEstimate:function(){return t.u?t.u.getBandwidthEstimate():NaN},Na:function(){return t.Na()},getCurrentTime:function(){return t.g?t.g.currentTime:0},Xa:function(){return t.Xa()},Rc:function(){return t.Rc()},U:function(){return t.U()}},t.h.cmcd)}function E1(t){return new t1(t.i,{Sc:function(){return t.B?t.B.Ic():0},getBandwidthEstimate:function(){return t.u.getBandwidthEstimate()},modifySegmentRequest:function(i,o){Gi(t.V,i,o)},R:t.G,kb:t.D,onError:function(i){return _o(t,i)},onEvent:function(i){return t.dispatchEvent(i)},gg:function(){t.J&&t.J.update&&t.J.update()},Wd:function(i,o,u){t.B&&t.B.Ne(),jm(t),i=new Map().set("start",i).set("end",o).set("contentType",u),t.dispatchEvent(yn("segmentappended",i))},fg:function(i,o){(o=o.Od)&&t.ua&&oo(t.ua,o,i)},xe:function(i,o){var u=t.m;if(u.h.parseInbandPsshEnabled&&["audio","video"].includes(i)){o=new ja($e(o));var l=0,h=A(o.data);for(i=h.next();!i.done;i=h.next())l+=i.value.length;if(l==0)u=Promise.resolve();else{for(l=new Uint8Array(l),h=0,o=A(o.data),i=o.next();!i.done;i=o.next())i=i.value,l.set(i,h),h+=i.length;Ha(u,"cenc",l),u=u.o}}else u=Promise.resolve();return u},hg:function(i,o,u){Um(t,i,o,u)}})}v.configure=function(t,i){arguments.length==2&&typeof t=="string"&&(t=Ic(t,i)),t.streaming&&"forceTransmuxTS"in t.streaming&&(gg("streaming.forceTransmuxTS configuration","Please Use streaming.forceTransmux instead."),t.streaming.forceTransmux=t.streaming.forceTransmuxTS,delete t.streaming.forceTransmuxTS),t.streaming&&t.streaming.lowLatencyMode&&(t.streaming.inaccurateManifestTolerance==null&&(t.streaming.inaccurateManifestTolerance=0),t.streaming.rebufferingGoal==null&&(t.streaming.rebufferingGoal=.01));var o=pl(this.h,t,gl(this));return Bm(this),o};function Bm(t){if(t.J){var i=Au(t.h.manifest);t.g&&t.g.nodeName==="AUDIO"&&(i.disableVideo=!0),t.J.configure(i)}if(t.m&&t.m.configure(t.h.drm),t.j){t.j.configure(t.h.streaming);try{ml(t,t.i)}catch(h){_o(t,h)}t.u&&yl(t),i=t.j.l,!i||i.allowedByApplication&&i.allowedByKeySystem||Kh(t)}if(t.D&&t.D.je(t.h.streaming.forceHTTPS),t.G&&(t.G.configure(t.h.mediaSource),t.G.H=t.h.manifest.segmentRelativeVttTiming,i=t.h.textDisplayFactory,t.Ud!=i)){var o=i(),u=t.G,l=u.m;u.m=o,l&&(o.setTextVisibility(l.isTextVisible()),l.destroy()),u.g&&(u.g.i=o),t.Ud=i,t.j&&(i=t.j,(o=i.j.get(Lt))&&Fs(i,o.stream,!0,0,!0))}t.u&&(t.u.configure(t.h.abr),t.h.abr.enabled?t.u.enable():t.u.disable(),Tl(t)),t.M&&(i=t.h.streaming.rebufferingGoal,t.i&&(i=Math.max(i,t.i.minBufferTime)),xg(t.M,i,Math.min(.5,i/2))),t.i&&ar(t.i.presentationTimeline,t.h.playRangeStart,t.h.playRangeEnd)}v.getConfiguration=function(){var t=gl(this);return pl(t,this.h,gl(this)),t},v.Bf=function(){if(this.g){var t=this.g.buffered.length;t=t?this.g.buffered.end(t-1):0;var i=this.getConfiguration().streaming.bufferingGoal;if(i=Math.min(this.g.currentTime+i,this.uc().end),t>=i)return 1;if(!(t<=this.g.currentTime)&&t<i)return(t-this.g.currentTime)/(i-this.g.currentTime)}return 0},v.rg=function(){for(var t in this.h)delete this.h[t];pl(this.h,gl(this),gl(this)),Bm(this)},v.Hf=function(){return this.l},v.Lf=function(){return this.g},v.jc=function(){return this.D},v.Dd=function(){return this.Nb},v.Ge=function(){return this.F?this.F:null},v.U=function(){return this.i?this.i.presentationTimeline.U():this.g&&this.g.src?this.g.duration==1/0:!1},v.jb=function(){return this.i?this.i.presentationTimeline.jb():!1},v.Zf=function(){if(this.i){var t=this.i.variants;return t.length?!t[0].video:!1}return this.g&&this.g.src?this.g.videoTracks?this.g.videoTracks.length==0:this.g.videoHeight==0:!1},v.uc=function(){if(!this.dc)return{start:0,end:0};if(this.i){var t=this.i.presentationTimeline;return{start:t.Db(),end:t.Oa()}}return this.g&&this.g.src&&(t=this.g.seekable,t.length)?{start:t.start(0),end:t.end(t.length-1)}:{start:0,end:0}},v.Xf=function(){this.U()&&(this.g.currentTime=this.uc().end)},v.keySystem=function(){var t=this.drmInfo();return t?t.keySystem:""},v.drmInfo=function(){return this.m?this.m.g:null},v.ic=function(){return this.m?this.m.ic():1/0},v.Qc=function(){return this.m?this.m.Qc():{}},v.Fd=function(){return this.M?this.M.g==Pa:!1},v.Rc=function(){return this.g?this.H?this.H.i:1:0},v.Ag=function(t){t==0?ze("A trick play rate of 0 is unsupported!"):(this.g.paused&&this.g.play(),this.H.set(t),this.l==Ki&&(this.u.playbackRateChanged(t),sl(this.j,1<Math.abs(t))))},v.pf=function(){var t=this.H.Pc();this.l==cr&&this.H.set(t),this.l==Ki&&(this.H.set(t),this.u.playbackRateChanged(t),sl(this.j,!1))},v.Xa=function(){if(this.i){for(var t=this.j?this.j.l:null,i=[],o=0,u=A(this.i.variants),l=u.next();!l.done;l=u.next())if(l=l.value,Tu(l)){var h=xu(l);h.active=l==t,h.active||o==1||t==null||l.video!=t.video||l.audio!=t.audio||(h.active=!0),h.active&&o++,i.push(h)}return i}return this.g&&this.g.audioTracks?Array.from(this.g.audioTracks).map(function(p){return Xl(p)}):[]},v.Fb=function(){if(this.i){for(var t=this.j?this.j.o:null,i=[],o=A(this.i.textStreams),u=o.next();!u.done;u=o.next()){u=u.value;var l=ba(u);l.active=u==t,i.push(l)}return i}return this.g&&this.g.src&&this.g.textTracks?_c(this).map(function(h){return lg(h)}):[]},v.Ff=function(){return this.i?this.i.imageStreams.map(function(t){return ql(t)}):[]},v.Tf=function(t,i){var o=this,u,l,h,p,m,w,C,_,D,b,U,K,Z,B,X,ge,ne,ce,de,Ee;return j(function(Ie){return Ie.g==1?o.i?(u=o.i.imageStreams.find(function(be){return be.id==t}))?u.segmentIndex?Ie.A(3):k(Ie,u.createSegmentIndex(),3):Ie.return(null):Ie.A(2):Ie.g!=2?(l=u.segmentIndex.find(i),l==null||(h=u.segmentIndex.get(l),p=h.tilesLayout||u.tilesLayout,m=/(\d+)x(\d+)/.exec(p),!m)?Ie.return(null):(w=u.width||0,C=u.height||0,_=parseInt(m[1],10),D=parseInt(m[2],10),b=w/_,U=C/D,K=_*D,Z=h.j-h.startTime,B=h.s||Z/K,X=h.startTime,ne=ge=0,1<K&&(ce=Math.floor((i-h.startTime)/B),X=h.startTime+ce*B,ge=ce%_*b,ne=Math.floor(ce/_)*U),de=!1,(Ee=h.o)&&(de=!0,U=Ee.height,ge=Ee.positionX,ne=Ee.positionY,b=Ee.width),Ie.return({imageHeight:C,imageWidth:w,height:U,positionX:ge,positionY:ne,startTime:X,duration:B,uris:h.ya(),width:b,sprite:de}))):Ie.return(null)})},v.Se=function(t){if(this.i&&this.j){var i=this.i.textStreams.find(function(u){return u.id==t.id});i&&i!=this.j.o&&(Gu(this.o.h,i,!1),Bs(this.j,i),Lc(this),this.vb=i.language)}else if(this.g&&this.g.src&&this.g.textTracks){i=_c(this),i=A(i);for(var o=i.next();!o.done;o=i.next())o=o.value,ag(o)==t.id?o.mode=this.ia?"showing":"hidden":o.mode="disabled";Lc(this)}},v.Te=function(t,i,o){if(i=i===void 0?!1:i,o=o===void 0?0:o,this.i&&this.j){this.h.abr.enabled&&ze("Changing tracks while abr manager is enabled will likely result in the selected track being overriden. Consider disabling abr before calling selectVariantTrack().");var u=this.i.variants.find(function(l){return l.id==t.id});u&&Tu(u)&&(xl(this,u,!1,i,o),this.ub=new py(u),yl(this))}else if(this.g&&this.g.audioTracks){for(i=Array.from(this.g.audioTracks),i=A(i),o=i.next();!o.done;o=i.next())if(o=o.value,ag(o)==t.id){Vm(this,o);break}}},v.Af=function(){return L1(this.Xa())},v.Rf=function(){return L1(this.Fb())},v.zf=function(){return Array.from(Wm(this.Xa()))},v.Qf=function(){return Array.from(Wm(this.Fb()))},v.ge=function(t,i,o){if(o=o===void 0?0:o,this.i&&this.B){this.ub=new qt(t,i||"",o,""),i=function(m,w){return m.video||w.video?m.video&&w.video?Math.abs((m.video.height||0)-(w.video.height||0))+Math.abs((m.video.width||0)-(w.video.width||0)):1/0:0},t=this.j.l;var u=this.ub.create(this.i.variants);o=null,u=A(u.values());for(var l=u.next();!l.done;l=u.next())l=l.value,(!o||i(o,t)>i(l,t))&&(o=l);o?(i=xu(o),this.Te(i,!0)):Kh(this)}else if(this.g&&this.g.audioTracks){l=Array.from(this.g.audioTracks),t=Mt(t),u=o=null,l=A(l);for(var h=l.next();!h.done;h=l.next()){h=h.value;var p=Xl(h);Mt(p.language)==t&&(o=h,i?p.roles.includes(i)&&(u=h):p.roles.length==0&&(u=h))}u?Vm(this,u):o&&Vm(this,o)}},v.he=function(t,i,o){if(o=o===void 0?!1:o,this.i&&this.B)this.vb=t,this.cc=i||"",this.$b=o,(t=dg(this.i.textStreams,this.vb,this.cc,this.$b)[0]||null)&&t!=this.j.o&&(Gu(this.o.h,t,!1),this.h.streaming.alwaysStreamText||this.Hd())&&(Bs(this.j,t),Lc(this));else{var u=Mt(t);(t=this.Fb().find(function(l){return Mt(l.language)==u&&(!i||l.roles.includes(i))&&l.forced==o}))&&this.Se(t)}},v.tg=function(t){if(this.i&&this.B){for(var i=null,o=A(this.i.variants),u=o.next();!u.done;u=o.next())if(u=u.value,u.audio.label==t){i=u;break}i!=null&&(this.ub=new qt(i.language,"",0,t),Kh(this))}},v.Hd=function(){var t=this.ia;return this.G?this.G.m.isTextVisible():this.g&&this.g.src&&this.g.textTracks?_c(this).some(function(i){return i.mode=="showing"}):t},v.He=function(){return this.g&&this.g.src&&this.g.textTracks?S1(this).map(function(t){return lg(t)}):[]},v.Cf=function(t){var i=Mt(t),o=S1(this).filter(function(m){return Mt(m.language)==i});if(!o||!o.length)return[];t=[];var u=new Set;o=A(o);for(var l=o.next();!l.done;l=o.next())if((l=l.value)&&l.cues){l=A(l.cues);for(var h=l.next();!h.done;h=l.next()){var p=h.value;(h=p.id)&&h!=""||(h=p.startTime+"-"+p.endTime+"-"+p.text),p={id:h,title:p.text,startTime:p.startTime,endTime:p.endTime},u.has(h)||(t.push(p),u.add(h))}}return t};function _c(t){return Array.from(t.g.textTracks).filter(function(i){return i.kind!="metadata"&&i.kind!="chapters"&&i.label!="Shaka Player TextTrack"})}function A1(t){return Array.from(t.g.textTracks).filter(function(i){return i.kind=="metadata"})}function S1(t){return Array.from(t.g.textTracks).filter(function(i){return i.kind=="chapters"})}v.yg=function(t){if(t=!!t,this.ia!=t){if(this.ia=t,this.l==Ki)this.G.m.setTextVisibility(t),this.h.streaming.alwaysStreamText||(t?this.j.o||(t=dg(this.i.textStreams,this.vb,this.cc,this.$b),0<t.length&&(Bs(this.j,t[0]),Lc(this))):Pu(this.j));else if(this.g&&this.g.src&&this.g.textTracks){var i=_c(this);i=A(i);for(var o=i.next();!o.done;o=i.next())o=o.value,o.mode!="disabled"&&(o.mode=t?"showing":"hidden")}Nc(this)}},v.Of=function(){if(!this.U())return null;var t=this.Ga.l,i=0;if(this.B)i=this.B.Ic();else if(t){if(t.startTime==null)return new Date;i=t.startTime}return this.i?new Date(1e3*(this.i.presentationTimeline.i+i)):this.g&&this.g.getStartDate?(t=this.g.getStartDate(),isNaN(t.getTime())?null:new Date(t.getTime()+1e3*i)):null},v.Ie=function(){if(!this.U())return null;if(this.i)return new Date(1e3*this.i.presentationTimeline.i);if(this.g&&this.g.getStartDate){var t=this.g.getStartDate();return isNaN(t.getTime())?null:t}return null},v.Na=function(){if(this.l==Ki)return this.G.Na();var t={total:[],audio:[],video:[],text:[]};return this.l==cr&&(t.total=ft(this.g.buffered)),t},v.getStats=function(){if(this.l!=Ki&&this.l!=cr)return{width:NaN,height:NaN,streamBandwidth:NaN,decodedFrames:NaN,droppedFrames:NaN,corruptedFrames:NaN,stallsDetected:NaN,gapsJumped:NaN,estimatedBandwidth:NaN,completionPercent:NaN,loadLatency:NaN,manifestTimeSeconds:NaN,drmTimeSeconds:NaN,playTime:NaN,pauseTime:NaN,bufferingTime:NaN,licenseTime:NaN,liveLatency:NaN,maxSegmentDuration:NaN,switchHistory:[],stateHistory:[]};vl(this);var t=this.g,i=t.currentTime/t.duration;if(!isNaN(i)){var o=this.o;i=Math.round(100*i),o.i=isNaN(o.i)?i:Math.max(o.i,i)}if(this.B&&(this.o.M=this.B.te(),this.o.O=this.B.ue()),t.getVideoPlaybackQuality){o=t.getVideoPlaybackQuality(),i=this.o;var u=Number(o.totalVideoFrames);i.L=Number(o.droppedVideoFrames),i.J=u,this.o.H=Number(o.corruptedVideoFrames)}this.m?(o=this.m,o=o.H?o.H:NaN):o=NaN,this.o.s=o,this.l==Ki&&((o=this.j.l)&&(this.o.B=(this.H?this.H.i:1)*o.bandwidth),o&&o.video&&(i=this.o,u=o.video.height||NaN,i.o=o.video.width||NaN,i.l=u),this.U()&&(o=this.Ie().valueOf()+1e3*this.uc().end,this.o.D=(Date.now()-o)/1e3),this.i&&this.i.presentationTimeline&&(this.o.G=this.i.presentationTimeline.g),o=this.u.getBandwidthEstimate(),this.o.u=o),this.l==cr&&(o=this.o,i=t.videoHeight||NaN,o.o=t.videoWidth||NaN,o.l=i);var l=this.o;t=l.o,o=l.l,i=l.B,u=l.J;var h=l.L,p=l.H,m=l.O,w=l.M,C=l.u,_=l.i,D=l.m,b=l.F,U=l.j,K=Mc(l.g,"playing"),Z=Mc(l.g,"paused"),B=Mc(l.g,"buffering"),X=l.s,ge=l.D,ne=l.G,ce=so(l.g),de=[];l=A(l.h.g);for(var Ee=l.next();!Ee.done;Ee=l.next())Ee=Ee.value,de.push({timestamp:Ee.timestamp,id:Ee.id,type:Ee.type,fromAdaptation:Ee.fromAdaptation,bandwidth:Ee.bandwidth});return{width:t,height:o,streamBandwidth:i,decodedFrames:u,droppedFrames:h,corruptedFrames:p,stallsDetected:m,gapsJumped:w,estimatedBandwidth:C,completionPercent:_,loadLatency:D,manifestTimeSeconds:b,drmTimeSeconds:U,playTime:K,pauseTime:Z,bufferingTime:B,licenseTime:X,liveLatency:ge,maxSegmentDuration:ne,stateHistory:ce,switchHistory:de}},v.hf=function(t,i,o,u,l,h,p){p=p===void 0?!1:p;var m=this,w,C,_,D,b,U,K,Z,B,X,ge;return j(function(ne){switch(ne.g){case 1:if(m.l!=Ki&&m.l!=cr)throw new oe(1,7,7004);if(u){ne.A(2);break}return k(ne,Fm(m,t),3);case 3:u=ne.h;case 2:if(w=[],m.F)try{w=m.F.getServerSideCuePoints()}catch(ce){}if(m.l!=cr){ne.A(4);break}return p&&(o="forced"),k(ne,I1(m,t,i,o,u,h||"",w),5);case 5:if(C=m.Fb(),_=C.find(function(ce){return ce.language==i&&ce.label==(h||"")&&ce.kind==o}))return _r(m),ne.return(_);throw new oe(1,2,2012);case 4:if(D=xt,b=m.i.presentationTimeline.getDuration(),b==1/0)throw new oe(1,4,4033);if(!w.length){ne.A(6);break}return k(ne,Gh(m,t,m.D,m.h.streaming.retryParameters),7);case 7:U=ne.h,K=Vh(m,U,u,w),Z=new Blob([K],{type:"text/vtt"}),t=il(Z),u="text/vtt";case 6:if(B={id:m.Yd++,originalId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:Ch(0,b,[t]),mimeType:u||"",codecs:l||"",kind:o,encrypted:!1,drmInfos:[],keyIds:new Set,language:i,label:h||null,type:D.X,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],forced:!!p,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null},X=ki(B.mimeType,B.codecs),ge=_a(X),!ge)throw new oe(2,2,2014,u);return m.i.textStreams.push(B),_r(m),ne.return(ba(B))}})},v.jf=function(t,i){var o=this,u,l,h,p,m,w,C,_,D,b,U,K,Z,B,X,ge;return j(function(ne){switch(ne.g){case 1:if(o.l!=Ki&&o.l!=cr)throw new oe(1,7,7004);if(o.l==cr)throw new oe(1,2,2016);if(i){ne.A(2);break}return k(ne,Fm(o,t),3);case 3:i=ne.h;case 2:if(i!="text/vtt")throw new oe(1,2,2017,t);if(u=xt,l=o.i.presentationTimeline.getDuration(),l==1/0)throw new oe(1,4,4045);return k(ne,Gh(o,t,o.D,o.h.streaming.retryParameters),4);case 4:if(h=ne.h,p=vn[i],!p)throw new oe(2,2,2014,i);for(m=p(),w={periodStart:0,segmentStart:0,segmentEnd:l,vttOffset:0},C=$e(h),_=m.parseMedia(C,w),D=[],b={},U=A(_),K=U.next();!K.done;b={Rb:b.Rb},K=U.next())Z=K.value,b.Rb=di([t],[Z.payload])[0],B=new St(Z.startTime,Z.endTime,function(ce){return function(){return[ce.Rb]}}(b),0,null,null,0,0,1/0),b.Rb.includes("#xywh")&&(X=b.Rb.split("#xywh=")[1].split(","),X.length===4&&B.Ye({height:parseInt(X[3],10),positionX:parseInt(X[0],10),positionY:parseInt(X[1],10),width:parseInt(X[2],10)})),D.push(B);return ge={id:o.Yd++,originalId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new _t(D),mimeType:i||"",codecs:"",kind:"",encrypted:!1,drmInfos:[],keyIds:new Set,language:"und",label:null,type:u.Wb,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,tilesLayout:"1x1"},o.i.imageStreams.push(ge),_r(o),ne.return(ql(ge))}})},v.gf=function(t,i,o){var u=this,l,h,p,m;return j(function(w){switch(w.g){case 1:if(u.l!=Ki&&u.l!=cr)throw new oe(1,7,7004);if(o){w.A(2);break}return k(w,Fm(u,t),3);case 3:o=w.h;case 2:if(l=[],u.F)try{l=u.F.getServerSideCuePoints()}catch(C){}return k(w,I1(u,t,i,"chapters",o,"",l),4);case 4:if(h=w.h,p=u.He(),m=p.find(function(C){return C.language==i}),!m){w.A(5);break}return k(w,new Promise(function(C,_){u.s.ma(h,"load",C),u.s.ma(h,"error",function(){_(new oe(1,2,2015))})}),6);case 6:return w.return(m);case 5:throw new oe(1,2,2012)}})};function Fm(t,i){var o,u;return j(function(l){switch(l.g){case 1:return o=Wa(i),(u=El[o])?l.return(u):(ye(l,2),k(l,Ng(i,t.D,t.h.streaming.retryParameters),4));case 4:u=l.h,_e(l,3);break;case 2:we(l);case 3:if(u)return l.return(u);throw new oe(1,2,2011,o)}})}function I1(t,i,o,u,l,h,p){var m,w,C,_;return j(function(D){if(D.g==1)return l!="text/vtt"||p.length?k(D,Gh(t,i,t.D,t.h.streaming.retryParameters),3):D.A(2);D.g!=2&&(m=D.h,w=Vh(t,m,l,p),C=new Blob([w],{type:"text/vtt"}),i=il(C),l="text/vtt"),_=document.createElement("track");var b=t.V,U=i;try{if(b.g.enabled){var K=Ph(b);K.ot=Nm,K.su=!0;var Z=Oh(K),B=_m(U,Z)}else B=U}catch(X){Kn("CMCD_TEXT_TRACK_ERROR","Could not generate text track CMCD data.",X),B=U}return _.src=B,_.label=h,_.kind=u,_.srclang=o,t.g.getAttribute("crossorigin")||t.g.setAttribute("crossorigin","anonymous"),t.g.appendChild(_),D.return(_)})}function Gh(t,i,o,u){var l,h,p;return j(function(m){if(m.g==1){l=eo,h=oi([i],u),h.method="GET";var w=t.V;try{w.g.enabled&&Bu(w,h,{ot:Nm,su:!0})}catch(C){Kn("CMCD_TEXT_ERROR","Could not generate text CMCD data.",C)}return k(m,o.request(l,h).promise,2)}return p=m.h,m.return(p.data)})}function Vh(t,i,o,u){var l=vn[o];if(l)return o=l(),t={periodStart:0,segmentStart:0,segmentEnd:t.g.duration,vttOffset:0},i=$e(i),i=o.parseMedia(i,t),bn(i,u);throw new oe(2,2,2014,o)}v.ke=function(t,i){this.ec.width=t,this.ec.height=i},v.ce=function(t){if(this.l==Ki){var i=this.j;if(t=t===void 0?.1:t,i.h.g)i=!1;else if(i.s)i=!1;else{for(var o=A(i.j.values()),u=o.next();!u.done;u=o.next())u=u.value,!u.nc||u.ra||u.Ka||(u.nc=!1,kr(i,u,t));i=!0}}else i=!1;return i},v.If=function(){return ze("Shaka Player's internal Manifest structure is NOT covered by semantic versioning compatibility guarantees.  It may change at any time!  Please consider filing a feature request for whatever you use getManifest() for."),this.i},v.Jf=function(){return this.Yc};function gl(t){var i=fl();return i.streaming.failureCallback=function(o){if(t.U()){var u=null;o.code==1001||o.code==1002?u=1:o.code==1003&&(u=.1),u!=null&&(o.severity=1,t.ce(u))}},i.textDisplayFactory=function(){return t.Uc?new zi(t.g,t.Uc):new Fi(t.g)},i}v.$e=function(t){this.Uc=t};function VE(t,i){for(var o=new Set,u=A(i.textStreams),l=u.next();!l.done;l=u.next())l=l.value,l.mimeType!="application/cea-608"&&l.mimeType!="application/cea-708"||o.add(l.originalId);for(u=A(i.variants),l=u.next();!l.done;l=u.next())if((l=l.value.video)&&l.closedCaptions){for(var h=A(l.closedCaptions.keys()),p=h.next();!p.done;p=h.next())if(p=p.value,!o.has(p)){var m=p.startsWith("CC")?"application/cea-608":"application/cea-708",w=new cn;m={id:t.Yd++,originalId:p,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:w,mimeType:m,codecs:"",kind:"caption",encrypted:!1,drmInfos:[],keyIds:new Set,language:l.closedCaptions.get(p),label:null,type:Lt,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:l.roles,forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null},i.textStreams.push(m),o.add(p)}}}function C1(t,i){return j(function(o){if(o.g==1)return k(o,k1(t,i),2);ml(t,i),le(o)})}function k1(t,i){var o;return j(function(u){if(u.g==1)return o=t.j?t.j.l:null,k(u,ny(o,i),2);bc(i),le(u)})}function ml(t,i){if(t.l!=Rr){rg(i.variants,t.h.restrictions,t.ec)&&t.j&&_r(t);var o=t.m?t.m.g:null;if(o&&t.m.u)for(var u=A(i.variants),l=u.next();!l.done;l=u.next())l=l.value,zm(t,o.keySystem,l.video),zm(t,o.keySystem,l.audio);Hm(t,i)}}function zm(t,i,o){if(o){o=A(o.drmInfos);for(var u=o.next();!u.done;u=o.next())if(u=u.value,u.keySystem==i){u=A(u.initData||[]);for(var l=u.next();!l.done;l=u.next())l=l.value,Ha(t.m,l.initDataType,l.initData)}}}function M1(t,i){var o,u,l,h,p;return j(function(m){return m.g==1?(o=t.audio,u=t.video,l=function(w,C){var _,D,b;return j(function(U){return U.g==1?w?k(U,w.createSegmentIndex(),2):U.return(null):(D=(_=w.segmentIndex.Cb(C))?_.next().value:null,D?(b=D.startTime,U.return(b)):U.return(null))})},k(m,l(o,i),2)):m.g!=3?(h=m.h,k(m,l(u,i),3)):(p=m.h,p!=null&&h!=null?m.return(Math.max(p,h)):p!=null?m.return(p):h!=null?m.return(h):m.return(i))})}function Rc(t){var i=t.Fd();if(t.o&&t.M&&t.B){var o=t.H;o.j=i,vm(o),t.V&&(o=t.V,i||o.i||(o.i=!0),o.i&&i&&(o.l=!0),o.m=i),vl(t)}i=new Map().set("buffering",i),t.dispatchEvent(yn("buffering",i))}function Gm(t){var i=t.g.playbackRate;i!=0&&(t.H&&t.H.set(i),i=yn("ratechange"),t.dispatchEvent(i))}function vl(t){if(t.o&&t.M){var i=t.o.g;t.M.g==Pa?zu(i,"buffering"):t.g.paused?zu(i,"paused"):t.g.ended?zu(i,"ended"):zu(i,"playing")}}function yl(t){try{Hm(t,t.i)}catch(o){return _o(t,o),!1}var i=t.i.variants.filter(function(o){return Tu(o)});return i=t.ub.create(i),t.u.setVariants(Array.from(i.values())),!0}function hs(t){return yl(t)?t.u.chooseVariant():null}function Kh(t){var i=hs(t);i&&xl(t,i,!0,!0,0)}function xl(t,i,o,u,l){var h=t.j.l;if(i==h)u&&Ou(t.j,i,u,l,!0);else{var p=t.o.h;p.h!=i&&(p.h=i,p.g.push({timestamp:Date.now()/1e3,id:i.id,type:"variant",fromAdaptation:o,bandwidth:i.bandwidth})),Ou(t.j,i,u,l,void 0,o),u=null,h&&(u=xu(h)),i=xu(i),o?Hh(t,u,i):Wh(t,u,i)}}function Vm(t,i){var o=Array.from(t.g.audioTracks).find(function(u){return u.enabled});i.enabled=!0,i.id!==o.id&&(o.enabled=!1),o=Xl(o),i=Xl(i),Wh(t,o,i)}function _1(t,i,o){if(t.h.autoShowText==0)return!1;if(t.h.autoShowText==1)return!0;var u=Mt(t.h.preferredTextLanguage);return o=Mt(o.language),t.h.autoShowText==2?mu(o,u):t.h.autoShowText==3?(t=Mt(i.language),mu(o,u)&&!mu(t,o)):(ze("Invalid autoShowText setting!"),!1)}function Hh(t,i,o){i=new Map().set("oldTrack",i).set("newTrack",o),t.L&&Zg(t.L,o),o=yn("adaptation",i),Vu(t,o)}function _r(t){var i=yn("trackschanged");Vu(t,i)}function Wh(t,i,o){i=new Map().set("oldTrack",i).set("newTrack",o),t.L&&Zg(t.L,o),o=yn("variantchanged",i),Vu(t,o)}function Lc(t){var i=yn("textchanged");Vu(t,i)}function Nc(t){var i=yn("texttrackvisibility");Vu(t,i)}function Tl(t){var i=new Map().set("newStatus",t.h.abr.enabled);Vu(t,yn("abrstatuschanged",i))}function qh(t,i){if(i.code!=1002&&i.code!=1011||i.category!=1||!navigator.onLine)return!1;var o=t.h.streaming.maxDisabledTime;if(o==0)if(i.code==1011)o=1;else return!1;i=t.Xa().find(function(p){return p.active});for(var u=t.i,l=A(u.variants),h=l.next();!h.done;h=l.next())h=h.value,h.id===i.id&&(h.disabledUntilTime=Date.now()/1e3+o);return rg(u.variants,t.h.restrictions,t.ec),i=hs(t),i?(u=t.Na().video.reduce(function(p,m){return p+m.end-m.start},0),xl(t,i,!1,!0,u),t.af.N(o),!0):!1}function _o(t,i){if(t.l!=Rr)if(qh(t,i))i.handled=!0;else{var o=yn("error",new Map().set("detail",i));t.dispatchEvent(o),o.defaultPrevented&&(i.handled=!0)}}function fs(t,i,o){o=new Map().set("detail",{schemeIdUri:o.schemeIdUri,value:o.value,startTime:o.startTime,endTime:o.endTime,id:o.id,eventElement:o.eventElement}),t.dispatchEvent(yn(i,o))}function Dc(t){if(!t.g.error)return null;var i=t.g.error.code;if(i==1)return null;var o=t.g.error.msExtendedCode;return o&&(0>o&&(o+=Math.pow(2,32)),o=o.toString(16)),new oe(2,3,3016,i,o,t.g.error.message)}function R1(t,i){if(t.j){var o=Object.keys(i),u=o.length==1&&o[0]=="00",l=!1;if(o.length){o=A(t.i.variants);for(var h=o.next();!h.done;h=o.next()){h=h.value;var p=[];h.audio&&p.push(h.audio),h.video&&p.push(h.video),p=A(p);for(var m=p.next();!m.done;m=p.next()){var w=m.value;if(m=h.allowedByKeySystem,w.keyIds.size){h.allowedByKeySystem=!0,w=A(w.keyIds);for(var C=w.next();!C.done;C=w.next())C=C.value,C=i[u?"00":C],h.allowedByKeySystem=h.allowedByKeySystem&&!!C&&!qm.includes(C)}m!=h.allowedByKeySystem&&(l=!0)}}}(!l||yl(t))&&((i=t.j.l)&&!i.allowedByKeySystem&&Kh(t),l&&_r(t))}}function Km(t,i,o){t.J&&t.J.onExpirationUpdated&&t.J.onExpirationUpdated(i,o),i=yn("expirationupdated"),t.dispatchEvent(i)}function ar(t,i,o){0<i&&(t.U()||t.Ze(i)),i=t.getDuration(),o<i&&(t.U()||t.Aa(o))}function Hm(t,i){t=t.m?t.m.Qc():{};var o=Object.keys(t);o=o.length&&o[0]=="00";var u=!1,l=!1,h=new Set,p=new Set;i=A(i.variants);for(var m=i.next();!m.done;m=i.next()){m=m.value;var w=[];m.audio&&w.push(m.audio),m.video&&w.push(m.video),w=A(w);for(var C=w.next();!C.done;C=w.next())if(C=C.value,C.keyIds.size){C=A(C.keyIds);for(var _=C.next();!_.done;_=C.next()){_=_.value;var D=t[o?"00":_];D?qm.includes(D)&&p.add(D):h.add(_)}}m.allowedByApplication?m.allowedByKeySystem&&(u=!0):l=!0}if(!u)throw t={hasAppRestrictions:l,missingKeys:Array.from(h),restrictedKeyStatuses:Array.from(p)},new oe(2,4,4012,t)}function bc(t){if(!t.variants.some(Tu))throw new oe(2,4,4032)}function Vu(t,i){j(function(o){if(o.g==1)return k(o,Promise.resolve(),2);t.l!=Rr&&t.dispatchEvent(i),le(o)})}function Wm(t){var i=new Set;t=A(t);for(var o=t.next();!o.done;o=t.next())o=o.value,o.language?i.add(Mt(o.language)):i.add("und");return i}function L1(t){var i=new Map,o=new Map;t=A(t);for(var u=t.next();!u.done;u=t.next()){u=u.value;var l="und",h=[];u.language&&(l=Mt(u.language)),u.type=="variant"?h=u.audioRoles:h=u.roles,h&&h.length||(h=[""]),i.has(l)||i.set(l,new Set),h=A(h);for(var p=h.next();!p.done;p=h.next())p=p.value,i.get(l).add(p),u.label&&(o.has(l)||o.set(l,new Map),o.get(l).set(p,u.label))}var m=[];return i.forEach(function(w,C){w=A(w);for(var _=w.next();!_.done;_=w.next()){_=_.value;var D=null;o.has(C)&&o.get(C).has(_)&&(D=o.get(C).get(_)),m.push({language:C,role:_,label:D})}}),m}function lr(){return new oe(2,7,7e3)}function Ku(t,i,o,u,l,h){return u==t&&l.mediaElement==h.mediaElement&&l.uri==h.uri&&l.mimeType==h.mimeType?i:o}function zs(){return{mediaElement:null,mimeType:null,startTime:null,ne:NaN,uri:null}}function Xh(t){return new Promise(function(i,o){t.mb=function(){return o(lr())},t.bd=function(){return i()},t.onError=function(u){return o(u)},t.dd=function(){return o(lr())}})}pe("shaka.Player",Ae),Ae.prototype.setVideoContainer=Ae.prototype.$e,Ae.prototype.getManifestParserFactory=Ae.prototype.Jf,Ae.prototype.getManifest=Ae.prototype.If,Ae.prototype.retryStreaming=Ae.prototype.ce,Ae.prototype.setMaxHardwareResolution=Ae.prototype.ke,Ae.prototype.addChaptersTrack=Ae.prototype.gf,Ae.prototype.addThumbnailsTrack=Ae.prototype.jf,Ae.prototype.addTextTrackAsync=Ae.prototype.hf,Ae.prototype.getStats=Ae.prototype.getStats,Ae.prototype.getBufferedInfo=Ae.prototype.Na,Ae.prototype.getPresentationStartTimeAsDate=Ae.prototype.Ie,Ae.prototype.getPlayheadTimeAsDate=Ae.prototype.Of,Ae.prototype.setTextTrackVisibility=Ae.prototype.yg,Ae.prototype.getChapters=Ae.prototype.Cf,Ae.prototype.getChaptersTracks=Ae.prototype.He,Ae.prototype.isTextTrackVisible=Ae.prototype.Hd,Ae.prototype.selectVariantsByLabel=Ae.prototype.tg,Ae.prototype.selectTextLanguage=Ae.prototype.he,Ae.prototype.selectAudioLanguage=Ae.prototype.ge,Ae.prototype.getTextLanguages=Ae.prototype.Qf,Ae.prototype.getAudioLanguages=Ae.prototype.zf,Ae.prototype.getTextLanguagesAndRoles=Ae.prototype.Rf,Ae.prototype.getAudioLanguagesAndRoles=Ae.prototype.Af,Ae.prototype.selectVariantTrack=Ae.prototype.Te,Ae.prototype.selectTextTrack=Ae.prototype.Se,Ae.prototype.getThumbnails=Ae.prototype.Tf,Ae.prototype.getImageTracks=Ae.prototype.Ff,Ae.prototype.getTextTracks=Ae.prototype.Fb,Ae.prototype.getVariantTracks=Ae.prototype.Xa,Ae.prototype.cancelTrickPlay=Ae.prototype.pf,Ae.prototype.trickPlay=Ae.prototype.Ag,Ae.prototype.getPlaybackRate=Ae.prototype.Rc,Ae.prototype.isBuffering=Ae.prototype.Fd,Ae.prototype.getKeyStatuses=Ae.prototype.Qc,Ae.prototype.getExpiration=Ae.prototype.ic,Ae.prototype.drmInfo=Ae.prototype.drmInfo,Ae.prototype.keySystem=Ae.prototype.keySystem,Ae.prototype.goToLive=Ae.prototype.Xf,Ae.prototype.seekRange=Ae.prototype.uc,Ae.prototype.isAudioOnly=Ae.prototype.Zf,Ae.prototype.isInProgress=Ae.prototype.jb,Ae.prototype.isLive=Ae.prototype.U,Ae.prototype.getAdManager=Ae.prototype.Ge,Ae.prototype.getAssetUri=Ae.prototype.Dd,Ae.prototype.getNetworkingEngine=Ae.prototype.jc,Ae.prototype.getMediaElement=Ae.prototype.Lf,Ae.prototype.getLoadMode=Ae.prototype.Hf,Ae.prototype.resetConfiguration=Ae.prototype.rg,Ae.prototype.getBufferFullness=Ae.prototype.Bf,Ae.prototype.getConfiguration=Ae.prototype.getConfiguration,Ae.prototype.configure=Ae.prototype.configure,Ae.prototype.load=Ae.prototype.load,Ae.prototype.updateStartTime=Ae.prototype.Fg,Ae.prototype.unload=Ae.prototype.re,Ae.prototype.detach=Ae.prototype.detach,Ae.prototype.attachCanvas=Ae.prototype.lf,Ae.prototype.attach=Ae.prototype.Yb,Ae.probeSupport=function(t){t=t===void 0?!0:t;var i,o,u,l,h,p;return j(function(m){if(m.g==1)return i={},t?k(m,iE(),3):m.A(2);m.g!=2&&(i=m.h);var w={};if(Tr()){for(var C in Ir)w[C]=!0;for(var _ in Mu)w[_]=!0}C={mpd:"application/dash+xml",m3u8:"application/x-mpegurl",ism:"application/vnd.ms-sstr+xml"},_=A(["application/dash+xml","application/x-mpegurl","application/vnd.apple.mpegurl","application/vnd.ms-sstr+xml"]);for(var D=_.next();!D.done;D=_.next())D=D.value,w[D]=Tr()?!!Ir[D]:Is(D);for(var b in C)w[b]=Tr()?!!Mu[b]:Is(C[b]);for(o=w,b='video/mp4; codecs="avc1.42E01E",video/mp4; codecs="avc3.42E01E",video/mp4; codecs="hev1.1.6.L93.90",video/mp4; codecs="hvc1.1.6.L93.90",video/mp4; codecs="hev1.2.4.L153.B0"; eotf="smpte2084",video/mp4; codecs="hvc1.2.4.L153.B0"; eotf="smpte2084",video/mp4; codecs="vp9",video/mp4; codecs="vp09.00.10.08",video/mp4; codecs="av01.0.01M.08",audio/mp4; codecs="mp4a.40.2",audio/mp4; codecs="ac-3",audio/mp4; codecs="ec-3",audio/mp4; codecs="opus",audio/mp4; codecs="flac",video/webm; codecs="vp8",video/webm; codecs="vp9",video/webm; codecs="vp09.00.10.08",audio/webm; codecs="vorbis",audio/webm; codecs="opus",video/mp2t; codecs="avc1.42E01E",video/mp2t; codecs="avc3.42E01E",video/mp2t; codecs="hvc1.1.6.L93.90",video/mp2t; codecs="mp4a.40.2",video/mp2t; codecs="ac-3",video/mp2t; codecs="ec-3",text/vtt,application/mp4; codecs="wvtt",application/ttml+xml,application/mp4; codecs="stpp"'.split(",").concat(q(Cr)),w={},b=A(b),C=b.next();!C.done;C=b.next())C=C.value,w[C]=Tr()?_a(C)?!0:ii(C)||pu(C):Is(C),_=C.split(";")[0],w[_]=w[_]||w[C];u=w,l={manifest:o,media:u,drm:i},h=$h;for(p in h)l[p]=h[p]();return m.return(l)})},Ae.isBrowserSupported=function(){if(S.Promise||ze("A Promise implementation or polyfill is required"),!(S.Promise&&S.Uint8Array&&Array.prototype.forEach)||Qt("Trident/"))return!1;var t=Pd();return t&&13>t||!(S.MediaKeys&&S.navigator&&S.navigator.requestMediaKeySystemAccess&&S.MediaKeySystemAccess&&S.MediaKeySystemAccess.prototype.getConfiguration)?!1:Tr()?!0:Is("application/x-mpegurl")},Ae.setAdManagerFactory=function(t){Ro=t},Ae.registerSupportPlugin=function(t,i){$h[t]=i},Ae.prototype.destroy=Ae.prototype.destroy;var Rr=0,Yh=1,Ki=2,cr=3;Ae.LoadMode={DESTROYED:Rr,NOT_LOADED:Yh,MEDIA_SOURCE:Ki,SRC_EQUALS:cr},Ae.version="v4.3.4";var Hu=["4","3"];hy=new function(t){this.g=t,this.i=cy,this.h=dy}(new $l(Number(Hu[0]),Number(Hu[1])));var qm=["output-restricted","internal-error"],$h={},Ro=null,wl={mp4:"video/mp4",m4v:"video/mp4",m4a:"audio/mp4",webm:"video/webm",weba:"audio/webm",mkv:"video/webm",ts:"video/mp2t",ogv:"video/ogg",ogg:"audio/ogg",mpg:"video/mpeg",mpeg:"video/mpeg",m3u8:"application/x-mpegurl",mpd:"application/dash+xml",mp3:"audio/mpeg",aac:"audio/aac",flac:"audio/flac",wav:"audio/wav"},El={sbv:"text/x-subviewer",srt:"text/srt",vtt:"text/vtt",webvtt:"text/vtt",ttml:"application/ttml+xml",lrc:"application/x-subtitle-lrc",ssa:"text/x-ssa",ass:"text/x-ssa"};function Qh(){this.h=[],this.j=this.i=this.g=0}function it(t,i,o){var u=this;this.h=t,this.g=i,this.m=o,this.i=!1,this.l=this.g.getVolume(),this.j=new Xt,this.j.C(this.g,google.ima.AdEvent.Type.PAUSED,function(){u.i=!0}),this.j.C(this.g,google.ima.AdEvent.Type.RESUMED,function(){u.i=!1})}v=it.prototype,v.getDuration=function(){return this.h.getDuration()},v.getMinSuggestedDuration=function(){return this.h.getMinSuggestedDuration()},v.getRemainingTime=function(){return this.g.getRemainingTime()},v.isPaused=function(){return this.i},v.isSkippable=function(){return 0<=this.h.getSkipTimeOffset()},v.getTimeUntilSkippable=function(){var t=this.h.getSkipTimeOffset();return t=this.getRemainingTime()-t,Math.max(t,0)},v.canSkipNow=function(){return this.g.getAdSkippableState()},v.skip=function(){return this.g.skip()},v.pause=function(){return this.g.pause()},v.play=function(){return this.g.resume()},v.getVolume=function(){return this.g.getVolume()},v.setVolume=function(t){return this.g.setVolume(t)},v.isMuted=function(){return this.g.getVolume()==0},v.isLinear=function(){return this.h.isLinear()},v.resize=function(t,i){var o=!1,u=this.m;document.fullscreenEnabled?o=!!document.fullscreenElement:u.webkitSupportsFullscreen&&(o=u.webkitDisplayingFullscreen),this.g.resize(t,i,o?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)},v.setMuted=function(t){t?(this.l=this.getVolume(),this.setVolume(0)):this.setVolume(this.l)},v.getSequenceLength=function(){var t=this.h.getAdPodInfo();return t==null?1:t.getTotalAds()},v.getPositionInSequence=function(){var t=this.h.getAdPodInfo();return t==null?1:t.getAdPosition()},v.getTitle=function(){return this.h.getTitle()},v.getDescription=function(){return this.h.getDescription()},v.release=function(){this.g=this.h=null},pe("shaka.ads.ClientSideAd",it),it.prototype.release=it.prototype.release,it.prototype.getDescription=it.prototype.getDescription,it.prototype.getTitle=it.prototype.getTitle,it.prototype.getPositionInSequence=it.prototype.getPositionInSequence,it.prototype.getSequenceLength=it.prototype.getSequenceLength,it.prototype.setMuted=it.prototype.setMuted,it.prototype.resize=it.prototype.resize,it.prototype.isLinear=it.prototype.isLinear,it.prototype.isMuted=it.prototype.isMuted,it.prototype.setVolume=it.prototype.setVolume,it.prototype.getVolume=it.prototype.getVolume,it.prototype.play=it.prototype.play,it.prototype.pause=it.prototype.pause,it.prototype.skip=it.prototype.skip,it.prototype.canSkipNow=it.prototype.canSkipNow,it.prototype.getTimeUntilSkippable=it.prototype.getTimeUntilSkippable,it.prototype.isSkippable=it.prototype.isSkippable,it.prototype.isPaused=it.prototype.isPaused,it.prototype.getRemainingTime=it.prototype.getRemainingTime,it.prototype.getMinSuggestedDuration=it.prototype.getMinSuggestedDuration,it.prototype.getDuration=it.prototype.getDuration;function Pc(t,i,o,u){var l=this;this.o=t,this.i=i,this.s=null,this.u=NaN,this.l=u,this.j=null,this.h=new Xt,google.ima.settings.setLocale(o),t=new google.ima.AdDisplayContainer(this.o,this.i),t.initialize(),this.m=new google.ima.AdsLoader(t),this.m.getSettings().setPlayerType("shaka-player"),this.m.getSettings().setPlayerVersion("v4.3.4"),this.g=null,this.h.ma(this.m,google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,function(h){dr(l,h)}),this.h.C(this.m,google.ima.AdErrorEvent.Type.AD_ERROR,function(h){Hi(l,h)}),this.i.onended=function(){l.m.contentComplete()}}Pc.prototype.stop=function(){this.g&&this.g.stop(),this.o&&Nh(this.o)},Pc.prototype.release=function(){this.stop(),this.s&&this.s.disconnect(),this.h&&this.h.release(),this.g&&this.g.destroy(),this.m.destroy()};function Hi(t,i){i.getError(),Wu(t,null),t.l(new dt("ad-cue-points-changed",new Map().set("cuepoints",[])))}function dr(t,i){t.l(new dt("ads-loaded",new Map().set("loadTime",Date.now()/1e3-t.u))),t.g=i.getAdsManager(t.i),t.l(new dt("ima-ad-manager-loaded",new Map().set("imaAdManager",t.g)));var o=t.g.getCuePoints();if(o.length){i=[],o=A(o);for(var u=o.next();!u.done;u=o.next())i.push({start:u.value,end:null});t.l(new dt("ad-cue-points-changed",new Map().set("cuepoints",i)))}N1(t);try{t.g.init(t.i.offsetWidth,t.i.offsetHeight,Oc(t)?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL),t.h.C(t.i,"loadeddata",function(){t.g.resize(t.i.offsetWidth,t.i.offsetHeight,Oc(t)?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)}),"ResizeObserver"in S?(t.s=new ResizeObserver(function(){t.g.resize(t.i.offsetWidth,t.i.offsetHeight,Oc(t)?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)}),t.s.observe(t.i)):t.h.C(document,"fullscreenchange",function(){t.g.resize(t.i.offsetWidth,t.i.offsetHeight,Oc(t)?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)}),t.i.addEventListener("play",function(){t.g.start()},{once:!0})}catch(l){Wu(t,null)}}function Oc(t){return document.fullscreenEnabled?!!document.fullscreenElement:(t=t.i,t.webkitSupportsFullscreen?t.webkitDisplayingFullscreen:!1)}function N1(t){function i(o,u){o=new Map().set("originalEvent",o),t.l(new dt(u,o))}t.h.C(t.g,google.ima.AdErrorEvent.Type.AD_ERROR,function(o){Hi(t,o)}),t.h.C(t.g,google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,function(o){Zh(t,o)}),t.h.C(t.g,google.ima.AdEvent.Type.STARTED,function(o){Zh(t,o)}),t.h.C(t.g,google.ima.AdEvent.Type.FIRST_QUARTILE,function(o){i(o,"ad-first-quartile")}),t.h.C(t.g,google.ima.AdEvent.Type.MIDPOINT,function(o){i(o,"ad-midpoint")}),t.h.C(t.g,google.ima.AdEvent.Type.THIRD_QUARTILE,function(o){i(o,"ad-third-quartile")}),t.h.C(t.g,google.ima.AdEvent.Type.COMPLETE,function(o){i(o,"ad-complete")}),t.h.C(t.g,google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,function(o){Wu(t,o)}),t.h.C(t.g,google.ima.AdEvent.Type.ALL_ADS_COMPLETED,function(o){Wu(t,o)}),t.h.C(t.g,google.ima.AdEvent.Type.SKIPPED,function(o){i(o,"ad-skipped")}),t.h.C(t.g,google.ima.AdEvent.Type.VOLUME_CHANGED,function(o){i(o,"ad-volume-changed")}),t.h.C(t.g,google.ima.AdEvent.Type.VOLUME_MUTED,function(o){i(o,"ad-muted")}),t.h.C(t.g,google.ima.AdEvent.Type.PAUSED,function(o){t.j&&(t.j.i=!0,i(o,"ad-paused"))}),t.h.C(t.g,google.ima.AdEvent.Type.RESUMED,function(o){t.j&&(t.j.i=!1,i(o,"ad-resumed"))}),t.h.C(t.g,google.ima.AdEvent.Type.SKIPPABLE_STATE_CHANGED,function(o){t.j&&i(o,"ad-skip-state-changed")}),t.h.C(t.g,google.ima.AdEvent.Type.CLICK,function(o){i(o,"ad-clicked")}),t.h.C(t.g,google.ima.AdEvent.Type.AD_PROGRESS,function(o){i(o,"ad-progress")}),t.h.C(t.g,google.ima.AdEvent.Type.AD_BUFFERING,function(o){i(o,"ad-buffering")}),t.h.C(t.g,google.ima.AdEvent.Type.IMPRESSION,function(o){i(o,"ad-impression")}),t.h.C(t.g,google.ima.AdEvent.Type.DURATION_CHANGE,function(o){i(o,"ad-duration-changed")}),t.h.C(t.g,google.ima.AdEvent.Type.USER_CLOSE,function(o){i(o,"ad-closed")}),t.h.C(t.g,google.ima.AdEvent.Type.LOADED,function(o){i(o,"ad-loaded")}),t.h.C(t.g,google.ima.AdEvent.Type.ALL_ADS_COMPLETED,function(o){i(o,"all-ads-completed")}),t.h.C(t.g,google.ima.AdEvent.Type.LINEAR_CHANGED,function(o){i(o,"ad-linear-changed")}),t.h.C(t.g,google.ima.AdEvent.Type.AD_METADATA,function(o){i(o,"ad-metadata")}),t.h.C(t.g,google.ima.AdEvent.Type.LOG,function(o){i(o,"ad-recoverable-error")}),t.h.C(t.g,google.ima.AdEvent.Type.AD_BREAK_READY,function(o){i(o,"ad-break-ready")}),t.h.C(t.g,google.ima.AdEvent.Type.INTERACTION,function(o){i(o,"ad-interaction")})}function Zh(t,i){var o=i.getAd();o?(t.j=new it(o,t.g,t.i),i=new Map().set("ad",t.j).set("sdkAdObject",o).set("originalEvent",i),t.l(new dt("ad-started",i)),t.j.isLinear()&&(t.o.setAttribute("ad-active","true"),t.i.pause())):ze("The IMA SDK fired a "+i.type+" event with no associated ad. Unable to play ad!")}function Wu(t,i){t.l(new dt("ad-stopped",new Map().set("originalEvent",i))),t.j&&t.j.isLinear()&&(t.o.removeAttribute("ad-active"),t.i.play())}function pt(t,i){this.i=t,this.h=null,this.g=i}v=pt.prototype,v.getDuration=function(){return this.h?this.h.duration:-1},v.getMinSuggestedDuration=function(){return this.getDuration()},v.getRemainingTime=function(){return this.h?this.h.duration-this.h.currentTime:-1},v.isPaused=function(){return this.g.paused},v.isSkippable=function(){return this.i.isSkippable()},v.getTimeUntilSkippable=function(){var t=this.i.getSkipTimeOffset();return t=this.getRemainingTime()-t,Math.max(t,0)},v.canSkipNow=function(){return this.getTimeUntilSkippable()==0},v.skip=function(){this.g.currentTime+=this.getRemainingTime()},v.pause=function(){return this.g.pause()},v.play=function(){return this.g.play()},v.getVolume=function(){return this.g.volume},v.setVolume=function(t){this.g.volume=t},v.isMuted=function(){return this.g.muted},v.isLinear=function(){return!0},v.resize=function(){},v.setMuted=function(t){this.g.muted=t},v.getSequenceLength=function(){var t=this.i.getAdPodInfo();return t==null?1:t.getTotalAds()},v.getPositionInSequence=function(){var t=this.i.getAdPodInfo();return t==null?1:t.getAdPosition()},v.getTitle=function(){return this.i.getTitle()},v.getDescription=function(){return this.i.getDescription()},v.release=function(){this.g=this.h=this.i=null},pe("shaka.ads.ServerSideAd",pt),pt.prototype.release=pt.prototype.release,pt.prototype.getDescription=pt.prototype.getDescription,pt.prototype.getTitle=pt.prototype.getTitle,pt.prototype.getPositionInSequence=pt.prototype.getPositionInSequence,pt.prototype.getSequenceLength=pt.prototype.getSequenceLength,pt.prototype.setMuted=pt.prototype.setMuted,pt.prototype.resize=pt.prototype.resize,pt.prototype.isLinear=pt.prototype.isLinear,pt.prototype.isMuted=pt.prototype.isMuted,pt.prototype.setVolume=pt.prototype.setVolume,pt.prototype.getVolume=pt.prototype.getVolume,pt.prototype.play=pt.prototype.play,pt.prototype.pause=pt.prototype.pause,pt.prototype.skip=pt.prototype.skip,pt.prototype.canSkipNow=pt.prototype.canSkipNow,pt.prototype.getTimeUntilSkippable=pt.prototype.getTimeUntilSkippable,pt.prototype.isSkippable=pt.prototype.isSkippable,pt.prototype.isPaused=pt.prototype.isPaused,pt.prototype.getRemainingTime=pt.prototype.getRemainingTime,pt.prototype.getMinSuggestedDuration=pt.prototype.getMinSuggestedDuration,pt.prototype.getDuration=pt.prototype.getDuration;function Jh(t,i,o,u){var l=this;this.s=t,this.l=i,this.j=null,this.G=NaN,this.i=u,this.F=!1,this.u=this.m=this.o=null,this.B="",this.D=[],this.h=new Xt,t=new google.ima.dai.api.UiSettings,t.setLocale(o),this.g=new google.ima.dai.api.StreamManager(this.l,this.s,t),this.i(new dt("ima-stream-manager-loaded",new Map().set("imaStreamManager",this.g))),this.h.C(this.g,google.ima.dai.api.StreamEvent.Type.LOADED,function(h){D1(l,h)}),this.h.C(this.g,google.ima.dai.api.StreamEvent.Type.ERROR,function(){l.B.length?l.j.resolve(l.B):l.j.reject("IMA Stream request returned an error and there was no backup asset uri provided."),l.j=null}),this.h.C(this.g,google.ima.dai.api.StreamEvent.Type.AD_BREAK_STARTED,function(){}),this.h.C(this.g,google.ima.dai.api.StreamEvent.Type.STARTED,function(h){h=h.getAd(),l.m=new pt(h,l.l),l.u&&(l.m.h=l.u),l.i(new dt("ad-started",new Map().set("ad",l.m))),l.s.setAttribute("ad-active","true")}),this.h.C(this.g,google.ima.dai.api.StreamEvent.Type.AD_BREAK_ENDED,function(){l.s.removeAttribute("ad-active");var h=l.l.currentTime;l.o&&l.o>h&&(l.l.currentTime=l.o,l.o=null)}),this.h.C(this.g,google.ima.dai.api.StreamEvent.Type.AD_PROGRESS,function(h){l.u=h.getStreamData().adProgressData,l.m&&(l.m.h=l.u)}),this.h.C(this.g,google.ima.dai.api.StreamEvent.Type.FIRST_QUARTILE,function(){l.i(new dt("ad-first-quartile"))}),this.h.C(this.g,google.ima.dai.api.StreamEvent.Type.MIDPOINT,function(){l.i(new dt("ad-midpoint"))}),this.h.C(this.g,google.ima.dai.api.StreamEvent.Type.THIRD_QUARTILE,function(){l.i(new dt("ad-third-quartile"))}),this.h.C(this.g,google.ima.dai.api.StreamEvent.Type.COMPLETE,function(){l.i(new dt("ad-complete")),l.i(new dt("ad-stopped")),l.s.removeAttribute("ad-active"),l.m=null}),this.h.C(this.g,google.ima.dai.api.StreamEvent.Type.SKIPPED,function(){l.i(new dt("ad-skipped")),l.i(new dt("ad-stopped"))}),this.h.C(this.g,google.ima.dai.api.StreamEvent.Type.CUEPOINTS_CHANGED,function(h){var p=h.getStreamData();h=[],p=A(p.cuepoints);for(var m=p.next();!m.done;m=p.next())m=m.value,h.push({start:m.start,end:m.end});l.D=h,l.i(new dt("ad-cue-points-changed",new Map().set("cuepoints",h)))})}Jh.prototype.stop=function(){this.B="",this.o=null,this.D=[]},Jh.prototype.release=function(){this.stop(),this.h&&this.h.release()},Jh.prototype.onCueMetadataChange=function(t){if(t.key&&t.data){var i={};i[t.key]=t.data,this.g.onTimedMetadata(i)}};function D1(t,i){t.i(new dt("ads-loaded",new Map().set("loadTime",Date.now()/1e3-t.G))),i=i.getStreamData().url,t.j.resolve(i),t.j=null,t.F||t.h.C(t.l,"seeked",function(){var o=t.l.currentTime;if(o!=0){t.g.streamTimeForContentTime(o);var u=t.g.previousCuePointForStreamTime(o);u&&!u.played&&(t.o=o,t.l.currentTime=u.start)}})}function De(){kt.call(this),this.g=this.i=null,this.h=new Qh,this.j=navigator.language}Te(De,kt),v=De.prototype,v.setLocale=function(t){this.j=t},v.initClientSide=function(t,i){var o=this;if(!S.google||!google.ima||!google.ima.AdsLoader)throw new oe(2,10,1e4);this.i&&this.i.release(),this.i=new Pc(t,i,this.j,function(u){if(u&&u.type)switch(u.type){case"ads-loaded":o.h.h.push(u.loadTime);break;case"ad-started":o.h.g++;break;case"ad-complete":o.h.i++;break;case"ad-skipped":o.h.j++}o.dispatchEvent(u)})},v.release=function(){this.i&&(this.i.release(),this.i=null),this.g&&(this.g.release(),this.g=null),kt.prototype.release.call(this)},v.onAssetUnload=function(){this.i&&this.i.stop(),this.g&&this.g.stop(),this.dispatchEvent(new dt("ad-stopped")),this.h=new Qh},v.requestClientSideAds=function(t){if(!this.i)throw new oe(1,10,10001);var i=this.i;i.u=Date.now()/1e3,i.m.requestAds(t)},v.initServerSide=function(t,i){var o=this;if(!S.google||!google.ima||!google.ima.dai)throw new oe(2,10,10002);this.g&&this.g.release(),this.g=new Jh(t,i,this.j,function(u){if(u&&u.type)switch(u.type){case"ads-loaded":o.h.h.push(u.loadTime);break;case"ad-started":o.h.g++;break;case"ad-complete":o.h.i++;break;case"ad-skipped":o.h.j++}o.dispatchEvent(u)})},v.requestServerSideStream=function(t,i){if(i=i===void 0?"":i,!this.g)throw new oe(1,10,10003);t.adTagParameters||(t.adTagParameters={});var o=t.adTagParameters;return(o.mpt||o.mpv)&&ze('You have attempted to set "mpt" and/or "mpv" parameters of the ad tag. Please note that those parameters are used for Shaka adoption tracking and will be overriden.'),t.adTagParameters.mpt="shaka-player",t.adTagParameters.mpv="v4.3.4",o=this.g,o.j?t=Promise.reject(new oe(1,10,10004)):(t instanceof google.ima.dai.api.LiveStreamRequest&&(o.F=!0),o.j=new Wt,o.g.requestStream(t),o.B=i||"",o.G=Date.now()/1e3,t=o.j),t},v.replaceServerSideAdTagParameters=function(t){if(!this.g)throw new oe(1,10,10003);(t.mpt||t.mpv)&&ze('You have attempted to set "mpt" and/or "mpv" parameters of the ad tag. Please note that those parameters are used for Shaka adoption tracking and will be overriden.'),t.mpt="Shaka Player",t.mpv="v4.3.4",this.g.g.replaceAdTagParameters(t)},v.getServerSideCuePoints=function(){if(!this.g)throw new oe(1,10,10003);return this.g.D},v.getStats=function(){var t=this.h;return{loadTimes:t.h,started:t.g,playedCompletely:t.i,skipped:t.j}},v.onDashTimedMetadata=function(t){if(this.g&&t.schemeIdUri=="urn:google:dai:2018"){var i=t.schemeIdUri,o=t.eventElement?t.eventElement.getAttribute("messageData"):null;this.g.g.processMetadata(i,o,t.startTime)}},v.onHlsTimedMetadata=function(t,i){this.g&&this.g.g.processMetadata("ID3",t.data,i)},v.onCueMetadataChange=function(t){this.g&&this.g.onCueMetadataChange(t)},pe("shaka.ads.AdManager",De),De.prototype.onCueMetadataChange=De.prototype.onCueMetadataChange,De.prototype.onHlsTimedMetadata=De.prototype.onHlsTimedMetadata,De.prototype.onDashTimedMetadata=De.prototype.onDashTimedMetadata,De.prototype.getStats=De.prototype.getStats,De.prototype.getServerSideCuePoints=De.prototype.getServerSideCuePoints,De.prototype.replaceServerSideAdTagParameters=De.prototype.replaceServerSideAdTagParameters,De.prototype.requestServerSideStream=De.prototype.requestServerSideStream,De.prototype.initServerSide=De.prototype.initServerSide,De.prototype.requestClientSideAds=De.prototype.requestClientSideAds,De.prototype.onAssetUnload=De.prototype.onAssetUnload,De.prototype.release=De.prototype.release,De.prototype.initClientSide=De.prototype.initClientSide,De.prototype.setLocale=De.prototype.setLocale,De.ADS_LOADED="ads-loaded",De.AD_STARTED="ad-started",De.AD_FIRST_QUARTILE="ad-first-quartile",De.AD_MIDPOINT="ad-midpoint",De.AD_THIRD_QUARTILE="ad-third-quartile",De.AD_COMPLETE="ad-complete",De.AD_STOPPED="ad-stopped",De.AD_SKIPPED="ad-skipped",De.AD_VOLUME_CHANGED="ad-volume-changed",De.AD_MUTED="ad-muted",De.AD_PAUSED="ad-paused",De.AD_RESUMED="ad-resumed",De.AD_SKIP_STATE_CHANGED="ad-skip-state-changed",De.CUEPOINTS_CHANGED="ad-cue-points-changed",De.IMA_AD_MANAGER_LOADED="ima-ad-manager-loaded",De.IMA_STREAM_MANAGER_LOADED="ima-stream-manager-loaded",De.AD_CLICKED="ad-clicked",De.AD_PROGRESS="ad-progress",De.AD_BUFFERING="ad-buffering",De.AD_IMPRESSION="ad-impression",De.AD_DURATION_CHANGED="ad-duration-changed",De.AD_CLOSED="ad-closed",De.AD_LOADED="ad-loaded",De.ALL_ADS_COMPLETED="all-ads-completed",De.AD_LINEAR_CHANGED="ad-linear-changed",De.AD_METADATA="ad-metadata",De.AD_RECOVERABLE_ERROR="ad-recoverable-error",De.AD_BREAK_READY="ad-break-ready",De.AD_INTERACTION="ad-interaction",Ro=function(){return new De};function ef(t){return JSON.stringify(t,function(i,o){if(typeof o!="function"){if(o instanceof Event||o instanceof dt){var u={};for(l in o)(i=o[l])&&typeof i=="object"?l=="detail"&&(u[l]=i):l in Event||(u[l]=i);return u}if(o instanceof Error){var l=new Set(["name","message","stack"]);for(u in o)l.add(u);for(i=A(Object.getOwnPropertyNames(o)),u=i.next();!u.done;u=i.next())l.add(u.value);for(i={},l=A(l),u=l.next();!u.done;u=l.next())u=u.value,i[u]=o[u];o={__type__:"Error",contents:i}}else if(o instanceof TimeRanges){for(l={__type__:"TimeRanges",length:o.length,start:[],end:[]},o=A(ft(o)),u=o.next();!u.done;u=o.next())u=u.value,i=u.end,l.start.push(u.start),l.end.push(i);o=l}else o=o instanceof Uint8Array?{__type__:"Uint8Array",entries:Array.from(o)}:typeof o=="number"?isNaN(o)?"NaN":isFinite(o)?o:0>o?"-Infinity":"Infinity":o;return o}})}function tf(t){return JSON.parse(t,function(i,o){if(o=="NaN")var u=NaN;else if(o=="-Infinity")u=-1/0;else if(o=="Infinity")u=1/0;else if(o&&typeof o=="object"&&o.__type__=="TimeRanges")u=KE(o);else if(o&&typeof o=="object"&&o.__type__=="Uint8Array")u=new Uint8Array(o.entries);else if(o&&typeof o=="object"&&o.__type__=="Error"){i=o.contents,o=Error(i.message);for(u in i)o[u]=i[u];u=o}else u=o;return u})}function KE(t){return{length:t.length,start:function(i){return t.start[i]},end:function(i){return t.end[i]}}}var Uc="ended play playing pause pausing ratechange seeked seeking timeupdate volumechange".split(" "),HE="buffered currentTime duration ended loop muted paused playbackRate seeking videoHeight videoWidth volume".split(" "),nf=["loop","playbackRate"],rf=["pause","play"],gt={getAssetUri:2,getAudioLanguages:4,getAudioLanguagesAndRoles:4,getBufferFullness:1,getBufferedInfo:2,getExpiration:2,getKeyStatuses:2,getPlaybackRate:2,getTextLanguages:4,getTextLanguagesAndRoles:4,getImageTracks:2,getThumbnails:2,isAudioOnly:10,isBuffering:1,isInProgress:1,isLive:10,isTextTrackVisible:1,keySystem:10,seekRange:1,getLoadMode:10},qu={getConfiguration:4,getStats:5,getTextTracks:2,getVariantTracks:2},Xm={getPlayheadTimeAsDate:1,getPresentationStartTimeAsDate:20},Xe=[["getConfiguration","configure"]],Ym=[["isTextTrackVisible","setTextTrackVisibility"]],$m="addChaptersTrack addTextTrackAsync addThumbnailsTrack cancelTrickPlay configure getChapters getChaptersTracks resetConfiguration retryStreaming selectAudioLanguage selectTextLanguage selectTextTrack selectVariantTrack selectVariantsByLabel setTextTrackVisibility trickPlay updateStartTime goToLive".split(" "),WE=["attach","attachCanvas","detach","load","unload"];function of(t,i,o,u,l,h,p){var m=this;this.G=t,this.M=p,this.j=new ht(i),this.O=o,this.u=!1,this.s=u,this.F=l,this.J=h,this.h=this.m=!1,this.L="",this.o=null,this.B=function(){return zc(m)},this.D=function(w,C){switch(w=tf(C),w.type){case"event":var _=w.targetName,D=wg(w.event);m.s(_,D);break;case"update":_=w.update;for(D in _){w=m.g[D]||{};for(var b in _[D])w[b]=_[D][b]}m.u&&(m.O(),m.u=!1);break;case"asyncComplete":if(D=w.id,b=w.error,w=m.i[D],delete m.i[D],w)if(b){D=new oe(b.severity,b.category,b.code);for(_ in b)D[_]=b[_];w.reject(D)}else w.resolve()}},this.g={video:{},player:{}},this.H=0,this.i={},this.l=null,Xu.add(this)}v=of.prototype,v.destroy=function(){return Xu.delete(this),sf(this),Wi&&Fc(this),this.j&&(this.j.stop(),this.j=null),this.F=this.s=null,this.h=this.m=!1,this.D=this.B=this.l=this.i=this.g=this.o=null,Promise.resolve()},v.sa=function(){return this.h},v.ae=function(){return this.L},v.init=function(){if(this.G.length)if(S.chrome&&chrome.cast&&chrome.cast.isAvailable){this.m=!0,this.j.Mb();var t=new chrome.cast.SessionRequest(this.G,[],null,this.M,null);t=new chrome.cast.ApiConfig(t,function(i){for(var o=A(Xu),u=o.next();!u.done;u=o.next())Bc(u.value,i)},function(i){for(var o=A(Xu),u=o.next();!u.done;u=o.next())u=u.value,uf=i=="available",u.j.Mb()},"origin_scoped"),chrome.cast.initialize(t,function(){},function(){}),uf&&this.j.N(XE),(t=Wi)&&t.status!=chrome.cast.SessionStatus.STOPPED?Bc(this,t):Wi=null}else S.__onGCastApiAvailable!==Qm&&(af=S.__onGCastApiAvailable||null,S.__onGCastApiAvailable=Qm)},v.ie=function(t){this.o=t,this.h&&Al(this,{type:"appData",appData:this.o})},v.cast=function(t){var i=this;return j(function(o){if(!i.m)throw new oe(1,8,8e3);if(!uf)throw new oe(1,8,8001);if(i.h)throw new oe(1,8,8002);return i.l=new Wt,chrome.cast.requestSession(function(u){return jc(i,t,u)},function(u){return b1(i,u)}),k(o,i.l,0)})};function qE(t){if(t.h){var i=t.J();chrome.cast.requestSession(function(o){return jc(t,i,o)},function(o){return b1(t,o)})}}v.Ab=function(){if(this.h){if(sf(this),Wi){Fc(this);try{Wi.stop(function(){},function(){})}catch(t){}Wi=null}zc(this)}},v.get=function(t,i){var o=this;if(t=="video"){if(rf.includes(i))return function(){return o.Qe.apply(o,[t,i].concat(q(fn.apply(0,arguments))))}}else if(t=="player"){if(Xm[i]&&!this.get("player","isLive")())return function(){};if($m.includes(i))return function(){return o.Qe.apply(o,[t,i].concat(q(fn.apply(0,arguments))))};if(WE.includes(i))return function(){return o.og.apply(o,[t,i].concat(q(fn.apply(0,arguments))))};if(gt[i]||qu[i])return function(){return o.g[t][i]}}return this.g[t][i]},v.set=function(t,i,o){this.g[t][i]=o,Al(this,{type:"set",targetName:t,property:i,value:o})};function jc(t,i,o){Wi=o,o.addUpdateListener(t.B),o.addMessageListener("urn:x-cast:com.google.shaka.v2",t.D),zc(t),Al(t,{type:"init",initState:i,appData:t.o}),t.l.resolve()}function b1(t,i){var o=8003;switch(i.code){case"cancel":o=8004;break;case"timeout":o=8005;break;case"receiver_unavailable":o=8006}t.l.reject(new oe(2,8,o,i))}v.Qe=function(t,i){Al(this,{type:"call",targetName:t,methodName:i,args:fn.apply(2,arguments)})},v.og=function(t,i){var o=fn.apply(2,arguments),u=new Wt,l=this.H.toString();this.H++,this.i[l]=u;try{Al(this,{type:"asyncCall",targetName:t,methodName:i,args:o,id:l})}catch(h){u.reject(h)}return u};function Bc(t,i){var o=t.J();t.l=new Wt,t.u=!0,jc(t,o,i)}function Fc(t){var i=Wi;i.removeUpdateListener(t.B),i.removeMessageListener("urn:x-cast:com.google.shaka.v2",t.D)}function zc(t){var i=Wi?Wi.status=="connected":!1;if(t.h&&!i){t.F();for(var o in t.g)t.g[o]={};sf(t)}t.h=i,t.L=i?Wi.receiver.friendlyName:"",t.j.Mb()}function sf(t){for(var i in t.i){var o=t.i[i];delete t.i[i],o.reject(new oe(1,7,7e3))}}function Al(t,i){i=ef(i);var o=Wi;try{o.sendMessage("urn:x-cast:com.google.shaka.v2",i,function(){},lu)}catch(u){throw i=new oe(2,8,8005,u),o=new dt("error",new Map().set("detail",i)),t.s("player",o),t.Ab(),i}}var XE=.02,uf=!1,Wi=null,af=null,Xu=new Set;function Qm(t){if(af?S.__onGCastApiAvailable=af:delete S.__onGCastApiAvailable,af=null,t)for(var i=A(Xu),o=i.next();!o.done;o=i.next())o.value.init();typeof S.__onGCastApiAvailable=="function"&&S.__onGCastApiAvailable(t)}function dn(t,i,o,u){u=u===void 0?!1:u,kt.call(this);var l=this;this.i=t,this.h=i,this.m=this.o=this.j=this.s=this.l=null,this.D=o,this.B=u,this.u=new Map,this.g=new of(o,function(){return O1(l)},function(){return Gc(l)},function(h,p){return Jm(l,h,p)},function(){return hr(l)},function(){return Yu(l)},u),P1(this)}Te(dn,kt),v=dn.prototype,v.destroy=function(t){return t&&this.g.Ab(),this.m&&(this.m.release(),this.m=null),t=[],this.h&&(t.push(this.h.destroy()),this.h=null),this.g&&(t.push(this.g.destroy()),this.g=null),this.s=this.l=this.i=null,kt.prototype.release.call(this),Promise.all(t)},v.Wf=function(){return this.l},v.Nf=function(){return this.s},v.nf=function(){return this.g.m&&uf},v.sa=function(){return this.g.sa()},v.ae=function(){return this.g.ae()},v.cast=function(){var t=this,i;return j(function(o){return o.g==1?(i=Yu(t),k(o,t.g.cast(i),2)):t.h?k(o,t.h.re(),0):o.return()})},v.ie=function(t){this.g.ie(t)},v.zg=function(){qE(this.g)},v.Ab=function(){this.g.Ab()},v.qf=function(t,i){i=i===void 0?!1:i;var o=this;return j(function(u){if(u.g==1)return t==o.D&&i==o.B?u.return():(o.D=t,o.B=i,o.g.Ab(),k(u,o.g.destroy(),2));o.g=null,o.g=new of(t,function(){return O1(o)},function(){return Gc(o)},function(l,h){return Jm(o,l,h)},function(){return hr(o)},function(){return Yu(o)},i),o.g.init(),le(u)})};function P1(t){t.g.init(),t.m=new Xt;for(var i=A(Uc),o=i.next();!o.done;o=i.next())t.m.C(t.i,o.value,function(h){t.g.sa()||(h=wg(h),t.j.dispatchEvent(h))});for(var u in Jo)t.m.C(t.h,Jo[u],function(h){t.g.sa()||t.o.dispatchEvent(h)});t.l={},i={};for(var l in t.i)i.Sb=l,Object.defineProperty(t.l,i.Sb,{configurable:!1,enumerable:!0,get:function(h){return function(){return cf(t,h.Sb)}}(i),set:function(h){return function(p){var m=h.Sb;t.g.sa()?t.g.set("video",m,p):t.i[m]=p}}(i)}),i={Sb:i.Sb};t.s={},lf(t,function(h){Object.defineProperty(t.s,h,{configurable:!1,enumerable:!0,get:function(){return Vc(t,h)}})}),Zm(t),t.j=new kt,t.j.Wc=t.l,t.o=new kt,t.o.Wc=t.s}function Zm(t){var i=new Map;lf(t,function(o,u){i.has(u)?(u=i.get(u),o.length<u.length?t.u.set(o,u):t.u.set(u,o)):i.set(u,o)})}function lf(t,i){function o(w){return w=="constructor"||typeof u[w]!="function"?!1:!l.has(w)}var u=t.h,l=new Set,h;for(h in u)o(h)&&(l.add(h),i(h,u[h]));for(t=Object.getPrototypeOf(u),h=Object.getPrototypeOf({});t&&t!=h;){for(var p=A(Object.getOwnPropertyNames(t)),m=p.next();!m.done;m=p.next())m=m.value,o(m)&&(l.add(m),i(m,u[m]));t=Object.getPrototypeOf(t)}}function Yu(t){var i={video:{},player:{},playerAfterLoad:{},manifest:t.h.Dd(),startTime:null};t.i.pause();for(var o=A(nf),u=o.next();!u.done;u=o.next())u=u.value,i.video[u]=t.i[u];for(t.i.ended||(i.startTime=t.i.currentTime),o=A(Xe),u=o.next();!u.done;u=o.next()){var l=u.value;u=l[1],l=t.h[l[0]](),i.player[u]=l}for(o=A(Ym),u=o.next();!u.done;u=o.next())l=u.value,u=l[1],l=t.h[l[0]](),i.playerAfterLoad[u]=l;return i}function O1(t){var i=new dt("caststatuschanged");t.dispatchEvent(i)}function Gc(t){var i=new dt(t.l.paused?"pause":"play");t.j.dispatchEvent(i)}function hr(t){for(var i=A(Xe),o=i.next();!o.done;o=i.next()){var u=o.value;o=u[1],u=t.g.get("player",u[0])(),t.h[o](u)}var l=t.g.get("player","getAssetUri")();o=t.g.get("video","ended"),i=Promise.resolve();var h=t.i.autoplay;u=null,o||(u=t.g.get("video","currentTime")),l&&(t.i.autoplay=!1,i=t.h.load(l,u));var p={};for(o=A(nf),u=o.next();!u.done;u=o.next())u=u.value,p[u]=t.g.get("video",u);i.then(function(){if(t.i){for(var m=A(nf),w=m.next();!w.done;w=m.next())w=w.value,t.i[w]=p[w];for(m=A(Ym),w=m.next();!w.done;w=m.next()){var C=w.value;w=C[1],C=t.g.get("player",C[0])(),t.h[w](C)}t.i.autoplay=h,l&&t.i.play()}},function(m){m=new Map().set("detail",m),m=new dt("error",m),t.h.dispatchEvent(m)})}function cf(t,i){if(i=="addEventListener")return function(u,l,h){return t.j.addEventListener(u,l,h)};if(i=="removeEventListener")return function(u,l,h){return t.j.removeEventListener(u,l,h)};if(t.g.sa()&&Object.keys(t.g.g.video).length==0){var o=t.i[i];if(typeof o!="function")return o}return t.g.sa()?t.g.get("video",i):(i=t.i[i],typeof i=="function"&&(i=i.bind(t.i)),i)}function Vc(t,i){if(t.u.has(i)&&(i=t.u.get(i)),i=="addEventListener")return function(o,u,l){return t.o.addEventListener(o,u,l)};if(i=="removeEventListener")return function(o,u,l){return t.o.removeEventListener(o,u,l)};if(i=="getMediaElement")return function(){return t.l};if(i=="getSharedConfiguration")return t.g.get("player","getConfiguration");if(i=="getNetworkingEngine")return function(){return t.h.jc()};if(i=="getDrmEngine")return function(){return t.h.m};if(i=="getAdManager")return function(){return t.h.Ge()};if(i=="setVideoContainer")return function(o){return t.h.$e(o)};if(t.g.sa()){if(i=="getManifest"||i=="drmInfo")return function(){return ze(i+"() does not work while casting!"),null};if(i=="attach"||i=="detach")return function(){return ze(i+"() does not work while casting!"),Promise.resolve()}}return t.g.sa()&&Object.keys(t.g.g.video).length==0&&(gt[i]||qu[i])||!t.g.sa()?t.h[i].bind(t.h):t.g.get("player",i)}function Jm(t,i,o){t.g.sa()&&(i=="video"?t.j.dispatchEvent(o):i=="player"&&t.o.dispatchEvent(o))}pe("shaka.cast.CastProxy",dn),dn.prototype.changeReceiverId=dn.prototype.qf,dn.prototype.forceDisconnect=dn.prototype.Ab,dn.prototype.suggestDisconnect=dn.prototype.zg,dn.prototype.setAppData=dn.prototype.ie,dn.prototype.cast=dn.prototype.cast,dn.prototype.receiverName=dn.prototype.ae,dn.prototype.isCasting=dn.prototype.sa,dn.prototype.canCast=dn.prototype.nf,dn.prototype.getPlayer=dn.prototype.Nf,dn.prototype.getVideo=dn.prototype.Wf,dn.prototype.destroy=dn.prototype.destroy;function wt(t,i,o,u){kt.call(this);var l=this;this.g=t,this.h=i,this.j=new Xt,this.H={video:t,player:i},this.D=o||function(){},this.J=u||function(h){return h},this.i=null,this.F=!1,this.o=!0,this.m=0,this.B=!1,this.u=!0,this.s=this.l=null,this.G=new ht(function(){df(l)}),YE(this)}Te(wt,kt),v=wt.prototype,v.isConnected=function(){return this.F},v.$f=function(){return this.o},v.wg=function(t){this.i=t},v.uf=function(){this.i=null},v.xg=function(t){this.i||(this.i={metadataType:cast.receiver.media.MetadataType.GENERIC}),this.i.title=t},v.vg=function(t){this.i||(this.i={metadataType:cast.receiver.media.MetadataType.GENERIC}),this.i.images=[{url:t}]},v.ug=function(t){this.i||(this.i={}),this.i.artist=t,this.i.metadataType=cast.receiver.media.MetadataType.MUSIC_TRACK},v.destroy=function(){var t=this,i,o;return j(function(u){if(u.g==1)return t.j&&(t.j.release(),t.j=null),i=[],t.h&&(i.push(t.h.destroy()),t.h=null),t.G&&(t.G.stop(),t.G=null),t.g=null,t.H=null,t.D=null,t.F=!1,t.o=!0,t.l=null,t.s=null,kt.prototype.release.call(t),k(u,Promise.all(i),2);o=cast.receiver.CastReceiverManager.getInstance(),o.stop(),le(u)})};function YE(t){var i=cast.receiver.CastReceiverManager.getInstance();i.onSenderConnected=function(){return U1(t)},i.onSenderDisconnected=function(){return U1(t)},i.onSystemVolumeChanged=function(){var l=cast.receiver.CastReceiverManager.getInstance().getSystemVolume();l&&ps(t,{type:"update",update:{video:{volume:l.level,muted:l.muted}}},t.l),ps(t,{type:"event",targetName:"video",event:{type:"volumechange"}},t.l)},t.s=i.getCastMessageBus("urn:x-cast:com.google.cast.media"),t.s.onMessage=function(l){return j1(t,l)},t.l=i.getCastMessageBus("urn:x-cast:com.google.shaka.v2"),t.l.onMessage=function(l){return $E(t,l)},i.start(),i=A(Uc);for(var o=i.next();!o.done;o=i.next())t.j.C(t.g,o.value,function(l){return t0(t,"video",l)});for(var u in Jo)t.j.C(t.h,Jo[u],function(l){return t0(t,"player",l)});cast.__platform__&&cast.__platform__.canDisplayType('video/mp4; codecs="avc1.640028"; width=3840; height=2160')?t.h.ke(3840,2160):t.h.ke(1920,1080),t.j.C(t.g,"loadeddata",function(){t.B=!0}),t.j.C(t.h,"loading",function(){t.o=!1,$u(t)}),t.j.C(t.g,"playing",function(){t.o=!1,$u(t)}),t.j.C(t.g,"pause",function(){$u(t)}),t.j.C(t.h,"unloading",function(){t.o=!0,$u(t)}),t.j.C(t.g,"ended",function(){new ht(function(){t.g&&t.g.ended&&(t.o=!0,$u(t))}).N(QE)})}function U1(t){t.m=0,t.u=!0,t.F=cast.receiver.CastReceiverManager.getInstance().getSenders().length!=0,$u(t)}function $u(t){var i;j(function(o){if(o.g==1)return k(o,Promise.resolve(),2);if(!t.h)return o.return();i=new dt("caststatuschanged"),t.dispatchEvent(i),n0(t)||Lo(t),le(o)})}function e0(t,i,o){var u,l,h,p,m,w,C,_,D,b;j(function(U){switch(U.g){case 1:for(u in i.player)l=i.player[u],t.h[u](l);return t.D(o),h=t.g.autoplay,i.manifest?(t.g.autoplay=!1,ye(U,5),k(U,t.h.load(i.manifest,i.startTime),7)):k(U,Promise.resolve(),3);case 7:_e(U,3);break;case 5:return p=we(U),m=new Map().set("detail",p),w=new dt("error",m),t.h&&t.h.dispatchEvent(w),U.return();case 3:if(!t.h)return U.return();for(C in i.video)_=i.video[C],t.g[C]=_;for(D in i.playerAfterLoad)b=i.playerAfterLoad[D],t.h[D](b);t.g.autoplay=h,i.manifest&&(t.g.play(),Lo(t)),le(U)}})}function t0(t,i,o){t.h&&(df(t),ps(t,{type:"event",targetName:i,event:o},t.l))}function df(t){t.G.N(Sl);for(var i={video:{},player:{}},o=A(HE),u=o.next();!u.done;u=o.next())u=u.value,i.video[u]=t.g[u];if(t.h.U())for(var l in Xm)t.m%Xm[l]==0&&(i.player[l]=t.h[l]());for(var h in gt)t.m%gt[h]==0&&(i.player[h]=t.h[h]());(o=cast.receiver.CastReceiverManager.getInstance().getSystemVolume())&&(i.video.volume=o.level,i.video.muted=o.muted),ps(t,{type:"update",update:i},t.l);for(var p in qu)t.m%qu[p]==0&&(i={player:{}},i.player[p]=t.h[p](),ps(t,{type:"update",update:i},t.l));t.B&&(t.m+=1),n0(t)}function n0(t){return t.u&&(t.g.duration||t.h.U())?(i0(t),t.u=!1,!0):!1}function i0(t,i){var o={contentId:t.h.Dd(),streamType:t.h.U()?"LIVE":"BUFFERED",contentType:""};t.h.U()||(o.duration=t.g.duration),t.i&&(o.metadata=t.i),Lo(t,i===void 0?0:i,o)}function $E(t,i){var o=tf(i.data);switch(o.type){case"init":t.m=0,t.B=!1,t.u=!0,e0(t,o.initState,o.appData),df(t);break;case"appData":t.D(o.appData);break;case"set":var u=o.targetName,l=o.property;if(o=o.value,u=="video"){if(i=cast.receiver.CastReceiverManager.getInstance(),l=="volume"){i.setSystemVolumeLevel(o);break}else if(l=="muted"){i.setSystemVolumeMuted(o);break}}t.H[u][l]=o;break;case"call":u=t.H[o.targetName],u[o.methodName].apply(u,o.args);break;case"asyncCall":u=o.targetName,l=o.methodName,u=="player"&&l=="load"&&(t.m=0,t.B=!1);var h=o.id,p=i.senderId;i=t.H[u],o=i[l].apply(i,o.args),u=="player"&&l=="load"&&(o=o.then(function(){t.u=!0})),o.then(function(){return zn(t,p,h,null)},function(m){return zn(t,p,h,m)})}}function j1(t,i){var o=tf(i.data);switch(o.type){case"PLAY":t.g.play(),Lo(t);break;case"PAUSE":t.g.pause(),Lo(t);break;case"SEEK":i=o.currentTime;var u=o.resumeState;i!=null&&(t.g.currentTime=Number(i)),u&&u=="PLAYBACK_START"?(t.g.play(),Lo(t)):u&&u=="PLAYBACK_PAUSE"&&(t.g.pause(),Lo(t));break;case"STOP":t.h.re().then(function(){t.h&&Lo(t)});break;case"GET_STATUS":i0(t,Number(o.requestId));break;case"VOLUME":u=o.volume,i=u.level,u=u.muted;var l=t.g.volume,h=t.g.muted;i!=null&&(t.g.volume=Number(i)),u!=null&&(t.g.muted=u),l==t.g.volume&&h==t.g.muted||Lo(t);break;case"LOAD":t.m=0,t.B=!1,t.u=!1,i=o.media,u=o.currentTime,l=t.J(i.contentId),h=o.autoplay||!0,t.D(i.customData),h&&(t.g.autoplay=!0),t.h.load(l,u).then(function(){t.h&&i0(t)}).catch(function(p){var m="LOAD_FAILED";p.category==7&&p.code==7e3&&(m="LOAD_CANCELLED"),ps(t,{requestId:Number(o.requestId),type:m},t.s)});break;default:ps(t,{requestId:Number(o.requestId),type:"INVALID_REQUEST",reason:"INVALID_COMMAND"},t.s)}}function zn(t,i,o,u){t.h&&ps(t,{type:"asyncComplete",id:o,error:u},t.l,i)}function ps(t,i,o,u){t.F&&(t=ef(i),u?o.getCastChannel(u).send(t):o.broadcast(t))}function Lo(t,i,o){o=o===void 0?null:o;var u={mediaSessionId:0,playbackRate:t.g.playbackRate,playerState:t.o?B1:t.h.Fd()?F1:t.g.paused?o0:r0,currentTime:t.g.currentTime,supportedMediaCommands:63,volume:{level:t.g.volume,muted:t.g.muted}};o&&(u.media=o),ps(t,{requestId:i===void 0?0:i,type:"MEDIA_STATUS",status:[u]},t.s)}pe("shaka.cast.CastReceiver",wt),wt.prototype.destroy=wt.prototype.destroy,wt.prototype.setContentArtist=wt.prototype.ug,wt.prototype.setContentImage=wt.prototype.vg,wt.prototype.setContentTitle=wt.prototype.xg,wt.prototype.clearContentMetadata=wt.prototype.uf,wt.prototype.setContentMetadata=wt.prototype.wg,wt.prototype.isIdle=wt.prototype.$f,wt.prototype.isConnected=wt.prototype.isConnected;var Sl=.5,QE=5,B1="IDLE",r0="PLAYING",F1="BUFFERING",o0="PAUSED";function z1(t,i,o){var u=eA(t),l=null;t=[];var h=[],p=new Set(u.map(function(m){return m.keyId}));if(p.delete(null),1<p.size)throw new oe(2,4,4010);if(i||(h=u.filter(function(m){return m.fe=="urn:mpeg:dash:mp4protection:2011"?(l=m.init||l,!1):!0}),h.length&&(t=JE(l,h,o,p),t.length==0&&(t=[Ss("",l)]))),u.length&&(i||!h.length))for(t=[],i=A(Object.values(o)),o=i.next();!o.done;o=i.next())o=o.value,o!="org.w3.clearkey"&&t.push(Ss(o,l));if(p=Array.from(p)[0]||null)for(i=A(t),o=i.next();!o.done;o=i.next())for(o=A(o.value.initData),u=o.next();!u.done;u=o.next())u.value.keyId=p;return{Be:p,uh:l,drmInfos:t,Fe:!0}}function ZE(t,i,o,u){var l=z1(t,o,u);if(i.Fe)t=i.drmInfos.length==1&&!i.drmInfos[0].keySystem,o=l.drmInfos.length==0,(i.drmInfos.length==0||t&&!o)&&(i.drmInfos=l.drmInfos),i.Fe=!1;else if(0<l.drmInfos.length&&(i.drmInfos=i.drmInfos.filter(function(h){return l.drmInfos.some(function(p){return p.keySystem==h.keySystem})}),i.drmInfos.length==0))throw new oe(2,4,4008);return l.Be||i.Be}function G1(t){var i=0,o=Oi(t),u=o.getUint32(i,!0);if(u!=t.byteLength)return[];e:{for(t=i+6,i=[];t<o.byteLength-1;){u=o.getUint16(t,!0),t+=2;var l=o.getUint16(t,!0);if(t+=2,l&1||l+t>o.byteLength){o=[];break e}var h=$e(o,t,l);i.push({type:u,value:h}),t+=l}o=i}return o}function gs(t){t=A(t.getElementsByTagName("DATA"));for(var i=t.next();!i.done;i=t.next()){i=A(i.value.childNodes);for(var o=i.next();!o.done;o=i.next())if(o=o.value,o instanceof Element&&o.tagName=="LA_URL")return o.textContent}return""}function Lr(t){return t=tc(t.node,"urn:microsoft:playready","pro"),!t||(t=Bi(t.textContent),t=G1(t).filter(function(i){return i.type===nA})[0],!t)?"":(t=wr(t.value,!0),(t=za(t,"WRMHEADER"))?gs(t):"")}function JE(t,i,o,u){var l=[];i=A(i);for(var h=i.next();!h.done;h=i.next()){h=h.value;var p=o[h.fe];if(p){var m;if(m=tc(h.node,"urn:microsoft:playready","pro")){m=Bi(m.textContent);var w=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]);m=[{initData:Zd(m,w,new Set,0),initDataType:"cenc",keyId:h.keyId}]}else m=null;if(w=null,h.fe==="urn:uuid:e2719d58-a985-b3c9-781a-b030af78d30e")if(w=u,w.size==0)w=null;else{var C=new Uint8Array([16,119,239,236,192,178,77,2,172,227,60,30,82,226,251,75]),_=new Uint8Array([]);w=[{initData:Zd(_,C,w,1),initDataType:"cenc",keyId:h.keyId}]}m=Ss(p,h.init||t||m||w),(p=iA.get(p))&&(m.licenseServerUri=p(h)),l.push(m)}}return l}function eA(t){var i=[];t=A(t);for(var o=t.next();!o.done;o=t.next())(o=tA(o.value))&&i.push(o);return i}function tA(t){var i=t.getAttribute("schemeIdUri"),o=Ds(t,"urn:mpeg:cenc:2013","default_KID"),u=Ty(t,"urn:mpeg:cenc:2013","pssh").map(Ba);if(!i)return null;if(i=i.toLowerCase(),o&&(o=o.replace(/-/g,"").toLowerCase(),o.includes(" ")))throw new oe(2,4,4009);var l=[];try{l=u.map(function(h){return{initDataType:"cenc",initData:Bi(h),keyId:null}})}catch(h){throw new oe(2,4,4007)}return{node:t,fe:i,keyId:o,init:0<l.length?l:null}}var nA=1,iA=new Map().set("com.widevine.alpha",function(t){return(t=tc(t.node,"urn:microsoft","laurl"))&&t.getAttribute("licenseUrl")||""}).set("com.microsoft.playready",Lr).set("com.microsoft.playready.recommendation",Lr).set("com.microsoft.playready.software",Lr).set("com.microsoft.playready.hardware",Lr).set("org.w3.clearkey",function(t){return(t=tc(t.node,"http://dashif.org/guidelines/clearKey","Laurl"))&&t.getAttribute("Lic_type")==="EME-1.0"&&t.textContent?t.textContent:""});function hf(t,i,o,u,l){var h={RepresentationID:i,Number:o,Bandwidth:u,Time:l};return t.replace(/\$(RepresentationID|Number|Bandwidth|Time)?(?:%0([0-9]+)([diouxX]))?\$/g,function(p,m,w,C){if(p=="$$")return"$";var _=h[m];if(_==null)return p;switch(m=="RepresentationID"&&w&&(w=void 0),m=="Time"&&(_=Math.round(_)),C){case void 0:case"d":case"i":case"u":p=_.toString();break;case"o":p=_.toString(8);break;case"x":p=_.toString(16);break;case"X":p=_.toString(16).toUpperCase();break;default:p=_.toString()}return w=S.parseInt(w,10)||1,Array(Math.max(0,w-p.length)+1).join("0")+p})}function s0(t,i){var o=No(t,i,"timescale"),u=1;o&&(u=Sr(o)||1);var l=No(t,i,"duration");o=Sr(l||""),t.I.contentType=="image"&&(o=Fa(l||"")),o&&(o/=u);var h=No(t,i,"startNumber");l=Number(No(t,i,"presentationTimeOffset"))||0;var p=rr(h||"");if((h==null||p==null)&&(p=1),h=ff(t,i,"SegmentTimeline"),i=null,h){i=u,t=t.T.duration||1/0,h=tn(h,"S");for(var m=[],w=-l,C=0;C<h.length;++C){var _=h[C],D=h[C+1],b=Ft(_,"t",rr),U=Ft(_,"d",rr);if(_=Ft(_,"r",Cu),b!=null&&(b-=l),!U)break;if(b=b!=null?b:w,_=_||0,0>_)if(D){if(D=Ft(D,"t",rr),D==null)break;if(b>=D)break;_=Math.ceil((D-b)/U)-1}else{if(t==1/0)break;if(b/i>=t)break;_=Math.ceil((t*i-b)/U)-1}for(0<m.length&&b!=w&&(m[m.length-1].end=b/i),D=0;D<=_;++D)w=b+U,m.push({start:b/i,end:w/i,Dg:b}),b=w}i=m}return{timescale:u,ha:o,Lb:p,Sa:l/u||0,se:l,timeline:i}}function No(t,i,o){return[i(t.I),i(t.ea),i(t.$)].filter(Hn).map(function(u){return u.getAttribute(o)}).reduce(function(u,l){return u||l})}function ff(t,i,o){return[i(t.I),i(t.ea),i(t.$)].filter(Hn).map(function(u){return rs(u,o)}).reduce(function(u,l){return u||l})}function rA(t,i,o,u,l,h){for(var p=Ds(t,"http://www.w3.org/1999/xlink","href"),m=Ds(t,"http://www.w3.org/1999/xlink","actuate")||"onRequest",w=A(Array.from(t.attributes)),C=w.next();!C.done;C=w.next())C=C.value,C.namespaceURI=="http://www.w3.org/1999/xlink"&&t.removeAttributeNS(C.namespaceURI,C.localName);if(5<=h)return Ls(new oe(2,4,4028));if(m!="onLoad")return Ls(new oe(2,4,4027));var _=di([u],[p]);return l.request(0,oi(_,i)).Y(function(D){if(D=Co(D.data,t.tagName),!D)return Ls(new oe(2,4,4001,p));for(;t.childNodes.length;)t.removeChild(t.childNodes[0]);for(;D.childNodes.length;){var b=D.childNodes[0];D.removeChild(b),t.appendChild(b)}for(D=A(Array.from(D.attributes)),b=D.next();!b.done;b=D.next())t.setAttributeNode(b.value.cloneNode(!1));return Qu(t,i,o,_[0],l,h+1)})}function Qu(t,i,o,u,l,h){if(h=h===void 0?0:h,Ds(t,"http://www.w3.org/1999/xlink","href")){var p=rA(t,i,o,u,l,h);return o&&(p=p.Y(void 0,function(){return Qu(t,i,o,u,l,h)})),p}p=[];for(var m=A(Array.from(t.childNodes)),w=m.next();!w.done;w=m.next())w=w.value,w instanceof Element&&(Ds(w,"http://www.w3.org/1999/xlink","href")=="urn:mpeg:dash:resolve-to-zero:2013"?t.removeChild(w):w.tagName!="SegmentTimeline"&&p.push(Qu(w,i,o,u,l,h)));return my(p).Y(function(){return t})}function oA(t,i,o,u,l,h,p){var m,w=new Vt().P("sidx",function(C){m=sA(i,u,l,h,p,o,C)});if(t&&w.parse(t),m)return m;throw new oe(2,3,3004)}function sA(t,i,o,u,l,h,p){var m=[];p.reader.skip(4);var w=p.reader.K();if(w==0)throw new oe(2,3,3005);if(p.version==0)var C=p.reader.K(),_=p.reader.K();else C=p.reader.$a(),_=p.reader.$a();p.reader.skip(2);var D=p.reader.$d();for(t=t+p.size+_,_=0;_<D;_++){var b=p.reader.K(),U=(b&2147483648)>>>31;b&=2147483647;var K=p.reader.K();if(p.reader.skip(4),U==1)throw new oe(2,3,3006);m.push(new St(C/w+o,(C+K)/w+o,function(){return h},t,t+b-1,i,o,u,l)),C+=K,t+=b}return p.parser.stop(),m}function Gs(t){this.h=Oi(t),this.g=new Ve(this.h,0)}Gs.prototype.ga=function(){return this.g.ga()};function ms(t){var i=V1(t);if(7<i.length)throw new oe(2,3,3002);var o=0;i=A(i);for(var u=i.next();!u.done;u=i.next())o=256*o+u.value;i=V1(t);e:{u=A(pf);for(var l=u.next();!l.done;l=u.next())if(Xr(i,new Uint8Array(l.value))){u=!0;break e}u=!1}if(u)i=t.h.byteLength-t.g.Z();else{if(i.length==8&&i[1]&224)throw new oe(2,3,3001);for(l=u=0;l<i.length;l++){var h=i[l];u=l==0?h&(1<<8-i.length)-1:256*u+h}i=u}return i=t.g.Z()+i<=t.h.byteLength?i:t.h.byteLength-t.g.Z(),u=Oi(t.h,t.g.Z(),i),t.g.skip(i),new K1(o,u)}function V1(t){var i=t.g.Z(),o=t.g.Ra();if(o==0)throw new oe(2,3,3002);return o=8-Math.floor(Math.log2(o)),t.g.skip(o-1),$e(t.h,i,o)}var pf=[[255],[127,255],[63,255,255],[31,255,255,255],[15,255,255,255,255],[7,255,255,255,255,255],[3,255,255,255,255,255,255],[1,255,255,255,255,255,255,255]];function K1(t,i){this.id=t,this.g=i}function Nr(t){if(8<t.g.byteLength)throw new oe(2,3,3002);if(t.g.byteLength==8&&t.g.getUint8(0)&224)throw new oe(2,3,3001);for(var i=0,o=0;o<t.g.byteLength;o++){var u=t.g.getUint8(o);i=256*i+u}return i}function gf(t,i,o,u,l,h,p,m,w){function C(){return l}var _=[];t=new Gs(t.g);for(var D=null,b=null;t.ga();){var U=ms(t);if(U.id==187){var K=uA(U);K&&(U=o*K.Eg,K=i+K.ng,D!=null&&_.push(new St(D+p,U+p,C,b,K-1,h,p,m,w)),D=U,b=K)}}return D!=null&&_.push(new St(D+p,u+p,C,b,null,h,p,m,w)),_}function uA(t){var i=new Gs(t.g);if(t=ms(i),t.id!=179)throw new oe(2,3,3013);if(t=Nr(t),i=ms(i),i.id!=183)throw new oe(2,3,3012);i=new Gs(i.g);for(var o=0;i.ga();){var u=ms(i);if(u.id==241){o=Nr(u);break}}return{Eg:t,ng:o}}function Kc(t,i){if(i=ff(t,i,"Initialization"),!i)return null;var o=t.I.wa,u=i.getAttribute("sourceURL");u&&(o=di(t.I.wa,[u])),u=0;var l=null;return(i=Ft(i,"range",rc))&&(u=i.start,l=i.end),new sr(function(){return o},u,l,X1(t))}function aA(t,i){var o=Number(No(t,fr,"presentationTimeOffset"))||0,u=No(t,fr,"timescale"),l=1;u&&(l=Sr(u)||1);var h=o/l||0,p=Kc(t,fr);W1(t,p);var m=Eg(t);return{Bb:function(){var w=ff(m,fr,"RepresentationIndex"),C=m.I.wa;return w&&(w=w.getAttribute("sourceURL"))&&(C=di(m.I.wa,[w])),w=Do(m),H1(m,i,p,C,w.start,w.end,h)}}}function H1(t,i,o,u,l,h,p){var m,w,C,_,D,b,U,K,Z,B,X,ge,ne,ce,de;return j(function(Ee){if(Ee.g==1)return m=t.presentationTimeline,w=!t.Ma||!t.T.Gd,C=t.T.start,_=t.T.duration,D=t.I.mimeType.split("/")[1],b=i,U=null,K=[b(u,l,h),D=="webm"?b(o.ya(),o.Ba,o.ka):null],b=null,k(Ee,Promise.all(K),2);if(Z=Ee.h,B=Z[0],X=Z[1]||null,ge=null,ne=C-p,ce=C,de=_?C+_:1/0,D=="mp4")var Ie=oA(B,l,u,o,ne,ce,de);else{if(Ie=new Gs(X),ms(Ie).id!=440786851)throw new oe(2,3,3008);var be=ms(Ie);if(be.id!=408125543)throw new oe(2,3,3009);Ie=be.g.byteOffset,be=new Gs(be.g);for(var Pe=null;be.ga();){var Ke=ms(be);if(Ke.id==357149030){Pe=Ke;break}}if(!Pe)throw new oe(2,3,3010);for(Pe=new Gs(Pe.g),Ke=1e6,be=null;Pe.ga();){var Ze=ms(Pe);if(Ze.id==2807729)Ke=Nr(Ze);else if(Ze.id==17545)if(Ze.g.byteLength==4)be=Ze.g.getFloat32(0);else if(Ze.g.byteLength==8)be=Ze.g.getFloat64(0);else throw new oe(2,3,3003)}if(be==null)throw new oe(2,3,3011);if(Pe=Ke/1e9,be*=Pe,Ke=ms(new Gs(B)),Ke.id!=475249515)throw new oe(2,3,3007);Ie=gf(Ke,Ie,Pe,be,u,o,ne,ce,de)}return ge=Ie,m.Ib(ge),U=new _t(ge),w&&U.Wa(ce,de,!0),Ee.return(U)})}function fr(t){return t.wc}function Do(t){var i=ff(t,fr,"RepresentationIndex");return t=No(t,fr,"indexRange"),t=rc(t||""),i&&(t=Ft(i,"range",rc,t)),t}function W1(t,i){if(q1(t,i),!Do(t))throw new oe(2,4,4002)}function q1(t,i){var o=t.I.mimeType.split("/")[1];if(t.I.contentType!=Lt&&o!="mp4"&&o!="webm")throw new oe(2,4,4006);if(o=="webm"&&!i)throw new oe(2,4,4005)}function X1(t){var i=t.I;return{bandwidth:t.bandwidth,audioSamplingRate:i.audioSamplingRate,codecs:i.codecs,contentType:i.contentType,frameRate:i.frameRate||null,height:i.height||null,mimeType:i.mimeType,channelsCount:i.ad,pixelAspectRatio:i.pixelAspectRatio||null,width:i.width||null}}function u0(t,i){var o=Kc(t,Y1),u=lA(t);if(!u.ha&&!u.timeline&&1<u.Gb.length)throw new oe(2,4,4002);if(!u.ha&&!t.T.duration&&!u.timeline&&u.Gb.length==1)throw new oe(2,4,4002);if(u.timeline&&u.timeline.length==0)throw new oe(2,4,4002);var l=null,h=null;t.$.id&&t.I.id&&(h=i[t.$.id+","+t.I.id])&&(l=h.segmentIndex);var p=$1(t.T.start,t.T.duration,t.I.wa,u,o);return i=!l,l?l.Hb(p,t.presentationTimeline.Pa()):l=new _t(p),t.presentationTimeline.Ib(p),t.Ma&&t.T.Gd||l.Wa(t.T.start,t.T.duration?t.T.start+t.T.duration:1/0,i),h&&(h.segmentIndex=l),{Bb:function(){return l&&l.g.length!=0||l.pc(p),Promise.resolve(l)}}}function Y1(t){return t.ab}function lA(t){var i=cA(t);t=s0(t,Y1);var o=t.Lb;o==0&&(o=1);var u=0;return t.ha?u=t.ha*(o-1):t.timeline&&0<t.timeline.length&&(u=t.timeline[0].start),{ha:t.ha,startTime:u,Lb:o,Sa:t.Sa,timeline:t.timeline,Gb:i}}function $1(t,i,o,u,l){var h=u.Gb.length;u.timeline&&u.timeline.length!=u.Gb.length&&(h=Math.min(u.timeline.length,u.Gb.length));for(var p=t-u.Sa,m=i?t+i:1/0,w=[],C=u.startTime,_={},D=0;D<h;_={od:_.od},D++){var b=u.Gb[D];_.od=di(o,[b.dg]);var U=void 0;U=u.ha!=null?C+u.ha:u.timeline?u.timeline[D].end:C+i,w.push(new St(t+C,t+U,function(K){return function(){return K.od}}(_),b.start,b.end,l,p,t,m)),C=U}return w}function cA(t){return[t.I.ab,t.ea.ab,t.$.ab].filter(Hn).map(function(i){return tn(i,"SegmentURL")}).reduce(function(i,o){return 0<i.length?i:o}).map(function(i){i.getAttribute("indexRange")&&!t.Ke&&(t.Ke=!0);var o=i.getAttribute("media");return i=Ft(i,"mediaRange",rc,{start:0,end:null}),{dg:o,start:i.start,end:i.end}})}function Q1(t,i,o,u,l,h){var p=hA(t),m=Z1(t);dA(m);var w=Eg(t);if(m.oc)return q1(t,p),{Bb:function(){var U=hf(m.oc,w.I.id,null,w.bandwidth||null,null);return U=di(w.I.wa,[U]),H1(w,i,p,U,0,null,m.Sa)}};if(m.ha)return u||t.ea.contentType==="image"||(t.presentationTimeline.Sd(m.ha),t.presentationTimeline.Td(t.T.start)),{Bb:function(){return J1(w,m,l,p,h)}};var C=null;u=u=null,t.$.id&&t.I.id&&(u=t.$.id+","+t.I.id,u=o[u])&&(C=u.segmentIndex);var _=ex(w,m,p);o=t.T.start;var D=t.T.duration?t.T.start+t.T.duration:1/0,b=!(t.Ma&&t.T.Gd);return C?(b&&new _t(_).Wa(o,D,!0),C.Hb(_,t.presentationTimeline.Pa())):C=new _t(_),t.presentationTimeline.Ib(_),b&&C.Wa(o,D),u&&t.Ma&&(u.segmentIndex=C),{Bb:function(){return C&&C.g.length!=0||C.pc(_),Promise.resolve(C)}}}function vs(t){return t.xc}function Z1(t){var i=s0(t,vs),o=No(t,vs,"media");return t=No(t,vs,"index"),{ha:i.ha,timescale:i.timescale,Lb:i.Lb,Sa:i.Sa,se:i.se,timeline:i.timeline,Pd:o,oc:t}}function dA(t){var i=t.oc?1:0;if(i+=t.timeline?1:0,i+=t.ha?1:0,i==0)throw new oe(2,4,4002);if(i!=1&&(t.oc&&(t.timeline=null),t.ha=null),!t.oc&&!t.Pd)throw new oe(2,4,4002)}function J1(t,i,o,u,l){function h(Pe){var Ke=(Pe-U)*b,Ze=Ke+i.Sa,et=Ke+C;Ke=et+b;var mt=Math.min(Ke,m());return et=new St(et,mt,function(){var qe=hf(Z,X,Pe,B,Ze*K);return di(ge,[qe])},0,null,u,ne,C,m()),et.j=Ke,et}function p(){var Pe=[Math.max(w.Pa(),C),Math.min(w.gb(),m())].map(function(Ke){return Ke-C});return[Math.ceil(Pe[0]/b),Math.ceil(Pe[1]/b)-1].map(function(Ke){return Ke+U})}function m(){var Pe=_!=null&&l[_]||D;return Pe?C+Pe:1/0}var w=t.presentationTimeline,C=t.T.start,_=t.$.id,D=t.T.duration,b=i.ha,U=i.Lb,K=i.timescale,Z=i.Pd,B=t.bandwidth||null,X=t.I.id,ge=t.I.wa,ne=C-i.Sa,ce=p();t=t.Ma?Math.max(ce[0],ce[1]-o+1):ce[0],ce=ce[1],o=[];for(var de=t;de<=ce;++de){var Ee=h(de);o.push(Ee)}var Ie=new _t(o);if(o=w.gb()<m(),de=w.U(),o||de){var be=Math.max(t,ce+1);Ie.fd(b,function(){var Pe=w.Pa();Ie.eb(Pe);var Ke=A(p());Ke.next(),Ke=Ke.next().value;for(var Ze=[];be<=Ke;){var et=h(be);Ze.push(et),be++}return Pe>m()&&!Ze.length?null:Ze})}return Promise.resolve(Ie)}function ex(t,i,o){var u=t.T.start,l=t.T.duration,h=u-i.Sa;l=l?u+l:1/0;for(var p=[],m={},w=0;w<i.timeline.length;m={nd:m.nd,rd:m.rd,ud:m.ud,kd:m.kd,wd:m.wd,ld:m.ld},w++){var C=i.timeline[w],_=C.start,D=C.Dg;C=C.end,m.ud=w+i.Lb,m.wd=D+i.se,m.rd=t.I.id,m.kd=t.bandwidth||null,m.nd=i.Pd,m.ld=t.I.wa,p.push(new St(u+_,u+C,function(b){return function(){var U=hf(b.nd,b.rd,b.ud,b.kd||null,b.wd);return di(b.ld,[U]).map(function(K){return K.toString()})}}(m),0,null,o,h,u,l))}return p}function hA(t){var i=No(t,vs,"initialization");if(!i)return null;var o=t.I.id,u=t.bandwidth||null,l=t.I.wa;return new sr(function(){var h=hf(i,o,null,u,null);return di(l,[h])},0,null,X1(t))}function a0(){this.l=[],this.g=[],this.h=[],this.j=[],this.i=[],this.m=new Set}a0.prototype.release=function(){for(var t=A(this.g.concat(this.h,this.j,this.i)),i=t.next();!i.done;i=t.next())i=i.value,i.segmentIndex&&i.segmentIndex.release();this.g=[],this.h=[],this.j=[],this.i=[],this.l=[]};function fA(t,i,o){var u,l,h,p,m,w,C,_,D,b,U,K,Z,B,X,ge,ne,ce,de,Ee,Ie,be,Pe,Ke,Ze,et,mt,qe,rn,lt;return j(function(sn){switch(sn.g){case 1:if(u=xt,pA(i),mA(i),gA(i),mf(i),!o&&i.length==1){l=i[0],t.g=l.Kc,t.h=l.gd,t.j=l.textStreams,t.i=l.imageStreams,sn.A(2);break}for(h=-1,p=0;p<i.length;p++)m=i[p],t.m.has(m.id)||(t.m.add(m.id),h==-1&&(h=p));if(h==-1)return sn.return();for(w=i.map(function(li){return li.Kc}),C=i.map(function(li){return li.gd}),_=i.map(function(li){return li.textStreams}),D=i.map(function(li){return li.imageStreams}),b=A(_),U=b.next();!U.done;U=b.next())K=U.value,K.push(Zu(u.X));for(Z=A(D),B=Z.next();!B.done;B=Z.next())X=B.value,X.push(Zu(u.Wb));return k(sn,Vs(t.g,w,h,Hc,Il),3);case 3:return k(sn,Vs(t.h,C,h,Hc,Il),4);case 4:return k(sn,Vs(t.j,_,h,Hc,Il),5);case 5:return k(sn,Vs(t.i,D,h,Hc,Il),2);case 2:if(ge=0,ne=[],t.h.length&&t.g.length)for(Pe=A(t.g),Ke=Pe.next();!Ke.done;Ke=Pe.next())for(Ze=Ke.value,et=A(t.h),mt=et.next();!mt.done;mt=et.next())qe=mt.value,rn=ih(Ze.drmInfos,qe.drmInfos),Ze.drmInfos.length&&qe.drmInfos.length&&!rn.length||(lt=ge++,ne.push({id:lt,language:Ze.language,primary:Ze.primary,audio:Ze,video:qe,bandwidth:(Ze.bandwidth||0)+(qe.bandwidth||0),drmInfos:rn,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]}));else for(ce=t.h.concat(t.g),de=A(ce),Ee=de.next();!Ee.done;Ee=de.next())Ie=Ee.value,be=ge++,ne.push({id:be,language:Ie.language,primary:Ie.primary,audio:Ie.type==u.Hc?Ie:null,video:Ie.type==u.va?Ie:null,bandwidth:Ie.bandwidth||0,drmInfos:Ie.drmInfos,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]});t.l=ne,le(sn)}})}function pA(t){t=A(t);for(var i=t.next();!i.done;i=t.next()){i=i.value;for(var o=[],u=A(i.Kc),l=u.next();!l.done;l=u.next()){l=l.value;for(var h=!1,p=A(o),m=p.next();!m.done;m=p.next())m=m.value,l.id!=m.id&&l.channelsCount==m.channelsCount&&l.language==m.language&&l.bandwidth==m.bandwidth&&l.label==m.label&&l.codecs==m.codecs&&l.mimeType==m.mimeType&&xa(l.roles,m.roles)&&l.audioSamplingRate==m.audioSamplingRate&&l.primary==m.primary&&(h=!0);h||o.push(l)}i.Kc=o}}function gA(t){t=A(t);for(var i=t.next();!i.done;i=t.next()){i=i.value;for(var o=[],u=A(i.textStreams),l=u.next();!l.done;l=u.next()){l=l.value;for(var h=!1,p=A(o),m=p.next();!m.done;m=p.next())m=m.value,l.id!=m.id&&l.language==m.language&&l.label==m.label&&l.codecs==m.codecs&&l.mimeType==m.mimeType&&l.bandwidth==m.bandwidth&&xa(l.roles,m.roles)&&(h=!0);h||o.push(l)}i.textStreams=o}}function mA(t){t=A(t);for(var i=t.next();!i.done;i=t.next()){i=i.value;for(var o=[],u=A(i.gd),l=u.next();!l.done;l=u.next()){l=l.value;for(var h=!1,p=A(o),m=p.next();!m.done;m=p.next())m=m.value,l.id!=m.id&&l.width==m.width&&l.frameRate==m.frameRate&&l.codecs==m.codecs&&l.mimeType==m.mimeType&&l.label==m.label&&xa(l.roles,m.roles)&&Gt(l.closedCaptions,m.closedCaptions)&&l.bandwidth==m.bandwidth&&(h=!0);h||o.push(l)}i.gd=o}}function mf(t){t=A(t);for(var i=t.next();!i.done;i=t.next()){i=i.value;for(var o=[],u=A(i.imageStreams),l=u.next();!l.done;l=u.next()){l=l.value;for(var h=!1,p=A(o),m=p.next();!m.done;m=p.next())m=m.value,l.id!=m.id&&l.width==m.width&&l.codecs==m.codecs&&l.mimeType==m.mimeType&&(h=!0);h||o.push(l)}i.imageStreams=o}}function tx(t){var i,o,u,l,h,p,m,w,C,_,D,b,U,K,Z,B,X,ge,ne,ce,de,Ee,Ie,be,Pe,Ke,Ze;return j(function(et){switch(et.g){case 1:if(i=xt,t.length==1)return et.return(t[0]);for(o=t.map(function(mt){return mt.filter(function(qe){return qe.type==i.Hc})}),u=t.map(function(mt){return mt.filter(function(qe){return qe.type==i.va})}),l=t.map(function(mt){return mt.filter(function(qe){return qe.type==i.X})}),h=t.map(function(mt){return mt.filter(function(qe){return qe.type==i.Wb})}),p=A(l),m=p.next();!m.done;m=p.next())w=m.value,w.push(qc(i.X));for(C=A(h),_=C.next();!_.done;_=C.next())D=_.value,D.push(qc(i.Wb));return k(et,Vs([],o,0,vf,yf),2);case 2:return b=et.h,k(et,Vs([],u,0,vf,yf),3);case 3:return U=et.h,k(et,Vs([],l,0,vf,yf),4);case 4:return K=et.h,k(et,Vs([],h,0,vf,yf),5);case 5:if(Z=et.h,B=0,U.length&&b.length)for(de=A(b),Ee=de.next();!Ee.done;Ee=de.next())for(Ie=Ee.value,be=A(U),Pe=be.next();!Pe.done;Pe=be.next())Ke=Pe.value,Ze=B++,Ke.variantIds.push(Ze),Ie.variantIds.push(Ze);else for(X=U.concat(b),ge=A(X),ne=ge.next();!ne.done;ne=ge.next())ce=ne.value,ce.variantIds=[B++];return et.return(U.concat(b).concat(K).concat(Z))}})}function Vs(t,i,o,u,l){var h,p,m,w,C,_,D,b,U,K,Z,B,X,ge,ne,ce,de,Ee,Ie,be;return j(function(Pe){switch(Pe.g){case 1:for(h=xt,p=[],m=0;m<i.length;m++)m>=o?p.push(new Set(i[m])):p.push(new Set);w=A(t),C=w.next();case 2:if(C.done){Pe.A(4);break}return _=C.value,k(Pe,vA(_,i,o,l,p),5);case 5:if(D=Pe.h,!D)throw new oe(2,4,4037);C=w.next(),Pe.A(2);break;case 4:for(b=A(p),U=b.next();!U.done;U=b.next())for(K=U.value,Z=A(K),B=Z.next();!B.done;B=Z.next())X=B.value,(ge=yA(X,i,u,l,p))&&t.push(ge);for(ne=A(p),U=ne.next();!U.done;U=ne.next())for(ce=U.value,de={},Ee=A(ce),B=Ee.next();!B.done;de={Va:de.Va},B=Ee.next())if(de.Va=B.value,Ie=de.Va.type==h.X&&!de.Va.language,be=de.Va.type==h.Wb&&!de.Va.tilesLayout,!Ie&&!be&&t.some(function(Ke){return function(Ze){return Ze.mimeType==Ke.Va.mimeType&&Bt(Ze.codecs)==Bt(Ke.Va.codecs)}}(de)))throw new oe(2,4,4037);return Pe.return(t)}})}function vA(t,i,o,u,l){return j(function(h){return h.g==1?(ix(i,t),t.matchedStreams?t.segmentIndex?k(h,nx(t,o),2):h.A(2):h.return(!1)):(l0(t,o,u,l),h.return(!0))})}function nx(t,i){var o,u,l,h,p,m,w;return j(function(C){if(C.g==1){for(o=[],u=t.matchedStreams,l=A(u),h=l.next();!h.done;h=l.next())p=h.value,o.push(p.createSegmentIndex()),p.trickModeVideo&&!p.trickModeVideo.segmentIndex&&o.push(p.trickModeVideo.createSegmentIndex());return k(C,Promise.all(o),2)}if(t.segmentIndex instanceof cn)for(m=0;m<u.length;m++)w=u[m],w.segmentIndex&&m>=i&&t.segmentIndex.l.push(w.segmentIndex);le(C)})}function yA(t,i,o,u,l){var h=o(t);return ix(i,h),h.createSegmentIndex&&(h.createSegmentIndex=function(){return j(function(p){return h.segmentIndex?p.A(0):(h.segmentIndex=new cn,k(p,nx(h,0),0))})}),h.matchedStreams?(l0(h,0,u,l),h):null}function l0(t,i,o,u){for(var l=t.matchedStreams,h=0;h<l.length;h++)if(h>=i){var p=l[h];o(t,p);var m=!0;t.type=="audio"&&Qo(t.language,p.language)==0&&(m=!1),m&&u[h].delete(p)}}function Hc(t){var i=Object.assign({},t);return i.originalId=null,i.createSegmentIndex=function(){return Promise.resolve()},i.closeSegmentIndex=function(){if(i.segmentIndex&&(i.segmentIndex.release(),i.segmentIndex=null),i.matchedStreams)for(var o=A(i.matchedStreams),u=o.next();!u.done;u=o.next())u=u.value,u.segmentIndex&&(u.segmentIndex.release(),u.segmentIndex=null)},i.segmentIndex=null,i.emsgSchemeIdUris=[],i.keyIds=new Set,i.closedCaptions=null,i.trickModeVideo=null,i}function vf(t){return t=Object.assign({},t),t.keyIds=new Set,t.segments=[],t.variantIds=[],t.closedCaptions=null,t}function Il(t,i){t.roles=Array.from(new Set(t.roles.concat(i.roles))),i.emsgSchemeIdUris&&(t.emsgSchemeIdUris=Array.from(new Set(t.emsgSchemeIdUris.concat(i.emsgSchemeIdUris)))),t.keyIds=function(h,p){return new Set([].concat(q(h),q(p)))}(t.keyIds,i.keyIds),t.originalId==null?t.originalId=i.originalId:t.originalId+=","+(i.originalId||"");var o=ih(t.drmInfos,i.drmInfos);if(i.drmInfos.length&&t.drmInfos.length&&!o.length)throw new oe(2,4,4038);if(t.drmInfos=o,t.encrypted=t.encrypted||i.encrypted,i.closedCaptions){t.closedCaptions||(t.closedCaptions=new Map),o=A(i.closedCaptions);for(var u=o.next();!u.done;u=o.next()){var l=A(u.value);u=l.next().value,l=l.next().value,t.closedCaptions.set(u,l)}}i.trickModeVideo?(t.trickModeVideo||(t.trickModeVideo=Hc(i.trickModeVideo),t.trickModeVideo.createSegmentIndex=function(){return t.trickModeVideo.segmentIndex=t.segmentIndex.clone(),Promise.resolve()}),Il(t.trickModeVideo,i.trickModeVideo)):t.trickModeVideo&&Il(t.trickModeVideo,i)}function yf(t,i){t.roles=Array.from(new Set(t.roles.concat(i.roles)));var o=i.keyIds;if(o=new Set([].concat(q(t.keyIds),q(o))),t.keyIds=o,t.encrypted=t.encrypted&&i.encrypted,t.segments.push.apply(t.segments,q(i.segments)),i.closedCaptions)for(t.closedCaptions||(t.closedCaptions=new Map),i=A(i.closedCaptions),o=i.next();!o.done;o=i.next()){var u=A(o.value);o=u.next().value,u=u.next().value,t.closedCaptions.set(o,u)}}function ix(t,i){var o=[];t=A(t);for(var u=t.next();!u.done;u=t.next()){var l=i,h={audio:c0,video:c0,text:Ks,image:xA}[l.type],p={audio:rx,video:TA,text:ox,image:Wc}[l.type],m=null;u=A(u.value);for(var w=u.next();!w.done;w=u.next())w=w.value,!h(l,w)||m&&!p(l,m,w)||(m=w);if(l=m,!l)return;o.push(l)}i.matchedStreams=o}function c0(t,i){var o;return!(o=i.mimeType!=t.mimeType||Bt(i.codecs)!=Bt(t.codecs))&&(o=t.drmInfos)&&(t=t.drmInfos,i=i.drmInfos,o=!(!(t.length&&i.length)||0<ih(t,i).length)),!o}function Ks(t,i){return t.language?i.language?!(Qo(t.language,i.language)==0||i.kind!=t.kind):!0:!1}function xA(t){return!!t.tilesLayout}function rx(t,i,o){if(t.id==o.id)return!0;var u=Qo(t.language,i.language),l=Qo(t.language,o.language);return l>u?!0:l<u?!1:t.roles.length?(u=i.roles.filter(function(h){return t.roles.includes(h)}),l=o.roles.filter(function(h){return t.roles.includes(h)}),l.length>u.length?!0:l.length<u.length?!1:o.roles.length<i.roles.length):!o.roles.length&&i.roles.length?!0:o.roles.length&&!i.roles.length?!1:!i.primary&&o.primary?!0:i.primary&&!o.primary?!1:(u=Hs(t.channelsCount,i.channelsCount,o.channelsCount),u==Dr?!0:u==ys?!1:(u=Hs(t.audioSamplingRate,i.audioSamplingRate,o.audioSamplingRate),u==Dr?!0:u==ys?!1:!!(t.bandwidth&&d0(t.bandwidth,i.bandwidth,o.bandwidth)==Dr)))}function TA(t,i,o){if(t.id==o.id)return!0;var u=Hs(t.width*t.height,i.width*i.height,o.width*o.height);if(u==Dr)return!0;if(u==ys)return!1;if(t.frameRate){if(u=Hs(t.frameRate,i.frameRate,o.frameRate),u==Dr)return!0;if(u==ys)return!1}return!!(t.bandwidth&&d0(t.bandwidth,i.bandwidth,o.bandwidth)==Dr)}function ox(t,i,o){if(t.id==o.id)return!0;var u=Qo(t.language,i.language),l=Qo(t.language,o.language);if(l>u)return!0;if(l<u)return!1;if(!i.primary&&o.primary)return!0;if(i.primary&&!o.primary)return!1;if(t.roles.length){if(u=i.roles.filter(function(h){return t.roles.includes(h)}),l=o.roles.filter(function(h){return t.roles.includes(h)}),l.length>u.length)return!0;if(l.length<u.length)return!1}else{if(!o.roles.length&&i.roles.length)return!0;if(o.roles.length&&!i.roles.length)return!1}return!(o.mimeType!=t.mimeType||o.codecs!=t.codecs||i.mimeType==t.mimeType&&i.codecs==t.codecs)}function Wc(t,i,o){return t.id==o.id?!0:Hs(t.width*t.height,i.width*i.height,o.width*o.height)==Dr}function qc(t){return{id:0,originalId:"",primary:!1,type:t,mimeType:"",codecs:"",language:"",label:null,width:null,height:null,encrypted:!1,keyIds:new Set,segments:[],variantIds:[],roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null}}function Zu(t){return{id:0,originalId:"",createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new _t([]),mimeType:"",codecs:"",encrypted:!1,drmInfos:[],keyIds:new Set,language:"",label:null,type:t,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null}}function Hs(t,i,o){if(i==t&&t!=o)return ys;if(o==t&&t!=i)return Dr;if(i>t){if(o<=t||o-t<i-t)return Dr;if(o-t>i-t)return ys}else{if(o>t)return ys;if(t-o<t-i)return Dr;if(t-o>t-i)return ys}return sx}function d0(t,i,o){return i=Math.abs(t-i),t=Math.abs(t-o),t<i?Dr:i<t?ys:sx}var Dr=1,sx=0,ys=-1;function Xc(){var t=this;this.h=this.g=null,this.m=[],this.i=null,this.G=1,this.l={},this.L={},this.j=new a0,this.F=0,this.H=new Fe(5),this.D=new ht(function(){dx(t)}),this.o=new es,this.s=null,this.J=[],this.u=1/0,this.B=!1}v=Xc.prototype,v.configure=function(t){this.g=t},v.start=function(t,i){var o=this,u;return j(function(l){if(l.g==1)return o.B=i.isLowLatencyMode(),o.m=[t],o.h=i,k(l,h0(o),2);if(u=l.h,o.h&&bo(o,u),!o.h)throw new oe(2,7,7001);return l.return(o.i)})},v.stop=function(){for(var t=A(Object.values(this.l)),i=t.next();!i.done;i=t.next())i=i.value,i.segmentIndex&&i.segmentIndex.release();return this.j&&this.j.release(),this.g=this.h=null,this.m=[],this.i=null,this.l={},this.j=null,this.D!=null&&(this.D.stop(),this.D=null),this.o.destroy()},v.update=function(){var t=this,i;return j(function(o){if(o.g==1)return ye(o,2),k(o,h0(t),4);if(o.g!=2)return _e(o,0);if(i=we(o),!t.h||!i)return o.return();t.h.onError(i),le(o)})},v.onExpirationUpdated=function(){};function h0(t){var i,o,u,l,h,p,m;return j(function(w){return w.g==1?(i=oi(t.m,t.g.retryParameters),o=t.h.networkingEngine,t.h.modifyManifestRequest(i,{format:"d"}),u=Date.now(),l=o.request(0,i),jt(t.o,l),k(w,l.promise,2)):w.g!=3?(h=w.h,t.h?(h.uri&&!t.m.includes(h.uri)&&t.m.unshift(h.uri),k(w,wA(t,h.data,h.uri),3)):w.return(0)):(p=Date.now(),m=(p-u)/1e3,t.H.sample(1,m),w.return(m))})}function wA(t,i,o){var u,l,h,p;return j(function(m){if(m.g==1){if(u=Co(i,"MPD"),!u)throw new oe(2,4,4001,o);return t.g.dash.disableXlinkProcessing?m.return(ux(t,u,o)):(l=t.g.dash.xlinkFailGracefully,h=Qu(u,t.g.retryParameters,l,o,t.h.networkingEngine),jt(t.o,h),k(m,h.promise,2))}return p=m.h,m.return(ux(t,p,o))})}function ux(t,i,o){var u,l,h,p,m,w,C,_,D,b,U,K,Z,B,X,ge,ne,ce,de,Ee,Ie,be,Pe,Ke,Ze,et,mt,qe,rn,lt;return j(function(sn){switch(sn.g){case 1:if((u=t.g.dash.manifestPreprocessor)&&u(i),l=[o],h=tn(i,"Location").map(Ba).filter(Hn),0<h.length&&(p=di(l,h),l=t.m=p),m=tn(i,"BaseURL"),w=m.map(Ba),C=di(l,w),_=0,m&&m.length&&(_=Ft(m[0],"availabilityTimeOffset",Fa)||0),D=t.g.dash.ignoreMinBufferTime,b=0,D||(b=Ft(i,"minBufferTime",os)||0),t.F=Ft(i,"minimumUpdatePeriod",os,-1),U=Ft(i,"availabilityStartTime",on),K=Ft(i,"timeShiftBufferDepth",os),Z=t.g.dash.ignoreSuggestedPresentationDelay,B=null,Z||(B=Ft(i,"suggestedPresentationDelay",os)),X=t.g.dash.ignoreMaxSegmentDuration,ge=null,X||(ge=Ft(i,"maxSegmentDuration",os)),ne=i.getAttribute("type")||"static",t.i)for(ce=t.i.presentationTimeline,de=A(Object.values(t.l)),Ee=de.next();!Ee.done;Ee=de.next())Ie=Ee.value,Ie.segmentIndex&&Ie.segmentIndex.eb(ce.Pa());else be=t.g.defaultPresentationDelay||1.5*b,Pe=B!=null?B:be,ce=new Ge(U,Pe,t.g.dash.autoCorrectDrift);return ce.yc(ne=="static"),ce.U()&&!isNaN(t.g.availabilityWindowOverride)&&(K=t.g.availabilityWindowOverride),K==null&&(K=1/0),ce.me(K),Ke=i.getAttribute("profiles")||"",Ze={Ma:ne!="static",presentationTimeline:ce,$:null,T:null,ea:null,I:null,bandwidth:0,Ke:!1,zb:_,profiles:Ke.split(",")},et=ax(t,Ze,C,i),mt=et.duration,qe=et.periods,ne!="static"&&et.De||ce.Aa(mt||1/0),t.u&&!t.B&&t.h.isAutoLowLatencyMode()&&(t.h.enableLowLatencyMode(),t.B=t.h.isLowLatencyMode()),t.B?ce.Ue(t.u):t.u&&ze("Low-latency DASH live stream detected, but low-latency streaming mode is not enabled in Shaka Player. Set streaming.lowLatencyMode configuration to true, and see https://bit.ly/3clctcj for details."),ce.Sd(ge||1),k(sn,fA(t.j,qe,Ze.Ma),2);case 2:if(t.i){t.i.variants=t.j.l,t.i.textStreams=t.j.j.slice(),t.i.imageStreams=t.j.i,t.h.filter(t.i),sn.A(3);break}if(t.i={presentationTimeline:ce,variants:t.j.l,textStreams:t.j.j.slice(),imageStreams:t.j.i,offlineSessionIds:[],minBufferTime:b||0,sequenceMode:t.g.dash.sequenceMode},!ce.df()){sn.A(4);break}return rn=tn(i,"UTCTiming"),k(sn,AA(t,C,rn),5);case 5:if(lt=sn.h,!t.h)return sn.return();ce.Ve(lt);case 4:ce.Md();case 3:t.h.makeTextStreamsForClosedCaptions(t.i),le(sn)}})}function ax(t,i,o,u){var l=Ft(u,"mediaPresentationDuration",os),h=[],p=0;u=tn(u,"Period");for(var m=0;m<u.length;m++){var w=u[m],C=u[m+1],_=Ft(w,"start",os,p),D=w.id,b=Ft(w,"duration",os),U=null;if(C){var K=Ft(C,"start",os);K!=null&&(U=K-_)}else l!=null&&(U=l-_);if(U==null&&(U=b),!(t.s!==null&&D!==null&&_!==null&&_<t.s)||t.J.includes(D)||m+1==u.length){if(_!==null&&(t.s===null||_>t.s)&&(t.s=_),p=lx(t,i,o,{start:_,duration:U,node:w,Gd:U==null||!C}),h.push(p),i.$.id&&U&&(t.L[i.$.id]=U),U==null){p=null;break}p=_+U}}return t.J=h.map(function(Z){return Z.id}),l!=null?{periods:h,duration:l,De:!1}:{periods:h,duration:p,De:!0}}function lx(t,i,o,u){i.$=Ju(u.node,null,o),i.T=u,i.$.zb=i.zb,i.$.id||(i.$.id="__shaka_period_"+u.start);var l=tn(u.node,"EventStream");o=i.presentationTimeline.Pa(),l=A(l);for(var h=l.next();!h.done;h=l.next())SA(t,u.start,u.duration,h.value,o);if(o=tn(u.node,"AdaptationSet").map(function(_){return cx(t,i,_)}).filter(Hn),i.Ma){for(u=[],l=A(o),h=l.next();!h.done;h=l.next()){h=A(h.value.qg);for(var p=h.next();!p.done;p=h.next())u.push(p.value)}if(u.length!=new Set(u).size)throw new oe(2,4,4018)}for(u=o.filter(function(_){return!_.qe}),o=o.filter(function(_){return _.qe}),o=A(o),l=o.next();!l.done;l=o.next()){l=l.value,h=l.qe.split(" "),p=A(u);for(var m=p.next();!m.done;m=p.next()){var w=m.value;if(h.includes(w.id)){m={},w=A(w.streams);for(var C=w.next();!C.done;m={Gc:m.Gc},C=w.next())m.Gc=C.value,m.Gc.trickModeVideo=l.streams.find(function(_){return function(D){return Bt(_.Gc.codecs)==Bt(D.codecs)}}(m))}}}if(l=t.g.disableAudio?[]:Ws(u,"audio"),p=t.g.disableVideo?[]:Ws(u,"video"),h=t.g.disableText?[]:Ws(u,Lt),o=t.g.disableThumbnails?[]:Ws(u,"image"),!p.length&&!l.length)throw new oe(2,4,4004);for(u=[],l=A(l),m=l.next();!m.done;m=l.next())u.push.apply(u,q(m.value.streams));for(l=[],p=A(p),m=p.next();!m.done;m=p.next())l.push.apply(l,q(m.value.streams));for(p=[],h=A(h),m=h.next();!m.done;m=h.next())p.push.apply(p,q(m.value.streams));for(h=[],o=A(o),m=o.next();!m.done;m=o.next())h.push.apply(h,q(m.value.streams));return{id:i.$.id,Kc:u,gd:l,textStreams:p,imageStreams:h}}function Ws(t,i){return t.filter(function(o){return o.contentType==i})}function cx(t,i,o){function u(Ee){switch(Ee){case 1:case 6:case 13:case 14:case 15:return"SDR";case 16:return"PQ";case 18:return"HLG"}}i.ea=Ju(o,i.$,null);var l=!1,h=tn(o,"Role"),p=h.map(function(Ee){return Ee.getAttribute("value")}).filter(Hn),m=void 0,w=i.ea.contentType==Lt;w&&(m="subtitle"),h=A(h);for(var C=h.next();!C.done;C=h.next()){C=C.value;var _=C.getAttribute("schemeIdUri");if(_==null||_=="urn:mpeg:dash:role:2011")switch(C=C.getAttribute("value"),C){case"main":l=!0;break;case"caption":case"subtitle":m=C}}var D;_=tn(o,"EssentialProperty"),h=null,C=!1,_=A(_);for(var b=_.next();!b.done;b=_.next()){b=b.value;var U=b.getAttribute("schemeIdUri");U=="http://dashif.org/guidelines/trickmode"?h=b.getAttribute("value"):U=="urn:mpeg:mpegB:cicp:TransferCharacteristics"?D=u(parseInt(b.getAttribute("value"),10)):C=!0}for(_=tn(o,"SupplementalProperty"),_=A(_),b=_.next();!b.done;b=_.next())b=b.value,b.getAttribute("schemeIdUri")=="urn:mpeg:mpegB:cicp:TransferCharacteristics"&&(D=u(parseInt(b.getAttribute("value"),10)));_=tn(o,"Accessibility");var K=new Map;for(_=A(_),b=_.next();!b.done;b=_.next())if(U=b.value,b=U.getAttribute("schemeIdUri"),U=U.getAttribute("value"),b=="urn:scte:dash:cc:cea-608:2015")if(b=1,U!=null){U=U.split(";");for(var Z=A(U),B=Z.next();!B.done;B=Z.next()){var X=B.value,ge=B=void 0;X.includes("=")?(X=X.split("="),B=X[0].startsWith("CC")?X[0]:"CC"+X[0],ge=X[1]||"und"):(B="CC"+b,U.length==2?b+=2:b++,ge=X),K.set(B,Mt(ge))}}else K.set("CC1","und");else if(b=="urn:scte:dash:cc:cea-708:2015")if(b=1,U!=null)for(U=A(U.split(";")),B=U.next();!B.done;B=U.next())B=B.value,X=Z=void 0,B.includes("=")?(B=B.split("="),Z="svc"+B[0],X=B[1].split(",")[0].split(":").pop()):(Z="svc"+b,b++,X=B),K.set(Z,Mt(X));else K.set("svc1","und");else b=="urn:mpeg:dash:role:2011"&&U!=null&&(p.push(U),U=="captions"&&(m="caption"));if(C)return null;C=tn(o,"ContentProtection");var ne=z1(C,t.g.dash.ignoreDrmInfo,t.g.dash.keySystemsByURI),ce=Mt(o.getAttribute("lang")||"und"),de=o.getAttribute("label");if((C=tn(o,"Label"))&&C.length&&(C=C[0],C.textContent&&(de=C.textContent)),C=tn(o,"Representation"),o=C.map(function(Ee){return(Ee=uo(t,i,ne,m,ce,de,l,p,K,Ee))&&(Ee.hdr=Ee.hdr||D),Ee}).filter(function(Ee){return!!Ee}),o.length==0){if(h=i.ea.contentType=="image",t.g.dash.ignoreEmptyAdaptationSet||w||h)return null;throw new oe(2,4,4003)}if(!i.ea.contentType||i.ea.contentType=="application")for(i.ea.contentType=hx(o[0].mimeType,o[0].codecs),w=A(o),_=w.next();!_.done;_=w.next())_.value.type=i.ea.contentType;for(w=A(o),_=w.next();!_.done;_=w.next())for(_=_.value,b=A(ne.drmInfos),U=b.next();!U.done;U=b.next())U=U.value,U.keyIds=U.keyIds&&_.keyIds?new Set([].concat(q(U.keyIds),q(_.keyIds))):U.keyIds||_.keyIds;return w=C.map(function(Ee){return Ee.getAttribute("id")}).filter(Hn),{id:i.ea.id||"__fake__"+t.G++,contentType:i.ea.contentType,language:ce,vh:l,streams:o,drmInfos:ne.drmInfos,qe:h,qg:w}}function uo(t,i,o,u,l,h,p,m,w,C){if(i.I=Ju(C,i.ea,null),t.u=Math.min(t.u,i.I.zb),!EA(i.I))return null;var _=i.T.start;i.bandwidth=Ft(C,"bandwidth",Sr)||0;var D=i.I.contentType,b=D==Lt||D=="application";D=D=="image";try{var U=function(Ie,be,Pe){return xf(t,Ie,be,Pe)};if(i.I.wc)var K=aA(i,U);else if(i.I.ab)K=u0(i,t.l);else if(i.I.xc)K=Q1(i,U,t.l,!!t.i,t.g.dash.initialSegmentLimit,t.L);else{var Z=i.I.wa,B=i.T.duration||0;K={Bb:function(){return Promise.resolve(Ch(_,B,Z))}}}}catch(Ie){if((b||D)&&Ie.code==4002)return null;throw Ie}U=tn(C,"ContentProtection"),U=ZE(U,o,t.g.dash.ignoreDrmInfo,t.g.dash.keySystemsByURI),U=new Set(U?[U]:[]);var X=!1;tn(C,"SupplementalProperty").some(function(Ie){return Ie.getAttribute("schemeIdUri")=="tag:dolby.com,2018:dash:EC3_ExtensionType:2018"&&Ie.getAttribute("value")=="JOC"})&&(X=!0);var ge=!1;b&&(ge=m.includes("forced_subtitle")||m.includes("forced-subtitle"));var ne;if(D&&((C=tn(C,"EssentialProperty").find(function(Ie){return["http://dashif.org/thumbnail_tile","http://dashif.org/guidelines/thumbnail_tile"].includes(Ie.getAttribute("schemeIdUri"))}))&&(ne=C.getAttribute("value")),!ne))return null;var ce;C=i.I.codecs,i.profiles.includes("http://dashif.org/guidelines/dash-if-uhd#hevc-hdr-pq10")&&(C.includes("hvc1.2.4.L153.B0")||C.includes("hev1.2.4.L153.B0"))&&(ce="PQ");var de=i.I.id?i.$.id+","+i.I.id:"",Ee={id:t.G++,originalId:i.I.id,createSegmentIndex:function(){var Ie,be;return j(function(Pe){if(Pe.g==1)return Ie=de&&i.Ma&&t.l[de]?t.l[de]:Ee,Ie.segmentIndex?Pe.A(0):(be=Ie,k(Pe,K.Bb(),3));be.segmentIndex=Pe.h,le(Pe)})},closeSegmentIndex:function(){Ee.segmentIndex&&(Ee.segmentIndex.release(),Ee.segmentIndex=null)},segmentIndex:null,mimeType:i.I.mimeType,codecs:i.I.codecs,frameRate:i.I.frameRate,pixelAspectRatio:i.I.pixelAspectRatio,bandwidth:i.bandwidth,width:i.I.width,height:i.I.height,kind:u,encrypted:0<o.drmInfos.length,drmInfos:o.drmInfos,keyIds:U,language:l,label:h,type:i.ea.contentType,primary:p,trickModeVideo:null,emsgSchemeIdUris:i.I.emsgSchemeIdUris,roles:m,forced:ge,channelsCount:i.I.ad,audioSamplingRate:i.I.audioSamplingRate,spatialAudio:X,closedCaptions:w,hdr:ce,tilesLayout:ne,matchedStreams:[]};return de&&i.Ma&&!t.l[de]&&(t.l[de]=Ee),Ee}function dx(t){var i,o;j(function(u){switch(u.g){case 1:return i=0,ye(u,2),k(u,h0(t),4);case 4:i=u.h,_e(u,3);break;case 2:o=we(u),t.h&&(o.severity=1,t.h.onError(o));case 3:if(!t.h)return u.return();bo(t,i),le(u)}})}function bo(t,i){0>t.F||t.D.N(Math.max(3,t.F-i,er(t.H)))}function Ju(t,i,o){i=i||{contentType:"",mimeType:"",codecs:"",emsgSchemeIdUris:[],frameRate:void 0,pixelAspectRatio:void 0,ad:null,audioSamplingRate:null,zb:0},o=o||i.wa;var u=tn(t,"BaseURL"),l=u.map(Ba),h=t.getAttribute("contentType")||i.contentType,p=t.getAttribute("mimeType")||i.mimeType,m=t.getAttribute("codecs")||i.codecs,w=Ft(t,"frameRate",nn)||i.frameRate,C=t.getAttribute("sar")||i.pixelAspectRatio,_=tn(t,"InbandEventStream"),D=i.emsgSchemeIdUris.slice();_=A(_);for(var b=_.next();!b.done;b=_.next())b=b.value.getAttribute("schemeIdUri"),D.includes(b)||D.push(b);_=tn(t,"AudioChannelConfiguration"),_=f0(_)||i.ad,b=Ft(t,"audioSamplingRate",rr)||i.audioSamplingRate,h||(h=hx(p,m));var U=rs(t,"SegmentBase"),K=rs(t,"SegmentTemplate"),Z=U&&Ft(U,"availabilityTimeOffset",Fa)||0,B=K&&Ft(K,"availabilityTimeOffset",Fa)||0;return u=u&&u.length&&Ft(u[0],"availabilityTimeOffset",Fa)||0,u=i.zb+u+Z+B,{wa:di(o,l),wc:U||i.wc,ab:rs(t,"SegmentList")||i.ab,xc:K||i.xc,width:Ft(t,"width",rr)||i.width,height:Ft(t,"height",rr)||i.height,contentType:h,mimeType:p,codecs:m,frameRate:w,pixelAspectRatio:C,emsgSchemeIdUris:D,id:t.getAttribute("id"),ad:_,audioSamplingRate:b,zb:u}}function f0(t){t=A(t);for(var i=t.next();!i.done;i=t.next()){var o=i.value;if((i=o.getAttribute("schemeIdUri"))&&(o=o.getAttribute("value")))switch(i){case"urn:mpeg:dash:outputChannelPositionList:2012":return o.trim().split(/ +/).length;case"urn:mpeg:dash:23003:3:audio_channel_configuration:2011":case"urn:dts:dash:audio_channel_configuration:2012":if(i=parseInt(o,10),!i)continue;return i;case"tag:dolby.com,2014:dash:audio_channel_configuration:2011":case"urn:dolby:dash:audio_channel_configuration:2011":if(i=parseInt(o,16),!i)continue;for(t=0;i;)i&1&&++t,i>>=1;return t;case"urn:mpeg:mpegB:cicp:ChannelConfiguration":if(i=[0,1,2,3,4,5,6,8,2,3,4,7,8,24,8,12,10,12,14,12,14],(o=parseInt(o,10))&&0<o&&o<i.length)return i[o]}}return null}function EA(t){var i=t.wc?1:0;return i+=t.ab?1:0,i+=t.xc?1:0,i==0?t.contentType==Lt||t.contentType=="application":(i!=1&&(t.wc&&(t.ab=null),t.xc=null),!0)}function p0(t,i,o,u){var l,h,p,m,w,C;return j(function(_){if(_.g==1)return l=di(i,[o]),h=oi(l,t.g.retryParameters),h.method=u,p=t.h.networkingEngine.request(4,h),jt(t.o,p),k(_,p.promise,2);if(m=_.h,u=="HEAD"){if(!m.headers||!m.headers.date)return _.return(0);w=m.headers.date}else w=an(m.data);return C=Date.parse(w),isNaN(C)?_.return(0):_.return(C-Date.now())})}function AA(t,i,o){var u,l,h,p,m,w,C,_;return j(function(D){switch(D.g){case 1:u=o.map(function(b){return{scheme:b.getAttribute("schemeIdUri"),value:b.getAttribute("value")}}),l=t.g.dash.clockSyncUri,!u.length&&l&&u.push({scheme:"urn:mpeg:dash:utc:http-head:2014",value:l}),h=A(u),p=h.next();case 2:if(p.done){D.A(4);break}switch(m=p.value,ye(D,5),w=m.scheme,C=m.value,w){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":return D.A(7);case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":return D.A(8);case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":return _=Date.parse(C),D.return(isNaN(_)?0:_-Date.now());case"urn:mpeg:dash:utc:http-ntp:2014":case"urn:mpeg:dash:utc:ntp:2014":case"urn:mpeg:dash:utc:sntp:2014":ze("NTP UTCTiming scheme is not supported");break;default:ze("Unrecognized scheme in UTCTiming element",w)}D.A(9);break;case 7:return k(D,p0(t,i,C,"HEAD"),10);case 10:return D.return(D.h);case 8:return k(D,p0(t,i,C,"GET"),11);case 11:return D.return(D.h);case 9:_e(D,3);break;case 5:we(D);case 3:p=h.next(),D.A(2);break;case 4:return ze("A UTCTiming element should always be given in live manifests! This content may not play on clients with bad clocks!"),D.return(0)}})}function SA(t,i,o,u,l){var h=u.getAttribute("schemeIdUri")||"",p=u.getAttribute("value")||"",m=Ft(u,"timescale",rr)||1;u=A(tn(u,"Event"));for(var w=u.next();!w.done;w=u.next()){w=w.value;var C=Ft(w,"presentationTime",rr)||0,_=Ft(w,"duration",rr)||0;C=C/m+i,_=C+_/m,o!=null&&(C=Math.min(C,i+o),_=Math.min(_,i+o)),_<l||(w={schemeIdUri:h,value:p,startTime:C,endTime:_,id:w.getAttribute("id")||"",eventElement:w},t.h.onTimelineRegionAdded(w))}}function xf(t,i,o,u){var l,h,p,m,w;return j(function(C){return C.g==1?(l=eo,h=xm(i,o,u,t.g.retryParameters),p=t.h.networkingEngine,m=p.request(l,h),jt(t.o,m),k(C,m.promise,2)):(w=C.h,C.return(w.data))})}function hx(t,i){return _a(ki(t,i))?Lt:t.split("/")[0]}pe("shaka.dash.DashParser",Xc),Mu.mpd=function(){return new Xc},Ir["application/dash+xml"]=function(){return new Xc},Ir["video/vnd.mpeg.dash.mpd"]=function(){return new Xc};function fx(t,i,o,u){this.h=t,this.type=i,this.g=o,this.segments=u||null}function g0(t,i,o,u){this.id=t,this.name=i,this.g=o,this.value=u===void 0?null:u}g0.prototype.toString=function(){function t(u){return u.name+"="+(isNaN(Number(u.value))?'"'+u.value+'"':u.value)}var i="#"+this.name,o=this.g?this.g.map(t):[];return this.value&&o.unshift(this.value),0<o.length&&(i+=":"+o.join(",")),i},g0.prototype.getAttribute=function(t){var i=this.g.filter(function(o){return o.name==t});return i.length?i[0]:null};function at(t,i,o){return(t=t.getAttribute(i))?t.value:o||null}function hn(t,i){if(t=t.getAttribute(i),!t)throw new oe(2,4,4023,i);return t.value}function px(t,i,o){o=o===void 0?[]:o,this.g=i,this.i=t,this.h=o}function gx(t,i){this.name=t,this.value=i}function ao(t,i){return t.filter(function(o){return o.name==i})}function mx(t,i){return t.filter(function(o){return hn(o,"TYPE")==i})}function mi(t,i){return t=ao(t,i),t.length?t[0]:null}function Tf(t,i){var o=0;return o=o===void 0?0:o,(t=mi(t,i))?Number(t.value):o}function ea(t,i){return di([t],[i])[0]}function qs(t){this.h=t,this.g=0}function Xs(t){Je(t,/[ \t]+/gm)}function Je(t,i){return i.lastIndex=t.g,i=i.exec(t.h),i=i==null?null:{position:i.index,length:i[0].length,results:i},t.g==t.h.length||i==null||i.position!=t.g?null:(t.g+=i.length,i.results)}function Yt(t){return t.g==t.h.length?null:(t=Je(t,/[^ \t\n]*/gm))?t[0]:null}function vx(){this.g=0}function wf(t,i,o){i=an(i),i=i.replace(/\r\n|\r(?=[^\n]|$)/gm,"\n").trim();var u=i.split(/\n+/m);if(!/^#EXTM3U($|[ \t\n])/m.test(u[0]))throw new oe(2,4,4015);i=0;for(var l=!0,h=A(u),p=h.next();!p.done;p=h.next())if(p=p.value,/^#(?!EXT)/m.test(p)||l)l=!1;else if(p=br(t,p),--t.g,m0.includes(p.name)){i=1;break}else p.name=="EXT-X-STREAM-INF"&&(l=!0);for(h=[],l=!0,p=0;p<u.length;p++){var m=u[p],w=u[p+1];if(/^#(?!EXT)/m.test(m)||l)l=!1;else{if(m=br(t,m),vi.includes(m.name)){if(i!=1)throw new oe(2,4,4017);var C=u.splice(p,u.length-p);u=o,l=[],p=[],w=[],m=null,C=A(C);for(var _=C.next();!_.done;_=C.next())_=_.value,/^(#EXT)/.test(_)?(_=br(t,_),m0.includes(_.name)?h.push(_):_.name=="EXT-X-MAP"?m=_:_.name=="EXT-X-PART"?w.push(_):_.name=="EXT-X-PRELOAD-HINT"?at(_,"TYPE")=="PART"?w.push(_):at(_,"TYPE")=="MAP"&&(_.name="EXT-X-MAP",m=_):p.push(_)):/^#(?!EXT)/m.test(_)||(_=ea(u,_.trim()),m&&p.push(m),l.push(new px(_,p,w)),p=[],w=[]);return w.length&&(m&&p.push(m),l.push(new px("",p,w))),new fx(o,i,h,l)}h.push(m),m.name=="EXT-X-STREAM-INF"&&(m.g.push(new gx("URI",w)),l=!0)}}return new fx(o,i,h)}function br(t,i){t=t.g++;var o=i.match(/^#(EXT[^:]*)(?::(.*))?$/);if(!o)throw new oe(2,4,4016,i);i=o[1];var u=o[2];o=[];var l;if(u){u=new qs(u);var h;(h=Je(u,/^([^,=]+)(?:,|$)/g))&&(l=h[1]);for(var p=/([^=]+)=(?:"([^"]*)"|([^",]*))(?:,|$)/g;h=Je(u,p);)o.push(new gx(h[1],h[2]||h[3])),Xs(u)}return new g0(t,i,o,l)}var m0="EXT-X-TARGETDURATION EXT-X-MEDIA-SEQUENCE EXT-X-DISCONTINUITY-SEQUENCE EXT-X-PLAYLIST-TYPE EXT-X-I-FRAMES-ONLY EXT-X-ENDLIST EXT-X-SERVER-CONTROL EXT-X-SKIP".split(" "),vi="EXTINF EXT-X-BYTERANGE EXT-X-DISCONTINUITY EXT-X-PROGRAM-DATE-TIME EXT-X-KEY EXT-X-DATERANGE EXT-X-MAP".split(" ");function Yc(){}function ta(t){try{var i=xs(t);return Zr({uri:t,Oe:t,data:i.data,headers:{"content-type":i.contentType}})}catch(o){return Ls(o)}}function xs(t){var i=t.split(":");if(2>i.length||i[0]!="data")throw new oe(2,1,1004,t);if(i=i.slice(1).join(":").split(","),2>i.length)throw new oe(2,1,1004,t);var o=i[0];t=S.decodeURIComponent(i.slice(1).join(",")),i=o.split(";"),o=i[0];var u=!1;1<i.length&&i[i.length-1]=="base64"&&(u=!0,i.pop());var l;return u?l=Bi(t):l=To(t),{data:l,contentType:o}}pe("shaka.net.DataUriPlugin",Yc),Yc.parse=ta,Jr("data",ta);function Po(){var t=this;this.g=this.i=null,this.Fa=1,this.o=new Map,this.u=new Map,this.F=new Map,this.F.set("video",new Map),this.F.set("audio",new Map),this.F.set(Lt,new Map),this.F.set("image",new Map),this.ua=new Set,this.h=new Map,this.j=null,this.M="",this.W=new vx,this.O=0,this.B=-1,this.H=1/0,this.Ga=!1,this.m=new ht(function(){Rx(t)}),this.ia=Df,this.D=null,this.ca=0,this.J=1/0,this.V=this.da=0,this.G=new es,this.L=new Map,this.s=new Map,this.ba=new Map,this.l=!1}v=Po.prototype,v.configure=function(t){this.g=t},v.start=function(t,i){var o=this,u;return j(function(l){return l.g==1?(o.i=i,o.l=i.isLowLatencyMode(),k(l,Mf(o,t),2)):l.g!=3?(u=l.h,o.M=u.uri,k(l,yx(o,u.data,t),3)):l.return(o.D)})},v.stop=function(){this.m&&(this.m.stop(),this.m=null);var t=[];return this.G&&(t.push(this.G.destroy()),this.G=null),this.g=this.i=null,this.ua.clear(),this.D=null,this.h.clear(),this.u.clear(),this.s.clear(),this.o.clear(),Promise.all(t)},v.update=function(){var t=this,i,o,u,l,h,p,m,w,C;return j(function(_){if(_.g==1){if(!Pr(t))return _.return();for(i=[],o=Array.from(t.h.values()),u=o.filter(function(D){return D.stream.segmentIndex}),l=A(u),h=l.next();!h.done;h=l.next())p=h.value,i.push(na(t,p));return k(_,Promise.all(i),2)}Ax(t,u.map(function(D){return D.stream})),m=u.some(function(D){return D.mc==0}),u.length&&!m&&(w=Or,_f(t,w.ff),C=o.map(function(D){return D.Ya}),t.j.Aa(Math.min.apply(Math,q(C))),t.i.updateDuration()),le(_)})};function Oo(t,i){return Pr(t)?t.F.get(i.type):i.$c}function na(t,i){var o,u,l,h,p,m,w,C,_,D,b,U,K,Z,B,X;return j(function(ge){if(ge.g==1)return o=i.Jc,u=new Si(o),t.l&&i.Mc&&vo(u,new Sa("_HLS_skip=YES")),k(ge,Mf(t,u.toString()),2);if(l=ge.h,!i.stream.segmentIndex)return ge.return();if(h=wf(t.W,l.data,l.uri),h.type!=1)throw new oe(2,4,4017);p=ao(h.g,"EXT-X-DEFINE"),m=y0(t,p),w=i.stream,C=Oo(t,i),_=Sf(h,w.mimeType),D=_.keyIds,b=_.drmInfos,U=function(ne,ce){return ne.size===ce.size&&[].concat(q(ne)).every(function(de){return ce.has(de)})},U(w.keyIds,D)||(w.keyIds=D,w.drmInfos=b,t.i.newDrmInfo(w)),K=_x(t,h,w.type,C,m),w.segmentIndex.Hb(K,t.j.Pa()),K.length&&(Z=Tf(h.g,"EXT-X-MEDIA-SEQUENCE"),B=C.get(Z),w.segmentIndex.eb(B)),X=K[K.length-1],mi(h.g,"EXT-X-ENDLIST")&&(i.mc=!0,i.Ya=X.endTime),le(ge)})}v.onExpirationUpdated=function(){};function IA(t,i){for(var o=t.B==-1,u=A(i),l=u.next();!l.done;l=u.next()){l=l.value;var h=l.stream.segmentIndex,p=Oo(t,l);if(h=h.g[0]||null){p=A(p);for(var m=p.next();!m.done;m=p.next()){m=A(m.value);var w=m.next().value;if(m.next().value==h.startTime){o&&(t.B=Math.max(t.B,w)),l.Cd=w;break}}}}if(!(0>t.B))for(i=A(i),l=i.next();!l.done;l=i.next())o=l.value,(u=o.stream.segmentIndex)&&(u.g.splice(0,t.B-o.Cd),(u=u.g[0]||null)&&(u=-u.startTime,o.stream.segmentIndex.offset(u),Ef(t,o,u)))}function v0(t,i){if(t.H==1/0){i=A(i);for(var o=i.next();!o.done;o=i.next()){var u=o.value.stream.segmentIndex.g[0]||null;u!=null&&u.g!=null&&(t.H=Math.min(t.H,u.g))}}if(i=t.H,i!=1/0)for(u=A(t.h.values()),o=u.next();!o.done;o=u.next()){o=o.value;var l=o.stream.segmentIndex;if(l!=null){var h=l.g[0]||null;if(h.g==null)Rn("Missing EXT-X-PROGRAM-DATE-TIME for stream",o.Ac,"Expect AV sync issues!");else for(Ef(t,o,h.g-i-h.startTime),o=A(l),l=o.next();!l.done;l=o.next())l.value.oe(i)}}}function Ef(t,i,o){i.Ya+=o,t=Oo(t,i),i=A(t);for(var u=i.next();!u.done;u=i.next()){var l=A(u.value);u=l.next().value,l=l.next().value,t.set(u,l+o)}}function yx(t,i,o){var u,l,h,p,m,w,C,_,D,b,U,K,Z,B,X,ge,ne,ce,de,Ee,Ie,be,Pe,Ke,Ze,et,mt,qe,rn,lt,sn,li;return j(function(mr){switch(mr.g){case 1:u=wf(t.W,i,t.M),l=ao(u.g,"EXT-X-DEFINE");for(var ho=A(l),Cn=ho.next();!Cn.done;Cn=ho.next()){var $n=Cn.value;Cn=at($n,"NAME"),$n=at($n,"VALUE"),Cn&&$n&&(t.o.has(Cn)||t.o.set(Cn,$n))}if(h=[],p=[],m=[],u.type==1)return Ee=t.g.hls.mediaPlaylistFullMimeType,u.segments.length&&(Ie=new Si(u.segments[0].i),be=Ie.qa.split(".").pop(),(Pe=_0[be])?Ee=Pe:be!=="ts"&&be!=="mp4"&&(Rf[be]?(Pe=Rf[be],Ke=t.g.hls.defaultAudioCodec,Ee=Pe+'; codecs="'+Ke+'"'):Ys[be]&&(Pe=Ys[be],Ze=t.g.hls.defaultVideoCodec,Ee=Pe+'; codecs="'+Ze+'"'))),et=Ee.split(";")[0],mt=et.split("/")[0],qe=$o(Ee),rn=new Map,k(mr,Sx(t,u,o,o,qe,mt,"",!0,"Media Playlist",null,rn,null,!1,!1,et),5);for(w=ao(u.g,"EXT-X-MEDIA"),C=ao(u.g,"EXT-X-STREAM-INF"),_=ao(u.g,"EXT-X-IMAGE-STREAM-INF"),D=ao(u.g,"EXT-X-SESSION-KEY"),ho=A(C),Cn=ho.next();!Cn.done;Cn=ho.next()){var fo=Cn.value;$n=at(fo,"AUDIO"),Cn=at(fo,"VIDEO");var Be=at(fo,"SUBTITLES");if(fo=wx(t,fo),Be){var Mv=xo(Lt,fo);t.s.set(Be,Mv),Hr(fo,Mv)}$n&&(Be=xo("audio",fo),Be||(Be=t.g.hls.defaultAudioCodec),t.s.set($n,Be)),Cn&&($n=xo("video",fo),$n||($n=t.g.hls.defaultVideoCodec),t.s.set(Cn,$n))}for(b=ao(u.g,"EXT-X-SESSION-DATA"),U=A(b),K=U.next();!K.done;K=U.next())Z=K.value,B=at(Z,"DATA-ID"),X=at(Z,"URI"),ge=at(Z,"LANGUAGE"),ne=at(Z,"VALUE"),ce=new Map().set("id",B),X&&ce.set("uri",ea(t.M,X)),ge&&ce.set("language",ge),ne&&ce.set("value",ne),de=new dt("sessiondata",ce),t.i&&t.i.onEvent(de);for($c(t,w),ho=mx(w,"CLOSED-CAPTIONS"),ho=A(ho),Cn=ho.next();!Cn.done;Cn=ho.next())Be=Cn.value,Cn=w0(Be),$n=hn(Be,"GROUP-ID"),Be=hn(Be,"INSTREAM-ID"),t.L.get($n)||t.L.set($n,new Map),t.L.get($n).set(Be,Cn);return h=T0(t,C,D),p=Tx(t,w),k(mr,x0(t,_),4);case 4:m=mr.h,mr.A(3);break;case 5:lt=mr.h,t.h.set(o,lt),h.push({id:0,language:"und",disabledUntilTime:0,primary:!0,audio:mt=="audio"?lt.stream:null,video:mt=="video"?lt.stream:null,bandwidth:0,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]});case 3:if(!t.i)throw new oe(2,7,7001);t.j=new Ge(null,0),t.j.yc(!0),u.type==1&&(Pr(t)&&(kx(t),sn=t.O,t.m.N(sn)),li=Array.from(t.h.values()),S0(t,li),xx(t)),t.D={presentationTimeline:t.j,variants:h,textStreams:p,imageStreams:m,offlineSessionIds:[],minBufferTime:0,sequenceMode:!0},t.i.makeTextStreamsForClosedCaptions(t.D),le(mr)}})}function xx(t){if(Pr(t)){if(t.O=t.J,t.ia==R0){var i=A0(t);t.g.hls.useSafariBehaviorForLive&&(i=t.j.m),isNaN(t.g.availabilityWindowOverride)||(i=t.g.availabilityWindowOverride),t.j.me(i)}}else t.j.Aa(A0(t));t.j.Md()}function y0(t,i){var o=new Map;i=A(i);for(var u=i.next();!u.done;u=i.next()){var l=u.value;u=at(l,"NAME");var h=at(l,"VALUE");l=at(l,"IMPORT"),u&&h&&o.set(u,h),l&&(u=t.o.get(l))&&o.set(l,u)}return o}function Tx(t,i){var o=mx(i,"SUBTITLES");i=o.map(function(p){if(t.g.disableText)return null;try{return E0(t,p).stream}catch(m){if(t.g.hls.ignoreTextStreamFailures)return null;throw m}}),o=A(o);for(var u=o.next();!u.done;u=o.next()){var l=hn(u.value,"GROUP-ID");if((u=t.s.get(l))&&(l=t.u.get(l))){l=A(l);for(var h=l.next();!h.done;h=l.next())h=h.value,h.stream.codecs=u,h.stream.mimeType=Cf(Lt,u)||kf(Lt)}}return i.filter(function(p){return p})}function x0(t,i){var o,u;return j(function(l){return l.g==1?(o=i.map(function(h){var p,m;return j(function(w){if(w.g==1)return t.g.disableThumbnails?w.return(null):(ye(w,2),k(w,kA(t,h),4));if(w.g!=2)return p=w.h,w.return(p.stream);if(m=we(w),t.g.hls.ignoreImageStreamFailures)return w.return(null);throw m})}),k(l,Promise.all(o),2)):(u=l.h,l.return(u.filter(function(h){return h})))})}function $c(t,i){i=i.filter(function(u){var l=at(u,"URI")||"";return at(u,"TYPE")!="SUBTITLES"&&l!=""}),i=A(i);for(var o=i.next();!o.done;o=i.next())E0(t,o.value)}function T0(t,i,o){var u=[],l=new Set;if(0<o.length){o=A(o);for(var h=o.next();!h.done;h=o.next()){h=h.value;var p=hn(h,"METHOD");if(p!="NONE"&&p!="AES-128"&&(p=at(h,"KEYFORMAT")||"identity",h=(p=Nf[p])?p(h,""):null)){if(h.keyIds){p=A(h.keyIds);for(var m=p.next();!m.done;m=p.next())l.add(m.value)}u.push(h)}}}return i=i.map(function(w){var C=at(w,"FRAME-RATE"),_=Number(at(w,"AVERAGE-BANDWIDTH"))||Number(hn(w,"BANDWIDTH")),D=at(w,"RESOLUTION");D=A(D?D.split("x"):[null,null]);var b=D.next().value,U=D.next().value,K=at(w,"VIDEO-RANGE");w=CA(t,w),D=w.audio,w=w.video;for(var Z=A(w),B=Z.next();!B.done;B=Z.next())(B=B.value.stream)&&(B.width=Number(b)||void 0,B.height=Number(U)||void 0,B.frameRate=Number(C)||void 0,B.hdr=K||void 0);for(C=t.g.disableAudio,(!D.length||C)&&(D=[null]),C=t.g.disableVideo,(!w.length||C)&&(w=[null]),C=[],D=A(D),b=D.next();!b.done;b=D.next())for(b=b.value,U=A(w),K=U.next();!K.done;K=U.next()){var X=K.value;(K=b?b.stream:null)&&(K.drmInfos=u,K.keyIds=l),(Z=X?X.stream:null)&&(Z.drmInfos=u,Z.keyIds=l),B=b?b.stream.drmInfos:null;var ge=X?X.stream.drmInfos:null;X=(X?X.Ac:"")+" - "+(b?b.Ac:""),K&&Z&&B.length&&ge.length&&!(0<ih(B,ge).length)||t.ua.has(X)||(K={id:t.Fa++,language:K?K.language:"und",primary:!!K&&K.primary||!!Z&&Z.primary,audio:K,video:Z,bandwidth:_,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]},C.push(K),t.ua.add(X))}return C}).reduce(Kl,[]),i=i.filter(function(w){return w!=null})}function CA(t,i){var o=wx(t,i),u=at(i,"AUDIO"),l=at(i,"VIDEO"),h=u||l;h=h&&t.u.has(h)?t.u.get(h):[],u={audio:u?h:[],video:l?h:[]},l=!1;var p=hn(i,"URI"),m=u.audio.find(function(_){return _&&_.Ac==p}),w=xo("video",o),C=xo("audio",o);return C&&!w?h="audio":!h.length&&C&&w?(h="video",o=[[w,C].join()]):u.audio.length&&m?(h="audio",l=!0):h=u.video.length&&!u.audio.length?"audio":"video",l||(t=Ex(t,i,o,h),u[t.stream.type]=[t]),u}function wx(t,i){var o=[];t.g.disableVideo||o.push(t.g.hls.defaultVideoCodec),t.g.disableAudio||o.push(t.g.hls.defaultAudioCodec),o=at(i,"CODECS",o.join(",")).split(/\s*,\s*/),t=new Set,i=[],o=A(o);for(var u=o.next();!u.done;u=o.next()){u=u.value;var l=$r(u)[0];t.has(l)||(i.push(u),t.add(l))}return i}function w0(t){return t=at(t,"LANGUAGE")||"und",Mt(t)}function E0(t,i){var o=hn(i,"GROUP-ID"),u="",l=hn(i,"TYPE").toLowerCase();l=="subtitles"&&(l=Lt);var h=l;if(h!=Lt&&o&&t.s.has(o)&&(u=t.s.get(o)),l=ia(hn(i,"URI"),t.o),t.h.has(l))return t.h.get(l);var p=w0(i),m=at(i,"NAME"),w=at(i,"DEFAULT")=="YES",C=h=="audio"&&(C=at(i,"CHANNELS"))?parseInt(C.split("/")[0],10):null,_=h=="audio"&&(_=at(i,"CHANNELS"))?_.includes("/JOC"):!1,D=at(i,"CHARACTERISTICS");return i=at(i,"FORCED")=="YES",u=Af(t,l,u,h,p,w,m,C,null,D,i,_),t.u.has(o)?t.u.get(o).push(u):t.u.set(o,[u]),t.h.has(l)?t.h.get(l):(t.h.set(l,u),u)}function kA(t,i){var o,u,l,h,p,m,w,C,_,D;return j(function(b){return b.g==1?(o=ia(hn(i,"URI"),t.o),u=at(i,"CODECS","jpeg")||"",t.h.has(o)?b.return(t.h.get(o)):(l=w0(i),h=at(i,"NAME"),p=at(i,"CHARACTERISTICS"),m=Af(t,o,u,"image",l,!1,h,null,null,p,!1,!1),t.h.has(o)?b.return(t.h.get(o)):(w=at(i,"RESOLUTION"))?k(b,m.stream.createSegmentIndex(),3):b.A(2))):(b.g!=2&&(C=m.stream.segmentIndex.get(0),_=C.tilesLayout)&&(m.stream.width=Number(w.split("x")[0])*Number(_.split("x")[0]),m.stream.height=Number(w.split("x")[1])*Number(_.split("x")[1])),(D=at(i,"BANDWIDTH"))&&(m.stream.bandwidth=Number(D)),t.h.set(o,m),b.return(m))})}function Ex(t,i,o,u){var l=ia(hn(i,"URI"),t.o);return t.h.has(l)||(i=at(i,"CLOSED-CAPTIONS"),i=u=="video"&&i&&i!="NONE"?t.L.get(i):null,o=Ii(u,o),u=Af(t,l,o,u,"und",!1,null,null,i,null,!1,!1),t.h.has(l))?t.h.get(l):(t.h.set(l,u),u)}function Af(t,i,o,u,l,h,p,m,w,C,_,D){function b(ge){var ne,ce,de,Ee,Ie,be,Pe,Ke,Ze,et,mt,qe,rn;return j(function(lt){if(lt.g==1)return k(lt,Mf(t,Z.Jc),2);if(lt.g!=3)return ne=lt.h,ge.aborted?lt.return():(ce=ne.uri,de=wf(t.W,ne.data,ce),Ee=Pr(t),k(lt,Sx(t,de,i,ce,o,u,l,h,p,m,w,C,_,D),3));if(Ie=lt.h,ge.aborted)return lt.return();if(be=Ie.stream,Pr(t)&&!Ee&&kx(t),Z.Jc=ce,Z.Ya=Ie.Ya,Z.Mc=Ie.Mc,Z.mc=Ie.mc,Z.$c=Ie.$c,Z.Ld=!0,K.segmentIndex=be.segmentIndex,K.encrypted=be.encrypted,K.drmInfos=be.drmInfos,K.keyIds=be.keyIds,K.mimeType=be.mimeType,Cr.includes(K.mimeType)&&(K.codecs=""),K.drmInfos.length&&t.i.newDrmInfo(K),Pe=xt,u==Pe.va||u==Pe.Hc)for(Ke=A(t.h.values()),Ze=Ke.next();!Ze.done;Ze=Ke.next())et=Ze.value,et.Ld||et.type!=u||(et.stream.mimeType=be.mimeType,Cr.includes(et.stream.mimeType)&&(et.stream.codecs=""));MA(t)&&(t.Ga?S0(t,[Z]):(t.Ga=!0,mt=Array.from(t.h.values()),qe=mt.filter(function(sn){return sn.stream.segmentIndex}),S0(t,qe),xx(t),rn=t.O,0<rn&&t.m.N(rn))),le(lt)})}var U=ea(t.M,i),K=I0(t,o,u,l,h,p,m,w,C,_,D);Cr.includes(K.mimeType)&&(K.codecs="");var Z={stream:K,type:u,Ac:i,Jc:U,Ya:0,$c:new Map,Mc:!1,mc:!1,Cd:-1,Ld:!1},B=null,X=new AbortController;return K.createSegmentIndex=function(){return B||(X=new AbortController,B=new Promise(function(ge){ge(b(X.signal))}))},K.closeSegmentIndex=function(){B&&!K.segmentIndex&&X.abort(),K.segmentIndex&&(K.segmentIndex.release(),K.segmentIndex=null),B=null},Z}function A0(t){var i=1/0;t=A(t.h.values());for(var o=t.next();!o.done;o=t.next())o=o.value,o.stream.segmentIndex&&o.stream.type!="text"&&(i=Math.min(i,o.Ya));return i}function Ax(t,i){var o=[];i=A(i);for(var u=i.next();!u.done;u=i.next())u=u.value,u.segmentIndex&&Jy(u.segmentIndex,function(l){o.push(l)});t.j.Ib(o)}function S0(t,i){if(!Pr(t))for(var o=A0(t),u=A(i),l=u.next();!l.done;l=u.next())l.value.stream.segmentIndex.Wa(0,o);for(o=A(i),l=o.next();!l.done;l=o.next())l=l.value.stream,Cr.includes(l.mimeType)&&(l.codecs="");Ax(t,i.map(function(h){return h.stream})),t.g.hls.ignoreManifestProgramDateTime?IA(t,i):v0(t,i)}function MA(t){if(!t.D)return!1;var i=[],o=[];t=A(t.D.variants);for(var u=t.next();!u.done;u=t.next())u=u.value,u.video&&i.push(u.video),u.audio&&o.push(u.audio);return!(0<i.length&&!i.some(function(l){return l.segmentIndex})||0<o.length&&!o.some(function(l){return l.segmentIndex}))}function Sx(t,i,o,u,l,h,p,m,w,C,_,D,b,U,K){var Z,B,X,ge,ne,ce,de,Ee,Ie,be,Pe,Ke,Ze,et,mt;return j(function(qe){if(qe.g==1){if(i.type!=1)throw new oe(2,4,4017);return Z=ao(i.g,"EXT-X-DEFINE"),B=y0(t,Z),Cx(t,i),K?qe.A(2):k(qe,_A(t,h,l,i,B),3)}if(qe.g!=2&&(K=qe.h),X=Sf(i,K),ge=X.drmInfos,ne=X.keyIds,ce=X.encrypted,de=X.kf,ce&&!ge.length&&!de)throw new oe(2,4,4026);return Ee=Pr(t)?t.F.get(h):new Map,Ie=t.l,be=_x(t,i,h,Ee,B),Ie!=t.l&&Cx(t,i),Pe=be[be.length-1].endTime,Ke=new _t(be),et=(Ze=mi(i.g,"EXT-X-SERVER-CONTROL"))?Ze.getAttribute("CAN-SKIP-UNTIL")!=null:!1,mt=I0(t,l,h,p,m,w,C,_,D,b,U),mt.segmentIndex=Ke,mt.encrypted=ce,mt.drmInfos=ge,mt.keyIds=ne,mt.mimeType=K,qe.return({stream:mt,type:h,Ac:o,Jc:u,Ya:Pe,Mc:et,mc:!1,Cd:-1,$c:Ee,Ld:!1})})}function I0(t,i,o,u,l,h,p,m,w,C,_){var D=Cf(o,i)||kf(o);return{id:t.Fa++,originalId:h,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:null,mimeType:D,codecs:i,kind:o==Lt?"subtitle":void 0,encrypted:!1,drmInfos:[],keyIds:new Set,language:u,label:h,type:o,primary:l,trickModeVideo:null,emsgSchemeIdUris:null,frameRate:void 0,pixelAspectRatio:void 0,width:void 0,height:void 0,bandwidth:void 0,roles:w?w.split(","):[],forced:C,channelsCount:p,audioSamplingRate:null,spatialAudio:_,closedCaptions:m,hdr:void 0,tilesLayout:void 0}}function Sf(t,i){var o=[];if(t.segments){t=A(t.segments);for(var u=t.next();!u.done;u=t.next())u=ao(u.value.g,"EXT-X-KEY"),o.push.apply(o,q(u))}u=t=!1;var l=[],h=new Set;o=A(o);for(var p=o.next();!p.done;p=o.next()){p=p.value;var m=hn(p,"METHOD");if(m!="NONE"){if(t=!0,m=="AES-128")u=!0;else if(m=at(p,"KEYFORMAT")||"identity",p=(m=Nf[m])?m(p,i):null){if(p.keyIds){m=A(p.keyIds);for(var w=m.next();!w.done;w=m.next())h.add(w.value)}l.push(p)}}}return{drmInfos:l,keyIds:h,encrypted:t,kf:u}}function Ix(t,i,o){if(!S.crypto||!S.crypto.subtle)throw ze("Web Crypto API is not available to decrypt AES-128. (Web Crypto only exists in secure origins like https)"),new oe(2,4,4042);var u=0,l=at(i,"IV","");if(l){var h=qo(l.substr(2));if(h.byteLength!=16)throw new oe(2,4,4043)}else u=Tf(o.g,"EXT-X-MEDIA-SEQUENCE");i=ea(o.h,hn(i,"URI"));var p=oi([i],t.g.retryParameters),m={method:"AES-128",iv:h,firstMediaSequenceNumber:u,fetchKey:function(){var w,C,_;return j(function(D){if(D.g==1)return k(D,M0(t,p,6),2);if(D.g!=3){if(w=D.h,!w.data||w.data.byteLength!=16)throw new oe(2,4,4044);return C={name:"AES-CBC"},_=m,k(D,S.crypto.subtle.importKey("raw",w.data,C,!0,["decrypt"]),3)}_.cryptoKey=D.h,m.fetchKey=void 0,le(D)})}};return m}function Cx(t,i){var o=mi(i.g,"EXT-X-PLAYLIST-TYPE"),u=mi(i.g,"EXT-X-ENDLIST");if(u=o&&o.value=="VOD"||u,o=o&&o.value=="EVENT"&&!u,o=!u&&!o,u)_f(t,Df);else{if(o?_f(t,R0):_f(t,bf),u=mi(i.g,"EXT-X-TARGETDURATION"),!u)throw new oe(2,4,4024,"EXT-X-TARGETDURATION");u=Number(u.value),o=mi(i.g,"EXT-X-PART-INF"),t.l&&o?(t.da=Number(hn(o,"PART-TARGET")),t.J=Math.min(t.da,t.J),i=mi(i.g,"EXT-X-SERVER-CONTROL"),t.V=i?Number(hn(i,"PART-HOLD-BACK")):0):t.J=Math.min(u,t.J),t.ca=Math.max(u,t.ca)}}function kx(t){var i=t.g.defaultPresentationDelay?t.g.defaultPresentationDelay:t.V?t.V:t.ca*t.g.hls.liveSegmentsDelay;t.j.Xe(0),t.j.We(i),t.j.yc(!1)}function C0(t,i,o,u){if(o=mi(o,"EXT-X-MAP"),!o)return null;var l=hn(o,"URI");return u=ia(ea(i,l),u),i=[u,at(o,"BYTERANGE","")].join("-"),t.ba.has(i)||(o=k0(u,o),t.ba.set(i,o)),t.ba.get(i)}function k0(t,i){var o=0,u=null;return(i=at(i,"BYTERANGE"))&&(o=i.split("@"),u=Number(o[0]),o=Number(o[1]),u=o+u-1),new sr(function(){return[t]},o,u)}function Mx(t,i,o,u,l,h,p,m,w){var C=u.g,_=ia(u.i,h),D=mi(C,"EXTINF"),b=h=0,U=null;u.h.length&&!t.l&&ze("Low-latency HLS live stream detected, but low-latency streaming mode is not enabled in Shaka Player. Set streaming.lowLatencyMode configuration to true, and see https://bit.ly/3clctcj for details.");var K=null;if(!t.g.hls.ignoreManifestProgramDateTime){var Z=mi(C,"EXT-X-PROGRAM-DATE-TIME");Z&&Z.value&&(K=on(Z.value))}if(Z=Za,mi(C,"EXT-X-GAP")&&(Z=2),!D){if(u.h.length==0)throw new oe(2,4,4024,"EXTINF");if(!t.l)return null}var B=[];if(t.l)for(var X={},ge=0;ge<u.h.length;X={pd:X.pd},ge++){var ne=u.h[ge],ce=ge==0?o:B[B.length-1],de=ge==0?l:ce.endTime,Ee=Number(at(ne,"DURATION"))||t.da;if(Ee){Ee=de+Ee;var Ie=0,be=null;ne.name=="EXT-X-PRELOAD-HINT"?Ie=(Ie=at(ne,"BYTERANGE-START"))?Number(Ie):0:(Ie=at(ne,"BYTERANGE"),be=A(If(ce,Ie)),Ie=be.next().value,be=be.next().value),(ce=at(ne,"URI"))&&(X.pd=ea(p,ce),ce=Za,at(ne,"GAP")=="YES"&&(ce=2),B.push(new St(de,Ee,function(Pe){return function(){return[Pe.pd]}}(X),Ie,be,i,0,0,1/0,[],"",null,null,ce)))}}return D?h=l+Number(D.value.split(",")[0]):h=B[B.length-1].endTime,(t=mi(C,"EXT-X-BYTERANGE"))?(U=A(If(o,t.value)),b=U.next().value,U=U.next().value):B.length&&(b=B[0].Ba,U=B[B.length-1].ka),o="",t=null,m=="image"&&(o="1x1",m=mi(C,"EXT-X-TILES"))&&(o=hn(m,"LAYOUT"),(m=at(m,"DURATION"))&&(t=Number(m))),new St(l,h,function(){return _.length?[_]:[]},b,U,i,0,0,1/0,B,o,t,K,Z,w)}function If(t,i){var o=0,u=null;return i&&(o=i.split("@"),i=Number(o[0]),o=o[1]?Number(o[1]):t.ka+1,u=o+i-1),[o,u]}function _x(t,i,o,u,l){var h=i.segments,p=void 0,m=Tf(i.g,"EXT-X-DISCONTINUITY-SEQUENCE"),w=Tf(i.g,"EXT-X-MEDIA-SEQUENCE"),C=mi(i.g,"EXT-X-SKIP");C=C?Number(at(C,"SKIPPED-SEGMENTS")):0;var _=w+C,D=0;Pr(t)&&u.has(_)&&(D=u.get(_));for(var b=[],U=null,K=0;K<h.length;K++){var Z=h[K],B=K==0?D:U.endTime;_=w+C+K,mi(Z.g,"EXT-X-DISCONTINUITY")&&m++;for(var X=A(Z.g),ge=X.next();!ge.done;ge=X.next())ge=ge.value,ge.name=="EXT-X-KEY"&&(hn(ge,"METHOD")=="AES-128"?p=Ix(t,ge,i):p=void 0);u.set(_,B),X=C0(t,i.h,Z.g,l),!t.l&&t.i.isAutoLowLatencyMode()&&(t.i.enableLowLatencyMode(),t.l=t.i.isLowLatencyMode()),(U=Z=Mx(t,X,U,Z,B,l,i.h,o,p))&&(Z.m=m,t.g.hls.ignoreManifestProgramDateTime&&t.B!=null&&_<t.B||b.push(Z))}if(i=b.some(function(ne){return ne.g!=null})){for(o={},u=0;u<b.length;o={Qb:o.Qb,Pb:o.Pb,Bc:o.Bc,Ta:o.Ta,Ob:o.Ob},u++)if(o.Ta=b[u],o.Ta.g==null)for(o.Pb=0,o.Qb=u,l=function(ne){return function(){var ce=b[ne.Qb];if(ce){if(ce.g!=null)return ce.g+ne.Pb;ne.Pb-=ce.endTime-ce.startTime,ne.Qb+=1}return null}}(o),o.Ob=0,o.Bc=u,h=function(ne){return function(){var ce=b[ne.Bc];if(ce){if(ce!=ne.Ta&&(ne.Ob+=ce.endTime-ce.startTime),ce.g!=null)return ce.g+ne.Ob;--ne.Bc}return null}}(o);o.Ta.g==null;)o.Ta.g=h(),o.Ta.g==null&&(o.Ta.g=l())}if(i)for(o=A(b),u=o.next();!u.done;u=o.next())for(l=u.value,u=l.g,l=A(l.i),h=l.next();!h.done;h=l.next())h=h.value,h.g=u,u+=h.endTime-h.startTime;if(t=t.H,i&&t!=1/0)for(i=A(b),u=i.next();!u.done;u=i.next())u.value.oe(t);return b}function ia(t,i){t=String(t).replace(/%7B/g,"{").replace(/%7D/g,"}");var o=t.match(/{\$\w*}/g);if(o){o=A(o);for(var u=o.next();!u.done;u=o.next()){u=u.value;var l=u.slice(2,u.length-1),h=i.get(l);if(h)t=t.replace(u,h);else throw new oe(2,4,4039,l)}}return t}function Cf(t,i){if(t==Lt){if(i=="vtt"||i=="wvtt")return"text/vtt";if(i&&i!=="")return"application/mp4"}return t!="image"||i&&i!="jpeg"?t=="audio"&&i=="mp4a.40.34"?"audio/mpeg":null:"image/jpeg"}function kf(t){return t==Lt?"text/vtt":Lf[t].mp4}function _A(t,i,o,u,l){var h,p,m,w,C,_,D,b,U,K;return j(function(Z){return Z.g==1?(h=eo,p=Math.trunc((u.segments.length-1)/2),m=ia(u.segments[p].i,l),w=new Si(m),C=w.qa.split(".").pop(),_=Lf[i],(D=_[C])||(D=_0[C])||(D=Cf(i,o))?Z.return(D):(b=oi([m],t.g.retryParameters),b.method="HEAD",k(Z,M0(t,b,h),2))):(U=Z.h,(K=U.headers["content-type"])?Z.return(K.split(";")[0]):Z.return(kf(i)))})}function Mf(t,i){return i=oi([i],t.g.retryParameters),t.i.modifyManifestRequest(i,{format:"h"}),M0(t,i,0)}function Rx(t){var i,o;j(function(u){if(u.g==1)return t.i?(ye(u,2),k(u,t.update(),4)):u.return();if(u.g!=2)return Pr(t)&&(i=t.O,t.m.N(i)),_e(u,0);if(o=we(u),!t.i)return u.return();o.severity=1,t.i.onError(o),t.m.N(.1),le(u)})}function Pr(t){return t.ia!=Df}function _f(t,i){t.ia=i,t.j&&t.j.yc(!Pr(t)),Pr(t)||t.m.stop()}function M0(t,i,o){if(!t.G)throw new oe(2,7,7001);return i=t.i.networkingEngine.request(o,i),jt(t.G,i),i.promise}pe("shaka.hls.HlsParser",Po);var _0={aac:"audio/aac",ac3:"audio/ac3",ec3:"audio/ec3",mp3:"audio/mpeg"},Rf={mp4:"audio/mp4",mp4a:"audio/mp4",m4s:"audio/mp4",m4i:"audio/mp4",m4a:"audio/mp4",m4f:"audio/mp4",cmfa:"audio/mp4",ts:"video/mp2t"},Ys={mp4:"video/mp4",mp4v:"video/mp4",m4s:"video/mp4",m4i:"video/mp4",m4v:"video/mp4",m4f:"video/mp4",cmfv:"video/mp4",ts:"video/mp2t"},Lf={audio:Rf,video:Ys,text:{mp4:"application/mp4",m4s:"application/mp4",m4i:"application/mp4",m4f:"application/mp4",cmft:"application/mp4",vtt:"text/vtt",webvtt:"text/vtt",ttml:"application/ttml+xml"},image:{jpg:"image/jpeg",png:"image/png",svg:"image/svg+xml",webp:"image/webp",avif:"image/avif"}},Nf={"com.apple.streamingkeydelivery":function(t,i){if(i=="video/mp2t")throw new oe(2,4,4040);if(S.shakaMediaKeysPolyfill)throw new oe(2,4,4041);return Ss("com.apple.fps",[{initDataType:"sinf",initData:new Uint8Array(0),keyId:null}])},"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":function(t){var i=hn(t,"METHOD");return["SAMPLE-AES","SAMPLE-AES-CTR"].includes(i)?(i=hn(t,"URI"),i=xs(i),i=$e(i.data),i=Ss("com.widevine.alpha",[{initDataType:"cenc",initData:i}]),(t=at(t,"KEYID"))&&(i.keyIds=new Set([t.toLowerCase().substr(2)])),i):null},"com.microsoft.playready":function(t){var i=hn(t,"METHOD");return["SAMPLE-AES","SAMPLE-AES-CTR"].includes(i)?(t=hn(t,"URI"),t=xs(t),t=$e(t.data),i=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]),t=Zd(t,i,new Set,0),Ss("com.microsoft.playready",[{initDataType:"cenc",initData:t}])):null},identity:function(t){return t=hn(t,"METHOD"),["SAMPLE-AES","SAMPLE-AES-CTR"].includes(t)?Ss("org.w3.clearkey",null):null}},Df="VOD",bf="EVENT",R0="LIVE",Or={ff:Df,Pg:bf,Ug:R0};Qt("Tizen 3")||Qt("Tizen 2")||ks()||(Mu.m3u8=function(){return new Po},Ir["application/x-mpegurl"]=function(){return new Po},Ir["application/vnd.apple.mpegurl"]=function(){return new Po});function Qc(t,i,o,u,l,h){if(200<=o&&299>=o&&o!=202)return{uri:l||u,Oe:u,data:i,status:o,headers:t,fromCache:!!t["x-shaka-from-cache"]};l=null;try{l=ir(i)}catch(p){}throw new oe(o==401||o==403?2:1,1,1001,u,o,l,t,h)}function Zc(){}function Jc(t,i,o,u,l){var h=new D0;Ns(i.headers).forEach(function(C,_){h.append(_,C)});var p=new Of,m={ye:!1,bf:!1};if(t=L0(t,o,{body:i.body||void 0,headers:h,method:i.method,signal:p.signal,credentials:i.allowCrossSiteCredentials?"include":void 0},m,u,l,i.streamDataCallback),t=new Zt(t,function(){return m.ye=!0,p.abort(),Promise.resolve()}),i=i.retryParameters.timeout){var w=new ht(function(){m.bf=!0,p.abort()});w.N(i/1e3),t.finally(function(){w.stop()})}return t}function L0(t,i,o,u,l,h,p){var m,w,C,_,D,b,U,K,Z,B,X,ge,ne;return j(function(ce){switch(ce.g){case 1:return m=Lx,w=Nx,b=D=0,U=Date.now(),ye(ce,2),k(ce,m(t,o),4);case 4:return C=ce.h,h(Pf(C.headers)),K=C.clone().body.getReader(),B=(Z=C.headers.get("Content-Length"))?parseInt(Z,10):0,X=function(de){function Ee(){var Ie,be;return j(function(Pe){switch(Pe.g){case 1:return ye(Pe,2),k(Pe,K.read(),4);case 4:Ie=Pe.h,_e(Pe,3);break;case 2:return we(Pe),Pe.return();case 3:if(Ie.done){Pe.A(5);break}if(D+=Ie.value.byteLength,!p){Pe.A(5);break}return k(Pe,p(Ie.value),5);case 5:be=Date.now(),(100<be-U||Ie.done)&&(l(be-U,D-b,B-D),b=D,U=be),Ie.done?de.close():(de.enqueue(Ie.value),Ee()),le(Pe)}})}Ee()},new w({start:X}),k(ce,C.arrayBuffer(),5);case 5:_=ce.h,_e(ce,3);break;case 2:throw ge=we(ce),u.ye?new oe(1,1,7001,t,i):u.bf?new oe(1,1,1003,t,i):new oe(1,1,1002,t,ge,i);case 3:return ne=Pf(C.headers),ce.return(Qc(ne,_,C.status,t,C.url,i))}})}function Pf(t){var i={};return t.forEach(function(o,u){i[u.trim()]=o}),i}function N0(){if(S.ReadableStream)try{new ReadableStream({})}catch(t){return!1}else return!1;return!(!S.fetch||!S.AbortController)}pe("shaka.net.HttpFetchPlugin",Zc),Zc.isSupported=N0,Zc.parse=Jc;var Lx=S.fetch,Of=S.AbortController,Nx=S.ReadableStream,D0=S.Headers;N0()&&(Jr("http",Jc,2,!0),Jr("https",Jc,2,!0),Jr("blob",Jc,2,!0));function Dx(){}function ed(t,i,o,u,l){var h=new jf,p=Date.now(),m=0,w=new Promise(function(C,_){h.open(i.method,t,!0),h.responseType="arraybuffer",h.timeout=i.retryParameters.timeout,h.withCredentials=i.allowCrossSiteCredentials,h.onabort=function(){_(new oe(1,1,7001,t,o))};var D=!1;h.onreadystatechange=function(){if(h.readyState==2&&!D){var U=Uf(h);l(U),D=!0}},h.onload=function(){var U=Uf(h),K=h.response;try{var Z=Qc(U,K,h.status,t,h.responseURL,o);C(Z)}catch(B){_(B)}},h.onerror=function(U){_(new oe(1,1,1002,t,U,o))},h.ontimeout=function(){_(new oe(1,1,1003,t,o))},h.onprogress=function(U){var K=Date.now();(100<K-p||U.lengthComputable&&U.loaded==U.total)&&(u(K-p,U.loaded-m,U.total-U.loaded),m=U.loaded,p=K)};for(var b in i.headers)h.setRequestHeader(b.toLowerCase(),i.headers[b]);h.send(i.body)});return new Zt(w,function(){return h.abort(),Promise.resolve()})}function Uf(t){var i=t.getAllResponseHeaders().trim().split("\r\n");t={},i=A(i);for(var o=i.next();!o.done;o=i.next())o=o.value.split(": "),t[o[0].toLowerCase()]=o.slice(1).join(": ");return t}pe("shaka.net.HttpXHRPlugin",Dx),Dx.parse=ed;var jf=S.XMLHttpRequest;Jr("http",ed,1,!0),Jr("https",ed,1,!0),Jr("blob",ed,1,!0);function bx(t,i,o,u){this.g=t,this.i=i,this.groupId=o,this.h=u}function Bf(t){return t.ya().map(function(i){return"{"+encodeURI(i)+"}"}).join("")+":"+t.Ba+":"+t.ka}function Px(t,i){return xm(t.g.ya(),t.g.Ba,t.g.ka,i.streaming.retryParameters)}function Ox(){this.h=this.j=this.i=0,this.g=new Map,this.l=0}function Ux(t,i){t.i+=i;var o=t.l;return t.l++,t.g.set(o,i),o}Ox.prototype.close=function(t,i){if(this.g.has(t)){var o=this.g.get(t);this.g.delete(t),this.j+=o,this.h+=i}};function jx(t){var i=this;this.o=t,this.j=new Map,this.i=new Mi(function(){return Ff(i).catch(function(){})}),this.h=[],this.m=function(){},this.l=function(){},this.g=new Ox}jx.prototype.destroy=function(){return this.i.destroy()};function RA(t,i,o){t.m=i,t.l=o}function Ff(t){var i=t.h.map(function(o){return o()});return t.h=[],Promise.all(i)}function zf(t,i,o,u,l,h){Ct(t.i);var p=(t.j.get(i)||Promise.resolve()).then(function(){var m,w,C,_,D,b,U;return j(function(K){if(K.g==1)return k(K,LA(t,o),2);if(m=K.h,t.i.g)throw new oe(2,9,7001);if(l)for(_ in w=$e(m),C=new ja(w),C.data)D=Number(_),b=C.data[D],U=C.g[D],t.l(b,U);t.g.close(u,m.byteLength);var Z=t.g;return t.m(Z.i==0?0:Z.j/Z.i,t.g.h),K.return(h(m))})});t.j.set(i,p)}function Bx(t){return j(function(i){return i.g==1?k(i,Promise.all(t.j.values()),2):i.return(t.g.h)})}function LA(t,i){var o,u,l,h;return j(function(p){return p.g==1?(o=eo,u=t.o.request(o,i),l=function(){return u.abort()},t.h.push(l),k(p,u.promise,2)):(h=p.h,Hr(t.h,l),p.return(h.data))})}function td(t,i){var o=this;this.i=t,this.h=t.objectStore(i),this.g=new Wt,t.onabort=function(u){u.preventDefault(),o.g.reject()},t.onerror=function(u){u.preventDefault(),o.g.reject()},t.oncomplete=function(){o.g.resolve()}}td.prototype.abort=function(){var t=this;return j(function(i){if(i.g==1){try{t.i.abort()}catch(o){}return ye(i,2),k(i,t.g,4)}if(i.g!=2)return _e(i,0);we(i),le(i)})};function nd(t,i){return new Promise(function(o,u){var l=t.h.openCursor();l.onerror=u,l.onsuccess=function(){var h;return j(function(p){if(p.g==1)return l.result==null?(o(),p.return()):(h=l.result,k(p,i(h.key,h.value,h),2));h.continue(),le(p)})}})}td.prototype.store=function(){return this.h},td.prototype.promise=function(){return this.g};function b0(t){this.h=t,this.g=[]}b0.prototype.destroy=function(){return Promise.all(this.g.map(function(t){return t.abort()}))};function $s(t,i){return id(t,i,"readwrite")}function id(t,i,o){o=t.h.transaction([i],o);var u=new td(o,i);return t.g.push(u),u.promise().then(function(){Hr(t.g,u)},function(){Hr(t.g,u)}),u}function Qs(t,i,o){this.h=new b0(t),this.i=i,this.g=o}v=Qs.prototype,v.destroy=function(){return this.h.destroy()},v.hasFixedKeySpace=function(){return!0},v.addSegments=function(){return Gf(this.i)},v.removeSegments=function(t,i){return Fx(this,this.i,t,i)},v.getSegments=function(t){var i=this,o;return j(function(u){return u.g==1?k(u,zx(i,i.i,t),2):(o=u.h,u.return(o.map(function(l){return i.ze(l)})))})},v.addManifests=function(){return Gf(this.g)},v.updateManifest=function(){return Promise.reject(new oe(2,9,9016,"Cannot modify values in "+this.g))};function NA(t,i,o){t=$s(t.h,t.g);var u=t.store();return u.get(i).onsuccess=function(){u.put(o,i)},t.promise()}v.updateManifestExpiration=function(t,i){var o=$s(this.h,this.g),u=o.store();return u.get(t).onsuccess=function(l){(l=l.target.result)&&(l.expiration=i,u.put(l,t))},o.promise()},v.removeManifests=function(t,i){return Fx(this,this.g,t,i)},v.getManifests=function(t){var i=this,o;return j(function(u){return u.g==1?k(u,zx(i,i.g,t),2):(o=u.h,u.return(Promise.all(o.map(function(l){return i.bc(l)}))))})},v.getAllManifests=function(){var t=this,i,o;return j(function(u){return u.g==1?(i=id(t.h,t.g,"readonly"),o=new Map,k(u,nd(i,function(l,h){var p;return j(function(m){if(m.g==1)return k(m,t.bc(h),2);p=m.h,o.set(l,p),le(m)})}),2)):u.g!=3?k(u,i.promise(),3):u.return(o)})},v.ze=function(t){return t},v.bc=function(t){return Promise.resolve(t)};function Gf(t){return Promise.reject(new oe(2,9,9011,"Cannot add new value to "+t))}v.add=function(t,i){var o=this,u,l,h,p,m,w,C;return j(function(_){if(_.g==1){for(u=$s(o.h,t),l=u.store(),h=[],p={},m=A(i),w=m.next();!w.done;p={Fc:p.Fc},w=m.next())C=w.value,p.Fc=l.add(C),p.Fc.onsuccess=function(D){return function(){h.push(D.Fc.result)}}(p);return k(_,u.promise(),2)}return _.return(h)})};function Fx(t,i,o,u){t=$s(t.h,i),i=t.store();var l={};o=A(o);for(var h=o.next();!h.done;l={Ec:l.Ec},h=o.next())l.Ec=h.value,i.delete(l.Ec).onsuccess=function(p){return function(){return u(p.Ec)}}(l);return t.promise()}function zx(t,i,o){var u,l,h,p,m,w,C;return j(function(_){if(_.g==1){for(u=id(t.h,i,"readonly"),l=u.store(),h={},p=[],m={},w=A(o),C=w.next();!C.done;m={Vb:m.Vb,Tb:m.Tb},C=w.next())m.Tb=C.value,m.Vb=l.get(m.Tb),m.Vb.onsuccess=function(D){return function(){D.Vb.result==null&&p.push(D.Tb),h[D.Tb]=D.Vb.result}}(m);return k(_,u.promise(),2)}if(p.length)throw new oe(2,9,9012,"Could not find values for "+p);return _.return(o.map(function(D){return h[D]}))})}function rd(t){this.g=new b0(t)}rd.prototype.destroy=function(){return this.g.destroy()},rd.prototype.getAll=function(){var t=this,i,o;return j(function(u){return u.g==1?(i=id(t.g,"session-ids","readonly"),o=[],k(u,nd(i,function(l,h){o.push(h)}),2)):u.g!=3?k(u,i.promise(),3):u.return(o)})},rd.prototype.add=function(t){var i=$s(this.g,"session-ids"),o=i.store();t=A(t);for(var u=t.next();!u.done;u=t.next())o.add(u.value);return i.promise()},rd.prototype.remove=function(t){var i=this,o;return j(function(u){return u.g==1?(o=$s(i.g,"session-ids"),k(u,nd(o,function(l,h,p){t.includes(h.sessionId)&&p.delete()}),2)):k(u,o.promise(),0)})};function Wn(){this.g=new Map}Wn.prototype.destroy=function(){for(var t=[],i=A(this.g.values()),o=i.next();!o.done;o=i.next())t.push(o.value.destroy());return this.g.clear(),Promise.all(t)},Wn.prototype.init=function(){var t=this;Cl.forEach(function(l,h){(l=l())&&t.g.set(h,l)});for(var i=[],o=A(this.g.values()),u=o.next();!u.done;u=o.next())i.push(u.value.init());return Promise.all(i)};function Vf(t){var i=null;if(t.g.forEach(function(o,u){o.getCells().forEach(function(l,h){l.hasFixedKeySpace()||i||(i={path:{za:u,ja:h},ja:l})})}),i)return i;throw new oe(2,9,9013,"Could not find a cell that supports add-operations")}function P0(t,i){t.g.forEach(function(o,u){o.getCells().forEach(function(l,h){i({za:u,ja:h},l)})})}function Uo(t,i,o){if(t=t.g.get(i),!t)throw new oe(2,9,9013,"Could not find mechanism with name "+i);if(i=t.getCells().get(o),!i)throw new oe(2,9,9013,"Could not find cell with name "+o);return i}function Kf(t,i){t.g.forEach(function(o){i(o.getEmeSessionCell())})}function ra(t){var i=Array.from(t.g.keys());if(!i.length)throw new oe(2,9,9e3,"No supported storage mechanisms found");return t.g.get(i[0]).getEmeSessionCell()}function DA(t){var i,o,u;return j(function(l){return l.g==1?(i=Array.from(t.g.values()),o=0<i.length,o||(u=Cl,u.forEach(function(h){(h=h())&&i.push(h)})),k(l,Promise.all(i.map(function(h){return h.erase()})),2)):o?l.A(0):k(l,Promise.all(i.map(function(h){return h.destroy()})),0)})}function O0(t,i){Cl.set(t,i)}pe("shaka.offline.StorageMuxer",Wn),Wn.unregister=function(t){Cl.delete(t)},Wn.register=O0,Wn.prototype.destroy=Wn.prototype.destroy;var Cl=new Map;function kl(){Qs.apply(this,arguments)}Te(kl,Qs),kl.prototype.updateManifestExpiration=function(t,i){var o=this,u,l,h;return j(function(p){return u=$s(o.h,o.g),l=u.store(),h=new Wt,l.get(t).onsuccess=function(m){(m=m.target.result)?(m.expiration=i,l.put(m),h.resolve()):h.reject(new oe(2,9,9012,"Could not find values for "+t))},k(p,Promise.all([u.promise(),h]),0)})},kl.prototype.bc=function(t){var i,o,u,l,h,p;return j(function(m){if(m.g==1){for(i=[],o=0;o<t.periods.length;++o)u=o==t.periods.length-1?t.duration:t.periods[o+1].startTime,l=u-t.periods[o].startTime,h=od(t.periods[o],l),i.push(h);return k(m,tx(i),2)}return p=m.h,m.return({creationTime:0,originalManifestUri:t.originalManifestUri,duration:t.duration,size:t.size,expiration:t.expiration==null?1/0:t.expiration,streams:p,sessionIds:t.sessionIds,drmInfo:t.drmInfo,appMetadata:t.appMetadata,sequenceMode:!1})})};function od(t,i){bA(t);for(var o=A(t.streams),u=o.next();!u.done;u=o.next());return t.streams.map(function(l){return yi(l,t.startTime,i)})}function yi(t,i,o){var u=t.initSegmentUri?U0(t.initSegmentUri):null,l=i+t.presentationTimeOffset,h=i+o;return{id:t.id,originalId:null,primary:t.primary,type:t.contentType,mimeType:t.mimeType,codecs:t.codecs,frameRate:t.frameRate,pixelAspectRatio:void 0,hdr:void 0,kind:t.kind,language:t.language,label:t.label,width:t.width,height:t.height,initSegmentKey:u,encrypted:t.encrypted,keyIds:new Set([t.keyId]),segments:t.segments.map(function(p){var m=U0(p.uri);return{startTime:i+p.startTime,endTime:i+p.endTime,dataKey:m,initSegmentKey:u,appendWindowStart:i,appendWindowEnd:h,timestampOffset:l,tilesLayout:""}}),variantIds:t.variantIds,roles:[],forced:!1,audioSamplingRate:null,channelsCount:null,spatialAudio:!1,closedCaptions:null,tilesLayout:void 0}}kl.prototype.ze=function(t){return{data:t.data}};function U0(t){var i;if((i=/^offline:[0-9]+\/[0-9]+\/([0-9]+)$/.exec(t))||(i=/^offline:segment\/([0-9]+)$/.exec(t)))return Number(i[1]);throw new oe(2,9,9004,"Could not parse uri "+t)}function bA(t){var i=t.streams.filter(function(m){return m.contentType=="audio"});if(t=t.streams.filter(function(m){return m.contentType=="video"}),!i.every(function(m){return m.variantIds})||!t.every(function(m){return m.variantIds})){for(var o=A(i),u=o.next();!u.done;u=o.next())u.value.variantIds=[];for(o=A(t),u=o.next();!u.done;u=o.next())u.value.variantIds=[];if(o=0,t.length&&!i.length){var l=o++,h=A(t);for(u=h.next();!u.done;u=h.next())u.value.variantIds.push(l)}if(!t.length&&i.length)for(l=o++,h=A(i),u=h.next();!u.done;u=h.next())u.value.variantIds.push(l);if(t.length&&i.length)for(i=A(i),u=i.next();!u.done;u=i.next())for(u=u.value,l=A(t),h=l.next();!h.done;h=l.next()){h=h.value;var p=o++;u.variantIds.push(p),h.variantIds.push(p)}}}function oa(){Qs.apply(this,arguments)}Te(oa,Qs),oa.prototype.bc=function(t){var i,o,u,l,h,p;return j(function(m){if(m.g==1){for(i=[],o=0;o<t.periods.length;++o){u=o==t.periods.length-1?t.duration:t.periods[o+1].startTime,l=u-t.periods[o].startTime;for(var w=t.periods[o],C=[],_=A(w.streams),D=_.next();!D.done;D=_.next())D=D.value,D.variantIds.length!=0&&C.push(PA(D,w.startTime,w.startTime+l));h=C,i.push(h)}return k(m,tx(i),2)}return p=m.h,m.return({appMetadata:t.appMetadata,creationTime:0,drmInfo:t.drmInfo,duration:t.duration,expiration:t.expiration==null?1/0:t.expiration,originalManifestUri:t.originalManifestUri,sessionIds:t.sessionIds,size:t.size,streams:p,sequenceMode:!1})})};function PA(t,i,o){return{id:t.id,originalId:t.originalId,primary:t.primary,type:t.contentType,mimeType:t.mimeType,codecs:t.codecs,frameRate:t.frameRate,pixelAspectRatio:t.pixelAspectRatio,hdr:void 0,kind:t.kind,language:t.language,label:t.label,width:t.width,height:t.height,encrypted:t.encrypted,keyIds:new Set([t.keyId]),segments:t.segments.map(function(u){return{startTime:i+u.startTime,endTime:i+u.endTime,initSegmentKey:t.initSegmentKey,appendWindowStart:i,appendWindowEnd:o,timestampOffset:i-t.presentationTimeOffset,dataKey:u.dataKey,tilesLayout:""}}),variantIds:t.variantIds,roles:[],forced:!1,audioSamplingRate:null,channelsCount:null,spatialAudio:!1,closedCaptions:null,tilesLayout:void 0}}function j0(){Qs.apply(this,arguments)}Te(j0,Qs),v=j0.prototype,v.hasFixedKeySpace=function(){return!1},v.addSegments=function(t){return this.add(this.i,t)},v.addManifests=function(t){return this.add(this.g,t)},v.updateManifest=function(t,i){return NA(this,t,i)},v.bc=function(t){return t.expiration==null&&(t.expiration=1/0),Promise.resolve(t)};function Gx(){this.m=this.j=this.i=this.h=this.g=this.l=null}v=Gx.prototype,v.init=function(){var t=this,i=new Wt,o=!1,u=new ht(function(){o=!0,i.reject(new oe(2,9,9017))});u.N(2);var l=S.indexedDB.open("shaka_offline_db",5);return l.onsuccess=function(){if(!o){var h=l.result;t.l=h;var p=h.objectStoreNames;p=p.contains("manifest")&&p.contains("segment")?new kl(h,"segment","manifest"):null,t.g=p,p=h.objectStoreNames,p=p.contains("manifest-v2")&&p.contains("segment-v2")?new oa(h,"segment-v2","manifest-v2"):null,t.h=p,p=h.objectStoreNames,p=p.contains("manifest-v3")&&p.contains("segment-v3")?new oa(h,"segment-v3","manifest-v3"):null,t.i=p,p=h.objectStoreNames,p=p.contains("manifest-v5")&&p.contains("segment-v5")?new j0(h,"segment-v5","manifest-v5"):null,t.j=p,h=h.objectStoreNames.contains("session-ids")?new rd(h):null,t.m=h,u.stop(),i.resolve()}},l.onupgradeneeded=function(){for(var h=l.result,p=A(["segment-v5","manifest-v5","session-ids"]),m=p.next();!m.done;m=p.next())m=m.value,h.objectStoreNames.contains(m)||h.createObjectStore(m,{autoIncrement:!0})},l.onerror=function(h){o||(i.reject(new oe(2,9,9001,l.error)),u.stop(),h.preventDefault())},i},v.destroy=function(){var t=this;return j(function(i){switch(i.g){case 1:if(!t.g){i.A(2);break}return k(i,t.g.destroy(),2);case 2:if(!t.h){i.A(4);break}return k(i,t.h.destroy(),4);case 4:if(!t.i){i.A(6);break}return k(i,t.i.destroy(),6);case 6:if(!t.j){i.A(8);break}return k(i,t.j.destroy(),8);case 8:if(!t.m){i.A(10);break}return k(i,t.m.destroy(),10);case 10:t.l&&t.l.close(),le(i)}})},v.getCells=function(){var t=new Map;return this.g&&t.set("v1",this.g),this.h&&t.set("v2",this.h),this.i&&t.set("v3",this.i),this.j&&t.set("v5",this.j),t},v.getEmeSessionCell=function(){return this.m},v.erase=function(){var t=this;return j(function(i){switch(i.g){case 1:if(!t.g){i.A(2);break}return k(i,t.g.destroy(),2);case 2:if(!t.h){i.A(4);break}return k(i,t.h.destroy(),4);case 4:if(!t.i){i.A(6);break}return k(i,t.i.destroy(),6);case 6:if(!t.j){i.A(8);break}return k(i,t.j.destroy(),8);case 8:return t.l&&t.l.close(),k(i,Vx(),10);case 10:return t.l=null,t.g=null,t.h=null,t.i=null,t.j=null,k(i,t.init(),0)}})};function Vx(){var t=new Wt,i=S.indexedDB.deleteDatabase("shaka_offline_db");return i.onblocked=function(){},i.onsuccess=function(){t.resolve()},i.onerror=function(o){t.reject(new oe(2,9,9001,i.error)),o.preventDefault()},t}O0("idb",function(){return Qt("CrKey")||Wo()||!S.indexedDB?null:new Gx});function qi(t,i,o,u){this.g=t,this.i=i,this.h=o,this.l=u,this.j=["offline:",t,"/",i,"/",o,"/",u].join("")}qi.prototype.za=function(){return this.i},qi.prototype.ja=function(){return this.h},qi.prototype.key=function(){return this.l},qi.prototype.toString=function(){return this.j};function sa(t){if(t=/^offline:([a-z]+)\/([^/]+)\/([^/]+)\/([0-9]+)$/.exec(t),t==null)return null;var i=t[1];if(i!="manifest"&&i!="segment")return null;var o=t[2];if(!o)return null;var u=t[3];return u&&i!=null?new qi(i,o,u,Number(t[4])):null}function Kx(t,i){this.h=t,this.g=i}function Hx(t,i){var o=new Ge(null,0);o.Aa(i.duration);var u=i.streams.filter(function(C){return C.type=="audio"}),l=i.streams.filter(function(C){return C.type=="video"});u=Wx(t,u,l,o),l=i.streams.filter(function(C){return C.type==Lt}).map(function(C){return Hf(t,C,o)});var h=i.streams.filter(function(C){return C.type=="image"}).map(function(C){return Hf(t,C,o)}),p=i.drmInfo?[i.drmInfo]:[];if(i.drmInfo)for(var m=A(u.values()),w=m.next();!w.done;w=m.next())w=w.value,w.audio&&w.audio.encrypted&&(w.audio.drmInfos=p),w.video&&w.video.encrypted&&(w.video.drmInfos=p);return{presentationTimeline:o,minBufferTime:2,offlineSessionIds:i.sessionIds,variants:Array.from(u.values()),textStreams:l,imageStreams:h,sequenceMode:i.sequenceMode||!1}}function Wx(t,i,o,u){for(var l=new Set,h=A(i),p=h.next();!p.done;p=h.next()){var m=A(p.value.variantIds);for(p=m.next();!p.done;p=m.next())l.add(p.value)}for(h=A(o),p=h.next();!p.done;p=h.next())for(m=A(p.value.variantIds),p=m.next();!p.done;p=m.next())l.add(p.value);for(h=new Map,l=A(l),p=l.next();!p.done;p=l.next())p=p.value,h.set(p,{id:p,language:"",disabledUntilTime:0,primary:!1,audio:null,video:null,bandwidth:0,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]});for(i=A(i),l=i.next();!l.done;l=i.next())for(l=l.value,p=Hf(t,l,u),m=A(l.variantIds),l=m.next();!l.done;l=m.next())l=h.get(l.value),l.language=p.language,l.primary=l.primary||p.primary,l.audio=p;for(o=A(o),i=o.next();!i.done;i=o.next())for(l=i.value,i=Hf(t,l,u),p=A(l.variantIds),l=p.next();!l.done;l=p.next())l=h.get(l.value),l.primary=l.primary||i.primary,l.video=i;return h}function Hf(t,i,o){var u=i.segments.map(function(l){return Wf(t,l)});return o.Ib(u),{id:i.id,originalId:i.originalId,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new _t(u),mimeType:i.mimeType,codecs:i.codecs,width:i.width||void 0,height:i.height||void 0,frameRate:i.frameRate,pixelAspectRatio:i.pixelAspectRatio,hdr:i.hdr,kind:i.kind,encrypted:i.encrypted,drmInfos:[],keyIds:i.keyIds,language:i.language,label:i.label,type:i.type,primary:i.primary,trickModeVideo:null,emsgSchemeIdUris:null,roles:i.roles,forced:i.forced,channelsCount:i.channelsCount,audioSamplingRate:i.audioSamplingRate,spatialAudio:i.spatialAudio,closedCaptions:i.closedCaptions,tilesLayout:i.tilesLayout}}function Wf(t,i){var o=new qi("segment",t.h,t.g,i.dataKey);return new St(i.startTime,i.endTime,function(){return[o.toString()]},0,null,i.initSegmentKey!=null?OA(t,i.initSegmentKey):null,i.timestampOffset,i.appendWindowStart,i.appendWindowEnd,[],i.tilesLayout||"")}function OA(t,i){var o=new qi("segment",t.h,t.g,i);return new sr(function(){return[o.toString()]},0,null)}function qf(){this.g=null}v=qf.prototype,v.configure=function(){},v.start=function(t,i){var o=this,u,l,h,p,m,w,C;return j(function(_){switch(_.g){case 1:if(u=sa(t),o.g=u,u==null||u.g!="manifest")throw new oe(2,1,9004,t);return l=new Wn,He(_),k(_,l.init(),4);case 4:return k(_,Uo(l,u.za(),u.ja()),5);case 5:return h=_.h,k(_,h.getManifests([u.key()]),6);case 6:return p=_.h,m=p[0],w=new Kx(u.za(),u.ja()),C=Hx(w,m),i.makeTextStreamsForClosedCaptions(C),_.return(C);case 2:return st(_),k(_,l.destroy(),7);case 7:Et(_,0)}})},v.stop=function(){return Promise.resolve()},v.update=function(){},v.onExpirationUpdated=function(t,i){var o=this,u,l,h,p,m,w,C;return j(function(_){switch(_.g){case 1:return u=o.g,l=new Wn,ye(_,2,3),k(_,l.init(),5);case 5:return k(_,Uo(l,u.za(),u.ja()),6);case 6:return h=_.h,k(_,h.getManifests([u.key()]),7);case 7:if(p=_.h,m=p[0],w=m.sessionIds.includes(t),C=m.expiration==null||m.expiration>i,!w||!C){_.A(3);break}return k(_,h.updateManifestExpiration(u.key(),i),3);case 3:return st(_),k(_,l.destroy(),10);case 10:Et(_,0);break;case 2:we(_),_.A(3)}})},Ir["application/x-offline-manifest"]=function(){return new qf};function B0(){}function qx(t){var i=sa(t);return i&&i.g=="manifest"?(t={uri:t,Oe:t,data:new ArrayBuffer(0),headers:{"content-type":"application/x-offline-manifest"}},t=Zr(t)):t=i&&i.g=="segment"?jo(i.key(),i):Ls(new oe(2,1,9004,t)),t}function jo(t,i){var o=new Wn;return Zr(void 0).Y(function(){return o.init()}).Y(function(){return Uo(o,i.za(),i.ja())}).Y(function(u){return u.getSegments([i.key()])}).Y(function(u){return{uri:i,data:u[0].data,headers:{}}}).finally(function(){return o.destroy()})}pe("shaka.offline.OfflineScheme",B0),B0.plugin=qx,Jr("offline",qx);function Xf(t,i,o){var u,l,h,p,m,w;return j(function(C){switch(C.g){case 1:u=[];for(var _=[],D=A(o),b=D.next();!b.done;b=D.next()){b=b.value;for(var U=!1,K=A(_),Z=K.next();!Z.done;Z=K.next())if(Z=Z.value,Yx(Z.info,b)){Z.sessionIds.push(b.sessionId),U=!0;break}U||_.push({info:b,sessionIds:[b.sessionId]})}l=A(_),h=l.next();case 2:if(h.done){C.A(4);break}return p=h.value,m=Xx(t,i,p),k(C,m,5);case 5:w=C.h,u=u.concat(w),h=l.next(),C.A(2);break;case 4:return C.return(u)}})}function Xx(t,i,o){var u,l;return j(function(h){switch(h.g){case 1:return u=new eh({kb:i,onError:function(){},cd:function(){},onExpirationUpdated:function(){},onEvent:function(){}}),ye(h,2),u.configure(t),k(h,Qw(u,o.info.keySystem,o.info.licenseUri,o.info.serverCertificate,o.info.audioCapabilities,o.info.videoCapabilities),4);case 4:_e(h,3);break;case 2:return we(h),k(h,u.destroy(),5);case 5:return h.return([]);case 3:return ye(h,6),k(h,Ka(u),8);case 8:_e(h,7);break;case 6:return we(h),k(h,u.destroy(),9);case 9:return h.return([]);case 7:return l=[],k(h,Promise.all(o.sessionIds.map(function(p){return j(function(m){if(m.g==1)return ye(m,2),k(m,Jw(u,p),4);if(m.g!=2)return l.push(p),_e(m,0);we(m),le(m)})})),10);case 10:return k(h,u.destroy(),11);case 11:return h.return(l)}})}function Yx(t,i){function o(u,l){return u.robustness==l.robustness&&u.contentType==l.contentType}return t.keySystem==i.keySystem&&t.licenseUri==i.licenseUri&&xa(t.audioCapabilities,i.audioCapabilities,o)&&xa(t.videoCapabilities,i.videoCapabilities,o)}function UA(t,i,o){var u=i.presentationTimeline.getDuration();return i=$x(i),{offlineUri:null,originalManifestUri:t,duration:u,size:0,expiration:1/0,tracks:i,appMetadata:o,isIncomplete:!1}}function Ml(t,i){var o=Hx(new Kx(t.za(),t.ja()),i),u=i.appMetadata||{};return o=$x(o),{offlineUri:t.toString(),originalManifestUri:i.originalManifestUri,duration:i.duration,size:i.size,expiration:i.expiration,tracks:o,appMetadata:u,isIncomplete:i.isIncomplete||!1}}function $x(t){var i=[],o=Hd(t.variants);o=A(o);for(var u=o.next();!u.done;u=o.next())i.push(xu(u.value));for(t=A(t.textStreams),o=t.next();!o.done;o=t.next())i.push(ba(o.value));return i}function jA(){this.g={}}function Qx(t,i){var o=i.audio,u=i.video;if(o&&!u&&(t.g[o.id]=o.bandwidth||i.bandwidth),!o&&u&&(t.g[u.id]=u.bandwidth||i.bandwidth),o&&u){var l=o.bandwidth||393216,h=u.bandwidth||i.bandwidth-l;0>=h&&(h=i.bandwidth),t.g[o.id]=l,t.g[u.id]=h}}function Zx(t,i){t.g[i.id]=i.bandwidth||2048}function F0(t,i){return t=t.g[i],t==null&&(t=0),t}function Pn(t){var i=this;if(t&&t.constructor!=Ae)throw new oe(2,9,9008);this.g=this.h=null,t?(this.h=t.h,this.g=t.jc()):(this.h=fl(),this.g=new Nt),this.i=[],this.j=[];var o=!t;this.l=new Mi(function(){var u,l,h,p,m;return j(function(w){switch(w.g){case 1:return k(w,Promise.all(i.j.map(function(C){return Ff(C)})),2);case 2:for(u=function(){},l=[],h=A(i.i),p=h.next();!p.done;p=h.next())m=p.value,l.push(m.then(u,u));return k(w,Promise.all(l),3);case 3:if(!o){w.A(4);break}return k(w,i.g.destroy(),4);case 4:i.h=null,i.g=null,le(w)}})})}function Yf(){if(Tr())e:{for(var t=A(Cl.values()),i=t.next();!i.done;i=t.next())if(i=i.value,i=i()){i.destroy(),t=!0;break e}t=!1}else t=!1;return t}v=Pn.prototype,v.destroy=function(){return this.l.destroy()},v.configure=function(t,i){return arguments.length==2&&typeof t=="string"&&(t=Ic(t,i)),pl(this.h,t)},v.getConfiguration=function(){var t=fl();return pl(t,this.h,fl()),t},v.jc=function(){return this.g},v.store=function(t,i,o){var u=this,l=this.getConfiguration(),h=new jx(this.g);return this.j.push(h),i=BA(this,t,i||{},function(){var p;return j(function(m){return m.g==1?k(m,ky(t,u.g,l.manifest.retryParameters,o||null),2):(p=m.h,m.return(p()))})},l,h),i=new Zt(i,function(){return Ff(h)}),i.finally(function(){Hr(u.j,h)}),qA(this,i)};function BA(t,i,o,u,l,h){var p,m,w,C,_,D,b,U,K,Z,B,X,ge,ne;return j(function(ce){switch(ce.g){case 1:return sd(),m=p=null,w=new Wn,D=_=C=null,ye(ce,2,3),k(ce,u(),5);case 5:return p=ce.h,k(ce,KA(t,i,p,l),6);case 6:if(b=ce.h,Yn(t),U=!b.presentationTimeline.U()&&!b.presentationTimeline.jb(),!U)throw new oe(2,9,9005,i);return k(ce,HA(t,b,function(de){D=D||de},l),7);case 7:if(m=ce.h,Yn(t),D)throw D;return k(ce,eT(b,l),8);case 8:return k(ce,w.init(),9);case 9:return Yn(t),k(ce,Vf(w),10);case 10:return C=ce.h,Yn(t),K=zA(m,b,i,o,l,h),Z=K.ag,B=K.pe,k(ce,C.ja.addManifests([Z]),11);case 11:if(X=ce.h,Yn(t),_=X[0],Yn(t),D)throw D;return k(ce,FA(t,B,_,Z,h,l,C.ja,b,m),12);case 12:return Yn(t),ge=new qi("manifest",C.path.za,C.path.ja,_),ce.return(Ml(ge,Z));case 3:return st(ce),k(ce,w.destroy(),13);case 13:if(!p){ce.A(14);break}return k(ce,p.stop(),14);case 14:if(!m){ce.A(16);break}return k(ce,m.destroy(),16);case 16:Et(ce,0);break;case 2:if(ne=we(ce),_==null){ce.A(18);break}return k(ce,Jx(_),18);case 18:throw D||ne}})}function FA(t,i,o,u,l,h,p,m,w){var C,_,D,b,U,K,Z,B,X,ge;return j(function(ne){switch(ne.g){case 1:if(C={},_=0,D=function(ce,de){var Ee,Ie,be,Pe,Ke,Ze,et;return j(function(mt){if(mt.g==1){for(Ee={},Ie=A(ce),be=Ie.next();!be.done;Ee={cb:Ee.cb},be=Ie.next())Ee.cb=be.value,Pe=Px(Ee.cb,h),Ke=Ee.cb.i,Ze=Ee.cb.h,et=function(qe){return function(rn){var lt,sn,li;return j(function(mr){if(mr.g==1)return k(mr,p.addSegments([{data:rn}]),2);lt=mr.h,Yn(t),sn=qe.cb.g,li=Bf(sn),C[li]=lt[0],_+=rn.byteLength,le(mr)})}}(Ee),zf(l,Ee.cb.groupId,Pe,Ke,Ze,et);return k(mt,Bx(l),2)}return de?(Yn(t),nT(m,u,w,h),k(mt,p.updateManifest(o,u),0)):mt.A(0)})},b=!1,ye(ne,2),!z0(m)||!b||tT(m)){ne.A(4);break}return k(ne,D(i.filter(function(ce){return ce.h}),!0),5);case 5:return Yn(t),i=i.filter(function(ce){return!ce.h}),U=C,K=_,C={},_=0,k(ne,$f(p,o,u,U,K,function(){return Yn(t)}),6);case 6:Yn(t);case 4:if(b){ne.A(7);break}return k(ne,D(i,!1),8);case 8:return Yn(t),Z=C,B=_,C={},_=0,k(ne,$f(p,o,u,Z,B,function(){return Yn(t)}),9);case 9:Yn(t);case 7:_e(ne,0);break;case 2:return X=we(ne),ge=Object.values(C),k(ne,p.removeSegments(ge,function(){}),10);case 10:throw X}})}function Jx(t){var i,o,u,l;return j(function(h){switch(h.g){case 1:return i=new Wn,k(h,i.init(),2);case 2:return k(h,Vf(i),3);case 3:return o=h.h,u=new qi("manifest",o.path.za,o.path.ja,t),k(h,i.destroy(),4);case 4:return l=new Pn,k(h,l.remove(u.toString()),0)}})}function $f(t,i,o,u,l,h){var p,m,w,C,_,D,b,U,K,Z,B;return j(function(X){switch(X.g){case 1:for(p=!1,ye(X,2),m=!0,w=A(o.streams),C=w.next();!C.done;C=w.next())for(_=C.value,D=A(_.segments),b=D.next();!b.done;b=D.next())U=b.value,K=U.pendingSegmentRefId?u[U.pendingSegmentRefId]:null,K!=null&&(U.dataKey=K,U.pendingSegmentRefId=void 0),K=U.pendingInitSegmentRefId?u[U.pendingInitSegmentRefId]:null,K!=null&&(U.initSegmentKey=K,U.pendingInitSegmentRefId=void 0),U.pendingSegmentRefId&&(m=!1),U.pendingInitSegmentRefId&&(m=!1);return o.size+=l,m&&(o.isIncomplete=!1),k(X,t.updateManifest(i,o),4);case 4:p=!0,h(),_e(X,0);break;case 2:return Z=we(X),k(X,Jx(i),5);case 5:if(p){X.A(6);break}return B=Object.values(u),k(X,t.removeSegments(B,function(){}),6);case 6:throw Z}})}function eT(t,i){var o,u,l,h,p,m,w,C,_,D,b,U,K,Z,B,X,ge,ne,ce,de,Ee,Ie,be,Pe,Ke,Ze,et,mt,qe;return j(function(rn){switch(rn.g){case 1:return o={width:1/0,height:1/0},Vw(t,i.restrictions,o),k(rn,og(t,i.offline.usePersistentLicense),2);case 2:for(u=[],l=i.preferredAudioChannelCount,h=i.preferredDecodingAttributes,p=i.preferredVideoCodecs,m=i.preferredAudioCodecs,Qr(t,p,m,l,h),w=A(t.variants),C=w.next();!C.done;C=w.next())_=C.value,u.push(xu(_));for(D=A(t.textStreams),b=D.next();!b.done;b=D.next())U=b.value,u.push(ba(U));for(K=A(t.imageStreams),Z=K.next();!Z.done;Z=K.next())B=Z.value,u.push(ql(B));return k(rn,i.offline.trackSelectionCallback(u),3);case 3:for(X=rn.h,ge=t.presentationTimeline.getDuration(),ne=0,ce=A(X),de=ce.next();!de.done;de=ce.next())Ee=de.value,Ie=Ee.bandwidth*ge/8,ne+=Ie;return ye(rn,4),k(rn,i.offline.downloadSizeCallback(ne),6);case 6:if(be=rn.h,!be)throw new oe(2,9,9014);_e(rn,5);break;case 4:throw Pe=we(rn),Pe instanceof oe?Pe:new oe(2,9,9015);case 5:for(Ke=new Set,Ze=new Set,et=new Set,mt=A(X),de=mt.next();!de.done;de=mt.next())qe=de.value,qe.type=="variant"&&Ke.add(qe.id),qe.type=="text"&&Ze.add(qe.id),qe.type=="image"&&et.add(qe.id);t.variants=t.variants.filter(function(lt){return Ke.has(lt.id)}),t.textStreams=t.textStreams.filter(function(lt){return Ze.has(lt.id)}),t.imageStreams=t.imageStreams.filter(function(lt){return et.has(lt.id)}),$A(t),le(rn)}})}function zA(t,i,o,u,l,h){var p=UA(o,i,u),m=l.offline.progressCallback;RA(h,function(U,K){p.size=K,m(p,U)},function(U,K){w&&l.offline.usePersistentLicense&&C==K&&Ha(t,"cenc",U)});var w=z0(i)&&!tT(i),C=null;w&&(C=QA.get(t.g.keySystem));for(var _=new jA,D=A(i.textStreams),b=D.next();!b.done;b=D.next())_.g[b.value.id]=52;for(D=A(i.imageStreams),b=D.next();!b.done;b=D.next())Zx(_,b.value);for(b=A(i.variants),D=b.next();!D.done;D=b.next())Qx(_,D.value);return _=G0(h,_,i,l),h=_.streams,_=_.pe,b=t.g,D=l.offline.usePersistentLicense,b&&D&&(b.initData=[]),{ag:{creationTime:Date.now(),originalManifestUri:o,duration:i.presentationTimeline.getDuration(),size:0,expiration:t.ic(),streams:h,sessionIds:D?Cg(t):[],drmInfo:b,appMetadata:u,isIncomplete:!0,sequenceMode:i.sequenceMode},pe:_}}function z0(t){return t.variants.some(function(i){var o=i.audio&&i.audio.encrypted;return i.video&&i.video.encrypted||o})}function tT(t){return t.variants.some(function(i){return(i.video?i.video.drmInfos:[]).concat(i.audio?i.audio.drmInfos:[]).some(function(o){return o.initData&&o.initData.length})})}function nT(t,i,o,u){if(i.expiration=o.ic(),o=Cg(o),i.sessionIds=u.offline.usePersistentLicense?o:[],z0(t)&&u.offline.usePersistentLicense&&!o.length)throw new oe(2,9,9007)}v.remove=function(t){return V0(this,On(this,t))};function On(t,i){var o,u,l,h,p,m;return j(function(w){switch(w.g){case 1:if(sd(),o=sa(i),o==null||o.g!="manifest")throw new oe(2,9,9004,i);return u=o,l=new Wn,He(w),k(w,l.init(),4);case 4:return k(w,Uo(l,u.za(),u.ja()),5);case 5:return h=w.h,k(w,h.getManifests([u.key()]),6);case 6:return p=w.h,m=p[0],k(w,Promise.all([GA(t,m,l),VA(h,u,m)]),2);case 2:return st(w),k(w,l.destroy(),8);case 8:Et(w,0)}})}function Qf(t,i){for(var o=[],u=A(t.streams),l=u.next();!l.done;l=u.next())l=l.value,i&&l.type=="video"?o.push({contentType:ki(l.mimeType,l.codecs),robustness:t.drmInfo.videoRobustness}):i||l.type!="audio"||o.push({contentType:ki(l.mimeType,l.codecs),robustness:t.drmInfo.audioRobustness});return o}function GA(t,i,o){return j(function(u){return k(u,YA(t.g,t.h.drm,o,i),0)})}function VA(t,i,o){function u(){}var l=XA(o);return Ml(i,o),Promise.all([t.removeSegments(l,u),t.removeManifests([i.key()],u)])}v.pg=function(){return V0(this,iT(this))};function iT(t){var i,o,u,l,h,p,m,w,C,_;return j(function(D){switch(D.g){case 1:return sd(),i=t.g,o=t.h.drm,u=new Wn,l=!1,He(D),k(D,u.init(),4);case 4:h=[],Kf(u,function(b){return h.push(b)}),p=A(h),m=p.next();case 5:if(m.done){D.A(2);break}return w=m.value,k(D,w.getAll(),8);case 8:return C=D.h,k(D,Xf(o,i,C),9);case 9:return _=D.h,k(D,w.remove(_),10);case 10:_.length!=C.length&&(l=!0),m=p.next(),D.A(5);break;case 2:return st(D),k(D,u.destroy(),11);case 11:Et(D,3);break;case 3:return D.return(!l)}})}v.list=function(){return V0(this,rT())};function rT(){var t,i,o;return j(function(u){switch(u.g){case 1:return sd(),t=[],i=new Wn,He(u),k(u,i.init(),4);case 4:return o=Promise.resolve(),P0(i,function(l,h){o=o.then(function(){var p;return j(function(m){if(m.g==1)return k(m,h.getAllManifests(),2);p=m.h,p.forEach(function(w,C){w=Ml(new qi("manifest",l.za,l.ja,C),w),t.push(w)}),le(m)})})}),k(u,o,2);case 2:return st(u),k(u,i.destroy(),6);case 6:Et(u,3);break;case 3:return u.return(t)}})}function KA(t,i,o,u){var l,h,p,m,w;return j(function(C){if(C.g==1)return l=null,h=t.g,p={networkingEngine:h,modifyManifestRequest:function(){},modifySegmentRequest:function(){},filter:function(){return Promise.resolve()},makeTextStreamsForClosedCaptions:function(){},onTimelineRegionAdded:function(){},onEvent:function(){},onError:function(_){l=_},isLowLatencyMode:function(){return!1},isAutoLowLatencyMode:function(){return!1},enableLowLatencyMode:function(){},updateDuration:function(){},newDrmInfo:function(){}},o.configure(u.manifest),Yn(t),k(C,o.start(i,p),2);if(C.g!=3)return m=C.h,Yn(t),w=sT(m),k(C,Promise.all(ts(w,function(_){return _.createSegmentIndex()})),3);if(Yn(t),l)throw l;return C.return(m)})}function HA(t,i,o,u){var l;return j(function(h){switch(h.g){case 1:return l=new eh({kb:t.g,onError:o,cd:function(){},onExpirationUpdated:function(){},onEvent:function(){}}),l.configure(u.drm),k(h,ko(l,i.variants,u.offline.usePersistentLicense),2);case 2:return k(h,Ka(l),3);case 3:return k(h,wy(l),4);case 4:return h.return(l)}})}function G0(t,i,o,u){var l=new Map,h=sT(o),p=new Map;h=A(h);for(var m=h.next();!m.done;m=h.next()){m=m.value;var w=oT(t,i,o,m,u,l);p.set(m.id,w)}for(t=A(o.variants),i=t.next();!i.done;i=t.next())i=i.value,i.audio&&p.get(i.audio.id).variantIds.push(i.id),i.video&&p.get(i.video.id).variantIds.push(i.id);return{streams:Array.from(p.values()),pe:Array.from(l.values())}}function oT(t,i,o,u,l,h){var p={id:u.id,originalId:u.originalId,primary:u.primary,type:u.type,mimeType:u.mimeType,codecs:u.codecs,frameRate:u.frameRate,pixelAspectRatio:u.pixelAspectRatio,hdr:u.hdr,kind:u.kind,language:u.language,label:u.label,width:u.width||null,height:u.height||null,encrypted:u.encrypted,keyIds:u.keyIds,segments:[],variantIds:[],roles:u.roles,forced:u.forced,channelsCount:u.channelsCount,audioSamplingRate:u.audioSamplingRate,spatialAudio:u.spatialAudio,closedCaptions:u.closedCaptions,tilesLayout:u.tilesLayout},m=l.offline.numberOfParallelDownloads,w=0;return WA(u,o.presentationTimeline.Pa(),function(C){var _=Bf(C),D=void 0;if(!h.has(_)){var b=C.endTime-C.startTime;b=F0(i,u.id)*b,b=Ux(t.g,b),h.set(_,new bx(C,b,w,!1))}C.h&&(D=Bf(C.h),h.has(D)||(b=.5*F0(i,u.id),b=Ux(t.g,b),h.set(D,new bx(C.h,b,w,!0)))),p.segments.push({pendingInitSegmentRefId:D,initSegmentKey:D?0:null,startTime:C.startTime,endTime:C.endTime,appendWindowStart:C.appendWindowStart,appendWindowEnd:C.appendWindowEnd,timestampOffset:C.timestampOffset,tilesLayout:C.tilesLayout,pendingSegmentRefId:_,dataKey:0}),w=(w+1)%m}),p}function WA(t,i,o){if(i=t.segmentIndex.find(i),i!=null)for(var u=t.segmentIndex.get(i);u;)o(u),u=t.segmentIndex.get(++i)}function Yn(t){if(t.l.g)throw new oe(2,9,7001)}function sd(){if(!Yf())throw new oe(2,9,9e3)}function V0(t,i){return j(function(o){return o.g==1?(t.i.push(i),He(o),k(o,i,4)):o.g!=2?o.return(o.h):(st(o),Hr(t.i,i),Et(o,0))})}function qA(t,i){var o=i.promise;return t.i.push(o),i.finally(function(){Hr(t.i,o)})}function XA(t){var i=new Set;t=A(t.streams);for(var o=t.next();!o.done;o=t.next()){o=A(o.value.segments);for(var u=o.next();!u.done;u=o.next())u=u.value,u.initSegmentKey!=null&&i.add(u.initSegmentKey),i.add(u.dataKey)}return Array.from(i)}function YA(t,i,o,u){var l,h,p;return j(function(m){return m.g==1?u.drmInfo?(l=ra(o),h=u.sessionIds.map(function(w){return{sessionId:w,keySystem:u.drmInfo.keySystem,licenseUri:u.drmInfo.licenseServerUri,serverCertificate:u.drmInfo.serverCertificate,audioCapabilities:Qf(u,!1),videoCapabilities:Qf(u,!0)}}),k(m,Xf(i,t,h),2)):m.return():m.g!=3?(p=m.h,k(m,l.remove(p),3)):k(m,l.add(h.filter(function(w){return!p.includes(w.sessionId)})),0)})}function sT(t){for(var i=new Set,o=A(t.textStreams),u=o.next();!u.done;u=o.next())i.add(u.value);for(o=A(t.imageStreams),u=o.next();!u.done;u=o.next())i.add(u.value);for(t=A(t.variants),o=t.next();!o.done;o=t.next())o=o.value,o.audio&&i.add(o.audio),o.video&&i.add(o.video);return i}function $A(t){t.variants.map(function(h){return h.video});var i=new Set(t.variants.map(function(h){return h.audio}));t=t.textStreams;for(var o=A(i),u=o.next();!u.done;u=o.next()){u=A(i);for(var l=u.next();!l.done;l=u.next());}for(i=A(t),o=i.next();!o.done;o=i.next())for(o=A(t),u=o.next();!u.done;u=o.next());}pe("shaka.offline.Storage",Pn),Pn.deleteAll=function(){var t;return j(function(i){return i.g==1?(t=new Wn,He(i),k(i,DA(t),2)):i.g!=5?(st(i),k(i,t.destroy(),5)):Et(i,0)})},Pn.prototype.list=Pn.prototype.list,Pn.prototype.removeEmeSessions=Pn.prototype.pg,Pn.prototype.remove=Pn.prototype.remove,Pn.prototype.store=Pn.prototype.store,Pn.prototype.getNetworkingEngine=Pn.prototype.jc,Pn.prototype.getConfiguration=Pn.prototype.getConfiguration,Pn.prototype.configure=Pn.prototype.configure,Pn.prototype.destroy=Pn.prototype.destroy,Pn.support=Yf;var QA=new Map().set("org.w3.clearkey","1077efecc0b24d02ace33c1e52e2fb4b").set("com.widevine.alpha","edef8ba979d64acea3c827dcd51d21ed").set("com.microsoft.playready","9a04f07998404286ab92e65be0885f95").set("com.microsoft.playready.recommendation","9a04f07998404286ab92e65be0885f95").set("com.microsoft.playready.software","9a04f07998404286ab92e65be0885f95").set("com.microsoft.playready.hardware","9a04f07998404286ab92e65be0885f95").set("com.adobe.primetime","f239e769efa348509c16a903c6932efb");$h.offline=Yf;function Gn(){}function ui(t,i){for(t={priority:i||0,mf:t},i=0;i<An.length;i++)if(An[i].priority<t.priority){An.splice(i,0,t);return}An.push(t)}pe("shaka.polyfill",Gn),Gn.register=ui,Gn.installAll=function(){for(var t=A(An),i=t.next();!i.done;i=t.next()){i=i.value;try{i.mf()}catch(o){ze("Error installing polyfill!",o)}}};var An=[];function Zs(){this.g=new Jf}function Zf(){S.AbortController||(S.AbortController=Zs,S.AbortSignal=Jf)}Zs.prototype.abort=function(t){var i=this.g;i.h||(i.h=!0,i.g=t,i.g===void 0&&(i.g=new DOMException("signal is aborted without reason","AbortError")),t=new dt("abort"),i.onabort&&i.onabort(t),i.dispatchEvent(t))},ee.Object.defineProperties(Zs.prototype,{signal:{configurable:!0,enumerable:!0,get:function(){return this.g}}}),Gn.AbortController=Zs,Zs.install=Zf;function Jf(){kt.call(this),this.h=!1,this.g=void 0,this.onabort=null}Te(Jf,kt),ee.Object.defineProperties(Jf.prototype,{aborted:{configurable:!0,enumerable:!0,get:function(){return this.h}},reason:{configurable:!0,enumerable:!0,get:function(){return this.g}}}),ui(Zf);function uT(){}function aT(){if(!Object.getOwnPropertyDescriptor(Element.prototype,"ariaHidden"))for(var t=A(["ariaHidden","ariaLabel","ariaPressed","ariaSelected"]),i=t.next();!i.done;i=t.next())lT(i.value)}function lT(t){var i="aria-"+t.toLowerCase().replace(/^aria/,"");Object.defineProperty(Element.prototype,t,{get:function(){return this.getAttribute(i)},set:function(o){o==null||o==null?this.removeAttribute(i):this.setAttribute(i,o)}})}Gn.Aria=uT,uT.install=aT,ui(aT);function cT(){}function dT(){kv()}Gn.EncryptionScheme=cT,cT.install=dT,ui(dT,-2);function Un(){}function K0(){if(S.Document){var t=Element.prototype;t.requestFullscreen=t.requestFullscreen||t.mozRequestFullScreen||t.msRequestFullscreen||t.webkitRequestFullscreen,t=Document.prototype,t.exitFullscreen=t.exitFullscreen||t.mozCancelFullScreen||t.msExitFullscreen||t.webkitCancelFullScreen,"fullscreenElement"in document||(Object.defineProperty(document,"fullscreenElement",{get:function(){return document.mozFullScreenElement||document.msFullscreenElement||document.webkitCurrentFullScreenElement||document.webkitFullscreenElement}}),Object.defineProperty(document,"fullscreenEnabled",{get:function(){return document.mozFullScreenEnabled||document.msFullscreenEnabled||document.webkitFullscreenEnabled}})),document.addEventListener("webkitfullscreenchange",Sn),document.addEventListener("webkitfullscreenerror",Sn),document.addEventListener("mozfullscreenchange",Sn),document.addEventListener("mozfullscreenerror",Sn),document.addEventListener("MSFullscreenChange",Sn),document.addEventListener("MSFullscreenError",Sn)}}function Sn(t){var i=t.type.replace(/^(webkit|moz|MS)/,"").toLowerCase(),o=document.createEvent("Event");o.initEvent(i,t.bubbles,t.cancelable),t.target.dispatchEvent(o)}Gn.Fullscreen=Un,Un.install=K0,ui(K0);function ua(){}function _l(){var t=!0;(Ia()||Qt("PlayStation 5")||Ca()||Qt("Web0S")||Cs()||Qt("CrKey")||Qt("PC=EOS")||Qt("Hisense")||Qt("VIDAA"))&&(t=!1),t&&navigator.mediaCapabilities||(navigator.mediaCapabilities||(navigator.mediaCapabilities={}),ud=navigator.mediaCapabilities,navigator.mediaCapabilities.decodingInfo=hT)}function hT(t){var i,o,u,l,h,p,m,w,C,_,D,b,U,K,Z,B,X;return j(function(ge){switch(ge.g){case 1:if(i={supported:!1,powerEfficient:!0,smooth:!0,keySystemAccess:null,configuration:t},!t)return ge.return(i);if(o=t.video,u=t.audio,t.type=="media-source"){if(!Tr())return ge.return(i);if(o){if(Qt("CrKey")){if(!S.cast)throw new oe(2,8,8e3);if(cast.__platform__&&cast.__platform__.canDisplayType){var ne=o.contentType;o.width&&o.height&&(ne+="; width="+o.width+"; height="+o.height),o.framerate&&(ne+="; framerate="+o.framerate),o.transferFunction==="pq"&&(ne+="; eotf=smpte2084"),ne=cast.__platform__.canDisplayType(ne)}else ne=ii(o.contentType)}else ne=ii(o.contentType);if(l=ne,!l)return ge.return(i)}if(u&&(h=u.contentType,p=ii(h),!p))return ge.return(i)}else if(t.type=="file"){if(o&&(m=o.contentType,w=Is(m),!w)||u&&(C=u.contentType,_=Is(C),!_))return ge.return(i)}else return ge.return(i);return t.keySystemConfiguration?(D=t.keySystemConfiguration,b=[],U=[],D.audio&&(K={robustness:D.audio.robustness||"",contentType:t.audio.contentType},b.push(K)),D.video&&(Z={robustness:D.video.robustness||"",contentType:t.video.contentType},U.push(Z)),B={initDataTypes:[D.initDataType],distinctiveIdentifier:D.distinctiveIdentifier,persistentState:D.persistentState,sessionTypes:D.sessionTypes},b.length&&(B.audioCapabilities=b),U.length&&(B.videoCapabilities=U),ye(ge,3),k(ge,navigator.requestMediaKeySystemAccess(D.keySystem,[B]),5)):(i.supported=!0,ge.return(Promise.resolve(i)));case 5:X=ge.h,_e(ge,4);break;case 3:we(ge);case 4:X&&(i.supported=!0,i.keySystemAccess=X);case 2:return ge.return(i)}})}Gn.MediaCapabilities=ua,ua.install=_l;var ud=null;ua.originalMcap=ud,ui(_l,-1);function H0(){}function W0(){var t=Pd();S.MediaSource&&(S.cast&&cast.__platform__&&cast.__platform__.canDisplayType?mT():t?12>=t?(fT(),pT()):fT():(Qt("Tizen 2")||Qt("Tizen 3")||Qt("Tizen 4"))&&gT()),S.MediaSource&&MediaSource.isTypeSupported('video/webm; codecs="vp9"')&&!MediaSource.isTypeSupported('video/webm; codecs="vp09.00.10.08"')&&vT()}function fT(){var t=MediaSource.prototype.addSourceBuffer;MediaSource.prototype.addSourceBuffer=function(){var i=t.apply(this,fn.apply(0,arguments));return i.abort=function(){},i}}function pT(){var t=SourceBuffer.prototype.remove;SourceBuffer.prototype.remove=function(i,o){return t.call(this,i,o-.001)}}function gT(){var t=MediaSource.isTypeSupported;MediaSource.isTypeSupported=function(i){return $r(i)[0]!="opus"&&t(i)}}function mT(){var t=MediaSource.isTypeSupported;MediaSource.isTypeSupported=function(i){var o=i.split(/ *; */);return o.shift(),o.some(function(u){return u.startsWith("codecs=")})?cast.__platform__.canDisplayType(i):t(i)}}function vT(){var t=MediaSource.isTypeSupported;Qt("Web0S")||(MediaSource.isTypeSupported=function(i){var o=i.split(/ *; */),u=o.findIndex(function(p){return p.startsWith("codecs=")});if(0>u)return t(i);var l=o[u].replace("codecs=","").replace(/"/g,"").split(/\s*,\s*/),h=l.findIndex(function(p){return p.startsWith("vp09")});return 0<=h&&(l[h]="vp9",o[u]='codecs="'+l.join(",")+'"',i=o.join("; ")),t(i)})}Gn.MediaSource=H0,H0.install=W0,ui(W0);function aa(){}function ep(){screen.orientation||S.orientation!=null&&yT()}function yT(){function t(){switch(S.orientation){case-90:i.type="landscape-secondary",i.angle=270;break;case 0:i.type="portrait-primary",i.angle=0;break;case 90:i.type="landscape-primary",i.angle=90;break;case 180:i.type="portrait-secondary",i.angle=180}}var i=new tp;screen.orientation=i,t(),S.addEventListener("orientationchange",function(){t();var o=new dt("change");i.dispatchEvent(o)})}Gn.Orientation=aa,aa.install=ep;function tp(){kt.call(this),this.type="",this.angle=0}Te(tp,kt),tp.prototype.lock=function(t){function i(u){return screen.lockOrientation?screen.lockOrientation(u):screen.mozLockOrientation?screen.mozLockOrientation(u):screen.msLockOrientation?screen.msLockOrientation(u):!1}var o=!1;switch(t){case"natural":o=i("default");break;case"any":o=!0,this.unlock();break;default:o=i(t)}return o?Promise.resolve():(t=Error("screen.orientation.lock() is not available on this device"),t.name="NotSupportedError",t.code=DOMException.NOT_SUPPORTED_ERR,Promise.reject(t))},tp.prototype.unlock=function(){screen.unlockOrientation?screen.unlockOrientation():screen.mozUnlockOrientation?screen.mozUnlockOrientation():screen.msUnlockOrientation&&screen.msUnlockOrientation()},ui(ep);function np(){}var ip,rp,op,q0,X0,Y0;function ZA(t,i){try{var o=new sp(t,i);return Promise.resolve(o)}catch(u){return Promise.reject(u)}}function xT(t){var i=this.mediaKeys;return i&&i!=t&&up(i,null),delete this.mediaKeys,(this.mediaKeys=t)?up(t,this):Promise.resolve()}function TT(t){if(t=$e(t.initData),Oi(t).getUint32(0,!0)+4!=t.byteLength)throw new RangeError("Malformed FairPlay init data");t=wr(t.subarray(4),!0),t=To(t);var i=new Event("encrypted");i.initDataType="skd",i.initData=yt(t),this.dispatchEvent(i)}Gn.PatchedMediaKeysApple=np,np.uninstall=function(){ip&&(ip=!1,Object.defineProperty(HTMLMediaElement.prototype,"mediaKeys",rp),HTMLMediaElement.prototype.setMediaKeys=op,S.MediaKeys=q0,S.MediaKeySystemAccess=X0,navigator.requestMediaKeySystemAccess=Y0,rp=Y0=op=X0=q0=null,S.shakaMediaKeysPolyfill=!1)},np.install=function(t){S.HTMLVideoElement&&S.WebKitMediaKeys&&(t!==void 0&&t&&(ip=!0,rp=Object.getOwnPropertyDescriptor(HTMLMediaElement.prototype,"mediaKeys"),op=HTMLMediaElement.prototype.setMediaKeys,q0=S.MediaKeys,X0=S.MediaKeySystemAccess,Y0=navigator.requestMediaKeySystemAccess),delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=xT,S.MediaKeys=la,S.MediaKeySystemAccess=sp,navigator.requestMediaKeySystemAccess=ZA,S.shakaMediaKeysPolyfill=!0)};function sp(t,i){if(this.keySystem=t,t.startsWith("com.apple.fps"))for(t=A(i),i=t.next();!i.done;i=t.next()){var o=i.value;if(o.persistentState=="required")i=null;else{i={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:o.initDataTypes,sessionTypes:["temporary"],label:o.label};var u=!1,l=!1;if(o.audioCapabilities)for(var h=A(o.audioCapabilities),p=h.next();!p.done;p=h.next())p=p.value,p.contentType&&(u=!0,WebKitMediaKeys.isTypeSupported(this.keySystem,p.contentType.split(";")[0])&&(i.audioCapabilities.push(p),l=!0));if(o.videoCapabilities)for(o=A(o.videoCapabilities),p=o.next();!p.done;p=o.next())h=p.value,h.contentType&&(u=!0,WebKitMediaKeys.isTypeSupported(this.keySystem,h.contentType.split(";")[0])&&(i.videoCapabilities.push(h),l=!0));u||(l=WebKitMediaKeys.isTypeSupported(this.keySystem,"video/mp4")),i=l?i:null}if(i){this.g=i;return}}throw t=Error("Unsupported keySystem"),t.name="NotSupportedError",t.code=DOMException.NOT_SUPPORTED_ERR,t}sp.prototype.createMediaKeys=function(){var t=new la(this.keySystem);return Promise.resolve(t)},sp.prototype.getConfiguration=function(){return this.g};function la(t){this.h=new WebKitMediaKeys(t),this.g=new Xt}la.prototype.createSession=function(t){if(t=t||"temporary",t!="temporary")throw new TypeError("Session type "+t+" is unsupported on this platform.");return new ad(this.h)},la.prototype.setServerCertificate=function(){return Promise.resolve(!1)};function up(t,i){if(t.g.nb(),!i)return Promise.resolve();t.g.C(i,"webkitneedkey",TT);try{return io(i,HTMLMediaElement.HAVE_METADATA,t.g,function(){i.webkitSetMediaKeys(t.h)}),Promise.resolve()}catch(o){return Promise.reject(o)}}function ad(t){kt.call(this),this.i=null,this.l=t,this.g=this.h=null,this.j=new Xt,this.sessionId="",this.expiration=NaN,this.closed=new Wt,this.keyStatuses=new ap}Te(ad,kt),v=ad.prototype,v.generateRequest=function(t,i){var o=this;this.h=new Wt;try{var u=this.l.createSession("video/mp4",$e(i));this.i=u,this.sessionId=u.sessionId||"",this.j.C(this.i,"webkitkeymessage",function(l){o.h&&(o.h.resolve(),o.h=null),l=new Map().set("messageType",o.keyStatuses.Eb()==null?"license-request":"license-renewal").set("message",yt(l.message)),l=new dt("message",l),o.dispatchEvent(l)}),this.j.C(u,"webkitkeyadded",function(){o.g&&(Rl(o,"usable"),o.g.resolve(),o.g=null)}),this.j.C(u,"webkitkeyerror",function(){var l=Error("EME PatchedMediaKeysApple key error");if(l.errorCode=o.i.error,o.h!=null)o.h.reject(l),o.h=null;else if(o.g!=null)o.g.reject(l),o.g=null;else switch(o.i.error.code){case WebKitMediaKeyError.MEDIA_KEYERR_OUTPUT:case WebKitMediaKeyError.MEDIA_KEYERR_HARDWARECHANGE:Rl(o,"output-not-allowed");break;default:Rl(o,"internal-error")}}),Rl(this,"status-pending")}catch(l){this.h.reject(l)}return this.h},v.load=function(){return Promise.reject(Error("MediaKeySession.load not yet supported"))},v.update=function(t){this.g=new Wt;try{this.i.update($e(t))}catch(i){this.g.reject(i)}return this.g},v.close=function(){try{this.i.close(),this.closed.resolve(),this.j.nb()}catch(t){this.closed.reject(t)}return this.closed},v.remove=function(){return Promise.reject(Error("MediaKeySession.remove is only applicable for persistent licenses, which are not supported on this platform"))};function Rl(t,i){var o=t.keyStatuses;o.size=i==null?0:1,o.g=i,i=new dt("keystatuseschange"),t.dispatchEvent(i)}function ap(){this.size=0,this.g=void 0}v=ap.prototype,v.Eb=function(){return this.g},v.forEach=function(t){this.g&&t(this.g,sh.value())},v.get=function(t){if(this.has(t))return this.g},v.has=function(t){var i=sh.value();return!!(this.g&&Xr(t,i))},v.entries=function(){},v.keys=function(){},v.values=function(){};function lp(){}function cp(){!S.HTMLVideoElement||navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration||(navigator.requestMediaKeySystemAccess=$0,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=JA,S.MediaKeys=Q0,S.MediaKeySystemAccess=Z0,S.shakaMediaKeysPolyfill=!0)}function $0(){return Promise.reject(Error("The key system specified is not supported."))}function JA(t){return t==null?Promise.resolve():Promise.reject(Error("MediaKeys not supported."))}Gn.PatchedMediaKeysNop=lp,lp.install=cp;function Q0(){throw new TypeError("Illegal constructor.")}Q0.prototype.createSession=function(){},Q0.prototype.setServerCertificate=function(){};function Z0(){throw this.keySystem="",new TypeError("Illegal constructor.")}Z0.prototype.getConfiguration=function(){},Z0.prototype.createMediaKeys=function(){},ui(cp,-10);function ld(){}function cd(){if(!(!S.HTMLVideoElement||navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration)){if(HTMLMediaElement.prototype.webkitGenerateKeyRequest)gd="webkit";else if(!HTMLMediaElement.prototype.generateKeyRequest)return;navigator.requestMediaKeySystemAccess=J0,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=hp,S.MediaKeys=hd,S.MediaKeySystemAccess=dd,S.shakaMediaKeysPolyfill=!0}}function dp(t){var i=gd;return i?i+t.charAt(0).toUpperCase()+t.slice(1):t}function J0(t,i){try{var o=new dd(t,i);return Promise.resolve(o)}catch(u){return Promise.reject(u)}}function hp(t){var i=this.mediaKeys;return i&&i!=t&&ev(i,null),delete this.mediaKeys,(this.mediaKeys=t)&&ev(t,this),Promise.resolve()}Gn.PatchedMediaKeysWebkit=ld,ld.install=cd;function dd(t,i){this.g=this.keySystem=t;var o=!1;t=="org.w3.clearkey"&&(this.g="webkit-org.w3.clearkey",o=!1);var u=!1,l=document.getElementsByTagName("video");l=l.length?l[0]:document.createElement("video"),i=A(i);for(var h=i.next();!h.done;h=i.next()){h=h.value;var p={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:h.initDataTypes,sessionTypes:["temporary"],label:h.label},m=!1;if(h.audioCapabilities)for(var w=A(h.audioCapabilities),C=w.next();!C.done;C=w.next())C=C.value,C.contentType&&(m=!0,l.canPlayType(C.contentType.split(";")[0],this.g)&&(p.audioCapabilities.push(C),u=!0));if(h.videoCapabilities)for(w=A(h.videoCapabilities),C=w.next();!C.done;C=w.next())C=C.value,C.contentType&&(m=!0,l.canPlayType(C.contentType,this.g)&&(p.videoCapabilities.push(C),u=!0));if(m||(u=l.canPlayType("video/mp4",this.g)||l.canPlayType("video/webm",this.g)),h.persistentState=="required"&&(o?(p.persistentState="required",p.sessionTypes=["persistent-license"]):u=!1),u){this.h=p;return}}throw o="Unsupported keySystem",(t=="org.w3.clearkey"||t=="com.widevine.alpha")&&(o="None of the requested configurations were supported."),t=Error(o),t.name="NotSupportedError",t.code=DOMException.NOT_SUPPORTED_ERR,t}dd.prototype.createMediaKeys=function(){var t=new hd(this.g);return Promise.resolve(t)},dd.prototype.getConfiguration=function(){return this.h};function hd(t){this.l=t,this.h=null,this.g=new Xt,this.i=[],this.j=new Map}function ev(t,i){t.h=i,t.g.nb();var o=gd;i&&(t.g.C(i,o+"needkey",function(u){var l=new CustomEvent("encrypted");l.initDataType="cenc",l.initData=yt(u.initData),t.h.dispatchEvent(l)}),t.g.C(i,o+"keymessage",function(u){var l=tv(t,u.sessionId);l&&(u=new Map().set("messageType",l.keyStatuses.Eb()==null?"licenserequest":"licenserenewal").set("message",u.message),u=new dt("message",u),l.h&&(l.h.resolve(),l.h=null),l.dispatchEvent(u))}),t.g.C(i,o+"keyadded",function(u){(u=tv(t,u.sessionId))&&(pd(u,"usable"),u.g&&u.g.resolve(),u.g=null)}),t.g.C(i,o+"keyerror",function(u){var l=tv(t,u.sessionId);l&&l.handleError(u)}))}hd.prototype.createSession=function(t){if(t=t||"temporary",t!="temporary"&&t!="persistent-license")throw new TypeError("Session type "+t+" is unsupported on this platform.");var i=this.h||document.createElement("video");return i.src||(i.src="about:blank"),t=new nv(i,this.l,t),this.i.push(t),t},hd.prototype.setServerCertificate=function(){return Promise.resolve(!1)};function tv(t,i){var o=t.j.get(i);return o||((o=t.i.shift())?(o.sessionId=i,t.j.set(i,o),o):null)}function nv(t,i,o){kt.call(this),this.j=t,this.m=!1,this.g=this.h=null,this.i=i,this.l=o,this.sessionId="",this.expiration=NaN,this.closed=new Wt,this.keyStatuses=new iv}Te(nv,kt),v=nv.prototype,v.handleError=function(t){var i=Error("EME v0.1b key error"),o=t.errorCode;o.systemCode=t.systemCode,i.errorCode=o,!t.sessionId&&this.h?(t.systemCode==45&&(i.message="Unsupported session type."),this.h.reject(i),this.h=null):t.sessionId&&this.g?(this.g.reject(i),this.g=null):(i=t.systemCode,t.errorCode.code==MediaKeyError.MEDIA_KEYERR_OUTPUT?pd(this,"output-restricted"):i==1?pd(this,"expired"):pd(this,"internal-error"))};function fp(t,i,o){if(t.m)return Promise.reject(Error("The session is already initialized."));t.m=!0;try{if(t.l=="persistent-license")if(o)var u=$e(To("LOAD_SESSION|"+o));else{var l=To("PERSISTENT|");u=Ci(l,i)}else u=$e(i)}catch(p){return Promise.reject(p)}t.h=new Wt;var h=dp("generateKeyRequest");try{t.j[h](t.i,u)}catch(p){if(p.name!="InvalidStateError")return t.h=null,Promise.reject(p);new ht(function(){try{t.j[h](t.i,u)}catch(m){t.h.reject(m),t.h=null}}).N(.01)}return t.h}function fd(t,i,o){if(t.g)t.g.then(function(){return fd(t,i,o)}).catch(function(){return fd(t,i,o)});else{if(t.g=i,t.i=="webkit-org.w3.clearkey"){var u=an(o),l=JSON.parse(u);l.keys[0].kty!="oct"&&(t.g.reject(Error("Response is not a valid JSON Web Key Set.")),t.g=null),u=Bi(l.keys[0].k),l=Bi(l.keys[0].kid)}else u=$e(o),l=null;var h=dp("addKey");try{t.j[h](t.i,u,l,t.sessionId)}catch(p){t.g.reject(p),t.g=null}}}function pd(t,i){var o=t.keyStatuses;o.size=i==null?0:1,o.g=i,i=new dt("keystatuseschange"),t.dispatchEvent(i)}v.generateRequest=function(t,i){return fp(this,i,null)},v.load=function(t){return this.l=="persistent-license"?fp(this,null,t):Promise.reject(Error("Not a persistent session."))},v.update=function(t){var i=new Wt;return fd(this,i,t),i},v.close=function(){if(this.l!="persistent-license"){if(!this.sessionId)return this.closed.reject(Error("The session is not callable.")),this.closed;var t=dp("cancelKeyRequest");try{this.j[t](this.i,this.sessionId)}catch(i){}}return this.closed.resolve(),this.closed},v.remove=function(){return this.l!="persistent-license"?Promise.reject(Error("Not a persistent session.")):this.close()};function iv(){this.size=0,this.g=void 0}v=iv.prototype,v.Eb=function(){return this.g},v.forEach=function(t){this.g&&t(this.g,sh.value())},v.get=function(t){if(this.has(t))return this.g},v.has=function(t){var i=sh.value();return!!(this.g&&Xr(t,i))},v.entries=function(){},v.keys=function(){},v.values=function(){};var gd="";ui(cd);function wT(){}function ET(){if(S.HTMLVideoElement){var t=HTMLVideoElement.prototype;t.requestPictureInPicture&&document.exitPictureInPicture||!t.webkitSupportsPresentationMode||(document.pictureInPictureEnabled=!0,document.pictureInPictureElement=null,t.requestPictureInPicture=gp,Object.defineProperty(t,"disablePictureInPicture",{get:rv,set:ov,enumerable:!0,configurable:!0}),document.exitPictureInPicture=AT,document.addEventListener("webkitpresentationmodechanged",pp,!0))}}function pp(t){if(t=t.target,t.webkitPresentationMode=="picture-in-picture"){document.pictureInPictureElement=t;var i=new Event("enterpictureinpicture");t.dispatchEvent(i)}else document.pictureInPictureElement==t&&(document.pictureInPictureElement=null),i=new Event("leavepictureinpicture"),t.dispatchEvent(i)}function gp(){return this.webkitSupportsPresentationMode("picture-in-picture")?(this.webkitSetPresentationMode("picture-in-picture"),document.pictureInPictureElement=this,Promise.resolve()):Promise.reject(Error("PiP not allowed by video element"))}function AT(){var t=document.pictureInPictureElement;return t?(t.webkitSetPresentationMode("inline"),document.pictureInPictureElement=null,Promise.resolve()):Promise.reject(Error("No picture in picture element found"))}function rv(){return this.hasAttribute("disablePictureInPicture")?!0:!this.webkitSupportsPresentationMode("picture-in-picture")}function ov(t){t?this.setAttribute("disablePictureInPicture",""):this.removeAttribute("disablePictureInPicture")}Gn.PiPWebkit=wT,wT.install=ET,ui(ET);function sv(){}function mp(){S.crypto&&("randomUUID"in S.crypto||(S.crypto.randomUUID=vp))}function vp(){var t=URL.createObjectURL(new Blob),i=t.toString();return URL.revokeObjectURL(t),i.substr(i.lastIndexOf("/")+1)}Gn.RandomUUID=sv,sv.install=mp,ui(mp);function uv(){}function yp(){navigator.storage&&navigator.storage.estimate||!navigator.webkitTemporaryStorage||!navigator.webkitTemporaryStorage.queryUsageAndQuota||("storage"in navigator||(navigator.storage={}),navigator.storage.estimate=ST)}function ST(){return new Promise(function(t,i){navigator.webkitTemporaryStorage.queryUsageAndQuota(function(o,u){t({usage:o,quota:u})},i)})}Gn.StorageEstimate=uv,uv.install=yp,ui(yp);function av(){}function IT(){var t=Symbol.prototype;"description"in t||Object.defineProperty(t,"description",{get:eS})}function eS(){var t=/\((.*)\)/.exec(this.toString());return t?t[1]:void 0}Gn.Symbol=av,av.install=IT,ui(IT);function CT(){}function kT(){if(S.HTMLMediaElement){var t=HTMLMediaElement.prototype.play;HTMLMediaElement.prototype.play=function(){var i=t.apply(this);return i&&i.catch(function(){}),i}}}Gn.VideoPlayPromise=CT,CT.install=kT,ui(kT);function MT(){}function lv(){if(S.HTMLVideoElement){var t=HTMLVideoElement.prototype;!t.getVideoPlaybackQuality&&("webkitDroppedFrameCount"in t||ks())&&(t.getVideoPlaybackQuality=_T)}}function _T(){return{droppedVideoFrames:this.webkitDroppedFrameCount,totalVideoFrames:this.webkitDecodedFrameCount,corruptedVideoFrames:0,creationTime:NaN,totalFrameDelay:0}}Gn.VideoPlaybackQuality=MT,MT.install=lv,ui(lv);function RT(){}function cv(){if(!S.VTTCue&&S.TextTrackCue){var t=null,i=TextTrackCue.length;if(i==3)t=xp;else if(i==6)t=tS;else{try{var o=!!xp(1,2,"")}catch(u){o=!1}o&&(t=xp)}t&&(S.VTTCue=function(u,l,h){return t(u,l,h)})}}function xp(t,i,o){return new S.TextTrackCue(t,i,o)}function tS(t,i,o){return new S.TextTrackCue(t+"-"+i+"-"+o,t,i,o)}Gn.VTTCue=RT,RT.install=cv,ui(cv);function Ur(){}Ur.prototype.parseInit=function(){},Ur.prototype.setSequenceMode=function(){},Ur.prototype.parseMedia=function(t,i){var o=null,u=[];t=an(t).split(/\r?\n/),t=A(t);for(var l=t.next();!l.done;l=t.next())if((l=l.value)&&!/^\s+$/.test(l)&&(l=LT.exec(l))){var h=nS.exec(l[1]);h=60*parseInt(h[1],10)+parseFloat(h[2].replace(",",".")),l=new Ht(h,i.segmentEnd?i.segmentEnd:h+2,l[2]),o&&(o.endTime=h,u.push(o)),o=l}return o&&u.push(o),u},pe("shaka.text.LrcTextParser",Ur),Ur.prototype.parseMedia=Ur.prototype.parseMedia,Ur.prototype.setSequenceMode=Ur.prototype.setSequenceMode,Ur.prototype.parseInit=Ur.prototype.parseInit;var LT=/^\[(\d{1,2}:\d{1,2}(?:[.,]\d{1,3})?)\](.*)/,nS=/^(\d+):(\d{1,2}(?:[.,]\d{1,3})?)$/;vn["application/x-subtitle-lrc"]=function(){return new Ur};function pr(){}pr.prototype.parseInit=function(){},pr.prototype.setSequenceMode=function(){},pr.prototype.parseMedia=function(t,i){var o=an(t);if(t=[],o=="")return t;var u=za(o,"tt");if(!u)throw new oe(2,2,2005,"Failed to parse TTML.");if(o=u.getElementsByTagName("body")[0],!o)return[];var l=Io(u,ca,"frameRate"),h=Io(u,ca,"subFrameRate"),p=Io(u,ca,"frameRateMultiplier"),m=Io(u,ca,"tickRate"),w=Io(u,ca,"cellResolution"),C=u.getAttribute("xml:space")||"default",_=Io(u,Ip,"extent");if(C!="default"&&C!="preserve")throw new oe(2,2,2005,"Invalid xml:space value: "+C);C=C=="default",l=new bT(l,h,p,m),w=w&&(w=/^(\d+) (\d+)$/.exec(w))?{columns:parseInt(w[1],10),rows:parseInt(w[2],10)}:null,h=(h=u.getElementsByTagName("metadata")[0])?nc(h):[],p=Array.from(u.getElementsByTagName("style")),u=Array.from(u.getElementsByTagName("region")),m=[];for(var D=A(u),b=D.next();!b.done;b=D.next()){var U=b.value;b=new Aa;var K=U.getAttribute("xml:id");if(K){b.id=K;var Z=null;_&&(Z=pv.exec(_)||Ll.exec(_)),K=Z?Number(Z[1]):null,Z=Z?Number(Z[2]):null;var B,X;(B=md(U,p,"extent"))&&(B=(X=pv.exec(B))||Ll.exec(B),B!=null&&(b.width=Number(B[1]),b.height=Number(B[2]),X||(K!=null&&(b.width=100*b.width/K),Z!=null&&(b.height=100*b.height/Z)),b.widthUnits=X||K!=null?ri:0,b.heightUnits=X||Z!=null?ri:0)),(U=md(U,p,"origin"))&&(B=(X=pv.exec(U))||Ll.exec(U),B!=null&&(b.viewportAnchorX=Number(B[1]),b.viewportAnchorY=Number(B[2]),X||(Z!=null&&(b.viewportAnchorY=100*b.viewportAnchorY/Z),K!=null&&(b.viewportAnchorX=100*b.viewportAnchorX/K)),b.viewportAnchorUnits=X||K!=null?ri:0))}else b=null;b&&m.push(b)}if(tn(o,"p").length)throw new oe(2,2,2001,"<p> can only be inside <div> in TTML");for(_=A(tn(o,"div")),D=_.next();!D.done;D=_.next())if(tn(D.value,"span").length)throw new oe(2,2,2001,"<span> can only be inside <p> in TTML");return(i=dv(o,i,l,h,p,u,m,C,w,null,!1))&&(i.backgroundColor||(i.backgroundColor="transparent"),t.push(i)),t};function dv(t,i,o,u,l,h,p,m,w,C,_){var D=t.parentNode;if(t.nodeType==Node.COMMENT_NODE)return null;if(t.nodeType==Node.TEXT_NODE){if(!_)return null;var b=document.createElement("span");b.textContent=t.textContent}else b=t;for(var U=null,K=A(Nl),Z=K.next();!Z.done&&!(U=Ep(b,"backgroundImage",u,"#",Z.value)[0]);Z=K.next());if(K=_,(t.nodeName=="p"||U)&&(_=!0),m=(b.getAttribute("xml:space")||(m?"default":"preserve"))=="default",Z=Array.from(b.childNodes).every(function(ce){return ce.nodeType==Node.TEXT_NODE}),t=[],!Z)for(var B=A(b.childNodes),X=B.next();!X.done;X=B.next())(X=dv(X.value,i,o,u,l,h,p,m,w,b,_))&&t.push(X);u=C!=null,B=/\S/.test(b.textContent);var ge=b.hasAttribute("begin")||b.hasAttribute("end")||b.hasAttribute("dur");if(!(ge||B||b.tagName=="br"||t.length!=0||u&&!m))return null;for(X=DT(b,o),B=X.start,X=X.end;D&&D.nodeType==Node.ELEMENT_NODE&&D.tagName!="tt";)X=lo(D,o,B,X),B=X.start,X=X.end,D=D.parentNode;if(B==null&&(B=0),B+=i.periodStart,X=X==null?1/0:X+i.periodStart,B=Math.max(B,i.segmentStart),X=Math.min(X,i.segmentEnd),!ge&&0<t.length)for(B=1/0,X=0,i=A(t),o=i.next();!o.done;o=i.next())o=o.value,B=Math.min(B,o.startTime),X=Math.max(X,o.endTime);if(b.tagName=="br")return l=new Ht(B,X,""),l.lineBreak=!0,l;if(i="",Z&&(i=b.textContent,m&&(i=i.trim(),i=i.replace(/\s+/g," "))),i=new Ht(B,X,i),i.nestedCues=t,_||(i.isContainer=!0),w&&(i.cellResolution=w),w=Ep(b,"region",h,"")[0],b.hasAttribute("region")&&w&&w.getAttribute("xml:id")){var ne=w.getAttribute("xml:id");i.region=p.filter(function(ce){return ce.id==ne})[0]}return p=w,C&&u&&!b.getAttribute("region")&&!b.getAttribute("style")&&(p=Ep(C,"region",h,"")[0]),NT(i,b,p,U,l,K,t.length==0),i}function NT(t,i,o,u,l,h,p){if(h=h||p,ai(i,o,l,"direction",h)=="rtl"&&(t.direction="rtl"),p=ai(i,o,l,"writingMode",h),p=="tb"||p=="tblr"?t.writingMode="vertical-lr":p=="tbrl"?t.writingMode="vertical-rl":p=="rltb"||p=="rl"?t.direction="rtl":p&&(t.direction=Xp),(p=ai(i,o,l,"textAlign",!0))?(t.positionAlign=iS[p],t.lineAlign=vv[p],t.textAlign=Ta[p.toUpperCase()]):t.textAlign=Wr,(p=ai(i,o,l,"displayAlign",!0))&&(t.displayAlign=wa[p.toUpperCase()]),(p=ai(i,o,l,"color",h))&&(t.color=p),(p=ai(i,o,l,"backgroundColor",h))&&(t.backgroundColor=p),(p=ai(i,o,l,"border",h))&&(t.border=p),p=ai(i,o,l,"fontFamily",h))switch(p){case"monospaceSerif":t.fontFamily="Courier New,Liberation Mono,Courier,monospace";break;case"proportionalSansSerif":t.fontFamily="Arial,Helvetica,Liberation Sans,sans-serif";break;case"sansSerif":t.fontFamily="sans-serif";break;case"monospaceSansSerif":t.fontFamily="Consolas,monospace";break;case"proportionalSerif":t.fontFamily="serif";break;default:t.fontFamily=p}if((p=ai(i,o,l,"fontWeight",h))&&p=="bold"&&(t.fontWeight=700),p=ai(i,o,l,"wrapOption",h),t.wrapLine=!(p&&p=="noWrap"),(p=ai(i,o,l,"lineHeight",h))&&p.match(In)&&(t.lineHeight=p),(p=ai(i,o,l,"fontSize",h))&&(p.match(In)||p.match(PT))&&(t.fontSize=p),(p=ai(i,o,l,"fontStyle",h))&&(t.fontStyle=Nd[p.toUpperCase()]),u){p=u.getAttribute("imageType")||u.getAttribute("imagetype");var m=u.getAttribute("encoding");u=u.textContent.trim(),p=="PNG"&&m=="Base64"&&u&&(t.backgroundImage="data:image/png;base64,"+u)}(u=ai(i,o,l,"textOutline",h))&&(u=u.split(" "),u[0].match(In)?t.textStrokeColor=t.color:(t.textStrokeColor=u[0],u.shift()),u[0]&&u[0].match(In)?t.textStrokeWidth=u[0]:t.textStrokeColor=""),(u=ai(i,o,l,"letterSpacing",h))&&u.match(In)&&(t.letterSpacing=u),(u=ai(i,o,l,"linePadding",h))&&u.match(In)&&(t.linePadding=u),(h=ai(i,o,l,"opacity",h))&&(t.opacity=parseFloat(h)),(o=md(o,l,"textDecoration"))&&hv(t,o),(i=Tp(i,l,"textDecoration"))&&hv(t,i)}function hv(t,i){i=A(i.split(" "));for(var o=i.next();!o.done;o=i.next())switch(o.value){case"underline":t.textDecoration.includes("underline")||t.textDecoration.push("underline");break;case"noUnderline":t.textDecoration.includes("underline")&&Hr(t.textDecoration,"underline");break;case"lineThrough":t.textDecoration.includes("lineThrough")||t.textDecoration.push("lineThrough");break;case"noLineThrough":t.textDecoration.includes("lineThrough")&&Hr(t.textDecoration,"lineThrough");break;case"overline":t.textDecoration.includes("overline")||t.textDecoration.push("overline");break;case"noOverline":t.textDecoration.includes("overline")&&Hr(t.textDecoration,"overline")}}function ai(t,i,o,u,l){return l=l===void 0?!0:l,(t=Tp(t,o,u))?t:l?md(i,o,u):null}function md(t,i,o){if(!t)return null;var u=Io(t,Ip,o);return u||wp(t,i,o)}function Tp(t,i,o){var u=Io(t,Ip,o);return u||wp(t,i,o)}function wp(t,i,o){t=Ep(t,"style",i,"");for(var u=null,l=0;l<t.length;l++){var h=Ds(t[l],"urn:ebu:tt:style",o);h||(h=Io(t[l],Ip,o)),h||(h=Tp(t[l],i,o)),h&&(u=h)}return u}function Ep(t,i,o,u,l){var h=[];if(!t||1>o.length)return h;var p=t;for(t=null;p&&!(t=l?Ds(p,l,i):p.getAttribute(i))&&(p=p.parentNode,p instanceof Element););if(i=t){for(i=A(i.split(" ")),l=i.next();!l.done;l=i.next())for(l=l.value,t=A(o),p=t.next();!p.done;p=t.next())if(p=p.value,u+p.getAttribute("xml:id")==l){h.push(p);break}}return h}function lo(t,i,o,u){return t=DT(t,i),o==null?o=t.start:t.start!=null&&(o+=t.start),u==null?u=t.end:t.start!=null&&(u+=t.start),{start:o,end:u}}function DT(t,i){var o=fv(t.getAttribute("begin"),i),u=fv(t.getAttribute("end"),i);return t=fv(t.getAttribute("dur"),i),u==null&&t!=null&&(u=o+t),{start:o,end:u}}function fv(t,i){var o=null;if(Ap.test(t)){t=Ap.exec(t),o=Number(t[1]);var u=Number(t[2]),l=Number(t[3]),h=Number(t[4]);h+=(Number(t[5])||0)/i.h,l+=h/i.frameRate,o=l+60*u+3600*o}else if(gv.test(t))o=Xi(gv,t);else if(vd.test(t))o=Xi(vd,t);else if(OT.test(t))t=OT.exec(t),o=Number(t[1])/i.frameRate;else if(mv.test(t))t=mv.exec(t),o=Number(t[1])/i.g;else if(Sp.test(t))o=Xi(Sp,t);else if(t)throw new oe(2,2,2001,"Could not parse cue time range in TTML");return o}function Xi(t,i){return t=t.exec(i),t==null||t[0]==""?null:(Number(t[4])||0)/1e3+(Number(t[3])||0)+60*(Number(t[2])||0)+3600*(Number(t[1])||0)}pe("shaka.text.TtmlTextParser",pr),pr.prototype.parseMedia=pr.prototype.parseMedia,pr.prototype.setSequenceMode=pr.prototype.setSequenceMode,pr.prototype.parseInit=pr.prototype.parseInit;function bT(t,i,o,u){this.frameRate=Number(t)||30,this.h=Number(i)||1,this.g=Number(u),this.g==0&&(this.g=t?this.frameRate*this.h:1),o&&(t=/^(\d+) (\d+)$/g.exec(o))&&(this.frameRate*=Number(t[1])/Number(t[2]))}var pv=/^(\d{1,2}(?:\.\d+)?|100(?:\.0+)?)% (\d{1,2}(?:\.\d+)?|100(?:\.0+)?)%$/,PT=/^(\d{1,2}(?:\.\d+)?|100)%$/,In=/^(\d+px|\d+em|\d*\.?\d+c)$/,Ll=/^(\d+)px (\d+)px$/,Ap=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,gv=/^(?:(\d{2,}):)?(\d{2}):(\d{2})$/,vd=/^(?:(\d{2,}):)?(\d{2}):(\d{2}\.\d{2,})$/,OT=/^(\d*(?:\.\d*)?)f$/,mv=/^(\d*(?:\.\d*)?)t$/,Sp=RegExp("^(?:(\\d*(?:\\.\\d*)?)h)?(?:(\\d*(?:\\.\\d*)?)m)?(?:(\\d*(?:\\.\\d*)?)s)?(?:(\\d*(?:\\.\\d*)?)ms)?$"),vv={left:cu,center:"center",right:"end",start:cu,end:"end"},iS={left:"line-left",center:"center",right:"line-right"},ca=["http://www.w3.org/ns/ttml#parameter","http://www.w3.org/2006/10/ttaf1#parameter"],Ip=["http://www.w3.org/ns/ttml#styling","http://www.w3.org/2006/10/ttaf1#styling"],Nl=["http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt","http://www.smpte-ra.org/schemas/2052-1/2013/smpte-tt"];vn["application/ttml+xml"]=function(){return new pr};function xi(){this.g=new pr}xi.prototype.parseInit=function(t){var i=!1;if(new Vt().box("moov",Jt).box("trak",Jt).box("mdia",Jt).box("minf",Jt).box("stbl",Jt).P("stsd",is).box("stpp",function(o){i=!0,o.parser.stop()}).parse(t),!i)throw new oe(2,2,2007)},xi.prototype.setSequenceMode=function(){},xi.prototype.parseMedia=function(t,i){var o=this,u=!1,l=[];if(new Vt().box("mdat",Oa(function(h){u=!0,l=l.concat(o.g.parseMedia(h,i))})).parse(t,!1),!u)throw new oe(2,2,2007);return l},pe("shaka.text.Mp4TtmlParser",xi),xi.prototype.parseMedia=xi.prototype.parseMedia,xi.prototype.setSequenceMode=xi.prototype.setSequenceMode,xi.prototype.parseInit=xi.prototype.parseInit,vn['application/mp4; codecs="stpp"']=function(){return new xi},vn['application/mp4; codecs="stpp.ttml"']=function(){return new xi},vn['application/mp4; codecs="stpp.ttml.im1t"']=function(){return new xi},vn['application/mp4; codecs="stpp.TTML.im1t"']=function(){return new xi};function _i(){this.g=!1}_i.prototype.parseInit=function(){},_i.prototype.setSequenceMode=function(t){this.g=t},_i.prototype.parseMedia=function(t,i){t=an(t),t=t.replace(/\r\n|\r(?=[^\n]|$)/gm,"\n");var o=t.split(/\n{2,}/m);if(!/^WEBVTT($|[ \t\n])/m.test(o[0]))throw new oe(2,2,2e3);if(t=i.vttOffset,o[0].includes("X-TIMESTAMP-MAP")&&this.g){var u=o[0].match(/LOCAL:((?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{3}))/m),l=o[0].match(/MPEGTS:(\d+)/m);if(u&&l){if(t=Cp(new qs(u[1])),t==null)throw new oe(2,2,2e3);for(l=Number(l[1]),u=i.segmentStart-i.periodStart;95443.7176888889<=u;)u-=95443.7176888889,l+=8589934592;t=i.periodStart+l/9e4-t}}for(i=[],l=A(o[0].split("\n")),u=l.next();!u.done;u=l.next())if(u=u.value,/^Region:/.test(u)){u=new qs(u);var h=new Aa;Yt(u),Xs(u);for(var p=Yt(u);p;){var m=h,w=p;(p=/^id=(.*)$/.exec(w))?m.id=p[1]:(p=/^width=(\d{1,2}|100)%$/.exec(w))?m.width=Number(p[1]):(p=/^lines=(\d+)$/.exec(w))?(m.height=Number(p[1]),m.heightUnits=2):(p=/^regionanchor=(\d{1,2}|100)%,(\d{1,2}|100)%$/.exec(w))?(m.regionAnchorX=Number(p[1]),m.regionAnchorY=Number(p[2])):(p=/^viewportanchor=(\d{1,2}|100)%,(\d{1,2}|100)%$/.exec(w))?(m.viewportAnchorX=Number(p[1]),m.viewportAnchorY=Number(p[2])):/^scroll=up$/.exec(w)&&(m.scroll="up"),Xs(u),p=Yt(u)}i.push(h)}for(l=new Map,yv(l),u=[],o=A(o.slice(1)),h=o.next();!h.done;h=o.next()){if(h=h.value.split("\n"),(h.length!=1||h[0])&&!/^NOTE($|[ \t])/.test(h[0])&&h[0]=="STYLE"){for(m=[],p=-1,w=1;w<h.length;w++)h[w].includes("::cue")&&(m.push([]),p=m.length-1),p!=-1&&(m[p].push(h[w]),h[w].includes("}")&&(p=-1));for(m=A(m),p=m.next();!p.done;p=m.next()){var C=p.value;p="global",(w=C[0].match(/\((.*)\)/))&&(p=w.pop()),w=C.slice(1,-1),C[0].includes("}")&&(C=/\{(.*?)\}/.exec(C[0]))&&(w=C[1].split(";")),(C=l.get(p))||(C=new Ht(0,0,""));for(var _=!1,D=0;D<w.length;D++){var b=/^\s*([^:]+):\s*(.*)/.exec(w[D]);if(b){var U=b[2].trim().replace(";","");switch(b[1].trim()){case"background-color":case"background":_=!0,C.backgroundColor=U;break;case"color":_=!0,C.color=U;break;case"font-family":_=!0,C.fontFamily=U;break;case"font-size":_=!0,C.fontSize=U;break;case"font-weight":(700<=parseInt(U,10)||U=="bold")&&(_=!0,C.fontWeight=700);break;case"font-style":switch(U){case"normal":_=!0,C.fontStyle=se;break;case"italic":_=!0,C.fontStyle="italic";break;case"oblique":_=!0,C.fontStyle="oblique"}break;case"opacity":_=!0,C.opacity=parseFloat(U);break;case"text-shadow":_=!0,C.textShadow=U;break;case"white-space":_=!0,C.wrapLine=U!="noWrap"}}}_&&l.set(p,C)}}if(_=t,h.length==1&&!h[0]||/^NOTE($|[ \t])/.test(h[0])||h[0]=="STYLE"||h[0]=="REGION")h=null;else{if(m=null,h[0].includes("-->")||(m=h[0],h.splice(0,1)),p=new qs(h[0]),w=Cp(p),D=Je(p,/[ \t]+--\x3e[ \t]+/g),C=Cp(p),w==null||D==null||C==null)throw new oe(2,2,2001,"Could not parse cue time range in WebVTT");for(w+=_,C+=_,_=xd(h.slice(1).join("\n").trim()),l.has("global")?(h=l.get("global").clone(),h.startTime=w,h.endTime=C,h.payload=""):h=new Ht(w,C,""),xv(_,h,l),Xs(p),w=Yt(p);w;)wv(h,w,i),Xs(p),w=Yt(p);m!=null&&(h.id=m)}h&&u.push(h)}return u};function yv(t){for(var i=A(Object.entries(Yv)),o=i.next();!o.done;o=i.next()){var u=A(o.value);o=u.next().value,u=u.next().value;var l=new Ht(0,0,"");l.color=u,t.set("."+o,l)}for(i=A(Object.entries(du)),o=i.next();!o.done;o=i.next())u=A(o.value),o=u.next().value,u=u.next().value,l=new Ht(0,0,""),l.backgroundColor=u,t.set("."+o,l)}function xv(t,i,o){o.size===0&&yv(o);e:{var u=t;t=[];for(var l=-1,h="",p=0;p<u.length;p++)if(u[p]==="/"&&0<p&&u[p-1]==="<"){var m=u.indexOf(">",p);if(m<=p){t=u;break e}if((m=u.substring(p+1,m))&&m==="c"){var w=t.pop();w?w===m?(h+="/"+m+">",p+=m.length+1):w.startsWith("c.")?(p+=m.length+1,h+="/"+w+">"):h+=u[p]:h+=u[p]}else h+=u[p]}else u[p]==="<"?(l=p+1,u[l]!="c"&&(l=-1)):u[p]===">"&&0<l&&(t.push(u.substr(l,p-l)),l=-1),h+=u[p];t=h}for(u=[],h=-1,l=0;l<t.length;l++)t[l]==="<"?h=l+1:t[l]===">"&&0<h&&(h=t.substr(h,l-h),h.match(Td)&&u.push(h),h=-1);for(u=A(u),l=u.next();!l.done;l=u.next())l=l.value,t=t.replace("<"+l+">",'<div time="'+l+'">'),t+="</div>";e:{for(l=t,h=[],p=-1,u="",t=!1,m=0;m<l.length;m++)if(l[m]==="/"){if(w=l.indexOf(">",m),w===-1){t=l;break e}if((w=l.substring(m+1,w))&&w=="v"){t=!0;var C=null;if(h.length&&(C=h[h.length-1]),C){if(C===w)u+="/"+w+">";else{if(!C.startsWith("v")){u+=l[m];continue}u+="/"+C+">"}m+=w.length+1}else u+=l[m]}else u+=l[m]}else l[m]==="<"?(p=m+1,l[p]!="v"&&(p=-1)):l[m]===">"&&0<p&&(h.push(l.substr(p,m-p)),p=-1),u+=l[m];for(l=A(h),h=l.next();!h.done;h=l.next())h=h.value,p=h.replace(" ",".voice-"),u=u.replace("<"+h+">","<"+p+">"),u=u.replace("</"+h+">","</"+p+">"),t||(u+="</"+p+">");t=u}if(l=za("<span>"+t+"</span>","span")){if(u=[],l=l.childNodes,l.length==1&&(h=l[0],h.nodeType==Node.TEXT_NODE||h.nodeType==Node.CDATA_SECTION_NODE)){i.payload=t;return}for(t=A(l),l=t.next();!l.done;l=t.next())Tv(l.value,i,u,o);i.nestedCues=u}else i.payload=t}function yd(t,i){return t&&0<t.length?t:i}function Tv(t,i,o,u){var l=i.clone();if(t.nodeType===Node.ELEMENT_NODE&&t.nodeName)for(var h=A(t.nodeName.split(/(?=[ .])+/g)),p=h.next();!p.done;p=h.next()){var m=p=p.value;if(m.startsWith(".voice-")){var w=m.split("-").pop();m='v[voice="'+w+'"]',u.has(m)||(m="v[voice="+w+"]")}switch(u.has(m)&&(m=u.get(m))&&(l.backgroundColor=yd(m.backgroundColor,l.backgroundColor),l.color=yd(m.color,l.color),l.fontFamily=yd(m.fontFamily,l.fontFamily),l.fontSize=yd(m.fontSize,l.fontSize),l.fontWeight=m.fontWeight,l.fontStyle=m.fontStyle,l.opacity=m.opacity,l.wrapLine=m.wrapLine),p){case"br":p=i.clone(),p.lineBreak=!0,o.push(p);break;case"b":l.fontWeight=700;break;case"i":l.fontStyle="italic";break;case"u":l.textDecoration.push("underline");break;case"div":(p=t.getAttribute("time"))&&(p=Cp(new qs(p)))&&(l.startTime=p)}}if(ic(t))for(h=!0,u=A(t.textContent.split("\n")),t=u.next();!t.done;t=u.next())t=t.value,h||(h=i.clone(),h.lineBreak=!0,o.push(h)),0<t.length&&(h=l.clone(),h.payload=t,o.push(h)),h=!1;else for(i=A(t.childNodes),t=i.next();!t.done;t=i.next())Tv(t.value,l,o,u)}function wv(t,i,o){var u;(u=/^align:(start|middle|center|end|left|right)$/.exec(i))?(i=u[1],i=="middle"?t.textAlign=Wr:t.textAlign=Ta[i.toUpperCase()]):(u=/^vertical:(lr|rl)$/.exec(i))?t.writingMode=u[1]=="lr"?"vertical-lr":"vertical-rl":(u=/^size:([\d.]+)%$/.exec(i))?t.size=Number(u[1]):(u=/^position:([\d.]+)%(?:,(line-left|line-right|center|start|end))?$/.exec(i))?(t.position=Number(u[1]),u[2]&&(i=u[2],t.positionAlign=i=="line-left"||i=="start"?"line-left":i=="line-right"||i=="end"?"line-right":"center")):(u=/^region:(.*)$/.exec(i))?(i=rS(o,u[1]))&&(t.region=i):(o=/^line:([\d.]+)%(?:,(start|end|center))?$/.exec(i))?(t.lineInterpretation=1,t.line=Number(o[1]),o[2]&&(t.lineAlign=$p[o[2].toUpperCase()])):(o=/^line:(-?\d+)(?:,(start|end|center))?$/.exec(i))&&(t.lineInterpretation=Yp,t.line=Number(o[1]),o[2]&&(t.lineAlign=$p[o[2].toUpperCase()]))}function rS(t,i){return t=t.filter(function(o){return o.id==i}),t.length?t[0]:null}function Cp(t){if(t=Je(t,Td),t==null)return null;var i=Number(t[2]),o=Number(t[3]);return 59<i||59<o?null:Number(t[4])/1e3+o+60*i+3600*(Number(t[1])||0)}function xd(t){var i={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&nbsp;":" ","&lrm;":"‎","&rlm;":"‏"},o=/&(?:amp|lt|gt|quot|#(0+)?39|nbsp|lrm|rlm);/g,u=RegExp(o.source);return t&&u.test(t)?t.replace(o,function(l){return i[l]||"'"}):t||""}pe("shaka.text.VttTextParser",_i),_i.prototype.parseMedia=_i.prototype.parseMedia,_i.prototype.setSequenceMode=_i.prototype.setSequenceMode,_i.prototype.parseInit=_i.prototype.parseInit;var Td=/(?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{2,3})/g;vn["text/vtt"]=function(){return new _i},vn['text/vtt; codecs="vtt"']=function(){return new _i},vn['text/vtt; codecs="wvtt"']=function(){return new _i};function co(){this.g=null}co.prototype.parseInit=function(t){var i=this,o=!1;if(new Vt().box("moov",Jt).box("trak",Jt).box("mdia",Jt).P("mdhd",function(u){u=pc(u.reader,u.version),i.g=u.timescale}).box("minf",Jt).box("stbl",Jt).P("stsd",is).box("wvtt",function(){o=!0}).parse(t),!this.g)throw new oe(2,2,2008);if(!o)throw new oe(2,2,2008)},co.prototype.setSequenceMode=function(){},co.prototype.parseMedia=function(t,i){if(!this.g)throw new oe(2,2,2008);var o=0,u=[],l,h=[],p=!1,m=!1,w=!1,C=null;if(new Vt().box("moof",Jt).box("traf",Jt).P("tfdt",function(ne){p=!0,o=By(ne.reader,ne.version).we}).P("tfhd",function(ne){C=jy(ne.reader,ne.flags).Ce}).P("trun",function(ne){m=!0,u=Fy(ne.reader,ne.version,ne.flags).Re}).box("mdat",Oa(function(ne){w=!0,l=ne})).parse(t,!1),!w&&!p&&!m)throw new oe(2,2,2008);t=o;for(var _=new Ve(l,0),D=A(u),b=D.next();!b.done;b=D.next()){b=b.value;var U=b.ee||C,K=b.ed?o+b.ed:t;t=K+(U||0);var Z=0;do{var B=_.K();Z+=B;var X=_.K(),ge=null;Ar(X)=="vttc"?8<B&&(ge=_.Za(B-8)):_.skip(B-8),U&&ge&&(B=Yi(ge,i.periodStart+K/this.g,i.periodStart+t/this.g),h.push(B))}while(b.sampleSize&&Z<b.sampleSize)}return h.filter(Hn)};function Yi(t,i,o){var u,l,h;return new Vt().box("payl",Oa(function(p){u=an(p)})).box("iden",Oa(function(p){l=an(p)})).box("sttg",Oa(function(p){h=an(p)})).parse(t),u?$i(u,l,h,i,o):null}function $i(t,i,o,u,l){if(u=new Ht(u,l,""),xv(t,u,new Map),i&&(u.id=i),o)for(t=new qs(o),i=Yt(t);i;)wv(u,i,[]),Xs(t),i=Yt(t);return u}pe("shaka.text.Mp4VttParser",co),co.prototype.parseMedia=co.prototype.parseMedia,co.prototype.setSequenceMode=co.prototype.setSequenceMode,co.prototype.parseInit=co.prototype.parseInit,vn['application/mp4; codecs="wvtt"']=function(){return new co};function jr(){}jr.prototype.parseInit=function(){},jr.prototype.setSequenceMode=function(){},jr.prototype.parseMedia=function(t){var i=an(t).replace(/\r+/g,"");if(i=i.trim(),t=[],i=="")return t;i=A(i.split("\n\n"));for(var o=i.next();!o.done;o=i.next()){o=o.value.split("\n");var u=new qs(o[0]),l=Ev(u),h=Je(u,/,/g);if(u=Ev(u),l==null||h==null||u==null)throw new oe(2,2,2001,"Could not parse cue time range in SubViewer");t.push(new Ht(l,u,o.slice(1).join("\n").trim()))}return t};function Ev(t){if(t=Je(t,/(?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{2,3})/g),t==null)return null;var i=Number(t[2]),o=Number(t[3]);return 59<i||59<o?null:Number(t[4])/1e3+o+60*i+3600*(Number(t[1])||0)}pe("shaka.text.SbvTextParser",jr),jr.prototype.parseMedia=jr.prototype.parseMedia,jr.prototype.setSequenceMode=jr.prototype.setSequenceMode,jr.prototype.parseInit=jr.prototype.parseInit,vn["text/x-subviewer"]=function(){return new jr};function Ri(){this.g=new _i}Ri.prototype.parseInit=function(){},Ri.prototype.setSequenceMode=function(){},Ri.prototype.parseMedia=function(t,i){return t=an(t),t=Av(t),t=$e(To(t)),this.g.parseMedia(t,i)};function Av(t){var i="WEBVTT\n\n";if(t=="")return i;t=t.replace(/\r+/g,""),t=t.trim(),t=A(t.split("\n\n"));for(var o=t.next();!o.done;o=t.next())o=o.value.split(/\n/),o[0].match(/\d+/)&&o.shift(),o[0]=o[0].replace(/,/g,"."),i+=o.join("\n")+"\n\n";return i}pe("shaka.text.SrtTextParser",Ri),Ri.srt2webvtt=Av,Ri.prototype.parseMedia=Ri.prototype.parseMedia,Ri.prototype.setSequenceMode=Ri.prototype.setSequenceMode,Ri.prototype.parseInit=Ri.prototype.parseInit,vn["text/srt"]=function(){return new Ri};function Br(){}Br.prototype.parseInit=function(){},Br.prototype.setSequenceMode=function(){},Br.prototype.parseMedia=function(t){var i="",o="";t=an(t).split(/\r?\n\s*\r?\n/),t=A(t);for(var u=t.next();!u.done;u=t.next()){var l=jT.exec(u.value);l&&(u=l[1],l=l[2],u=="V4 Styles"||u=="V4+ Styles"?i=l:u=="Events"&&(o=l))}t=[],u=null,i=A(i.split(/\r?\n/));for(var h=i.next();!h.done;h=i.next())if(l=h.value,!/^\s*;/.test(l)&&(h=Fr.exec(l))){if(l=h[1].trim(),h=h[2].trim(),l=="Format")u=h.split(kp);else if(l=="Style"){l=h.split(kp),h={};for(var p=0;p<u.length&&p<l.length;p++)h[u[p]]=l[p];t.push(h)}}for(u=[],i=null,l={},o=A(o.split(/\r?\n/)),h=o.next();!h.done;l={vd:l.vd},h=o.next())if(h=h.value,!/^\s*;/.test(h)&&(p=Fr.exec(h))){if(h=p[1].trim(),p=p[2].trim(),h=="Format")i=p.split(kp);else if(h=="Dialogue"){p=p.split(kp),h={};for(var m=0;m<i.length&&m<p.length;m++)h[i[m]]=p[m];m=UT(h.Start);var w=UT(h.End);p=new Ht(m,w,p.slice(i.length-1).join(",").replace(/\\N/g,"\n").replace(/\{[^}]+\}/g,"")),l.vd=h.Style,(h=t.find(function(C){return function(_){return _.Name==C.vd}}(l)))&&oS(p,h),u.push(p)}}return u};function oS(t,i){var o=i.Fontname;if(o&&(t.fontFamily=o),(o=i.Fontsize)&&(t.fontSize=o+"px"),(o=i.PrimaryColour)&&(o=wd(o))&&(t.color=o),(o=i.BackColour)&&(o=wd(o))&&(t.backgroundColor=o),i.Bold&&(t.fontWeight=700),i.Italic&&(t.fontStyle="italic"),i.Underline&&t.textDecoration.push("underline"),(o=i.Spacing)&&(t.letterSpacing=o+"px"),o=i.Alignment)switch(parseInt(o,10)){case 1:t.displayAlign=Ho,t.textAlign="start";break;case 2:t.displayAlign=Ho,t.textAlign=Wr;break;case 3:t.displayAlign=Ho,t.textAlign="end";break;case 5:t.displayAlign="before",t.textAlign="start";break;case 6:t.displayAlign="before",t.textAlign=Wr;break;case 7:t.displayAlign="before",t.textAlign="end";break;case 9:t.displayAlign="center",t.textAlign="start";break;case 10:t.displayAlign="center",t.textAlign=Wr;break;case 11:t.displayAlign="center",t.textAlign="end"}(i=i.AlphaLevel)&&(t.opacity=parseFloat(i))}function wd(t){return t=parseInt(t.replace("&H",""),16),0<=t?"rgba("+(t&255)+","+(t>>8&255)+","+(t>>16&255)+","+(t>>24&255^255)/255+")":null}function UT(t){return t=sS.exec(t),3600*(t[1]?parseInt(t[1].replace(":",""),10):0)+60*parseInt(t[2],10)+parseFloat(t[3])}pe("shaka.text.SsaTextParser",Br),Br.prototype.parseMedia=Br.prototype.parseMedia,Br.prototype.setSequenceMode=Br.prototype.setSequenceMode,Br.prototype.parseInit=Br.prototype.parseInit;var jT=/^\s*\[([^\]]+)\]\r?\n([\s\S]*)/,Fr=/^\s*([^:]+):\s*(.*)/,kp=/\s*,\s*/,sS=/^(\d+:)?(\d{1,2}):(\d{1,2}(?:[.]\d{1,3})?)?$/;vn["text/x-ssa"]=function(){return new Br};/*
 @license
 EME Encryption Scheme Polyfill
 Copyright 2019 Google LLC
 SPDX-License-Identifier: Apache-2.0
*/function zr(){}var Dl;function gr(){Dl?console.debug("EmeEncryptionSchemePolyfill: Already installed."):navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration?(Dl=navigator.requestMediaKeySystemAccess,console.debug("EmeEncryptionSchemePolyfill: Waiting to detect encryptionScheme support."),navigator.requestMediaKeySystemAccess=BT):console.debug("EmeEncryptionSchemePolyfill: EME not found")}function BT(t,i){var o=this,u;return j(function(l){return l.g==1?(console.assert(o==navigator,'bad "this" for requestMediaKeySystemAccess'),k(l,Dl.call(o,t,i),2)):(u=l.h,Iv(u)?(console.debug("EmeEncryptionSchemePolyfill: Native encryptionScheme support found."),navigator.requestMediaKeySystemAccess=Dl,l.return(u)):(console.debug("EmeEncryptionSchemePolyfill: No native encryptionScheme support found. Patching encryptionScheme support."),navigator.requestMediaKeySystemAccess=Gr,l.return(Gr.call(o,t,i))))})}function Gr(t,i){var o=this,u,l,h,p,m,w,C,_,D,b;return j(function(U){if(U.g==1){for(console.assert(o==navigator,'bad "this" for requestMediaKeySystemAccess'),u=Pl(t),l=[],h=A(i),p=h.next();!p.done;p=h.next())m=p.value,w=FT(m.videoCapabilities,u),C=FT(m.audioCapabilities,u),m.videoCapabilities&&m.videoCapabilities.length&&!w.length||m.audioCapabilities&&m.audioCapabilities.length&&!C.length||(_=Object.assign({},m),_.videoCapabilities=w,_.audioCapabilities=C,l.push(_));if(!l.length)throw D=Error("Unsupported keySystem or supportedConfigurations."),D.name="NotSupportedError",D.code=DOMException.NOT_SUPPORTED_ERR,D;return k(U,Dl.call(o,t,l),2)}return b=U.h,U.return(new Ad(b,u))})}function FT(t,i){return t&&t.filter(function(o){return!o.encryptionScheme||o.encryptionScheme==i})}pe("EmeEncryptionSchemePolyfill",zr),zr.install=gr;function Sv(){}var bl;function zT(){bl?console.debug("McEncryptionSchemePolyfill: Already installed."):navigator.mediaCapabilities?(bl=navigator.mediaCapabilities.decodingInfo,console.debug("McEncryptionSchemePolyfill: Waiting to detect encryptionScheme support."),navigator.mediaCapabilities.decodingInfo=GT):console.debug("McEncryptionSchemePolyfill: MediaCapabilities not found")}function GT(t){var i=this,o,u,l;return j(function(h){switch(h.g){case 1:return console.assert(i==navigator.mediaCapabilities,'bad "this" for decodingInfo'),k(h,bl.call(i,t),2);case 2:if(o=h.h,!t.keySystemConfiguration)return h.return(o);if((u=o.keySystemAccess)&&Iv(u))return console.debug("McEncryptionSchemePolyfill: Native encryptionScheme support found."),navigator.mediaCapabilities.decodingInfo=bl,h.return(o);if(console.debug("McEncryptionSchemePolyfill: No native encryptionScheme support found. Patching encryptionScheme support."),navigator.mediaCapabilities.decodingInfo=Ed,u){h.A(3);break}return l=o,k(h,VT(t),4);case 4:return l.keySystemAccess=h.h,h.return(o);case 3:return h.return(Ed.call(i,t))}})}function Ed(t){var i=this,o,u,l,h,p,m,w,C;return j(function(_){switch(_.g){case 1:return console.assert(i==navigator.mediaCapabilities,'bad "this" for decodingInfo'),o=null,t.keySystemConfiguration&&(u=t.keySystemConfiguration,l=u.keySystem,h=u.audio&&u.audio.encryptionScheme,p=u.video&&u.video.encryptionScheme,o=Pl(l),m={powerEfficient:!1,smooth:!1,supported:!1,keySystemAccess:null,configuration:t},h&&h!=o||p&&p!=o)?_.return(m):k(_,bl.call(i,t),2);case 2:if(w=_.h,w.keySystemAccess){w.keySystemAccess=new Ad(w.keySystemAccess,o),_.A(3);break}if(!t.keySystemConfiguration){_.A(3);break}return C=w,k(_,VT(t),5);case 5:C.keySystemAccess=_.h;case 3:return _.return(w)}})}function VT(t){var i,o;return j(function(u){if(u.g==1){var l=t.keySystemConfiguration,h=[],p=[];return l.audio&&h.push({robustness:l.audio.robustness||"",contentType:t.audio.contentType}),l.video&&p.push({robustness:l.video.robustness||"",contentType:t.video.contentType}),l={initDataTypes:l.initDataType?[l.initDataType]:[],distinctiveIdentifier:l.distinctiveIdentifier,persistentState:l.persistentState,sessionTypes:l.sessionTypes},h.length&&(l.audioCapabilities=h),p.length&&(l.videoCapabilities=p),i=l,k(u,navigator.requestMediaKeySystemAccess(t.keySystemConfiguration.keySystem,[i]),2)}return o=u.h,u.return(o)})}pe("McEncryptionSchemePolyfill",Sv),Sv.install=zT;function Ad(t,i){this.h=t,this.g=i,this.keySystem=t.keySystem}Ad.prototype.getConfiguration=function(){var t=this.h.getConfiguration();if(t.videoCapabilities)for(var i=A(t.videoCapabilities),o=i.next();!o.done;o=i.next())o.value.encryptionScheme=this.g;if(t.audioCapabilities)for(i=A(t.audioCapabilities),o=i.next();!o.done;o=i.next())o.value.encryptionScheme=this.g;return t},Ad.prototype.createMediaKeys=function(){return this.h.createMediaKeys()};function Pl(t){return t.startsWith("com.widevine")||t.startsWith("com.microsoft")||t.startsWith("com.chromecast")||t.startsWith("com.adobe")||t.startsWith("org.w3")?"cenc":t.startsWith("com.apple")?"cbcs-1-9":(console.warn("EmeEncryptionSchemePolyfill: Unknown key system:",t,"Please contribute!"),null)}function Iv(t){t=t.getConfiguration();var i=t.audioCapabilities&&t.audioCapabilities[0];return!!((t=t.videoCapabilities&&t.videoCapabilities[0]||i)&&t.encryptionScheme!==void 0)}function Cv(){}function kv(){gr(),zT()}pe("EncryptionSchemePolyfills",Cv),Cv.install=kv,typeof P<"u"&&P.exports&&(P.exports=Cv)}).call(c,x,x,void 0);for(var y in c.shaka)E[y]=c.shaka[y]})()})(y4);const cC=zR(y4);var EI={};/*
 @license
 Shaka Player
 Copyright 2016 Google LLC
 SPDX-License-Identifier: Apache-2.0
*/(function(E){(function(){var x=typeof window<"u"?window:c4,c={};(function(S,R,P){/*
 @license
 Shaka Player
 Copyright 2016 Google LLC
 SPDX-License-Identifier: Apache-2.0
*/var v;function F(e){var n=0;return function(){return n<e.length?{done:!1,value:e[n++]}:{done:!0}}}var V=typeof Object.defineProperties=="function"?Object.defineProperty:function(e,n,r){return e==Array.prototype||e==Object.prototype||(e[n]=r.value),e};function H(e){e=[typeof globalThis=="object"&&globalThis,e,typeof S=="object"&&S,typeof self=="object"&&self,typeof R=="object"&&R];for(var n=0;n<e.length;++n){var r=e[n];if(r&&r.Math==Math)return r}throw Error("Cannot find global object")}var ee=H(this);function te(e,n){if(n)e:{var r=ee;e=e.split(".");for(var s=0;s<e.length-1;s++){var a=e[s];if(!(a in r))break e;r=r[a]}e=e[e.length-1],s=r[e],n=n(s),n!=s&&n!=null&&V(r,e,{configurable:!0,writable:!0,value:n})}}te("Symbol",function(e){function n(d){if(this instanceof n)throw new TypeError("Symbol is not a constructor");return new r(s+(d||"")+"_"+a++,d)}function r(d,f){this.g=d,V(this,"description",{configurable:!0,writable:!0,value:f})}if(e)return e;r.prototype.toString=function(){return this.g};var s="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",a=0;return n}),te("Symbol.iterator",function(e){if(e)return e;e=Symbol("Symbol.iterator");for(var n="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),r=0;r<n.length;r++){var s=ee[n[r]];typeof s=="function"&&typeof s.prototype[e]!="function"&&V(s.prototype,e,{configurable:!0,writable:!0,value:function(){return me(F(this))}})}return e});function me(e){return e={next:e},e[Symbol.iterator]=function(){return this},e}function A(e){var n=typeof Symbol<"u"&&Symbol.iterator&&e[Symbol.iterator];return n?n.call(e):{next:F(e)}}function q(e){if(!(e instanceof Array)){e=A(e);for(var n,r=[];!(n=e.next()).done;)r.push(n.value);e=r}return e}var ie=typeof Object.create=="function"?Object.create:function(e){function n(){}return n.prototype=e,new n},ve;if(typeof Object.setPrototypeOf=="function")ve=Object.setPrototypeOf;else{var ue;e:{var he={a:!0},re={};try{re.__proto__=he,ue=re.a;break e}catch(e){}ue=!1}ve=ue?function(e,n){if(e.__proto__=n,e.__proto__!==n)throw new TypeError(e+" is not extensible");return e}:null}var ke=ve;function Te(e,n){if(e.prototype=ie(n.prototype),e.prototype.constructor=e,ke)ke(e,n);else for(var r in n)if(r!="prototype")if(Object.defineProperties){var s=Object.getOwnPropertyDescriptor(n,r);s&&Object.defineProperty(e,r,s)}else e[r]=n[r];e.xj=n.prototype}function Le(){this.s=!1,this.l=null,this.h=void 0,this.g=1,this.j=this.m=0,this.C=this.i=null}function Ne(e){if(e.s)throw new TypeError("Generator is already running");e.s=!0}Le.prototype.B=function(e){this.h=e};function Re(e,n){e.i={Ef:n,Nf:!0},e.g=e.m||e.j}Le.prototype.return=function(e){this.i={return:e},this.g=this.j};function k(e,n,r){return e.g=r,{value:n}}Le.prototype.D=function(e){this.g=e};function le(e){e.g=0}function ye(e,n,r){e.m=n,r!=null&&(e.j=r)}function He(e){e.m=0,e.j=2}function _e(e,n,r){e.g=n,e.m=r||0}function we(e,n){return e.m=n||0,n=e.i.Ef,e.i=null,n}function st(e){e.C=[e.i],e.m=0,e.j=0}function Et(e,n){var r=e.C.splice(0)[0];(r=e.i=e.i||r)?r.Nf?e.g=e.m||e.j:r.D!=null&&e.j<r.D?(e.g=r.D,e.i=null):e.g=e.j:e.g=n}function Vn(e){this.g=new Le,this.h=e}function Mn(e,n){Ne(e.g);var r=e.g.l;return r?_n(e,"return"in r?r.return:function(s){return{value:s,done:!0}},n,e.g.return):(e.g.return(n),Bn(e))}function _n(e,n,r,s){try{var a=n.call(e.g.l,r);if(!(a instanceof Object))throw new TypeError("Iterator result "+a+" is not an object");if(!a.done)return e.g.s=!1,a;var d=a.value}catch(f){return e.g.l=null,Re(e.g,f),Bn(e)}return e.g.l=null,s.call(e.g,d),Bn(e)}function Bn(e){for(;e.g.g;)try{var n=e.h(e.g);if(n)return e.g.s=!1,{value:n.value,done:!1}}catch(r){e.g.h=void 0,Re(e.g,r)}if(e.g.s=!1,e.g.i){if(n=e.g.i,e.g.i=null,n.Nf)throw n.Ef;return{value:n.return,done:!0}}return{value:void 0,done:!0}}function go(e){this.next=function(n){return Ne(e.g),e.g.l?n=_n(e,e.g.l.next,n,e.g.B):(e.g.B(n),n=Bn(e)),n},this.throw=function(n){return Ne(e.g),e.g.l?n=_n(e,e.g.l.throw,n,e.g.B):(Re(e.g,n),n=Bn(e)),n},this.return=function(n){return Mn(e,n)},this[Symbol.iterator]=function(){return this}}function ya(e){function n(s){return e.next(s)}function r(s){return e.throw(s)}return new Promise(function(s,a){function d(f){f.done?s(f.value):Promise.resolve(f.value).then(n,r).then(d,a)}d(e.next())})}function j(e){return ya(new go(new Vn(e)))}function fn(){for(var e=Number(this),n=[],r=e;r<arguments.length;r++)n[r-e]=arguments[r];return n}te("Promise",function(e){function n(f){this.h=0,this.i=void 0,this.g=[],this.s=!1;var g=this.j();try{f(g.resolve,g.reject)}catch(T){g.reject(T)}}function r(){this.g=null}function s(f){return f instanceof n?f:new n(function(g){g(f)})}if(e)return e;r.prototype.h=function(f){if(this.g==null){this.g=[];var g=this;this.i(function(){g.l()})}this.g.push(f)};var a=ee.setTimeout;r.prototype.i=function(f){a(f,0)},r.prototype.l=function(){for(;this.g&&this.g.length;){var f=this.g;this.g=[];for(var g=0;g<f.length;++g){var T=f[g];f[g]=null;try{T()}catch(I){this.j(I)}}}this.g=null},r.prototype.j=function(f){this.i(function(){throw f})},n.prototype.j=function(){function f(I){return function(M){T||(T=!0,I.call(g,M))}}var g=this,T=!1;return{resolve:f(this.H),reject:f(this.l)}},n.prototype.H=function(f){if(f===this)this.l(new TypeError("A Promise cannot resolve to itself"));else if(f instanceof n)this.J(f);else{e:switch(typeof f){case"object":var g=f!=null;break e;case"function":g=!0;break e;default:g=!1}g?this.G(f):this.m(f)}},n.prototype.G=function(f){var g=void 0;try{g=f.then}catch(T){this.l(T);return}typeof g=="function"?this.K(g,f):this.m(f)},n.prototype.l=function(f){this.B(2,f)},n.prototype.m=function(f){this.B(1,f)},n.prototype.B=function(f,g){if(this.h!=0)throw Error("Cannot settle("+f+", "+g+"): Promise already settled in state"+this.h);this.h=f,this.i=g,this.h===2&&this.I(),this.C()},n.prototype.I=function(){var f=this;a(function(){if(f.F()){var g=ee.console;typeof g<"u"&&g.error(f.i)}},1)},n.prototype.F=function(){if(this.s)return!1;var f=ee.CustomEvent,g=ee.Event,T=ee.dispatchEvent;return typeof T>"u"?!0:(typeof f=="function"?f=new f("unhandledrejection",{cancelable:!0}):typeof g=="function"?f=new g("unhandledrejection",{cancelable:!0}):(f=ee.document.createEvent("CustomEvent"),f.initCustomEvent("unhandledrejection",!1,!0,f)),f.promise=this,f.reason=this.i,T(f))},n.prototype.C=function(){if(this.g!=null){for(var f=0;f<this.g.length;++f)d.h(this.g[f]);this.g=null}};var d=new r;return n.prototype.J=function(f){var g=this.j();f.od(g.resolve,g.reject)},n.prototype.K=function(f,g){var T=this.j();try{f.call(g,T.resolve,T.reject)}catch(I){T.reject(I)}},n.prototype.then=function(f,g){function T(N,O){return typeof N=="function"?function(z){try{I(N(z))}catch($){M($)}}:O}var I,M,L=new n(function(N,O){I=N,M=O});return this.od(T(f,I),T(g,M)),L},n.prototype.catch=function(f){return this.then(void 0,f)},n.prototype.od=function(f,g){function T(){switch(I.h){case 1:f(I.i);break;case 2:g(I.i);break;default:throw Error("Unexpected state: "+I.h)}}var I=this;this.g==null?d.h(T):this.g.push(T),this.s=!0},n.resolve=s,n.reject=function(f){return new n(function(g,T){T(f)})},n.race=function(f){return new n(function(g,T){for(var I=A(f),M=I.next();!M.done;M=I.next())s(M.value).od(g,T)})},n.all=function(f){var g=A(f),T=g.next();return T.done?s([]):new n(function(I,M){function L(z){return function($){N[z]=$,O--,O==0&&I(N)}}var N=[],O=0;do N.push(void 0),O++,s(T.value).od(L(N.length-1),M),T=g.next();while(!T.done)})},n});function Ut(e,n){return Object.prototype.hasOwnProperty.call(e,n)}te("WeakMap",function(e){function n(T){if(this.g=(g+=Math.random()+1).toString(),T){T=A(T);for(var I;!(I=T.next()).done;)I=I.value,this.set(I[0],I[1])}}function r(){}function s(T){var I=typeof T;return I==="object"&&T!==null||I==="function"}function a(T){if(!Ut(T,f)){var I=new r;V(T,f,{value:I})}}function d(T){var I=Object[T];I&&(Object[T]=function(M){return M instanceof r?M:(Object.isExtensible(M)&&a(M),I(M))})}if(function(){if(!e||!Object.seal)return!1;try{var T=Object.seal({}),I=Object.seal({}),M=new e([[T,2],[I,3]]);return M.get(T)!=2||M.get(I)!=3?!1:(M.delete(T),M.set(I,4),!M.has(T)&&M.get(I)==4)}catch(L){return!1}}())return e;var f="$jscomp_hidden_"+Math.random();d("freeze"),d("preventExtensions"),d("seal");var g=0;return n.prototype.set=function(T,I){if(!s(T))throw Error("Invalid WeakMap key");if(a(T),!Ut(T,f))throw Error("WeakMap key fail: "+T);return T[f][this.g]=I,this},n.prototype.get=function(T){return s(T)&&Ut(T,f)?T[f][this.g]:void 0},n.prototype.has=function(T){return s(T)&&Ut(T,f)&&Ut(T[f],this.g)},n.prototype.delete=function(T){return s(T)&&Ut(T,f)&&Ut(T[f],this.g)?delete T[f][this.g]:!1},n}),te("Map",function(e){function n(){var g={};return g.ob=g.next=g.head=g}function r(g,T){var I=g.g;return me(function(){if(I){for(;I.head!=g.g;)I=I.ob;for(;I.next!=I.head;)return I=I.next,{done:!1,value:T(I)};I=null}return{done:!0,value:void 0}})}function s(g,T){var I=T&&typeof T;I=="object"||I=="function"?d.has(T)?I=d.get(T):(I=""+ ++f,d.set(T,I)):I="p_"+T;var M=g.h[I];if(M&&Ut(g.h,I))for(g=0;g<M.length;g++){var L=M[g];if(T!==T&&L.key!==L.key||T===L.key)return{id:I,list:M,index:g,wa:L}}return{id:I,list:M,index:-1,wa:void 0}}function a(g){if(this.h={},this.g=n(),this.size=0,g){g=A(g);for(var T;!(T=g.next()).done;)T=T.value,this.set(T[0],T[1])}}if(function(){if(!e||typeof e!="function"||!e.prototype.entries||typeof Object.seal!="function")return!1;try{var g=Object.seal({x:4}),T=new e(A([[g,"s"]]));if(T.get(g)!="s"||T.size!=1||T.get({x:4})||T.set({x:4},"t")!=T||T.size!=2)return!1;var I=T.entries(),M=I.next();return M.done||M.value[0]!=g||M.value[1]!="s"?!1:(M=I.next(),!(M.done||M.value[0].x!=4||M.value[1]!="t"||!I.next().done))}catch(L){return!1}}())return e;var d=new WeakMap;a.prototype.set=function(g,T){g=g===0?0:g;var I=s(this,g);return I.list||(I.list=this.h[I.id]=[]),I.wa?I.wa.value=T:(I.wa={next:this.g,ob:this.g.ob,head:this.g,key:g,value:T},I.list.push(I.wa),this.g.ob.next=I.wa,this.g.ob=I.wa,this.size++),this},a.prototype.delete=function(g){return g=s(this,g),g.wa&&g.list?(g.list.splice(g.index,1),g.list.length||delete this.h[g.id],g.wa.ob.next=g.wa.next,g.wa.next.ob=g.wa.ob,g.wa.head=null,this.size--,!0):!1},a.prototype.clear=function(){this.h={},this.g=this.g.ob=n(),this.size=0},a.prototype.has=function(g){return!!s(this,g).wa},a.prototype.get=function(g){return(g=s(this,g).wa)&&g.value},a.prototype.entries=function(){return r(this,function(g){return[g.key,g.value]})},a.prototype.keys=function(){return r(this,function(g){return g.key})},a.prototype.values=function(){return r(this,function(g){return g.value})},a.prototype.forEach=function(g,T){for(var I=this.entries(),M;!(M=I.next()).done;)M=M.value,g.call(T,M[1],M[0],this)},a.prototype[Symbol.iterator]=a.prototype.entries;var f=0;return a});function ti(e,n){e instanceof String&&(e+="");var r=0,s=!1,a={next:function(){if(!s&&r<e.length){var d=r++;return{value:n(d,e[d]),done:!1}}return s=!0,{done:!0,value:void 0}}};return a[Symbol.iterator]=function(){return a},a}te("Array.prototype.keys",function(e){return e||function(){return ti(this,function(n){return n})}}),te("Set",function(e){function n(r){if(this.g=new Map,r){r=A(r);for(var s;!(s=r.next()).done;)this.add(s.value)}this.size=this.g.size}return function(){if(!e||typeof e!="function"||!e.prototype.entries||typeof Object.seal!="function")return!1;try{var r=Object.seal({x:4}),s=new e(A([r]));if(!s.has(r)||s.size!=1||s.add(r)!=s||s.size!=1||s.add({x:4})!=s||s.size!=2)return!1;var a=s.entries(),d=a.next();return d.done||d.value[0]!=r||d.value[1]!=r?!1:(d=a.next(),d.done||d.value[0]==r||d.value[0].x!=4||d.value[1]!=d.value[0]?!1:a.next().done)}catch(f){return!1}}()?e:(n.prototype.add=function(r){return r=r===0?0:r,this.g.set(r,r),this.size=this.g.size,this},n.prototype.delete=function(r){return r=this.g.delete(r),this.size=this.g.size,r},n.prototype.clear=function(){this.g.clear(),this.size=0},n.prototype.has=function(r){return this.g.has(r)},n.prototype.entries=function(){return this.g.entries()},n.prototype.values=function(){return this.g.values()},n.prototype.keys=n.prototype.values,n.prototype[Symbol.iterator]=n.prototype.values,n.prototype.forEach=function(r,s){var a=this;this.g.forEach(function(d){return r.call(s,d,d,a)})},n)}),te("Array.from",function(e){return e||function(n,r,s){r=r!=null?r:function(g){return g};var a=[],d=typeof Symbol<"u"&&Symbol.iterator&&n[Symbol.iterator];if(typeof d=="function"){n=d.call(n);for(var f=0;!(d=n.next()).done;)a.push(r.call(s,d.value,f++))}else for(d=n.length,f=0;f<d;f++)a.push(r.call(s,n[f],f));return a}});function Tn(e,n,r){e instanceof String&&(e=String(e));for(var s=e.length,a=0;a<s;a++){var d=e[a];if(n.call(r,d,a,e))return{Lf:a,v:d}}return{Lf:-1,v:void 0}}te("Array.prototype.findIndex",function(e){return e||function(n,r){return Tn(this,n,r).Lf}}),te("Object.is",function(e){return e||function(n,r){return n===r?n!==0||1/n===1/r:n!==n&&r!==r}}),te("Array.prototype.includes",function(e){return e||function(n,r){var s=this;s instanceof String&&(s=String(s));var a=s.length;for(r=r||0,0>r&&(r=Math.max(r+a,0));r<a;r++){var d=s[r];if(d===n||Object.is(d,n))return!0}return!1}});function Di(e,n,r){if(e==null)throw new TypeError("The 'this' value for String.prototype."+r+" must not be null or undefined");if(n instanceof RegExp)throw new TypeError("First argument to String.prototype."+r+" must not be a regular expression");return e+""}te("String.prototype.includes",function(e){return e||function(n,r){return Di(this,n,"includes").indexOf(n,r||0)!==-1}}),te("Array.prototype.find",function(e){return e||function(n,r){return Tn(this,n,r).v}}),te("String.prototype.startsWith",function(e){return e||function(n,r){var s=Di(this,n,"startsWith"),a=s.length,d=n.length;r=Math.max(0,Math.min(r|0,s.length));for(var f=0;f<d&&r<a;)if(s[r++]!=n[f++])return!1;return f>=d}});var mo=typeof Object.assign=="function"?Object.assign:function(e,n){for(var r=1;r<arguments.length;r++){var s=arguments[r];if(s)for(var a in s)Ut(s,a)&&(e[a]=s[a])}return e};te("Object.assign",function(e){return e||mo}),te("Array.prototype.values",function(e){return e||function(){return ti(this,function(n,r){return r})}}),te("Promise.prototype.finally",function(e){return e||function(n){return this.then(function(r){return Promise.resolve(n()).then(function(){return r})},function(r){return Promise.resolve(n()).then(function(){throw r})})}}),te("Array.prototype.entries",function(e){return e||function(){return ti(this,function(n,r){return[n,r]})}}),te("String.prototype.repeat",function(e){return e||function(n){var r=Di(this,null,"repeat");if(0>n||1342177279<n)throw new RangeError("Invalid count value");n|=0;for(var s="";n;)n&1&&(s+=r),(n>>>=1)&&(r+=r);return s}}),te("Number.isNaN",function(e){return e||function(n){return typeof n=="number"&&isNaN(n)}}),te("Object.values",function(e){return e||function(n){var r=[],s;for(s in n)Ut(n,s)&&r.push(n[s]);return r}}),te("Math.log2",function(e){return e||function(n){return Math.log(n)/Math.LN2}}),te("Math.trunc",function(e){return e||function(n){if(n=Number(n),isNaN(n)||n===1/0||n===-1/0||n===0)return n;var r=Math.floor(Math.abs(n));return 0>n?-r:r}}),te("Object.entries",function(e){return e||function(n){var r=[],s;for(s in n)Ut(n,s)&&r.push([s,n[s]]);return r}});var bi=this||self;function pe(e,n){e=e.split(".");var r=bi;e[0]in r||typeof r.execScript>"u"||r.execScript("var "+e[0]);for(var s;e.length&&(s=e.shift());)e.length||n===void 0?r[s]&&r[s]!==Object.prototype[s]?r=r[s]:r=r[s]={}:r[s]=n}function Fe(e,n){if(n)if(n instanceof Map)for(var r=A(n.keys()),s=r.next();!s.done;s=r.next())s=s.value,Object.defineProperty(this,s,{value:n.get(s),writable:!0,enumerable:!0});else for(r in n)Object.defineProperty(this,r,{value:n[r],writable:!0,enumerable:!0});this.defaultPrevented=this.cancelable=this.bubbles=!1,this.timeStamp=S.performance&&S.performance.now?S.performance.now():Date.now(),this.type=e,this.isTrusted=!1,this.target=this.currentTarget=null,this.g=!1}function er(e){var n=new Fe(e.type),r;for(r in e)Object.defineProperty(n,r,{value:e[r],writable:!0,enumerable:!0});return n}Fe.prototype.preventDefault=function(){this.cancelable&&(this.defaultPrevented=!0)},Fe.prototype.stopImmediatePropagation=function(){this.g=!0},Fe.prototype.stopPropagation=function(){},pe("shaka.util.FakeEvent",Fe);var ni={Wh:"abrstatuschanged",Xh:"adaptation",Yh:"buffering",bi:"downloadfailed",ci:"downloadheadersreceived",di:"drmsessionupdate",mi:"emsg",Qi:"prft",Error:"error",ni:"expirationupdated",ri:"gapjumped",xi:"loaded",zi:"loading",Ei:"manifestparsed",Fi:"mediaqualitychanged",Metadata:"metadata",Ki:"onstatechange",Li:"onstateidle",Vi:"ratechange",aj:"segmentappended",bj:"sessiondata",cj:"stalldetected",dj:"streaming",ej:"textchanged",fj:"texttrackvisibility",gj:"timelineregionadded",hj:"timelineregionenter",ij:"timelineregionexit",jj:"trackschanged",oj:"unloading",qj:"variantchanged"};function Ko(){}function Rn(){}function ze(){}function Kn(e){var n=fn.apply(1,arguments);Hp.has(e)||(Hp.add(e),ze.apply(Ko,q(n)))}function lu(){}function x4(){}function T4(){}function w4(){}var Hp=new Set;if(S.console&&S.console.log.bind){var tr={},Wp=(tr[1]=console.error.bind(console),tr[2]=console.warn.bind(console),tr[3]=console.info.bind(console),tr[4]=console.log.bind(console),tr[5]=console.debug.bind(console),tr[6]=console.debug.bind(console),tr);ze=Wp[2],Rn=Wp[1]}function ii(){this.g={}}v=ii.prototype,v.push=function(e,n){this.g.hasOwnProperty(e)?this.g[e].push(n):this.g[e]=[n]},v.get=function(e){return(e=this.g[e])?e.slice():null},v.remove=function(e,n){e in this.g&&(this.g[e]=this.g[e].filter(function(r){return r!=n}),this.g[e].length==0&&delete this.g[e])},v.forEach=function(e){for(var n in this.g)e(n,this.g[n])},v.size=function(){return Object.keys(this.g).length},v.keys=function(){return Object.keys(this.g)};function vt(){this.ra=new ii,this.Hd=this}vt.prototype.addEventListener=function(e,n){this.ra&&this.ra.push(e,n)},vt.prototype.removeEventListener=function(e,n){this.ra&&this.ra.remove(e,n)},vt.prototype.dispatchEvent=function(e){if(!this.ra)return!0;var n=this.ra.get(e.type)||[],r=this.ra.get("All");for(r&&(n=n.concat(r)),n=A(n),r=n.next();!r.done;r=n.next()){r=r.value,e.target=this.Hd,e.currentTarget=this.Hd;try{r.handleEvent?r.handleEvent(e):r.call(this,e)}catch(s){}if(e.g)break}return e.defaultPrevented},vt.prototype.release=function(){this.ra=null};function qp(e,n){var r=[];e=A(e);for(var s=e.next();!s.done;s=e.next())r.push(n(s.value));return r}function Hr(e,n){e=A(e);for(var r=e.next();!r.done;r=e.next())if(!n(r.value))return!1;return!0}function xa(e,n){e=A(e);for(var r=e.next();!r.done;r=e.next())if(n(r.value))return!0;return!1}function Es(e,n){var r=[];e=A(e);for(var s=e.next();!s.done;s=e.next())s=s.value,n(s)&&r.push(s);return r}var Ht=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#(.*))?$");/*
 @license
 Copyright 2006 The Closure Library Authors
 SPDX-License-Identifier: Apache-2.0
*/function Pi(e){var n;e instanceof Pi?(zl(this,e.Wa),this.Tb=e.Tb,this.ab=e.ab,Wr(this,e.nc),this.Ha=e.Ha,Ta(this,e.g.clone()),this.Hb=e.Hb):e&&(n=String(e).match(Ht))?(zl(this,n[1]||"",!0),this.Tb=Ho(n[2]||""),this.ab=Ho(n[3]||"",!0),Wr(this,n[4]),this.Ha=Ho(n[5]||"",!0),Ta(this,n[6]||"",!0),this.Hb=Ho(n[7]||"")):this.g=new du(null)}v=Pi.prototype,v.Wa="",v.Tb="",v.ab="",v.nc=null,v.Ha="",v.Hb="",v.toString=function(){var e=[],n=this.Wa;if(n&&e.push(wa(n,Ea,!0),":"),n=this.ab){e.push("//");var r=this.Tb;r&&e.push(wa(r,Ea,!0),"@"),e.push(encodeURIComponent(n).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.nc,n!=null&&e.push(":",String(n))}return(n=this.Ha)&&(this.ab&&n.charAt(0)!="/"&&e.push("/"),e.push(wa(n,n.charAt(0)=="/"?cu:Yp,!0))),(n=this.g.toString())&&e.push("?",n),(n=this.Hb)&&e.push("#",wa(n,Yv)),e.join("")},v.resolve=function(e){var n=this.clone();n.Wa==="data"&&(n=new Pi);var r=!!e.Wa;r?zl(n,e.Wa):r=!!e.Tb,r?n.Tb=e.Tb:r=!!e.ab,r?n.ab=e.ab:r=e.nc!=null;var s=e.Ha;if(r)Wr(n,e.nc);else if(r=!!e.Ha){if(s.charAt(0)!="/")if(this.ab&&!this.Ha)s="/"+s;else{var a=n.Ha.lastIndexOf("/");a!=-1&&(s=n.Ha.substr(0,a+1)+s)}if(s==".."||s==".")s="";else if(s.indexOf("./")!=-1||s.indexOf("/.")!=-1){a=s.lastIndexOf("/",0)==0,s=s.split("/");for(var d=[],f=0;f<s.length;){var g=s[f++];g=="."?a&&f==s.length&&d.push(""):g==".."?((1<d.length||d.length==1&&d[0]!="")&&d.pop(),a&&f==s.length&&d.push("")):(d.push(g),a=!0)}s=d.join("/")}}return r?n.Ha=s:r=e.g.toString()!=="",r?Ta(n,e.g.clone()):r=!!e.Hb,r&&(n.Hb=e.Hb),n},v.clone=function(){return new Pi(this)};function zl(e,n,r){e.Wa=r?Ho(n,!0):n,e.Wa&&(e.Wa=e.Wa.replace(/:$/,""))}function Wr(e,n){if(n){if(n=Number(n),isNaN(n)||0>n)throw Error("Bad port number "+n);e.nc=n}else e.nc=null}function Ta(e,n,r){n instanceof du?e.g=n:(r||(n=wa(n,$p)),e.g=new du(n))}function Ho(e,n){return e?n?decodeURI(e):decodeURIComponent(e):""}function wa(e,n,r){return e!=null?(e=encodeURI(e).replace(n,Xp),r&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Xp(e){return e=e.charCodeAt(0),"%"+(e>>4&15).toString(16)+(e&15).toString(16)}var Ea=/[#\/\?@]/g,Yp=/[#\?:]/g,cu=/[#\?]/g,$p=/[#\?@]/g,Yv=/#/g;function du(e){this.g=e||null}function Qp(e){if(!e.Ca&&(e.Ca={},e.rd=0,e.g))for(var n=e.g.split("&"),r=0;r<n.length;r++){var s=n[r].indexOf("="),a=null;if(0<=s){var d=n[r].substring(0,s);a=n[r].substring(s+1)}else d=n[r];d=decodeURIComponent(d.replace(/\+/g," ")),a=a||"",e.add(d,decodeURIComponent(a.replace(/\+/g," ")))}}v=du.prototype,v.Ca=null,v.rd=null,v.add=function(e,n){Qp(this),this.g=null;var r=this.Ca.hasOwnProperty(e)?this.Ca[e]:null;return r||(this.Ca[e]=r=[]),r.push(n),this.rd++,this},v.set=function(e,n){return Qp(this),this.g=null,this.Ca.hasOwnProperty(e)?this.Ca[e]=[n]:this.add(e,n),this},v.toString=function(){if(this.g)return this.g;if(!this.Ca)return"";var e=[],n;for(n in this.Ca)for(var r=encodeURIComponent(n),s=this.Ca[n],a=0;a<s.length;a++){var d=r;s[a]!==""&&(d+="="+encodeURIComponent(s[a])),e.push(d)}return this.g=e.join("&")},v.clone=function(){var e=new du;if(e.g=this.g,this.Ca){var n={},r;for(r in this.Ca)n[r]=this.Ca[r].concat();e.Ca=n,e.rd=this.rd}return e};function se(e,n,r){var s=fn.apply(3,arguments);this.severity=e,this.category=n,this.code=r,this.data=s,this.handled=!1}se.prototype.toString=function(){return"shaka.util.Error "+JSON.stringify(this,null,"  ")},pe("shaka.util.Error",se),se.Severity={RECOVERABLE:1,CRITICAL:2},se.Category={NETWORK:1,TEXT:2,MEDIA:3,MANIFEST:4,STREAMING:5,DRM:6,PLAYER:7,CAST:8,STORAGE:9,ADS:10},se.Code={UNSUPPORTED_SCHEME:1e3,BAD_HTTP_STATUS:1001,HTTP_ERROR:1002,TIMEOUT:1003,MALFORMED_DATA_URI:1004,REQUEST_FILTER_ERROR:1006,RESPONSE_FILTER_ERROR:1007,MALFORMED_TEST_URI:1008,UNEXPECTED_TEST_REQUEST:1009,ATTEMPTS_EXHAUSTED:1010,SEGMENT_MISSING:1011,INVALID_TEXT_HEADER:2e3,INVALID_TEXT_CUE:2001,UNABLE_TO_DETECT_ENCODING:2003,BAD_ENCODING:2004,INVALID_XML:2005,INVALID_MP4_TTML:2007,INVALID_MP4_VTT:2008,UNABLE_TO_EXTRACT_CUE_START_TIME:2009,INVALID_MP4_CEA:2010,TEXT_COULD_NOT_GUESS_MIME_TYPE:2011,CANNOT_ADD_EXTERNAL_TEXT_TO_SRC_EQUALS:2012,TEXT_ONLY_WEBVTT_SRC_EQUALS:2013,MISSING_TEXT_PLUGIN:2014,CHAPTERS_TRACK_FAILED:2015,CANNOT_ADD_EXTERNAL_THUMBNAILS_TO_SRC_EQUALS:2016,UNSUPPORTED_EXTERNAL_THUMBNAILS_URI:2017,BUFFER_READ_OUT_OF_BOUNDS:3e3,JS_INTEGER_OVERFLOW:3001,EBML_OVERFLOW:3002,EBML_BAD_FLOATING_POINT_SIZE:3003,MP4_SIDX_WRONG_BOX_TYPE:3004,MP4_SIDX_INVALID_TIMESCALE:3005,MP4_SIDX_TYPE_NOT_SUPPORTED:3006,WEBM_CUES_ELEMENT_MISSING:3007,WEBM_EBML_HEADER_ELEMENT_MISSING:3008,WEBM_SEGMENT_ELEMENT_MISSING:3009,WEBM_INFO_ELEMENT_MISSING:3010,WEBM_DURATION_ELEMENT_MISSING:3011,WEBM_CUE_TRACK_POSITIONS_ELEMENT_MISSING:3012,WEBM_CUE_TIME_ELEMENT_MISSING:3013,MEDIA_SOURCE_OPERATION_FAILED:3014,MEDIA_SOURCE_OPERATION_THREW:3015,VIDEO_ERROR:3016,QUOTA_EXCEEDED_ERROR:3017,TRANSMUXING_FAILED:3018,CONTENT_TRANSFORMATION_FAILED:3019,UNABLE_TO_GUESS_MANIFEST_TYPE:4e3,DASH_INVALID_XML:4001,DASH_NO_SEGMENT_INFO:4002,DASH_EMPTY_ADAPTATION_SET:4003,DASH_EMPTY_PERIOD:4004,DASH_WEBM_MISSING_INIT:4005,DASH_UNSUPPORTED_CONTAINER:4006,DASH_PSSH_BAD_ENCODING:4007,DASH_NO_COMMON_KEY_SYSTEM:4008,DASH_MULTIPLE_KEY_IDS_NOT_SUPPORTED:4009,DASH_CONFLICTING_KEY_IDS:4010,RESTRICTIONS_CANNOT_BE_MET:4012,HLS_PLAYLIST_HEADER_MISSING:4015,INVALID_HLS_TAG:4016,HLS_INVALID_PLAYLIST_HIERARCHY:4017,DASH_DUPLICATE_REPRESENTATION_ID:4018,HLS_MULTIPLE_MEDIA_INIT_SECTIONS_FOUND:4020,HLS_REQUIRED_ATTRIBUTE_MISSING:4023,HLS_REQUIRED_TAG_MISSING:4024,HLS_COULD_NOT_GUESS_CODECS:4025,HLS_KEYFORMATS_NOT_SUPPORTED:4026,DASH_UNSUPPORTED_XLINK_ACTUATE:4027,DASH_XLINK_DEPTH_LIMIT:4028,CONTENT_UNSUPPORTED_BY_BROWSER:4032,CANNOT_ADD_EXTERNAL_TEXT_TO_LIVE_STREAM:4033,NO_VARIANTS:4036,PERIOD_FLATTENING_FAILED:4037,INCONSISTENT_DRM_ACROSS_PERIODS:4038,HLS_VARIABLE_NOT_FOUND:4039,HLS_MSE_ENCRYPTED_MP2T_NOT_SUPPORTED:4040,HLS_MSE_ENCRYPTED_LEGACY_APPLE_MEDIA_KEYS_NOT_SUPPORTED:4041,NO_WEB_CRYPTO_API:4042,HLS_AES_128_INVALID_IV_LENGTH:4043,HLS_AES_128_INVALID_KEY_LENGTH:4044,CANNOT_ADD_EXTERNAL_THUMBNAILS_TO_LIVE_STREAM:4045,STREAMING_ENGINE_STARTUP_INVALID_STATE:5006,NO_RECOGNIZED_KEY_SYSTEMS:6e3,REQUESTED_KEY_SYSTEM_CONFIG_UNAVAILABLE:6001,FAILED_TO_CREATE_CDM:6002,FAILED_TO_ATTACH_TO_VIDEO:6003,INVALID_SERVER_CERTIFICATE:6004,FAILED_TO_CREATE_SESSION:6005,FAILED_TO_GENERATE_LICENSE_REQUEST:6006,LICENSE_REQUEST_FAILED:6007,LICENSE_RESPONSE_REJECTED:6008,ENCRYPTED_CONTENT_WITHOUT_DRM_INFO:6010,NO_LICENSE_SERVER_GIVEN:6012,OFFLINE_SESSION_REMOVED:6013,EXPIRED:6014,SERVER_CERTIFICATE_REQUIRED:6015,INIT_DATA_TRANSFORM_ERROR:6016,SERVER_CERTIFICATE_REQUEST_FAILED:6017,LOAD_INTERRUPTED:7e3,OPERATION_ABORTED:7001,NO_VIDEO_ELEMENT:7002,OBJECT_DESTROYED:7003,CONTENT_NOT_LOADED:7004,CAST_API_UNAVAILABLE:8e3,NO_CAST_RECEIVERS:8001,ALREADY_CASTING:8002,UNEXPECTED_CAST_ERROR:8003,CAST_CANCELED_BY_USER:8004,CAST_CONNECTION_TIMED_OUT:8005,CAST_RECEIVER_APP_UNAVAILABLE:8006,STORAGE_NOT_SUPPORTED:9e3,INDEXED_DB_ERROR:9001,DEPRECATED_OPERATION_ABORTED:9002,REQUESTED_ITEM_NOT_FOUND:9003,MALFORMED_OFFLINE_URI:9004,CANNOT_STORE_LIVE_OFFLINE:9005,NO_INIT_DATA_FOR_OFFLINE:9007,LOCAL_PLAYER_INSTANCE_REQUIRED:9008,NEW_KEY_OPERATION_NOT_SUPPORTED:9011,KEY_NOT_FOUND:9012,MISSING_STORAGE_CELL:9013,STORAGE_LIMIT_REACHED:9014,DOWNLOAD_SIZE_CALLBACK_ERROR:9015,MODIFY_OPERATION_NOT_SUPPORTED:9016,INDEXED_DB_INIT_TIMED_OUT:9017,CS_IMA_SDK_MISSING:1e4,CS_AD_MANAGER_NOT_INITIALIZED:10001,SS_IMA_SDK_MISSING:10002,SS_AD_MANAGER_NOT_INITIALIZED:10003,CURRENT_DAI_REQUEST_NOT_FINISHED:10004};function Nd(e,n){return e.concat(n)}function Aa(){}function ri(e){return e!=null}function Ai(e,n){if(n.length==0)return e;var r=n.map(function(s){return new Pi(s)});return e.map(function(s){return new Pi(s)}).map(function(s){return r.map(function(a){return s.resolve(a)})}).reduce(Nd,[]).map(function(s){return s.toString()})}function qr(e,n){return{keySystem:e,licenseServerUri:"",distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,serverCertificateUri:"",sessionType:"",initData:n||[],keyIds:new Set}}function Xr(e,n){if(n.length==1)return n[0];if(e=As(e,n),e!=null)return e;throw new se(2,4,4025,n)}function As(e,n){for(var r=A(Oi[e]),s=r.next();!s.done;s=r.next()){s=s.value;for(var a=A(n),d=a.next();!d.done;d=a.next())if(d=d.value,s.test(d.trim()))return d.trim()}return e==yt?"":null}var yt="text",$e={Ma:"video",jd:"audio",ha:yt,Ac:"image",Th:"application"},Oi={audio:[/^vorbis$/,/^opus$/,/^flac$/,/^mp4a/,/^[ae]c-3$/,/^ac-4$/,/^dts[cx]$/,/^[du]dts$/],video:[/^avc/,/^hev/,/^hvc/,/^vp0?[89]/,/^av01/,/^dvhe/],text:[/^vtt$/,/^wvtt/,/^stpp/]};function nr(){}function oe(e,n){return e=At(e),n=At(n),e.split("-")[0]==n.split("-")[0]}function Gl(e,n){return e=At(e),n=At(n),e=e.split("-"),n=n.split("-"),e[0]==n[0]&&e.length==1&&n.length==2}function Si(e,n){return e=At(e),n=At(n),e=e.split("-"),n=n.split("-"),e.length==2&&n.length==2&&e[0]==n[0]}function At(e){var n=e.split("-");return e=n[0]||"",n=n[1]||"",e=e.toLowerCase(),e=Zp.get(e)||e,(n=n.toUpperCase())?e+"-"+n:e}function Dd(e,n){var r=yo(e),s=yo(n);return e!=r&&n!=s&&r==s}function vo(e,n){return e=At(e),n=At(n),n==e?4:Gl(n,e)?3:Si(n,e)?2:Gl(e,n)?1:0}function yo(e){var n=e.indexOf("-");return e=0<=n?e.substring(0,n):e,e=e.toLowerCase(),e=Zp.get(e)||e}function hu(e){return e.language?At(e.language):e.audio&&e.audio.language?At(e.audio.language):e.video&&e.video.language?At(e.video.language):"und"}function bd(e,n){e=At(e);var r=new Set,s=A(n);for(n=s.next();!n.done;n=s.next())r.add(At(n.value));for(s=A(r),n=s.next();!n.done;n=s.next())if(n=n.value,n==e)return n;for(s=A(r),n=s.next();!n.done;n=s.next())if(n=n.value,Gl(n,e))return n;for(s=A(r),n=s.next();!n.done;n=s.next())if(n=n.value,Si(n,e))return n;for(r=A(r),n=r.next();!n.done;n=r.next())if(n=n.value,Gl(e,n))return n;return null}pe("shaka.util.LanguageUtils",nr),nr.findClosestLocale=bd,nr.getLocaleForVariant=hu,nr.getLocaleForText=function(e){return At(e.language||"und")},nr.getBase=yo,nr.relatedness=vo,nr.areSiblings=Dd,nr.normalize=At,nr.isSiblingOf=Si,nr.isParentOf=Gl,nr.areLanguageCompatible=oe,nr.areLocaleCompatible=function(e,n){return e=At(e),n=At(n),e==n};var Zp=new Map([["aar","aa"],["abk","ab"],["afr","af"],["aka","ak"],["alb","sq"],["amh","am"],["ara","ar"],["arg","an"],["arm","hy"],["asm","as"],["ava","av"],["ave","ae"],["aym","ay"],["aze","az"],["bak","ba"],["bam","bm"],["baq","eu"],["bel","be"],["ben","bn"],["bih","bh"],["bis","bi"],["bod","bo"],["bos","bs"],["bre","br"],["bul","bg"],["bur","my"],["cat","ca"],["ces","cs"],["cha","ch"],["che","ce"],["chi","zh"],["chu","cu"],["chv","cv"],["cor","kw"],["cos","co"],["cre","cr"],["cym","cy"],["cze","cs"],["dan","da"],["deu","de"],["div","dv"],["dut","nl"],["dzo","dz"],["ell","el"],["eng","en"],["epo","eo"],["est","et"],["eus","eu"],["ewe","ee"],["fao","fo"],["fas","fa"],["fij","fj"],["fin","fi"],["fra","fr"],["fre","fr"],["fry","fy"],["ful","ff"],["geo","ka"],["ger","de"],["gla","gd"],["gle","ga"],["glg","gl"],["glv","gv"],["gre","el"],["grn","gn"],["guj","gu"],["hat","ht"],["hau","ha"],["heb","he"],["her","hz"],["hin","hi"],["hmo","ho"],["hrv","hr"],["hun","hu"],["hye","hy"],["ibo","ig"],["ice","is"],["ido","io"],["iii","ii"],["iku","iu"],["ile","ie"],["ina","ia"],["ind","id"],["ipk","ik"],["isl","is"],["ita","it"],["jav","jv"],["jpn","ja"],["kal","kl"],["kan","kn"],["kas","ks"],["kat","ka"],["kau","kr"],["kaz","kk"],["khm","km"],["kik","ki"],["kin","rw"],["kir","ky"],["kom","kv"],["kon","kg"],["kor","ko"],["kua","kj"],["kur","ku"],["lao","lo"],["lat","la"],["lav","lv"],["lim","li"],["lin","ln"],["lit","lt"],["ltz","lb"],["lub","lu"],["lug","lg"],["mac","mk"],["mah","mh"],["mal","ml"],["mao","mi"],["mar","mr"],["may","ms"],["mkd","mk"],["mlg","mg"],["mlt","mt"],["mon","mn"],["mri","mi"],["msa","ms"],["mya","my"],["nau","na"],["nav","nv"],["nbl","nr"],["nde","nd"],["ndo","ng"],["nep","ne"],["nld","nl"],["nno","nn"],["nob","nb"],["nor","no"],["nya","ny"],["oci","oc"],["oji","oj"],["ori","or"],["orm","om"],["oss","os"],["pan","pa"],["per","fa"],["pli","pi"],["pol","pl"],["por","pt"],["pus","ps"],["que","qu"],["roh","rm"],["ron","ro"],["rum","ro"],["run","rn"],["rus","ru"],["sag","sg"],["san","sa"],["sin","si"],["slk","sk"],["slo","sk"],["slv","sl"],["sme","se"],["smo","sm"],["sna","sn"],["snd","sd"],["som","so"],["sot","st"],["spa","es"],["sqi","sq"],["srd","sc"],["srp","sr"],["ssw","ss"],["sun","su"],["swa","sw"],["swe","sv"],["tah","ty"],["tam","ta"],["tat","tt"],["tel","te"],["tgk","tg"],["tgl","tl"],["tha","th"],["tib","bo"],["tir","ti"],["ton","to"],["tsn","tn"],["tso","ts"],["tuk","tk"],["tur","tr"],["twi","tw"],["uig","ug"],["ukr","uk"],["urd","ur"],["uzb","uz"],["ven","ve"],["vie","vi"],["vol","vo"],["wel","cy"],["wln","wa"],["wol","wo"],["xho","xh"],["yid","yi"],["yor","yo"],["zha","za"],["zho","zh"],["zul","zu"]]);function Fn(e){vt.call(this),this.j=At(e),this.i=new Map,this.g=new Set,this.h=new Map}Te(Fn,vt),v=Fn.prototype,v.release=function(){vt.prototype.release.call(this)},v.xf=function(e){var n=this;this.g.clear(),e=A(e);for(var r=e.next();!r.done;r=e.next())this.g.add(At(r.value));$v(this),e=Es(this.g,function(s){return!n.h.has(s)}),e.length&&this.dispatchEvent(new Fe("unknown-locales",new Map().set("locales",e))),e=Es(this.g,function(s){return n.h.has(s)}),e=new Map().set("locales",e.length?e:[this.j]),this.dispatchEvent(new Fe("locale-changed",e))},v.ba=function(e,n,r){e=At(e),r===void 0&&(r=Jp);var s=this.h.get(e)||new Map;return n.forEach(function(a,d){s.has(d)&&r!=Jp||s.set(d,a)}),this.h.set(e,s),$v(this),this.dispatchEvent(new Fe("locale-updated")),this},v.Dh=function(e){for(var n=A(e.keys()),r=n.next();!r.done;r=n.next())r=r.value,e.set(r,this.resolve(r))},v.resolve=function(e){var n=this.i.get(e);return n||(e=new Map().set("locales",Array.from(this.g)).set("missing",e),this.dispatchEvent(new Fe("unknown-localization",e)),"")};function $v(e){for(var n=e.h,r=e.j,s=e.g,a=new Set,d={},f=A(s),g=f.next();!g.done;d={Xb:d.Xb},g=f.next()){d.Xb=g.value,a.add(d.Xb),a.add(yo(d.Xb)),g=Es(n.keys(),function(I){return function(M){return Dd(M,I.Xb)}}(d)),g.sort();var T=A(g);for(g=T.next();!g.done;g=T.next())a.add(g.value);for(g=Es(n.keys(),function(I){return function(M){return yo(M)==I.Xb}}(d)),g.sort(),T=A(g),g=T.next();!g.done;g=T.next())a.add(g.value)}for(a.add(r),r=[],a=A(a),g=a.next();!g.done;g=a.next())(g=n.get(g.value))&&r.push(g);for(r.reverse(),e.i.clear(),n=A(r),g=n.next();!g.done;g=n.next())g.value.forEach(function(I,M){e.i.set(M,I)});for(n=e.i.keys(),a=new Set,r=A(e.g),g=r.next();!g.done;g=r.next())g=e.h.get(g.value)||new Map,Gw(g,n,a);0<a.size&&(s=new Map().set("locales",Array.from(s)).set("missing",Array.from(a)),e.dispatchEvent(new Fe("missing-localizations",s)))}function Gw(e,n,r){n=A(n);for(var s=n.next();!s.done;s=n.next())s=s.value,e.get(s)||r.add(s)}pe("shaka.ui.Localization",Fn),Fn.prototype.resolve=Fn.prototype.resolve,Fn.prototype.resolveDictionary=Fn.prototype.Dh,Fn.prototype.insert=Fn.prototype.ba,Fn.prototype.changeLocale=Fn.prototype.xf,Fn.prototype.release=Fn.prototype.release;var Jp=1;Fn.ConflictResolution={USE_OLD:0,USE_NEW:Jp},Fn.UNKNOWN_LOCALES="unknown-locales",Fn.UNKNOWN_LOCALIZATION="unknown-localization",Fn.MISSING_LOCALIZATIONS="missing-localizations",Fn.LOCALE_CHANGED="locale-changed",Fn.LOCALE_UPDATED="locale-updated";var Sa={Uh:"AUTO_QUALITY",nj:"UNRECOGNIZED_LANGUAGE",pj:"VOLUME",$i:"STATISTICS",wi:"LOOP",Gi:"NOT_APPLICABLE",lj:"UNDETERMINED_LANGUAGE",Zh:"CAPTIONS",Di:"MUTE",li:"EXIT_PICTURE_IN_PICTURE",Wi:"SEEK",$h:"CAST",Mi:"PAUSE",oi:"FAST_FORWARD",ti:"LANGUAGE",ig:"SUBTITLE_FORCED",pi:"FULL_SCREEN",Rh:"AD_TIME",Hi:"OFF",Qh:"AD_DURATION",ei:"ENTER_LOOP_MODE",Si:"REPLAY",AD_PROGRESS:"AD_PROGRESS",Xi:"SKIP_AD",Sh:"AIRPLAY",Bi:"MORE_SETTINGS",Ci:"MULTIPLE_LANGUAGES",Ri:"QUALITY",Ni:"PICTURE_IN_PICTURE",Oi:"PLAY",BACK:"BACK",Yi:"SKIP_TO_LIVE",Ui:"REWIND",mj:"UNMUTE",Pi:"PLAYBACK_RATE",hg:"LIVE",Ti:"RESOLUTION",ji:"EXIT_FULL_SCREEN",gi:"ENTER_PICTURE_IN_PICTURE",Ii:"ON",ki:"EXIT_LOOP_MODE"};function Vl(e){this.g=Math.exp(Math.log(.5)/e),this.i=this.h=0}Vl.prototype.sample=function(e,n){var r=Math.pow(this.g,e);n=n*(1-r)+r*this.h,isNaN(n)||(this.h=n,this.i+=e)};function Kl(e){return e.h/(1-Math.pow(e.g,e.i))}function Hl(){this.h=new Vl(2),this.j=new Vl(5),this.g=0,this.i=128e3,this.l=16e3}Hl.prototype.configure=function(e){this.i=e.minTotalBytes,this.l=e.minBytes,this.h.g=Math.exp(Math.log(.5)/e.fastHalfLife),this.j.g=Math.exp(Math.log(.5)/e.slowHalfLife)},Hl.prototype.sample=function(e,n){if(!(n<this.l)){var r=8e3*n/e;e/=1e3,this.g+=n,this.h.sample(e,r),this.j.sample(e,r)}},Hl.prototype.getBandwidthEstimate=function(e){return this.g<this.i?e:Math.min(Kl(this.h),Kl(this.j))};function Hn(e){if(di.has(e))return di.get(e);var n=MediaSource.isTypeSupported(e);return di.set(e,n),n}var di=new Map;function Ss(e,n){return typeof e=="number"&&typeof n=="number"&&isNaN(e)&&isNaN(n)?!0:e===n}function Ii(e,n){n=e.indexOf(n),-1<n&&e.splice(n,1)}function xo(e,n,r){if(r||(r=Ss),e.length!=n.length)return!1;n=n.slice();var s={};e=A(e);for(var a=e.next();!a.done;s={Td:s.Td},a=e.next()){if(s.Td=a.value,a=n.findIndex(function(d){return function(f){return r(d.Td,f)}}(s)),a==-1)return!1;n[a]=n[n.length-1],n.pop()}return n.length==0}function Lt(e,n,r){if(r||(r=Ss),e.length!=n.length)return!1;for(var s=0;s<e.length;s++)if(!r(e[s],n[s]))return!1;return!0}function xt(e,n,r){this.startTime=e,this.direction=Is,this.endTime=n,this.payload=r,this.region=new Yr,this.position=null,this.positionAlign=Wt,this.size=0,this.textAlign=Ui,this.writingMode=Wo,this.lineInterpretation=Cs,this.line=null,this.lineHeight="",this.lineAlign=ks,this.displayAlign=ht,this.fontSize=this.textStrokeWidth=this.textStrokeColor=this.textShadow=this.border=this.backgroundImage=this.backgroundColor=this.color="",this.fontWeight=Qt,this.fontStyle=Od,this.linePadding=this.letterSpacing=this.fontFamily="",this.opacity=1,this.textDecoration=[],this.wrapLine=!0,this.id="",this.nestedCues=[],this.lineBreak=this.isContainer=!1,this.cellResolution={columns:32,rows:15}}xt.prototype.clone=function(){var e=new xt(0,0,""),n;for(n in this)e[n]=this[n],e[n]&&e[n].constructor==Array&&(e[n]=e[n].slice());return e};function Qv(e,n){if(e.startTime!=n.startTime||e.endTime!=n.endTime||e.payload!=n.payload)return!1;for(var r in e)if(r!="startTime"&&r!="endTime"&&r!="payload"){if(r=="nestedCues"){if(!Lt(e.nestedCues,n.nestedCues,Qv))return!1}else if(r=="region"||r=="cellResolution"){for(var s in e[r])if(e[r][s]!=n[r][s])return!1}else if(Array.isArray(e[r])){if(!Lt(e[r],n[r]))return!1}else if(e[r]!=n[r])return!1}return!0}pe("shaka.text.Cue",xt);var Wt="auto";xt.positionAlign={LEFT:"line-left",RIGHT:"line-right",CENTER:"center",AUTO:Wt};var Ui="center",fu={LEFT:"left",RIGHT:"right",CENTER:Ui,START:"start",END:"end"};xt.textAlign=fu;var ht="after",Tr={BEFORE:"before",CENTER:"center",AFTER:ht};xt.displayAlign=Tr;var Is="ltr";xt.direction={HORIZONTAL_LEFT_TO_RIGHT:Is,HORIZONTAL_RIGHT_TO_LEFT:"rtl"};var Wo="horizontal-tb";xt.writingMode={HORIZONTAL_TOP_TO_BOTTOM:Wo,VERTICAL_LEFT_TO_RIGHT:"vertical-lr",VERTICAL_RIGHT_TO_LEFT:"vertical-rl"};var Cs=0;xt.lineInterpretation={LINE_NUMBER:Cs,PERCENTAGE:1};var ks="start",Ia={CENTER:"center",START:ks,END:"end"};xt.lineAlign=Ia;var Ca={white:"#FFF",lime:"#0F0",cyan:"#0FF",red:"#F00",yellow:"#FF0",magenta:"#F0F",blue:"#00F",black:"#000"};xt.defaultTextColor=Ca;var Pd={bg_white:"#FFF",bg_lime:"#0F0",bg_cyan:"#0FF",bg_red:"#F00",bg_yellow:"#FF0",bg_magenta:"#F0F",bg_blue:"#00F",bg_black:"#000"};xt.defaultTextBackgroundColor=Pd;var Qt=400;xt.fontWeight={NORMAL:Qt,BOLD:700};var Od="normal",Ud={NORMAL:Od,ITALIC:"italic",OBLIQUE:"oblique"};xt.fontStyle=Ud,xt.textDecoration={UNDERLINE:"underline",LINE_THROUGH:"lineThrough",OVERLINE:"overline"};function Yr(){this.id="",this.regionAnchorY=this.regionAnchorX=this.viewportAnchorY=this.viewportAnchorX=0,this.height=this.width=100,this.viewportAnchorUnits=this.widthUnits=this.heightUnits=hi,this.scroll=an}pe("shaka.text.CueRegion",Yr);var hi=1;Yr.units={PX:0,PERCENTAGE:hi,LINES:2};var an="";Yr.scrollMode={NONE:an,UP:"up"};function wr(){}function ir(e,n){if(!e&&!n)return!0;if(!e||!n||e.byteLength!=n.byteLength)return!1;if(To(e)==To(n)&&(e.byteOffset||0)==(n.byteOffset||0))return!0;var r=Tt(e);n=Tt(n);for(var s=0;s<e.byteLength;s++)if(r[s]!=n[s])return!1;return!0}function To(e){return e instanceof ArrayBuffer?e:e.buffer}function ji(e){return e instanceof ArrayBuffer?e:e.byteOffset==0&&e.byteLength==e.buffer.byteLength?e.buffer:new Uint8Array(e).buffer}function Tt(e,n,r){return r=r===void 0?1/0:r,eg(e,n===void 0?0:n,r,Uint8Array)}function Ln(e,n,r){return r=r===void 0?1/0:r,eg(e,n===void 0?0:n,r,DataView)}function eg(e,n,r,s){var a=(e.byteOffset||0)+e.byteLength;return n=Math.max(0,Math.min((e.byteOffset||0)+n,a)),new s(To(e),n,Math.min(n+Math.max(r,0),a)-n)}pe("shaka.util.BufferUtils",wr),wr.toDataView=Ln,wr.toUint8=Tt,wr.toArrayBuffer=ji,wr.equal=ir;function bt(){var e,n,r=new Promise(function(s,a){e=s,n=a});return r.resolve=e,r.reject=n,r}bt.prototype.resolve=function(){},bt.prototype.reject=function(){};function Bi(e){this.h=e,this.g=void 0}Bi.prototype.value=function(){return this.g==null&&(this.g=this.h()),this.g};function qo(e){this.h=e,this.g=null}qo.prototype.R=function(e){var n=this;this.stop();var r=!0,s=null;return this.g=function(){S.clearTimeout(s),r=!1},s=S.setTimeout(function(){r&&n.h()},1e3*e),this},qo.prototype.stop=function(){this.g&&(this.g(),this.g=null)};function Qe(e){this.h=e,this.g=null}Qe.prototype.za=function(){return this.stop(),this.h(),this},Qe.prototype.R=function(e){var n=this;return this.stop(),this.g=new qo(function(){n.h()}).R(e),this},Qe.prototype.ea=function(e){var n=this;return this.stop(),this.g=new qo(function(){n.g.R(e),n.h()}).R(e),this},Qe.prototype.stop=function(){this.g&&(this.g.stop(),this.g=null)},pe("shaka.util.Timer",Qe),Qe.prototype.stop=Qe.prototype.stop,Qe.prototype.tickEvery=Qe.prototype.ea,Qe.prototype.tickAfter=Qe.prototype.R,Qe.prototype.tickNow=Qe.prototype.za;function Ci(){return!!(S.MediaSource&&MediaSource.isTypeSupported)}function Xo(e){return Zv().canPlayType(e)!=""}function ka(){return zt("Xbox One")}function Yo(){return zt("Tizen")}function tg(){return zt("Web0S")&&zt("Chrome/38.0.2125.122 Safari/537.36")}function pu(){return!!navigator.vendor&&navigator.vendor.includes("Apple")&&!Yo()&&!zt("PC=EOS")&&!zt("VirginMedia")&&!Ma()&&!zt("AFT")}function Ma(){return zt("PlayStation 4")}function jd(){if(!pu())return null;var e=navigator.userAgent.match(/Version\/(\d+)/);return e||(e=navigator.userAgent.match(/OS (\d+)(?:_\d+)?/))?parseInt(e[1],10):null}function zt(e){return(navigator.userAgent||"").includes(e)}function Zv(){return ki||(Bd||(Bd=new Qe(function(){ki=null})),(ki=document.getElementsByTagName("video")[0]||document.getElementsByTagName("audio")[0])||(ki=document.createElement("video")),Bd.R(1),ki)}var Bd=null,ki=null;function Er(){}function Bt(e){if(!e)return"";if(e=Tt(e),e[0]==239&&e[1]==187&&e[2]==191&&(e=e.subarray(3)),S.TextDecoder&&!Ma())return e=new TextDecoder().decode(e),e.includes("�")&&Rn('Decoded string contains an "unknown character" codepoint.  That probably means the UTF8 encoding was incorrect!'),e;for(var n="",r=0;r<e.length;++r){var s=65533;if(e[r]&128?e.length>=r+2&&(e[r]&224)==192&&(e[r+1]&192)==128?(s=(e[r]&31)<<6|e[r+1]&63,r+=1):e.length>=r+3&&(e[r]&240)==224&&(e[r+1]&192)==128&&(e[r+2]&192)==128?(s=(e[r]&15)<<12|(e[r+1]&63)<<6|e[r+2]&63,r+=2):e.length>=r+4&&(e[r]&241)==240&&(e[r+1]&192)==128&&(e[r+2]&192)==128&&(e[r+3]&192)==128&&(s=(e[r]&7)<<18|(e[r+1]&63)<<12|(e[r+2]&63)<<6|e[r+3]&63,r+=3):s=e[r],65535>=s)n+=String.fromCharCode(s);else{s-=65536;var a=s&1023;n+=String.fromCharCode(55296+(s>>10)),n+=String.fromCharCode(56320+a)}}return n}function $o(e,n,r){if(!e)return"";if(!r&&e.byteLength%2!=0)throw new se(2,2,2004);r=Math.floor(e.byteLength/2);var s=new Uint16Array(r);e=Ln(e);for(var a=0;a<r;a++)s[a]=e.getUint16(2*a,n);return ng.value()(s)}function $r(e){function n(s){return r.byteLength<=s||32<=r[s]&&126>=r[s]}if(!e)return"";var r=Tt(e);if(r[0]==239&&r[1]==187&&r[2]==191)return Bt(r);if(r[0]==254&&r[1]==255)return $o(r.subarray(2),!1);if(r[0]==255&&r[1]==254)return $o(r.subarray(2),!0);if(r[0]==0&&r[2]==0)return $o(e,!1);if(r[1]==0&&r[3]==0)return $o(e,!0);if(n(0)&&n(1)&&n(2)&&n(3))return Bt(e);throw new se(2,2,2003)}function fi(e){if(S.TextEncoder&&!Ma()){var n=new TextEncoder;return ji(n.encode(e))}e=encodeURIComponent(e),e=unescape(e),n=new Uint8Array(e.length);for(var r=0;r<e.length;r++)n[r]=e[r].charCodeAt(0);return ji(n)}function _a(e,n){for(var r=new ArrayBuffer(2*e.length),s=new DataView(r),a=0;a<e.length;++a)s.setUint16(2*a,e.charCodeAt(a),n);return r}pe("shaka.util.StringUtils",Er),Er.resetFromCharCode=function(){ng.g=void 0},Er.toUTF16=_a,Er.toUTF8=fi,Er.fromBytesAutoDetect=$r,Er.fromUTF16=$o,Er.fromUTF8=Bt;var ng=new Bi(function(){function e(r){try{var s=new Uint8Array(r);return 0<String.fromCharCode.apply(null,s).length}catch(a){return!1}}for(var n={sb:65536};0<n.sb;n={sb:n.sb},n.sb/=2)if(e(n.sb))return function(r){return function(s){for(var a="",d=0;d<s.length;d+=r.sb)a+=String.fromCharCode.apply(null,s.subarray(d,d+r.sb));return a}}(n);return null});function Ms(){}function ig(e){return e=Tt(e),e=ng.value()(e),btoa(e)}function gu(e,n){return n=n==null?!0:n,e=ig(e).replace(/\+/g,"-").replace(/\//g,"_"),n?e:e.replace(/[=]*$/,"")}function wo(e){e=S.atob(e.replace(/-/g,"+").replace(/_/g,"/"));for(var n=new Uint8Array(e.length),r=0;r<e.length;++r)n[r]=e.charCodeAt(r);return n}function Ra(e){for(var n=e.length/2,r=new Uint8Array(n),s=0;s<n;s++)r[s]=S.parseInt(e.substr(2*s,2),16);return r}function vn(e){var n=Tt(e);e="",n=A(n);for(var r=n.next();!r.done;r=n.next())r=r.value,r=r.toString(16),r.length==1&&(r="0"+r),e+=r;return e}function pi(){for(var e=fn.apply(0,arguments),n=0,r=A(e),s=r.next();!s.done;s=r.next())n+=s.value.byteLength;for(n=new Uint8Array(n),r=0,e=A(e),s=e.next();!s.done;s=e.next())s=s.value,n.set(Tt(s),r),r+=s.byteLength;return n}pe("shaka.util.Uint8ArrayUtils",Ms),Ms.concat=pi,Ms.toHex=vn,Ms.fromHex=Ra,Ms.fromBase64=wo,Ms.toBase64=gu,Ms.toStandardBase64=ig;function mu(){}pe("shaka.dependencies",mu),mu.has=function(e){return Na.has(e)},mu.add=function(e,n){if(!La[e])throw Error(e+" is not supported");Na.set(e,function(){return n})};var La={muxjs:"muxjs"};mu.Allowed=La;var Na=new Map([["muxjs",function(){return S.muxjs}]]);function Mt(e){var n=this;this.s=e,this.m=Na.get("muxjs")(),this.g=new this.m.mp4.Transmuxer({keepOriginalTimestamps:!0}),this.h=null,this.l=[],this.i=[],this.j=!1,this.g.on("data",function(r){n.i=r.captions,n.l.push(pi(r.initSegment,r.data))}),this.g.on("done",function(){var r={data:pi.apply(Ms,q(n.l)),captions:n.i};n.h.resolve(r),n.j=!1})}Mt.prototype.destroy=function(){return this.g.dispose(),this.g=null,Promise.resolve()};function Qo(e,n){var r=Fd(e),s=e.toLowerCase().split(";")[0]=="audio/aac";return!Na.get("muxjs")()||!r&&!s?!1:s?Hn('audio/mp4; codecs="mp4a.40.2"'):n?Hn(vu(n,e)):(n=vu("audio",e),e=vu("video",e),Hn(n)||Hn(e))}function Fd(e){return e.toLowerCase().split(";")[0].split("/")[1]=="mp2t"}function zd(e,n){return n.toLowerCase().split(";")[0]=="audio/aac"?'audio/mp4; codecs="mp4a.40.2"':Fd(n)?vu(e,n):n}function vu(e,n){if(n=n.replace(/mp2t/i,"mp4"),e=="audio"&&(n=n.replace("video","audio")),e=/avc1\.(66|77|100)\.(\d+)/.exec(n)){var r="avc1.",s=e[1],a=Number(e[2]);r=(s=="66"?r+"4200":s=="77"?r+"4d00":r+"6400")+(a>>4).toString(16),r+=(a&15).toString(16),n=n.replace(e[0],r)}return n}function Jv(e,n){return e.j=!0,e.h=new bt,e.l=[],e.i=[],n=Tt(n),e.g.push(n),e.g.flush(),e.j&&e.h.reject(new se(2,3,3018)),e.h}function yu(){}function Qr(e,n){return n&&(e+='; codecs="'+n+'"'),e}function Da(e,n,r){return e=Qr(e,n),Qo(e,r)?zd(r,e):r=="audio"?e.replace("video","audio"):e}function _s(e){var n=Wl(e);switch(e=n[0],n=n[1].toLowerCase(),!0){case(e==="mp4a"&&n==="69"):case(e==="mp4a"&&n==="6b"):return"mp3";case(e==="mp4a"&&n==="66"):case(e==="mp4a"&&n==="67"):case(e==="mp4a"&&n==="68"):case(e==="mp4a"&&n==="40.2"):case(e==="mp4a"&&n==="40.02"):case(e==="mp4a"&&n==="40.5"):case(e==="mp4a"&&n==="40.05"):case(e==="mp4a"&&n==="40.29"):case(e==="mp4a"&&n==="40.42"):return"aac";case(e==="mp4a"&&n==="a5"):return"ac-3";case(e==="mp4a"&&n==="a6"):return"ec-3";case(e==="mp4a"&&n==="b2"):return"dtsx";case(e==="mp4a"&&n==="a9"):return"dtsc";case e==="avc1":case e==="avc3":return"avc";case e==="hvc1":case e==="hev1":return"hevc";case e==="dvh1":case e==="dvhe":return"dovi"}return e}function ey(e){return e=e.split(/ *; */),e.shift(),(e=e.find(function(n){return n.startsWith("codecs=")}))?e.split("=")[1].replace(/^"|"$/g,""):""}function Wl(e){e=e.split(".");var n=e[0];return e.shift(),[n,e.join(".")]}pe("shaka.util.MimeUtils",yu),yu.getFullType=Qr,new Map().set("codecs","codecs").set("frameRate","framerate").set("bandwidth","bitrate").set("width","width").set("height","height").set("channelsCount","channels");function Zo(e){this.j=null,this.i=e,this.C=!1,this.l=this.B=0,this.m=1/0,this.h=this.g=null,this.F="",this.s=new Map}function Gd(e){return!!(Nn[e]||e=="application/cea-608"||e=="application/cea-708")}Zo.prototype.destroy=function(){return this.i=this.j=null,this.s.clear(),Promise.resolve()};function ty(e,n,r,s){var a,d,f,g;return j(function(T){if(T.g==1)return k(T,Promise.resolve(),2);if(!e.j||!e.i)return T.return();if(r==null||s==null)return e.j.parseInit(Tt(n)),T.return();a=e.C?r:e.B,d={periodStart:e.B,segmentStart:r,segmentEnd:s,vttOffset:a},f=e.j.parseMedia(Tt(n),d),g=f.filter(function(I){return I.startTime>=e.l&&I.startTime<e.m}),e.i.append(g),e.g==null&&(e.g=Math.max(r,e.l)),e.h=Math.min(s,e.m),le(T)})}Zo.prototype.remove=function(e,n){var r=this;return j(function(s){if(s.g==1)return k(s,Promise.resolve(),2);!r.i||!r.i.remove(e,n)||r.g==null||n<=r.g||e>=r.h||(e<=r.g&&n>=r.h?r.g=r.h=null:e<=r.g&&n<r.h?r.g=n:e>r.g&&n>=r.h&&(r.h=e)),le(s)})};function Vw(e,n,r){e.l=n,e.m=r}function Vd(e,n,r){if(e.F=n,n=e.s.get(n))for(var s=A(n.keys()),a=s.next();!a.done;a=s.next())(a=n.get(a.value).filter(function(d){return d.endTime<=r}))&&e.i.append(a)}function rg(e){var n=[];e=A(e);for(var r=e.next();!r.done;r=e.next())r=r.value,n.push({stream:r.stream,cue:new xt(r.startTime,r.endTime,r.text)});return n}function ny(e,n,r){n.startTime+=r,n.endTime+=r,n=A(n.nestedCues);for(var s=n.next();!s.done;s=n.next())ny(e,s.value,r)}function og(e,n,r,s,a){var d=r+" "+s,f=new Map;n=A(n);for(var g=n.next();!g.done;g=n.next()){var T=g.value;g=T.stream,T=T.cue,f.has(g)||f.set(g,new Map),f.get(g).has(d)||f.get(g).set(d,[]),ny(e,T,a),T.startTime>=e.l&&T.startTime<e.m&&(f.get(g).get(d).push(T),g==e.F&&e.i.append([T]))}for(a=A(f.keys()),d=a.next();!d.done;d=a.next())for(d=d.value,e.s.has(d)||e.s.set(d,new Map),n=A(f.get(d).keys()),g=n.next();!g.done;g=n.next())g=g.value,T=f.get(d).get(g),e.s.get(d).set(g,T);e.g=e.g==null?Math.max(r,e.l):Math.min(e.g,Math.max(r,e.l)),e.h=Math.max(e.h,Math.min(s,e.m))}pe("shaka.text.TextEngine",Zo),Zo.prototype.destroy=Zo.prototype.destroy,Zo.findParser=function(e){return Nn[e]},Zo.unregisterParser=function(e){delete Nn[e]},Zo.registerParser=function(e,n){Nn[e]=n};var Nn={};function iy(e,n,r,s,a){var d=e.variants;(n.length||r.length)&&(d=ry(d,n,r)),d=ly(d,s),n=sg(d),n=Kd(n);var f=Kw(n,a);e.variants=e.variants.filter(function(g){return ug(g)==f})}function sg(e){var n=new ii;e=A(e);for(var r=e.next();!r.done;r=e.next()){r=r.value;var s=ug(r);n.push(s,r)}return n}function Kd(e){var n=0,r=new Map,s=e.size();return e.forEach(function(a,d){d=A(d);for(var f=d.next();!f.done;f=d.next()){f=f.value;var g=f.video;if(g&&g.width&&g.height){g=g.width*g.height*(g.frameRate||1),r.has(g)||r.set(g,new ii);var T=r.get(g);T.push(a,f),T.size()===s&&(n=Math.max(n,g))}}}),n?r.get(n):e}function ry(e,n,r){var s={};n=A(n);for(var a=n.next();!a.done;s={ee:s.ee},a=n.next())if(s.ee=a.value,a=e.filter(function(d){return function(f){return f.video&&f.video.codecs.startsWith(d.ee)}}(s)),a.length){e=a;break}for(s={},r=A(r),n=r.next();!n.done;s={Qd:s.Qd},n=r.next())if(s.Qd=n.value,n=e.filter(function(d){return function(f){return f.audio&&f.audio.codecs.startsWith(d.Qd)}}(s)),n.length){e=n;break}return e}function Kw(e,n){n=A(n);for(var r=n.next();!r.done;r=n.next())if(r=r.value,r==Xd||r==mg){if(e=Hw(e,r),e.size()==1)return e.keys()[0]}else if(r==fy)break;return Ww(e)}function Hw(e,n){var r=0,s=new ii;return e.forEach(function(a,d){for(var f=0,g=0,T=A(d),I=T.next();!I.done;I=T.next())I=I.value,I.decodingInfos.length&&(f+=I.decodingInfos[0][n]?1:0,g++);f/=g,f>r?(s.g={},s.push(a,d),r=f):f==r&&s.push(a,d)}),s}function Ww(e){var n="",r=1/0;return e.forEach(function(s,a){var d=0,f=0;a=A(a);for(var g=a.next();!g.done;g=a.next())d+=g.value.bandwidth||0,++f;d/=f,d<r&&(n=s,r=d)}),n}function ug(e){var n="";e.video&&(n=_s(e.video.codecs));var r="";return e.audio&&(r=_s(e.audio.codecs)),n+"-"+r}function xu(e,n,r){e.variants=e.variants.filter(function(s){return ba(s,n,r)})}function ba(e,n,r){function s(d,f,g){return d>=f&&d<=g}var a=e.video;if(e.disabledUntilTime!=0){if(e.disabledUntilTime>Date.now()/1e3)return!1;e.disabledUntilTime=0}return!(a&&a.width&&a.height&&(!s(a.width,n.minWidth,Math.min(n.maxWidth,r.width))||!s(a.height,n.minHeight,Math.min(n.maxHeight,r.height))||!s(a.width*a.height,n.minPixels,n.maxPixels))||e&&e.video&&e.video.frameRate&&!s(e.video.frameRate,n.minFrameRate,n.maxFrameRate)||!s(e.bandwidth,n.minBandwidth,n.maxBandwidth))}function ql(e,n,r){var s=!1;e=A(e);for(var a=e.next();!a.done;a=e.next()){a=a.value;var d=a.allowedByApplication;a.allowedByApplication=ba(a,n,r),d!=a.allowedByApplication&&(s=!0)}return s}function ag(e,n){return j(function(r){return r.g==1?k(r,lg(n,0<n.offlineSessionIds.length),2):(cg(e,n),dg(n),k(r,sy(n),0))})}function lg(e,n){return j(function(r){if(r.g==1)return k(r,Xl(e.variants,n,!1),2);e.variants=e.variants.filter(function(s){var a=s.video;if(a){var d=Hd(a.codecs);if(a.codecs.includes(",")){var f=a.codecs.split(",");d=Xr("video",f),d=Hd(d),f=Xr("audio",f),f=Tu(f);var g=Da(a.mimeType,f,"audio");if(!Hn(g))return!1;d=[d,f].join()}if(f=Da(a.mimeType,d,"video"),!Hn(f))return!1;a.codecs=d}if(d=s.audio){if(f=Tu(d.codecs),g=Da(d.mimeType,f,"audio"),!Hn(g))return!1;d.codecs=f}return ka()&&a&&(a.width&&1920<a.width||a.height&&1080<a.height)&&(a.codecs.includes("avc1.")||a.codecs.includes("avc3."))?(cy(s),!1):((a=s.decodingInfos.some(function(T){return T.supported}))||(cy(s),void 0),a)}),le(r)})}function Xl(e,n,r){var s,a,d,f,g,T,I,M,L,N;return j(function(O){if(e.some(function(z){return z.decodingInfos.length}))return O.return();for(s=navigator.mediaCapabilities,a=[],d=function(z,$){var G;return j(function(W){if(W.g==1)return ye(W,2),k(W,s.decodingInfo($),4);if(W.g!=2)return G=W.h,z.decodingInfos.push(G),_e(W,0);we(W),JSON.stringify($),le(W)})},f=A(e),g=f.next();!g.done;g=f.next())for(T=g.value,I=oy(T,n,r),M=A(I),L=M.next();!L.done;L=M.next())N=L.value,a.push(d(T,N));return k(O,Promise.all(a),0)})}function oy(e,n,r){var s=e.audio,a=e.video;if(r={type:r?"file":"media-source"},a){var d=a.codecs;if(a.codecs.includes(",")){var f=a.codecs.split(",");d=Xr("video",f),d=Hd(d),f=Xr("audio",f),f=Da(a.mimeType,f,"audio"),r.audio={contentType:f,channels:2,bitrate:e.bandwidth||1,samplerate:1,spatialRendering:!1}}if(d=Hd(d),d=Da(a.mimeType,d,"video"),r.video={contentType:d,width:a.width||64,height:a.height||64,bitrate:a.bandwidth||e.bandwidth||1,framerate:a.frameRate||1},a.hdr)switch(a.hdr){case"SDR":r.video.transferFunction="srgb";break;case"PQ":r.video.transferFunction="pq";break;case"HLG":r.video.transferFunction="hlg"}}if(s&&(d=Tu(s.codecs),d=Da(s.mimeType,d,"audio"),r.audio={contentType:d,channels:s.channelsCount||2,bitrate:s.bandwidth||e.bandwidth||1,samplerate:s.audioSamplingRate||1,spatialRendering:s.spatialAudio}),f=(e.video?e.video.drmInfos:[]).concat(e.audio?e.audio.drmInfos:[]),!f.length)return[r];e=[],d=new Map,f=A(f);for(var g=f.next();!g.done;g=f.next()){var T=g.value;d.get(T.keySystem)||d.set(T.keySystem,[]),d.get(T.keySystem).push(T)}f=n?"required":"optional",n=n?["persistent-license"]:["temporary"],T=A(d.keys());for(var I=T.next();!I.done;I=T.next()){var M=I.value;I=Object.assign({},r);var L=d.get(M);for(M={keySystem:M,initDataType:"cenc",persistentState:f,distinctiveIdentifier:"optional",sessionTypes:n},L=A(L),g=L.next();!g.done;g=L.next()){if(g=g.value,g.initData&&g.initData.length){for(var N=new Set,O=A(g.initData),z=O.next();!z.done;z=O.next())N.add(z.value.initDataType);M.initDataType=g.initData[0].initDataType}g.distinctiveIdentifierRequired&&(M.distinctiveIdentifier="required"),g.persistentStateRequired&&(M.persistentState="required"),g.sessionType&&(M.sessionTypes=[g.sessionType]),s&&(M.audio?M.audio.robustness=M.audio.robustness||g.audioRobustness:M.audio={robustness:g.audioRobustness}),a&&(M.video?M.video.robustness=M.video.robustness||g.videoRobustness:M.video={robustness:g.videoRobustness})}I.keySystemConfiguration=M,e.push(I)}return e}function Tu(e){return Yo()&&e.toLowerCase()=="ac-3"?"ec-3":e}function Hd(e){if(e.includes("avc1")){var n=e.split(".");if(n.length==3)return e=n.shift()+".",e+=parseInt(n.shift(),10).toString(16),e+=("000"+parseInt(n.shift(),10).toString(16)).slice(-4)}else if(e=="vp9")return"vp09.00.41.08";return e}function cg(e,n){n.variants=n.variants.filter(function(r){var s=r.audio;return r=r.video,!(s&&e&&e.audio&&!hg(s,e.audio)||r&&e&&e.video&&!hg(r,e.video))})}function dg(e){e.textStreams=e.textStreams.filter(function(n){return Gd(Qr(n.mimeType,n.codecs))})}function sy(e){var n,r,s,a,d,f,g;return j(function(T){switch(T.g){case 1:n=[],r=A(e.imageStreams),s=r.next();case 2:if(s.done){T.D(4);break}if(a=s.value,d=a.mimeType,Ql.has(d)){T.D(5);break}if(f=py.get(d),!f){Ql.set(d,!1),T.D(5);break}return k(T,uy(f),7);case 7:g=T.h,Ql.set(d,g);case 5:Ql.get(d)&&n.push(a),s=r.next(),T.D(2);break;case 4:e.imageStreams=n,le(T)}})}function uy(e){return new Promise(function(n){var r=new Image;r.src=e,"decode"in r?r.decode().then(function(){n(!0)}).catch(function(){n(!1)}):r.onload=r.onerror=function(){n(r.height===2)}})}function hg(e,n){return!(e.mimeType!=n.mimeType||e.codecs.split(".")[0]!=n.codecs.split(".")[0])}function wu(e){var n=e.audio,r=e.video,s=n?n.mimeType:null,a=r?r.mimeType:null,d=n?n.codecs:null,f=r?r.codecs:null,g=[];f&&g.push(f),d&&g.push(d);var T=[];r&&T.push(r.mimeType),n&&T.push(n.mimeType),T=T[0]||null;var I=[];n&&I.push(n.kind),r&&I.push(r.kind),I=I[0]||null;var M=new Set;if(n)for(var L=A(n.roles),N=L.next();!N.done;N=L.next())M.add(N.value);if(r)for(L=A(r.roles),N=L.next();!N.done;N=L.next())M.add(N.value);return e={id:e.id,active:!1,type:"variant",bandwidth:e.bandwidth,language:e.language,label:null,kind:I,width:null,height:null,frameRate:null,pixelAspectRatio:null,hdr:null,mimeType:T,audioMimeType:s,videoMimeType:a,codecs:g.join(", "),audioCodec:d,videoCodec:f,primary:e.primary,roles:Array.from(M),audioRoles:null,forced:!1,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null,originalImageId:null},r&&(e.videoId=r.id,e.originalVideoId=r.originalId,e.width=r.width||null,e.height=r.height||null,e.frameRate=r.frameRate||null,e.pixelAspectRatio=r.pixelAspectRatio||null,e.videoBandwidth=r.bandwidth||null),n&&(e.audioId=n.id,e.originalAudioId=n.originalId,e.channelsCount=n.channelsCount,e.audioSamplingRate=n.audioSamplingRate,e.audioBandwidth=n.bandwidth||null,e.spatialAudio=n.spatialAudio,e.label=n.label,e.audioRoles=n.roles),e}function Wd(e){return{id:e.id,active:!1,type:yt,bandwidth:0,language:e.language,label:e.label,kind:e.kind||null,width:null,height:null,frameRate:null,pixelAspectRatio:null,hdr:null,mimeType:e.mimeType,audioMimeType:null,videoMimeType:null,codecs:e.codecs||null,audioCodec:null,videoCodec:null,primary:e.primary,roles:e.roles,audioRoles:null,forced:e.forced,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:e.originalId,originalImageId:null}}function fg(e){var n=e.width||null,r=e.height||null,s=null;e.segmentIndex&&(s=e.segmentIndex.get(0));var a=e.tilesLayout;return s&&(a=s.tilesLayout||a),a&&n!=null&&(n/=Number(a.split("x")[0])),a&&r!=null&&(r/=Number(a.split("x")[1])),{id:e.id,active:!1,type:"image",bandwidth:e.bandwidth||0,language:"",label:null,kind:null,width:n,height:r,frameRate:null,pixelAspectRatio:null,hdr:null,mimeType:e.mimeType,audioMimeType:null,videoMimeType:null,codecs:null,audioCodec:null,videoCodec:null,primary:!1,roles:[],audioRoles:null,forced:!1,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:a||null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null,originalImageId:e.originalId}}function pg(e){return e.__shaka_id||(e.__shaka_id=hy++),e.__shaka_id}function Yl(e){var n=ln(e);return n.active=e.mode!="disabled",n.type="text",n.originalTextId=e.id,e.kind=="captions"&&(n.mimeType="application/cea-608"),e.kind&&(n.roles=[e.kind]),e.kind=="forced"&&(n.forced=!0),n}function qd(e){var n=ln(e);return n.active=e.enabled,n.type="variant",n.originalAudioId=e.id,e.kind=="main"&&(n.primary=!0),e.kind&&(n.roles=[e.kind],n.audioRoles=[e.kind],n.label=e.label),n}function ln(e){return{id:pg(e),active:!1,type:"",bandwidth:0,language:At(e.language),label:e.label,kind:e.kind,width:null,height:null,frameRate:null,pixelAspectRatio:null,hdr:null,mimeType:null,audioMimeType:null,videoMimeType:null,codecs:null,audioCodec:null,videoCodec:null,primary:!1,roles:[],forced:!1,audioRoles:null,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null,originalImageId:null}}function Eu(e){return e.allowedByApplication&&e.allowedByKeySystem}function ay(e){return e.filter(function(n){return Eu(n)})}function ly(e,n){var r=e.filter(function(f){return f.audio&&f.audio.channelsCount}),s=new Map;r=A(r);for(var a=r.next();!a.done;a=r.next()){a=a.value;var d=a.audio.channelsCount;s.has(d)||s.set(d,[]),s.get(d).push(a)}return r=Array.from(s.keys()),r.length==0?e:(e=r.filter(function(f){return f<=n}),e.length?s.get(Math.max.apply(Math,q(e))):s.get(Math.min.apply(Math,q(r))))}function $l(e,n,r,s){var a=e,d=e.filter(function(T){return T.primary});d.length&&(a=d);var f=a.length?a[0].language:"";if(a=a.filter(function(T){return T.language==f}),n){var g=bd(At(n),e.map(function(T){return T.language}));g&&(a=e.filter(function(T){return At(T.language)==g}))}if(a=a.filter(function(T){return T.forced==s}),r){if(e=gg(a,r),e.length)return e}else if(e=a.filter(function(T){return T.roles.length==0}),e.length)return e;return e=a.map(function(T){return T.roles}).reduce(Nd,[]),e.length?gg(a,e[0]):a}function gg(e,n){return e.filter(function(r){return r.roles.includes(n)})}function cy(e){var n=[];return e.audio&&n.push(dy(e.audio)),e.video&&n.push(dy(e.video)),n.join(", ")}function dy(e){return e.type=="audio"?"type=audio codecs="+e.codecs+" bandwidth="+e.bandwidth+" channelsCount="+e.channelsCount+" audioSamplingRate="+e.audioSamplingRate:e.type=="video"?"type=video codecs="+e.codecs+" bandwidth="+e.bandwidth+" frameRate="+e.frameRate+" width="+e.width+" height="+e.height:"unexpected stream type"}var hy=0,Xd="smooth",mg="powerEfficient",fy="bandwidth",Ql=new Map().set("image/svg+xml",!0).set("image/png",!0).set("image/jpeg",!0).set("image/jpg",!0),py=new Map().set("image/webp","data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA").set("image/avif","data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A=");function qt(){var e=this;this.m=null,this.l=!1,this.i=new Hl,navigator.connection&&navigator.connection.addEventListener("change",function(){if(e.g.useNetworkInformation&&e.l){e.i=new Hl,e.g&&e.i.configure(e.g.advanced);var n=e.chooseVariant();n&&e.m(n)}}),this.s=[],this.C=1,this.F=!1,this.h=this.j=this.g=this.B=null,this.G=new Qe(function(){if(e.g.restrictToElementSize){var n=e.chooseVariant();n&&e.m(n)}})}v=qt.prototype,v.stop=function(){this.m=null,this.l=!1,this.s=[],this.C=1,this.j=this.B=null,this.h&&(this.h.disconnect(),this.h=null),this.G.stop()},v.init=function(e){this.m=e},v.chooseVariant=function(){var e=1/0,n=1/0;this.g.restrictToScreenSize&&(n=this.g.ignoreDevicePixelRatio?1:S.devicePixelRatio,e=S.screen.height*n,n*=S.screen.width),this.h&&this.g.restrictToElementSize&&(n=this.g.ignoreDevicePixelRatio?1:S.devicePixelRatio,e=this.j.clientWidth*n,n*=this.j.clientHeight),e=gy(this.g.restrictions,this.s,e,n),n=this.i.getBandwidthEstimate(vg(this)),this.s.length&&!e.length&&(e=gy(null,this.s,1/0,1/0),e=[e[0]]);for(var r=e[0]||null,s=0;s<e.length;s++){for(var a=e[s],d=isNaN(this.C)?1:Math.abs(this.C),f=d*a.bandwidth/this.g.bandwidthDowngradeTarget,g={bandwidth:1/0},T=s+1;T<e.length;T++)if(a.bandwidth!=e[T].bandwidth){g=e[T];break}d=d*g.bandwidth/this.g.bandwidthUpgradeTarget,n>=f&&n<=d&&r.bandwidth!=a.bandwidth&&(r=a)}return this.B=Date.now(),r},v.enable=function(){this.l=!0},v.disable=function(){this.l=!1},v.segmentDownloaded=function(e,n){if(this.i.sample(e,n),this.B!=null&&this.l)e:{if(this.F){if(Date.now()-this.B<1e3*this.g.switchInterval)break e}else{if(e=this.i,!(e.g>=e.i))break e;this.F=!0}e=this.chooseVariant(),this.i.getBandwidthEstimate(vg(this)),e&&this.m(e)}},v.getBandwidthEstimate=function(){return this.i.getBandwidthEstimate(vg(this))},v.setVariants=function(e){this.s=e},v.playbackRateChanged=function(e){this.C=e},v.setMediaElement=function(e){var n=this;this.j=e,this.h&&(this.h.disconnect(),this.h=null),this.j&&"ResizeObserver"in S&&(this.h=new ResizeObserver(function(){n.G.R(qw)}),this.h.observe(this.j))},v.configure=function(e){this.g=e,this.i&&this.g&&this.i.configure(this.g.advanced)};function vg(e){var n=e.g.defaultBandwidthEstimate;return navigator.connection&&navigator.connection.downlink&&e.g.useNetworkInformation&&(n=1e6*navigator.connection.downlink),n}function gy(e,n,r,s){return e&&(n=n.filter(function(a){return ba(a,e,{width:s,height:r})})),n.sort(function(a,d){return a.bandwidth-d.bandwidth})}pe("shaka.abr.SimpleAbrManager",qt),qt.prototype.configure=qt.prototype.configure,qt.prototype.setMediaElement=qt.prototype.setMediaElement,qt.prototype.playbackRateChanged=qt.prototype.playbackRateChanged,qt.prototype.setVariants=qt.prototype.setVariants,qt.prototype.getBandwidthEstimate=qt.prototype.getBandwidthEstimate,qt.prototype.segmentDownloaded=qt.prototype.segmentDownloaded,qt.prototype.disable=qt.prototype.disable,qt.prototype.enable=qt.prototype.enable,qt.prototype.chooseVariant=qt.prototype.chooseVariant,qt.prototype.init=qt.prototype.init,qt.prototype.stop=qt.prototype.stop;var qw=1;function yg(e,n){this.g=e,this.h=n}yg.prototype.toString=function(){return"v"+this.g+"."+this.h};function xg(e,n){var r=new yg(5,0),s=Tg,a=s.g,d=r.h-a.h;(0<(r.g-a.g||d)?s.i:s.h)(s.g,r,e,n)}function Pa(e,n,r,s){ze([r,"has been deprecated and will be removed in",n,". We are currently at version",e,". Additional information:",s].join(" "))}function Yd(e,n,r,s){Rn([r,"has been deprecated and has been removed in",n,". We are now at version",e,". Additional information:",s].join(""))}var Tg=null;pe("shaka.config.AutoShowText",{NEVER:0,ALWAYS:1,IF_PREFERRED_TEXT_LANGUAGE:2,IF_SUBTITLES_MAY_BE_NEEDED:3});function Zl(e,n){for(this.h=e,this.g=new Set([e]),n=n||[],e=A(n),n=e.next();!n.done;n=e.next())this.add(n.value)}Zl.prototype.add=function(e){return Rs(this.h,e)?(this.g.add(e),!0):!1};function Rs(e,n){var r;if(!(r=!!e.audio!=!!n.audio||!!e.video!=!!n.video||e.language!=n.language)&&(r=e.audio&&n.audio)){r=e.audio;var s=n.audio;r=!((!(!r.channelsCount||!s.channelsCount||2<r.channelsCount||2<s.channelsCount)||r.channelsCount==s.channelsCount)&&Zt(r,s)&&Ls(r.roles,s.roles))}return!r&&(r=e.video&&n.video)&&(e=e.video,n=n.video,r=!(Zt(e,n)&&Ls(e.roles,n.roles))),!r}Zl.prototype.values=function(){return this.g.values()};function Zt(e,n){if(e.mimeType!=n.mimeType||(e=e.codecs.split(",").map(function(s){return Wl(s)[0]}),n=n.codecs.split(",").map(function(s){return Wl(s)[0]}),e.length!=n.length))return!1;e.sort(),n.sort();for(var r=0;r<e.length;r++)if(e[r]!=n[r])return!1;return!0}function Ls(e,n){if(e=new Set(e),n=new Set(n),e.delete("main"),n.delete("main"),e.size!=n.size)return!1;e=A(e);for(var r=e.next();!r.done;r=e.next())if(!n.has(r.value))return!1;return!0}function $d(e){this.g=e,this.h=new Zr(e.language,"",e.audio&&e.audio.channelsCount?e.audio.channelsCount:0,"")}$d.prototype.create=function(e){var n=this,r=e.filter(function(s){return Rs(n.g,s)});return r.length?new Zl(r[0],r):this.h.create(e)};function Zr(e,n,r,s){this.i=e,this.j=n,this.g=r,this.h=s===void 0?"":s}Zr.prototype.create=function(e){var n=[];n=Eo(e,this.i);var r=e.filter(function(s){return s.primary});for(n=n.length?n:r.length?r:e,e=my(n,this.j),e.length&&(n=e),this.g&&(e=ly(n,this.g),e.length&&(n=e)),this.h&&(e=Xw(n,this.h),e.length&&(n=e)),e=new Zl(n[0]),n=A(n),r=n.next();!r.done;r=n.next())r=r.value,Rs(e.h,r)&&e.add(r);return e};function Eo(e,n){n=At(n);var r=bd(n,e.map(function(s){return hu(s)}));return r?e.filter(function(s){return r==hu(s)}):[]}function my(e,n){return e.filter(function(r){return r.audio?n?r.audio.roles.includes(n):r.audio.roles.length==0:!1})}function Xw(e,n){return e.filter(function(r){return r.audio?r.audio.label.toLowerCase()==n.toLowerCase():!1})}function dt(){this.g=kt,this.h=new Map().set(kt,2).set(Jo,1)}function wg(e,n,r){e.h.set(kt,r).set(Jo,n)}var Jo=0,kt=1;function Au(e,n){var r=es();this.l=e.maxAttempts==null?r.maxAttempts:e.maxAttempts,this.j=e.baseDelay==null?r.baseDelay:e.baseDelay,this.s=e.fuzzFactor==null?r.fuzzFactor:e.fuzzFactor,this.m=e.backoffFactor==null?r.backoffFactor:e.backoffFactor,this.g=0,this.h=this.j,(this.i=n===void 0?!1:n)&&(this.g=1)}function Eg(e){var n,r;return j(function(s){if(s.g==1){if(e.g>=e.l)if(e.i)e.g=1,e.h=e.j;else throw new se(2,7,1010);return n=e.g,e.g++,n==0?s.return():(r=e.h*(1+(2*Math.random()-1)*e.s),k(s,new Promise(function(a){new Qe(a).R(r/1e3)}),2))}e.h*=e.m,le(s)})}function es(){return{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:3e4,stallTimeout:5e3,connectionTimeout:1e4}}function jt(e,n){this.promise=e,this.i=n,this.g=!1}function Nt(e){return new jt(Promise.reject(e),function(){return Promise.resolve()})}function Jr(){var e=Promise.reject(new se(2,7,7001));return e.catch(function(){}),new jt(e,function(){return Promise.resolve()})}function oi(e){return new jt(Promise.resolve(e),function(){return Promise.resolve()})}function Ao(e){return new jt(e,function(){return e.catch(function(){})})}jt.prototype.abort=function(){return this.g=!0,this.i()};function Ag(e){return new jt(Promise.all(e.map(function(n){return n.promise})),function(){return Promise.all(e.map(function(n){return n.abort()}))})}jt.prototype.finally=function(e){return this.promise.then(function(){return e(!0)},function(){return e(!1)}),this},jt.prototype.ia=function(e,n){function r(g){return function(T){if(a.g&&g)d.reject(f);else{var I=g?e:n;I?s=Yw(I,T,d):(g?d.resolve:d.reject)(T)}}}function s(){return d.reject(f),a.abort()}var a=this,d=new bt,f=new se(2,7,7001);return this.promise.then(r(!0),r(!1)),new jt(d,function(){return s()})};function Yw(e,n,r){try{var s=e(n);return s&&s.promise&&s.abort?(r.resolve(s.promise),function(){return s.abort()}):(r.resolve(s),function(){return Promise.resolve(s).then(function(){},function(){})})}catch(a){return r.reject(a),function(){return Promise.resolve()}}}pe("shaka.util.AbortableOperation",jt),jt.prototype.chain=jt.prototype.ia,jt.prototype.finally=jt.prototype.finally,jt.all=Ag,jt.prototype.abort=jt.prototype.abort,jt.notAbortable=Ao,jt.completed=oi,jt.aborted=Jr,jt.failed=Nt;function Su(e){function n(s){switch(typeof s){case"undefined":case"boolean":case"number":case"string":case"symbol":case"function":return s;default:if(!s||s.buffer&&s.buffer.constructor==ArrayBuffer)return s;if(r.has(s))return null;var a=s.constructor==Array;if(s.constructor!=Object&&!a)return null;r.add(s);var d=a?[]:{},f;for(f in s)d[f]=n(s[f]);return a&&(d.length=s.length),d}}var r=new Set;return n(e)}function Jl(e){var n={},r;for(r in e)n[r]=e[r];return n}function eo(){this.g=[]}function Iu(e,n){e.g.push(n.finally(function(){Ii(e.g,n)}))}eo.prototype.destroy=function(){for(var e=[],n=A(this.g),r=n.next();!r.done;r=n.next())r=r.value,r.promise.catch(function(){}),e.push(r.abort());return this.g=[],Promise.all(e)};function Ot(e,n,r){vt.call(this),this.i=!1,this.m=new eo,this.g=new Set,this.h=new Set,this.l=e||null,this.j=n||null,this.B=r||null,this.s=!1}Te(Ot,vt),v=Ot.prototype,v.Ne=function(e){this.s=e};function Mi(e,n,r,s){r=r||yy;var a=Ns[e];(!a||r>=a.priority)&&(Ns[e]={priority:r,sh:n,uh:s===void 0?!1:s})}v.vh=function(e){this.g.add(e)},v.Lh=function(e){this.g.delete(e)},v.qg=function(){this.g.clear()},v.wh=function(e){this.h.add(e)},v.Mh=function(e){this.h.delete(e)},v.rg=function(){this.h.clear()};function Ct(e,n,r){return{uris:e,method:"GET",body:null,headers:{},allowCrossSiteCredentials:!1,retryParameters:n,licenseRequestType:null,sessionId:null,drmInfo:null,initData:null,initDataType:null,streamDataCallback:r===void 0?null:r}}v.destroy=function(){return this.i=!0,this.g.clear(),this.h.clear(),vt.prototype.release.call(this),this.m.destroy()},v.request=function(e,n){var r=this,s=new vy;if(this.i){var a=Promise.reject(new se(2,7,7001));return a.catch(function(){}),new ec(a,function(){return Promise.resolve()},s)}n.method=n.method||"GET",n.headers=n.headers||{},n.retryParameters=n.retryParameters?Su(n.retryParameters):es(),n.uris=Su(n.uris),a=Xt(this,e,n);var d=a.ia(function(){return Sg(r,e,n,new Au(n.retryParameters,!1),0,null,s)}),f=d.ia(function(L){return $w(r,e,L)}),g=Date.now(),T=0;a.promise.then(function(){T=Date.now()-g},function(){});var I=0;d.promise.then(function(){I=Date.now()},function(){});var M=f.ia(function(L){var N=Date.now()-I,O=L.response;return O.timeMs+=T,O.timeMs+=N,L.eh||!r.l||O.fromCache||e!=ts||r.l(O.timeMs,O.data.byteLength),O},function(L){throw L&&(L.severity=2),L});return a=new ec(M.promise,function(){return M.abort()},s),Iu(this.m,a),a};function Xt(e,n,r){var s=oi(void 0),a={};e=A(e.g);for(var d=e.next();!d.done;a={Zd:a.Zd},d=e.next())a.Zd=d.value,s=s.ia(function(f){return function(){return r.body&&(r.body=ji(r.body)),f.Zd(n,r)}}(a));return s.ia(void 0,function(f){throw f instanceof se&&f.code==7001?f:new se(2,1,1006,f)})}function Sg(e,n,r,s,a,d,f){e.s&&(r.uris[a]=r.uris[a].replace("http://","https://"));var g=new Pi(r.uris[a]),T=g.Wa,I=!1;T||(T=location.protocol,T=T.slice(0,-1),zl(g,T),r.uris[a]=g.toString()),T=T.toLowerCase();var M=(T=Ns[T])?T.sh:null;if(!M)return Nt(new se(2,1,1e3,g));var L=T.uh,N=null,O=null,z=!1,$=!1,G;return Ao(Eg(s)).ia(function(){if(e.i)return Jr();G=Date.now();var W=M(r.uris[a],r,n,function(fe,xe,Se){N&&N.stop(),O&&O.R(J/1e3),e.l&&n==ts&&(e.l(fe,xe),I=!0,f.g=Se)},function(fe){e.j&&e.j(fe,r,n),$=!0});if(!L)return W;var ae=r.retryParameters.connectionTimeout;ae&&(N=new Qe(function(){z=!0,W.abort()}),N.R(ae/1e3));var J=r.retryParameters.stallTimeout;return J&&(O=new Qe(function(){z=!0,W.abort()})),W}).ia(function(W){N&&N.stop(),O&&O.stop(),W.timeMs==null&&(W.timeMs=Date.now()-G);var ae={response:W,eh:I};return!$&&e.j&&e.j(W.headers,r,n),ae},function(W){if(N&&N.stop(),O&&O.stop(),e.B){var ae=null,J=0;W instanceof se&&(ae=W,W.code==1001&&(J=W.data[1])),e.B(r,ae,J,z)}if(e.i)return Jr();if(z&&(W=new se(1,1,1003,r.uris[a],n)),W instanceof se){if(W.code==7001)throw W;if(W.code==1010)throw d;if(W.severity==1)return ae=new Map().set("error",W),ae=new Fe("retry",ae),e.dispatchEvent(ae),a=(a+1)%r.uris.length,Sg(e,n,r,s,a,W,f)}throw W})}function $w(e,n,r){var s=oi(void 0),a={};e=A(e.h);for(var d=e.next();!d.done;a={$d:a.$d},d=e.next())a.$d=d.value,s=s.ia(function(f){return function(){var g=r.response;return g.data&&(g.data=ji(g.data)),f.$d(n,g)}}(a));return s.ia(function(){return r},function(f){var g=2;if(f instanceof se){if(f.code==7001)throw f;g=f.severity}throw new se(g,1,1007,f)})}pe("shaka.net.NetworkingEngine",Ot),Ot.prototype.request=Ot.prototype.request,Ot.prototype.destroy=Ot.prototype.destroy,Ot.makeRequest=Ct,Ot.defaultRetryParameters=function(){return es()},Ot.prototype.clearAllResponseFilters=Ot.prototype.rg,Ot.prototype.unregisterResponseFilter=Ot.prototype.Mh,Ot.prototype.registerResponseFilter=Ot.prototype.wh,Ot.prototype.clearAllRequestFilters=Ot.prototype.qg,Ot.prototype.unregisterRequestFilter=Ot.prototype.Lh,Ot.prototype.registerRequestFilter=Ot.prototype.vh,Ot.unregisterScheme=function(e){delete Ns[e]},Ot.registerScheme=Mi,Ot.prototype.setForceHTTPS=Ot.prototype.Ne;function vy(){this.g=0}Ot.NumBytesRemainingClass=vy;function ec(e,n,r){jt.call(this,e,n),this.h=r}Te(ec,jt),Ot.PendingRequest=ec;var ts=1;Ot.RequestType={MANIFEST:0,SEGMENT:ts,LICENSE:2,APP:3,TIMING:4,SERVER_CERTIFICATE:5,KEY:6};var yy=3;Ot.PluginPriority={FALLBACK:1,PREFERRED:2,APPLICATION:yy};var Ns={};function ns(e){this.g=!1,this.h=new bt,this.i=e}ns.prototype.destroy=function(){var e=this;return this.g?this.h:(this.g=!0,this.i().then(function(){e.h.resolve()},function(){e.h.resolve()}))};function Gt(e,n){if(e.g)throw n instanceof se&&n.code==7003?n:new se(2,7,7003,n)}function Ve(){this.g=new ii}v=Ve.prototype,v.release=function(){this.Rb(),this.g=null},v.o=function(e,n,r,s){this.g&&(e=new So(e,n,r,s),this.g.push(n,e))},v.Da=function(e,n,r,s){function a(f){d.qc(e,n,a),r(f)}var d=this;this.o(e,n,a,s)},v.qc=function(e,n,r){if(this.g){var s=this.g.get(n)||[];s=A(s);for(var a=s.next();!a.done;a=s.next())a=a.value,a.target!=e||r!=a.listener&&r||(a.qc(),this.g.remove(n,a))}},v.Rb=function(){if(this.g){var e=this.g,n=[],r;for(r in e.g)n.push.apply(n,q(e.g[r]));for(e=A(n),n=e.next();!n.done;n=e.next())n.value.qc();this.g.g={}}},pe("shaka.util.EventManager",Ve),Ve.prototype.removeAll=Ve.prototype.Rb,Ve.prototype.unlisten=Ve.prototype.qc,Ve.prototype.listenOnce=Ve.prototype.Da,Ve.prototype.listen=Ve.prototype.o,Ve.prototype.release=Ve.prototype.release;function So(e,n,r,s){this.target=e,this.type=n,this.listener=r,this.g=xy(e,s),this.target.addEventListener(n,r,this.g)}So.prototype.qc=function(){this.target.removeEventListener(this.type,this.listener,this.g),this.listener=this.target=null,this.g=!1};function xy(e,n){if(n==null)return!1;if(typeof n=="boolean")return n;var r=new Set(["passive","capture"]);return Object.keys(n).filter(function(s){return!r.has(s)}),Vt(e)?n:n.capture||!1}function Vt(e){var n=Jt;if(n==null){n=!1;try{var r={},s={get:function(){return n=!0,!1}};Object.defineProperty(r,"passive",s),Object.defineProperty(r,"capture",s),s=function(){},e.addEventListener("test",s,r),e.removeEventListener("test",s,r)}catch(a){n=!1}Jt=n}return n||!1}var Jt=void 0;function is(e){for(var n=new Map,r=A(Object.keys(e)),s=r.next();!s.done;s=r.next())s=s.value,n.set(s,e[s]);return n}function Qd(e){var n={};return e.forEach(function(r,s){n[s]=r}),n}function Oa(e,n){if(e||n){if(e&&!n||n&&!e)return!1}else return!0;if(e.size!=n.size)return!1;e=A(e);for(var r=e.next();!r.done;r=e.next()){var s=A(r.value);if(r=s.next().value,s=s.next().value,!n.has(r)||(r=n.get(r),r!=s||r==null))return!1}return!0}function Pt(e,n){this.W=Ln(e),this.h=n==Ua,this.g=0}v=Pt.prototype,v.xa=function(){return this.g<this.W.byteLength},v.ma=function(){return this.g},v.Kg=function(){return this.W.byteLength},v.pb=function(){try{var e=this.W.getUint8(this.g);return this.g+=1,e}catch(n){throw Ar()}},v.De=function(){try{var e=this.W.getUint16(this.g,this.h);return this.g+=2,e}catch(n){throw Ar()}},v.N=function(){try{var e=this.W.getUint32(this.g,this.h);return this.g+=4,e}catch(n){throw Ar()}},v.Rf=function(){try{var e=this.W.getInt32(this.g,this.h);return this.g+=4,e}catch(n){throw Ar()}},v.Cb=function(){try{if(this.h)var e=this.W.getUint32(this.g,!0),n=this.W.getUint32(this.g+4,!0);else n=this.W.getUint32(this.g,!1),e=this.W.getUint32(this.g+4,!1)}catch(r){throw Ar()}if(2097151<n)throw new se(2,3,3001);return this.g+=8,n*Math.pow(2,32)+e},v.Bb=function(e){if(this.g+e>this.W.byteLength)throw Ar();var n=Tt(this.W,this.g,e);return this.g+=e,n},v.skip=function(e){if(this.g+e>this.W.byteLength)throw Ar();this.g+=e},v.Eh=function(e){if(this.g<e)throw Ar();this.g-=e},v.seek=function(e){if(0>e||e>this.W.byteLength)throw Ar();this.g=e},v.Vc=function(){for(var e=this.g;this.xa()&&this.W.getUint8(this.g)!=0;)this.g+=1;return e=Tt(this.W,e,this.g-e),this.g+=1,Bt(e)};function Ar(){return new se(2,3,3e3)}pe("shaka.util.DataViewReader",Pt),Pt.prototype.readTerminatedString=Pt.prototype.Vc,Pt.prototype.seek=Pt.prototype.seek,Pt.prototype.rewind=Pt.prototype.Eh,Pt.prototype.skip=Pt.prototype.skip,Pt.prototype.readBytes=Pt.prototype.Bb,Pt.prototype.readUint64=Pt.prototype.Cb,Pt.prototype.readInt32=Pt.prototype.Rf,Pt.prototype.readUint32=Pt.prototype.N,Pt.prototype.readUint16=Pt.prototype.De,Pt.prototype.readUint8=Pt.prototype.pb,Pt.prototype.getLength=Pt.prototype.Kg,Pt.prototype.getPosition=Pt.prototype.ma,Pt.prototype.hasMoreData=Pt.prototype.xa;var Ua=1;Pt.Endianness={BIG_ENDIAN:0,LITTLE_ENDIAN:Ua};function Kt(){this.i=[],this.h=[],this.g=!1}v=Kt.prototype,v.box=function(e,n){return e=tc(e),this.i[e]=Ty,this.h[e]=n,this},v.S=function(e,n){return e=tc(e),this.i[e]=Ds,this.h[e]=n,this},v.stop=function(){this.g=!0},v.parse=function(e,n,r){for(e=new Pt(e,0),this.g=!1;e.xa()&&!this.g;)this.Tc(0,e,n,r)},v.Tc=function(e,n,r,s){var a=n.ma();if(s&&a+8>n.W.byteLength)this.g=!0;else{var d=n.N(),f=n.N(),g=tn(f),T=!1;switch(d){case 0:d=n.W.byteLength-a;break;case 1:if(s&&n.ma()+8>n.W.byteLength){this.g=!0;return}d=n.Cb(),T=!0}var I=this.h[f];if(I){var M=null,L=null;if(this.i[f]==Ds){if(s&&n.ma()+4>n.W.byteLength){this.g=!0;return}L=n.N(),M=L>>>24,L&=16777215}f=a+d,r&&f>n.W.byteLength&&(f=n.W.byteLength),s&&f>n.W.byteLength?this.g=!0:(s=f-n.ma(),n=0<s?n.Bb(s):new Uint8Array(0),n=new Pt(n,0),I({name:g,parser:this,partialOkay:r||!1,version:M,flags:L,reader:n,size:d,start:a+e,has64BitSize:T}))}else n.skip(Math.min(a+d-n.ma(),n.W.byteLength-n.ma()))}};function en(e){for(var n=nc(e);e.reader.xa()&&!e.parser.g;)e.parser.Tc(e.start+n,e.reader,e.partialOkay)}function ja(e){for(var n=nc(e),r=e.reader.N(),s=0;s<r&&(e.parser.Tc(e.start+n,e.reader,e.partialOkay),!e.parser.g);s++);}function Zd(e){var n=nc(e);for(e.reader.skip(78);e.reader.xa()&&!e.parser.g;)e.parser.Tc(e.start+n,e.reader,e.partialOkay)}function rs(e){return function(n){e(n.reader.Bb(n.reader.W.byteLength-n.reader.ma()))}}function tc(e){var n=0;e=A(e);for(var r=e.next();!r.done;r=e.next())n=n<<8|r.value.charCodeAt(0);return n}function tn(e){return String.fromCharCode(e>>24&255,e>>16&255,e>>8&255,e&255)}function nc(e){return 8+(e.has64BitSize?8:0)+(e.flags!=null?4:0)}pe("shaka.util.Mp4Parser",Kt),Kt.headerSize=nc,Kt.typeToString=tn,Kt.allData=rs,Kt.visualSampleEntry=Zd,Kt.sampleDescription=ja,Kt.children=en,Kt.prototype.parseNext=Kt.prototype.Tc,Kt.prototype.parse=Kt.prototype.parse,Kt.prototype.stop=Kt.prototype.stop,Kt.prototype.fullBox=Kt.prototype.S,Kt.prototype.box=Kt.prototype.box;var Ty=0,Ds=1;function Io(e){var n=this;this.g=[],this.h=[],this.data=[],new Kt().box("moov",en).box("moof",en).S("pssh",function(r){if(!(1<r.version)){var s=Tt(r.reader.W,-12,r.size);if(n.data.push(s),n.g.push(vn(r.reader.Bb(16))),0<r.version){s=r.reader.N();for(var a=0;a<s;a++){var d=vn(r.reader.Bb(16));n.h.push(d)}}}}).parse(e)}function Ba(e,n,r,s){var a=e.length,d=n.length+16+a;0<s&&(d+=4+16*r.size);var f=new Uint8Array(d),g=Ln(f),T=0;if(g.setUint32(T,d),T+=4,g.setUint32(T,1886614376),T+=4,1>s?g.setUint32(T,0):g.setUint32(T,16777216),T+=4,f.set(n,T),T+=n.length,0<s)for(g.setUint32(T,r.size),T+=4,n=A(r),r=n.next();!r.done;r=n.next())r=Ra(r.value),f.set(r,T),T+=r.length;return g.setUint32(T,a),f.set(e,T+4),f}function ic(e,n){return e=on(e,n),e.length!=1?null:e[0]}function Ft(e,n,r){return e=rc(e,n,r),e.length!=1?null:e[0]}function on(e,n){var r=[];e=A(e.childNodes);for(var s=e.next();!s.done;s=e.next())s=s.value,s instanceof Element&&s.tagName==n&&r.push(s);return r}function os(e){return Array.from(e.childNodes).filter(function(n){return n instanceof Element})}function rc(e,n,r){var s=[];e=A(e.childNodes);for(var a=e.next();!a.done;a=e.next())a=a.value,a instanceof Element&&a.localName==r&&a.namespaceURI==n&&s.push(a);return s}function Cu(e,n,r){return e.hasAttributeNS(n,r)?e.getAttributeNS(n,r):null}function Sr(e,n,r){n=A(n);for(var s=n.next();!s.done;s=n.next())if(s=s.value,e.hasAttributeNS(s,r))return e.getAttributeNS(s,r);return null}function rr(e){return Array.from(e.childNodes).every(Fa)?e.textContent.trim():null}function Fa(e){return e.nodeType==Node.TEXT_NODE||e.nodeType==Node.CDATA_SECTION_NODE}function nn(e,n,r,s){s=s===void 0?null:s;var a=null;return e=e.getAttribute(n),e!=null&&(a=r(e)),a==null?s:a}function za(e){return e?(/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(e)&&(e+="Z"),e=Date.parse(e),isNaN(e)?null:e/1e3):null}function Co(e){return!e||(e=RegExp("^P(?:([0-9]*)Y)?(?:([0-9]*)M)?(?:([0-9]*)D)?(?:T(?:([0-9]*)H)?(?:([0-9]*)M)?(?:([0-9.]*)S)?)?$").exec(e),!e)?null:(e=31536e3*Number(e[1]||null)+2592e3*Number(e[2]||null)+86400*Number(e[3]||null)+3600*Number(e[4]||null)+60*Number(e[5]||null)+Number(e[6]||null),isFinite(e)?e:null)}function Jd(e){var n=/([0-9]+)-([0-9]+)/.exec(e);return!n||(e=Number(n[1]),!isFinite(e))?null:(n=Number(n[2]),isFinite(n)?{start:e,end:n}:null)}function eh(e){return e=Number(e),e%1===0?e:null}function th(e){return e=Number(e),e%1===0&&0<e?e:null}function ko(e){return e=Number(e),e%1===0&&0<=e?e:null}function Ga(e){return e=Number(e),isNaN(e)?null:e}function Qw(e){var n,r=(n=e.match(/^(\d+)\/(\d+)$/))?Number(n[1])/Number(n[2]):Number(e);return isNaN(r)?null:r}function Va(e,n){var r=new DOMParser,s=Zw.value()(e);e=null;try{e=r.parseFromString(s,"text/xml")}catch(a){return null}if(r=e.documentElement,!r||r.getElementsByTagName("parsererror").length||r.tagName!=n)return null;for(n=document.createNodeIterator(e,NodeFilter.SHOW_ALL);e=n.nextNode();)if(e instanceof HTMLElement||e instanceof SVGElement)return null;return r}function Ig(e,n){try{var r=Bt(e);return Va(r,n)}catch(s){return null}}var Zw=new Bi(function(){if(typeof trustedTypes<"u"){var e=trustedTypes.createPolicy("shaka-player#xml",{createHTML:function(n){return n}});return function(n){return e.createHTML(n)}}return function(n){return n}});function Ka(e,n){var r=this;n=n===void 0?1:n,this.G=e,this.I=new Set,this.l=this.C=null,this.$=this.X=!1,this.J=0,this.g=null,this.B=new Ve,this.i=new Map,this.F=[],this.s=new bt,this.h=null,this.m=function(s){r.s.reject(s),e.onError(s)},this.aa=new Map,this.Z=new Map,this.P=new Qe(function(){return sE(r)}),this.M=!1,this.K=[],this.O=!1,this.ra=new Qe(function(){sh(r)}).ea(n),this.s.catch(function(){}),this.j=new ns(function(){return Jw(r)}),this.V=!1,this.H=null}v=Ka.prototype,v.destroy=function(){return this.j.destroy()};function Jw(e){return j(function(n){switch(n.g){case 1:return e.B.release(),e.B=null,e.s.reject(),e.ra.stop(),e.ra=null,e.P.stop(),e.P=null,k(n,Iy(e),2);case 2:if(!e.l){n.D(3);break}return ye(n,4),k(n,e.l.setMediaKeys(null),6);case 6:_e(n,5);break;case 4:we(n);case 5:e.l=null;case 3:e.g=null,e.I.clear(),e.C=null,e.F=[],e.h=null,e.m=function(){},e.G=null,e.V=!1,e.H=null,le(n)}})}v.configure=function(e){this.h=e};function wy(e,n,r){return e.$=!0,e.F=[],e.M=r,Cg(e,n)}function Ha(e,n,r){return e.F=r,e.M=0<r.length,Cg(e,n)}function Ey(e,n,r,s,a,d){var f=new Map;return a={audioCapabilities:a,videoCapabilities:d,distinctiveIdentifier:"optional",persistentState:"required",sessionTypes:["persistent-license"],label:n},a.drmInfos=[{keySystem:n,licenseServerUri:r,distinctiveIdentifierRequired:!1,persistentStateRequired:!0,audioRobustness:"",videoRobustness:"",serverCertificate:s,serverCertificateUri:"",initData:null,keyIds:null}],f.set(n,a),Rg(e,f,[])}function Cg(e,n){var r,s,a,d,f,g,T,I,M,L,N,O,z,$;return j(function(G){if(G.g==1){if(r=rE(e))for(s=A(n),a=s.next();!a.done;a=s.next())d=a.value,d.video&&(d.video.drmInfos=[r]),d.audio&&(d.audio.drmInfos=[r]);for(f=n.some(function(W){return!!(W.video&&W.video.drmInfos.length||W.audio&&W.audio.drmInfos.length)}),f||(g=is(e.h.servers),ky(n,g)),T=A(n),a=T.next();!a.done;a=T.next())for(I=a.value,M=Cy(I),L=A(M),N=L.next();!N.done;N=L.next())O=N.value,Wa(O,is(e.h.servers),is(e.h.advanced||{}),e.h.keySystemsMapping);return k(G,Xl(n,e.M,e.V),2)}return z=f||Object.keys(e.h.servers).length,z?($=Rg(e,void 0,n),G.return(f?$:$.catch(function(){}))):(e.X=!0,G.return(Promise.resolve()))})}function kg(e){var n;return j(function(r){switch(r.g){case 1:if(e.l.mediaKeys)return r.return();if(!e.H){r.D(2);break}return k(r,e.H,3);case 3:return Gt(e.j),r.return();case 2:return ye(r,4),e.H=e.l.setMediaKeys(e.C),k(r,e.H,6);case 6:_e(r,5);break;case 4:n=we(r),e.m(new se(2,6,6003,n.message));case 5:Gt(e.j),le(r)}})}function eE(e,n){return j(function(r){if(r.g==1)return k(r,kg(e),2);oc(e,n.initDataType,Tt(n.initData)),le(r)})}v.Bc=function(e){var n=this,r;return j(function(s){if(s.g==1)return n.C?(n.l=e,n.B.Da(n.l,"play",function(){for(var a=A(n.K),d=a.next();!d.done;d=a.next())rh(n,d.value);n.O=!0,n.K=[]}),"webkitCurrentPlaybackTargetIsWireless"in n.l&&n.B.o(n.l,"webkitcurrentplaybacktargetiswirelesschanged",function(){return Iy(n)}),(r=n.g.initData.find(function(a){return 0<a.initData.length}))||n.g.keySystem!=="com.apple.fps"||n.F.length?k(s,kg(n),2):s.D(2)):(n.B.Da(e,"encrypted",function(){n.m(new se(2,6,6010))}),s.return());_g(n),r||n.F.length||n.h.parseInbandPsshEnabled||n.B.o(n.l,"encrypted",function(a){return eE(n,a)}),le(s)})};function Mg(e){var n,r,s,a,d;return j(function(f){switch(f.g){case 1:if(!e.C||!e.g)return f.return();if(!e.g.serverCertificateUri||e.g.serverCertificate&&e.g.serverCertificate.length){f.D(2);break}return n=Ct([e.g.serverCertificateUri],e.h.retryParameters),ye(f,3),r=e.G.Ob.request(5,n),k(f,r.promise,5);case 5:s=f.h,e.g.serverCertificate=Tt(s.data),_e(f,4);break;case 3:throw a=we(f),new se(2,6,6017,a);case 4:if(e.j.g)return f.return();case 2:return!e.g.serverCertificate||!e.g.serverCertificate.length?f.return():(ye(f,6),k(f,e.C.setServerCertificate(e.g.serverCertificate),8));case 8:_e(f,0);break;case 6:throw d=we(f),new se(2,6,6004,d.message)}})}function tE(e,n){var r,s,a;return j(function(d){if(d.g==1)return k(d,Lg(e,n),2);if(d.g!=3)return r=d.h,r?(s=[],(a=e.i.get(r))&&(a.cb=new bt,s.push(a.cb)),s.push(r.remove()),k(d,Promise.all(s),3)):d.return();e.i.delete(r),le(d)})}function _g(e){for(var n=(e.g?e.g.initData:[])||[],r=A(n),s=r.next();!s.done;s=r.next())s=s.value,oc(e,s.initDataType,s.initData);for(r=A(e.F),s=r.next();!s.done;s=r.next())Lg(e,s.value);return n.length||e.F.length||e.s.resolve(),e.s}function oc(e,n,r){if(r.length){var s=e.i.values();s=A(s);for(var a=s.next();!a.done;a=s.next())if(ir(r,a.value.initData)&&!zt("Tizen 2"))return;0<e.i.size&&ku(e)&&(e.s.resolve(),e.s=new bt,e.s.catch(function(){})),ih(e,n,r,e.g.sessionType)}}function nh(e){return e?!!e.match(/^com\.(microsoft|chromecast)\.playready/):!1}function Ay(e){return e=e.i.keys(),e=qp(e,function(n){return n.sessionId}),Array.from(e)}v.Gc=function(){var e=1/0,n=this.i.keys();n=A(n);for(var r=n.next();!r.done;r=n.next())r=r.value,isNaN(r.expiration)||(e=Math.min(e,r.expiration));return e},v.ud=function(){return Qd(this.Z)};function Rg(e,n,r){var s,a,d,f,g,T,I,M,L,N,O,z,$;return j(function(G){switch(G.g){case 1:if(s=new Map,r.length){a=nE(e,r,s),G.D(2);break}return k(G,iE(e,n),3);case 3:a=G.h;case 2:if(d=a,!d)throw new se(2,6,6001);for(Gt(e.j),ye(G,4),e.I.clear(),f=d.getConfiguration(),g=f.audioCapabilities||[],T=f.videoCapabilities||[],I=A(g),M=I.next();!M.done;M=I.next())L=M.value,e.I.add(L.contentType.toLowerCase());for(N=A(T),M=N.next();!M.done;M=N.next())O=M.value,e.I.add(O.contentType.toLowerCase());if(r.length){var W=d.keySystem,ae=s.get(d.keySystem),J=[],fe=[],xe=[],Se=[],Me=new Set;Ng(ae,J,xe,fe,Se,Me);var Oe=e.M?"persistent-license":"temporary";for(W={keySystem:W,licenseServerUri:J[0],distinctiveIdentifierRequired:ae[0].distinctiveIdentifierRequired,persistentStateRequired:ae[0].persistentStateRequired,sessionType:ae[0].sessionType||Oe,audioRobustness:ae[0].audioRobustness||"",videoRobustness:ae[0].videoRobustness||"",serverCertificate:xe[0],serverCertificateUri:fe[0],initData:Se,keyIds:Me},ae=A(ae),J=ae.next();!J.done;J=ae.next())J=J.value,J.distinctiveIdentifierRequired&&(W.distinctiveIdentifierRequired=J.distinctiveIdentifierRequired),J.persistentStateRequired&&(W.persistentStateRequired=J.persistentStateRequired);ae=W}else ae=d.keySystem,W=n.get(d.keySystem),J=[],fe=[],xe=[],Se=[],Me=new Set,Ng(W.drmInfos,J,xe,fe,Se,Me),ae={keySystem:ae,licenseServerUri:J[0],distinctiveIdentifierRequired:W.distinctiveIdentifier=="required",persistentStateRequired:W.persistentState=="required",sessionType:W.sessionTypes[0]||"temporary",audioRobustness:(W.audioCapabilities?W.audioCapabilities[0].robustness:"")||"",videoRobustness:(W.videoCapabilities?W.videoCapabilities[0].robustness:"")||"",serverCertificate:xe[0],serverCertificateUri:fe[0],initData:Se,keyIds:Me};if(e.g=ae,!e.g.licenseServerUri)throw new se(2,6,6012,e.g.keySystem);return k(G,d.createMediaKeys(),6);case 6:return z=G.h,Gt(e.j),e.C=z,e.X=!0,k(G,Mg(e),7);case 7:Gt(e.j),_e(G,0);break;case 4:throw $=we(G),Gt(e.j,$),e.g=null,e.I.clear(),$ instanceof se?$:new se(2,6,6002,$.message)}})}function nE(e,n,r){for(var s=A(n),a=s.next();!a.done;a=s.next()){var d=A(Cy(a.value));for(a=d.next();!a.done;a=d.next())a=a.value,r.has(a.keySystem)||r.set(a.keySystem,[]),r.get(a.keySystem).push(a)}if(r.size==1&&r.has(""))throw new se(2,6,6e3);for(s={},e=A(e.h.preferredKeySystems),a=e.next();!a.done;s={Xd:s.Xd},a=e.next())for(s.Xd=a.value,d=A(n),a=d.next();!a.done;a=d.next())if(a=a.value.decodingInfos.find(function(I){return function(M){return M.supported&&M.keySystemAccess!=null&&M.keySystemAccess.keySystem==I.Xd}}(s)))return a.keySystemAccess;for(e=A([!0,!1]),a=e.next();!a.done;a=e.next())for(s=a.value,d=A(n),a=d.next();!a.done;a=d.next()){var f=A(a.value.decodingInfos);for(a=f.next();!a.done;a=f.next()){var g=a.value;if(g.supported&&g.keySystemAccess){a=r.get(g.keySystemAccess.keySystem);var T=A(a);for(a=T.next();!a.done;a=T.next())if(!!a.value.licenseServerUri==s)return g.keySystemAccess}}}return null}function iE(e,n){var r,s,a,d,f,g,T,I,M,L,N,O,z,$,G;return j(function(W){switch(W.g){case 1:if(n.size==1&&n.has(""))throw new se(2,6,6e3);for(s=A(n.values()),a=s.next();!a.done;a=s.next())d=a.value,d.audioCapabilities.length==0&&delete d.audioCapabilities,d.videoCapabilities.length==0&&delete d.videoCapabilities;f=A(e.h.preferredKeySystems),g=f.next();case 2:if(g.done){W.D(4);break}if(T=g.value,!n.has(T)){W.D(3);break}return I=n.get(T),ye(W,6),k(W,navigator.requestMediaKeySystemAccess(T,[I]),8);case 8:return r=W.h,W.return(r);case 6:we(W);case 7:Gt(e.j);case 3:g=f.next(),W.D(2);break;case 4:M=A([!0,!1]),L=M.next();case 9:if(L.done){W.D(11);break}N=L.value,O=A(n.keys()),g=O.next();case 12:if(g.done){L=M.next(),W.D(9);break}if(z=g.value,$=n.get(z),G=$.drmInfos.some(function(ae){return!!ae.licenseServerUri}),G!=N){W.D(13);break}return ye(W,15),k(W,navigator.requestMediaKeySystemAccess(z,[$]),17);case 17:return r=W.h,W.return(r);case 15:we(W);case 16:Gt(e.j);case 13:g=O.next(),W.D(12);break;case 11:return W.return(r)}})}function rE(e){if(e=is(e.h.clearKeys),e.size==0)return null;var n=[],r=[];e.forEach(function(a,d){var f=d;f.length!=22&&(f=gu(Ra(d),!1)),d=a,d.length!=22&&(d=gu(Ra(a),!1)),a={kty:"oct",kid:f,k:d},n.push(a),r.push(a.kid)}),e=JSON.stringify({keys:n});var s=JSON.stringify({kids:r});return s=[{initData:Tt(fi(s)),initDataType:"keyids"}],{keySystem:"org.w3.clearkey",licenseServerUri:"data:application/json;base64,"+S.btoa(e),distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,serverCertificateUri:"",sessionType:"",initData:s,keyIds:new Set(r)}}function Lg(e,n){var r,s,a,d,f;return j(function(g){switch(g.g){case 1:try{r=e.C.createSession("persistent-license")}catch(T){return s=new se(2,6,6005,T.message),e.m(s),g.return(Promise.reject(s))}return e.B.o(r,"message",function(T){e.l&&e.h.delayLicenseRequestUntilPlayed&&e.l.paused&&!e.O?e.K.push(T):rh(e,T)}),e.B.o(r,"keystatuseschange",function(T){return sc(e,T)}),a={initData:null,initDataType:null,loaded:!1,Be:1/0,cb:null,type:"persistent-license"},e.i.set(r,a),ye(g,2),k(g,r.load(n),4);case 4:return d=g.h,Gt(e.j),d?(a.loaded=!0,ku(e)&&e.s.resolve(),g.return(r)):(e.i.delete(r),e.m(new se(2,6,6013)),g.return(Promise.resolve()));case 2:f=we(g),Gt(e.j,f),e.i.delete(r),e.m(new se(2,6,6005,f.message));case 3:return g.return(Promise.resolve())}})}function ih(e,n,r,s){try{var a=e.C.createSession(s)}catch(d){e.m(new se(2,6,6005,d.message));return}e.B.o(a,"message",function(d){e.l&&e.h.delayLicenseRequestUntilPlayed&&e.l.paused&&!e.O?e.K.push(d):rh(e,d)}),e.B.o(a,"keystatuseschange",function(d){return sc(e,d)}),e.i.set(a,{initData:r,initDataType:n,loaded:!1,Be:1/0,cb:null,type:s});try{r=e.h.initDataTransform(r,n,e.g)}catch(d){n=d,d instanceof se||(n=new se(2,6,6016,d)),e.m(n);return}e.h.logLicenseExchange&&gu(r),a.generateRequest(n,r).catch(function(d){if(!e.j.g){e.i.delete(a);var f=d.errorCode;if(f&&f.systemCode){var g=f.systemCode;0>g&&(g+=Math.pow(2,32)),g="0x"+g.toString(16)}e.m(new se(2,6,6006,d.message,d,g))}})}function rh(e,n){var r,s,a,d,f,g,T,I,M,L,N,O,z,$;j(function(G){switch(G.g){case 1:return r=n.target,e.h.logLicenseExchange&&gu(n.message),s=e.i.get(r),a=e.g.licenseServerUri,d=e.h.advanced[e.g.keySystem],n.messageType=="individualization-request"&&d&&d.individualizationServer&&(a=d.individualizationServer),f=Ct([a],e.h.retryParameters),f.body=n.message,f.method="POST",f.licenseRequestType=n.messageType,f.sessionId=r.sessionId,f.drmInfo=e.g,s&&(f.initData=s.initData,f.initDataType=s.initDataType),nh(e.g.keySystem)&&oE(f),g=Date.now(),ye(G,2),I=e.G.Ob.request(2,f),k(G,I.promise,4);case 4:T=G.h,_e(G,3);break;case 2:return M=we(G),L=new se(2,6,6007,M),e.m(L),s&&s.cb&&s.cb.reject(L),G.return();case 3:return e.j.g?G.return():(e.J+=(Date.now()-g)/1e3,e.h.logLicenseExchange&&gu(T.data),ye(G,5),k(G,r.update(T.data),7));case 7:_e(G,6);break;case 5:return N=we(G),O=new se(2,6,6008,N.message),e.m(O),s&&s.cb&&s.cb.reject(O),G.return();case 6:if(e.j.g)return G.return();z=new Fe("drmsessionupdate"),e.G.onEvent(z),s&&(s.cb&&s.cb.resolve(),$=new Qe(function(){s.loaded=!0,ku(e)&&e.s.resolve()}),$.R(Mu)),le(G)}})}function oE(e){var n=$o(e.body,!0,!0);if(n.includes("PlayReadyKeyMessage")){n=Va(n,"PlayReadyKeyMessage");for(var r=A(n.getElementsByTagName("HttpHeader")),s=r.next();!s.done;s=r.next())s=s.value,e.headers[s.getElementsByTagName("name")[0].textContent]=s.getElementsByTagName("value")[0].textContent;e.body=wo(n.getElementsByTagName("Challenge")[0].textContent)}else e.headers["Content-Type"]="text/xml; charset=utf-8"}function sc(e,n){n=n.target;var r=e.i.get(n),s=!1;n.keyStatuses.forEach(function(d,f){if(typeof f=="string"){var g=f;f=d,d=g}if(nh(e.g.keySystem)&&f.byteLength==16&&(navigator.userAgent.match(/Edge?\//)||Ma())){g=Ln(f);var T=g.getUint32(0,!0),I=g.getUint16(4,!0),M=g.getUint16(6,!0);g.setUint32(0,T,!1),g.setUint16(4,I,!1),g.setUint16(6,M,!1)}d!="status-pending"&&(r.loaded=!0),d=="expired"&&(s=!0),f=vn(f).slice(0,32),e.aa.set(f,d)});var a=n.expiration-Date.now();(0>a||s&&1e3>a)&&r&&!r.cb&&(e.i.delete(n),n.close().catch(function(){})),ku(e)&&(e.s.resolve(),e.P.R(aE))}function sE(e){var n=e.aa,r=e.Z;r.clear(),n.forEach(function(s,a){return r.set(a,s)}),n=Array.from(r.values()),n.length&&n.every(function(s){return s=="expired"})&&e.m(new se(2,6,6014)),e.G.Fd(Qd(r))}function Sy(){var e,n,r,s,a,d,f,g;return j(function(T){return T.g==1?(e="org.w3.clearkey com.widevine.alpha com.microsoft.playready com.microsoft.playready.recommendation com.apple.fps.1_0 com.apple.fps com.adobe.primetime".split(" "),n=[{contentType:'video/mp4; codecs="avc1.42E01E"'},{contentType:'video/webm; codecs="vp8"'}],r={initDataTypes:["cenc"],videoCapabilities:n},s={videoCapabilities:n,persistentState:"required",sessionTypes:["persistent-license"]},a=[s,r],d=new Map,f=function(I){var M,L,N;return j(function(O){switch(O.g){case 1:if(ye(O,2),I==="org.w3.clearkey"&&jd())throw Error("Unsupported keySystem");return k(O,navigator.requestMediaKeySystemAccess(I,a),4);case 4:return M=O.h,N=(L=M.getConfiguration().sessionTypes)?L.includes("persistent-license"):!1,zt("Tizen 3")&&(N=!1),d.set(I,{persistentState:N}),k(O,M.createMediaKeys(),5);case 5:_e(O,0);break;case 2:we(O),d.set(I,null),le(O)}})},g=e.map(function(I){return f(I)}),k(T,Promise.all(g),2)):T.return(Qd(d))})}function uE(e){var n;return j(function(r){if(r.g==1)return n=new Promise(function(s,a){new Qe(a).R(Ir)}),ye(r,2),k(r,Promise.race([Promise.all([e.close(),e.closed]),n]),4);if(r.g!=2)return _e(r,0);we(r),le(r)})}function Iy(e){var n;return j(function(r){return n=Array.from(e.i.entries()),e.i.clear(),k(r,Promise.all(n.map(function(s){s=A(s);var a=s.next().value,d=s.next().value;return j(function(f){if(f.g==1)return ye(f,2),e.$||e.F.includes(a.sessionId)||d.type!=="persistent-license"?k(f,uE(a),5):k(f,a.remove(),5);if(f.g!=2)return _e(f,0);we(f),le(f)})})),0)})}function oh(e,n){if(!e.length)return n;if(!n.length)return e;var r=[];e=A(e);for(var s=e.next();!s.done;s=e.next()){s=s.value;for(var a={},d=A(n),f=d.next();!f.done;a={Ua:a.Ua},f=d.next())if(f=f.value,s.keySystem==f.keySystem){a.Ua=[],a.Ua=a.Ua.concat(s.initData||[]),a.Ua=a.Ua.concat(f.initData||[]),a.Ua=a.Ua.filter(function(g){return function(T,I){return T.keyId===void 0||I===g.Ua.findIndex(function(M){return M.keyId===T.keyId})}}(a)),d=s.keyIds&&f.keyIds?new Set([].concat(q(s.keyIds),q(f.keyIds))):s.keyIds||f.keyIds,r.push({keySystem:s.keySystem,licenseServerUri:s.licenseServerUri||f.licenseServerUri,distinctiveIdentifierRequired:s.distinctiveIdentifierRequired||f.distinctiveIdentifierRequired,persistentStateRequired:s.persistentStateRequired||f.persistentStateRequired,videoRobustness:s.videoRobustness||f.videoRobustness,audioRobustness:s.audioRobustness||f.audioRobustness,serverCertificate:s.serverCertificate||f.serverCertificate,serverCertificateUri:s.serverCertificateUri||f.serverCertificateUri,initData:a.Ua,keyIds:d});break}}return r}function Cy(e){return(e.video?e.video.drmInfos:[]).concat(e.audio?e.audio.drmInfos:[])}function sh(e){e.i.forEach(function(n,r){var s=n.Be,a=r.expiration;isNaN(a)&&(a=1/0),a!=s&&(e.G.onExpirationUpdated(r.sessionId,a),n.Be=a)})}function ku(e){return e=e.i.values(),Hr(e,function(n){return n.loaded})}function ky(e,n){var r=[];for(n.forEach(function(s,a){r.push({keySystem:a,licenseServerUri:s,distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,serverCertificateUri:"",initData:[],keyIds:new Set})}),e=A(e),n=e.next();!n.done;n=e.next())n=n.value,n.video&&(n.video.drmInfos=r),n.audio&&(n.audio.drmInfos=r)}function Ng(e,n,r,s,a,d){var f={};e=A(e);for(var g=e.next();!g.done;f={Fa:f.Fa},g=e.next()){if(f.Fa=g.value,n.includes(f.Fa.licenseServerUri)||n.push(f.Fa.licenseServerUri),s.includes(f.Fa.serverCertificateUri)||s.push(f.Fa.serverCertificateUri),f.Fa.serverCertificate&&(r.some(function(M){return function(L){return ir(L,M.Fa.serverCertificate)}}(f))||r.push(f.Fa.serverCertificate)),f.Fa.initData){g={};for(var T=A(f.Fa.initData),I=T.next();!I.done;g={ed:g.ed},I=T.next())g.ed=I.value,a.some(function(M){return function(L){var N=M.ed;return L.keyId&&L.keyId==N.keyId?!0:L.initDataType==N.initDataType&&ir(L.initData,N.initData)}}(g))||a.push(g.ed)}if(f.Fa.keyIds)for(g=A(f.Fa.keyIds),T=g.next();!T.done;T=g.next())d.add(T.value)}}function Wa(e,n,r,s){var a=e.keySystem;a&&(a!="org.w3.clearkey"||!e.licenseServerUri)&&(n.size&&(n=n.get(a)||"",e.licenseServerUri=n),e.keyIds||(e.keyIds=new Set),(r=r.get(a))&&(e.distinctiveIdentifierRequired||(e.distinctiveIdentifierRequired=r.distinctiveIdentifierRequired),e.persistentStateRequired||(e.persistentStateRequired=r.persistentStateRequired),e.videoRobustness||(e.videoRobustness=r.videoRobustness),e.audioRobustness||(e.audioRobustness=r.audioRobustness),e.serverCertificate||(e.serverCertificate=r.serverCertificate),r.sessionType&&(e.sessionType=r.sessionType),e.serverCertificateUri||(e.serverCertificateUri=r.serverCertificateUri)),s[a]&&(e.keySystem=s[a]),S.cast&&S.cast.__platform__&&a=="com.microsoft.playready"&&(e.keySystem="com.chromecast.playready"))}var Ir=1,Mu=5,aE=.5,uh=new Bi(function(){return ji(new Uint8Array([0]))});function uc(){}function My(e,n,r,s){var a,d,f,g;return j(function(T){if(T.g==1)return s&&(a=or[s.toLowerCase()])?T.return(a):(d=bs(e))&&(f=Ps[d])?T.return(f):s?T.D(2):k(T,Dg(e,n,r),3);if(T.g!=2&&(s=T.h)&&(g=or[s]))return T.return(g);throw new se(2,4,4e3,e)})}function Dg(e,n,r){var s,a,d;return j(function(f){return f.g==1?(s=Ct([e],r),s.method="HEAD",k(f,n.request(0,s).promise,2)):(a=f.h,d=a.headers["content-type"],f.return(d?d.toLowerCase().split(";").shift():""))})}function bs(e){return e=new Pi(e).Ha.split("/").pop().split("."),e.length==1?"":e.pop().toLowerCase()}pe("shaka.media.ManifestParser",uc),uc.unregisterParserByMime=function(e){delete or[e]},uc.registerParserByMime=function(e,n){or[e]=n},uc.registerParserByExtension=function(e,n){Ps[e]=n};var or={},Ps={};function bg(e){function n(){s=!0}function r(I){d.push(I),en(I)}e=Tt(e);var s=!1,a,d=[],f=[];if(new Kt().box("moov",r).box("trak",r).box("mdia",r).box("minf",r).box("stbl",r).S("stsd",function(I){a=I,d.push(I),ja(I)}).S("encv",n).S("enca",n).S("hev1",function(I){f.push({box:I,Pb:1701733238})}).S("hvc1",function(I){f.push({box:I,Pb:1701733238})}).S("avc1",function(I){f.push({box:I,Pb:1701733238})}).S("avc3",function(I){f.push({box:I,Pb:1701733238})}).S("ac-3",function(I){f.push({box:I,Pb:1701733217})}).S("ec-3",function(I){f.push({box:I,Pb:1701733217})}).S("mp4a",function(I){f.push({box:I,Pb:1701733217})}).parse(e),s)return e;if(f.length==0||!a)throw vn(e),new se(2,3,3019);f.reverse();for(var g=A(f),T=g.next();!T.done;T=g.next())T=T.value,e=ah(e,a,T.box,d,T.Pb);return e}function ah(e,n,r,s,a){var d=Xa.value(),f=e.subarray(r.start,r.start+r.size),g=Ln(f),T=new Uint8Array(r.size+d.byteLength);for(T.set(f,0),f=Ln(T),f.setUint32(4,a),T.set(d,r.size),a=g.getUint32(4),f.setUint32(r.size+16,a),qa(T,0,T.byteLength),a=new Uint8Array(e.byteLength+T.byteLength),r=ka()?r.start:r.start+r.size,d=e.subarray(r),a.set(e.subarray(0,r)),a.set(T,r),a.set(d,r+T.byteLength),e=A(s),s=e.next();!s.done;s=e.next())s=s.value,qa(a,s.start,s.size+T.byteLength);return T=Ln(a,n.start),n=nc(n),e=T.getUint32(n),T.setUint32(n,e+1),a}function qa(e,n,r){e=Ln(e,n),n=e.getUint32(0),n!=0&&(n==1?(e.setUint32(8,r>>32),e.setUint32(12,r&4294967295)):e.setUint32(0,r))}var Xa=new Bi(function(){return new Uint8Array([0,0,0,80,115,105,110,102,0,0,0,12,102,114,109,97,0,0,0,0,0,0,0,20,115,99,104,109,0,0,0,0,99,101,110,99,0,1,0,0,0,0,0,40,115,99,104,105,0,0,0,32,116,101,110,99,0,0,0,0,0,0,1,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0])});function Pg(e,n,r,s,a){if(s>=a)return null;for(var d=-1,f=-1,g=0;g<r.length;g++)if(r[g].some(function(fe){return fe!=null&&fe.g.trim()!=""})){d=g;break}for(g=r.length-1;0<=g;g--)if(r[g].some(function(fe){return fe!=null&&fe.g.trim()!=""})){f=g;break}if(d===-1||f===-1)return null;for(var T=g=!1,I="white",M="black",L=to(s,a,g,T,I,M);d<=f;d++){for(var N=r[d],O=-1,z=-1,$=0;$<N.length;$++)if(N[$]!=null&&N[$].g.trim()!==""){O=$;break}for($=N.length-1;0<=$;$--)if(N[$]!=null&&N[$].g.trim()!==""){z=$;break}if(O===-1||z===-1)N=Ya(s,a),e.nestedCues.push(N);else{for(;O<=z;O++)if($=N[O]){var G=$.l,W=$.i,ae=$.j,J=$.h;(G!=g||W!=T||ae!=I||J!=M)&&(L.payload&&e.nestedCues.push(L),L=to(s,a,G,W,ae,J),g=G,T=W,I=ae,M=J),L.payload+=$.g}else L.payload+=" ";L.payload&&e.nestedCues.push(L),d!==f&&(L=Ya(s,a),e.nestedCues.push(L)),L=to(s,a,g,T,I,M)}}return e.nestedCues.length?{cue:e,stream:n}:null}function to(e,n,r,s,a,d){return e=new xt(e,n,""),r&&e.textDecoration.push("underline"),s&&(e.fontStyle="italic"),e.color=a,e.backgroundColor=d,e}function Ya(e,n){return e=new xt(e,n,""),e.lineBreak=!0,e}function Og(e,n,r,s,a){this.g=e,this.l=n,this.i=r,this.h=s,this.j=a}function lh(e,n){this.i=[],this.g=1,this.h=0,this.C=e,this.B=n,this.j=this.m=!1,this.l="white",this.s="black",$a(this)}function ac(e,n,r){return Pg(new xt(n,r,""),"CC"+(e.C<<1|e.B+1),e.i,n,r)}function $a(e){ss(e,0,15),e.g=1}function Qa(e,n,r){if(!(32>r||127<r)){var s="";switch(n){case Os:s=Ry.has(r)?Ry.get(r):String.fromCharCode(r);break;case ch:s=lE.get(r);break;case Ug:e.i[e.g].pop(),s=dh.get(r);break;case jg:e.i[e.g].pop(),s=lc.get(r)}s&&e.i[e.g].push(new Og(s,e.m,e.j,e.s,e.l))}}function _y(e,n,r,s){if(!(0>r||0>n))if(n>=r)for(--s;0<=s;s--)e.i[n+s]=e.i[r+s].map(function(d){return d});else for(var a=0;a<s;a++)e.i[n+a]=e.i[r+a].map(function(d){return d})}function ss(e,n,r){for(var s=0;s<=r;s++)e.i[n+s]=[]}var Os=0,ch=1,Ug=2,jg=3,Ry=new Map([[39,"’"],[42,"á"],[92,"é"],[92,"é"],[94,"í"],[95,"ó"],[96,"ú"],[123,"ç"],[124,"÷"],[125,"Ñ"],[126,"ñ"],[127,"█"]]),lE=new Map([[48,"®"],[49,"°"],[50,"½"],[51,"¿"],[52,"™"],[53,"¢"],[54,"£"],[55,"♪"],[56,"à"],[57,"⠀"],[58,"è"],[59,"â"],[60,"ê"],[61,"î"],[62,"ô"],[63,"û"]]),dh=new Map([[32,"Á"],[33,"É"],[34,"Ó"],[35,"Ú"],[36,"Ü"],[37,"ü"],[38,"‘"],[39,"¡"],[40,"*"],[41,"'"],[42,"─"],[43,"©"],[44,"℠"],[45,"·"],[46,"“"],[47,"”"],[48,"À"],[49,"Â"],[50,"Ç"],[51,"È"],[52,"Ê"],[53,"Ë"],[54,"ë"],[55,"Î"],[56,"Ï"],[57,"ï"],[58,"Ô"],[59,"Ù"],[60,"ù"],[61,"Û"],[62,"«"],[63,"»"]]),lc=new Map([[32,"Ã"],[33,"ã"],[34,"Í"],[35,"Ì"],[36,"ì"],[37,"Ò"],[38,"ò"],[39,"Õ"],[40,"õ"],[41,"{"],[42,"}"],[43,"\\"],[44,"^"],[45,"_"],[46,"|"],[47,"~"],[48,"Ä"],[49,"ä"],[50,"Ö"],[51,"ö"],[52,"ß"],[53,"¥"],[54,"¤"],[55,"│"],[56,"Å"],[57,"å"],[58,"Ø"],[59,"ø"],[60,"┌"],[61,"┐"],[62,"└"],[63,"┘"]]);function hh(e,n){this.h=Fg,this.s=new lh(e,n),this.i=new lh(e,n),this.l=new lh(e,n),this.g=this.i,this.j=0,this.m=null}function fh(e,n,r){e.g=e.i;var s=e.g,a=null;return e.h!==cc&&e.h!==no&&(a=ac(s,e.j,r),r=e.i,r.g=0<r.h?r.h:0,ss(r,0,15),r=e.l,r.g=0<r.h?r.h:0,ss(r,0,15),s.g=15),e.h=cc,s.h=n,a}function Bg(e){e.h=_u,e.g=e.l,e.g.h=0}function ph(e){Kn("Cea608DataChannel","CEA-608 text mode entered, but is unsupported"),e.g=e.s,e.h=no}var Fg=0,_u=1,cc=3,no=4,cE="black green blue cyan red yellow magenta black".split(" "),Ly="white green blue cyan red yellow magenta white_italics".split(" ");function Ny(){this.l=!1,this.F=this.H=0,this.G=Dy,this.i=[],this.g=this.h=this.j=0,this.C=this.s=!1,this.B="white",this.m="black",zg(this)}function zg(e){e.i=[];for(var n=0;16>n;n++)e.i.push(Gg())}function Gg(){for(var e=[],n=0;42>n;n++)e.push(null);return e}function Mo(e,n){En(e)&&(e.i[e.h][e.g]=new Og(n,e.C,e.s,e.m,e.B),e.g++)}function En(e){var n=e.g<e.F&&0<=e.g;return e.h<e.H&&0<=e.h&&n}Ny.prototype.isVisible=function(){return this.l};function Ru(e,n,r){var s=new xt(e.j,n,"");return s.textAlign=e.G===dE?"left":e.G===dc?"right":Ui,(r=Pg(s,"svc"+r,e.i,e.j,n))&&(e.j=n),r}var dE=0,dc=1,Dy=2;function by(){this.i=[],this.h=null,this.g=0}function Py(e,n){n.type===3?(e.g=2*(n.value&63)-1,e.h=[]):e.h&&(0<e.g&&(e.h.push(n),e.g--),e.g===0&&(e.i.push(new hc(e.h)),e.h=null,e.g=0))}function hc(e){this.g=0,this.h=e}hc.prototype.xa=function(){return this.g<this.h.length},hc.prototype.ma=function(){return this.g};function Dn(e){if(!e.xa())throw new se(2,2,3e3);return e.h[e.g++]}hc.prototype.skip=function(e){if(this.g+e>this.h.length)throw new se(2,2,3e3);this.g+=e};function hE(e){this.i=e,this.h=[null,null,null,null,null,null,null,null],this.g=null}function Vg(e,n,r,s){if(128<=r&&135>=r)s=r&7,e.h[s]&&(e.g=e.h[s]);else{if(r===136){r=Dn(n).value,n=null,r=A(fc(e,r));for(var a=r.next();!a.done;a=r.next())a=e.h[a.value],a.isVisible()&&(n=Ru(a,s,e.i)),zg(a);return n}if(r===137)for(n=Dn(n).value,n=A(fc(e,n)),r=n.next();!r.done;r=n.next())r=e.h[r.value],r.isVisible()||(r.j=s),r.l=!0;else{if(r===138){for(r=Dn(n).value,n=null,r=A(fc(e,r)),a=r.next();!a.done;a=r.next())a=e.h[a.value],a.isVisible()&&(n=Ru(a,s,e.i)),a.l=!1;return n}if(r===139){for(r=Dn(n).value,n=null,r=A(fc(e,r)),a=r.next();!a.done;a=r.next())a=e.h[a.value],a.isVisible()?n=Ru(a,s,e.i):a.j=s,a.l=!a.l;return n}if(r===140)return n=Dn(n).value,Oy(e,n,s);if(r===143)return s=Oy(e,255,s),Uy(e),s;if(r===144)n.skip(1),s=Dn(n).value,e.g&&(e.g.s=0<(s&128),e.g.C=0<(s&64));else if(r===145)s=Dn(n).value,r=Dn(n).value,n.skip(1),e.g&&(n=Kg((r&48)>>4,(r&12)>>2,r&3),e.g.B=Kg((s&48)>>4,(s&12)>>2,s&3),e.g.m=n);else if(r===146)s=Dn(n).value,n=Dn(n).value,e.g&&(e=e.g,e.h=s&15,e.g=n&63);else if(r===151)n.skip(1),n.skip(1),s=Dn(n).value,n.skip(1),e.g&&(e.g.G=s&3);else if(152<=r&&159>=r){if(r=(r&15)-8,a=e.h[r]!==null,!a){var d=new Ny;d.j=s,e.h[r]=d}s=Dn(n).value,Dn(n),Dn(n),d=Dn(n).value;var f=Dn(n).value;n=Dn(n).value,a&&!(n&7)||(n=e.h[r],n.h=0,n.g=0,n.C=!1,n.s=!1,n.B="white",n.m="black"),n=e.h[r],n.l=0<(s&32),n.H=(d&15)+1,n.F=(f&63)+1,e.g=e.h[r]}}}return null}function fc(e,n){for(var r=[],s=0;8>s;s++)(n&1)===1&&e.h[s]&&r.push(s),n>>=1;return r}function Oy(e,n,r){var s=null;n=A(fc(e,n));for(var a=n.next();!a.done;a=n.next()){a=a.value;var d=e.h[a];d.isVisible()&&(s=Ru(d,r,e.i)),e.h[a]=null}return s}function Uy(e){e.g=null,e.h=[null,null,null,null,null,null,null,null]}function Kg(e,n,r){var s={0:0,1:0,2:1,3:1};return e=s[e],n=s[n],r=s[r],jy[e<<2|n<<1|r]}var gh=new Map([[32," "],[33," "],[37,"…"],[42,"Š"],[44,"Œ"],[48,"█"],[49,"‘"],[50,"’"],[51,"“"],[52,"”"],[53,"•"],[57,"™"],[58,"š"],[60,"œ"],[61,"℠"],[63,"Ÿ"],[118,"⅛"],[119,"⅜"],[120,"⅝"],[121,"⅞"],[122,"│"],[123,"┐"],[124,"└"],[125,"─"],[126,"┘"],[127,"┌"]]),jy="black blue green cyan red magenta yellow white".split(" ");function By(){this.h=[],this.g=[],this.i=new by,this.l=0,this.B=new Map([["CC1",new hh(0,0)],["CC2",new hh(0,1)],["CC3",new hh(1,0)],["CC4",new hh(1,1)]]),this.s=this.m=0,this.j=new Map,pc(this)}function pc(e){e.m=0,e.s=0,e=A(e.B.values());for(var n=e.next();!n.done;n=e.next())n=n.value,n.h=2,n.g=n.i,n.m=null,$a(n.i),$a(n.l),$a(n.s)}function Fy(e){function n(d,f){return d.pts-f.pts||d.order-f.order}var r=[];e.h.sort(n),e.g.sort(n);for(var s=A(e.h),a=s.next();!a.done;a=s.next())(a=Hg(e,a.value))&&r.push(a);for(s=A(e.g),a=s.next();!a.done;a=s.next())Py(e.i,a.value);for(s=A(e.i.i),a=s.next();!a.done;a=s.next())a=Wg(e,a.value),r.push.apply(r,q(a));return e.i.i=[],e.h=[],e.g=[],r}function Hg(e,n){var r=n.type;if((n.Oa&112)===16){var s=n.Oa>>3&1;r===0?e.m=s:e.s=s}if(r=e.B.get("CC"+(r<<1|(r?e.s:e.m)+1)),n.Oa===255&&n.hb===255||!n.Oa&&!n.hb||!mh(n.Oa)||!mh(n.hb))return 45<=++e.l&&pc(e),null;if(e.l=0,n.Oa&=127,n.hb&=127,!n.Oa&&!n.hb)return null;if(e=null,(n.Oa&112)===16)e:{if(s=n.Oa,e=n.hb,r.m===(s<<8|e))r.m=null;else if(r.m=s<<8|e,(s&240)===16&&(e&192)===64){n=[11,11,1,2,3,4,12,13,14,15,5,6,7,8,9,10][(s&7)<<1|e>>5&1];var a=(e&30)>>1;s="white";var d=!1;if(7>a?s=Ly[a]:a===7&&(d=!0),e=(e&1)===1,r.h!==no){if(a=r.g,r.h===cc&&n!==a.g){var f=1+n-a.h;_y(a,f,1+a.g-a.h,a.h),ss(a,0,f-1),ss(a,n+1,15-n)}a.g=n,r.g.m=e,r.g.j=d,r.g.l=s,r.g.s="black"}}else if((s&247)===17&&(e&240)===32)r.g.m=!1,r.g.j=!1,r.g.l="white",Qa(r.g,Os,32),s=!1,n=Ly[(e&14)>>1],n==="white_italics"&&(n="white",s=!0),r.g.m=(e&1)===1,r.g.j=s,r.g.l=n;else if((s&247)===16&&(e&240)===32||(s&247)===23&&(e&255)===45)n="black",!(s&7)&&(n=cE[(e&14)>>1]),r.g.s=n;else if((s&247)===17&&(e&240)===48)Qa(r.g,ch,e);else if((s&246)===18&&(e&224)===32)Qa(r.g,s&1?jg:Ug,e);else if((s&246)===20&&(e&240)===32){switch(e=n.pts,s=null,n.hb){case 32:Bg(r);break;case 33:r=r.g,r.i[r.g].pop();break;case 37:s=fh(r,2,e);break;case 38:s=fh(r,3,e);break;case 39:s=fh(r,4,e);break;case 40:Qa(r.g,Os,32);break;case 41:r.h=2,r.g=r.i,r.g.h=0,r.j=e;break;case 42:$a(r.s),ph(r);break;case 43:ph(r);break;case 44:n=r.i,s=null,r.h!==no&&(s=ac(n,r.j,e)),ss(n,0,15);break;case 45:n=r.g,r.h!==cc?s=null:(s=ac(n,r.j,e),d=n.g-n.h+1,_y(n,d-1,d,n.h),ss(n,0,d-1),ss(n,n.g,15-n.g),r.j=e);break;case 46:ss(r.l,0,15);break;case 47:n=null,r.h!==no&&(n=ac(r.i,r.j,e)),s=r.l,r.l=r.i,r.i=s,Bg(r),r.j=e,s=n}e=s;break e}e=null}else s=n.hb,Qa(r.g,Os,n.Oa),Qa(r.g,Os,s);return e}function Wg(e,n){var r=[];try{for(;n.xa();){var s=Dn(n).value,a=(s&224)>>5,d=s&31;if(a===7&&d!=0&&(a=Dn(n).value&63),a!=0){e.j.has(a)||e.j.set(a,new hE(a));for(var f=e.j.get(a),g=n.ma();n.ma()-g<d;){a=n;var T=Dn(a),I=T.value,M=T.pts;if(I===16){var L=Dn(a);I=I<<16|L.value}if(0<=I&&31>=I){var N=M;if(f.g){var O=f.g;switch(a=null,I){case 8:!En(O)||0>=O.g&&0>=O.h||(0>=O.g?(O.g=O.F-1,O.h--):O.g--,O.i[O.h][O.g]=null);break;case 13:if(O.isVisible()&&(a=Ru(O,N,f.i)),O.h+1>=O.H){N=O;for(var z=0,$=1;16>$;$++,z++)N.i[z]=N.i[$];for($=0;1>$;$++,z++)N.i[z]=Gg()}else O.h++;O.g=0;break;case 14:O.isVisible()&&(a=Ru(O,N,f.i)),O.i[O.h]=Gg(),O.g=0;break;case 12:O.isVisible()&&(a=Ru(O,N,f.i)),zg(O),N=O,N.h=0,N.g=0}var G=a}else G=null}else if(128<=I&&159>=I)G=Vg(f,a,I,M);else{if(4096<=I&&4127>=I)N=I&255,8<=N&&15>=N?a.skip(1):16<=N&&23>=N?a.skip(2):24<=N&&31>=N&&a.skip(3);else if(4224<=I&&4255>=I)N=I&255,128<=N&&135>=N?a.skip(4):136<=N&&143>=N&&a.skip(5);else if(32<=I&&127>=I)a=I,f.g&&(a===127?Mo(f.g,"♪"):Mo(f.g,String.fromCharCode(a)));else if(160<=I&&255>=I)f.g&&Mo(f.g,String.fromCharCode(I));else if(4128<=I&&4223>=I){if(a=I&255,f.g)if(gh.has(a)){var W=gh.get(a);Mo(f.g,W)}else Mo(f.g,"_")}else 4256<=I&&4351>=I&&f.g&&((I&255)!=160?Mo(f.g,"_"):Mo(f.g,"[CC]"));G=null}(a=G)&&r.push(a)}}}}catch(ae){if(ae instanceof se&&ae.code===3e3)Kn("CEA708_INVALID_DATA","Buffer read out of bounds / invalid CEA-708 Data.");else throw ae}return r}function mh(e){for(var n=0;e;)n^=e&1,e>>=1;return n===1}function Lu(){}Lu.prototype.init=function(){},Lu.prototype.parse=function(){return[]};function gc(e,n){var r=null,s=null,a=null,d=e.N();return n&1&&(a=e.Cb()),n&2&&e.skip(4),n&8&&(r=e.N()),n&16&&(s=e.N()),{trackId:d,Cf:r,wg:s,rj:a}}function qg(e,n){return{rf:n==1?e.Cb():e.N()}}function Xg(e,n){return n==1?(e.skip(8),e.skip(8)):(e.skip(4),e.skip(4)),{timescale:e.N()}}function sr(e,n,r){var s=e.N(),a=[],d=null;r&1&&(d=e.N()),r&4&&e.skip(4);for(var f=0;f<s;f++){var g={Ge:null,sampleSize:null,Ld:null};r&256&&(g.Ge=e.N()),r&512&&(g.sampleSize=e.N()),r&1024&&e.skip(4),r&2048&&(g.Ld=n==0?e.N():e.Rf()),a.push(g)}return{wj:s,Tf:a,vg:d}}function Yg(){this.j=new Map,this.i=this.h=0,this.g=St}Yg.prototype.init=function(e){function n(d){d=d.name,d in mc&&(r.g=mc[d])}var r=this,s=[],a=[];if(new Kt().box("moov",en).box("mvex",en).S("trex",function(d){var f=d.reader;f.skip(4),f.skip(4),d=f.N(),f=f.N(),r.h=d,r.i=f}).box("trak",en).S("tkhd",function(d){var f=d.reader;d.version==1?(f.skip(8),f.skip(8)):(f.skip(4),f.skip(4)),d=f.N(),s.push(d)}).box("mdia",en).S("mdhd",function(d){d=Xg(d.reader,d.version),a.push(d.timescale)}).box("minf",en).box("stbl",en).S("stsd",ja).box("avc1",n).box("avc3",n).box("hev1",n).box("hvc1",n).box("dvh1",n).box("dvhe",n).box("encv",Zd).box("sinf",en).box("frma",function(d){d=d.reader.N(),d=tn(d),d in mc&&(r.g=mc[d])}).parse(e,!0),!s.length||!a.length||s.length!=a.length)throw new se(2,2,2010);this.g==St&&ze("Unable to determine bitstream format for CEA parsing!"),s.forEach(function(d,f){r.j.set(d,a[f])})},Yg.prototype.parse=function(e){var n=this;if(this.g==St)return[];var r=[],s=this.h,a=this.i,d=[],f=null,g=null,T=null,I=9e4;return new Kt().box("moof",function(M){f=M.start,en(M)}).box("traf",en).S("trun",function(M){M=sr(M.reader,M.version,M.flags),d=M.Tf,g=M.vg}).S("tfhd",function(M){M=gc(M.reader,M.flags),s=M.Cf||n.h,a=M.wg||n.i,M=M.trackId,n.j.has(M)&&(I=n.j.get(M))}).S("tfdt",function(M){T=qg(M.reader,M.version).rf}).box("mdat",function(M){if(T===null)throw new se(2,2,2010);e:{var L=M.reader,N=T,O=I,z=s,$=a,G=d,W=0,ae=$;for(G.length&&(ae=G[0].sampleSize||$),L.skip((f||0)+(g||0)-M.start-8);L.xa();){M=L.N();var J=L.pb();switch(n.g){case Za:J&=31,J=J==6;break;case Ja:J=J>>1&63,J=J==39||J==40;break;default:break e}if(J){J=0,G.length>W&&(J=G[W].Ld||0),J=(N+J)/O;for(var fe=[],xe,Se=L.Bb(M-1),Me=xe=0;Me<Se.length;)xe==2&&Se[Me]==3?(xe=0,Se=[].concat(q(Se)),Se.splice(Me,1),Se=new Uint8Array(Se)):Se[Me]==0?xe++:xe=0,Me++;for(xe=Se,Me=0;Me<xe.length;){for(Se=0;xe[Me]==255;)Se+=255,Me++;Se+=xe[Me++];for(var Oe=0;xe[Me]==255;)Oe+=255,Me++;Oe+=xe[Me++],Se==4&&fe.push(xe.subarray(Me,Me+Oe)),Me+=Oe}for(fe=A(fe),xe=fe.next();!xe.done;xe=fe.next())r.push({rh:xe.value,pts:J})}else try{L.skip(M-1)}catch(Ue){break}ae-=M+4,ae==0&&(N=G.length>W?N+(G[W].Ge||z):N+z,W++,ae=G.length>W&&G[W].sampleSize||$)}}}).parse(e,!1),r};var St=0,Za=1,Ja=2,mc={avc1:Za,avc3:Za,hev1:Ja,hvc1:Ja,dvh1:Ja,dvhe:Ja};function vh(e){this.h=new Lu,e.includes("video/mp4")&&(this.h=new Yg),this.g=new By}vh.prototype.init=function(e){this.h.init(e)};function $g(e,n){n=e.h.parse(n),n=A(n);for(var r=n.next();!r.done;r=n.next()){var s=r.value,a=Tt(s.rh);if(0<a.length&&(r=e.g,s=s.pts,a=new Pt(a,0),a.pb()===181&&a.De()===49&&a.N()===1195456820&&a.pb()===3)){var d=a.pb();if(d&64){d&=31,a.skip(1);for(var f=0;f<d;f++){var g=a.pb(),T=(g&4)>>2,I=a.pb(),M=a.pb();T&&(g&=3,g===0||g===1?r.h.push({pts:s,type:g,Oa:I,hb:M,order:r.h.length}):(r.g.push({pts:s,type:g,value:I,order:r.g.length}),r.g.push({pts:s,type:2,value:M,order:r.g.length})))}}}}return Fy(e.g)}function ur(e,n,r,s,a){this.Pa=e,this.Ta=n,this.Ba=r,this.we=s===void 0?null:s,this.timescale=a}ur.prototype.Jc=function(){return this.Ta},ur.prototype.Fc=function(){return this.Ba};function fE(e,n){return e&&n?e.Jc()==n.Jc()&&e.Fc()==n.Fc()&&Lt(e.Pa(),n.Pa()):e==n}pe("shaka.media.InitSegmentReference",ur),ur.prototype.getEndByte=ur.prototype.Fc,ur.prototype.getStartByte=ur.prototype.Jc;function ft(e,n,r,s,a,d,f,g,T,I,M,L,N,O,z){I=I===void 0?[]:I,O=O===void 0?vc:O,this.startTime=e,this.j=this.endTime=n,this.C=r,this.Ta=s,this.Ba=a,this.h=d,this.timestampOffset=f,this.appendWindowStart=g,this.appendWindowEnd=T,this.i=I,this.tilesLayout=M===void 0?"":M,this.B=L===void 0?null:L,this.g=N===void 0?null:N,this.status=O,this.l=z===void 0?null:z,this.s=null,this.m=0}v=ft.prototype,v.Pa=function(){return this.C()},v.getStartTime=function(){return this.startTime},v.Ig=function(){return this.endTime},v.Jc=function(){return this.Ta},v.Fc=function(){return this.Ba},v.ah=function(){return this.tilesLayout},v.$g=function(){return this.B},v.ec=function(){return this.status},v.kh=function(){this.status=Qg},v.$f=function(e){this.s=e},v.Yg=function(){return this.s},v.offset=function(e){this.startTime+=e,this.endTime+=e,this.j+=e;for(var n=A(this.i),r=n.next();!r.done;r=n.next())r=r.value,r.startTime+=e,r.endTime+=e,r.j+=e},v.Ve=function(e){this.g==null?Rn("Sync attempted without sync time!"):(e=this.g-e-this.startTime,.001<=Math.abs(e)&&this.offset(e))},pe("shaka.media.SegmentReference",ft),ft.prototype.syncAgainst=ft.prototype.Ve,ft.prototype.offset=ft.prototype.offset,ft.prototype.getThumbnailSprite=ft.prototype.Yg,ft.prototype.setThumbnailSprite=ft.prototype.$f,ft.prototype.markAsUnavailable=ft.prototype.kh,ft.prototype.getStatus=ft.prototype.ec,ft.prototype.getTileDuration=ft.prototype.$g,ft.prototype.getTilesLayout=ft.prototype.ah,ft.prototype.getEndByte=ft.prototype.Fc,ft.prototype.getStartByte=ft.prototype.Jc,ft.prototype.getEndTime=ft.prototype.Ig,ft.prototype.getStartTime=ft.prototype.getStartTime,ft.prototype.getUris=ft.prototype.Pa;var vc=0,Qg=1;ft.Status={Vh:vc,kj:Qg,Ai:2};function zy(e){return!e||e.length==1&&1e-6>e.end(0)-e.start(0)?null:e.length==1&&0>e.start(0)?0:e.length?e.start(0):null}function el(e){return!e||e.length==1&&1e-6>e.end(0)-e.start(0)?null:e.length?e.end(e.length-1):null}function tl(e,n){return!e||!e.length||e.length==1&&1e-6>e.end(0)-e.start(0)||n>e.end(e.length-1)?!1:n>=e.start(0)}function yh(e,n){if(!e||!e.length||e.length==1&&1e-6>e.end(0)-e.start(0))return 0;var r=0;e=A(us(e));for(var s=e.next();!s.done;s=e.next()){var a=s.value;s=a.start,a=a.end,a>n&&(r+=a-Math.max(s,n))}return r}function pE(e,n,r){return!e||!e.length||e.length==1&&1e-6>e.end(0)-e.start(0)?null:(e=us(e).findIndex(function(s,a,d){return s.start>n&&(a==0||d[a-1].end-n<=r)}),0<=e?e:null)}function us(e){if(!e)return[];for(var n=[],r=0;r<e.length;r++)n.push({start:e.start(r),end:e.end(r)});return n}function nl(){}function Zg(e,n){var r=(e[n]&127)<<21;return r|=(e[n+1]&127)<<14,r|=(e[n+2]&127)<<7,r|=e[n+3]&127}function gE(e){var n={key:e.type,description:"",data:""};if(e.type==="TXXX"){if(2>e.size||e.data[0]!==3)return null;var r=e.data.subarray(1).indexOf(0);if(r===-1)return null;var s=Bt(Tt(e.data,1,r));return e=Bt(Tt(e.data,2+r)).replace(/\0*$/,""),n.description=s,n.data=e,n}return e.type==="WXXX"?2>e.size||e.data[0]!==3||(r=e.data.subarray(1).indexOf(0),r===-1)?null:(s=Bt(Tt(e.data,1,r)),e=Bt(Tt(e.data,2+r)).replace(/\0*$/,""),n.description=s,n.data=e,n):e.type==="PRIV"?2>e.size||(s=e.data.indexOf(0),s===-1)?null:(s=Bt(Tt(e.data,0,s)),e=ji(e.data.subarray(s.length+1)),n.description=s,n.data=e,n):e.type[0]==="T"?2>e.size||e.data[0]!==3?null:(e=Bt(e.data.subarray(1)).replace(/\0*$/,""),n.data=e,n):e.type[0]==="W"?(e=Bt(e.data).replace(/\0*$/,""),n.data=e,n):e.data?(n.data=ji(e.data),n):null}function xh(e){for(var n=0,r=[];n+10<=e.length&&e[n]===73&&e[n+1]===68&&e[n+2]===51&&255>e[n+3]&&255>e[n+4]&&128>e[n+6]&&128>e[n+7]&&128>e[n+8]&&128>e[n+9];){var s=Zg(e,n+6);for(e[n+5]>>6&1&&(n+=10),n+=10,s=n+s;n+10<s;){var a=e.subarray(n),d=Zg(a,4);a={type:String.fromCharCode(a[0],a[1],a[2],a[3]),size:d,data:a.subarray(10,10+d)},(d=gE(a))&&r.push(d),n+=a.size+10}n+10<=e.length&&e[n]===51&&e[n+1]===68&&e[n+2]===73&&255>e[n+3]&&255>e[n+4]&&128>e[n+6]&&128>e[n+7]&&128>e[n+8]&&128>e[n+9]&&(n+=10)}return r}pe("shaka.util.Id3Utils",nl),nl.getID3Frames=xh;function Th(){this.s=null,this.B=!1,this.l=this.m=null,this.F=[],this.g=this.h=null,this.C=[],this.j=null,this.i=[]}Th.prototype.parse=function(e){if(564>e.length)return this;for(var n=Math.max(0,Gy(e)),r=e.length-(e.length+n)%188,s=!1,a=n;a<r;a+=188)if(e[a]===71){var d=!!(e[a+1]&64),f=((e[a+1]&31)<<8)+e[a+2];if(1<(e[a+3]&48)>>4){var g=a+5+e[a+4];if(g===a+188)continue}else g=a+4;switch(f){case 0:d&&(g+=e[g]+1),this.s=(e[g+10]&31)<<8|e[g+11];break;case 17:case 8191:break;case this.s:d&&(g+=e[g]+1),d=e,f={audio:-1,video:-1,me:-1,audioCodec:"",videoCodec:""};var T=g+3+((d[g+1]&15)<<8|d[g+2])-4;for(g+=12+((d[g+10]&15)<<8|d[g+11]);g<T;){var I=(d[g+1]&31)<<8|d[g+2];switch(d[g]){case 15:f.audio===-1&&(f.audio=I,f.audioCodec="aac");break;case 21:f.me===-1&&(f.me=I);break;case 27:f.video===-1&&(f.video=I,f.videoCodec="avc");break;case 3:case 4:f.audio===-1&&(f.audio=I,f.audioCodec="mp3");break;case 36:f.video===-1&&(f.video=I,f.videoCodec="hvc")}g+=((d[g+3]&15)<<8|d[g+4])+5}d=f,this.l==null&&(this.l=d.video),this.g==null&&(this.g=d.audio),this.j==null&&(this.j=d.me),s&&!this.B&&(s=!1,a=n-188),this.B=!0;break;case this.l:d=e.subarray(g,a+188),this.m==null&&(g=wh(d))&&g.pts!=null&&(this.m=g.pts/9e4),this.F.push(d);break;case this.g:d=e.subarray(g,a+188),this.h==null&&(g=wh(d))&&g.pts!=null&&(this.h=g.pts/9e4),this.C.push(d);break;case this.j:this.i.push(e.subarray(g,a+188));break;default:s=!0}}return this};function wh(e){if((e[0]<<16|e[1]<<8|e[2])!==1)return null;var n={data:new Uint8Array(0),vj:6+(e[4]<<8|e[5]),pts:null,dts:null},r=e[7];return r&192&&(n.pts=536870912*(e[9]&14)+4194304*(e[10]&255)+16384*(e[11]&254)+128*(e[12]&255)+(e[13]&254)/2,n.dts=n.pts,r&64&&(n.dts=536870912*(e[14]&14)+4194304*(e[15]&255)+16384*(e[16]&254)+128*(e[17]&255)+(e[18]&254)/2)),n.data=e.subarray(9+e[8]),n}function mE(e){for(var n=[],r=new Uint8Array(0),s=e.i.length-1;0<=s;s--){r=pi(e.i[s],r);var a=wh(r);a&&(n.unshift({cueTime:a.pts?a.pts/9e4:null,data:a.data,frames:xh(a.data),dts:a.dts,pts:a.pts}),r=new Uint8Array(0))}return n}Th.prototype.getStartTime=function(){return{audio:this.h,video:this.m}};function Gy(e){for(var n=Math.min(1e3,e.length-564),r=0;r<n;){if(e[r]===71&&e[r+188]===71&&e[r+376]===71)return r;r++}return-1}pe("shaka.util.TsParser",Th);function as(e,n,r){this.g=null,this.i=-1,this.j=e,this.h=n,this.l=r,typeof libDPIModule>"u"&&ze("Could not Find LCEVC Library dependencies on this page"),typeof LcevcDil>"u"?ze("Could not Find LCEVC Library on this page"):LcevcDil.SupportObject.SupportStatus||ze(LcevcDil.SupportObject.SupportError),typeof LcevcDil<"u"&&typeof libDPIModule<"u"&&this.h instanceof HTMLCanvasElement&&LcevcDil.SupportObject.SupportStatus&&!this.g&&LcevcDil.SupportObject.webGLSupport(this.h)&&(this.h.classList.remove("shaka-hidden"),this.g=new LcevcDil.LcevcDil(this.j,this.h,this.l))}as.prototype.release=function(){this.g&&(this.g.close(),this.g=null)};function Jg(e,n){var r=Vy;switch(n.mimeType){case"video/webm":r=Eh;break;case"video/mp4":r=vE}e.g&&(e.i=n.id,e.g.setLevelSwitching(n.id,!0),e.g.setContainerFormat(r))}pe("shaka.lcevc.Dil",as),as.prototype.release=as.prototype.release;var Vy=0,Eh=1,vE=2;function Us(e,n,r,s){var a=this;this.j=e,this.H=null,this.m=n,this.h={},this.M={},this.P={},this.g=null,this.J=!1,this.V=r||function(){},this.G=s||null,this.i={},this.C=new Ve,this.s={},this.B=null,this.K=new bt,this.l=Ky(this,this.K),this.I=new ns(function(){return yE(a)}),this.O="",this.F=!1,this.X=new bt}function Ky(e,n){var r=new MediaSource;return e.C.Da(r,"sourceopen",function(){URL.revokeObjectURL(e.O),n.resolve()}),e.O=Tc(r),e.j.src=e.O,r}v=Us.prototype,v.destroy=function(){return this.I.destroy()};function yE(e){var n,r,s,a,d,f,g,T;return j(function(I){if(I.g==1){n=[];for(r in e.i)for(s=e.i[r],a=s[0],e.i[r]=s.slice(0,1),a&&n.push(a.p.catch(Aa)),d=A(s.slice(1)),f=d.next();!f.done;f=d.next())g=f.value,g.p.reject(new se(2,7,7003,void 0));e.g&&n.push(e.g.destroy()),e.m&&n.push(e.m.destroy());for(T in e.s)n.push(e.s[T].destroy());return k(I,Promise.all(n),2)}e.C&&(e.C.release(),e.C=null),e.j&&(e.j.removeAttribute("src"),e.j.load(),e.j=null),e.H=null,e.l=null,e.g=null,e.m=null,e.h={},e.s={},e.B=null,e.i={},e.G=null,le(I)})}v.init=function(e,n,r){r=r===void 0?!1:r;var s=this,a,d,f,g,T,I,M,L;return j(function(N){if(N.g==1)return a=$e,k(N,s.K,2);for(s.F=r,d={},f=A(e.keys()),g=f.next();!g.done;d={Ea:d.Ea},g=f.next())d.Ea=g.value,T=e.get(d.Ea),I=Qr(T.mimeType,T.codecs),d.Ea==a.ha?yc(s,I,r):(!n&&Hn(I)||!Qo(I,d.Ea)||(s.s[d.Ea]=new Mt(I),I=zd(d.Ea,I)),M=I+s.H.sourceBufferExtraFeatures,L=s.l.addSourceBuffer(M),s.C.o(L,"error",function(O){return function(){s.i[O.Ea][0].p.reject(new se(2,3,3014,s.j.error?s.j.error.code:0))}}(d)),s.C.o(L,"updateend",function(O){return function(){return Cr(s,O.Ea)}}(d)),s.h[d.Ea]=L,s.M[d.Ea]=I,s.i[d.Ea]=[],s.P[d.Ea]=!!T.drmInfos.length);le(N)})},v.configure=function(e){this.H=e};function yc(e,n,r){e.g||(e.g=new Zo(e.m));var s=e.g;e=e.J,n!="application/cea-608"&&n!="application/cea-708"&&(s.j=(0,Nn[n])(),s.j.setSequenceMode?s.j.setSequenceMode(r):ze('Text parsers should have a "setSequenceMode" method!'),s.C=e)}function em(e){return e.l?e.l.readyState=="ended":!0}function Hy(e,n){return n==yt?e.g.g:zy(ls(e,n))}function Ah(e,n){return n==yt?e.g.h:el(ls(e,n))}function Wy(e,n,r){return n==yt?(e=e.g,e.h==null||e.h<r?0:e.h-Math.max(r,e.g)):(e=ls(e,n),yh(e,r))}v.jb=function(){var e={total:us(this.j.buffered),audio:us(ls(this,"audio")),video:us(ls(this,"video")),text:[]};if(this.g){var n=this.g.g,r=this.g.h;n!=null&&r!=null&&e.text.push({start:n,end:r})}return e};function ls(e,n){try{return e.h[n].buffered}catch(r){return null}}function xc(e,n,r,s,a,d,f){d=d===void 0?!1:d,f=f===void 0?!1:f;var g,T,I,M,L,N,O,z,$,G,W,ae,J,fe,xe,Se,Me,Oe,Ue,rt,ut,ct,It;return j(function(Ye){switch(Ye.g){case 1:if(g=$e,n!=g.ha){Ye.D(2);break}if(!e.F){Ye.D(3);break}return k(Ye,e.X,4);case 4:T=Ye.h,e.g.B=T;case 3:return k(Ye,ty(e.g,r,s?s.startTime:null,s?s.endTime:null),5);case 5:return Ye.return();case 2:if(I=Tt(r),M=e.M[n],e.s[n]&&(M=e.s[n].s),0>Gy(I)?io.includes(M)&&(z=xh(I),z.length&&s&&($={cueTime:s.startTime,data:I,frames:z,dts:s.startTime,pts:s.startTime},e.V([$],0,s.endTime))):(L=new Th().parse(I),N=s.startTime-(L.getStartTime()[n]||0),O=mE(L),O.length&&e.V(O,N,s?s.endTime:null)),!e.s[n]){a&&n==g.Ma&&(e.g||yc(e,"text/vtt",e.F),e.B||(e.B=new vh(M)),s?(G=$g(e.B,r),G.length&&(W=e.h[g.Ma].timestampOffset,og(e.g,G,s.startTime,s.endTime,W))):e.B.init(r)),Ye.D(6);break}return d&&e.s[n].g.resetCaptions(),k(Ye,Jv(e.s[n],r),7);case 7:ae=Ye.h,e.g||yc(e,"text/vtt",e.F),ae.captions&&ae.captions.length&&(J=e.h[g.Ma].timestampOffset,fe=rg(ae.captions),og(e.g,fe,s?s.startTime:null,s?s.endTime:null,J)),r=ae.data;case 6:if(r=Yy(e,r,s?s.startTime:null,n),xe=e.h[n],Se=am,!e.F||xe.mode==Se||!s){Ye.D(8);break}if(Me=e.l.duration,Oe=n==g.Ma||!(g.Ma in e.h),!Oe){Ye.D(9);break}return Ue=[xe.appendWindowStart,xe.appendWindowEnd],xe.appendWindowStart=0,xe.appendWindowEnd=1/0,rt=xe.timestampOffset,xe.timestampOffset=0,k(Ye,Ge(e,n,function(){return im(e,n,r)}),10);case 10:return k(Ye,Ge(e,n,function(){return il(e,n)}),11);case 11:return xe.timestampOffset=rt,xe.appendWindowStart=Ue[0],xe.appendWindowEnd=Ue[1],ut=zy(ls(e,n)),ct=(s.startTime||0)-(ut||0),e.X.resolve(ct),k(Ye,Ge(e,n,function(){return rm(e,n,0,Me)}),12);case 12:if(n!=g.Ma){Ye.D(9);break}return k(Ye,Ge(e,n,function(){e.j.currentTime-=.001,Cr(e,n)}),9);case 9:return xe.mode=Se,k(Ye,e.Sa(Me),8);case 8:return s&&e.F&&n!=g.ha&&(d||f)&&(It=s.startTime,Ge(e,n,function(){return il(e,n)}),Ge(e,n,function(){return om(e,n,It)})),k(Ye,Ge(e,n,function(){im(e,n,r)}),16);case 16:le(Ye)}})}function tm(e,n){var r=Ah(e,"video")||0;Vd(e.g,n,r)}function Nu(e){e.g&&Vd(e.g,"",0)}v.remove=function(e,n,r){var s=this,a;return j(function(d){return a=$e,e==a.ha?k(d,s.g.remove(n,r),0):k(d,Ge(s,e,function(){return rm(s,e,n,r)}),0)})};function gi(e,n){var r;return j(function(s){return r=$e,n==r.ha?e.g?k(s,e.g.remove(0,1/0),0):s.return():k(s,Ge(e,n,function(){return rm(e,n,0,e.l.duration)}),0)})}v.flush=function(e){var n=this,r;return j(function(s){return r=$e,e==r.ha?s.return():k(s,Ge(n,e,function(){n.j.currentTime-=.001,Cr(n,e)}),0)})};function qy(e,n,r,s,a,d){var f;return j(function(g){return f=$e,n==f.ha?(d||(e.g.B=r),Vw(e.g,s,a),g.return()):k(g,Promise.all([Ge(e,n,function(){return il(e,n)}),d?Promise.resolve():Ge(e,n,function(){return om(e,n,r)}),Ge(e,n,function(){e.h[n].appendWindowStart=0,e.h[n].appendWindowEnd=a,e.h[n].appendWindowStart=s,Cr(e,n)})]),0)})}function nm(e,n,r){var s;return j(function(a){return s=$e,n==s.ha?a.return():(Ge(e,n,function(){return il(e,n)}),k(a,Ge(e,n,function(){return om(e,n,r)}),0))})}v.endOfStream=function(e){var n=this;return j(function(r){return k(r,sm(n,function(){em(n)||(e?n.l.endOfStream(e):n.l.endOfStream())}),0)})},v.Sa=function(e){var n=this;return j(function(r){return k(r,sm(n,function(){if(e<n.l.duration)for(var s in n.h){var a={start:function(){},p:new bt};n.i[s].unshift(a)}n.l.duration=e}),0)})},v.getDuration=function(){return this.l.duration};function im(e,n,r){if(n=="video"&&e.G){var s=e.G;s.g&&s.g.appendBuffer(r,"video",s.i)}e.h[n].appendBuffer(r)}function rm(e,n,r,s){s<=r?Cr(e,n):e.h[n].remove(r,s)}function il(e,n){var r=e.h[n].appendWindowStart,s=e.h[n].appendWindowEnd;e.h[n].abort(),e.h[n].appendWindowStart=r,e.h[n].appendWindowEnd=s,Cr(e,n)}function om(e,n,r){0>r&&(r+=.001),e.h[n].timestampOffset=r,Cr(e,n)}function Cr(e,n){var r=e.i[n][0];r&&(r.p.resolve(),um(e,n))}function Ge(e,n,r){return Gt(e.I),r={start:r,p:new bt},e.i[n].push(r),e.i[n].length==1&&Xy(e,n),r.p}function sm(e,n){var r,s,a,d,f,g;return j(function(T){switch(T.g){case 1:Gt(e.I),r=[],s={};for(a in e.h)s.yc=new bt,d={start:function(I){return function(){return I.yc.resolve()}}(s),p:s.yc},e.i[a].push(d),r.push(s.yc),e.i[a].length==1&&d.start(),s={yc:s.yc};return ye(T,2),k(T,Promise.all(r),4);case 4:_e(T,3);break;case 2:throw f=we(T),f;case 3:try{n()}catch(I){throw new se(2,3,3015,I)}finally{for(g in e.h)um(e,g)}le(T)}})}function um(e,n){e.i[n].shift(),Xy(e,n)}function Xy(e,n){var r=e.i[n][0];if(r)try{r.start()}catch(s){s.name=="QuotaExceededError"?r.p.reject(new se(2,3,3017,n)):r.p.reject(new se(2,3,3015,s)),um(e,n)}}function Yy(e,n,r,s){var a=e.P[s];return r==null&&a&&(Yo()||ka())&&e.M[s].split(";")[0].split("/")[1]=="mp4"&&(n=bg(n)),n}var Tc=S.URL.createObjectURL,am="sequence",io=["audio/aac","audio/ac3","audio/ec3","audio/mpeg"];function nt(e,n,r){this.i=e,this.m=n,this.s=this.j=1/0,this.g=1,this.h=this.l=null,this.B=0,this.C=!0,this.F=0,this.G=r===void 0?!0:r,this.H=0,this.I=!1}v=nt.prototype,v.getDuration=function(){return this.j},v.Qg=function(){return this.g},v.Zf=function(e){this.i=e},v.Sa=function(e){this.j=e},v.Ug=function(){return this.i},v.Vf=function(e){this.B=e},v.$c=function(e){this.C=e},v.Re=function(e){this.s=e},v.Wf=function(e){this.m=e},v.Hg=function(){return this.m},v.lc=function(e){if(e.length!=0){var n=e[0].startTime,r=e[0].endTime;e=A(e);for(var s=e.next();!s.done;s=e.next())s=s.value,n=Math.min(n,s.startTime),r=Math.max(r,s.endTime),this.g=Math.max(this.g,s.endTime-s.startTime);this.Ae(n),this.h=Math.max(this.h,r),this.i!=null&&this.G&&!this.I&&(this.i=(Date.now()+this.B)/1e3-this.h-this.g)}},v.ve=function(){this.I=!0},v.Ae=function(e){this.l=this.l==null?e:Math.min(this.l,e)},v.ze=function(e){this.g=Math.max(this.g,e)},v.offset=function(e){this.l!=null&&(this.l+=e),this.h!=null&&(this.h+=e)},v.T=function(){return this.j==1/0&&!this.C},v.Lb=function(){return this.j!=1/0&&!this.C},v.mb=function(){return Math.max(this.F,this.Ib()-this.s)},v.ag=function(e){this.F=e},v.Ib=function(){return this.T()||this.Lb()?Math.min(Math.max(0,(Date.now()+this.B)/1e3-this.g-this.i)+this.H,this.j):this.h?Math.min(this.h,this.j):this.j},v.Ic=function(e){var n=Math.max(this.l,this.F);return this.s==1/0?Math.ceil(1e3*n)/1e3:Math.max(n,Math.min(this.Ib()-this.s+e,this.kb()))},v.dc=function(){return this.Ic(0)},v.kb=function(){return Math.max(0,this.Ib()-(this.T()||this.Lb()?this.m:0))},v.fg=function(){return!(this.i==null||this.h!=null&&this.G)},v.Uf=function(e){this.H=e},pe("shaka.media.PresentationTimeline",nt),nt.prototype.setAvailabilityTimeOffset=nt.prototype.Uf,nt.prototype.usingPresentationStartTime=nt.prototype.fg,nt.prototype.getSeekRangeEnd=nt.prototype.kb,nt.prototype.getSeekRangeStart=nt.prototype.dc,nt.prototype.getSafeSeekRangeStart=nt.prototype.Ic,nt.prototype.getSegmentAvailabilityEnd=nt.prototype.Ib,nt.prototype.setUserSeekStart=nt.prototype.ag,nt.prototype.getSegmentAvailabilityStart=nt.prototype.mb,nt.prototype.isInProgress=nt.prototype.Lb,nt.prototype.isLive=nt.prototype.T,nt.prototype.offset=nt.prototype.offset,nt.prototype.notifyMaxSegmentDuration=nt.prototype.ze,nt.prototype.notifyMinSegmentStartTime=nt.prototype.Ae,nt.prototype.lockStartTime=nt.prototype.ve,nt.prototype.notifySegments=nt.prototype.lc,nt.prototype.getDelay=nt.prototype.Hg,nt.prototype.setDelay=nt.prototype.Wf,nt.prototype.setSegmentAvailabilityDuration=nt.prototype.Re,nt.prototype.setStatic=nt.prototype.$c,nt.prototype.setClockOffset=nt.prototype.Vf,nt.prototype.getPresentationStartTime=nt.prototype.Ug,nt.prototype.setDuration=nt.prototype.Sa,nt.prototype.setPresentationStartTime=nt.prototype.Zf,nt.prototype.getMaxSegmentDuration=nt.prototype.Qg,nt.prototype.getDuration=nt.prototype.getDuration;function lm(e,n,r){this.l=r,this.j=e,this.B=dm(e),this.g=e.g.currentTime,this.m=Date.now()/1e3,this.h=!1,this.s=0,this.C=n,this.i=function(){}}lm.prototype.release=function(){this.l=this.j=null,this.i=function(){}};function cm(e,n){e.i=n}function $y(e){this.g=e}function dm(e){if(e.g.paused||e.g.playbackRate==0||e.g.buffered.length==0)var n=!1;else e:{n=e.g.currentTime,e=A(us(e.g.buffered));for(var r=e.next();!r.done;r=e.next())if(r=r.value,!(n<r.start-.1||n>r.end-.5)){n=!0;break e}n=!1}return n}function Sh(e,n,r,s,a){var d=this;this.s=a,this.g=e,this.B=n,this.G=r,this.i=new Ve,this.m=!1,this.F=e.readyState,this.C=0,this.h=s,this.l=!1,this.i.o(e,"waiting",function(){return Ih(d)}),this.j=new Qe(function(){Ih(d)}).ea(.25)}Sh.prototype.release=function(){this.i&&(this.i.release(),this.i=null),this.j!=null&&(this.j.stop(),this.j=null),this.h&&(this.h.release(),this.h=null),this.g=this.B=this.s=null},Sh.prototype.Ce=function(){this.l=!0,Ih(this)};function Ih(e){if(e.g.readyState!=0){if(e.g.seeking){if(!e.m)return}else e.m=!1;if(!e.g.paused||e.g.currentTime==0&&(e.g.autoplay||e.g.currentTime!=0)){e.g.readyState!=e.F&&(e.F=e.g.readyState);var n;if(!(n=!e.h)){n=e.h;var r=n.j,s=dm(r),a=r.g.currentTime,d=Date.now()/1e3;(n.g!=a||n.B!=s)&&(n.m=d,n.g=a,n.B=s,n.h=!1),a=d-n.m,(s=a>=n.C&&s&&!n.h)&&(n.i(n.g,a),n.h=!0,n.g=r.g.currentTime,n.s++,n.l(new Fe("stalldetected"))),n=!s}n&&(n=e.g.currentTime,r=e.g.buffered,s=pE(r,n,e.G.gapDetectionThreshold),s==null||s==0&&!e.l||(a=r.start(s),a>=e.B.kb()||.001>a-n||(s!=0&&r.end(s-1),e.g.currentTime=a,e.C++,e.s(new Fe("gapjumped")))))}}}function Du(e,n,r,s){n==HTMLMediaElement.HAVE_NOTHING||e.readyState>=n?s():(n=Qy.value().get(n),r.Da(e,n,s))}var Qy=new Bi(function(){return new Map([[HTMLMediaElement.HAVE_METADATA,"loadedmetadata"],[HTMLMediaElement.HAVE_CURRENT_DATA,"loadeddata"],[HTMLMediaElement.HAVE_FUTURE_DATA,"canplay"],[HTMLMediaElement.HAVE_ENOUGH_DATA,"canplaythrough"]])});function hm(e,n,r){var s=this;this.g=e,this.l=n,this.j=r,this.m=!1,this.h=new Ve,this.i=new Zy(e),Du(this.g,HTMLMediaElement.HAVE_METADATA,this.h,function(){gm(s,s.j)})}hm.prototype.release=function(){this.h&&(this.h.release(),this.h=null),this.i!=null&&(this.i.release(),this.i=null),this.l=function(){},this.g=null};function fm(e){return e.m?e.g.currentTime:e.j}function pm(e,n){0<e.g.readyState?_t(e.i,n):Du(e.g,HTMLMediaElement.HAVE_METADATA,e.h,function(){gm(e,e.j)})}function gm(e,n){.001>Math.abs(e.g.currentTime-n)?mm(e):(e.h.Da(e.g,"seeking",function(){mm(e)}),_t(e.i,e.g.currentTime==0?n:e.g.currentTime))}function mm(e){e.m=!0,e.h.o(e.g,"seeking",function(){return e.l()})}function Zy(e){var n=this;this.h=e,this.m=10,this.l=this.j=this.i=0,this.g=new Qe(function(){0>=n.i||n.h.currentTime!=n.j?n.g.stop():(n.h.currentTime=n.l,n.i--)})}Zy.prototype.release=function(){this.g&&(this.g.stop(),this.g=null),this.h=null};function _t(e,n){e.j=e.h.currentTime,e.l=n,e.i=e.m,e.h.currentTime=n,e.g.ea(.1)}function Jy(e){this.g=e,this.j=!1,this.h=null,this.i=new Ve}v=Jy.prototype,v.ge=function(){function e(){n.h==null||n.h==0?n.j=!0:(n.i.Da(n.g,"seeking",function(){n.j=!0}),n.g.currentTime=Math.max(0,n.g.currentTime+n.h))}var n=this;Du(this.g,HTMLMediaElement.HAVE_CURRENT_DATA,this.i,function(){e()})},v.release=function(){this.i&&(this.i.release(),this.i=null),this.g=null},v.ie=function(e){this.h=this.j?this.h:e},v.kd=function(){return(this.j?this.g.currentTime:this.h)||0},v.nf=function(){return 0},v.mf=function(){return 0},v.Pf=function(){};function Ch(e,n,r,s,a,d){var f=this;this.i=e,this.g=n.presentationTimeline,this.F=n.minBufferTime||0,this.l=r,this.C=a,this.B=null,this.s=e1(e,r,d),this.j=new Sh(e,n.presentationTimeline,r,this.s,d),this.h=new hm(e,function(){e:{var g=f.j;g.m=!0,g.l=!1;var T=fm(f.h);if(g=rl(f,T),.001<Math.abs(g-T)&&(T=Date.now()/1e3,!f.B||f.B<T-1)){f.B=T,pm(f.h,g),g=void 0;break e}f.C(),g=void 0}return g},ro(this,s)),this.m=new Qe(function(){if(f.i.readyState!=0&&!f.i.paused){var g=fm(f.h),T=f.g.dc(),I=f.g.kb();3>I-T&&(T=I-3),g<T&&(g=rl(f,g),f.i.currentTime=g)}})}v=Ch.prototype,v.ge=function(){this.m.ea(.25)},v.release=function(){this.h&&(this.h.release(),this.h=null),this.j&&(this.j.release(),this.j=null),this.m&&(this.m.stop(),this.m=null),this.i=this.h=this.g=this.l=null,this.C=function(){}},v.ie=function(e){pm(this.h,e)},v.kd=function(){var e=fm(this.h);return 0<this.i.readyState&&!this.i.paused?vm(this,e):e},v.nf=function(){return this.s?this.s.s:0},v.mf=function(){return this.j.C};function ro(e,n){return n==null?n=1/0>e.g.getDuration()?e.g.dc():e.g.kb():0>n&&(n=e.g.kb()+n),cn(e,vm(e,n))}v.Pf=function(){this.j.Ce()};function cn(e,n){var r=e.g.getDuration();return n>=r?r-e.l.durationBackoff:n}function rl(e,n){var r=Math.max(e.F,e.l.rebufferingGoal),s=e.l.safeSeekOffset,a=e.g.dc(),d=e.g.kb(),f=e.g.getDuration();3>d-a&&(a=d-3);var g=e.g.Ic(r),T=e.g.Ic(s);return r=e.g.Ic(r+s),n>=f?cn(e,n):n>d?d:n<a?tl(e.i.buffered,T)?T:r:n>=g||tl(e.i.buffered,n)?n:r}function vm(e,n){var r=e.g.dc();return n<r?r:(e=e.g.kb(),n>e?e:n)}function e1(e,n,r){if(!n.stallEnabled)return null;var s=n.stallSkip;return n=new lm(new $y(e),n.stallThreshold,r),cm(n,function(){s?e.currentTime+=s:(e.pause(),e.play())}),n}function Rt(e){this.g=e,this.h=null,this.i=0,this.j=!1}v=Rt.prototype,v.release=function(){this.j||(this.g=[],this.h&&this.h.stop(),this.h=null)},v.lh=function(){this.j=!0};function kh(e,n){e=A(e.g);for(var r=e.next();!r.done;r=e.next())n(r.value)}v.find=function(e){for(var n=this.g.length-1,r=n;0<=r;--r){var s=this.g[r],a=r<n?this.g[r+1].startTime:s.endTime;if(e>=s.startTime&&e<a)return r+this.i}return this.g.length&&e<this.g[0].startTime?this.i:null},v.get=function(e){return this.g.length==0?null:(e-=this.i,0>e||e>=this.g.length?null:this.g[e])},v.offset=function(e){if(!this.j)for(var n=A(this.g),r=n.next();!r.done;r=n.next())r.value.offset(e)},v.Sc=function(e){if(!this.j&&e.length){var n=Math.round(1e3*e[0].startTime)/1e3;this.g=this.g.filter(function(r){return Math.round(1e3*r.startTime)/1e3<n}),this.g.push.apply(this.g,q(e))}},v.kc=function(e,n){var r=this;e=e.filter(function(s){return s.endTime>n&&(r.g.length==0||s.endTime>r.g[0].startTime)}),this.Sc(e),this.Gb(n)},v.Gb=function(e){if(!this.j){var n=this.g.length;this.g=this.g.filter(function(r){return r.endTime>e}),this.i+=n-this.g.length}},v.wb=function(e,n,r){if(r=r===void 0?!1:r,!this.j){for(;this.g.length&&this.g[this.g.length-1].startTime>=n;)this.g.pop();for(;this.g.length&&this.g[0].endTime<=e;)this.g.shift(),r||this.i++;this.g.length!=0&&(e=this.g[this.g.length-1],this.g[this.g.length-1]=new ft(e.startTime,n,e.C,e.Ta,e.Ba,e.h,e.timestampOffset,e.appendWindowStart,e.appendWindowEnd,e.i,e.tilesLayout,e.B,e.g,e.status,e.l))}},v.Nd=function(e,n){var r=this;this.j||(this.h&&this.h.stop(),this.h=new Qe(function(){var s=n();s?r.g.push.apply(r.g,q(s)):(r.h.stop(),r.h=null)}),this.h.ea(e))},Rt.prototype[Symbol.iterator]=function(){return this.bc(0)},Rt.prototype.bc=function(e){var n=this.find(e);if(n==null)return null;n--;var r=this.get(n+1),s=-1;if(r&&0<r.i.length)for(var a=r.i.length-1;0<=a;--a){var d=r.i[a];if(e>=d.startTime&&e<d.endTime){n++,s=a-1;break}}return new oo(this,n,s)};function ym(e,n,r){return new Rt([new ft(e,e+n,function(){return r},0,null,null,e,e,e+n)])}pe("shaka.media.SegmentIndex",Rt),Rt.forSingleSegment=ym,Rt.prototype.getIteratorForTime=Rt.prototype.bc,Rt.prototype.updateEvery=Rt.prototype.Nd,Rt.prototype.fit=Rt.prototype.wb,Rt.prototype.evict=Rt.prototype.Gb,Rt.prototype.mergeAndEvict=Rt.prototype.kc,Rt.prototype.offset=Rt.prototype.offset,Rt.prototype.get=Rt.prototype.get,Rt.prototype.find=Rt.prototype.find,Rt.prototype.markImmutable=Rt.prototype.lh,Rt.prototype.release=Rt.prototype.release;function oo(e,n,r){this.i=e,this.g=n,this.h=r}oo.prototype.ug=function(){return this.g},oo.prototype.current=function(){var e=this.i.get(this.g);return e&&0<e.i.length&&e.Pa().length&&this.h>=e.i.length&&(this.g++,this.h=0,e=this.i.get(this.g)),e&&0<e.i.length?e.i[this.h]:e},oo.prototype.next=function(){var e=this.i.get(this.g);return e&&0<e.i.length?(this.h++,e.Pa().length&&this.h==e.i.length&&(this.g++,this.h=0)):(this.g++,this.h=0),e=this.current(),{value:e,done:!e}},pe("shaka.media.SegmentIterator",oo),oo.prototype.next=oo.prototype.next,oo.prototype.current=oo.prototype.current,oo.prototype.currentPosition=oo.prototype.ug;function pn(){Rt.call(this,[]),this.l=[]}Te(pn,Rt),v=pn.prototype,v.clone=function(){var e=new pn;return e.l=this.l.slice(),e},v.release=function(){for(var e=A(this.l),n=e.next();!n.done;n=e.next())n.value.release();this.l=[]},v.find=function(e){for(var n=0,r=A(this.l),s=r.next();!s.done;s=r.next()){s=s.value;var a=s.find(e);if(a!=null)return a+n;n+=s.i+s.g.length}return null},v.get=function(e){for(var n=0,r=A(this.l),s=r.next();!s.done;s=r.next()){s=s.value;var a=s.get(e-n);if(a)return a;n+=s.i+s.g.length}return null},v.offset=function(){},v.Sc=function(){},v.Gb=function(){},v.kc=function(){},v.wb=function(){},v.Nd=function(){},pe("shaka.media.MetaSegmentIndex",pn),pn.prototype.updateEvery=pn.prototype.Nd,pn.prototype.fit=pn.prototype.wb,pn.prototype.mergeAndEvict=pn.prototype.kc,pn.prototype.evict=pn.prototype.Gb,pn.prototype.merge=pn.prototype.Sc,pn.prototype.offset=pn.prototype.offset,pn.prototype.get=pn.prototype.get,pn.prototype.find=pn.prototype.find,pn.prototype.release=pn.prototype.release;function bu(e){var n=this;this.g=e,this.j=!1,this.i=this.g.wd(),this.h=new Qe(function(){n.g.Of(.25*n.i)})}bu.prototype.release=function(){this.h&&(this.h.stop(),this.h=null),this.g=null},bu.prototype.set=function(e){this.i=e,wc(this)},bu.prototype.td=function(){return this.g.td()};function wc(e){e.h.stop();var n=e.j?0:e.i;if(0<=n)try{e.g.wd()!=n&&e.g.Pe(n);return}catch(r){}e.h.ea(.25),e.g.wd()!=0&&e.g.Pe(0)}function js(e){var n=this;this.h=e,this.g=new Set,this.i=new Qe(function(){ol(n,!1)}).ea(.25)}js.prototype.release=function(){this.i.stop();for(var e=A(this.g),n=e.next();!n.done;n=e.next())n.value.release();this.g.clear()};function ol(e,n){for(var r=A(e.g),s=r.next();!s.done;s=r.next())s.value.j(e.h.currentTime,n)}function cs(e){vt.call(this),this.g=new Map,this.h=e}Te(cs,vt),cs.prototype.release=function(){this.g.clear(),vt.prototype.release.call(this)};function Ec(e,n){var r=e.g.get(n);return r||(r={Uc:[],Af:null,contentType:n},e.g.set(n,r)),r}function xm(e,n,r){var s=Ec(e,n.contentType);t1(e,s),e={we:n,position:r},s=s.Uc,n=s.findIndex(function(a){return a.position>=r}),0<=n?s.splice(n,s[n].position==r?1:0,e):s.push(e)}cs.prototype.j=function(e){for(var n=A(this.g.values()),r=n.next();!r.done;r=n.next()){r=r.value;e:{for(var s=r.Uc,a=s.length-1;0<=a;a--){var d=s[a];if(d.position<=e){s=d.we;break e}}s=null}if((a=s)&&(a=r.Af,a=!(a===s||a&&s&&a.bandwidth==s.bandwidth&&a.audioSamplingRate==s.audioSamplingRate&&a.codecs==s.codecs&&a.contentType==s.contentType&&a.frameRate==s.frameRate&&a.height==s.height&&a.mimeType==s.mimeType&&a.channelsCount==s.channelsCount&&a.pixelAspectRatio==s.pixelAspectRatio&&a.width==s.width)),a)e:{if(a=e,d=s.contentType,(d=this.h()[d])&&0<d.length){var f=d[d.length-1].end;if(a>=d[0].start&&a<f){a=!0;break e}}a=!1}a&&(r.Af=s,JSON.stringify(s),r=new Fe("qualitychange",new Map([["quality",s],["position",e]])),this.dispatchEvent(r))}};function t1(e,n){if((e=e.h()[n.contentType])&&0<e.length){var r=e[0].start,s=e[e.length-1].end,a=n.Uc;n.Uc=a.filter(function(d,f){return!(d.position<=r&&f+1<a.length&&a[f+1].position<=r||d.position>=s)})}else n.Uc=[]}function Tm(e){vt.call(this);var n=this;this.g=new Set,this.i=e,this.h=new Qe(function(){for(var r=n.i(),s=A(n.g),a=s.next();!a.done;a=s.next())a=a.value,a.endTime<r.start&&(n.g.delete(a),a=new Fe("regionremove",new Map([["region",a]])),n.dispatchEvent(a))}).ea(2)}Te(Tm,vt),Tm.prototype.release=function(){this.g.clear(),this.h.stop(),vt.prototype.release.call(this)};function Mh(e){vt.call(this);var n=this;this.i=e,this.g=new Map,this.l=[{Vb:null,Ub:Ou,Kb:function(r,s){return Pu(n,"enter",r,s)}},{Vb:sl,Ub:Ou,Kb:function(r,s){return Pu(n,"enter",r,s)}},{Vb:Bs,Ub:Ou,Kb:function(r,s){return Pu(n,"enter",r,s)}},{Vb:Ou,Ub:sl,Kb:function(r,s){return Pu(n,"exit",r,s)}},{Vb:Ou,Ub:Bs,Kb:function(r,s){return Pu(n,"exit",r,s)}},{Vb:sl,Ub:Bs,Kb:function(r,s){return Pu(n,"skip",r,s)}},{Vb:Bs,Ub:sl,Kb:function(r,s){return Pu(n,"skip",r,s)}}],this.h=new Ve,this.h.o(this.i,"regionremove",function(r){n.g.delete(r.region)})}Te(Mh,vt),Mh.prototype.release=function(){this.i=null,this.g.clear(),this.h.release(),this.h=null,vt.prototype.release.call(this)},Mh.prototype.j=function(e,n){for(var r=A(this.i.g),s=r.next();!s.done;s=r.next()){s=s.value;var a=this.g.get(s),d=e<s.startTime?sl:e>s.endTime?Bs:Ou;this.g.set(s,d);for(var f=A(this.l),g=f.next();!g.done;g=f.next())g=g.value,g.Vb==a&&g.Ub==d&&g.Kb(s,n)}};function Pu(e,n,r,s){n=new Fe(n,new Map([["region",r],["seeking",s]])),e.dispatchEvent(n)}var sl=1,Ou=2,Bs=3;function Fs(e,n,r,s,a){return e=Ct(e,s,a),(n!=0||r!=null)&&(e.headers.Range=r?"bytes="+n+"-"+r:"bytes="+n+"-"),e}function n1(e,n){var r=this;this.g=n,this.m=e,this.i=null,this.C=1,this.s=this.l=null,this.G=!1,this.j=new Map,this.F=!1,this.H=null,this.B=!1,this.h=new ns(function(){return xE(r)})}v=n1.prototype,v.destroy=function(){return this.h.destroy()};function xE(e){var n,r,s,a;return j(function(d){if(d.g==1){for(n=[],r=A(e.j.values()),s=r.next();!s.done;s=r.next())a=s.value,al(a),n.push(km(a));return k(d,Promise.all(n),2)}e.j.clear(),e.g=null,e.m=null,e.i=null,le(d)})}v.configure=function(e){this.i=e,this.H=new Au({maxAttempts:Math.max(e.retryParameters.maxAttempts,2),baseDelay:e.retryParameters.baseDelay,backoffFactor:e.retryParameters.backoffFactor,fuzzFactor:e.retryParameters.fuzzFactor,timeout:0,stallTimeout:0,connectionTimeout:0},!0)},v.start=function(){var e=this;return j(function(n){if(n.g==1)return k(n,AE(e),2);Gt(e.h),e.F=!0,le(n)})};function TE(e,n){var r,s,a,d,f;j(function(g){switch(g.g){case 1:return r=$e,ye(g,2),k(g,gi(e.g.U,r.ha),4);case 4:_e(g,3);break;case 2:s=we(g),e.g&&e.g.onError(s);case 3:a=Qr(n.mimeType,n.codecs),yc(e.g.U,a,e.m.sequenceMode),d=e.g.U.m,(d.isTextVisible()||e.i.alwaysStreamText)&&(f=s1(n),e.j.set(r.ha,f),Mr(e,f,0)),le(g)}})}function i1(e){var n=e.j.get(yt);n&&(al(n),km(n).catch(function(){}),e.j.delete(yt)),e.s=null}function r1(e,n){var r=e.j.get("video");if(r){var s=r.stream;s&&(n?(n=s.trickModeVideo)&&!r.Sb&&(ul(e,n,!1,0,!1),r.Sb=s):(s=r.Sb)&&(r.Sb=null,ul(e,s,!0,0,!1)))}}function o1(e,n,r,s,a,d){r=r===void 0?!1:r,s=s===void 0?0:s,a=a===void 0?!1:a,d=d===void 0?!1:d,e.l=n,e.F&&(n.video&&ul(e,n.video,r,s,a,d),n.audio&&ul(e,n.audio,r,s,a,d))}function _h(e,n){e.s=n,e.F&&ul(e,n,!0,0,!1)}function ul(e,n,r,s,a,d){var f=e.j.get(n.type);f||n.type!=yt?f&&(f.Sb&&(n.trickModeVideo?(f.Sb=n,n=n.trickModeVideo):f.Sb=null),f.stream!=n||a)&&(n.type==yt&&yc(e.g.U,Qr(n.mimeType,n.codecs),e.m.sequenceMode),f.stream.closeSegmentIndex&&f.stream.closeSegmentIndex(),f.stream=n,f.qa=null,f.pf=!!d,r&&(f.Cc?f.Pd=!0:f.Ia?(f.Eb=!0,f.qd=s,f.Pd=!0):(al(f),Cm(e,f,!0,s).catch(function(g){e.g&&e.g.onError(g)}))),wE(e,f).catch(function(g){e.g&&e.g.onError(g)})):TE(e,n)}function wE(e,n){var r,s;return j(function(a){if(a.g==1)return n.Ka?(r=n.stream,s=n.Ka,r.segmentIndex?a.D(2):k(a,r.createSegmentIndex(),2)):a.return();if(n.Ka!=s||n.stream!=r)return a.return();var d=e.g.vd(),f=Ah(e.g.U,n.type),g=n.stream.segmentIndex.find(n.Ga?n.Ga.endTime:d),T=g==null?null:n.stream.segmentIndex.get(g);g=T&&T.Ba?T.Ba-T.Ta:null,T&&!g&&(g=(T.endTime-T.getStartTime())*(n.stream.bandwidth||0)/8),g?((T=T.h)&&(g+=(T.Ba?T.Ba-T.Ta:null)||0),T=e.g.getBandwidthEstimate(),d=8*g/T<(f||0)-d-Math.max(e.m.minBufferTime||0,e.i.rebufferingGoal)||n.Ka.h.g>g):d=!1,d&&n.Ka.abort(),le(a)})}v.Xc=function(){if(this.g)for(var e=this.g.vd(),n=A(this.j.keys()),r=n.next();!r.done;r=n.next()){var s=r.value;r=this.j.get(s),r.qa=null;var a=this.g.U;if(s==yt?(a=a.g,a=a.g==null||a.h==null?!1:e>=a.g&&e<a.h):(a=ls(a,s),a=tl(a,e)),!a){if((Ah(this.g.U,s)!=null||r.Ia)&&EE(this,r),r.Ka&&(r.Ka.abort(),r.Ka=null),s===yt&&(s=this.g.U,s.B))for(s=s.B.g,s.l=0,s.h=[],s.g=[],a=s.i,a.i=[],a.h=[],a.g=0,pc(s),s=A(s.j.values()),a=s.next();!a.done;a=s.next())Uy(a.value);r.Xc=!0}}};function EE(e,n){n.Cc||n.Eb||(n.Ia?(n.Eb=!0,n.qd=0):Hy(e.g.U,n.type)==null?n.eb==null&&Mr(e,n,0):(al(n),Cm(e,n,!1,0).catch(function(r){e.g&&e.g.onError(r)})))}function AE(e){var n,r,s,a,d,f,g,T,I,M;return j(function(L){if(L.g==1){if(n=$e,!e.l)throw new se(2,5,5006);return r=new Map,s=new Set,e.l.audio&&(r.set(n.jd,e.l.audio),s.add(e.l.audio)),e.l.video&&(r.set(n.Ma,e.l.video),s.add(e.l.video)),e.s&&(r.set(n.ha,e.s),s.add(e.s)),a=e.g.U,d=e.i.forceTransmux,k(L,a.init(r,d,e.m.sequenceMode),2)}for(Gt(e.h),e.updateDuration(),f=A(r.keys()),g=f.next();!g.done;g=f.next())T=g.value,I=r.get(T),e.j.has(T)||(M=s1(I),e.j.set(T,M),Mr(e,M,0));le(L)})}function s1(e){return{stream:e,type:e.type,qa:null,Ga:null,yd:null,se:null,re:null,qe:null,Sb:null,endOfStream:!1,Ia:!1,eb:null,Eb:!1,qd:0,Pd:!1,Cc:!1,Xc:!0,ye:!1,Ee:!1,Mc:!1,Ka:null}}v.updateDuration=function(){var e=this.m.presentationTimeline.getDuration();1/0>e?this.g.U.Sa(e):this.g.U.Sa(Math.pow(2,32))};function wm(e,n){var r,s,a,d,f;return j(function(g){switch(g.g){case 1:if(Gt(e.h),n.Ia||n.eb==null||n.Cc)return g.return();if(n.eb=null,!n.Eb){g.D(2);break}return k(g,Cm(e,n,n.Pd,n.qd),3);case 3:return g.return();case 2:if(n.stream.segmentIndex){g.D(4);break}return r=n.stream,k(g,n.stream.createSegmentIndex(),5);case 5:if(r!=n.stream)return r.closeSegmentIndex&&r.closeSegmentIndex(),n.Ia||n.eb||Mr(e,n,0),g.return();case 4:ye(g,6),s=SE(e,n),s!=null&&(Mr(e,n,s),n.Mc=!1),_e(g,7);break;case 6:return a=we(g),k(g,Lh(e,a),8);case 8:return g.return();case 7:if(d=Array.from(e.j.values()),!e.F||!d.every(function(T){return T.endOfStream})){g.D(0);break}return k(g,e.g.U.endOfStream(),10);case 10:Gt(e.h),f=e.g.U.getDuration(),f!=0&&f<e.m.presentationTimeline.getDuration()&&e.m.presentationTimeline.Sa(f),le(g)}})}function SE(e,n){if(Im(n))return tm(e.g.U,n.stream.originalId||""),null;n.type==yt&&Nu(e.g.U);var r=e.g.vd(),s=n.Ga?n.Ga.endTime:r,a=Wy(e.g.U,n.type,r),d=Math.max(e.m.minBufferTime||0,e.i.rebufferingGoal,e.i.bufferingGoal)*e.C,f=e.m.presentationTimeline.getDuration()-s,g=Ah(e.g.U,n.type);if(1e-6>f&&g)return n.endOfStream=!0,n.type=="video"&&(e=e.j.get(yt))&&Im(e)&&(e.endOfStream=!0),null;if(n.endOfStream=!1,a>=d)return e.i.updateIntervalSeconds/2;if(a=Em(e,n,r,g),!a)return e.i.updateIntervalSeconds;for(d=1/0,f=Array.from(e.j.values()),f=A(f),g=f.next();!g.done;g=f.next())g=g.value,Im(g)||g.qa&&!g.qa.current()||(d=Math.min(d,g.Ga?g.Ga.endTime:r));return s>=d+e.m.presentationTimeline.g?e.i.updateIntervalSeconds:(Am(e,n,r,a).catch(function(){}),null)}function Em(e,n,r,s){if(n.qa)return n.qa.current();if(n.Ga||s)return r=n.Ga?n.Ga.endTime:s,n.ye=!0,n.qa=n.stream.segmentIndex.bc(r),n.qa&&n.qa.next().value;e=e.i.inaccurateManifestTolerance,s=Math.max(r-e,0);var a=null;return e&&(n.qa=n.stream.segmentIndex.bc(s),a=n.qa&&n.qa.next().value),a||(n.qa=n.stream.segmentIndex.bc(r),a=n.qa&&n.qa.next().value),a}function Am(e,n,r,s){var a,d,f,g,T,I,M,L,N,O,z,$,G,W,ae;return j(function(J){switch(J.g){case 1:if(a=$e,d=n.stream,f=n.qa,n.Ia=!0,ye(J,2),s.ec()==2)throw new se(1,1,1011);return k(J,u1(e,n,s),4);case 4:return Gt(e.h),e.B?J.return():(g=d.mimeType=="video/mp4"||d.mimeType=="audio/mp4",T=S.ReadableStream,e.i.lowLatencyMode&&T&&g&&!s.l?(L=new Uint8Array(0),O=N=!1,z=function(fe){var xe,Se,Me;return j(function(Oe){return N||(O=!0,Gt(e.h),e.B)?Oe.return():(L=kr(L,fe),xe=!1,Se=0,new Kt().box("mdat",function(Ue){Se=Ue.size+Ue.start,xe=!0}).parse(L,!1,!0),xe?(Me=L.subarray(0,Se),L=L.subarray(Se),k(Oe,Rh(e,n,r,d,s,Me),0)):Oe.D(0))})},k(J,Uu(e,n,s,z),11)):(I=Uu(e,n,s),k(J,I,7)));case 7:if(M=J.h,Gt(e.h),e.B)return J.return();if(!s.l){J.D(8);break}return k(J,Sm(M,s,f),9);case 9:M=J.h;case 8:return Gt(e.h),n.Eb?(n.Ia=!1,Mr(e,n,0),J.return()):k(J,Rh(e,n,r,d,s,M),6);case 11:if($=J.h,O){J.D(6);break}return N=!0,Gt(e.h),e.B?J.return():n.Eb?(n.Ia=!1,Mr(e,n,0),J.return()):k(J,Rh(e,n,r,d,s,$),6);case 6:if(Gt(e.h),e.B)return J.return();n.Ga=s,f.next(),n.Ia=!1,n.Ee=!1,G=e.g.U.jb(),W=G[n.type],JSON.stringify(W),n.Eb||e.g.Ce(s.startTime,s.endTime,n.type),Mr(e,n,0),_e(J,0);break;case 2:if(ae=we(J),Gt(e.h,ae),e.B)return J.return();if(n.Ia=!1,ae.code==7001)n.Ia=!1,al(n),Mr(e,n,0),J.D(0);else if(n.type==a.ha&&e.i.ignoreTextStreamFailures)e.j.delete(a.ha),J.D(0);else if(ae.code==3017)Ac(e,n,ae),J.D(0);else return n.Mc=!0,ae.severity=2,k(J,Lh(e,ae),0)}})}function Sm(e,n,r){var s,a,d,f;return j(function(g){if(g.g==1)return s=n.l,s.cryptoKey?g.D(2):k(g,s.fetchKey(),3);if(a=s.iv,!a)for(a=Tt(new ArrayBuffer(16)),d=s.firstMediaSequenceNumber+r.g,f=a.byteLength-1;0<=f;f--)a[f]=d&255,d>>=8;return g.return(S.crypto.subtle.decrypt({name:"AES-CBC",iv:a},s.cryptoKey,e))})}function kr(e,n){var r=new Uint8Array(e.length+n.length);return r.set(e),r.set(n,e.length),r}function Ac(e,n,r){if(!Array.from(e.j.values()).some(function(a){return a!=n&&a.Ee})){var s=Math.round(100*e.C);if(20<s)e.C-=.2;else if(4<s)e.C-=.04;else{n.Mc=!0,e.B=!0,e.g.onError(r);return}n.Ee=!0}Mr(e,n,4)}function u1(e,n,r){var s,a,d,f,g,T,I,M;return j(function(L){return s=[],a=Math.max(0,r.appendWindowStart-.1),d=r.appendWindowEnd+.01,f=r.timestampOffset,(f!=n.se||a!=n.re||d!=n.qe)&&(g=function(){var N;return j(function(O){if(O.g==1)return ye(O,2),n.re=a,n.qe=d,n.se=f,k(O,qy(e.g.U,n.type,f,a,d,e.m.sequenceMode),4);if(O.g!=2)return _e(O,0);throw N=we(O),n.re=null,n.qe=null,n.se=null,N})},s.push(g())),!fE(r.h,n.yd)&&(n.yd=r.h)&&(T=Uu(e,n,r.h),I=function(){var N,O,z,$;return j(function(G){switch(G.g){case 1:return ye(G,2),k(G,T,4);case 4:return N=G.h,Gt(e.h),O=new Kt,O.box("moov",en).box("trak",en).box("mdia",en).S("mdhd",function(W){W=Xg(W.reader||0,W.version||0),r.h.timescale=W.timescale}).parse(N),z=n.stream.closedCaptions&&0<n.stream.closedCaptions.size,k(G,e.g.tf(n.type,N),5);case 5:return k(G,xc(e.g.U,n.type,N,null,z),6);case 6:_e(G,0);break;case 2:throw $=we(G),n.yd=null,$}})},e.g.oh(r.startTime,r.h),s.push(I())),e.m.sequenceMode&&(M=n.Ga?n.Ga.m:null,r.m!=M||n.ye)&&(n.ye=!1,s.push(nm(e.g.U,n.type,r.startTime))),k(L,Promise.all(s),0)})}function Rh(e,n,r,s,a,d){var f,g,T,I,M,L;return j(function(N){switch(N.g){case 1:return f=s.closedCaptions&&0<s.closedCaptions.size,T=s.emsgSchemeIdUris!=null&&0<s.emsgSchemeIdUris.length||e.i.dispatchAllEmsgBoxes,I=e.i.parsePrftBox&&!e.G,(T||I)&&(g=new Kt),T&&g.S("emsg",function(O){var z=s.emsgSchemeIdUris;if(O.version===0)var $=O.reader.Vc(),G=O.reader.Vc(),W=O.reader.N(),ae=O.reader.N(),J=O.reader.N(),fe=O.reader.N(),xe=a.startTime+ae/W;else W=O.reader.N(),xe=O.reader.Cb()/W+a.timestampOffset,ae=xe-a.startTime,J=O.reader.N(),fe=O.reader.N(),$=O.reader.Vc(),G=O.reader.Vc();O=O.reader.Bb(O.reader.W.byteLength-O.reader.ma()),(z&&z.includes($)||e.i.dispatchAllEmsgBoxes)&&($=="urn:mpeg:dash:event:2012"?e.g.ph():$=="https://aomedia.org/emsg/ID3"?(z=xh(O),z.length&&a&&e.g.qh([{cueTime:a.startTime,data:O,frames:z,dts:a.startTime,pts:a.startTime}],0,a.endTime)):(z=new Map().set("detail",{startTime:xe,endTime:xe+J/W,schemeIdUri:$,value:G,timescale:W,presentationTimeDelta:ae,eventDuration:J,id:fe,messageData:O}),z=new Fe("emsg",z),e.g.onEvent(z)))}),I&&g.S("prft",function(O){e:{if(!e.G&&a.h.timescale){O.reader.N();var z=O.reader.N(),$=O.reader.N();if(z=1e3*z+$/Math.pow(2,32)*1e3,O.version===0)var G=O.reader.N();else try{G=O.reader.Cb()}catch(W){e.G=!0,G=void 0;break e}O=new Date(new Date(Date.UTC(1900,0,1,0,0,0)).getTime()+z).getTime(),G=new Map().set("detail",{wallClockTime:O,programStartDate:new Date(O-G/a.h.timescale*1e3)}),G=new Fe("prft",G),e.g.onEvent(G),e.G=!0}G=void 0}return G}),(T||I)&&g.parse(d),k(N,a1(e,n,r),2);case 2:return Gt(e.h),M=n.Xc,n.Xc=!1,L=n.pf,n.pf=!1,k(N,e.g.tf(n.type,d),3);case 3:return k(N,xc(e.g.U,n.type,d,a,f,M,L),4);case 4:Gt(e.h),le(N)}})}function a1(e,n,r){var s,a,d,f;return j(function(g){if(g.g==1)return s=Math.max(e.i.bufferBehind,e.m.presentationTimeline.g),a=Hy(e.g.U,n.type),a==null?g.return():(d=r-a,f=d-s,.01>=f?g.return():k(g,e.g.U.remove(n.type,a,a+f),2));Gt(e.h),le(g)})}function Im(e){return e&&e.type==yt&&(e.stream.mimeType=="application/cea-608"||e.stream.mimeType=="application/cea-708")}function Uu(e,n,r,s){var a,d,f,g,T;return j(function(I){return I.g==1?(a=ts,d=Fs(r.Pa(),r.Ta,r.Ba,e.i.retryParameters,s),f=n.stream,e.g.modifySegmentRequest(d,{type:f.type,init:r instanceof ur,duration:r.endTime-r.startTime,mimeType:f.mimeType,codecs:f.codecs,bandwidth:f.bandwidth}),g=e.g.Ob.request(a,d),n.Ka=g,k(I,g.promise,2)):(T=I.h,n.Ka=null,I.return(T.data))})}function Cm(e,n,r,s){var a,d;return j(function(f){if(f.g==1)return n.Eb=!1,n.Pd=!1,n.qd=0,n.Cc=!0,n.Ga=null,n.yd=null,n.qa=null,s?(a=e.g.vd(),d=e.g.U.getDuration(),k(f,e.g.U.remove(n.type,a+s,d),3)):k(f,gi(e.g.U,n.type),4);if(f.g!=3)return Gt(e.h),r?k(f,e.g.U.flush(n.type),3):f.D(3);Gt(e.h),n.Cc=!1,n.endOfStream=!1,n.Ia||n.eb||Mr(e,n,0),le(f)})}function Mr(e,n,r){var s=n.type;(s!=yt||e.j.has(s))&&(n.eb=new qo(function(){var a;return j(function(d){if(d.g==1)return ye(d,2),k(d,wm(e,n),4);if(d.g!=2)return _e(d,0);a=we(d),e.g&&e.g.onError(a),le(d)})}).R(r))}function al(e){e.eb!=null&&(e.eb.stop(),e.eb=null)}function km(e){return j(function(n){return e.Ka?k(n,e.Ka.abort(),0):n.D(0)})}function Lh(e,n){return j(function(r){if(r.g==1)return k(r,Eg(e.H),2);Gt(e.h),e.g.onError(n),n.handled||e.i.failureCallback(n),le(r)})}function Fi(e,n){var r=El(),s=this;this.j=n,this.i=e,this.l=r,this.s=null,this.m=[],this.h=this.g=null,this.C=Promise.resolve().then(function(){return l1(s)}),this.B=new ns(function(){return IE(s)})}Fi.prototype.destroy=function(){return this.B.destroy()};function IE(e){var n,r,s;return j(function(a){if(a.g==1)return e.h&&e.h.abort(),zi(e),k(a,e.C,2);for(e.g&&e.g.bb.Qb(),n=A(e.m),r=n.next();!r.done;r=n.next())s=r.value,s.bb.Qb();e.g=null,e.m=[],e.j=null,le(a)})}function ll(e,n){var r={mc:function(){},Ed:function(){},Qb:function(){},onError:function(){},Gd:function(){},uj:function(){}};return e.m.push({create:n,bb:r}),e.h&&e.h.abort(),zi(e),r}function l1(e){return j(function(n){if(e.B.g)n=n.D(0);else{if(e.m.length==0||e.g&&!e.g.Jb)var r=!1;else{e.g&&(e.g.bb.Qb(),e.g=null),r=e.m.shift();var s=r.create(e.l);s?(r.bb.mc(),e.g={node:s.node,payload:s.payload,Jb:s.Jb,bb:r.bb}):r.bb.Gd(),r=!0}r?r=Promise.resolve():e.g?r=Nh(e):(e.j.nh(e.i),e.s=new bt,r=e.s),n=k(n,r,1)}return n})}function Nh(e){var n,r;return j(function(s){switch(s.g){case 1:return e.i=e.j.Sg(e.i,e.l,e.g.node,e.g.payload),ye(s,2),e.h=e.j.xg(e.i,e.l,e.g.payload),k(s,e.h.promise,4);case 4:e.h=null,e.i==e.g.node&&(e.g.bb.Ed(),e.g=null),_e(s,0);break;case 2:return n=we(s),n.code==7001?e.g.bb.Qb():e.g.bb.onError(n),e.g=null,e.h=null,r=e,k(s,e.j.handleError(e.l,n),5);case 5:r.i=s.h,le(s)}})}function zi(e){e.s&&(e.s.resolve(),e.s=null)}function c1(e){var n=[],r=700<=e.fontWeight,s=e.fontStyle=="italic",a=e.textDecoration.includes("underline");return r&&n.push("b"),s&&n.push("i"),a&&n.push("u"),r=n.reduce(function(d,f){return d+"<"+f+">"},""),n=n.reduceRight(function(d,f){return d+"</"+f+">"},""),e.lineBreak?"\n":e.nestedCues.length?e.nestedCues.map(c1).join(""):r+e.payload+n}function Dh(e,n){e=A(e);for(var r=e.next();!r.done;r=e.next())if(r=r.value,r.isContainer)Dh(r.nestedCues,n);else{var s=r.clone();s.nestedCues=[],s.payload=c1(r),n.push(s)}return n}function si(e){this.g=null;for(var n=A(Array.from(e.textTracks)),r=n.next();!r.done;r=n.next())r=r.value,r.mode="disabled",r.label=="Shaka Player TextTrack"&&(this.g=r);this.g||(this.g=e.addTextTrack("subtitles","Shaka Player TextTrack")),this.g.mode="hidden"}v=si.prototype,v.remove=function(e,n){return this.g?(d1(this.g,function(r){return r.startTime<n&&r.endTime>e}),!0):!1},v.append=function(e){var n=Dh(e,[]),r=[];e=this.g.cues?Array.from(this.g.cues):[];var s={};n=A(n);for(var a=n.next();!a.done;s={Wb:s.Wb},a=n.next())s.Wb=a.value,e.some(function(d){return function(f){return f.startTime==d.Wb.startTime&&f.endTime==d.Wb.endTime&&f.text==d.Wb.payload}}(s))||(a=CE(s.Wb))&&r.push(a);for(e=r.slice().sort(function(d,f){return d.startTime!=f.startTime?d.startTime-f.startTime:d.endTime!=f.endTime?d.endTime-f.startTime:"line"in VTTCue.prototype?r.indexOf(f)-r.indexOf(d):r.indexOf(d)-r.indexOf(f)}),e=A(e),s=e.next();!s.done;s=e.next())this.g.addCue(s.value)},v.destroy=function(){return this.g&&(d1(this.g,function(){return!0}),this.g.mode="disabled"),this.g=null,Promise.resolve()},v.isTextVisible=function(){return this.g.mode=="showing"},v.setTextVisibility=function(e){this.g.mode=e?"showing":"hidden"};function CE(e){if(e.startTime>=e.endTime)return null;var n=new VTTCue(e.startTime,e.endTime,e.payload);n.lineAlign=e.lineAlign,n.positionAlign=e.positionAlign,e.size&&(n.size=e.size);try{n.align=e.textAlign}catch(r){}return e.textAlign=="center"&&n.align!="center"&&(n.align="middle"),e.writingMode=="vertical-lr"?n.vertical="lr":e.writingMode=="vertical-rl"&&(n.vertical="rl"),e.lineInterpretation==1&&(n.snapToLines=!1),e.line!=null&&(n.line=e.line),e.position!=null&&(n.position=e.position),n}function d1(e,n){var r=e.mode;e.mode=r=="showing"?"showing":"hidden";for(var s=A(Array.from(e.cues)),a=s.next();!a.done;a=s.next())(a=a.value)&&n(a)&&e.removeCue(a);e.mode=r}pe("shaka.text.SimpleTextDisplayer",si),si.prototype.setTextVisibility=si.prototype.setTextVisibility,si.prototype.isTextVisible=si.prototype.isTextVisible,si.prototype.destroy=si.prototype.destroy,si.prototype.append=si.prototype.append,si.prototype.remove=si.prototype.remove;function bh(){}function We(e){return document.createElement(e)}function bn(){var e=document.createElement("button");return e.setAttribute("type","button"),e}function ju(e){for(;e.firstChild;)e.removeChild(e.firstChild)}pe("shaka.util.Dom",bh),bh.removeAllChildren=ju;function Gi(e,n){var r=this;this.j=!1,this.i=[],this.F=e,this.m=n,this.g=We("div"),this.g.classList.add("shaka-text-container"),this.g.style.textAlign="center",this.g.style.display="flex",this.g.style.flexDirection="column",this.g.style.alignItems="center",this.g.style.justifyContent="flex-end",this.m.appendChild(this.g),this.C=new Qe(function(){Bu(r)}).ea(.25),this.h=new Map,this.B=new Ve,this.B.o(document,"fullscreenchange",function(){Bu(r,!0)}),this.l=null,"ResizeObserver"in S&&(this.l=new ResizeObserver(function(){Bu(r,!0)}),this.l.observe(this.g)),this.s=new Map}v=Gi.prototype,v.append=function(e){var n=[].concat(q(this.i)),r={};e=A(e);for(var s=e.next();!s.done;r={dd:r.dd},s=e.next())r.dd=s.value,n.some(function(a){return function(d){return Qv(d,a.dd)}}(r))||this.i.push(r.dd);Bu(this)},v.destroy=function(){this.m.removeChild(this.g),this.g=null,this.j=!1,this.i=[],this.C&&this.C.stop(),this.h.clear(),this.B&&(this.B.release(),this.B=null),this.l&&(this.l.disconnect(),this.l=null)},v.remove=function(e,n){if(!this.g)return!1;var r=this.i.length;return this.i=this.i.filter(function(s){return s.startTime<e||s.endTime>=n}),Bu(this,r>this.i.length),!0},v.isTextVisible=function(){return this.j},v.setTextVisibility=function(e){this.j=e};function kE(e,n){for(;n!=null;){if(n==e.g)return!0;n=n.parentElement}return!1}function Ph(e,n,r,s,a){var d=!1,f=[],g=[];n=A(n);for(var T=n.next();!T.done;T=n.next()){T=T.value,a.push(T);var I=e.h.get(T),M=T.startTime<=s&&T.endTime>s,L=I?I.gg:null;I&&(f.push(I.je),I.Wc&&f.push(I.Wc),M||(d=!0,e.h.delete(T),I=null)),M&&(g.push(T),I?kE(e,L)||(d=!0):(ME(e,T,a),I=e.h.get(T),L=I.gg,d=!0)),0<T.nestedCues.length&&L&&Ph(e,T.nestedCues,L,s,a),a.pop()}if(d){for(s=A(f),a=s.next();!a.done;a=s.next())a=a.value,a.parentElement&&a.parentElement.removeChild(a);for(g.sort(function(N,O){return N.startTime!=O.startTime?N.startTime-O.startTime:N.endTime-O.endTime}),g=A(g),T=g.next();!T.done;T=g.next())s=e.h.get(T.value),s.Wc?(r.appendChild(s.Wc),s.Wc.appendChild(s.je)):r.appendChild(s.je)}}function Bu(e,n){if(e.g){var r=e.F.currentTime;if(!e.j||n!==void 0&&n){n=A(e.s.values());for(var s=n.next();!s.done;s=n.next())ju(s.value);ju(e.g),e.h.clear(),e.s.clear()}if(e.j){n=new Map,s=A(e.h.keys());for(var a=s.next();!a.done;a=s.next())a=a.value,n.set(a,e.h.get(a));Ph(e,e.i,e.g,r,[])}}}function ME(e,n,r){var s=1<r.length,a=s?"span":"div";n.lineBreak&&(a="br"),s=!s&&0<n.nestedCues.length;var d=We(a);if(a!="br"&&_E(e,d,n,r,s),r=null,n.region&&n.region.id)if(r=n.region,a=r.id+"_"+r.width+"x"+r.height+(r.heightUnits==hi?"%":"px")+"-"+r.viewportAnchorX+"x"+r.viewportAnchorY+(r.viewportAnchorUnits==hi?"%":"px"),e.s.has(a))r=e.s.get(a);else{var f=We("span"),g=r.heightUnits==hi?"%":"px",T=r.widthUnits==hi?"%":"px",I=r.viewportAnchorUnits==hi?"%":"px";f.id="shaka-text-region---"+a,f.classList.add("shaka-text-region"),f.style.height=r.height+g,f.style.width=r.width+T,f.style.position="absolute",f.style.top=r.viewportAnchorY+I,f.style.left=r.viewportAnchorX+I,f.style.display="flex",f.style.flexDirection="column",f.style.alignItems="center",f.style.justifyContent=n.displayAlign=="before"?"flex-start":n.displayAlign=="center"?"center":"flex-end",e.s.set(a,f),r=f}a=d,s&&(a=We("span"),a.classList.add("shaka-text-wrapper"),a.style.backgroundColor=n.backgroundColor,d.appendChild(a)),e.h.set(n,{je:d,gg:a,Wc:r})}function _E(e,n,r,s,a){var d=n.style,f=r.nestedCues.length==0,g=1<s.length;d.whiteSpace="pre-wrap";var T=r.payload.replace(/\s+$/g,function(M){return" ".repeat(M.length)});if(d.webkitTextStrokeColor=r.textStrokeColor,d.webkitTextStrokeWidth=r.textStrokeWidth,d.color=r.color,d.direction=r.direction,d.opacity=r.opacity,d.paddingLeft=Mm(r.linePadding,r,e.m),d.paddingRight=Mm(r.linePadding,r,e.m),d.textShadow=r.textShadow,r.backgroundImage)d.backgroundImage="url('"+r.backgroundImage+"')",d.backgroundRepeat="no-repeat",d.backgroundSize="contain",d.backgroundPosition="center",d.width="100%",d.height="100%";else{if(r.nestedCues.length)var I=n;else I=We("span"),n.appendChild(I);r.border&&(I.style.border=r.border),a||((n=Oh(s,function(M){return M.backgroundColor}))?I.style.backgroundColor=n:T&&(I.style.backgroundColor="rgba(0, 0, 0, 0.8)")),T&&(I.textContent=T)}g&&!s[s.length-1].isContainer?d.display="inline":(d.display="flex",d.flexDirection="column",d.alignItems="center",d.justifyContent=r.displayAlign=="before"?"flex-start":r.displayAlign=="center"?"center":"flex-end"),f||(d.margin="0"),d.fontFamily=r.fontFamily,d.fontWeight=r.fontWeight.toString(),d.fontStyle=r.fontStyle,d.letterSpacing=r.letterSpacing,d.fontSize=Mm(r.fontSize,r,e.m),r.line!=null&&r.lineInterpretation==1&&(d.position="absolute",r.writingMode==Wo?(d.width="100%",r.lineAlign==ks?d.top=r.line+"%":r.lineAlign=="end"&&(d.bottom=100-r.line+"%")):r.writingMode=="vertical-lr"?(d.height="100%",r.lineAlign==ks?d.left=r.line+"%":r.lineAlign=="end"&&(d.right=100-r.line+"%")):(d.height="100%",r.lineAlign==ks?d.right=r.line+"%":r.lineAlign=="end"&&(d.left=100-r.line+"%"))),d.lineHeight=r.lineHeight,r.position!=null&&(r.writingMode==Wo?d.paddingLeft=r.position:d.paddingTop=r.position),r.positionAlign=="line-left"?d.cssFloat="left":r.positionAlign=="line-right"&&(d.cssFloat="right"),d.textAlign=r.textAlign,d.textDecoration=r.textDecoration.join(" "),d.writingMode=r.writingMode,"writingMode"in document.documentElement.style&&d.writingMode==r.writingMode||(d.webkitWritingMode=r.writingMode),r.size&&(r.writingMode==Wo?d.width=r.size+"%":d.height=r.size+"%")}function Mm(e,n,r){var s=(s=new RegExp(/(\d*\.?\d+)([a-z]+|%+)/).exec(e))?{value:Number(s[1]),unit:s[2]}:null;if(!s)return e;var a=s.value;switch(s.unit){case"%":return a/100*r.clientHeight/n.cellResolution.rows+"px";case"c":return r.clientHeight*a/n.cellResolution.rows+"px";default:return e}}function Oh(e,n){for(var r=e.length-1;0<=r;r--){var s=n(e[r]);if(s||s===0)return s}return null}pe("shaka.text.UITextDisplayer",Gi),Gi.prototype.setTextVisibility=Gi.prototype.setTextVisibility,Gi.prototype.isTextVisible=Gi.prototype.isTextVisible,Gi.prototype.remove=Gi.prototype.remove,Gi.prototype.destroy=Gi.prototype.destroy,Gi.prototype.append=Gi.prototype.append;function RE(e,n){function r(d){for(var f=d,g=A(n),T=g.next();!T.done;T=g.next())T=T.value,T.end&&T.start<d&&(f+=T.end-T.start);return d=Math.floor(f/3600),g=Math.floor(f/60%60),T=Math.floor(f%60),f=Math.floor(1e3*f%1e3),(10>d?"0":"")+d+":"+(10>g?"0":"")+g+":"+(10>T?"0":"")+T+"."+(100>f?10>f?"00":"0":"")+f}var s=Dh(e,[]);e="WEBVTT\n\n",s=A(s);for(var a=s.next();!a.done;a=s.next())a=a.value,e+=r(a.startTime)+" --> "+r(a.endTime)+function(d){var f=[];switch(d.textAlign){case"left":f.push("align:left");break;case"right":f.push("align:right");break;case Ui:f.push("align:middle");break;case"start":f.push("align:start");break;case"end":f.push("align:end")}switch(d.writingMode){case"vertical-lr":f.push("vertical:lr");break;case"vertical-rl":f.push("vertical:rl")}return f.length?" "+f.join(" "):""}(a)+"\n",e+=a.payload+"\n\n";return e}pe("shaka.text.WebVttGenerator",function(){});function _m(e,n){this.h=e,this.g=n,this.j="",this.s=void 0,this.i=!1,this.m=!0,this.l=!1}function Rm(e,n,r){try{if(e.g.enabled){var s={d:1e3*r.duration,st:e.h.T()?pl:fl};s.ot=LE(r);var a=s.ot===hl||s.ot===Ic||s.ot===Vi||s.ot===Cc;a&&(s.bl=Nm(e,r.type)),r.bandwidth&&(s.br=r.bandwidth/1e3),a&&s.ot!==Cc&&(s.tb=Dm(e,s.ot)/1e3),dl(e,n,s)}}catch(d){Kn("CMCD_SEGMENT_ERROR","Could not generate segment CMCD data.",d)}}function Lm(e,n,r){try{if(!e.g.enabled)return n;var s=cl(e);e:{switch(r){case"video/webm":case"video/mp4":var a=Vi;break e;case"application/x-mpegurl":a=jh;break e}a=void 0}s.ot=a,s.su=!0;var d=Uh(s);return Sc(n,d)}catch(f){return Kn("CMCD_SRC_ERROR","Could not generate src CMCD data.",f),n}}function cl(e){return e.j||(e.j=e.g.sessionId||S.crypto.randomUUID()),{v:1,sf:e.s,sid:e.j,cid:e.g.contentId,mtp:e.h.getBandwidthEstimate()/1e3}}function dl(e,n,r){r=r===void 0?{}:r;var s=s===void 0?e.g.useHeaders:s;if(e.g.enabled){Object.assign(r,cl(e)),r.pr=e.h.xb();var a=r.ot===hl||r.ot===Vi;if(e.l&&a&&(r.bs=!0,r.su=!0,e.l=!1),r.su==null&&(r.su=e.m),s)e=NE(r),Object.keys(e).length&&Object.assign(n.headers,e);else{var d=Uh(r);d&&(n.uris=n.uris.map(function(f){return Sc(f,d)}))}}}function LE(e){var n=e.type;if(e.init)return h1;if(n=="video")return e.codecs.includes(",")?Vi:hl;if(n=="audio")return Ic;if(n=="text")return e.mimeType==="application/mp4"?Cc:Fu}function Nm(e,n){if(n=e.h.jb()[n],!n.length)return NaN;var r=e.h.getCurrentTime();return(e=n.find(function(s){return s.start<=r&&s.end>=r}))?1e3*(e.end-r):NaN}function Dm(e,n){var r=e.h.Qa();if(!r.length)return NaN;e=r[0],r=A(r);for(var s=r.next();!s.done;s=r.next())s=s.value,s.type==="variant"&&s.bandwidth>e.bandwidth&&(e=s);switch(n){case hl:return e.videoBandwidth||NaN;case Ic:return e.audioBandwidth||NaN;default:return e.bandwidth}}function Uh(e){function n(L){return 100*r(L/100)}function r(L){return Math.round(L)}function s(L){return!Number.isNaN(L)&&L!=null&&L!==""&&L!==!1}var a=[],d={br:r,d:r,bl:n,dl:n,mtp:n,nor:function(L){return encodeURIComponent(L)},rtp:n,tb:r},f=Object.keys(e||{}).sort();f=A(f);for(var g=f.next();!g.done;g=f.next()){g=g.value;var T=e[g];if(s(T)&&(g!=="v"||T!==1)&&(g!="pr"||T!==1)){var I=d[g];I&&(T=I(T)),I=typeof T;var M=void 0;M=I==="string"&&g!=="ot"&&g!=="sf"&&g!=="st"?g+"="+JSON.stringify(T):I==="boolean"?g:I==="symbol"?g+"="+T.description:g+"="+T,a.push(M)}}return a.join(",")}function NE(e){var n=Object.keys(e),r={},s=["Object","Request","Session","Status"],a=[{},{},{},{}],d={br:0,d:0,ot:0,tb:0,bl:1,dl:1,mtp:1,nor:1,nrr:1,su:1,cid:2,pr:2,sf:2,sid:2,st:2,v:2,bs:3,rtp:3};n=A(n);for(var f=n.next();!f.done;f=n.next())f=f.value,a[d[f]!=null?d[f]:1][f]=e[f];for(e=0;e<a.length;e++)(d=Uh(a[e]))&&(r["CMCD-"+s[e]]=d);return r}function Sc(e,n){return!n||e.includes("offline:")?e:(e=new Pi(e),e.g.set("CMCD",n),e.toString())}var jh="m",Ic="a",hl="v",Vi="av",h1="i",Fu="c",Cc="tt",fl="v",pl="l";pe("shaka.util.CmcdManager.StreamingFormat",{ai:"d",si:"h",Zi:"s",Ji:"o"});function bm(){}function kc(e,n,r,s,a){var d=a in s,f=!0,g;for(g in n){var T=a+"."+g,I=d?s[a]:r[g];d||g in r?n[g]===void 0?I===void 0||d?delete e[g]:e[g]=Su(I):I.constructor==Object&&n[g]&&n[g].constructor==Object?(e[g]||(e[g]=Su(I)),T=kc(e[g],n[g],I,s,T),f=f&&T):typeof n[g]!=typeof I||n[g]==null||typeof n[g]!="function"&&n[g].constructor!=I.constructor?(Rn("Invalid config, wrong type for "+T),f=!1):(typeof r[g]=="function"&&r[g].length!=n[g].length&&ze("Unexpected number of arguments for "+T),e[g]=n[g]):(Rn("Invalid config, unrecognized key "+T),f=!1)}return f}function zu(e,n){for(var r={},s=r,a=0,d=0;a=e.indexOf(".",a),!(0>a);)(a==0||e[a-1]!="\\")&&(d=e.substring(d,a).replace(/\\\./g,"."),s[d]={},s=s[d],d=a+1),a+=1;return s[e.substring(d).replace(/\\\./g,".")]=n,r}function Mc(e,n){return e&&n}pe("shaka.util.ConfigUtils",bm),bm.convertToConfigObject=zu,bm.mergeConfigObjects=kc;function so(){}function f1(e){return e=$r(e),new Pi(e).ab}function Gu(e,n,r){function s(g){Ln(d).setUint32(f,g.byteLength,!0),f+=4,d.set(Tt(g),f),f+=g.byteLength}if(!r||!r.byteLength)throw new se(2,6,6015);var a;typeof n=="string"?a=_a(n,!0):a=n,e=$r(e),e=_a(e,!0);var d=new Uint8Array(12+e.byteLength+a.byteLength+r.byteLength),f=0;return s(e),s(a),s(r),d}pe("shaka.util.FairPlayUtils",so),so.commonFairPlayResponse=function(e,n){if(e===2){try{var r=Bt(n.data)}catch(a){return}e=!1,r=r.trim(),r.substr(0,5)==="<ckc>"&&r.substr(-6)==="</ckc>"&&(r=r.slice(5,-6),e=!0);try{var s=JSON.parse(r);s.ckc&&(r=s.ckc,e=!0),s.CkcMessage&&(r=s.CkcMessage,e=!0),s.License&&(r=s.License,e=!0)}catch(a){}e&&(n.data=ji(wo(r)))}},so.conaxFairPlayRequest=function(e,n){e===2&&(n.headers["Content-Type"]="application/octet-stream")},so.ezdrmFairPlayRequest=function(e,n){e===2&&(n.headers["Content-Type"]="application/octet-stream")},so.verimatrixFairPlayRequest=function(e,n){e===2&&(e=Tt(n.body),e=gu(e),n.headers["Content-Type"]="application/x-www-form-urlencoded",n.body=fi("spc="+e))},so.conaxInitDataTransform=function(e,n,r){if(n!=="skd")return e;n=r.serverCertificate,r=$r(e).split("skd://").pop().split("?").shift(),r=S.atob(r);var s=new ArrayBuffer(2*r.length);s=new Uint16Array(s);for(var a=0,d=r.length;a<d;a++)s[a]=r.charCodeAt(a);return Gu(e,s,n)},so.ezdrmInitDataTransform=function(e,n,r){return n!=="skd"?e:(n=r.serverCertificate,r=$r(e).split(";").pop(),Gu(e,r,n))},so.verimatrixInitDataTransform=function(e,n,r){return n!=="skd"?e:(n=r.serverCertificate,r=$r(e).split("skd://").pop(),Gu(e,r,n))},so.initDataTransform=Gu,so.defaultGetContentId=f1,so.isFairPlaySupported=function(){var e;return j(function(n){return n.g==1?(e={initDataTypes:["cenc","sinf","skd"],videoCapabilities:[{contentType:'video/mp4; codecs="avc1.42E01E"'}]},ye(n,2),k(n,navigator.requestMediaKeySystemAccess("com.apple.fps",[e]),4)):n.g!=2?n.return(!0):(we(n),n.return(!1))})};function Bh(){}function Ae(){var e=1/0;navigator.connection&&navigator.connection.saveData&&(e=360);var n={retryParameters:es(),servers:{},clearKeys:{},advanced:{},delayLicenseRequestUntilPlayed:!1,initDataTransform:function(f,g,T){return T.keySystem=="com.apple.fps.1_0"&&g=="skd"&&(g=T.serverCertificate,T=f1(f),f=Gu(f,T,g)),f},logLicenseExchange:!1,updateExpirationTime:1,preferredKeySystems:[],keySystemsMapping:{},parseInbandPsshEnabled:ka()},r={retryParameters:es(),availabilityWindowOverride:NaN,disableAudio:!1,disableVideo:!1,disableText:!1,disableThumbnails:!1,defaultPresentationDelay:0,segmentRelativeVttTiming:!1,dash:{clockSyncUri:"",ignoreDrmInfo:!1,disableXlinkProcessing:!1,xlinkFailGracefully:!1,ignoreMinBufferTime:!1,autoCorrectDrift:!0,initialSegmentLimit:1e3,ignoreSuggestedPresentationDelay:!1,ignoreEmptyAdaptationSet:!1,ignoreMaxSegmentDuration:!1,keySystemsByURI:{"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:e2719d58-a985-b3c9-781a-b030af78d30e":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:79f0049a-4098-8642-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb":"com.adobe.primetime"},manifestPreprocessor:function(f){return Mc([f],f)},sequenceMode:!1},hls:{ignoreTextStreamFailures:!1,ignoreImageStreamFailures:!1,defaultAudioCodec:"mp4a.40.2",defaultVideoCodec:"avc1.42E01E",ignoreManifestProgramDateTime:!1,mediaPlaylistFullMimeType:'video/mp2t; codecs="avc1.42E01E, mp4a.40.2"',useSafariBehaviorForLive:!0,liveSegmentsDelay:3}},s={retryParameters:es(),failureCallback:function(f){return Mc([f])},rebufferingGoal:2,bufferingGoal:10,bufferBehind:30,ignoreTextStreamFailures:!1,alwaysStreamText:!1,startAtSegmentBoundary:!1,gapDetectionThreshold:.5,durationBackoff:1,forceTransmux:!1,safeSeekOffset:5,stallEnabled:!0,stallThreshold:1,stallSkip:.1,useNativeHlsOnSafari:!0,inaccurateManifestTolerance:2,lowLatencyMode:!1,autoLowLatencyMode:!1,forceHTTPS:!1,preferNativeHls:!1,updateIntervalSeconds:1,dispatchAllEmsgBoxes:!1,observeQualityChanges:!1,maxDisabledTime:30,parsePrftBox:!1};(zt("Web0S")||Yo()||zt("CrKey"))&&(s.stallSkip=0);var a={trackSelectionCallback:function(f){return j(function(g){return g.return(f)})},downloadSizeCallback:function(f){var g;return j(function(T){return T.g==1?navigator.storage&&navigator.storage.estimate?k(T,navigator.storage.estimate(),3):T.return(!0):(g=T.h,T.return(g.usage+f<.95*g.quota))})},progressCallback:function(f,g){return Mc([f,g])},usePersistentLicense:!0,numberOfParallelDownloads:5},d={drm:n,manifest:r,streaming:s,mediaSource:{sourceBufferExtraFeatures:""},offline:a,abrFactory:function(){return new qt},abr:{enabled:!0,useNetworkInformation:!0,defaultBandwidthEstimate:1e6,switchInterval:8,bandwidthUpgradeTarget:.85,bandwidthDowngradeTarget:.95,restrictions:{minWidth:0,maxWidth:1/0,minHeight:0,maxHeight:e,minPixels:0,maxPixels:1/0,minFrameRate:0,maxFrameRate:1/0,minBandwidth:0,maxBandwidth:1/0},advanced:{minTotalBytes:128e3,minBytes:16e3,fastHalfLife:2,slowHalfLife:5},restrictToElementSize:!1,restrictToScreenSize:!1,ignoreDevicePixelRatio:!1},autoShowText:3,preferredAudioLanguage:"",preferredTextLanguage:"",preferredVariantRole:"",preferredTextRole:"",preferredAudioChannelCount:2,preferredVideoCodecs:[],preferredAudioCodecs:[],preferForcedSubs:!1,preferredDecodingAttributes:[],restrictions:{minWidth:0,maxWidth:1/0,minHeight:0,maxHeight:1/0,minPixels:0,maxPixels:1/0,minFrameRate:0,maxFrameRate:1/0,minBandwidth:0,maxBandwidth:1/0},playRangeStart:0,playRangeEnd:1/0,textDisplayFactory:function(){return null},cmcd:{enabled:!1,sessionId:"",contentId:"",useHeaders:!1},lcevc:{enabled:!1,dynamicPerformanceScaling:!0,logLevel:0,drawLogo:!1}};return a.trackSelectionCallback=function(f){return j(function(g){return g.return(DE(f,d.preferredAudioLanguage))})},d}function ds(e,n,r){var s={".drm.keySystemsMapping":"",".drm.servers":"",".drm.clearKeys":"",".drm.advanced":{distinctiveIdentifierRequired:!1,persistentStateRequired:!1,videoRobustness:"",audioRobustness:"",sessionType:"",serverCertificate:new Uint8Array(0),serverCertificateUri:"",individualizationServer:""}};return kc(e,n,r||Ae(),s,"")}function DE(e,n){var r=e.filter(function(f){return f.type=="variant"}),s=[],a=bd(n,r.map(function(f){return f.language}));a&&(s=r.filter(function(f){return At(f.language)==a})),s.length==0&&(s=r.filter(function(f){return f.primary})),s.length==0&&(r.map(function(f){return f.language}),s=r);var d=s.filter(function(f){return f.height&&480>=f.height});for(d.length&&(d.sort(function(f,g){return g.height-f.height}),s=d.filter(function(f){return f.height==d[0].height})),n=[],s.length&&(r=Math.floor(s.length/2),s.sort(function(f,g){return f.bandwidth-g.bandwidth}),n.push(s[r])),e=A(e),s=e.next();!s.done;s=e.next())s=s.value,s.type!=yt&&s.type!="image"||n.push(s);return n}pe("shaka.util.PlayerConfiguration",Bh),Bh.mergeConfigObjects=ds,Bh.createDefault=Ae;function yn(){this.g=null,this.h=[]}function Fh(e,n){if(e.g==null)e.g={timestamp:Date.now()/1e3,state:n,duration:0};else{var r=Date.now()/1e3;e.g.duration=r-e.g.timestamp,e.g.state!=n&&(e.h.push(e.g),e.g={timestamp:r,state:n,duration:0})}}function Pm(e,n){var r=0;e.g&&e.g.state==n&&(r+=e.g.duration),e=A(e.h);for(var s=e.next();!s.done;s=e.next())s=s.value,r+=s.state==n?s.duration:0;return r}function p1(e){function n(d){return{timestamp:d.timestamp,state:d.state,duration:d.duration}}for(var r=[],s=A(e.h),a=s.next();!a.done;a=s.next())r.push(n(a.value));return e.g&&r.push(n(e.g)),r}function bE(){this.i=this.h=null,this.g=[]}function Om(e,n,r){e.i!=n&&(e.i=n,e.g.push({timestamp:Date.now()/1e3,id:n.id,type:"text",fromAdaptation:r,bandwidth:null}))}function g1(){this.C=this.F=this.I=this.G=this.B=this.j=this.H=this.m=this.i=this.O=this.P=this.J=this.K=this.M=this.l=this.s=NaN,this.g=new yn,this.h=new bE}function Ce(e,n){vt.call(this);var r=this;this.l=Pc,this.Bd=this.g=null,this.aa=!1,this.Id=new Ve,this.gb=new Ve,this.B=new Ve,this.fb=this.i=this.Kd=this.K=this.j=this.ka=this.M=this.lf=this.V=this.sa=this.O=this.Dd=this.J=this.Za=this.F=this.I=this.m=this.H=null,this.Nc=!1,this.$e=this.C=null,this.hf=1e9,this.h=hs(this),this.Qc={width:1/0,height:1/0},this.s=null,this.La=new Zr(this.h.preferredAudioLanguage,this.h.preferredVariantRole,this.h.preferredAudioChannelCount),this.Xa=this.h.preferredTextLanguage,this.Kc=this.h.preferredTextRole,this.Ec=this.h.preferForcedSubs,this.vb=[],this.Rc=null,n&&n(this),this.H=S1(this),this.H.Ne(this.h.streaming.forceHTTPS),this.G=null,Wu&&(this.G=Wu()),this.Id.o(S,"online",function(){r.Fe()}),this.P={name:"detach"},this.X={name:"attach"},this.$={name:"unload"},this.jf={name:"manifest-parser"},this.gf={name:"manifest"},this.Ya={name:"media-source"},this.df={name:"drm-engine"},this.Z={name:"load"},this.fe={name:"src-equals-drm-engine"},this.$a={name:"src-equals"};var s=new Map;s.set(this.X,function(a,d){return Ao(UE(r,a,d))}),s.set(this.P,function(a){return a.mediaElement&&(r.gb.Rb(),a.mediaElement=null),r.G&&r.G.release(),r.g=null,a=Promise.resolve(),Ao(a)}),s.set(this.$,function(a){return Ao(Um(r,a))}),s.set(this.Ya,function(a){return a=v1(r,a),Ao(a)}),s.set(this.jf,function(a,d){return a=y1(r,a,d),Ao(a)}),s.set(this.gf,function(a){return jE(r,a)}),s.set(this.df,function(a){return a=x1(r,a),Ao(a)}),s.set(this.Z,function(a,d){return Ao(BE(r,a,d))}),s.set(this.fe,function(a,d){return a=FE(r,a,d),Ao(a)}),s.set(this.$a,function(a,d){return zE(r,a,d)}),this.ua=new Fi(this.P,{Sg:function(a,d,f,g){var T=null;return a==r.P&&(T=f==r.P?r.P:r.X),a==r.X&&(T=f==r.P||d.mediaElement!=g.mediaElement?r.P:f==r.X?r.X:f==r.Ya||f==r.Z?r.Ya:f==r.$a?r.fe:null),a==r.Ya&&(T=f==r.Z&&d.mediaElement==g.mediaElement?r.jf:r.$),a==r.jf&&(T=wl(r.Z,r.gf,r.$,f,d,g)),a==r.gf&&(T=wl(r.Z,r.df,r.$,f,d,g)),a==r.df&&(T=wl(r.Z,r.Z,r.$,f,d,g)),a==r.fe&&(T=f==r.$a&&d.mediaElement==g.mediaElement?r.$a:r.$),(a==r.Z||a==r.$a)&&(T=r.$),a==r.$&&(T=g.mediaElement&&d.mediaElement==g.mediaElement?r.X:r.P),T},xg:function(a,d,f){return r.dispatchEvent(xn("onstatechange",new Map().set("state",a.name))),s.get(a)(d,f)},handleError:function(a){return j(function(d){return d.g==1?k(d,Um(r,a),2):d.return(a.mediaElement?r.X:r.P)})},nh:function(a){r.dispatchEvent(xn("onstateidle",new Map().set("state",a.name)))}}),this.kf=new Qe(function(){ql(r.i.variants,r.h.restrictions,r.Qc)&&qh(r)}),e&&this.Bc(e,!0)}Te(Ce,vt);function zh(e){e.M!=null&&(e.M.release(),e.M=null)}function PE(e,n){if(n.lcevc.enabled){var r=e.Qa();r&&r[0]&&r[0].videoMimeType==pt.ts&&(navigator.userAgent.match(/Edge?\//)||navigator.userAgent.match(/Edge\//))&&(n.streaming.forceTransmux||ze("LCEVC Warning: For MPEG-2 TS decoding the config.streaming.forceTransmux must be enabled.")),zh(e),e.M==null&&(e.M=new as(e.g,e.lf,n.lcevc),e.I&&(e.I.G=e.M))}else zh(e)}function xn(e,n){return new Fe(e,n)}v=Ce.prototype,v.destroy=function(){var e=this,n;return j(function(r){switch(r.g){case 1:return e.l==it?r.return():(zh(e),e.l=it,n=ll(e.ua,function(){return{node:e.P,payload:El(),Jb:!1}}),k(r,new Promise(function(s){n.mc=function(){},n.Ed=function(){s()},n.Qb=function(){s()},n.onError=function(){s()},n.Gd=function(){s()}}),2));case 2:return k(r,e.ua.destroy(),3);case 3:if(e.Id&&(e.Id.release(),e.Id=null),e.gb&&(e.gb.release(),e.gb=null),e.B&&(e.B.release(),e.B=null),e.$e=null,e.C=null,e.h=null,e.s=null,e.Bd=null,e.V=null,!e.H){r.D(4);break}return k(r,e.H.destroy(),5);case 5:e.H=null;case 4:vt.prototype.release.call(e),le(r)}})};function m1(){if(S.Promise||ze("A Promise implementation or polyfill is required"),!(S.Promise&&S.Uint8Array&&Array.prototype.forEach)||zt("Trident/"))return!1;var e=jd();return e&&13>e||!(S.MediaKeys&&S.navigator&&S.navigator.requestMediaKeySystemAccess&&S.MediaKeySystemAccess&&S.MediaKeySystemAccess.prototype.getConfiguration)?!1:Ci()?!0:Xo("application/x-mpegurl")}v.Bc=function(e,n){if(n=n===void 0?!0:n,this.l==it)return Promise.reject(Ro());var r=El();r.mediaElement=e,Ci()||(n=!1);var s=n?this.Ya:this.X;return e=ll(this.ua,function(){return{node:s,payload:r,Jb:!1}}),e.mc=function(){},Qh(e)},v.qf=function(e){this.lf=e},v.detach=function(){var e=this;if(this.l==it)return Promise.reject(Ro());var n=ll(this.ua,function(){return{node:e.P,payload:El(),Jb:!1}});return n.mc=function(){},Qh(n)},v.bf=function(e){var n=this;if(e=e===void 0?!0:e,this.l==it)return Promise.reject(Ro());this.Nc=!1,Ci()||(e=!1),zh(this);var r=El(),s=ll(this.ua,function(a){var d=a.mediaElement&&e?n.Ya:a.mediaElement?n.X:n.P;return r.mediaElement=a.mediaElement,{node:d,payload:r,Jb:!1}});return s.mc=function(){},Qh(s)},v.Ph=function(e){this.Rc=e},v.load=function(e,n,r){var s=this;if(this.Rc=null,this.Nc=!1,this.l==it)return Promise.reject(Ro());this.dispatchEvent(xn("loading"));var a=El();a.uri=e,a.Ue=Date.now()/1e3,r&&(a.mimeType=r),n!==void 0&&(a.startTime=n);var d=OE(this,a)?this.$a:this.Z,f=ll(this.ua,function(g){return g.mediaElement==null?null:(a.mediaElement=g.mediaElement,{node:d,payload:a,Jb:!0})});return this.s=new g1,this.V=VE(this),f.mc=function(){},new Promise(function(g,T){f.Gd=function(){return T(new se(2,7,7002))},f.Ed=function(){g(),s.dispatchEvent(xn("loaded"))},f.Qb=function(){return T(Ro())},f.onError=function(I){return T(I)}})};function OE(e,n){if(!Ci())return!0;var r=n.mimeType,s=n.uri||"";if(r||(r=bs(s),r=pt[r]),r){if((n.mediaElement||Zv()).canPlayType(r)=="")return!1;if(!Ci()||!(r in or||bs(s)in Ps)||e.h.streaming.preferNativeHls)return!0;if(pu())return e.h.streaming.useNativeHlsOnSafari}return!1}function UE(e,n,r){return n.mediaElement==null&&(n.mediaElement=r.mediaElement,e.gb.o(n.mediaElement,"error",function(){var s=zs(e);s&&lr(e,s)})),e.g=n.mediaElement,Promise.resolve()}function Um(e,n){var r,s,a,d,f,g,T,I,M;return j(function(L){switch(L.g){case 1:return e.l!=it&&(e.l=Pc),r=e.vb.map(function(N){return N()}),e.vb=[],k(L,Promise.all(r),2);case 2:if(e.dispatchEvent(xn("unloading")),n.mimeType=null,n.startTime=null,n.uri=null,e.sa&&(e.sa.release(),e.sa=null),n.mediaElement&&e.B.Rb(),e.kf.stop(),e.Za&&(e.Za.release(),e.Za=null),e.Dd&&(e.Dd.stop(),e.Dd=null),!e.K){L.D(3);break}return k(L,e.K.stop(),4);case 4:e.K=null,e.Kd=null;case 3:if(!e.C){L.D(5);break}return k(L,e.C.stop(),5);case 5:if(!e.j){L.D(7);break}return k(L,e.j.destroy(),8);case 8:e.j=null;case 7:if(e.J&&(e.J.release(),e.J=null),e.F&&(e.F.release(),e.F=null),!e.I){L.D(9);break}return k(L,e.I.destroy(),10);case 10:e.I=null;case 9:if(e.G&&e.G.onAssetUnload(),!n.mediaElement||!n.mediaElement.src){L.D(11);break}return k(L,new Promise(function(N){return new Qe(N).R(.1)}),12);case 12:for(n.mediaElement.removeAttribute("src"),n.mediaElement.load();n.mediaElement.lastChild;)n.mediaElement.removeChild(n.mediaElement.firstChild);case 11:if(!e.m){L.D(13);break}return k(L,e.m.destroy(),14);case 14:e.m=null;case 13:if(e.fb=null,e.O=null,e.i){for(s=A(e.i.variants),a=s.next();!a.done;a=s.next())for(d=a.value,f=A([d.audio,d.video]),g=f.next();!g.done;g=f.next())(T=g.value)&&T.segmentIndex&&T.segmentIndex.release();for(I=A(e.i.textStreams),g=I.next();!g.done;g=I.next())M=g.value,M.segmentIndex&&M.segmentIndex.release()}e.i=null,e.s=new g1,e.ef=null,Wh(e),le(L)}})}function v1(e,n){var r,s,a,d,f;return j(function(g){if(g.g==1)return r=e.h.textDisplayFactory,s=r(),e.ef=r,a=gl(n.mediaElement,s,function(T,I,M){w1(e,T,I,M)},e.M),a.configure(e.h.mediaSource),d=e.h.manifest,f=d.segmentRelativeVttTiming,a.J=f,k(g,a.K,2);e.I=a,le(g)})}function y1(e,n,r){var s,a,d,f;return j(function(g){if(g.g==1)return n.mimeType=r.mimeType,n.uri=r.uri,s=n.uri,a=e.H,e.fb=s,d=e,k(g,My(s,a,e.h.manifest.retryParameters,n.mimeType),2);d.Kd=g.h,e.K=e.Kd(),f=Su(e.h.manifest),r.mediaElement&&r.mediaElement.nodeName==="AUDIO"&&(f.disableVideo=!0),e.K.configure(f),le(g)})}function jE(e,n){var r=n.uri;n=e.H,e.sa=new Tm(function(){return e.Ja()}),e.sa.addEventListener("regionadd",function(d){d=d.region,Ku(e,"timelineregionadded",d),e.G&&e.G.onDashTimedMetadata(d)}),e.ka=null,e.h.streaming.observeQualityChanges&&(e.ka=new cs(function(){return e.jb()}),e.ka.addEventListener("qualitychange",function(d){var f=d.quality;d=d.position,f=new Map().set("mediaQuality",{bandwidth:f.bandwidth,audioSamplingRate:f.audioSamplingRate,codecs:f.codecs,contentType:f.contentType,frameRate:f.frameRate,height:f.height,mimeType:f.mimeType,channelsCount:f.channelsCount,pixelAspectRatio:f.pixelAspectRatio,width:f.width}).set("position",d),e.dispatchEvent(xn("mediaqualitychanged",f))}));var s={networkingEngine:n,modifyManifestRequest:function(d,f){var g=e.V;try{g.g.enabled&&(g.s=f.format,dl(g,d,{ot:jh,su:!g.i}))}catch(T){Kn("CMCD_MANIFEST_ERROR","Could not generate manifest CMCD data.",T)}},modifySegmentRequest:function(d,f){Rm(e.V,d,f)},filter:function(d){return xl(e,d)},makeTextStreamsForClosedCaptions:function(d){return Kh(e,d)},onTimelineRegionAdded:function(d){var f=e.sa;e:{for(var g=A(f.g),T=g.next();!T.done;T=g.next())if(T=T.value,T.schemeIdUri==d.schemeIdUri&&T.id==d.id&&T.startTime==d.startTime&&T.endTime==d.endTime){g=T;break e}g=null}g==null&&(f.g.add(d),d=new Fe("regionadd",new Map([["region",d]])),f.dispatchEvent(d))},onEvent:function(d){return e.dispatchEvent(d)},onError:function(d){return lr(e,d)},isLowLatencyMode:function(){return e.h.streaming.lowLatencyMode},isAutoLowLatencyMode:function(){return e.h.streaming.autoLowLatencyMode},enableLowLatencyMode:function(){e.configure("streaming.lowLatencyMode",!0)},updateDuration:function(){e.j&&e.j.updateDuration()},newDrmInfo:function(d){var f=e.m?e.m.g:null;f&&e.m.C&&Hh(e,f.keySystem,d)}},a=Date.now()/1e3;return new jt(function(){var d,f,g,T;return j(function(I){if(I.g==1)return d=e,k(I,e.K.start(r,s),2);if(d.i=I.h,f=xn("manifestparsed"),e.dispatchEvent(f),e.i.variants.length==0)throw new se(2,4,4036);_c(e.i),g=Date.now()/1e3,T=g-a,e.s.H=T,le(I)})}(),function(){return e.K.stop()})}function x1(e,n){var r,s;return j(function(a){return a.g==1?(r=Date.now()/1e3,s=!0,e.m=A1(e,{Ob:e.H,onError:function(d){lr(e,d)},Fd:function(d){Xh(e,d)},onExpirationUpdated:function(d,f){Rr(e,d,f)},onEvent:function(d){e.dispatchEvent(d),d.type=="drmsessionupdate"&&s&&(s=!1,e.s.j=Date.now()/1e3-r,e.M&&(d=e.M,d.g&&d.h.classList.add("shaka-hidden")))}}),e.m.configure(e.h.drm),k(a,Ha(e.m,e.i.variants,e.i.offlineSessionIds),2)):a.g!=3?k(a,e.m.Bc(n.mediaElement),3):k(a,xl(e,e.i),0)})}function BE(e,n,r){var s,a,d,f,g,T,I,M,L,N,O,z,$,G,W,ae,J;return j(function(fe){switch(fe.g){case 1:for(n.startTime=r.startTime,e.Rc!=null&&(n.startTime=e.Rc,e.Rc=null),s=n.mediaElement,a=n.uri,e.fb=a,e.J=new bu({wd:function(){return s.playbackRate},td:function(){return s.defaultPlaybackRate},Pe:function(xe){s.playbackRate=xe},Of:function(xe){s.currentTime+=xe}}),d=function(){return Nc(e)},f=function(){return Lc(e)},e.B.o(s,"playing",d),e.B.o(s,"pause",d),e.B.o(s,"ended",d),e.B.o(s,"ratechange",f),PE(e,e.h),g=e.h.abrFactory,e.C&&e.$e==g||(e.$e=g,e.C=g(),typeof e.C.setMediaElement!="function"&&(xg("AbrManager","Please use an AbrManager with setMediaElement function."),e.C.setMediaElement=function(){}),e.C.configure(e.h.abr)),e.La=new Zr(e.h.preferredAudioLanguage,e.h.preferredVariantRole,e.h.preferredAudioChannelCount),e.Xa=e.h.preferredTextLanguage,e.Kc=e.h.preferredTextRole,e.Ec=e.h.preferForcedSubs,Yh(e.i.presentationTimeline,e.h.playRangeStart,e.h.playRangeEnd),e.C.init(function(xe,Se,Me){e.j&&xe!=e.j.l&&fs(e,xe,!0,Se===void 0?!1:Se,Me===void 0?0:Me)}),e.C.setMediaElement(s),iy(e.i,e.h.preferredVideoCodecs,e.h.preferredAudioCodecs,e.h.preferredAudioChannelCount,e.h.preferredDecodingAttributes),e.j=C1(e),e.j.configure(e.h.streaming),e.l=Hi,s.textTracks&&e.B.o(s.textTracks,"addtrack",function(xe){if(xe.track)switch(xe=xe.track,xe.kind){case"chapters":Bm(e,xe)}}),e.dispatchEvent(xn("streaming")),T=null,(I=e.j.l)||(T=qh(e)),M=[],L=I||T,N=A([L.video,L.audio]),O=N.next();!O.done;O=N.next())(z=O.value)&&!z.segmentIndex&&M.push(z.createSegmentIndex());if(!(0<M.length)){fe.D(2);break}return k(fe,Promise.all(M),2);case 2:if(e.F=Fm(e,n.startTime),e.Za=I1(e),$=Math.max(e.i.minBufferTime,e.h.streaming.rebufferingGoal),Gh(e,$),I){fe.D(4);break}if(fs(e,T,!0,!1,0),!e.h.streaming.startAtSegmentBoundary){fe.D(5);break}return G=e.F.kd(),k(fe,_r(T,G),6);case 6:W=fe.h,e.F.ie(W);case 5:Km(e,null,wu(T));case 4:return e.F.ge(),ae=e.yb().find(function(xe){return xe.active}),ae||((J=$l(e.i.textStreams,e.Xa,e.Kc,e.Ec)[0]||null)&&Om(e.s.h,J,!0),T&&(J?(T.audio&&R1(e,T.audio,J)&&(e.aa=!0),e.aa&&e.I.m.setTextVisibility(!0),Vu(e)):e.aa=!1),J&&(e.h.streaming.alwaysStreamText||e.Nb())&&_h(e.j,J)),k(fe,e.j.start(),7);case 7:e.h.abr.enabled&&(e.C.enable(),Wm(e)),cg(e.j?e.j.l:null,e.i),cr(e.i),ar(e),Tl(e),e.i.variants.some(function(xe){return xe.primary}),e.Nc=!0,e.B.Da(s,"loadedmetadata",function(){e.s.m=Date.now()/1e3-r.Ue}),le(fe)}})}function FE(e,n,r){var s,a,d,f,g,T,I;return j(function(M){return M.g==1?(s=$e,a=Date.now()/1e3,d=!0,e.m=A1(e,{Ob:e.H,onError:function(L){lr(e,L)},Fd:function(L){Xh(e,L)},onExpirationUpdated:function(L,N){Rr(e,L,N)},onEvent:function(L){e.dispatchEvent(L),L.type=="drmsessionupdate"&&d&&(d=!1,e.s.j=Date.now()/1e3-a)}}),e.m.configure(e.h.drm),f=r.uri||"",g=bs(f),T=pt[g],T=="application/x-mpegurl"&&pu()&&(T="application/vnd.apple.mpegurl"),T||(T="video/mp4"),I={id:0,language:"und",disabledUntilTime:0,primary:!1,audio:null,video:{id:0,originalId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:null,mimeType:r.mimeType?r.mimeType.split(";")[0]:T,codecs:r.mimeType?ey(r.mimeType):"",encrypted:!0,drmInfos:[],keyIds:new Set,language:"und",label:null,type:s.Ma,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null},bandwidth:100,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]},e.m.V=!0,k(M,Ha(e.m,[I],[]),2)):k(M,e.m.Bc(n.mediaElement),0)})}function zE(e,n,r){function s(){return Nc(e)}n.uri=r.uri,n.startTime=r.startTime,e.fb=n.uri;var a=n.mediaElement;e.F=new Jy(a);var d=!1;e.vb.push(function(){d=!0}),n.startTime!=null&&e.F.ie(n.startTime),e.J=new bu({wd:function(){return a.playbackRate},td:function(){return a.defaultPlaybackRate},Pe:function(T){a.playbackRate=T},Of:function(T){a.currentTime+=T}}),Gh(e,e.h.streaming.rebufferingGoal),e.B.o(a,"playing",s),e.B.o(a,"pause",s),e.B.o(a,"ended",s),e.B.o(a,"ratechange",function(){return Lc(e)}),a.preload!="none"&&e.B.Da(a,"loadedmetadata",function(){e.s.m=Date.now()/1e3-r.Ue}),a.audioTracks&&(e.B.o(a.audioTracks,"addtrack",function(){return ar(e)}),e.B.o(a.audioTracks,"removetrack",function(){return ar(e)}),e.B.o(a.audioTracks,"change",function(){return ar(e)})),a.textTracks&&(e.B.o(a.textTracks,"addtrack",function(T){if(T.track)switch(T=T.track,T.kind){case"metadata":GE(e,T);break;case"chapters":Bm(e,T);break;default:ar(e)}}),e.B.o(a.textTracks,"removetrack",function(){return ar(e)}),e.B.o(a.textTracks,"change",function(){return ar(e)}));var f=bs(n.uri);a.src=Lm(e.V,n.uri,pt[f]),(Yo()||zt("Web0S"))&&a.load(),e.l=dr,e.dispatchEvent(xn("streaming"));var g=new bt;return Du(a,HTMLMediaElement.HAVE_METADATA,e.B,function(){e.F.ge(),g.resolve()}),Du(a,HTMLMediaElement.HAVE_CURRENT_DATA,e.B,function(){var T;return j(function(I){if(I.g==1)return T1(e),T=ml(e),T.find(function(M){return M.mode!="disabled"})?I.D(2):k(I,new Promise(function(M){e.B.Da(a.textTracks,"change",M),new Qe(M).R(1)}),2);if(d)return I.return();jm(e),le(I)})}),a.error?g.reject(zs(e)):a.preload=="none"&&(ze('With <video preload="none">, the browser will not load anything until play() is called. We are unable to measure load latency in a meaningful way, and we cannot provide track info yet. Please do not use preload="none" with Shaka Player.'),g.resolve()),e.B.Da(a,"error",function(){g.reject(zs(e))}),new jt(g,function(){return g.reject(new se(2,7,7001)),Promise.resolve()}).ia(function(){e.Nc=!0})}function T1(e){var n=e.h.preferredAudioLanguage;if(n!=""){e.Md(n);var r=e.h.preferredVariantRole;r!=""&&e.Md(n,r)}}function jm(e){var n=e.h.preferredTextLanguage,r=e.h.preferForcedSubs;if(n!=""){e.Ie(n,"",r);var s=e.h.preferredTextRole;s!=""&&e.Ie(n,s,r)}}function GE(e,n){if(n.kind=="metadata"){n.mode="hidden",e.B.o(n,"cuechange",function(){if(n.activeCues)for(var s=A(n.activeCues),a=s.next();!a.done;a=s.next())a=a.value,E1(e,a.startTime,a.endTime,a.type,a.value),e.G&&e.G.onCueMetadataChange(a.value)});var r=new Qe(function(){var s=zm(e);s=A(s);for(var a=s.next();!a.done;a=s.next())a.value.mode="hidden"}).za().R(.5);e.vb.push(function(){r.stop()})}}function w1(e,n,r,s){n=A(n);for(var a=n.next();!a.done;a=n.next())if(a=a.value,a.data&&a.cueTime&&a.frames){var d=a.cueTime+r,f=s;f&&d>f&&(f=d);for(var g=A(a.frames),T=g.next();!T.done;T=g.next())E1(e,d,f,"org.id3",T.value);e.G&&e.G.onHlsTimedMetadata(a,d)}}function E1(e,n,r,s,a){n=new Map().set("startTime",n).set("endTime",r).set("metadataType",s).set("payload",a),e.dispatchEvent(xn("metadata",n))}function Bm(e,n){if(n&&n.kind=="chapters"){n.mode="hidden";var r=new Qe(function(){n.mode="hidden"}).za().R(.5);e.vb.push(function(){r.stop()})}}function _c(e){function n(r){return r.video&&r.audio||r.video&&r.video.codecs.includes(",")}e.variants.some(n)&&(e.variants=e.variants.filter(n))}function A1(e,n){return new Ka(n,e.h.drm.updateExpirationTime)}function S1(e){return new Ot(function(n,r){e.C&&e.C.segmentDownloaded(n,r)},function(n,r,s){n=new Map().set("headers",n).set("request",r).set("requestType",s),e.dispatchEvent(xn("downloadheadersreceived",n))},function(n,r,s,a){n=new Map().set("request",n).set("error",r).set("httpResponseCode",s).set("aborted",a),e.dispatchEvent(xn("downloadfailed",n))})}function Fm(e,n){return new Ch(e.g,e.i,e.h.streaming,n,function(){e.Za&&ol(e.Za,!0),e.j&&e.j.Xc(),e.O&&Vh(e)},function(r){return e.dispatchEvent(r)})}function I1(e){var n=new Mh(e.sa);n.addEventListener("enter",function(s){Ku(e,"timelineregionenter",s.region)}),n.addEventListener("exit",function(s){Ku(e,"timelineregionexit",s.region)}),n.addEventListener("skip",function(s){var a=s.region;s.seeking||(Ku(e,"timelineregionenter",a),Ku(e,"timelineregionexit",a))});var r=new js(e.g);return r.g.add(n),e.ka&&r.g.add(e.ka),r}function Gh(e,n){e.O=new dt,e.O.g=Jo,wg(e.O,n,Math.min(.5,n/2)),Wh(e),e.Dd=new Qe(function(){Vh(e)}).ea(.25)}function Vh(e){switch(e.l){case dr:if(e.g.ended)var n=!0;else{var r=el(e.g.buffered);n=r!=null&&r>=e.g.duration-1}break;case Hi:e:if(e.g.ended||em(e.I))n=!0;else{if(e.i.presentationTimeline.T()){r=e.i.presentationTimeline.Ib();var s=el(e.g.buffered);if(s!=null&&s>=r){n=!0;break e}}n=!1}break;default:n=!1}s=yh(e.g.buffered,e.g.currentTime),r=e.O;var a=n,d=r.h.get(r.g);n=r.g,s=a||s>=d?kt:Jo,r.g=s,n!=s&&Wh(e)}function gl(e,n,r,s){return new Us(e,n,r,s)}function VE(e){return new _m({getBandwidthEstimate:function(){return e.C?e.C.getBandwidthEstimate():NaN},jb:function(){return e.jb()},getCurrentTime:function(){return e.g?e.g.currentTime:0},Qa:function(){return e.Qa()},xb:function(){return e.xb()},T:function(){return e.T()}},e.h.cmcd)}function C1(e){return new n1(e.i,{vd:function(){return e.F?e.F.kd():0},getBandwidthEstimate:function(){return e.C.getBandwidthEstimate()},modifySegmentRequest:function(n,r){Rm(e.V,n,r)},U:e.I,Ob:e.H,onError:function(n){return lr(e,n)},onEvent:function(n){return e.dispatchEvent(n)},ph:function(){e.K&&e.K.update&&e.K.update()},Ce:function(n,r,s){e.F&&e.F.Pf(),Vh(e),n=new Map().set("start",n).set("end",r).set("contentType",s),e.dispatchEvent(xn("segmentappended",n))},oh:function(n,r){(r=r.we)&&e.ka&&xm(e.ka,r,n)},tf:function(n,r){var s=e.m;if(s.h.parseInbandPsshEnabled&&["audio","video"].includes(n)){r=new Io(Tt(r));var a=0,d=A(r.data);for(n=d.next();!n.done;n=d.next())a+=n.value.length;if(a==0)s=Promise.resolve();else{for(a=new Uint8Array(a),d=0,r=A(r.data),n=r.next();!n.done;n=r.next())n=n.value,a.set(n,d),d+=n.length;oc(s,"cenc",a),s=s.s}}else s=Promise.resolve();return s},qh:function(n,r,s){w1(e,n,r,s)}})}v.configure=function(e,n){arguments.length==2&&typeof e=="string"&&(e=zu(e,n)),e.streaming&&"forceTransmuxTS"in e.streaming&&(xg("streaming.forceTransmuxTS configuration","Please Use streaming.forceTransmux instead."),e.streaming.forceTransmux=e.streaming.forceTransmuxTS,delete e.streaming.forceTransmuxTS),e.streaming&&e.streaming.lowLatencyMode&&(e.streaming.inaccurateManifestTolerance==null&&(e.streaming.inaccurateManifestTolerance=0),e.streaming.rebufferingGoal==null&&(e.streaming.rebufferingGoal=.01));var r=ds(this.h,e,hs(this));return k1(this),r};function k1(e){if(e.K){var n=Su(e.h.manifest);e.g&&e.g.nodeName==="AUDIO"&&(n.disableVideo=!0),e.K.configure(n)}if(e.m&&e.m.configure(e.h.drm),e.j){e.j.configure(e.h.streaming);try{_1(e,e.i)}catch(d){lr(e,d)}e.C&&Tl(e),n=e.j.l,!n||n.allowedByApplication&&n.allowedByKeySystem||_o(e)}if(e.H&&e.H.Ne(e.h.streaming.forceHTTPS),e.I&&(e.I.configure(e.h.mediaSource),e.I.J=e.h.manifest.segmentRelativeVttTiming,n=e.h.textDisplayFactory,e.ef!=n)){var r=n(),s=e.I,a=s.m;s.m=r,a&&(r.setTextVisibility(a.isTextVisible()),a.destroy()),s.g&&(s.g.i=r),e.ef=n,e.j&&(n=e.j,(r=n.j.get(yt))&&ul(n,r.stream,!0,0,!0))}e.C&&(e.C.configure(e.h.abr),e.h.abr.enabled?e.C.enable():e.C.disable(),Wm(e)),e.O&&(n=e.h.streaming.rebufferingGoal,e.i&&(n=Math.max(n,e.i.minBufferTime)),wg(e.O,n,Math.min(.5,n/2))),e.i&&Yh(e.i.presentationTimeline,e.h.playRangeStart,e.h.playRangeEnd)}v.getConfiguration=function(){var e=hs(this);return ds(e,this.h,hs(this)),e},v.Ag=function(){if(this.g){var e=this.g.buffered.length;e=e?this.g.buffered.end(e-1):0;var n=this.getConfiguration().streaming.bufferingGoal;if(n=Math.min(this.g.currentTime+n,this.Ja().end),e>=n)return 1;if(!(e<=this.g.currentTime)&&e<n)return(e-this.g.currentTime)/(n-this.g.currentTime)}return 0},v.Ch=function(){for(var e in this.h)delete this.h[e];ds(this.h,hs(this),hs(this)),k1(this)},v.If=function(){return this.l},v.Rg=function(){return this.g},v.Hc=function(){return this.H},v.le=function(){return this.fb},v.sd=function(){return this.G?this.G:null},v.T=function(){return this.i?this.i.presentationTimeline.T():this.g&&this.g.src?this.g.duration==1/0:!1},v.Lb=function(){return this.i?this.i.presentationTimeline.Lb():!1},v.hc=function(){if(this.i){var e=this.i.variants;return e.length?!e[0].video:!1}return this.g&&this.g.src?this.g.videoTracks?this.g.videoTracks.length==0:this.g.videoHeight==0:!1},v.Ja=function(){if(!this.Nc)return{start:0,end:0};if(this.i){var e=this.i.presentationTimeline;return{start:e.dc(),end:e.kb()}}return this.g&&this.g.src&&(e=this.g.seekable,e.length)?{start:e.start(0),end:e.end(e.length-1)}:{start:0,end:0}},v.dh=function(){this.T()&&(this.g.currentTime=this.Ja().end)},v.keySystem=function(){var e=this.drmInfo();return e?e.keySystem:""},v.drmInfo=function(){return this.m?this.m.g:null},v.Gc=function(){return this.m?this.m.Gc():1/0},v.ud=function(){return this.m?this.m.ud():{}},v.Pc=function(){return this.O?this.O.g==Jo:!1},v.xb=function(){return this.g?this.J?this.J.i:1:0},v.Ze=function(e){e==0?ze("A trick play rate of 0 is unsupported!"):(this.g.paused&&this.g.play(),this.J.set(e),this.l==Hi&&(this.C.playbackRateChanged(e),r1(this.j,1<Math.abs(e))))},v.vf=function(){var e=this.J.td();this.l==dr&&this.J.set(e),this.l==Hi&&(this.J.set(e),this.C.playbackRateChanged(e),r1(this.j,!1))},v.Qa=function(){if(this.i){for(var e=this.j?this.j.l:null,n=[],r=0,s=A(this.i.variants),a=s.next();!a.done;a=s.next())if(a=a.value,Eu(a)){var d=wu(a);d.active=a==e,d.active||r==1||e==null||a.video!=e.video||a.audio!=e.audio||(d.active=!0),d.active&&r++,n.push(d)}return n}return this.g&&this.g.audioTracks?Array.from(this.g.audioTracks).map(function(f){return qd(f)}):[]},v.yb=function(){if(this.i){for(var e=this.j?this.j.s:null,n=[],r=A(this.i.textStreams),s=r.next();!s.done;s=r.next()){s=s.value;var a=Wd(s);a.active=s==e,n.push(a)}return n}return this.g&&this.g.src&&this.g.textTracks?ml(this).map(function(d){return Yl(d)}):[]},v.Jg=function(){return this.i?this.i.imageStreams.map(function(e){return fg(e)}):[]},v.Zg=function(e,n){var r=this,s,a,d,f,g,T,I,M,L,N,O,z,$,G,W,ae,J,fe,xe,Se;return j(function(Me){return Me.g==1?r.i?(s=r.i.imageStreams.find(function(Oe){return Oe.id==e}))?s.segmentIndex?Me.D(3):k(Me,s.createSegmentIndex(),3):Me.return(null):Me.D(2):Me.g!=2?(a=s.segmentIndex.find(n),a==null||(d=s.segmentIndex.get(a),f=d.tilesLayout||s.tilesLayout,g=/(\d+)x(\d+)/.exec(f),!g)?Me.return(null):(T=s.width||0,I=s.height||0,M=parseInt(g[1],10),L=parseInt(g[2],10),N=T/M,O=I/L,z=M*L,$=d.j-d.startTime,G=d.B||$/z,W=d.startTime,J=ae=0,1<z&&(fe=Math.floor((n-d.startTime)/G),W=d.startTime+fe*G,ae=fe%M*N,J=Math.floor(fe/M)*O),xe=!1,(Se=d.s)&&(xe=!0,O=Se.height,ae=Se.positionX,J=Se.positionY,N=Se.width),Me.return({imageHeight:I,imageWidth:T,height:O,positionX:ae,positionY:J,startTime:W,duration:G,uris:d.Pa(),width:N,sprite:xe}))):Me.return(null)})},v.Je=function(e){if(this.i&&this.j){var n=this.i.textStreams.find(function(s){return s.id==e.id});n&&n!=this.j.s&&(Om(this.s.h,n,!1),_h(this.j,n),bc(this),this.Xa=n.language)}else if(this.g&&this.g.src&&this.g.textTracks){n=ml(this),n=A(n);for(var r=n.next();!r.done;r=n.next())r=r.value,pg(r)==e.id?r.mode=this.aa?"showing":"hidden":r.mode="disabled";bc(this)}},v.Ke=function(e,n,r){if(n=n===void 0?!1:n,r=r===void 0?0:r,this.i&&this.j){this.h.abr.enabled&&ze("Changing tracks while abr manager is enabled will likely result in the selected track being overriden. Consider disabling abr before calling selectVariantTrack().");var s=this.i.variants.find(function(a){return a.id==e.id});s&&Eu(s)&&(fs(this,s,!1,n,r),this.La=new $d(s),Tl(this))}else if(this.g&&this.g.audioTracks){for(n=Array.from(this.g.audioTracks),n=A(n),r=n.next();!r.done;r=n.next())if(r=r.value,pg(r)==e.id){Dc(this,r);break}}},v.zg=function(){return $h(this.Qa())},v.Xg=function(){return $h(this.yb())},v.yg=function(){return Array.from(qm(this.Qa()))},v.Wg=function(){return Array.from(qm(this.yb()))},v.Md=function(e,n,r){if(r=r===void 0?0:r,this.i&&this.F){this.La=new Zr(e,n||"",r,""),n=function(g,T){return g.video||T.video?g.video&&T.video?Math.abs((g.video.height||0)-(T.video.height||0))+Math.abs((g.video.width||0)-(T.video.width||0)):1/0:0},e=this.j.l;var s=this.La.create(this.i.variants);r=null,s=A(s.values());for(var a=s.next();!a.done;a=s.next())a=a.value,(!r||n(r,e)>n(a,e))&&(r=a);r?(n=wu(r),this.Ke(n,!0)):_o(this)}else if(this.g&&this.g.audioTracks){a=Array.from(this.g.audioTracks),e=At(e),s=r=null,a=A(a);for(var d=a.next();!d.done;d=a.next()){d=d.value;var f=qd(d);At(f.language)==e&&(r=d,n?f.roles.includes(n)&&(s=d):f.roles.length==0&&(s=d))}s?Dc(this,s):r&&Dc(this,r)}},v.Ie=function(e,n,r){if(r=r===void 0?!1:r,this.i&&this.F)this.Xa=e,this.Kc=n||"",this.Ec=r,(e=$l(this.i.textStreams,this.Xa,this.Kc,this.Ec)[0]||null)&&e!=this.j.s&&(Om(this.s.h,e,!1),this.h.streaming.alwaysStreamText||this.Nb())&&(_h(this.j,e),bc(this));else{var s=At(e);(e=this.yb().find(function(a){return At(a.language)==s&&(!n||a.roles.includes(n))&&a.forced==r}))&&this.Je(e)}},v.Fh=function(e){if(this.i&&this.F){for(var n=null,r=A(this.i.variants),s=r.next();!s.done;s=r.next())if(s=s.value,s.audio.label==e){n=s;break}n!=null&&(this.La=new Zr(n.language,"",0,e),_o(this))}},v.Nb=function(){var e=this.aa;return this.I?this.I.m.isTextVisible():this.g&&this.g.src&&this.g.textTracks?ml(this).some(function(n){return n.mode=="showing"}):e},v.Gf=function(){return this.g&&this.g.src&&this.g.textTracks?M1(this).map(function(e){return Yl(e)}):[]},v.Cg=function(e){var n=At(e),r=M1(this).filter(function(g){return At(g.language)==n});if(!r||!r.length)return[];e=[];var s=new Set;r=A(r);for(var a=r.next();!a.done;a=r.next())if((a=a.value)&&a.cues){a=A(a.cues);for(var d=a.next();!d.done;d=a.next()){var f=d.value;(d=f.id)&&d!=""||(d=f.startTime+"-"+f.endTime+"-"+f.text),f={id:d,title:f.text,startTime:f.startTime,endTime:f.endTime},s.has(d)||(e.push(f),s.add(d))}}return e};function ml(e){return Array.from(e.g.textTracks).filter(function(n){return n.kind!="metadata"&&n.kind!="chapters"&&n.label!="Shaka Player TextTrack"})}function zm(e){return Array.from(e.g.textTracks).filter(function(n){return n.kind=="metadata"})}function M1(e){return Array.from(e.g.textTracks).filter(function(n){return n.kind=="chapters"})}v.Se=function(e){if(e=!!e,this.aa!=e){if(this.aa=e,this.l==Hi)this.I.m.setTextVisibility(e),this.h.streaming.alwaysStreamText||(e?this.j.s||(e=$l(this.i.textStreams,this.Xa,this.Kc,this.Ec),0<e.length&&(_h(this.j,e[0]),bc(this))):i1(this.j));else if(this.g&&this.g.src&&this.g.textTracks){var n=ml(this);n=A(n);for(var r=n.next();!r.done;r=n.next())r=r.value,r.mode!="disabled"&&(r.mode=e?"showing":"hidden")}Vu(this)}},v.Tg=function(){if(!this.T())return null;var e=this.ua.l,n=0;if(this.F)n=this.F.kd();else if(e){if(e.startTime==null)return new Date;n=e.startTime}return this.i?new Date(1e3*(this.i.presentationTimeline.i+n)):this.g&&this.g.getStartDate?(e=this.g.getStartDate(),isNaN(e.getTime())?null:new Date(e.getTime()+1e3*n)):null},v.Jf=function(){if(!this.T())return null;if(this.i)return new Date(1e3*this.i.presentationTimeline.i);if(this.g&&this.g.getStartDate){var e=this.g.getStartDate();return isNaN(e.getTime())?null:e}return null},v.jb=function(){if(this.l==Hi)return this.I.jb();var e={total:[],audio:[],video:[],text:[]};return this.l==dr&&(e.total=us(this.g.buffered)),e},v.getStats=function(){if(this.l!=Hi&&this.l!=dr)return{width:NaN,height:NaN,streamBandwidth:NaN,decodedFrames:NaN,droppedFrames:NaN,corruptedFrames:NaN,stallsDetected:NaN,gapsJumped:NaN,estimatedBandwidth:NaN,completionPercent:NaN,loadLatency:NaN,manifestTimeSeconds:NaN,drmTimeSeconds:NaN,playTime:NaN,pauseTime:NaN,bufferingTime:NaN,licenseTime:NaN,liveLatency:NaN,maxSegmentDuration:NaN,switchHistory:[],stateHistory:[]};Nc(this);var e=this.g,n=e.currentTime/e.duration;if(!isNaN(n)){var r=this.s;n=Math.round(100*n),r.i=isNaN(r.i)?n:Math.max(r.i,n)}if(this.F&&(this.s.O=this.F.mf(),this.s.P=this.F.nf()),e.getVideoPlaybackQuality){r=e.getVideoPlaybackQuality(),n=this.s;var s=Number(r.totalVideoFrames);n.M=Number(r.droppedVideoFrames),n.K=s,this.s.J=Number(r.corruptedVideoFrames)}this.m?(r=this.m,r=r.J?r.J:NaN):r=NaN,this.s.B=r,this.l==Hi&&((r=this.j.l)&&(this.s.F=(this.J?this.J.i:1)*r.bandwidth),r&&r.video&&(n=this.s,s=r.video.height||NaN,n.s=r.video.width||NaN,n.l=s),this.T()&&(r=this.Jf().valueOf()+1e3*this.Ja().end,this.s.G=(Date.now()-r)/1e3),this.i&&this.i.presentationTimeline&&(this.s.I=this.i.presentationTimeline.g),r=this.C.getBandwidthEstimate(),this.s.C=r),this.l==dr&&(r=this.s,n=e.videoHeight||NaN,r.s=e.videoWidth||NaN,r.l=n);var a=this.s;e=a.s,r=a.l,n=a.F,s=a.K;var d=a.M,f=a.J,g=a.P,T=a.O,I=a.C,M=a.i,L=a.m,N=a.H,O=a.j,z=Pm(a.g,"playing"),$=Pm(a.g,"paused"),G=Pm(a.g,"buffering"),W=a.B,ae=a.G,J=a.I,fe=p1(a.g),xe=[];a=A(a.h.g);for(var Se=a.next();!Se.done;Se=a.next())Se=Se.value,xe.push({timestamp:Se.timestamp,id:Se.id,type:Se.type,fromAdaptation:Se.fromAdaptation,bandwidth:Se.bandwidth});return{width:e,height:r,streamBandwidth:n,decodedFrames:s,droppedFrames:d,corruptedFrames:f,stallsDetected:g,gapsJumped:T,estimatedBandwidth:I,completionPercent:M,loadLatency:L,manifestTimeSeconds:N,drmTimeSeconds:O,playTime:z,pauseTime:$,bufferingTime:G,licenseTime:W,liveLatency:ae,maxSegmentDuration:J,stateHistory:fe,switchHistory:xe}},v.lg=function(e,n,r,s,a,d,f){f=f===void 0?!1:f;var g=this,T,I,M,L,N,O,z,$,G,W,ae;return j(function(J){switch(J.g){case 1:if(g.l!=Hi&&g.l!=dr)throw new se(1,7,7004);if(s){J.D(2);break}return k(J,Rc(g,e),3);case 3:s=J.h;case 2:if(T=[],g.G)try{T=g.G.getServerSideCuePoints()}catch(fe){}if(g.l!=dr){J.D(4);break}return f&&(r="forced"),k(J,Gm(g,e,n,r,s,d||"",T),5);case 5:if(I=g.yb(),M=I.find(function(fe){return fe.language==n&&fe.label==(d||"")&&fe.kind==r}))return ar(g),J.return(M);throw new se(1,2,2012);case 4:if(L=$e,N=g.i.presentationTimeline.getDuration(),N==1/0)throw new se(1,4,4033);if(!T.length){J.D(6);break}return k(J,vl(g,e,g.H,g.h.streaming.retryParameters),7);case 7:O=J.h,z=yl(g,O,s,T),$=new Blob([z],{type:"text/vtt"}),e=Tc($),s="text/vtt";case 6:if(G={id:g.hf++,originalId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:ym(0,N,[e]),mimeType:s||"",codecs:a||"",kind:r,encrypted:!1,drmInfos:[],keyIds:new Set,language:n,label:d||null,type:L.ha,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],forced:!!f,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null},W=Qr(G.mimeType,G.codecs),ae=Gd(W),!ae)throw new se(2,2,2014,s);return g.i.textStreams.push(G),ar(g),J.return(Wd(G))}})},v.mg=function(e,n){var r=this,s,a,d,f,g,T,I,M,L,N,O,z,$,G,W,ae;return j(function(J){switch(J.g){case 1:if(r.l!=Hi&&r.l!=dr)throw new se(1,7,7004);if(r.l==dr)throw new se(1,2,2016);if(n){J.D(2);break}return k(J,Rc(r,e),3);case 3:n=J.h;case 2:if(n!="text/vtt")throw new se(1,2,2017,e);if(s=$e,a=r.i.presentationTimeline.getDuration(),a==1/0)throw new se(1,4,4045);return k(J,vl(r,e,r.H,r.h.streaming.retryParameters),4);case 4:if(d=J.h,f=Nn[n],!f)throw new se(2,2,2014,n);for(g=f(),T={periodStart:0,segmentStart:0,segmentEnd:a,vttOffset:0},I=Tt(d),M=g.parseMedia(I,T),L=[],N={},O=A(M),z=O.next();!z.done;N={uc:N.uc},z=O.next())$=z.value,N.uc=Ai([e],[$.payload])[0],G=new ft($.startTime,$.endTime,function(fe){return function(){return[fe.uc]}}(N),0,null,null,0,0,1/0),N.uc.includes("#xywh")&&(W=N.uc.split("#xywh=")[1].split(","),W.length===4&&G.$f({height:parseInt(W[3],10),positionX:parseInt(W[0],10),positionY:parseInt(W[1],10),width:parseInt(W[2],10)})),L.push(G);return ae={id:r.hf++,originalId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new Rt(L),mimeType:n||"",codecs:"",kind:"",encrypted:!1,drmInfos:[],keyIds:new Set,language:"und",label:null,type:s.Ac,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,tilesLayout:"1x1"},r.i.imageStreams.push(ae),ar(r),J.return(fg(ae))}})},v.kg=function(e,n,r){var s=this,a,d,f,g;return j(function(T){switch(T.g){case 1:if(s.l!=Hi&&s.l!=dr)throw new se(1,7,7004);if(r){T.D(2);break}return k(T,Rc(s,e),3);case 3:r=T.h;case 2:if(a=[],s.G)try{a=s.G.getServerSideCuePoints()}catch(I){}return k(T,Gm(s,e,n,"chapters",r,"",a),4);case 4:if(d=T.h,f=s.Gf(),g=f.find(function(I){return I.language==n}),!g){T.D(5);break}return k(T,new Promise(function(I,M){s.B.Da(d,"load",I),s.B.Da(d,"error",function(){M(new se(1,2,2015))})}),6);case 6:return T.return(g);case 5:throw new se(1,2,2012)}})};function Rc(e,n){var r,s;return j(function(a){switch(a.g){case 1:return r=bs(n),(s=Jh[r])?a.return(s):(ye(a,2),k(a,Dg(n,e.H,e.h.streaming.retryParameters),4));case 4:s=a.h,_e(a,3);break;case 2:we(a);case 3:if(s)return a.return(s);throw new se(1,2,2011,r)}})}function Gm(e,n,r,s,a,d,f){var g,T,I,M;return j(function(L){if(L.g==1)return a!="text/vtt"||f.length?k(L,vl(e,n,e.H,e.h.streaming.retryParameters),3):L.D(2);L.g!=2&&(g=L.h,T=yl(e,g,a,f),I=new Blob([T],{type:"text/vtt"}),n=Tc(I),a="text/vtt"),M=document.createElement("track");var N=e.V,O=n;try{if(N.g.enabled){var z=cl(N);z.ot=Fu,z.su=!0;var $=Uh(z),G=Sc(O,$)}else G=O}catch(W){Kn("CMCD_TEXT_TRACK_ERROR","Could not generate text track CMCD data.",W),G=O}return M.src=G,M.label=d,M.kind=s,M.srclang=r,e.g.getAttribute("crossorigin")||e.g.setAttribute("crossorigin","anonymous"),e.g.appendChild(M),L.return(M)})}function vl(e,n,r,s){var a,d,f;return j(function(g){if(g.g==1){a=ts,d=Ct([n],s),d.method="GET";var T=e.V;try{T.g.enabled&&dl(T,d,{ot:Fu,su:!0})}catch(I){Kn("CMCD_TEXT_ERROR","Could not generate text CMCD data.",I)}return k(g,r.request(a,d).promise,2)}return f=g.h,g.return(f.data)})}function yl(e,n,r,s){var a=Nn[r];if(a)return r=a(),e={periodStart:0,segmentStart:0,segmentEnd:e.g.duration,vttOffset:0},n=Tt(n),n=r.parseMedia(n,e),RE(n,s);throw new se(2,2,2014,r)}v.Oe=function(e,n){this.Qc.width=e,this.Qc.height=n},v.Fe=function(e){if(this.l==Hi){var n=this.j;if(e=e===void 0?.1:e,n.h.g)n=!1;else if(n.B)n=!1;else{for(var r=A(n.j.values()),s=r.next();!s.done;s=r.next())s=s.value,!s.Mc||s.Ia||s.eb||(s.Mc=!1,Mr(n,s,e));n=!0}}else n=!1;return n},v.Og=function(){return ze("Shaka Player's internal Manifest structure is NOT covered by semantic versioning compatibility guarantees.  It may change at any time!  Please consider filing a feature request for whatever you use getManifest() for."),this.i},v.Pg=function(){return this.Kd};function hs(e){var n=Ae();return n.streaming.failureCallback=function(r){if(e.T()){var s=null;r.code==1001||r.code==1002?s=1:r.code==1003&&(s=.1),s!=null&&(r.severity=1,e.Fe(s))}},n.textDisplayFactory=function(){return e.Bd?new Gi(e.g,e.Bd):new si(e.g)},n}v.Te=function(e){this.Bd=e};function Kh(e,n){for(var r=new Set,s=A(n.textStreams),a=s.next();!a.done;a=s.next())a=a.value,a.mimeType!="application/cea-608"&&a.mimeType!="application/cea-708"||r.add(a.originalId);for(s=A(n.variants),a=s.next();!a.done;a=s.next())if((a=a.value.video)&&a.closedCaptions){for(var d=A(a.closedCaptions.keys()),f=d.next();!f.done;f=d.next())if(f=f.value,!r.has(f)){var g=f.startsWith("CC")?"application/cea-608":"application/cea-708",T=new pn;g={id:e.hf++,originalId:f,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:T,mimeType:g,codecs:"",kind:"caption",encrypted:!1,drmInfos:[],keyIds:new Set,language:a.closedCaptions.get(f),label:null,type:yt,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:a.roles,forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null},n.textStreams.push(g),r.add(f)}}}function xl(e,n){return j(function(r){if(r.g==1)return k(r,Vm(e,n),2);_1(e,n),le(r)})}function Vm(e,n){var r;return j(function(s){if(s.g==1)return r=e.j?e.j.l:null,k(s,ag(r,n),2);cr(n),le(s)})}function _1(e,n){if(e.l!=it){ql(n.variants,e.h.restrictions,e.Qc)&&e.j&&ar(e);var r=e.m?e.m.g:null;if(r&&e.m.C)for(var s=A(n.variants),a=s.next();!a.done;a=s.next())a=a.value,Hh(e,r.keySystem,a.video),Hh(e,r.keySystem,a.audio);Ki(e,n)}}function Hh(e,n,r){if(r){r=A(r.drmInfos);for(var s=r.next();!s.done;s=r.next())if(s=s.value,s.keySystem==n){s=A(s.initData||[]);for(var a=s.next();!a.done;a=s.next())a=a.value,oc(e.m,a.initDataType,a.initData)}}}function _r(e,n){var r,s,a,d,f;return j(function(g){return g.g==1?(r=e.audio,s=e.video,a=function(T,I){var M,L,N;return j(function(O){return O.g==1?T?k(O,T.createSegmentIndex(),2):O.return(null):(L=(M=T.segmentIndex.bc(I))?M.next().value:null,L?(N=L.startTime,O.return(N)):O.return(null))})},k(g,a(r,n),2)):g.g!=3?(d=g.h,k(g,a(s,n),3)):(f=g.h,f!=null&&d!=null?g.return(Math.max(f,d)):f!=null?g.return(f):d!=null?g.return(d):g.return(n))})}function Wh(e){var n=e.Pc();if(e.s&&e.O&&e.F){var r=e.J;r.j=n,wc(r),e.V&&(r=e.V,n||r.i||(r.i=!0),r.i&&n&&(r.l=!0),r.m=n),Nc(e)}n=new Map().set("buffering",n),e.dispatchEvent(xn("buffering",n))}function Lc(e){var n=e.g.playbackRate;n!=0&&(e.J&&e.J.set(n),n=xn("ratechange"),e.dispatchEvent(n))}function Nc(e){if(e.s&&e.O){var n=e.s.g;e.O.g==Jo?Fh(n,"buffering"):e.g.paused?Fh(n,"paused"):e.g.ended?Fh(n,"ended"):Fh(n,"playing")}}function Tl(e){try{Ki(e,e.i)}catch(r){return lr(e,r),!1}var n=e.i.variants.filter(function(r){return Eu(r)});return n=e.La.create(n),e.C.setVariants(Array.from(n.values())),!0}function qh(e){return Tl(e)?e.C.chooseVariant():null}function _o(e){var n=qh(e);n&&fs(e,n,!0,!0,0)}function fs(e,n,r,s,a){var d=e.j.l;if(n==d)s&&o1(e.j,n,s,a,!0);else{var f=e.s.h;f.h!=n&&(f.h=n,f.g.push({timestamp:Date.now()/1e3,id:n.id,type:"variant",fromAdaptation:r,bandwidth:n.bandwidth})),o1(e.j,n,s,a,void 0,r),s=null,d&&(s=wu(d)),n=wu(n),r?Km(e,s,n):Hm(e,s,n)}}function Dc(e,n){var r=Array.from(e.g.audioTracks).find(function(s){return s.enabled});n.enabled=!0,n.id!==r.id&&(r.enabled=!1),r=qd(r),n=qd(n),Hm(e,r,n)}function R1(e,n,r){if(e.h.autoShowText==0)return!1;if(e.h.autoShowText==1)return!0;var s=At(e.h.preferredTextLanguage);return r=At(r.language),e.h.autoShowText==2?oe(r,s):e.h.autoShowText==3?(e=At(n.language),oe(r,s)&&!oe(e,r)):(ze("Invalid autoShowText setting!"),!1)}function Km(e,n,r){n=new Map().set("oldTrack",n).set("newTrack",r),e.M&&Jg(e.M,r),r=xn("adaptation",n),Hu(e,r)}function ar(e){var n=xn("trackschanged");Hu(e,n)}function Hm(e,n,r){n=new Map().set("oldTrack",n).set("newTrack",r),e.M&&Jg(e.M,r),r=xn("variantchanged",n),Hu(e,r)}function bc(e){var n=xn("textchanged");Hu(e,n)}function Vu(e){var n=xn("texttrackvisibility");Hu(e,n)}function Wm(e){var n=new Map().set("newStatus",e.h.abr.enabled);Hu(e,xn("abrstatuschanged",n))}function L1(e,n){if(n.code!=1002&&n.code!=1011||n.category!=1||!navigator.onLine)return!1;var r=e.h.streaming.maxDisabledTime;if(r==0)if(n.code==1011)r=1;else return!1;n=e.Qa().find(function(f){return f.active});for(var s=e.i,a=A(s.variants),d=a.next();!d.done;d=a.next())d=d.value,d.id===n.id&&(d.disabledUntilTime=Date.now()/1e3+r);return ql(s.variants,e.h.restrictions,e.Qc),n=qh(e),n?(s=e.jb().video.reduce(function(f,g){return f+g.end-g.start},0),fs(e,n,!1,!0,s),e.kf.R(r),!0):!1}function lr(e,n){if(e.l!=it)if(L1(e,n))n.handled=!0;else{var r=xn("error",new Map().set("detail",n));e.dispatchEvent(r),r.defaultPrevented&&(n.handled=!0)}}function Ku(e,n,r){r=new Map().set("detail",{schemeIdUri:r.schemeIdUri,value:r.value,startTime:r.startTime,endTime:r.endTime,id:r.id,eventElement:r.eventElement}),e.dispatchEvent(xn(n,r))}function zs(e){if(!e.g.error)return null;var n=e.g.error.code;if(n==1)return null;var r=e.g.error.msExtendedCode;return r&&(0>r&&(r+=Math.pow(2,32)),r=r.toString(16)),new se(2,3,3016,n,r,e.g.error.message)}function Xh(e,n){if(e.j){var r=Object.keys(n),s=r.length==1&&r[0]=="00",a=!1;if(r.length){r=A(e.i.variants);for(var d=r.next();!d.done;d=r.next()){d=d.value;var f=[];d.audio&&f.push(d.audio),d.video&&f.push(d.video),f=A(f);for(var g=f.next();!g.done;g=f.next()){var T=g.value;if(g=d.allowedByKeySystem,T.keyIds.size){d.allowedByKeySystem=!0,T=A(T.keyIds);for(var I=T.next();!I.done;I=T.next())I=I.value,I=n[s?"00":I],d.allowedByKeySystem=d.allowedByKeySystem&&!!I&&!N1.includes(I)}g!=d.allowedByKeySystem&&(a=!0)}}}(!a||Tl(e))&&((n=e.j.l)&&!n.allowedByKeySystem&&_o(e),a&&ar(e))}}function Rr(e,n,r){e.K&&e.K.onExpirationUpdated&&e.K.onExpirationUpdated(n,r),n=xn("expirationupdated"),e.dispatchEvent(n)}function Yh(e,n,r){0<n&&(e.T()||e.ag(n)),n=e.getDuration(),r<n&&(e.T()||e.Sa(r))}function Ki(e,n){e=e.m?e.m.ud():{};var r=Object.keys(e);r=r.length&&r[0]=="00";var s=!1,a=!1,d=new Set,f=new Set;n=A(n.variants);for(var g=n.next();!g.done;g=n.next()){g=g.value;var T=[];g.audio&&T.push(g.audio),g.video&&T.push(g.video),T=A(T);for(var I=T.next();!I.done;I=T.next())if(I=I.value,I.keyIds.size){I=A(I.keyIds);for(var M=I.next();!M.done;M=I.next()){M=M.value;var L=e[r?"00":M];L?N1.includes(L)&&f.add(L):d.add(M)}}g.allowedByApplication?g.allowedByKeySystem&&(s=!0):a=!0}if(!s)throw e={hasAppRestrictions:a,missingKeys:Array.from(d),restrictedKeyStatuses:Array.from(f)},new se(2,4,4012,e)}function cr(e){if(!e.variants.some(Eu))throw new se(2,4,4032)}function Hu(e,n){j(function(r){if(r.g==1)return k(r,Promise.resolve(),2);e.l!=it&&e.dispatchEvent(n),le(r)})}function qm(e){var n=new Set;e=A(e);for(var r=e.next();!r.done;r=e.next())r=r.value,r.language?n.add(At(r.language)):n.add("und");return n}function $h(e){var n=new Map,r=new Map;e=A(e);for(var s=e.next();!s.done;s=e.next()){s=s.value;var a="und",d=[];s.language&&(a=At(s.language)),s.type=="variant"?d=s.audioRoles:d=s.roles,d&&d.length||(d=[""]),n.has(a)||n.set(a,new Set),d=A(d);for(var f=d.next();!f.done;f=d.next())f=f.value,n.get(a).add(f),s.label&&(r.has(a)||r.set(a,new Map),r.get(a).set(f,s.label))}var g=[];return n.forEach(function(T,I){T=A(T);for(var M=T.next();!M.done;M=T.next()){M=M.value;var L=null;r.has(I)&&r.get(I).has(M)&&(L=r.get(I).get(M)),g.push({language:I,role:M,label:L})}}),g}function Ro(){return new se(2,7,7e3)}function wl(e,n,r,s,a,d){return s==e&&a.mediaElement==d.mediaElement&&a.uri==d.uri&&a.mimeType==d.mimeType?n:r}function El(){return{mediaElement:null,mimeType:null,startTime:null,Ue:NaN,uri:null}}function Qh(e){return new Promise(function(n,r){e.Qb=function(){return r(Ro())},e.Ed=function(){return n()},e.onError=function(s){return r(s)},e.Gd=function(){return r(Ro())}})}pe("shaka.Player",Ce),Ce.prototype.setVideoContainer=Ce.prototype.Te,Ce.prototype.getManifestParserFactory=Ce.prototype.Pg,Ce.prototype.getManifest=Ce.prototype.Og,Ce.prototype.retryStreaming=Ce.prototype.Fe,Ce.prototype.setMaxHardwareResolution=Ce.prototype.Oe,Ce.prototype.addChaptersTrack=Ce.prototype.kg,Ce.prototype.addThumbnailsTrack=Ce.prototype.mg,Ce.prototype.addTextTrackAsync=Ce.prototype.lg,Ce.prototype.getStats=Ce.prototype.getStats,Ce.prototype.getBufferedInfo=Ce.prototype.jb,Ce.prototype.getPresentationStartTimeAsDate=Ce.prototype.Jf,Ce.prototype.getPlayheadTimeAsDate=Ce.prototype.Tg,Ce.prototype.setTextTrackVisibility=Ce.prototype.Se,Ce.prototype.getChapters=Ce.prototype.Cg,Ce.prototype.getChaptersTracks=Ce.prototype.Gf,Ce.prototype.isTextTrackVisible=Ce.prototype.Nb,Ce.prototype.selectVariantsByLabel=Ce.prototype.Fh,Ce.prototype.selectTextLanguage=Ce.prototype.Ie,Ce.prototype.selectAudioLanguage=Ce.prototype.Md,Ce.prototype.getTextLanguages=Ce.prototype.Wg,Ce.prototype.getAudioLanguages=Ce.prototype.yg,Ce.prototype.getTextLanguagesAndRoles=Ce.prototype.Xg,Ce.prototype.getAudioLanguagesAndRoles=Ce.prototype.zg,Ce.prototype.selectVariantTrack=Ce.prototype.Ke,Ce.prototype.selectTextTrack=Ce.prototype.Je,Ce.prototype.getThumbnails=Ce.prototype.Zg,Ce.prototype.getImageTracks=Ce.prototype.Jg,Ce.prototype.getTextTracks=Ce.prototype.yb,Ce.prototype.getVariantTracks=Ce.prototype.Qa,Ce.prototype.cancelTrickPlay=Ce.prototype.vf,Ce.prototype.trickPlay=Ce.prototype.Ze,Ce.prototype.getPlaybackRate=Ce.prototype.xb,Ce.prototype.isBuffering=Ce.prototype.Pc,Ce.prototype.getKeyStatuses=Ce.prototype.ud,Ce.prototype.getExpiration=Ce.prototype.Gc,Ce.prototype.drmInfo=Ce.prototype.drmInfo,Ce.prototype.keySystem=Ce.prototype.keySystem,Ce.prototype.goToLive=Ce.prototype.dh,Ce.prototype.seekRange=Ce.prototype.Ja,Ce.prototype.isAudioOnly=Ce.prototype.hc,Ce.prototype.isInProgress=Ce.prototype.Lb,Ce.prototype.isLive=Ce.prototype.T,Ce.prototype.getAdManager=Ce.prototype.sd,Ce.prototype.getAssetUri=Ce.prototype.le,Ce.prototype.getNetworkingEngine=Ce.prototype.Hc,Ce.prototype.getMediaElement=Ce.prototype.Rg,Ce.prototype.getLoadMode=Ce.prototype.If,Ce.prototype.resetConfiguration=Ce.prototype.Ch,Ce.prototype.getBufferFullness=Ce.prototype.Ag,Ce.prototype.getConfiguration=Ce.prototype.getConfiguration,Ce.prototype.configure=Ce.prototype.configure,Ce.prototype.load=Ce.prototype.load,Ce.prototype.updateStartTime=Ce.prototype.Ph,Ce.prototype.unload=Ce.prototype.bf,Ce.prototype.detach=Ce.prototype.detach,Ce.prototype.attachCanvas=Ce.prototype.qf,Ce.prototype.attach=Ce.prototype.Bc,Ce.probeSupport=function(e){e=e===void 0?!0:e;var n,r,s,a,d,f;return j(function(g){if(g.g==1)return n={},e?k(g,Sy(),3):g.D(2);g.g!=2&&(n=g.h);var T={};if(Ci()){for(var I in or)T[I]=!0;for(var M in Ps)T[M]=!0}I={mpd:"application/dash+xml",m3u8:"application/x-mpegurl",ism:"application/vnd.ms-sstr+xml"},M=A(["application/dash+xml","application/x-mpegurl","application/vnd.apple.mpegurl","application/vnd.ms-sstr+xml"]);for(var L=M.next();!L.done;L=M.next())L=L.value,T[L]=Ci()?!!or[L]:Xo(L);for(var N in I)T[N]=Ci()?!!Ps[N]:Xo(I[N]);for(r=T,N='video/mp4; codecs="avc1.42E01E",video/mp4; codecs="avc3.42E01E",video/mp4; codecs="hev1.1.6.L93.90",video/mp4; codecs="hvc1.1.6.L93.90",video/mp4; codecs="hev1.2.4.L153.B0"; eotf="smpte2084",video/mp4; codecs="hvc1.2.4.L153.B0"; eotf="smpte2084",video/mp4; codecs="vp9",video/mp4; codecs="vp09.00.10.08",video/mp4; codecs="av01.0.01M.08",audio/mp4; codecs="mp4a.40.2",audio/mp4; codecs="ac-3",audio/mp4; codecs="ec-3",audio/mp4; codecs="opus",audio/mp4; codecs="flac",video/webm; codecs="vp8",video/webm; codecs="vp9",video/webm; codecs="vp09.00.10.08",audio/webm; codecs="vorbis",audio/webm; codecs="opus",video/mp2t; codecs="avc1.42E01E",video/mp2t; codecs="avc3.42E01E",video/mp2t; codecs="hvc1.1.6.L93.90",video/mp2t; codecs="mp4a.40.2",video/mp2t; codecs="ac-3",video/mp2t; codecs="ec-3",text/vtt,application/mp4; codecs="wvtt",application/ttml+xml,application/mp4; codecs="stpp"'.split(",").concat(q(io)),T={},N=A(N),I=N.next();!I.done;I=N.next())I=I.value,T[I]=Ci()?Gd(I)?!0:Hn(I)||Qo(I):Xo(I),M=I.split(";")[0],T[M]=T[M]||T[I];s=T,a={manifest:r,media:s,drm:n},d=Zh;for(f in d)a[f]=d[f]();return g.return(a)})},Ce.isBrowserSupported=m1,Ce.setAdManagerFactory=function(e){Wu=e},Ce.registerSupportPlugin=function(e,n){Zh[e]=n},Ce.prototype.destroy=Ce.prototype.destroy;var it=0,Pc=1,Hi=2,dr=3;Ce.LoadMode={DESTROYED:it,NOT_LOADED:Pc,MEDIA_SOURCE:Hi,SRC_EQUALS:dr},Ce.version="v4.3.4";var Oc=["4","3"];Tg=new function(e){this.g=e,this.i=Pa,this.h=Yd}(new yg(Number(Oc[0]),Number(Oc[1])));var N1=["output-restricted","internal-error"],Zh={},Wu=null,pt={mp4:"video/mp4",m4v:"video/mp4",m4a:"audio/mp4",webm:"video/webm",weba:"audio/webm",mkv:"video/webm",ts:"video/mp2t",ogv:"video/ogg",ogg:"audio/ogg",mpg:"video/mpeg",mpeg:"video/mpeg",m3u8:"application/x-mpegurl",mpd:"application/dash+xml",mp3:"audio/mpeg",aac:"audio/aac",flac:"audio/flac",wav:"audio/wav"},Jh={sbv:"text/x-subviewer",srt:"text/srt",vtt:"text/vtt",webvtt:"text/vtt",ttml:"application/ttml+xml",lrc:"application/x-subtitle-lrc",ssa:"text/x-ssa",ass:"text/x-ssa"};function D1(){this.h=[],this.j=this.i=this.g=0}function De(e,n,r){var s=this;this.h=e,this.g=n,this.m=r,this.i=!1,this.l=this.g.getVolume(),this.j=new Ve,this.j.o(this.g,google.ima.AdEvent.Type.PAUSED,function(){s.i=!0}),this.j.o(this.g,google.ima.AdEvent.Type.RESUMED,function(){s.i=!1})}v=De.prototype,v.getDuration=function(){return this.h.getDuration()},v.getMinSuggestedDuration=function(){return this.h.getMinSuggestedDuration()},v.getRemainingTime=function(){return this.g.getRemainingTime()},v.isPaused=function(){return this.i},v.isSkippable=function(){return 0<=this.h.getSkipTimeOffset()},v.getTimeUntilSkippable=function(){var e=this.h.getSkipTimeOffset();return e=this.getRemainingTime()-e,Math.max(e,0)},v.canSkipNow=function(){return this.g.getAdSkippableState()},v.skip=function(){return this.g.skip()},v.pause=function(){return this.g.pause()},v.play=function(){return this.g.resume()},v.getVolume=function(){return this.g.getVolume()},v.setVolume=function(e){return this.g.setVolume(e)},v.isMuted=function(){return this.g.getVolume()==0},v.isLinear=function(){return this.h.isLinear()},v.resize=function(e,n){var r=!1,s=this.m;document.fullscreenEnabled?r=!!document.fullscreenElement:s.webkitSupportsFullscreen&&(r=s.webkitDisplayingFullscreen),this.g.resize(e,n,r?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)},v.setMuted=function(e){e?(this.l=this.getVolume(),this.setVolume(0)):this.setVolume(this.l)},v.getSequenceLength=function(){var e=this.h.getAdPodInfo();return e==null?1:e.getTotalAds()},v.getPositionInSequence=function(){var e=this.h.getAdPodInfo();return e==null?1:e.getAdPosition()},v.getTitle=function(){return this.h.getTitle()},v.getDescription=function(){return this.h.getDescription()},v.release=function(){this.g=this.h=null},pe("shaka.ads.ClientSideAd",De),De.prototype.release=De.prototype.release,De.prototype.getDescription=De.prototype.getDescription,De.prototype.getTitle=De.prototype.getTitle,De.prototype.getPositionInSequence=De.prototype.getPositionInSequence,De.prototype.getSequenceLength=De.prototype.getSequenceLength,De.prototype.setMuted=De.prototype.setMuted,De.prototype.resize=De.prototype.resize,De.prototype.isLinear=De.prototype.isLinear,De.prototype.isMuted=De.prototype.isMuted,De.prototype.setVolume=De.prototype.setVolume,De.prototype.getVolume=De.prototype.getVolume,De.prototype.play=De.prototype.play,De.prototype.pause=De.prototype.pause,De.prototype.skip=De.prototype.skip,De.prototype.canSkipNow=De.prototype.canSkipNow,De.prototype.getTimeUntilSkippable=De.prototype.getTimeUntilSkippable,De.prototype.isSkippable=De.prototype.isSkippable,De.prototype.isPaused=De.prototype.isPaused,De.prototype.getRemainingTime=De.prototype.getRemainingTime,De.prototype.getMinSuggestedDuration=De.prototype.getMinSuggestedDuration,De.prototype.getDuration=De.prototype.getDuration;function ef(e,n,r,s){var a=this;this.s=e,this.i=n,this.B=null,this.C=NaN,this.l=s,this.j=null,this.h=new Ve,google.ima.settings.setLocale(r),e=new google.ima.AdDisplayContainer(this.s,this.i),e.initialize(),this.m=new google.ima.AdsLoader(e),this.m.getSettings().setPlayerType("shaka-player"),this.m.getSettings().setPlayerVersion("v4.3.4"),this.g=null,this.h.Da(this.m,google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,function(d){KE(a,d)}),this.h.o(this.m,google.ima.AdErrorEvent.Type.AD_ERROR,function(d){tf(a,d)}),this.i.onended=function(){a.m.contentComplete()}}ef.prototype.stop=function(){this.g&&this.g.stop(),this.s&&ju(this.s)},ef.prototype.release=function(){this.stop(),this.B&&this.B.disconnect(),this.h&&this.h.release(),this.g&&this.g.destroy(),this.m.destroy()};function tf(e,n){n.getError(),rf(e,null),e.l(new Fe("ad-cue-points-changed",new Map().set("cuepoints",[])))}function KE(e,n){e.l(new Fe("ads-loaded",new Map().set("loadTime",Date.now()/1e3-e.C))),e.g=n.getAdsManager(e.i),e.l(new Fe("ima-ad-manager-loaded",new Map().set("imaAdManager",e.g)));var r=e.g.getCuePoints();if(r.length){n=[],r=A(r);for(var s=r.next();!s.done;s=r.next())n.push({start:s.value,end:null});e.l(new Fe("ad-cue-points-changed",new Map().set("cuepoints",n)))}HE(e);try{e.g.init(e.i.offsetWidth,e.i.offsetHeight,Uc(e)?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL),e.h.o(e.i,"loadeddata",function(){e.g.resize(e.i.offsetWidth,e.i.offsetHeight,Uc(e)?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)}),"ResizeObserver"in S?(e.B=new ResizeObserver(function(){e.g.resize(e.i.offsetWidth,e.i.offsetHeight,Uc(e)?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)}),e.B.observe(e.i)):e.h.o(document,"fullscreenchange",function(){e.g.resize(e.i.offsetWidth,e.i.offsetHeight,Uc(e)?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)}),e.i.addEventListener("play",function(){e.g.start()},{once:!0})}catch(a){rf(e,null)}}function Uc(e){return document.fullscreenEnabled?!!document.fullscreenElement:(e=e.i,e.webkitSupportsFullscreen?e.webkitDisplayingFullscreen:!1)}function HE(e){function n(r,s){r=new Map().set("originalEvent",r),e.l(new Fe(s,r))}e.h.o(e.g,google.ima.AdErrorEvent.Type.AD_ERROR,function(r){tf(e,r)}),e.h.o(e.g,google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,function(r){nf(e,r)}),e.h.o(e.g,google.ima.AdEvent.Type.STARTED,function(r){nf(e,r)}),e.h.o(e.g,google.ima.AdEvent.Type.FIRST_QUARTILE,function(r){n(r,"ad-first-quartile")}),e.h.o(e.g,google.ima.AdEvent.Type.MIDPOINT,function(r){n(r,"ad-midpoint")}),e.h.o(e.g,google.ima.AdEvent.Type.THIRD_QUARTILE,function(r){n(r,"ad-third-quartile")}),e.h.o(e.g,google.ima.AdEvent.Type.COMPLETE,function(r){n(r,"ad-complete")}),e.h.o(e.g,google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,function(r){rf(e,r)}),e.h.o(e.g,google.ima.AdEvent.Type.ALL_ADS_COMPLETED,function(r){rf(e,r)}),e.h.o(e.g,google.ima.AdEvent.Type.SKIPPED,function(r){n(r,"ad-skipped")}),e.h.o(e.g,google.ima.AdEvent.Type.VOLUME_CHANGED,function(r){n(r,"ad-volume-changed")}),e.h.o(e.g,google.ima.AdEvent.Type.VOLUME_MUTED,function(r){n(r,"ad-muted")}),e.h.o(e.g,google.ima.AdEvent.Type.PAUSED,function(r){e.j&&(e.j.i=!0,n(r,"ad-paused"))}),e.h.o(e.g,google.ima.AdEvent.Type.RESUMED,function(r){e.j&&(e.j.i=!1,n(r,"ad-resumed"))}),e.h.o(e.g,google.ima.AdEvent.Type.SKIPPABLE_STATE_CHANGED,function(r){e.j&&n(r,"ad-skip-state-changed")}),e.h.o(e.g,google.ima.AdEvent.Type.CLICK,function(r){n(r,"ad-clicked")}),e.h.o(e.g,google.ima.AdEvent.Type.AD_PROGRESS,function(r){n(r,"ad-progress")}),e.h.o(e.g,google.ima.AdEvent.Type.AD_BUFFERING,function(r){n(r,"ad-buffering")}),e.h.o(e.g,google.ima.AdEvent.Type.IMPRESSION,function(r){n(r,"ad-impression")}),e.h.o(e.g,google.ima.AdEvent.Type.DURATION_CHANGE,function(r){n(r,"ad-duration-changed")}),e.h.o(e.g,google.ima.AdEvent.Type.USER_CLOSE,function(r){n(r,"ad-closed")}),e.h.o(e.g,google.ima.AdEvent.Type.LOADED,function(r){n(r,"ad-loaded")}),e.h.o(e.g,google.ima.AdEvent.Type.ALL_ADS_COMPLETED,function(r){n(r,"all-ads-completed")}),e.h.o(e.g,google.ima.AdEvent.Type.LINEAR_CHANGED,function(r){n(r,"ad-linear-changed")}),e.h.o(e.g,google.ima.AdEvent.Type.AD_METADATA,function(r){n(r,"ad-metadata")}),e.h.o(e.g,google.ima.AdEvent.Type.LOG,function(r){n(r,"ad-recoverable-error")}),e.h.o(e.g,google.ima.AdEvent.Type.AD_BREAK_READY,function(r){n(r,"ad-break-ready")}),e.h.o(e.g,google.ima.AdEvent.Type.INTERACTION,function(r){n(r,"ad-interaction")})}function nf(e,n){var r=n.getAd();r?(e.j=new De(r,e.g,e.i),n=new Map().set("ad",e.j).set("sdkAdObject",r).set("originalEvent",n),e.l(new Fe("ad-started",n)),e.j.isLinear()&&(e.s.setAttribute("ad-active","true"),e.i.pause())):ze("The IMA SDK fired a "+n.type+" event with no associated ad. Unable to play ad!")}function rf(e,n){e.l(new Fe("ad-stopped",new Map().set("originalEvent",n))),e.j&&e.j.isLinear()&&(e.s.removeAttribute("ad-active"),e.i.play())}function gt(e,n){this.i=e,this.h=null,this.g=n}v=gt.prototype,v.getDuration=function(){return this.h?this.h.duration:-1},v.getMinSuggestedDuration=function(){return this.getDuration()},v.getRemainingTime=function(){return this.h?this.h.duration-this.h.currentTime:-1},v.isPaused=function(){return this.g.paused},v.isSkippable=function(){return this.i.isSkippable()},v.getTimeUntilSkippable=function(){var e=this.i.getSkipTimeOffset();return e=this.getRemainingTime()-e,Math.max(e,0)},v.canSkipNow=function(){return this.getTimeUntilSkippable()==0},v.skip=function(){this.g.currentTime+=this.getRemainingTime()},v.pause=function(){return this.g.pause()},v.play=function(){return this.g.play()},v.getVolume=function(){return this.g.volume},v.setVolume=function(e){this.g.volume=e},v.isMuted=function(){return this.g.muted},v.isLinear=function(){return!0},v.resize=function(){},v.setMuted=function(e){this.g.muted=e},v.getSequenceLength=function(){var e=this.i.getAdPodInfo();return e==null?1:e.getTotalAds()},v.getPositionInSequence=function(){var e=this.i.getAdPodInfo();return e==null?1:e.getAdPosition()},v.getTitle=function(){return this.i.getTitle()},v.getDescription=function(){return this.i.getDescription()},v.release=function(){this.g=this.h=this.i=null},pe("shaka.ads.ServerSideAd",gt),gt.prototype.release=gt.prototype.release,gt.prototype.getDescription=gt.prototype.getDescription,gt.prototype.getTitle=gt.prototype.getTitle,gt.prototype.getPositionInSequence=gt.prototype.getPositionInSequence,gt.prototype.getSequenceLength=gt.prototype.getSequenceLength,gt.prototype.setMuted=gt.prototype.setMuted,gt.prototype.resize=gt.prototype.resize,gt.prototype.isLinear=gt.prototype.isLinear,gt.prototype.isMuted=gt.prototype.isMuted,gt.prototype.setVolume=gt.prototype.setVolume,gt.prototype.getVolume=gt.prototype.getVolume,gt.prototype.play=gt.prototype.play,gt.prototype.pause=gt.prototype.pause,gt.prototype.skip=gt.prototype.skip,gt.prototype.canSkipNow=gt.prototype.canSkipNow,gt.prototype.getTimeUntilSkippable=gt.prototype.getTimeUntilSkippable,gt.prototype.isSkippable=gt.prototype.isSkippable,gt.prototype.isPaused=gt.prototype.isPaused,gt.prototype.getRemainingTime=gt.prototype.getRemainingTime,gt.prototype.getMinSuggestedDuration=gt.prototype.getMinSuggestedDuration,gt.prototype.getDuration=gt.prototype.getDuration;function qu(e,n,r,s){var a=this;this.B=e,this.l=n,this.j=null,this.I=NaN,this.i=s,this.H=!1,this.C=this.m=this.s=null,this.F="",this.G=[],this.h=new Ve,e=new google.ima.dai.api.UiSettings,e.setLocale(r),this.g=new google.ima.dai.api.StreamManager(this.l,this.B,e),this.i(new Fe("ima-stream-manager-loaded",new Map().set("imaStreamManager",this.g))),this.h.o(this.g,google.ima.dai.api.StreamEvent.Type.LOADED,function(d){Xm(a,d)}),this.h.o(this.g,google.ima.dai.api.StreamEvent.Type.ERROR,function(){a.F.length?a.j.resolve(a.F):a.j.reject("IMA Stream request returned an error and there was no backup asset uri provided."),a.j=null}),this.h.o(this.g,google.ima.dai.api.StreamEvent.Type.AD_BREAK_STARTED,function(){}),this.h.o(this.g,google.ima.dai.api.StreamEvent.Type.STARTED,function(d){d=d.getAd(),a.m=new gt(d,a.l),a.C&&(a.m.h=a.C),a.i(new Fe("ad-started",new Map().set("ad",a.m))),a.B.setAttribute("ad-active","true")}),this.h.o(this.g,google.ima.dai.api.StreamEvent.Type.AD_BREAK_ENDED,function(){a.B.removeAttribute("ad-active");var d=a.l.currentTime;a.s&&a.s>d&&(a.l.currentTime=a.s,a.s=null)}),this.h.o(this.g,google.ima.dai.api.StreamEvent.Type.AD_PROGRESS,function(d){a.C=d.getStreamData().adProgressData,a.m&&(a.m.h=a.C)}),this.h.o(this.g,google.ima.dai.api.StreamEvent.Type.FIRST_QUARTILE,function(){a.i(new Fe("ad-first-quartile"))}),this.h.o(this.g,google.ima.dai.api.StreamEvent.Type.MIDPOINT,function(){a.i(new Fe("ad-midpoint"))}),this.h.o(this.g,google.ima.dai.api.StreamEvent.Type.THIRD_QUARTILE,function(){a.i(new Fe("ad-third-quartile"))}),this.h.o(this.g,google.ima.dai.api.StreamEvent.Type.COMPLETE,function(){a.i(new Fe("ad-complete")),a.i(new Fe("ad-stopped")),a.B.removeAttribute("ad-active"),a.m=null}),this.h.o(this.g,google.ima.dai.api.StreamEvent.Type.SKIPPED,function(){a.i(new Fe("ad-skipped")),a.i(new Fe("ad-stopped"))}),this.h.o(this.g,google.ima.dai.api.StreamEvent.Type.CUEPOINTS_CHANGED,function(d){var f=d.getStreamData();d=[],f=A(f.cuepoints);for(var g=f.next();!g.done;g=f.next())g=g.value,d.push({start:g.start,end:g.end});a.G=d,a.i(new Fe("ad-cue-points-changed",new Map().set("cuepoints",d)))})}qu.prototype.stop=function(){this.F="",this.s=null,this.G=[]},qu.prototype.release=function(){this.stop(),this.h&&this.h.release()},qu.prototype.onCueMetadataChange=function(e){if(e.key&&e.data){var n={};n[e.key]=e.data,this.g.onTimedMetadata(n)}};function Xm(e,n){e.i(new Fe("ads-loaded",new Map().set("loadTime",Date.now()/1e3-e.I))),n=n.getStreamData().url,e.j.resolve(n),e.j=null,e.H||e.h.o(e.l,"seeked",function(){var r=e.l.currentTime;if(r!=0){e.g.streamTimeForContentTime(r);var s=e.g.previousCuePointForStreamTime(r);s&&!s.played&&(e.s=r,e.l.currentTime=s.start)}})}function Xe(){vt.call(this),this.g=this.i=null,this.h=new D1,this.j=navigator.language}Te(Xe,vt),v=Xe.prototype,v.setLocale=function(e){this.j=e},v.initClientSide=function(e,n){var r=this;if(!S.google||!google.ima||!google.ima.AdsLoader)throw new se(2,10,1e4);this.i&&this.i.release(),this.i=new ef(e,n,this.j,function(s){if(s&&s.type)switch(s.type){case"ads-loaded":r.h.h.push(s.loadTime);break;case"ad-started":r.h.g++;break;case"ad-complete":r.h.i++;break;case"ad-skipped":r.h.j++}r.dispatchEvent(s)})},v.release=function(){this.i&&(this.i.release(),this.i=null),this.g&&(this.g.release(),this.g=null),vt.prototype.release.call(this)},v.onAssetUnload=function(){this.i&&this.i.stop(),this.g&&this.g.stop(),this.dispatchEvent(new Fe("ad-stopped")),this.h=new D1},v.requestClientSideAds=function(e){if(!this.i)throw new se(1,10,10001);var n=this.i;n.C=Date.now()/1e3,n.m.requestAds(e)},v.initServerSide=function(e,n){var r=this;if(!S.google||!google.ima||!google.ima.dai)throw new se(2,10,10002);this.g&&this.g.release(),this.g=new qu(e,n,this.j,function(s){if(s&&s.type)switch(s.type){case"ads-loaded":r.h.h.push(s.loadTime);break;case"ad-started":r.h.g++;break;case"ad-complete":r.h.i++;break;case"ad-skipped":r.h.j++}r.dispatchEvent(s)})},v.requestServerSideStream=function(e,n){if(n=n===void 0?"":n,!this.g)throw new se(1,10,10003);e.adTagParameters||(e.adTagParameters={});var r=e.adTagParameters;return(r.mpt||r.mpv)&&ze('You have attempted to set "mpt" and/or "mpv" parameters of the ad tag. Please note that those parameters are used for Shaka adoption tracking and will be overriden.'),e.adTagParameters.mpt="shaka-player",e.adTagParameters.mpv="v4.3.4",r=this.g,r.j?e=Promise.reject(new se(1,10,10004)):(e instanceof google.ima.dai.api.LiveStreamRequest&&(r.H=!0),r.j=new bt,r.g.requestStream(e),r.F=n||"",r.I=Date.now()/1e3,e=r.j),e},v.replaceServerSideAdTagParameters=function(e){if(!this.g)throw new se(1,10,10003);(e.mpt||e.mpv)&&ze('You have attempted to set "mpt" and/or "mpv" parameters of the ad tag. Please note that those parameters are used for Shaka adoption tracking and will be overriden.'),e.mpt="Shaka Player",e.mpv="v4.3.4",this.g.g.replaceAdTagParameters(e)},v.getServerSideCuePoints=function(){if(!this.g)throw new se(1,10,10003);return this.g.G},v.getStats=function(){var e=this.h;return{loadTimes:e.h,started:e.g,playedCompletely:e.i,skipped:e.j}},v.onDashTimedMetadata=function(e){if(this.g&&e.schemeIdUri=="urn:google:dai:2018"){var n=e.schemeIdUri,r=e.eventElement?e.eventElement.getAttribute("messageData"):null;this.g.g.processMetadata(n,r,e.startTime)}},v.onHlsTimedMetadata=function(e,n){this.g&&this.g.g.processMetadata("ID3",e.data,n)},v.onCueMetadataChange=function(e){this.g&&this.g.onCueMetadataChange(e)},pe("shaka.ads.AdManager",Xe),Xe.prototype.onCueMetadataChange=Xe.prototype.onCueMetadataChange,Xe.prototype.onHlsTimedMetadata=Xe.prototype.onHlsTimedMetadata,Xe.prototype.onDashTimedMetadata=Xe.prototype.onDashTimedMetadata,Xe.prototype.getStats=Xe.prototype.getStats,Xe.prototype.getServerSideCuePoints=Xe.prototype.getServerSideCuePoints,Xe.prototype.replaceServerSideAdTagParameters=Xe.prototype.replaceServerSideAdTagParameters,Xe.prototype.requestServerSideStream=Xe.prototype.requestServerSideStream,Xe.prototype.initServerSide=Xe.prototype.initServerSide,Xe.prototype.requestClientSideAds=Xe.prototype.requestClientSideAds,Xe.prototype.onAssetUnload=Xe.prototype.onAssetUnload,Xe.prototype.release=Xe.prototype.release,Xe.prototype.initClientSide=Xe.prototype.initClientSide,Xe.prototype.setLocale=Xe.prototype.setLocale,Xe.ADS_LOADED="ads-loaded",Xe.AD_STARTED="ad-started",Xe.AD_FIRST_QUARTILE="ad-first-quartile",Xe.AD_MIDPOINT="ad-midpoint",Xe.AD_THIRD_QUARTILE="ad-third-quartile",Xe.AD_COMPLETE="ad-complete",Xe.AD_STOPPED="ad-stopped",Xe.AD_SKIPPED="ad-skipped",Xe.AD_VOLUME_CHANGED="ad-volume-changed",Xe.AD_MUTED="ad-muted",Xe.AD_PAUSED="ad-paused",Xe.AD_RESUMED="ad-resumed",Xe.AD_SKIP_STATE_CHANGED="ad-skip-state-changed",Xe.CUEPOINTS_CHANGED="ad-cue-points-changed",Xe.IMA_AD_MANAGER_LOADED="ima-ad-manager-loaded",Xe.IMA_STREAM_MANAGER_LOADED="ima-stream-manager-loaded",Xe.AD_CLICKED="ad-clicked",Xe.AD_PROGRESS="ad-progress",Xe.AD_BUFFERING="ad-buffering",Xe.AD_IMPRESSION="ad-impression",Xe.AD_DURATION_CHANGED="ad-duration-changed",Xe.AD_CLOSED="ad-closed",Xe.AD_LOADED="ad-loaded",Xe.ALL_ADS_COMPLETED="all-ads-completed",Xe.AD_LINEAR_CHANGED="ad-linear-changed",Xe.AD_METADATA="ad-metadata",Xe.AD_RECOVERABLE_ERROR="ad-recoverable-error",Xe.AD_BREAK_READY="ad-break-ready",Xe.AD_INTERACTION="ad-interaction",Wu=function(){return new Xe};function Ym(e){return JSON.stringify(e,function(n,r){if(typeof r!="function"){if(r instanceof Event||r instanceof Fe){var s={};for(a in r)(n=r[a])&&typeof n=="object"?a=="detail"&&(s[a]=n):a in Event||(s[a]=n);return s}if(r instanceof Error){var a=new Set(["name","message","stack"]);for(s in r)a.add(s);for(n=A(Object.getOwnPropertyNames(r)),s=n.next();!s.done;s=n.next())a.add(s.value);for(n={},a=A(a),s=a.next();!s.done;s=a.next())s=s.value,n[s]=r[s];r={__type__:"Error",contents:n}}else if(r instanceof TimeRanges){for(a={__type__:"TimeRanges",length:r.length,start:[],end:[]},r=A(us(r)),s=r.next();!s.done;s=r.next())s=s.value,n=s.end,a.start.push(s.start),a.end.push(n);r=a}else r=r instanceof Uint8Array?{__type__:"Uint8Array",entries:Array.from(r)}:typeof r=="number"?isNaN(r)?"NaN":isFinite(r)?r:0>r?"-Infinity":"Infinity":r;return r}})}function $m(e){return JSON.parse(e,function(n,r){if(r=="NaN")var s=NaN;else if(r=="-Infinity")s=-1/0;else if(r=="Infinity")s=1/0;else if(r&&typeof r=="object"&&r.__type__=="TimeRanges")s=WE(r);else if(r&&typeof r=="object"&&r.__type__=="Uint8Array")s=new Uint8Array(r.entries);else if(r&&typeof r=="object"&&r.__type__=="Error"){n=r.contents,r=Error(n.message);for(s in n)r[s]=n[s];s=r}else s=r;return s})}function WE(e){return{length:e.length,start:function(n){return e.start[n]},end:function(n){return e.end[n]}}}var of="ended play playing pause pausing ratechange seeked seeking timeupdate volumechange".split(" "),qE="buffered currentTime duration ended loop muted paused playbackRate seeking videoHeight videoWidth volume".split(" "),jc=["loop","playbackRate"],b1=["pause","play"],Bc={getAssetUri:2,getAudioLanguages:4,getAudioLanguagesAndRoles:4,getBufferFullness:1,getBufferedInfo:2,getExpiration:2,getKeyStatuses:2,getPlaybackRate:2,getTextLanguages:4,getTextLanguagesAndRoles:4,getImageTracks:2,getThumbnails:2,isAudioOnly:10,isBuffering:1,isInProgress:1,isLive:10,isTextTrackVisible:1,keySystem:10,seekRange:1,getLoadMode:10},Fc={getConfiguration:4,getStats:5,getTextTracks:2,getVariantTracks:2},zc={getPlayheadTimeAsDate:1,getPresentationStartTimeAsDate:20},sf=[["getConfiguration","configure"]],Al=[["isTextTrackVisible","setTextTrackVisibility"]],XE="addChaptersTrack addTextTrackAsync addThumbnailsTrack cancelTrickPlay configure getChapters getChaptersTracks resetConfiguration retryStreaming selectAudioLanguage selectTextLanguage selectTextTrack selectVariantTrack selectVariantsByLabel setTextTrackVisibility trickPlay updateStartTime goToLive".split(" "),uf=["attach","attachCanvas","detach","load","unload"];function Wi(e,n,r,s,a,d,f){var g=this;this.I=e,this.O=f,this.j=new Qe(n),this.P=r,this.C=!1,this.B=s,this.H=a,this.K=d,this.h=this.m=!1,this.M="",this.s=null,this.F=function(){return Zm(g)},this.G=function(T,I){switch(T=$m(I),T.type){case"event":var M=T.targetName,L=er(T.event);g.B(M,L);break;case"update":M=T.update;for(L in M){T=g.g[L]||{};for(var N in M[L])T[N]=M[L][N]}g.C&&(g.P(),g.C=!1);break;case"asyncComplete":if(L=T.id,N=T.error,T=g.i[L],delete g.i[L],T)if(N){L=new se(N.severity,N.category,N.code);for(M in N)L[M]=N[M];T.reject(L)}else T.resolve()}},this.g={video:{},player:{}},this.J=0,this.i={},this.l=null,Vc.add(this)}v=Wi.prototype,v.destroy=function(){return Vc.delete(this),lf(this),hr&&P1(this),this.j&&(this.j.stop(),this.j=null),this.H=this.B=null,this.h=this.m=!1,this.G=this.F=this.l=this.i=this.g=this.s=null,Promise.resolve()},v.na=function(){return this.h},v.Jd=function(){return this.M},v.init=function(){if(this.I.length)if(S.chrome&&chrome.cast&&chrome.cast.isAvailable){this.m=!0,this.j.za();var e=new chrome.cast.SessionRequest(this.I,[],null,this.O,null);e=new chrome.cast.ApiConfig(e,function(n){for(var r=A(Vc),s=r.next();!s.done;s=r.next())dn(s.value,n)},function(n){for(var r=A(Vc),s=r.next();!s.done;s=r.next())s=s.value,Gc=n=="available",s.j.za()},"origin_scoped"),chrome.cast.initialize(e,function(){},function(){}),Gc&&this.j.R(O1),(e=hr)&&e.status!=chrome.cast.SessionStatus.STOPPED?dn(this,e):hr=null}else S.__onGCastApiAvailable!==Jm&&(cf=S.__onGCastApiAvailable||null,S.__onGCastApiAvailable=Jm)},v.Le=function(e){this.s=e,this.h&&Yu(this,{type:"appData",appData:this.s})},v.cast=function(e){var n=this;return j(function(r){if(!n.m)throw new se(1,8,8e3);if(!Gc)throw new se(1,8,8001);if(n.h)throw new se(1,8,8002);return n.l=new bt,chrome.cast.requestSession(function(s){return Xu(n,e,s)},function(s){return Qm(n,s)}),k(r,n.l,0)})};function af(e){if(e.h){var n=e.K();chrome.cast.requestSession(function(r){return Xu(e,n,r)},function(r){return Qm(e,r)})}}v.$b=function(){if(this.h){if(lf(this),hr){P1(this);try{hr.stop(function(){},function(){})}catch(e){}hr=null}Zm(this)}},v.get=function(e,n){var r=this;if(e=="video"){if(b1.includes(n))return function(){return r.Sf.apply(r,[e,n].concat(q(fn.apply(0,arguments))))}}else if(e=="player"){if(zc[n]&&!this.get("player","isLive")())return function(){};if(XE.includes(n))return function(){return r.Sf.apply(r,[e,n].concat(q(fn.apply(0,arguments))))};if(uf.includes(n))return function(){return r.yh.apply(r,[e,n].concat(q(fn.apply(0,arguments))))};if(Bc[n]||Fc[n])return function(){return r.g[e][n]}}return this.g[e][n]},v.set=function(e,n,r){this.g[e][n]=r,Yu(this,{type:"set",targetName:e,property:n,value:r})};function Xu(e,n,r){hr=r,r.addUpdateListener(e.F),r.addMessageListener("urn:x-cast:com.google.shaka.v2",e.G),Zm(e),Yu(e,{type:"init",initState:n,appData:e.s}),e.l.resolve()}function Qm(e,n){var r=8003;switch(n.code){case"cancel":r=8004;break;case"timeout":r=8005;break;case"receiver_unavailable":r=8006}e.l.reject(new se(2,8,r,n))}v.Sf=function(e,n){Yu(this,{type:"call",targetName:e,methodName:n,args:fn.apply(2,arguments)})},v.yh=function(e,n){var r=fn.apply(2,arguments),s=new bt,a=this.J.toString();this.J++,this.i[a]=s;try{Yu(this,{type:"asyncCall",targetName:e,methodName:n,args:r,id:a})}catch(d){s.reject(d)}return s};function dn(e,n){var r=e.K();e.l=new bt,e.C=!0,Xu(e,r,n)}function P1(e){var n=hr;n.removeUpdateListener(e.F),n.removeMessageListener("urn:x-cast:com.google.shaka.v2",e.G)}function Zm(e){var n=hr?hr.status=="connected":!1;if(e.h&&!n){e.H();for(var r in e.g)e.g[r]={};lf(e)}e.h=n,e.M=n?hr.receiver.friendlyName:"",e.j.za()}function lf(e){for(var n in e.i){var r=e.i[n];delete e.i[n],r.reject(new se(1,7,7e3))}}function Yu(e,n){n=Ym(n);var r=hr;try{r.sendMessage("urn:x-cast:com.google.shaka.v2",n,function(){},lu)}catch(s){throw n=new se(2,8,8005,s),r=new Fe("error",new Map().set("detail",n)),e.B("player",r),e.$b(),n}}var O1=.02,Gc=!1,hr=null,cf=null,Vc=new Set;function Jm(e){if(cf?S.__onGCastApiAvailable=cf:delete S.__onGCastApiAvailable,cf=null,e)for(var n=A(Vc),r=n.next();!r.done;r=n.next())r.value.init();typeof S.__onGCastApiAvailable=="function"&&S.__onGCastApiAvailable(e)}function wt(e,n,r,s){s=s===void 0?!1:s,vt.call(this);var a=this;this.i=e,this.h=n,this.m=this.s=this.j=this.B=this.l=null,this.G=r,this.F=s,this.C=new Map,this.g=new Wi(r,function(){return t0(a)},function(){return df(a)},function(d,f){return j1(a,d,f)},function(){return n0(a)},function(){return e0(a)},s),YE(this)}Te(wt,vt),v=wt.prototype,v.destroy=function(e){return e&&this.g.$b(),this.m&&(this.m.release(),this.m=null),e=[],this.h&&(e.push(this.h.destroy()),this.h=null),this.g&&(e.push(this.g.destroy()),this.g=null),this.B=this.l=this.i=null,vt.prototype.release.call(this),Promise.all(e)},v.zb=function(){return this.l},v.cc=function(){return this.B},v.uf=function(){return this.g.m&&Gc},v.na=function(){return this.g.na()},v.Jd=function(){return this.g.Jd()},v.cast=function(){var e=this,n;return j(function(r){return r.g==1?(n=e0(e),k(r,e.g.cast(n),2)):e.h?k(r,e.h.bf(),0):r.return()})},v.Le=function(e){this.g.Le(e)},v.dg=function(){af(this.g)},v.$b=function(){this.g.$b()},v.yf=function(e,n){n=n===void 0?!1:n;var r=this;return j(function(s){if(s.g==1)return e==r.G&&n==r.F?s.return():(r.G=e,r.F=n,r.g.$b(),k(s,r.g.destroy(),2));r.g=null,r.g=new Wi(e,function(){return t0(r)},function(){return df(r)},function(a,d){return j1(r,a,d)},function(){return n0(r)},function(){return e0(r)},n),r.g.init(),le(s)})};function YE(e){e.g.init(),e.m=new Ve;for(var n=A(of),r=n.next();!r.done;r=n.next())e.m.o(e.i,r.value,function(d){e.g.na()||(d=er(d),e.j.dispatchEvent(d))});for(var s in ni)e.m.o(e.h,ni[s],function(d){e.g.na()||e.s.dispatchEvent(d)});e.l={},n={};for(var a in e.i)n.vc=a,Object.defineProperty(e.l,n.vc,{configurable:!1,enumerable:!0,get:function(d){return function(){return i0(e,d.vc)}}(n),set:function(d){return function(f){var g=d.vc;e.g.na()?e.g.set("video",g,f):e.i[g]=f}}(n)}),n={vc:n.vc};e.B={},$u(e,function(d){Object.defineProperty(e.B,d,{configurable:!1,enumerable:!0,get:function(){return $E(e,d)}})}),U1(e),e.j=new vt,e.j.Hd=e.l,e.s=new vt,e.s.Hd=e.B}function U1(e){var n=new Map;$u(e,function(r,s){n.has(s)?(s=n.get(s),r.length<s.length?e.C.set(r,s):e.C.set(s,r)):n.set(s,r)})}function $u(e,n){function r(T){return T=="constructor"||typeof s[T]!="function"?!1:!a.has(T)}var s=e.h,a=new Set,d;for(d in s)r(d)&&(a.add(d),n(d,s[d]));for(e=Object.getPrototypeOf(s),d=Object.getPrototypeOf({});e&&e!=d;){for(var f=A(Object.getOwnPropertyNames(e)),g=f.next();!g.done;g=f.next())g=g.value,r(g)&&(a.add(g),n(g,s[g]));e=Object.getPrototypeOf(e)}}function e0(e){var n={video:{},player:{},playerAfterLoad:{},manifest:e.h.le(),startTime:null};e.i.pause();for(var r=A(jc),s=r.next();!s.done;s=r.next())s=s.value,n.video[s]=e.i[s];for(e.i.ended||(n.startTime=e.i.currentTime),r=A(sf),s=r.next();!s.done;s=r.next()){var a=s.value;s=a[1],a=e.h[a[0]](),n.player[s]=a}for(r=A(Al),s=r.next();!s.done;s=r.next())a=s.value,s=a[1],a=e.h[a[0]](),n.playerAfterLoad[s]=a;return n}function t0(e){var n=new Fe("caststatuschanged");e.dispatchEvent(n)}function df(e){var n=new Fe(e.l.paused?"pause":"play");e.j.dispatchEvent(n)}function n0(e){for(var n=A(sf),r=n.next();!r.done;r=n.next()){var s=r.value;r=s[1],s=e.g.get("player",s[0])(),e.h[r](s)}var a=e.g.get("player","getAssetUri")();r=e.g.get("video","ended"),n=Promise.resolve();var d=e.i.autoplay;s=null,r||(s=e.g.get("video","currentTime")),a&&(e.i.autoplay=!1,n=e.h.load(a,s));var f={};for(r=A(jc),s=r.next();!s.done;s=r.next())s=s.value,f[s]=e.g.get("video",s);n.then(function(){if(e.i){for(var g=A(jc),T=g.next();!T.done;T=g.next())T=T.value,e.i[T]=f[T];for(g=A(Al),T=g.next();!T.done;T=g.next()){var I=T.value;T=I[1],I=e.g.get("player",I[0])(),e.h[T](I)}e.i.autoplay=d,a&&e.i.play()}},function(g){g=new Map().set("detail",g),g=new Fe("error",g),e.h.dispatchEvent(g)})}function i0(e,n){if(n=="addEventListener")return function(s,a,d){return e.j.addEventListener(s,a,d)};if(n=="removeEventListener")return function(s,a,d){return e.j.removeEventListener(s,a,d)};if(e.g.na()&&Object.keys(e.g.g.video).length==0){var r=e.i[n];if(typeof r!="function")return r}return e.g.na()?e.g.get("video",n):(n=e.i[n],typeof n=="function"&&(n=n.bind(e.i)),n)}function $E(e,n){if(e.C.has(n)&&(n=e.C.get(n)),n=="addEventListener")return function(r,s,a){return e.s.addEventListener(r,s,a)};if(n=="removeEventListener")return function(r,s,a){return e.s.removeEventListener(r,s,a)};if(n=="getMediaElement")return function(){return e.l};if(n=="getSharedConfiguration")return e.g.get("player","getConfiguration");if(n=="getNetworkingEngine")return function(){return e.h.Hc()};if(n=="getDrmEngine")return function(){return e.h.m};if(n=="getAdManager")return function(){return e.h.sd()};if(n=="setVideoContainer")return function(r){return e.h.Te(r)};if(e.g.na()){if(n=="getManifest"||n=="drmInfo")return function(){return ze(n+"() does not work while casting!"),null};if(n=="attach"||n=="detach")return function(){return ze(n+"() does not work while casting!"),Promise.resolve()}}return e.g.na()&&Object.keys(e.g.g.video).length==0&&(Bc[n]||Fc[n])||!e.g.na()?e.h[n].bind(e.h):e.g.get("player",n)}function j1(e,n,r){e.g.na()&&(n=="video"?e.j.dispatchEvent(r):n=="player"&&e.s.dispatchEvent(r))}pe("shaka.cast.CastProxy",wt),wt.prototype.changeReceiverId=wt.prototype.yf,wt.prototype.forceDisconnect=wt.prototype.$b,wt.prototype.suggestDisconnect=wt.prototype.dg,wt.prototype.setAppData=wt.prototype.Le,wt.prototype.cast=wt.prototype.cast,wt.prototype.receiverName=wt.prototype.Jd,wt.prototype.isCasting=wt.prototype.na,wt.prototype.canCast=wt.prototype.uf,wt.prototype.getPlayer=wt.prototype.cc,wt.prototype.getVideo=wt.prototype.zb,wt.prototype.destroy=wt.prototype.destroy;function zn(e,n,r,s){vt.call(this);var a=this;this.g=e,this.h=n,this.j=new Ve,this.J={video:e,player:n},this.G=r||function(){},this.K=s||function(d){return d},this.i=null,this.H=!1,this.s=!0,this.m=0,this.F=!1,this.C=!0,this.B=this.l=null,this.I=new Qe(function(){r0(a)}),ps(this)}Te(zn,vt),v=zn.prototype,v.isConnected=function(){return this.H},v.gh=function(){return this.s},v.Ih=function(e){this.i=e},v.sg=function(){this.i=null},v.Jh=function(e){this.i||(this.i={metadataType:cast.receiver.media.MetadataType.GENERIC}),this.i.title=e},v.Hh=function(e){this.i||(this.i={metadataType:cast.receiver.media.MetadataType.GENERIC}),this.i.images=[{url:e}]},v.Gh=function(e){this.i||(this.i={}),this.i.artist=e,this.i.metadataType=cast.receiver.media.MetadataType.MUSIC_TRACK},v.destroy=function(){var e=this,n,r;return j(function(s){if(s.g==1)return e.j&&(e.j.release(),e.j=null),n=[],e.h&&(n.push(e.h.destroy()),e.h=null),e.I&&(e.I.stop(),e.I=null),e.g=null,e.J=null,e.G=null,e.H=!1,e.s=!0,e.l=null,e.B=null,vt.prototype.release.call(e),k(s,Promise.all(n),2);r=cast.receiver.CastReceiverManager.getInstance(),r.stop(),le(s)})};function ps(e){var n=cast.receiver.CastReceiverManager.getInstance();n.onSenderConnected=function(){return Lo(e)},n.onSenderDisconnected=function(){return Lo(e)},n.onSystemVolumeChanged=function(){var a=cast.receiver.CastReceiverManager.getInstance().getSystemVolume();a&&gs(e,{type:"update",update:{video:{volume:a.level,muted:a.muted}}},e.l),gs(e,{type:"event",targetName:"video",event:{type:"volumechange"}},e.l)},e.B=n.getCastMessageBus("urn:x-cast:com.google.cast.media"),e.B.onMessage=function(a){return ZE(e,a)},e.l=n.getCastMessageBus("urn:x-cast:com.google.shaka.v2"),e.l.onMessage=function(a){return z1(e,a)},n.start(),n=A(of);for(var r=n.next();!r.done;r=n.next())e.j.o(e.g,r.value,function(a){return B1(e,"video",a)});for(var s in ni)e.j.o(e.h,ni[s],function(a){return B1(e,"player",a)});cast.__platform__&&cast.__platform__.canDisplayType('video/mp4; codecs="avc1.640028"; width=3840; height=2160')?e.h.Oe(3840,2160):e.h.Oe(1920,1080),e.j.o(e.g,"loadeddata",function(){e.F=!0}),e.j.o(e.h,"loading",function(){e.s=!1,Sl(e)}),e.j.o(e.g,"playing",function(){e.s=!1,Sl(e)}),e.j.o(e.g,"pause",function(){Sl(e)}),e.j.o(e.h,"unloading",function(){e.s=!0,Sl(e)}),e.j.o(e.g,"ended",function(){new Qe(function(){e.g&&e.g.ended&&(e.s=!0,Sl(e))}).R(eA)})}function Lo(e){e.m=0,e.C=!0,e.H=cast.receiver.CastReceiverManager.getInstance().getSenders().length!=0,Sl(e)}function Sl(e){var n;j(function(r){if(r.g==1)return k(r,Promise.resolve(),2);if(!e.h)return r.return();n=new Fe("caststatuschanged"),e.dispatchEvent(n),F1(e)||Lr(e),le(r)})}function QE(e,n,r){var s,a,d,f,g,T,I,M,L,N;j(function(O){switch(O.g){case 1:for(s in n.player)a=n.player[s],e.h[s](a);return e.G(r),d=e.g.autoplay,n.manifest?(e.g.autoplay=!1,ye(O,5),k(O,e.h.load(n.manifest,n.startTime),7)):k(O,Promise.resolve(),3);case 7:_e(O,3);break;case 5:return f=we(O),g=new Map().set("detail",f),T=new Fe("error",g),e.h&&e.h.dispatchEvent(T),O.return();case 3:if(!e.h)return O.return();for(I in n.video)M=n.video[I],e.g[I]=M;for(L in n.playerAfterLoad)N=n.playerAfterLoad[L],e.h[L](N);e.g.autoplay=d,n.manifest&&(e.g.play(),Lr(e)),le(O)}})}function B1(e,n,r){e.h&&(r0(e),gs(e,{type:"event",targetName:n,event:r},e.l))}function r0(e){e.I.R(JE);for(var n={video:{},player:{}},r=A(qE),s=r.next();!s.done;s=r.next())s=s.value,n.video[s]=e.g[s];if(e.h.T())for(var a in zc)e.m%zc[a]==0&&(n.player[a]=e.h[a]());for(var d in Bc)e.m%Bc[d]==0&&(n.player[d]=e.h[d]());(r=cast.receiver.CastReceiverManager.getInstance().getSystemVolume())&&(n.video.volume=r.level,n.video.muted=r.muted),gs(e,{type:"update",update:n},e.l);for(var f in Fc)e.m%Fc[f]==0&&(n={player:{}},n.player[f]=e.h[f](),gs(e,{type:"update",update:n},e.l));e.F&&(e.m+=1),F1(e)}function F1(e){return e.C&&(e.g.duration||e.h.T())?(o0(e),e.C=!1,!0):!1}function o0(e,n){var r={contentId:e.h.le(),streamType:e.h.T()?"LIVE":"BUFFERED",contentType:""};e.h.T()||(r.duration=e.g.duration),e.i&&(r.metadata=e.i),Lr(e,n===void 0?0:n,r)}function z1(e,n){var r=$m(n.data);switch(r.type){case"init":e.m=0,e.F=!1,e.C=!0,QE(e,r.initState,r.appData),r0(e);break;case"appData":e.G(r.appData);break;case"set":var s=r.targetName,a=r.property;if(r=r.value,s=="video"){if(n=cast.receiver.CastReceiverManager.getInstance(),a=="volume"){n.setSystemVolumeLevel(r);break}else if(a=="muted"){n.setSystemVolumeMuted(r);break}}e.J[s][a]=r;break;case"call":s=e.J[r.targetName],s[r.methodName].apply(s,r.args);break;case"asyncCall":s=r.targetName,a=r.methodName,s=="player"&&a=="load"&&(e.m=0,e.F=!1);var d=r.id,f=n.senderId;n=e.J[s],r=n[a].apply(n,r.args),s=="player"&&a=="load"&&(r=r.then(function(){e.C=!0})),r.then(function(){return G1(e,f,d,null)},function(g){return G1(e,f,d,g)})}}function ZE(e,n){var r=$m(n.data);switch(r.type){case"PLAY":e.g.play(),Lr(e);break;case"PAUSE":e.g.pause(),Lr(e);break;case"SEEK":n=r.currentTime;var s=r.resumeState;n!=null&&(e.g.currentTime=Number(n)),s&&s=="PLAYBACK_START"?(e.g.play(),Lr(e)):s&&s=="PLAYBACK_PAUSE"&&(e.g.pause(),Lr(e));break;case"STOP":e.h.bf().then(function(){e.h&&Lr(e)});break;case"GET_STATUS":o0(e,Number(r.requestId));break;case"VOLUME":s=r.volume,n=s.level,s=s.muted;var a=e.g.volume,d=e.g.muted;n!=null&&(e.g.volume=Number(n)),s!=null&&(e.g.muted=s),a==e.g.volume&&d==e.g.muted||Lr(e);break;case"LOAD":e.m=0,e.F=!1,e.C=!1,n=r.media,s=r.currentTime,a=e.K(n.contentId),d=r.autoplay||!0,e.G(n.customData),d&&(e.g.autoplay=!0),e.h.load(a,s).then(function(){e.h&&o0(e)}).catch(function(f){var g="LOAD_FAILED";f.category==7&&f.code==7e3&&(g="LOAD_CANCELLED"),gs(e,{requestId:Number(r.requestId),type:g},e.B)});break;default:gs(e,{requestId:Number(r.requestId),type:"INVALID_REQUEST",reason:"INVALID_COMMAND"},e.B)}}function G1(e,n,r,s){e.h&&gs(e,{type:"asyncComplete",id:r,error:s},e.l,n)}function gs(e,n,r,s){e.H&&(e=Ym(n),s?r.getCastChannel(s).send(e):r.broadcast(e))}function Lr(e,n,r){r=r===void 0?null:r;var s={mediaSessionId:0,playbackRate:e.g.playbackRate,playerState:e.s?tA:e.h.Pc()?iA:e.g.paused?hf:nA,currentTime:e.g.currentTime,supportedMediaCommands:63,volume:{level:e.g.volume,muted:e.g.muted}};r&&(s.media=r),gs(e,{requestId:n===void 0?0:n,type:"MEDIA_STATUS",status:[s]},e.B)}pe("shaka.cast.CastReceiver",zn),zn.prototype.destroy=zn.prototype.destroy,zn.prototype.setContentArtist=zn.prototype.Gh,zn.prototype.setContentImage=zn.prototype.Hh,zn.prototype.setContentTitle=zn.prototype.Jh,zn.prototype.clearContentMetadata=zn.prototype.sg,zn.prototype.setContentMetadata=zn.prototype.Ih,zn.prototype.isIdle=zn.prototype.gh,zn.prototype.isConnected=zn.prototype.isConnected;var JE=.5,eA=5,tA="IDLE",nA="PLAYING",iA="BUFFERING",hf="PAUSED";function s0(e,n,r){var s=sA(e),a=null;e=[];var d=[],f=new Set(s.map(function(g){return g.keyId}));if(f.delete(null),1<f.size)throw new se(2,4,4010);if(n||(d=s.filter(function(g){return g.He=="urn:mpeg:dash:mp4protection:2011"?(a=g.init||a,!1):!0}),d.length&&(e=oA(a,d,r,f),e.length==0&&(e=[qr("",a)]))),s.length&&(n||!d.length))for(e=[],n=A(Object.values(r)),r=n.next();!r.done;r=n.next())r=r.value,r!="org.w3.clearkey"&&e.push(qr(r,a));if(f=Array.from(f)[0]||null)for(n=A(e),r=n.next();!r.done;r=n.next())for(r=A(r.value.initData),s=r.next();!s.done;s=r.next())s.value.keyId=f;return{Bf:f,sj:a,drmInfos:e,Ff:!0}}function No(e,n,r,s){var a=s0(e,r,s);if(n.Ff)e=n.drmInfos.length==1&&!n.drmInfos[0].keySystem,r=a.drmInfos.length==0,(n.drmInfos.length==0||e&&!r)&&(n.drmInfos=a.drmInfos),n.Ff=!1;else if(0<a.drmInfos.length&&(n.drmInfos=n.drmInfos.filter(function(d){return a.drmInfos.some(function(f){return f.keySystem==d.keySystem})}),n.drmInfos.length==0))throw new se(2,4,4008);return a.Bf||n.Bf}function ff(e){var n=0,r=Ln(e),s=r.getUint32(n,!0);if(s!=e.byteLength)return[];e:{for(e=n+6,n=[];e<r.byteLength-1;){s=r.getUint16(e,!0),e+=2;var a=r.getUint16(e,!0);if(e+=2,a&1||a+e>r.byteLength){r=[];break e}var d=Tt(r,e,a);n.push({type:s,value:d}),e+=a}r=n}return r}function rA(e){e=A(e.getElementsByTagName("DATA"));for(var n=e.next();!n.done;n=e.next()){n=A(n.value.childNodes);for(var r=n.next();!r.done;r=n.next())if(r=r.value,r instanceof Element&&r.tagName=="LA_URL")return r.textContent}return""}function Qu(e){return e=Ft(e.node,"urn:microsoft:playready","pro"),!e||(e=wo(e.textContent),e=ff(e).filter(function(n){return n.type===ms})[0],!e)?"":(e=$o(e.value,!0),(e=Va(e,"WRMHEADER"))?rA(e):"")}function oA(e,n,r,s){var a=[];n=A(n);for(var d=n.next();!d.done;d=n.next()){d=d.value;var f=r[d.He];if(f){var g;if(g=Ft(d.node,"urn:microsoft:playready","pro")){g=wo(g.textContent);var T=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]);g=[{initData:Ba(g,T,new Set,0),initDataType:"cenc",keyId:d.keyId}]}else g=null;if(T=null,d.He==="urn:uuid:e2719d58-a985-b3c9-781a-b030af78d30e")if(T=s,T.size==0)T=null;else{var I=new Uint8Array([16,119,239,236,192,178,77,2,172,227,60,30,82,226,251,75]),M=new Uint8Array([]);T=[{initData:Ba(M,I,T,1),initDataType:"cenc",keyId:d.keyId}]}g=qr(f,d.init||e||g||T),(f=V1.get(f))&&(g.licenseServerUri=f(d)),a.push(g)}}return a}function sA(e){var n=[];e=A(e);for(var r=e.next();!r.done;r=e.next())(r=Gs(r.value))&&n.push(r);return n}function Gs(e){var n=e.getAttribute("schemeIdUri"),r=Cu(e,"urn:mpeg:cenc:2013","default_KID"),s=rc(e,"urn:mpeg:cenc:2013","pssh").map(rr);if(!n)return null;if(n=n.toLowerCase(),r&&(r=r.replace(/-/g,"").toLowerCase(),r.includes(" ")))throw new se(2,4,4009);var a=[];try{a=s.map(function(d){return{initDataType:"cenc",initData:wo(d),keyId:null}})}catch(d){throw new se(2,4,4007)}return{node:e,He:n,keyId:r,init:0<a.length?a:null}}var ms=1,V1=new Map().set("com.widevine.alpha",function(e){return(e=Ft(e.node,"urn:microsoft","laurl"))&&e.getAttribute("licenseUrl")||""}).set("com.microsoft.playready",Qu).set("com.microsoft.playready.recommendation",Qu).set("com.microsoft.playready.software",Qu).set("com.microsoft.playready.hardware",Qu).set("org.w3.clearkey",function(e){return(e=Ft(e.node,"http://dashif.org/guidelines/clearKey","Laurl"))&&e.getAttribute("Lic_type")==="EME-1.0"&&e.textContent?e.textContent:""});function pf(e,n,r,s,a){var d={RepresentationID:n,Number:r,Bandwidth:s,Time:a};return e.replace(/\$(RepresentationID|Number|Bandwidth|Time)?(?:%0([0-9]+)([diouxX]))?\$/g,function(f,g,T,I){if(f=="$$")return"$";var M=d[g];if(M==null)return f;switch(g=="RepresentationID"&&T&&(T=void 0),g=="Time"&&(M=Math.round(M)),I){case void 0:case"d":case"i":case"u":f=M.toString();break;case"o":f=M.toString(8);break;case"x":f=M.toString(16);break;case"X":f=M.toString(16).toUpperCase();break;default:f=M.toString()}return T=S.parseInt(T,10)||1,Array(Math.max(0,T-f.length)+1).join("0")+f})}function K1(e,n){var r=Nr(e,n,"timescale"),s=1;r&&(s=th(r)||1);var a=Nr(e,n,"duration");r=th(a||""),e.L.contentType=="image"&&(r=Ga(a||"")),r&&(r/=s);var d=Nr(e,n,"startNumber");a=Number(Nr(e,n,"presentationTimeOffset"))||0;var f=ko(d||"");if((d==null||f==null)&&(f=1),d=gf(e,n,"SegmentTimeline"),n=null,d){n=s,e=e.Y.duration||1/0,d=on(d,"S");for(var g=[],T=-a,I=0;I<d.length;++I){var M=d[I],L=d[I+1],N=nn(M,"t",ko),O=nn(M,"d",ko);if(M=nn(M,"r",eh),N!=null&&(N-=a),!O)break;if(N=N!=null?N:T,M=M||0,0>M)if(L){if(L=nn(L,"t",ko),L==null)break;if(N>=L)break;M=Math.ceil((L-N)/O)-1}else{if(e==1/0)break;if(N/n>=e)break;M=Math.ceil((e*n-N)/O)-1}for(0<g.length&&N!=T&&(g[g.length-1].end=N/n),L=0;L<=M;++L)T=N+O,g.push({start:N/n,end:T/n,Nh:N}),N=T}n=g}return{timescale:s,ya:r,pc:f,qb:a/s||0,cf:a,timeline:n}}function Nr(e,n,r){return[n(e.L),n(e.va),n(e.oa)].filter(ri).map(function(s){return s.getAttribute(r)}).reduce(function(s,a){return s||a})}function gf(e,n,r){return[n(e.L),n(e.va),n(e.oa)].filter(ri).map(function(s){return ic(s,r)}).reduce(function(s,a){return s||a})}function uA(e,n,r,s,a,d){for(var f=Cu(e,"http://www.w3.org/1999/xlink","href"),g=Cu(e,"http://www.w3.org/1999/xlink","actuate")||"onRequest",T=A(Array.from(e.attributes)),I=T.next();!I.done;I=T.next())I=I.value,I.namespaceURI=="http://www.w3.org/1999/xlink"&&e.removeAttributeNS(I.namespaceURI,I.localName);if(5<=d)return Nt(new se(2,4,4028));if(g!="onLoad")return Nt(new se(2,4,4027));var M=Ai([s],[f]);return a.request(0,Ct(M,n)).ia(function(L){if(L=Ig(L.data,e.tagName),!L)return Nt(new se(2,4,4001,f));for(;e.childNodes.length;)e.removeChild(e.childNodes[0]);for(;L.childNodes.length;){var N=L.childNodes[0];L.removeChild(N),e.appendChild(N)}for(L=A(Array.from(L.attributes)),N=L.next();!N.done;N=L.next())e.setAttributeNode(N.value.cloneNode(!1));return Kc(e,n,r,M[0],a,d+1)})}function Kc(e,n,r,s,a,d){if(d=d===void 0?0:d,Cu(e,"http://www.w3.org/1999/xlink","href")){var f=uA(e,n,r,s,a,d);return r&&(f=f.ia(void 0,function(){return Kc(e,n,r,s,a,d)})),f}f=[];for(var g=A(Array.from(e.childNodes)),T=g.next();!T.done;T=g.next())T=T.value,T instanceof Element&&(Cu(T,"http://www.w3.org/1999/xlink","href")=="urn:mpeg:dash:resolve-to-zero:2013"?e.removeChild(T):T.tagName!="SegmentTimeline"&&f.push(Kc(T,n,r,s,a,d)));return Ag(f).ia(function(){return e})}function aA(e,n,r,s,a,d,f){var g,T=new Kt().S("sidx",function(I){g=H1(n,s,a,d,f,r,I)});if(e&&T.parse(e),g)return g;throw new se(2,3,3004)}function H1(e,n,r,s,a,d,f){var g=[];f.reader.skip(4);var T=f.reader.N();if(T==0)throw new se(2,3,3005);if(f.version==0)var I=f.reader.N(),M=f.reader.N();else I=f.reader.Cb(),M=f.reader.Cb();f.reader.skip(2);var L=f.reader.De();for(e=e+f.size+M,M=0;M<L;M++){var N=f.reader.N(),O=(N&2147483648)>>>31;N&=2147483647;var z=f.reader.N();if(f.reader.skip(4),O==1)throw new se(2,3,3006);g.push(new ft(I/T+r,(I+z)/T+r,function(){return d},e,e+N-1,n,r,s,a)),I+=z,e+=N}return f.parser.stop(),g}function fr(e){this.h=Ln(e),this.g=new Pt(this.h,0)}fr.prototype.xa=function(){return this.g.xa()};function Do(e){var n=W1(e);if(7<n.length)throw new se(2,3,3002);var r=0;n=A(n);for(var s=n.next();!s.done;s=n.next())r=256*r+s.value;n=W1(e);e:{s=A(q1);for(var a=s.next();!a.done;a=s.next())if(ir(n,new Uint8Array(a.value))){s=!0;break e}s=!1}if(s)n=e.h.byteLength-e.g.ma();else{if(n.length==8&&n[1]&224)throw new se(2,3,3001);for(a=s=0;a<n.length;a++){var d=n[a];s=a==0?d&(1<<8-n.length)-1:256*s+d}n=s}return n=e.g.ma()+n<=e.h.byteLength?n:e.h.byteLength-e.g.ma(),s=Ln(e.h,e.g.ma(),n),e.g.skip(n),new X1(r,s)}function W1(e){var n=e.g.ma(),r=e.g.pb();if(r==0)throw new se(2,3,3002);return r=8-Math.floor(Math.log2(r)),e.g.skip(r-1),Tt(e.h,n,r)}var q1=[[255],[127,255],[63,255,255],[31,255,255,255],[15,255,255,255,255],[7,255,255,255,255,255],[3,255,255,255,255,255,255],[1,255,255,255,255,255,255,255]];function X1(e,n){this.id=e,this.g=n}function u0(e){if(8<e.g.byteLength)throw new se(2,3,3002);if(e.g.byteLength==8&&e.g.getUint8(0)&224)throw new se(2,3,3001);for(var n=0,r=0;r<e.g.byteLength;r++){var s=e.g.getUint8(r);n=256*n+s}return n}function Y1(e,n,r,s,a,d,f,g,T){function I(){return a}var M=[];e=new fr(e.g);for(var L=null,N=null;e.xa();){var O=Do(e);if(O.id==187){var z=lA(O);z&&(O=r*z.Oh,z=n+z.xh,L!=null&&M.push(new ft(L+f,O+f,I,N,z-1,d,f,g,T)),L=O,N=z)}}return L!=null&&M.push(new ft(L+f,s+f,I,N,null,d,f,g,T)),M}function lA(e){var n=new fr(e.g);if(e=Do(n),e.id!=179)throw new se(2,3,3013);if(e=u0(e),n=Do(n),n.id!=183)throw new se(2,3,3012);n=new fr(n.g);for(var r=0;n.xa();){var s=Do(n);if(s.id==241){r=u0(s);break}}return{Oh:e,xh:r}}function $1(e,n){if(n=gf(e,n,"Initialization"),!n)return null;var r=e.L.Na,s=n.getAttribute("sourceURL");s&&(r=Ai(e.L.Na,[s])),s=0;var a=null;return(n=nn(n,"range",Jd))&&(s=n.start,a=n.end),new ur(function(){return r},s,a,ex(e))}function cA(e,n){var r=Number(Nr(e,vs,"presentationTimeOffset"))||0,s=Nr(e,vs,"timescale"),a=1;s&&(a=th(s)||1);var d=r/a||0,f=$1(e,vs);dA(e,f);var g=Jl(e);return{ac:function(){var T=gf(g,vs,"RepresentationIndex"),I=g.L.Na;return T&&(T=T.getAttribute("sourceURL"))&&(I=Ai(g.L.Na,[T])),T=Z1(g),Q1(g,n,f,I,T.start,T.end,d)}}}function Q1(e,n,r,s,a,d,f){var g,T,I,M,L,N,O,z,$,G,W,ae,J,fe,xe;return j(function(Se){if(Se.g==1)return g=e.presentationTimeline,T=!e.ib||!e.Y.oe,I=e.Y.start,M=e.Y.duration,L=e.L.mimeType.split("/")[1],N=n,O=null,z=[N(s,a,d),L=="webm"?N(r.Pa(),r.Ta,r.Ba):null],N=null,k(Se,Promise.all(z),2);if($=Se.h,G=$[0],W=$[1]||null,ae=null,J=I-f,fe=I,xe=M?I+M:1/0,L=="mp4")var Me=aA(G,a,s,r,J,fe,xe);else{if(Me=new fr(W),Do(Me).id!=440786851)throw new se(2,3,3008);var Oe=Do(Me);if(Oe.id!=408125543)throw new se(2,3,3009);Me=Oe.g.byteOffset,Oe=new fr(Oe.g);for(var Ue=null;Oe.xa();){var rt=Do(Oe);if(rt.id==357149030){Ue=rt;break}}if(!Ue)throw new se(2,3,3010);for(Ue=new fr(Ue.g),rt=1e6,Oe=null;Ue.xa();){var ut=Do(Ue);if(ut.id==2807729)rt=u0(ut);else if(ut.id==17545)if(ut.g.byteLength==4)Oe=ut.g.getFloat32(0);else if(ut.g.byteLength==8)Oe=ut.g.getFloat64(0);else throw new se(2,3,3003)}if(Oe==null)throw new se(2,3,3011);if(Ue=rt/1e9,Oe*=Ue,rt=Do(new fr(G)),rt.id!=475249515)throw new se(2,3,3007);Me=Y1(rt,Me,Ue,Oe,s,r,J,fe,xe)}return ae=Me,g.lc(ae),O=new Rt(ae),T&&O.wb(fe,xe,!0),Se.return(O)})}function vs(e){return e.Yc}function Z1(e){var n=gf(e,vs,"RepresentationIndex");return e=Nr(e,vs,"indexRange"),e=Jd(e||""),n&&(e=nn(n,"range",Jd,e)),e}function dA(e,n){if(J1(e,n),!Z1(e))throw new se(2,4,4002)}function J1(e,n){var r=e.L.mimeType.split("/")[1];if(e.L.contentType!=yt&&r!="mp4"&&r!="webm")throw new se(2,4,4006);if(r=="webm"&&!n)throw new se(2,4,4005)}function ex(e){var n=e.L;return{bandwidth:e.bandwidth,audioSamplingRate:n.audioSamplingRate,codecs:n.codecs,contentType:n.contentType,frameRate:n.frameRate||null,height:n.height||null,mimeType:n.mimeType,channelsCount:n.Cd,pixelAspectRatio:n.pixelAspectRatio||null,width:n.width||null}}function hA(e,n){var r=$1(e,a0),s=fA(e);if(!s.ya&&!s.timeline&&1<s.jc.length)throw new se(2,4,4002);if(!s.ya&&!e.Y.duration&&!s.timeline&&s.jc.length==1)throw new se(2,4,4002);if(s.timeline&&s.timeline.length==0)throw new se(2,4,4002);var a=null,d=null;e.oa.id&&e.L.id&&(d=n[e.oa.id+","+e.L.id])&&(a=d.segmentIndex);var f=pA(e.Y.start,e.Y.duration,e.L.Na,s,r);return n=!a,a?a.kc(f,e.presentationTimeline.mb()):a=new Rt(f),e.presentationTimeline.lc(f),e.ib&&e.Y.oe||a.wb(e.Y.start,e.Y.duration?e.Y.start+e.Y.duration:1/0,n),d&&(d.segmentIndex=a),{ac:function(){return a&&a.g.length!=0||a.Sc(f),Promise.resolve(a)}}}function a0(e){return e.Db}function fA(e){var n=gA(e);e=K1(e,a0);var r=e.pc;r==0&&(r=1);var s=0;return e.ya?s=e.ya*(r-1):e.timeline&&0<e.timeline.length&&(s=e.timeline[0].start),{ya:e.ya,startTime:s,pc:r,qb:e.qb,timeline:e.timeline,jc:n}}function pA(e,n,r,s,a){var d=s.jc.length;s.timeline&&s.timeline.length!=s.jc.length&&(d=Math.min(s.timeline.length,s.jc.length));for(var f=e-s.qb,g=n?e+n:1/0,T=[],I=s.startTime,M={},L=0;L<d;M={Vd:M.Vd},L++){var N=s.jc[L];M.Vd=Ai(r,[N.mh]);var O=void 0;O=s.ya!=null?I+s.ya:s.timeline?s.timeline[L].end:I+n,T.push(new ft(e+I,e+O,function(z){return function(){return z.Vd}}(M),N.start,N.end,a,f,e,g)),I=O}return T}function gA(e){return[e.L.Db,e.va.Db,e.oa.Db].filter(ri).map(function(n){return on(n,"SegmentURL")}).reduce(function(n,r){return 0<n.length?n:r}).map(function(n){n.getAttribute("indexRange")&&!e.Mf&&(e.Mf=!0);var r=n.getAttribute("media");return n=nn(n,"mediaRange",Jd,{start:0,end:null}),{mh:r,start:n.start,end:n.end}})}function mA(e,n,r,s,a,d){var f=yA(e),g=tx(e);Vs(g);var T=Jl(e);if(g.Oc)return J1(e,f),{ac:function(){var O=pf(g.Oc,T.L.id,null,T.bandwidth||null,null);return O=Ai(T.L.Na,[O]),Q1(T,n,f,O,0,null,g.qb)}};if(g.ya)return s||e.va.contentType==="image"||(e.presentationTimeline.ze(g.ya),e.presentationTimeline.Ae(e.Y.start)),{ac:function(){return vA(T,g,a,f,d)}};var I=null;s=s=null,e.oa.id&&e.L.id&&(s=e.oa.id+","+e.L.id,s=r[s])&&(I=s.segmentIndex);var M=nx(T,g,f);r=e.Y.start;var L=e.Y.duration?e.Y.start+e.Y.duration:1/0,N=!(e.ib&&e.Y.oe);return I?(N&&new Rt(M).wb(r,L,!0),I.kc(M,e.presentationTimeline.mb())):I=new Rt(M),e.presentationTimeline.lc(M),N&&I.wb(r,L),s&&e.ib&&(s.segmentIndex=I),{ac:function(){return I&&I.g.length!=0||I.Sc(M),Promise.resolve(I)}}}function mf(e){return e.Zc}function tx(e){var n=K1(e,mf),r=Nr(e,mf,"media");return e=Nr(e,mf,"index"),{ya:n.ya,timescale:n.timescale,pc:n.pc,qb:n.qb,cf:n.cf,timeline:n.timeline,xe:r,Oc:e}}function Vs(e){var n=e.Oc?1:0;if(n+=e.timeline?1:0,n+=e.ya?1:0,n==0)throw new se(2,4,4002);if(n!=1&&(e.Oc&&(e.timeline=null),e.ya=null),!e.Oc&&!e.xe)throw new se(2,4,4002)}function vA(e,n,r,s,a){function d(Ue){var rt=(Ue-O)*N,ut=rt+n.qb,ct=rt+I;rt=ct+N;var It=Math.min(rt,g());return ct=new ft(ct,It,function(){var Ye=pf($,W,Ue,G,ut*z);return Ai(ae,[Ye])},0,null,s,J,I,g()),ct.j=rt,ct}function f(){var Ue=[Math.max(T.mb(),I),Math.min(T.Ib(),g())].map(function(rt){return rt-I});return[Math.ceil(Ue[0]/N),Math.ceil(Ue[1]/N)-1].map(function(rt){return rt+O})}function g(){var Ue=M!=null&&a[M]||L;return Ue?I+Ue:1/0}var T=e.presentationTimeline,I=e.Y.start,M=e.oa.id,L=e.Y.duration,N=n.ya,O=n.pc,z=n.timescale,$=n.xe,G=e.bandwidth||null,W=e.L.id,ae=e.L.Na,J=I-n.qb,fe=f();e=e.ib?Math.max(fe[0],fe[1]-r+1):fe[0],fe=fe[1],r=[];for(var xe=e;xe<=fe;++xe){var Se=d(xe);r.push(Se)}var Me=new Rt(r);if(r=T.Ib()<g(),xe=T.T(),r||xe){var Oe=Math.max(e,fe+1);Me.Nd(N,function(){var Ue=T.mb();Me.Gb(Ue);var rt=A(f());rt.next(),rt=rt.next().value;for(var ut=[];Oe<=rt;){var ct=d(Oe);ut.push(ct),Oe++}return Ue>g()&&!ut.length?null:ut})}return Promise.resolve(Me)}function nx(e,n,r){var s=e.Y.start,a=e.Y.duration,d=s-n.qb;a=a?s+a:1/0;for(var f=[],g={},T=0;T<n.timeline.length;g={Ud:g.Ud,Yd:g.Yd,ae:g.ae,Rd:g.Rd,ce:g.ce,Sd:g.Sd},T++){var I=n.timeline[T],M=I.start,L=I.Nh;I=I.end,g.ae=T+n.pc,g.ce=L+n.cf,g.Yd=e.L.id,g.Rd=e.bandwidth||null,g.Ud=n.xe,g.Sd=e.L.Na,f.push(new ft(s+M,s+I,function(N){return function(){var O=pf(N.Ud,N.Yd,N.ae,N.Rd||null,N.ce);return Ai(N.Sd,[O]).map(function(z){return z.toString()})}}(g),0,null,r,d,s,a))}return f}function yA(e){var n=Nr(e,mf,"initialization");if(!n)return null;var r=e.L.id,s=e.bandwidth||null,a=e.L.Na;return new ur(function(){var d=pf(n,r,null,s,null);return Ai(a,[d])},0,null,ex(e))}function l0(){this.l=[],this.g=[],this.h=[],this.j=[],this.i=[],this.m=new Set}l0.prototype.release=function(){for(var e=A(this.g.concat(this.h,this.j,this.i)),n=e.next();!n.done;n=e.next())n=n.value,n.segmentIndex&&n.segmentIndex.release();this.g=[],this.h=[],this.j=[],this.i=[],this.l=[]};function Hc(e,n,r){var s,a,d,f,g,T,I,M,L,N,O,z,$,G,W,ae,J,fe,xe,Se,Me,Oe,Ue,rt,ut,ct,It,Ye,gn,un;return j(function(wn){switch(wn.g){case 1:if(s=$e,vf(n),yf(n),Il(n),ix(n),!r&&n.length==1){a=n[0],e.g=a.nd,e.h=a.Od,e.j=a.textStreams,e.i=a.imageStreams,wn.D(2);break}for(d=-1,f=0;f<n.length;f++)g=n[f],e.m.has(g.id)||(e.m.add(g.id),d==-1&&(d=f));if(d==-1)return wn.return();for(T=n.map(function(po){return po.nd}),I=n.map(function(po){return po.Od}),M=n.map(function(po){return po.textStreams}),L=n.map(function(po){return po.imageStreams}),N=A(M),O=N.next();!O.done;O=N.next())z=O.value,z.push(lx(s.ha));for($=A(L),G=$.next();!G.done;G=$.next())W=G.value,W.push(lx(s.Ac));return k(wn,Ks(e.g,T,d,Wc,Zu),3);case 3:return k(wn,Ks(e.h,I,d,Wc,Zu),4);case 4:return k(wn,Ks(e.j,M,d,Wc,Zu),5);case 5:return k(wn,Ks(e.i,L,d,Wc,Zu),2);case 2:if(ae=0,J=[],e.h.length&&e.g.length)for(Ue=A(e.g),rt=Ue.next();!rt.done;rt=Ue.next())for(ut=rt.value,ct=A(e.h),It=ct.next();!It.done;It=ct.next())Ye=It.value,gn=oh(ut.drmInfos,Ye.drmInfos),ut.drmInfos.length&&Ye.drmInfos.length&&!gn.length||(un=ae++,J.push({id:un,language:ut.language,primary:ut.primary,audio:ut,video:Ye,bandwidth:(ut.bandwidth||0)+(Ye.bandwidth||0),drmInfos:gn,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]}));else for(fe=e.h.concat(e.g),xe=A(fe),Se=xe.next();!Se.done;Se=xe.next())Me=Se.value,Oe=ae++,J.push({id:Oe,language:Me.language,primary:Me.primary,audio:Me.type==s.jd?Me:null,video:Me.type==s.Ma?Me:null,bandwidth:Me.bandwidth||0,drmInfos:Me.drmInfos,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]});e.l=J,le(wn)}})}function vf(e){e=A(e);for(var n=e.next();!n.done;n=e.next()){n=n.value;for(var r=[],s=A(n.nd),a=s.next();!a.done;a=s.next()){a=a.value;for(var d=!1,f=A(r),g=f.next();!g.done;g=f.next())g=g.value,a.id!=g.id&&a.channelsCount==g.channelsCount&&a.language==g.language&&a.bandwidth==g.bandwidth&&a.label==g.label&&a.codecs==g.codecs&&a.mimeType==g.mimeType&&xo(a.roles,g.roles)&&a.audioSamplingRate==g.audioSamplingRate&&a.primary==g.primary&&(d=!0);d||r.push(a)}n.nd=r}}function Il(e){e=A(e);for(var n=e.next();!n.done;n=e.next()){n=n.value;for(var r=[],s=A(n.textStreams),a=s.next();!a.done;a=s.next()){a=a.value;for(var d=!1,f=A(r),g=f.next();!g.done;g=f.next())g=g.value,a.id!=g.id&&a.language==g.language&&a.label==g.label&&a.codecs==g.codecs&&a.mimeType==g.mimeType&&a.bandwidth==g.bandwidth&&xo(a.roles,g.roles)&&(d=!0);d||r.push(a)}n.textStreams=r}}function yf(e){e=A(e);for(var n=e.next();!n.done;n=e.next()){n=n.value;for(var r=[],s=A(n.Od),a=s.next();!a.done;a=s.next()){a=a.value;for(var d=!1,f=A(r),g=f.next();!g.done;g=f.next())g=g.value,a.id!=g.id&&a.width==g.width&&a.frameRate==g.frameRate&&a.codecs==g.codecs&&a.mimeType==g.mimeType&&a.label==g.label&&xo(a.roles,g.roles)&&Oa(a.closedCaptions,g.closedCaptions)&&a.bandwidth==g.bandwidth&&(d=!0);d||r.push(a)}n.Od=r}}function ix(e){e=A(e);for(var n=e.next();!n.done;n=e.next()){n=n.value;for(var r=[],s=A(n.imageStreams),a=s.next();!a.done;a=s.next()){a=a.value;for(var d=!1,f=A(r),g=f.next();!g.done;g=f.next())g=g.value,a.id!=g.id&&a.width==g.width&&a.codecs==g.codecs&&a.mimeType==g.mimeType&&(d=!0);d||r.push(a)}n.imageStreams=r}}function c0(e){var n,r,s,a,d,f,g,T,I,M,L,N,O,z,$,G,W,ae,J,fe,xe,Se,Me,Oe,Ue,rt,ut;return j(function(ct){switch(ct.g){case 1:if(n=$e,e.length==1)return ct.return(e[0]);for(r=e.map(function(It){return It.filter(function(Ye){return Ye.type==n.jd})}),s=e.map(function(It){return It.filter(function(Ye){return Ye.type==n.Ma})}),a=e.map(function(It){return It.filter(function(Ye){return Ye.type==n.ha})}),d=e.map(function(It){return It.filter(function(Ye){return Ye.type==n.Ac})}),f=A(a),g=f.next();!g.done;g=f.next())T=g.value,T.push(ax(n.ha));for(I=A(d),M=I.next();!M.done;M=I.next())L=M.value,L.push(ax(n.Ac));return k(ct,Ks([],r,0,qc,Hs),2);case 2:return N=ct.h,k(ct,Ks([],s,0,qc,Hs),3);case 3:return O=ct.h,k(ct,Ks([],a,0,qc,Hs),4);case 4:return z=ct.h,k(ct,Ks([],d,0,qc,Hs),5);case 5:if($=ct.h,G=0,O.length&&N.length)for(xe=A(N),Se=xe.next();!Se.done;Se=xe.next())for(Me=Se.value,Oe=A(O),Ue=Oe.next();!Ue.done;Ue=Oe.next())rt=Ue.value,ut=G++,rt.variantIds.push(ut),Me.variantIds.push(ut);else for(W=O.concat(N),ae=A(W),J=ae.next();!J.done;J=ae.next())fe=J.value,fe.variantIds=[G++];return ct.return(O.concat(N).concat(z).concat($))}})}function Ks(e,n,r,s,a){var d,f,g,T,I,M,L,N,O,z,$,G,W,ae,J,fe,xe,Se,Me,Oe;return j(function(Ue){switch(Ue.g){case 1:for(d=$e,f=[],g=0;g<n.length;g++)g>=r?f.push(new Set(n[g])):f.push(new Set);T=A(e),I=T.next();case 2:if(I.done){Ue.D(4);break}return M=I.value,k(Ue,xA(M,n,r,a,f),5);case 5:if(L=Ue.h,!L)throw new se(2,4,4037);I=T.next(),Ue.D(2);break;case 4:for(N=A(f),O=N.next();!O.done;O=N.next())for(z=O.value,$=A(z),G=$.next();!G.done;G=$.next())W=G.value,(ae=TA(W,n,s,a,f))&&e.push(ae);for(J=A(f),O=J.next();!O.done;O=J.next())for(fe=O.value,xe={},Se=A(fe),G=Se.next();!G.done;xe={ub:xe.ub},G=Se.next())if(xe.ub=G.value,Me=xe.ub.type==d.ha&&!xe.ub.language,Oe=xe.ub.type==d.Ac&&!xe.ub.tilesLayout,!Me&&!Oe&&e.some(function(rt){return function(ut){return ut.mimeType==rt.ub.mimeType&&_s(ut.codecs)==_s(rt.ub.codecs)}}(xe)))throw new se(2,4,4037);return Ue.return(e)}})}function xA(e,n,r,s,a){return j(function(d){return d.g==1?(d0(n,e),e.matchedStreams?e.segmentIndex?k(d,rx(e,r),2):d.D(2):d.return(!1)):(ox(e,r,s,a),d.return(!0))})}function rx(e,n){var r,s,a,d,f,g,T;return j(function(I){if(I.g==1){for(r=[],s=e.matchedStreams,a=A(s),d=a.next();!d.done;d=a.next())f=d.value,r.push(f.createSegmentIndex()),f.trickModeVideo&&!f.trickModeVideo.segmentIndex&&r.push(f.trickModeVideo.createSegmentIndex());return k(I,Promise.all(r),2)}if(e.segmentIndex instanceof pn)for(g=0;g<s.length;g++)T=s[g],T.segmentIndex&&g>=n&&e.segmentIndex.l.push(T.segmentIndex);le(I)})}function TA(e,n,r,s,a){var d=r(e);return d0(n,d),d.createSegmentIndex&&(d.createSegmentIndex=function(){return j(function(f){return d.segmentIndex?f.D(0):(d.segmentIndex=new pn,k(f,rx(d,0),0))})}),d.matchedStreams?(ox(d,0,s,a),d):null}function ox(e,n,r,s){for(var a=e.matchedStreams,d=0;d<a.length;d++)if(d>=n){var f=a[d];r(e,f);var g=!0;e.type=="audio"&&vo(e.language,f.language)==0&&(g=!1),g&&s[d].delete(f)}}function Wc(e){var n=Object.assign({},e);return n.originalId=null,n.createSegmentIndex=function(){return Promise.resolve()},n.closeSegmentIndex=function(){if(n.segmentIndex&&(n.segmentIndex.release(),n.segmentIndex=null),n.matchedStreams)for(var r=A(n.matchedStreams),s=r.next();!s.done;s=r.next())s=s.value,s.segmentIndex&&(s.segmentIndex.release(),s.segmentIndex=null)},n.segmentIndex=null,n.emsgSchemeIdUris=[],n.keyIds=new Set,n.closedCaptions=null,n.trickModeVideo=null,n}function qc(e){return e=Object.assign({},e),e.keyIds=new Set,e.segments=[],e.variantIds=[],e.closedCaptions=null,e}function Zu(e,n){e.roles=Array.from(new Set(e.roles.concat(n.roles))),n.emsgSchemeIdUris&&(e.emsgSchemeIdUris=Array.from(new Set(e.emsgSchemeIdUris.concat(n.emsgSchemeIdUris)))),e.keyIds=function(d,f){return new Set([].concat(q(d),q(f)))}(e.keyIds,n.keyIds),e.originalId==null?e.originalId=n.originalId:e.originalId+=","+(n.originalId||"");var r=oh(e.drmInfos,n.drmInfos);if(n.drmInfos.length&&e.drmInfos.length&&!r.length)throw new se(2,4,4038);if(e.drmInfos=r,e.encrypted=e.encrypted||n.encrypted,n.closedCaptions){e.closedCaptions||(e.closedCaptions=new Map),r=A(n.closedCaptions);for(var s=r.next();!s.done;s=r.next()){var a=A(s.value);s=a.next().value,a=a.next().value,e.closedCaptions.set(s,a)}}n.trickModeVideo?(e.trickModeVideo||(e.trickModeVideo=Wc(n.trickModeVideo),e.trickModeVideo.createSegmentIndex=function(){return e.trickModeVideo.segmentIndex=e.segmentIndex.clone(),Promise.resolve()}),Zu(e.trickModeVideo,n.trickModeVideo)):e.trickModeVideo&&Zu(e.trickModeVideo,n)}function Hs(e,n){e.roles=Array.from(new Set(e.roles.concat(n.roles)));var r=n.keyIds;if(r=new Set([].concat(q(e.keyIds),q(r))),e.keyIds=r,e.encrypted=e.encrypted&&n.encrypted,e.segments.push.apply(e.segments,q(n.segments)),n.closedCaptions)for(e.closedCaptions||(e.closedCaptions=new Map),n=A(n.closedCaptions),r=n.next();!r.done;r=n.next()){var s=A(r.value);r=s.next().value,s=s.next().value,e.closedCaptions.set(r,s)}}function d0(e,n){var r=[];e=A(e);for(var s=e.next();!s.done;s=e.next()){var a=n,d={audio:Dr,video:Dr,text:sx,image:ys}[a.type],f={audio:Xc,video:h0,text:wA,image:ux}[a.type],g=null;s=A(s.value);for(var T=s.next();!T.done;T=s.next())T=T.value,!d(a,T)||g&&!f(a,g,T)||(g=T);if(a=g,!a)return;r.push(a)}n.matchedStreams=r}function Dr(e,n){var r;return!(r=n.mimeType!=e.mimeType||_s(n.codecs)!=_s(e.codecs))&&(r=e.drmInfos)&&(e=e.drmInfos,n=n.drmInfos,r=!(!(e.length&&n.length)||0<oh(e,n).length)),!r}function sx(e,n){return e.language?n.language?!(vo(e.language,n.language)==0||n.kind!=e.kind):!0:!1}function ys(e){return!!e.tilesLayout}function Xc(e,n,r){if(e.id==r.id)return!0;var s=vo(e.language,n.language),a=vo(e.language,r.language);return a>s?!0:a<s?!1:e.roles.length?(s=n.roles.filter(function(d){return e.roles.includes(d)}),a=r.roles.filter(function(d){return e.roles.includes(d)}),a.length>s.length?!0:a.length<s.length?!1:r.roles.length<n.roles.length):!r.roles.length&&n.roles.length?!0:r.roles.length&&!n.roles.length?!1:!n.primary&&r.primary?!0:n.primary&&!r.primary?!1:(s=Ws(e.channelsCount,n.channelsCount,r.channelsCount),s==uo?!0:s==bo?!1:(s=Ws(e.audioSamplingRate,n.audioSamplingRate,r.audioSamplingRate),s==uo?!0:s==bo?!1:!!(e.bandwidth&&cx(e.bandwidth,n.bandwidth,r.bandwidth)==uo)))}function h0(e,n,r){if(e.id==r.id)return!0;var s=Ws(e.width*e.height,n.width*n.height,r.width*r.height);if(s==uo)return!0;if(s==bo)return!1;if(e.frameRate){if(s=Ws(e.frameRate,n.frameRate,r.frameRate),s==uo)return!0;if(s==bo)return!1}return!!(e.bandwidth&&cx(e.bandwidth,n.bandwidth,r.bandwidth)==uo)}function wA(e,n,r){if(e.id==r.id)return!0;var s=vo(e.language,n.language),a=vo(e.language,r.language);if(a>s)return!0;if(a<s)return!1;if(!n.primary&&r.primary)return!0;if(n.primary&&!r.primary)return!1;if(e.roles.length){if(s=n.roles.filter(function(d){return e.roles.includes(d)}),a=r.roles.filter(function(d){return e.roles.includes(d)}),a.length>s.length)return!0;if(a.length<s.length)return!1}else{if(!r.roles.length&&n.roles.length)return!0;if(r.roles.length&&!n.roles.length)return!1}return!(r.mimeType!=e.mimeType||r.codecs!=e.codecs||n.mimeType==e.mimeType&&n.codecs==e.codecs)}function ux(e,n,r){return e.id==r.id?!0:Ws(e.width*e.height,n.width*n.height,r.width*r.height)==uo}function ax(e){return{id:0,originalId:"",primary:!1,type:e,mimeType:"",codecs:"",language:"",label:null,width:null,height:null,encrypted:!1,keyIds:new Set,segments:[],variantIds:[],roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null}}function lx(e){return{id:0,originalId:"",createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new Rt([]),mimeType:"",codecs:"",encrypted:!1,drmInfos:[],keyIds:new Set,language:"",label:null,type:e,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null}}function Ws(e,n,r){if(n==e&&e!=r)return bo;if(r==e&&e!=n)return uo;if(n>e){if(r<=e||r-e<n-e)return uo;if(r-e>n-e)return bo}else{if(r>e)return bo;if(e-r<e-n)return uo;if(e-r>e-n)return bo}return dx}function cx(e,n,r){return n=Math.abs(e-n),e=Math.abs(e-r),e<n?uo:n<e?bo:dx}var uo=1,dx=0,bo=-1;function Ju(){var e=this;this.h=this.g=null,this.m=[],this.i=null,this.I=1,this.l={},this.M={},this.j=new l0,this.H=0,this.J=new Vl(5),this.G=new Qe(function(){g0(e)}),this.s=new eo,this.B=null,this.K=[],this.C=1/0,this.F=!1}v=Ju.prototype,v.configure=function(e){this.g=e},v.start=function(e,n){var r=this,s;return j(function(a){if(a.g==1)return r.F=n.isLowLatencyMode(),r.m=[e],r.h=n,k(a,f0(r),2);if(s=a.h,r.h&&at(r,s),!r.h)throw new se(2,7,7001);return a.return(r.i)})},v.stop=function(){for(var e=A(Object.values(this.l)),n=e.next();!n.done;n=e.next())n=n.value,n.segmentIndex&&n.segmentIndex.release();return this.j&&this.j.release(),this.g=this.h=null,this.m=[],this.i=null,this.l={},this.j=null,this.G!=null&&(this.G.stop(),this.G=null),this.s.destroy()},v.update=function(){var e=this,n;return j(function(r){if(r.g==1)return ye(r,2),k(r,f0(e),4);if(r.g!=2)return _e(r,0);if(n=we(r),!e.h||!n)return r.return();e.h.onError(n),le(r)})},v.onExpirationUpdated=function(){};function f0(e){var n,r,s,a,d,f,g;return j(function(T){return T.g==1?(n=Ct(e.m,e.g.retryParameters),r=e.h.networkingEngine,e.h.modifyManifestRequest(n,{format:"d"}),s=Date.now(),a=r.request(0,n),Iu(e.s,a),k(T,a.promise,2)):T.g!=3?(d=T.h,e.h?(d.uri&&!e.m.includes(d.uri)&&e.m.unshift(d.uri),k(T,EA(e,d.data,d.uri),3)):T.return(0)):(f=Date.now(),g=(f-s)/1e3,e.J.sample(1,g),T.return(g))})}function EA(e,n,r){var s,a,d,f;return j(function(g){if(g.g==1){if(s=Ig(n,"MPD"),!s)throw new se(2,4,4001,r);return e.g.dash.disableXlinkProcessing?g.return(p0(e,s,r)):(a=e.g.dash.xlinkFailGracefully,d=Kc(s,e.g.retryParameters,a,r,e.h.networkingEngine),Iu(e.s,d),k(g,d.promise,2))}return f=g.h,g.return(p0(e,f,r))})}function p0(e,n,r){var s,a,d,f,g,T,I,M,L,N,O,z,$,G,W,ae,J,fe,xe,Se,Me,Oe,Ue,rt,ut,ct,It,Ye,gn,un;return j(function(wn){switch(wn.g){case 1:if((s=e.g.dash.manifestPreprocessor)&&s(n),a=[r],d=on(n,"Location").map(rr).filter(ri),0<d.length&&(f=Ai(a,d),a=e.m=f),g=on(n,"BaseURL"),T=g.map(rr),I=Ai(a,T),M=0,g&&g.length&&(M=nn(g[0],"availabilityTimeOffset",Ga)||0),L=e.g.dash.ignoreMinBufferTime,N=0,L||(N=nn(n,"minBufferTime",Co)||0),e.H=nn(n,"minimumUpdatePeriod",Co,-1),O=nn(n,"availabilityStartTime",za),z=nn(n,"timeShiftBufferDepth",Co),$=e.g.dash.ignoreSuggestedPresentationDelay,G=null,$||(G=nn(n,"suggestedPresentationDelay",Co)),W=e.g.dash.ignoreMaxSegmentDuration,ae=null,W||(ae=nn(n,"maxSegmentDuration",Co)),J=n.getAttribute("type")||"static",e.i)for(fe=e.i.presentationTimeline,xe=A(Object.values(e.l)),Se=xe.next();!Se.done;Se=xe.next())Me=Se.value,Me.segmentIndex&&Me.segmentIndex.Gb(fe.mb());else Oe=e.g.defaultPresentationDelay||1.5*N,Ue=G!=null?G:Oe,fe=new nt(O,Ue,e.g.dash.autoCorrectDrift);return fe.$c(J=="static"),fe.T()&&!isNaN(e.g.availabilityWindowOverride)&&(z=e.g.availabilityWindowOverride),z==null&&(z=1/0),fe.Re(z),rt=n.getAttribute("profiles")||"",ut={ib:J!="static",presentationTimeline:fe,oa:null,Y:null,va:null,L:null,bandwidth:0,Mf:!1,Zb:M,profiles:rt.split(",")},ct=AA(e,ut,I,n),It=ct.duration,Ye=ct.periods,J!="static"&&ct.Df||fe.Sa(It||1/0),e.C&&!e.F&&e.h.isAutoLowLatencyMode()&&(e.h.enableLowLatencyMode(),e.F=e.h.isLowLatencyMode()),e.F?fe.Uf(e.C):e.C&&ze("Low-latency DASH live stream detected, but low-latency streaming mode is not enabled in Shaka Player. Set streaming.lowLatencyMode configuration to true, and see https://bit.ly/3clctcj for details."),fe.ze(ae||1),k(wn,Hc(e.j,Ye,ut.ib),2);case 2:if(e.i){e.i.variants=e.j.l,e.i.textStreams=e.j.j.slice(),e.i.imageStreams=e.j.i,e.h.filter(e.i),wn.D(3);break}if(e.i={presentationTimeline:fe,variants:e.j.l,textStreams:e.j.j.slice(),imageStreams:e.j.i,offlineSessionIds:[],minBufferTime:N||0,sequenceMode:e.g.dash.sequenceMode},!fe.fg()){wn.D(4);break}return gn=on(n,"UTCTiming"),k(wn,mx(e,I,gn),5);case 5:if(un=wn.h,!e.h)return wn.return();fe.Vf(un);case 4:fe.ve();case 3:e.h.makeTextStreamsForClosedCaptions(e.i),le(wn)}})}function AA(e,n,r,s){var a=nn(s,"mediaPresentationDuration",Co),d=[],f=0;s=on(s,"Period");for(var g=0;g<s.length;g++){var T=s[g],I=s[g+1],M=nn(T,"start",Co,f),L=T.id,N=nn(T,"duration",Co),O=null;if(I){var z=nn(I,"start",Co);z!=null&&(O=z-M)}else a!=null&&(O=a-M);if(O==null&&(O=N),!(e.B!==null&&L!==null&&M!==null&&M<e.B)||e.K.includes(L)||g+1==s.length){if(M!==null&&(e.B===null||M>e.B)&&(e.B=M),f=SA(e,n,r,{start:M,duration:O,node:T,oe:O==null||!I}),d.push(f),n.oa.id&&O&&(e.M[n.oa.id]=O),O==null){f=null;break}f=M+O}}return e.K=d.map(function($){return $.id}),a!=null?{periods:d,duration:a,Df:!1}:{periods:d,duration:f,Df:!0}}function SA(e,n,r,s){n.oa=hn(s.node,null,r),n.Y=s,n.oa.Zb=n.Zb,n.oa.id||(n.oa.id="__shaka_period_"+s.start);var a=on(s.node,"EventStream");r=n.presentationTimeline.mb(),a=A(a);for(var d=a.next();!d.done;d=a.next())mi(e,s.start,s.duration,d.value,r);if(r=on(s.node,"AdaptationSet").map(function(M){return hx(e,n,M)}).filter(ri),n.ib){for(s=[],a=A(r),d=a.next();!d.done;d=a.next()){d=A(d.value.Bh);for(var f=d.next();!f.done;f=d.next())s.push(f.value)}if(s.length!=new Set(s).size)throw new se(2,4,4018)}for(s=r.filter(function(M){return!M.Ye}),r=r.filter(function(M){return M.Ye}),r=A(r),a=r.next();!a.done;a=r.next()){a=a.value,d=a.Ye.split(" "),f=A(s);for(var g=f.next();!g.done;g=f.next()){var T=g.value;if(d.includes(T.id)){g={},T=A(T.streams);for(var I=T.next();!I.done;g={hd:g.hd},I=T.next())g.hd=I.value,g.hd.trickModeVideo=a.streams.find(function(M){return function(L){return _s(M.hd.codecs)==_s(L.codecs)}}(g))}}}if(a=e.g.disableAudio?[]:xf(s,"audio"),f=e.g.disableVideo?[]:xf(s,"video"),d=e.g.disableText?[]:xf(s,yt),r=e.g.disableThumbnails?[]:xf(s,"image"),!f.length&&!a.length)throw new se(2,4,4004);for(s=[],a=A(a),g=a.next();!g.done;g=a.next())s.push.apply(s,q(g.value.streams));for(a=[],f=A(f),g=f.next();!g.done;g=f.next())a.push.apply(a,q(g.value.streams));for(f=[],d=A(d),g=d.next();!g.done;g=d.next())f.push.apply(f,q(g.value.streams));for(d=[],r=A(r),g=r.next();!g.done;g=r.next())d.push.apply(d,q(g.value.streams));return{id:n.oa.id,nd:s,Od:a,textStreams:f,imageStreams:d}}function xf(e,n){return e.filter(function(r){return r.contentType==n})}function hx(e,n,r){function s(Se){switch(Se){case 1:case 6:case 13:case 14:case 15:return"SDR";case 16:return"PQ";case 18:return"HLG"}}n.va=hn(r,n.oa,null);var a=!1,d=on(r,"Role"),f=d.map(function(Se){return Se.getAttribute("value")}).filter(ri),g=void 0,T=n.va.contentType==yt;T&&(g="subtitle"),d=A(d);for(var I=d.next();!I.done;I=d.next()){I=I.value;var M=I.getAttribute("schemeIdUri");if(M==null||M=="urn:mpeg:dash:role:2011")switch(I=I.getAttribute("value"),I){case"main":a=!0;break;case"caption":case"subtitle":g=I}}var L;M=on(r,"EssentialProperty"),d=null,I=!1,M=A(M);for(var N=M.next();!N.done;N=M.next()){N=N.value;var O=N.getAttribute("schemeIdUri");O=="http://dashif.org/guidelines/trickmode"?d=N.getAttribute("value"):O=="urn:mpeg:mpegB:cicp:TransferCharacteristics"?L=s(parseInt(N.getAttribute("value"),10)):I=!0}for(M=on(r,"SupplementalProperty"),M=A(M),N=M.next();!N.done;N=M.next())N=N.value,N.getAttribute("schemeIdUri")=="urn:mpeg:mpegB:cicp:TransferCharacteristics"&&(L=s(parseInt(N.getAttribute("value"),10)));M=on(r,"Accessibility");var z=new Map;for(M=A(M),N=M.next();!N.done;N=M.next())if(O=N.value,N=O.getAttribute("schemeIdUri"),O=O.getAttribute("value"),N=="urn:scte:dash:cc:cea-608:2015")if(N=1,O!=null){O=O.split(";");for(var $=A(O),G=$.next();!G.done;G=$.next()){var W=G.value,ae=G=void 0;W.includes("=")?(W=W.split("="),G=W[0].startsWith("CC")?W[0]:"CC"+W[0],ae=W[1]||"und"):(G="CC"+N,O.length==2?N+=2:N++,ae=W),z.set(G,At(ae))}}else z.set("CC1","und");else if(N=="urn:scte:dash:cc:cea-708:2015")if(N=1,O!=null)for(O=A(O.split(";")),G=O.next();!G.done;G=O.next())G=G.value,W=$=void 0,G.includes("=")?(G=G.split("="),$="svc"+G[0],W=G[1].split(",")[0].split(":").pop()):($="svc"+N,N++,W=G),z.set($,At(W));else z.set("svc1","und");else N=="urn:mpeg:dash:role:2011"&&O!=null&&(f.push(O),O=="captions"&&(g="caption"));if(I)return null;I=on(r,"ContentProtection");var J=s0(I,e.g.dash.ignoreDrmInfo,e.g.dash.keySystemsByURI),fe=At(r.getAttribute("lang")||"und"),xe=r.getAttribute("label");if((I=on(r,"Label"))&&I.length&&(I=I[0],I.textContent&&(xe=I.textContent)),I=on(r,"Representation"),r=I.map(function(Se){return(Se=fx(e,n,J,g,fe,xe,a,f,z,Se))&&(Se.hdr=Se.hdr||L),Se}).filter(function(Se){return!!Se}),r.length==0){if(d=n.va.contentType=="image",e.g.dash.ignoreEmptyAdaptationSet||T||d)return null;throw new se(2,4,4003)}if(!n.va.contentType||n.va.contentType=="application")for(n.va.contentType=ea(r[0].mimeType,r[0].codecs),T=A(r),M=T.next();!M.done;M=T.next())M.value.type=n.va.contentType;for(T=A(r),M=T.next();!M.done;M=T.next())for(M=M.value,N=A(J.drmInfos),O=N.next();!O.done;O=N.next())O=O.value,O.keyIds=O.keyIds&&M.keyIds?new Set([].concat(q(O.keyIds),q(M.keyIds))):O.keyIds||M.keyIds;return T=I.map(function(Se){return Se.getAttribute("id")}).filter(ri),{id:n.va.id||"__fake__"+e.I++,contentType:n.va.contentType,language:fe,tj:a,streams:r,drmInfos:J.drmInfos,Ye:d,Bh:T}}function fx(e,n,r,s,a,d,f,g,T,I){if(n.L=hn(I,n.va,null),e.C=Math.min(e.C,n.L.Zb),!gx(n.L))return null;var M=n.Y.start;n.bandwidth=nn(I,"bandwidth",th)||0;var L=n.L.contentType,N=L==yt||L=="application";L=L=="image";try{var O=function(Me,Oe,Ue){return Tf(e,Me,Oe,Ue)};if(n.L.Yc)var z=cA(n,O);else if(n.L.Db)z=hA(n,e.l);else if(n.L.Zc)z=mA(n,O,e.l,!!e.i,e.g.dash.initialSegmentLimit,e.M);else{var $=n.L.Na,G=n.Y.duration||0;z={ac:function(){return Promise.resolve(ym(M,G,$))}}}}catch(Me){if((N||L)&&Me.code==4002)return null;throw Me}O=on(I,"ContentProtection"),O=No(O,r,e.g.dash.ignoreDrmInfo,e.g.dash.keySystemsByURI),O=new Set(O?[O]:[]);var W=!1;on(I,"SupplementalProperty").some(function(Me){return Me.getAttribute("schemeIdUri")=="tag:dolby.com,2018:dash:EC3_ExtensionType:2018"&&Me.getAttribute("value")=="JOC"})&&(W=!0);var ae=!1;N&&(ae=g.includes("forced_subtitle")||g.includes("forced-subtitle"));var J;if(L&&((I=on(I,"EssentialProperty").find(function(Me){return["http://dashif.org/thumbnail_tile","http://dashif.org/guidelines/thumbnail_tile"].includes(Me.getAttribute("schemeIdUri"))}))&&(J=I.getAttribute("value")),!J))return null;var fe;I=n.L.codecs,n.profiles.includes("http://dashif.org/guidelines/dash-if-uhd#hevc-hdr-pq10")&&(I.includes("hvc1.2.4.L153.B0")||I.includes("hev1.2.4.L153.B0"))&&(fe="PQ");var xe=n.L.id?n.oa.id+","+n.L.id:"",Se={id:e.I++,originalId:n.L.id,createSegmentIndex:function(){var Me,Oe;return j(function(Ue){if(Ue.g==1)return Me=xe&&n.ib&&e.l[xe]?e.l[xe]:Se,Me.segmentIndex?Ue.D(0):(Oe=Me,k(Ue,z.ac(),3));Oe.segmentIndex=Ue.h,le(Ue)})},closeSegmentIndex:function(){Se.segmentIndex&&(Se.segmentIndex.release(),Se.segmentIndex=null)},segmentIndex:null,mimeType:n.L.mimeType,codecs:n.L.codecs,frameRate:n.L.frameRate,pixelAspectRatio:n.L.pixelAspectRatio,bandwidth:n.bandwidth,width:n.L.width,height:n.L.height,kind:s,encrypted:0<r.drmInfos.length,drmInfos:r.drmInfos,keyIds:O,language:a,label:d,type:n.va.contentType,primary:f,trickModeVideo:null,emsgSchemeIdUris:n.L.emsgSchemeIdUris,roles:g,forced:ae,channelsCount:n.L.Cd,audioSamplingRate:n.L.audioSamplingRate,spatialAudio:W,closedCaptions:T,hdr:fe,tilesLayout:J,matchedStreams:[]};return xe&&n.ib&&!e.l[xe]&&(e.l[xe]=Se),Se}function g0(e){var n,r;j(function(s){switch(s.g){case 1:return n=0,ye(s,2),k(s,f0(e),4);case 4:n=s.h,_e(s,3);break;case 2:r=we(s),e.h&&(r.severity=1,e.h.onError(r));case 3:if(!e.h)return s.return();at(e,n),le(s)}})}function at(e,n){0>e.H||e.G.R(Math.max(3,e.H-n,Kl(e.J)))}function hn(e,n,r){n=n||{contentType:"",mimeType:"",codecs:"",emsgSchemeIdUris:[],frameRate:void 0,pixelAspectRatio:void 0,Cd:null,audioSamplingRate:null,Zb:0},r=r||n.Na;var s=on(e,"BaseURL"),a=s.map(rr),d=e.getAttribute("contentType")||n.contentType,f=e.getAttribute("mimeType")||n.mimeType,g=e.getAttribute("codecs")||n.codecs,T=nn(e,"frameRate",Qw)||n.frameRate,I=e.getAttribute("sar")||n.pixelAspectRatio,M=on(e,"InbandEventStream"),L=n.emsgSchemeIdUris.slice();M=A(M);for(var N=M.next();!N.done;N=M.next())N=N.value.getAttribute("schemeIdUri"),L.includes(N)||L.push(N);M=on(e,"AudioChannelConfiguration"),M=px(M)||n.Cd,N=nn(e,"audioSamplingRate",ko)||n.audioSamplingRate,d||(d=ea(f,g));var O=ic(e,"SegmentBase"),z=ic(e,"SegmentTemplate"),$=O&&nn(O,"availabilityTimeOffset",Ga)||0,G=z&&nn(z,"availabilityTimeOffset",Ga)||0;return s=s&&s.length&&nn(s[0],"availabilityTimeOffset",Ga)||0,s=n.Zb+s+$+G,{Na:Ai(r,a),Yc:O||n.Yc,Db:ic(e,"SegmentList")||n.Db,Zc:z||n.Zc,width:nn(e,"width",ko)||n.width,height:nn(e,"height",ko)||n.height,contentType:d,mimeType:f,codecs:g,frameRate:T,pixelAspectRatio:I,emsgSchemeIdUris:L,id:e.getAttribute("id"),Cd:M,audioSamplingRate:N,Zb:s}}function px(e){e=A(e);for(var n=e.next();!n.done;n=e.next()){var r=n.value;if((n=r.getAttribute("schemeIdUri"))&&(r=r.getAttribute("value")))switch(n){case"urn:mpeg:dash:outputChannelPositionList:2012":return r.trim().split(/ +/).length;case"urn:mpeg:dash:23003:3:audio_channel_configuration:2011":case"urn:dts:dash:audio_channel_configuration:2012":if(n=parseInt(r,10),!n)continue;return n;case"tag:dolby.com,2014:dash:audio_channel_configuration:2011":case"urn:dolby:dash:audio_channel_configuration:2011":if(n=parseInt(r,16),!n)continue;for(e=0;n;)n&1&&++e,n>>=1;return e;case"urn:mpeg:mpegB:cicp:ChannelConfiguration":if(n=[0,1,2,3,4,5,6,8,2,3,4,7,8,24,8,12,10,12,14,12,14],(r=parseInt(r,10))&&0<r&&r<n.length)return n[r]}}return null}function gx(e){var n=e.Yc?1:0;return n+=e.Db?1:0,n+=e.Zc?1:0,n==0?e.contentType==yt||e.contentType=="application":(n!=1&&(e.Yc&&(e.Db=null),e.Zc=null),!0)}function ao(e,n,r,s){var a,d,f,g,T,I;return j(function(M){if(M.g==1)return a=Ai(n,[r]),d=Ct(a,e.g.retryParameters),d.method=s,f=e.h.networkingEngine.request(4,d),Iu(e.s,f),k(M,f.promise,2);if(g=M.h,s=="HEAD"){if(!g.headers||!g.headers.date)return M.return(0);T=g.headers.date}else T=Bt(g.data);return I=Date.parse(T),isNaN(I)?M.return(0):M.return(I-Date.now())})}function mx(e,n,r){var s,a,d,f,g,T,I,M;return j(function(L){switch(L.g){case 1:s=r.map(function(N){return{scheme:N.getAttribute("schemeIdUri"),value:N.getAttribute("value")}}),a=e.g.dash.clockSyncUri,!s.length&&a&&s.push({scheme:"urn:mpeg:dash:utc:http-head:2014",value:a}),d=A(s),f=d.next();case 2:if(f.done){L.D(4);break}switch(g=f.value,ye(L,5),T=g.scheme,I=g.value,T){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":return L.D(7);case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":return L.D(8);case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":return M=Date.parse(I),L.return(isNaN(M)?0:M-Date.now());case"urn:mpeg:dash:utc:http-ntp:2014":case"urn:mpeg:dash:utc:ntp:2014":case"urn:mpeg:dash:utc:sntp:2014":ze("NTP UTCTiming scheme is not supported");break;default:ze("Unrecognized scheme in UTCTiming element",T)}L.D(9);break;case 7:return k(L,ao(e,n,I,"HEAD"),10);case 10:return L.return(L.h);case 8:return k(L,ao(e,n,I,"GET"),11);case 11:return L.return(L.h);case 9:_e(L,3);break;case 5:we(L);case 3:f=d.next(),L.D(2);break;case 4:return ze("A UTCTiming element should always be given in live manifests! This content may not play on clients with bad clocks!"),L.return(0)}})}function mi(e,n,r,s,a){var d=s.getAttribute("schemeIdUri")||"",f=s.getAttribute("value")||"",g=nn(s,"timescale",ko)||1;s=A(on(s,"Event"));for(var T=s.next();!T.done;T=s.next()){T=T.value;var I=nn(T,"presentationTime",ko)||0,M=nn(T,"duration",ko)||0;I=I/g+n,M=I+M/g,r!=null&&(I=Math.min(I,n+r),M=Math.min(M,n+r)),M<a||(T={schemeIdUri:d,value:f,startTime:I,endTime:M,id:T.getAttribute("id")||"",eventElement:T},e.h.onTimelineRegionAdded(T))}}function Tf(e,n,r,s){var a,d,f,g,T;return j(function(I){return I.g==1?(a=ts,d=Fs(n,r,s,e.g.retryParameters),f=e.h.networkingEngine,g=f.request(a,d),Iu(e.s,g),k(I,g.promise,2)):(T=I.h,I.return(T.data))})}function ea(e,n){return Gd(Qr(e,n))?yt:e.split("/")[0]}pe("shaka.dash.DashParser",Ju),Ps.mpd=function(){return new Ju},or["application/dash+xml"]=function(){return new Ju},or["video/vnd.mpeg.dash.mpd"]=function(){return new Ju};function qs(e,n,r,s){this.h=e,this.type=n,this.g=r,this.segments=s||null}function Xs(e,n,r,s){this.id=e,this.name=n,this.g=r,this.value=s===void 0?null:s}Xs.prototype.toString=function(){function e(s){return s.name+"="+(isNaN(Number(s.value))?'"'+s.value+'"':s.value)}var n="#"+this.name,r=this.g?this.g.map(e):[];return this.value&&r.unshift(this.value),0<r.length&&(n+=":"+r.join(",")),n},Xs.prototype.getAttribute=function(e){var n=this.g.filter(function(r){return r.name==e});return n.length?n[0]:null};function Je(e,n,r){return(e=e.getAttribute(n))?e.value:r||null}function Yt(e,n){if(e=e.getAttribute(n),!e)throw new se(2,4,4023,n);return e.value}function vx(e,n,r){r=r===void 0?[]:r,this.g=n,this.i=e,this.h=r}function wf(e,n){this.name=e,this.value=n}function br(e,n){return e.filter(function(r){return r.name==n})}function m0(e,n){return e.filter(function(r){return Yt(r,"TYPE")==n})}function vi(e,n){return e=br(e,n),e.length?e[0]:null}function Yc(e,n){var r=0;return r=r===void 0?0:r,(e=vi(e,n))?Number(e.value):r}function ta(e,n){return Ai([e],[n])[0]}function xs(e){this.h=e,this.g=0}function Po(e){Oo(e,/[ \t]+/gm)}function Oo(e,n){return n.lastIndex=e.g,n=n.exec(e.h),n=n==null?null:{position:n.index,length:n[0].length,results:n},e.g==e.h.length||n==null||n.position!=e.g?null:(e.g+=n.length,n.results)}function na(e){return e.g==e.h.length?null:(e=Oo(e,/[^ \t\n]*/gm))?e[0]:null}function IA(){this.g=0}function v0(e,n,r){n=Bt(n),n=n.replace(/\r\n|\r(?=[^\n]|$)/gm,"\n").trim();var s=n.split(/\n+/m);if(!/^#EXTM3U($|[ \t\n])/m.test(s[0]))throw new se(2,4,4015);n=0;for(var a=!0,d=A(s),f=d.next();!f.done;f=d.next())if(f=f.value,/^#(?!EXT)/m.test(f)||a)a=!1;else if(f=Ef(e,f),--e.g,yx.includes(f.name)){n=1;break}else f.name=="EXT-X-STREAM-INF"&&(a=!0);for(d=[],a=!0,f=0;f<s.length;f++){var g=s[f],T=s[f+1];if(/^#(?!EXT)/m.test(g)||a)a=!1;else{if(g=Ef(e,g),xx.includes(g.name)){if(n!=1)throw new se(2,4,4017);var I=s.splice(f,s.length-f);s=r,a=[],f=[],T=[],g=null,I=A(I);for(var M=I.next();!M.done;M=I.next())M=M.value,/^(#EXT)/.test(M)?(M=Ef(e,M),yx.includes(M.name)?d.push(M):M.name=="EXT-X-MAP"?g=M:M.name=="EXT-X-PART"?T.push(M):M.name=="EXT-X-PRELOAD-HINT"?Je(M,"TYPE")=="PART"?T.push(M):Je(M,"TYPE")=="MAP"&&(M.name="EXT-X-MAP",g=M):f.push(M)):/^#(?!EXT)/m.test(M)||(M=ta(s,M.trim()),g&&f.push(g),a.push(new vx(M,f,T)),f=[],T=[]);return T.length&&(g&&f.push(g),a.push(new vx("",f,T))),new qs(r,n,d,a)}d.push(g),g.name=="EXT-X-STREAM-INF"&&(g.g.push(new wf("URI",T)),a=!0)}}return new qs(r,n,d)}function Ef(e,n){e=e.g++;var r=n.match(/^#(EXT[^:]*)(?::(.*))?$/);if(!r)throw new se(2,4,4016,n);n=r[1];var s=r[2];r=[];var a;if(s){s=new xs(s);var d;(d=Oo(s,/^([^,=]+)(?:,|$)/g))&&(a=d[1]);for(var f=/([^=]+)=(?:"([^"]*)"|([^",]*))(?:,|$)/g;d=Oo(s,f);)r.push(new wf(d[1],d[2]||d[3])),Po(s)}return new Xs(e,n,r,a)}var yx="EXT-X-TARGETDURATION EXT-X-MEDIA-SEQUENCE EXT-X-DISCONTINUITY-SEQUENCE EXT-X-PLAYLIST-TYPE EXT-X-I-FRAMES-ONLY EXT-X-ENDLIST EXT-X-SERVER-CONTROL EXT-X-SKIP".split(" "),xx="EXTINF EXT-X-BYTERANGE EXT-X-DISCONTINUITY EXT-X-PROGRAM-DATE-TIME EXT-X-KEY EXT-X-DATERANGE EXT-X-MAP".split(" ");function y0(){}function Tx(e){try{var n=x0(e);return oi({uri:e,Qf:e,data:n.data,headers:{"content-type":n.contentType}})}catch(r){return Nt(r)}}function x0(e){var n=e.split(":");if(2>n.length||n[0]!="data")throw new se(2,1,1004,e);if(n=n.slice(1).join(":").split(","),2>n.length)throw new se(2,1,1004,e);var r=n[0];e=S.decodeURIComponent(n.slice(1).join(",")),n=r.split(";"),r=n[0];var s=!1;1<n.length&&n[n.length-1]=="base64"&&(s=!0,n.pop());var a;return s?a=wo(e):a=fi(e),{data:a,contentType:r}}pe("shaka.net.DataUriPlugin",y0),y0.parse=Tx,Mi("data",Tx);function $c(){var e=this;this.g=this.i=null,this.sa=1,this.s=new Map,this.C=new Map,this.H=new Map,this.H.set("video",new Map),this.H.set("audio",new Map),this.H.set(yt,new Map),this.H.set("image",new Map),this.ka=new Set,this.h=new Map,this.j=null,this.O="",this.X=new IA,this.P=0,this.F=-1,this.J=1/0,this.ua=!1,this.m=new Qe(function(){R0(e)}),this.aa=Of,this.G=null,this.ra=0,this.K=1/0,this.V=this.$=0,this.I=new eo,this.M=new Map,this.B=new Map,this.Z=new Map,this.l=!1}v=$c.prototype,v.configure=function(e){this.g=e},v.start=function(e,n){var r=this,s;return j(function(a){return a.g==1?(r.i=n,r.l=n.isLowLatencyMode(),k(a,bf(r,e),2)):a.g!=3?(s=a.h,r.O=s.uri,k(a,kA(r,s.data,e),3)):a.return(r.G)})},v.stop=function(){this.m&&(this.m.stop(),this.m=null);var e=[];return this.I&&(e.push(this.I.destroy()),this.I=null),this.g=this.i=null,this.ka.clear(),this.G=null,this.h.clear(),this.C.clear(),this.B.clear(),this.s.clear(),Promise.all(e)},v.update=function(){var e=this,n,r,s,a,d,f,g,T,I;return j(function(M){if(M.g==1){if(!Or(e))return M.return();for(n=[],r=Array.from(e.h.values()),s=r.filter(function(L){return L.stream.segmentIndex}),a=A(s),d=a.next();!d.done;d=a.next())f=d.value,n.push(CA(e,f));return k(M,Promise.all(n),2)}Mx(e,s.map(function(L){return L.stream})),g=s.some(function(L){return L.Lc==0}),s.length&&!g&&(T=Dx,Qc(e,T.jg),I=r.map(function(L){return L.Ab}),e.j.Sa(Math.min.apply(Math,q(I))),e.i.updateDuration()),le(M)})};function T0(e,n){return Or(e)?e.H.get(n.type):n.zd}function CA(e,n){var r,s,a,d,f,g,T,I,M,L,N,O,z,$,G,W;return j(function(ae){if(ae.g==1)return r=n.ld,s=new Pi(r),e.l&&n.pd&&Ta(s,new du("_HLS_skip=YES")),k(ae,bf(e,s.toString()),2);if(a=ae.h,!n.stream.segmentIndex)return ae.return();if(d=v0(e.X,a.data,a.uri),d.type!=1)throw new se(2,4,4017);f=br(d.g,"EXT-X-DEFINE"),g=Af(e,f),T=n.stream,I=T0(e,n),M=kf(d,T.mimeType),L=M.keyIds,N=M.drmInfos,O=function(J,fe){return J.size===fe.size&&[].concat(q(J)).every(function(xe){return fe.has(xe)})},O(T.keyIds,L)||(T.keyIds=L,T.drmInfos=N,e.i.newDrmInfo(T)),z=Rf(e,d,T.type,I,g),T.segmentIndex.kc(z,e.j.mb()),z.length&&($=Yc(d.g,"EXT-X-MEDIA-SEQUENCE"),G=I.get($),T.segmentIndex.Gb(G)),W=z[z.length-1],vi(d.g,"EXT-X-ENDLIST")&&(n.Lc=!0,n.Ab=W.endTime),le(ae)})}v.onExpirationUpdated=function(){};function wx(e,n){for(var r=e.F==-1,s=A(n),a=s.next();!a.done;a=s.next()){a=a.value;var d=a.stream.segmentIndex,f=T0(e,a);if(d=d.g[0]||null){f=A(f);for(var g=f.next();!g.done;g=f.next()){g=A(g.value);var T=g.next().value;if(g.next().value==d.startTime){r&&(e.F=Math.max(e.F,T)),a.ke=T;break}}}}if(!(0>e.F))for(n=A(n),a=n.next();!a.done;a=n.next())r=a.value,(s=r.stream.segmentIndex)&&(s.g.splice(0,e.F-r.ke),(s=s.g[0]||null)&&(s=-s.startTime,r.stream.segmentIndex.offset(s),E0(e,r,s)))}function w0(e,n){if(e.J==1/0){n=A(n);for(var r=n.next();!r.done;r=n.next()){var s=r.value.stream.segmentIndex.g[0]||null;s!=null&&s.g!=null&&(e.J=Math.min(e.J,s.g))}}if(n=e.J,n!=1/0)for(s=A(e.h.values()),r=s.next();!r.done;r=s.next()){r=r.value;var a=r.stream.segmentIndex;if(a!=null){var d=a.g[0]||null;if(d.g==null)Rn("Missing EXT-X-PROGRAM-DATE-TIME for stream",r.bd,"Expect AV sync issues!");else for(E0(e,r,d.g-n-d.startTime),r=A(a),a=r.next();!a.done;a=r.next())a.value.Ve(n)}}}function E0(e,n,r){n.Ab+=r,e=T0(e,n),n=A(e);for(var s=n.next();!s.done;s=n.next()){var a=A(s.value);s=a.next().value,a=a.next().value,e.set(s,a+r)}}function kA(e,n,r){var s,a,d,f,g,T,I,M,L,N,O,z,$,G,W,ae,J,fe,xe,Se,Me,Oe,Ue,rt,ut,ct,It,Ye,gn,un,wn,po;return j(function(Bo){switch(Bo.g){case 1:s=v0(e.X,n,e.O),a=br(s.g,"EXT-X-DEFINE");for(var tu=A(a),Qn=tu.next();!Qn.done;Qn=tu.next()){var Qi=Qn.value;Qn=Je(Qi,"NAME"),Qi=Je(Qi,"VALUE"),Qn&&Qi&&(e.s.has(Qn)||e.s.set(Qn,Qi))}if(d=[],f=[],g=[],s.type==1)return Se=e.g.hls.mediaPlaylistFullMimeType,s.segments.length&&(Me=new Pi(s.segments[0].i),Oe=Me.Ha.split(".").pop(),(Ue=Jc[Oe])?Se=Ue:Oe!=="ts"&&Oe!=="mp4"&&(L0[Oe]?(Ue=L0[Oe],rt=e.g.hls.defaultAudioCodec,Se=Ue+'; codecs="'+rt+'"'):Pf[Oe]&&(Ue=Pf[Oe],ut=e.g.hls.defaultVideoCodec,Se=Ue+'; codecs="'+ut+'"'))),ct=Se.split(";")[0],It=ct.split("/")[0],Ye=ey(Se),gn=new Map,k(Bo,ia(e,s,r,r,Ye,It,"",!0,"Media Playlist",null,gn,null,!1,!1,ct),5);for(T=br(s.g,"EXT-X-MEDIA"),I=br(s.g,"EXT-X-STREAM-INF"),M=br(s.g,"EXT-X-IMAGE-STREAM-INF"),L=br(s.g,"EXT-X-SESSION-KEY"),tu=A(I),Qn=tu.next();!Qn.done;Qn=tu.next()){var da=Qn.value;Qi=Je(da,"AUDIO"),Qn=Je(da,"VIDEO");var Fo=Je(da,"SUBTITLES");if(da=I0(e,da),Fo){var E2=As(yt,da);e.B.set(Fo,E2),Ii(da,E2)}Qi&&(Fo=As("audio",da),Fo||(Fo=e.g.hls.defaultAudioCodec),e.B.set(Qi,Fo)),Qn&&(Qi=As("video",da),Qi||(Qi=e.g.hls.defaultVideoCodec),e.B.set(Qn,Qi))}for(N=br(s.g,"EXT-X-SESSION-DATA"),O=A(N),z=O.next();!z.done;z=O.next())$=z.value,G=Je($,"DATA-ID"),W=Je($,"URI"),ae=Je($,"LANGUAGE"),J=Je($,"VALUE"),fe=new Map().set("id",G),W&&fe.set("uri",ta(e.O,W)),ae&&fe.set("language",ae),J&&fe.set("value",J),xe=new Fe("sessiondata",fe),e.i&&e.i.onEvent(xe);for(S0(e,T),tu=m0(T,"CLOSED-CAPTIONS"),tu=A(tu),Qn=tu.next();!Qn.done;Qn=tu.next())Fo=Qn.value,Qn=Sf(Fo),Qi=Yt(Fo,"GROUP-ID"),Fo=Yt(Fo,"INSTREAM-ID"),e.M.get(Qi)||e.M.set(Qi,new Map),e.M.get(Qi).set(Fo,Qn);return d=MA(e,I,L),f=A0(e,T),k(Bo,Ax(e,M),4);case 4:g=Bo.h,Bo.D(3);break;case 5:un=Bo.h,e.h.set(r,un),d.push({id:0,language:"und",disabledUntilTime:0,primary:!0,audio:It=="audio"?un.stream:null,video:It=="video"?un.stream:null,bandwidth:0,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]});case 3:if(!e.i)throw new se(2,7,7001);e.j=new nt(null,0),e.j.$c(!0),s.type==1&&(Or(e)&&(Rx(e),wn=e.P,e.m.R(wn)),po=Array.from(e.h.values()),If(e,po),Ex(e)),e.G={presentationTimeline:e.j,variants:d,textStreams:f,imageStreams:g,offlineSessionIds:[],minBufferTime:0,sequenceMode:!0},e.i.makeTextStreamsForClosedCaptions(e.G),le(Bo)}})}function Ex(e){if(Or(e)){if(e.P=e.K,e.aa==D0){var n=k0(e);e.g.hls.useSafariBehaviorForLive&&(n=e.j.m),isNaN(e.g.availabilityWindowOverride)||(n=e.g.availabilityWindowOverride),e.j.Re(n)}}else e.j.Sa(k0(e));e.j.ve()}function Af(e,n){var r=new Map;n=A(n);for(var s=n.next();!s.done;s=n.next()){var a=s.value;s=Je(a,"NAME");var d=Je(a,"VALUE");a=Je(a,"IMPORT"),s&&d&&r.set(s,d),a&&(s=e.s.get(a))&&r.set(a,s)}return r}function A0(e,n){var r=m0(n,"SUBTITLES");n=r.map(function(f){if(e.g.disableText)return null;try{return Ix(e,f).stream}catch(g){if(e.g.hls.ignoreTextStreamFailures)return null;throw g}}),r=A(r);for(var s=r.next();!s.done;s=r.next()){var a=Yt(s.value,"GROUP-ID");if((s=e.B.get(a))&&(a=e.C.get(a))){a=A(a);for(var d=a.next();!d.done;d=a.next())d=d.value,d.stream.codecs=s,d.stream.mimeType=Lf(yt,s)||Nf(yt)}}return n.filter(function(f){return f})}function Ax(e,n){var r,s;return j(function(a){return a.g==1?(r=n.map(function(d){var f,g;return j(function(T){if(T.g==1)return e.g.disableThumbnails?T.return(null):(ye(T,2),k(T,Cx(e,d),4));if(T.g!=2)return f=T.h,T.return(f.stream);if(g=we(T),e.g.hls.ignoreImageStreamFailures)return T.return(null);throw g})}),k(a,Promise.all(r),2)):(s=a.h,a.return(s.filter(function(d){return d})))})}function S0(e,n){n=n.filter(function(s){var a=Je(s,"URI")||"";return Je(s,"TYPE")!="SUBTITLES"&&a!=""}),n=A(n);for(var r=n.next();!r.done;r=n.next())Ix(e,r.value)}function MA(e,n,r){var s=[],a=new Set;if(0<r.length){r=A(r);for(var d=r.next();!d.done;d=r.next()){d=d.value;var f=Yt(d,"METHOD");if(f!="NONE"&&f!="AES-128"&&(f=Je(d,"KEYFORMAT")||"identity",d=(f=Lx[f])?f(d,""):null)){if(d.keyIds){f=A(d.keyIds);for(var g=f.next();!g.done;g=f.next())a.add(g.value)}s.push(d)}}}return n=n.map(function(T){var I=Je(T,"FRAME-RATE"),M=Number(Je(T,"AVERAGE-BANDWIDTH"))||Number(Yt(T,"BANDWIDTH")),L=Je(T,"RESOLUTION");L=A(L?L.split("x"):[null,null]);var N=L.next().value,O=L.next().value,z=Je(T,"VIDEO-RANGE");T=Sx(e,T),L=T.audio,T=T.video;for(var $=A(T),G=$.next();!G.done;G=$.next())(G=G.value.stream)&&(G.width=Number(N)||void 0,G.height=Number(O)||void 0,G.frameRate=Number(I)||void 0,G.hdr=z||void 0);for(I=e.g.disableAudio,(!L.length||I)&&(L=[null]),I=e.g.disableVideo,(!T.length||I)&&(T=[null]),I=[],L=A(L),N=L.next();!N.done;N=L.next())for(N=N.value,O=A(T),z=O.next();!z.done;z=O.next()){var W=z.value;(z=N?N.stream:null)&&(z.drmInfos=s,z.keyIds=a),($=W?W.stream:null)&&($.drmInfos=s,$.keyIds=a),G=N?N.stream.drmInfos:null;var ae=W?W.stream.drmInfos:null;W=(W?W.bd:"")+" - "+(N?N.bd:""),z&&$&&G.length&&ae.length&&!(0<oh(G,ae).length)||e.ka.has(W)||(z={id:e.sa++,language:z?z.language:"und",primary:!!z&&z.primary||!!$&&$.primary,audio:z,video:$,bandwidth:M,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]},I.push(z),e.ka.add(W))}return I}).reduce(Nd,[]),n=n.filter(function(T){return T!=null})}function Sx(e,n){var r=I0(e,n),s=Je(n,"AUDIO"),a=Je(n,"VIDEO"),d=s||a;d=d&&e.C.has(d)?e.C.get(d):[],s={audio:s?d:[],video:a?d:[]},a=!1;var f=Yt(n,"URI"),g=s.audio.find(function(M){return M&&M.bd==f}),T=As("video",r),I=As("audio",r);return I&&!T?d="audio":!d.length&&I&&T?(d="video",r=[[T,I].join()]):s.audio.length&&g?(d="audio",a=!0):d=s.video.length&&!s.audio.length?"audio":"video",a||(e=kx(e,n,r,d),s[e.stream.type]=[e]),s}function I0(e,n){var r=[];e.g.disableVideo||r.push(e.g.hls.defaultVideoCodec),e.g.disableAudio||r.push(e.g.hls.defaultAudioCodec),r=Je(n,"CODECS",r.join(",")).split(/\s*,\s*/),e=new Set,n=[],r=A(r);for(var s=r.next();!s.done;s=r.next()){s=s.value;var a=Wl(s)[0];e.has(a)||(n.push(s),e.add(a))}return n}function Sf(e){return e=Je(e,"LANGUAGE")||"und",At(e)}function Ix(e,n){var r=Yt(n,"GROUP-ID"),s="",a=Yt(n,"TYPE").toLowerCase();a=="subtitles"&&(a=yt);var d=a;if(d!=yt&&r&&e.B.has(r)&&(s=e.B.get(r)),a=Ys(Yt(n,"URI"),e.s),e.h.has(a))return e.h.get(a);var f=Sf(n),g=Je(n,"NAME"),T=Je(n,"DEFAULT")=="YES",I=d=="audio"&&(I=Je(n,"CHANNELS"))?parseInt(I.split("/")[0],10):null,M=d=="audio"&&(M=Je(n,"CHANNELS"))?M.includes("/JOC"):!1,L=Je(n,"CHARACTERISTICS");return n=Je(n,"FORCED")=="YES",s=C0(e,a,s,d,f,T,g,I,null,L,n,M),e.C.has(r)?e.C.get(r).push(s):e.C.set(r,[s]),e.h.has(a)?e.h.get(a):(e.h.set(a,s),s)}function Cx(e,n){var r,s,a,d,f,g,T,I,M,L;return j(function(N){return N.g==1?(r=Ys(Yt(n,"URI"),e.s),s=Je(n,"CODECS","jpeg")||"",e.h.has(r)?N.return(e.h.get(r)):(a=Sf(n),d=Je(n,"NAME"),f=Je(n,"CHARACTERISTICS"),g=C0(e,r,s,"image",a,!1,d,null,null,f,!1,!1),e.h.has(r)?N.return(e.h.get(r)):(T=Je(n,"RESOLUTION"))?k(N,g.stream.createSegmentIndex(),3):N.D(2))):(N.g!=2&&(I=g.stream.segmentIndex.get(0),M=I.tilesLayout)&&(g.stream.width=Number(T.split("x")[0])*Number(M.split("x")[0]),g.stream.height=Number(T.split("x")[1])*Number(M.split("x")[1])),(L=Je(n,"BANDWIDTH"))&&(g.stream.bandwidth=Number(L)),e.h.set(r,g),N.return(g))})}function kx(e,n,r,s){var a=Ys(Yt(n,"URI"),e.s);return e.h.has(a)||(n=Je(n,"CLOSED-CAPTIONS"),n=s=="video"&&n&&n!="NONE"?e.M.get(n):null,r=Xr(s,r),s=C0(e,a,r,s,"und",!1,null,null,n,null,!1,!1),e.h.has(a))?e.h.get(a):(e.h.set(a,s),s)}function C0(e,n,r,s,a,d,f,g,T,I,M,L){function N(ae){var J,fe,xe,Se,Me,Oe,Ue,rt,ut,ct,It,Ye,gn;return j(function(un){if(un.g==1)return k(un,bf(e,$.ld),2);if(un.g!=3)return J=un.h,ae.aborted?un.return():(fe=J.uri,xe=v0(e.X,J.data,fe),Se=Or(e),k(un,ia(e,xe,n,fe,r,s,a,d,f,g,T,I,M,L),3));if(Me=un.h,ae.aborted)return un.return();if(Oe=Me.stream,Or(e)&&!Se&&Rx(e),$.ld=fe,$.Ab=Me.Ab,$.pd=Me.pd,$.Lc=Me.Lc,$.zd=Me.zd,$.ue=!0,z.segmentIndex=Oe.segmentIndex,z.encrypted=Oe.encrypted,z.drmInfos=Oe.drmInfos,z.keyIds=Oe.keyIds,z.mimeType=Oe.mimeType,io.includes(z.mimeType)&&(z.codecs=""),z.drmInfos.length&&e.i.newDrmInfo(z),Ue=$e,s==Ue.Ma||s==Ue.jd)for(rt=A(e.h.values()),ut=rt.next();!ut.done;ut=rt.next())ct=ut.value,ct.ue||ct.type!=s||(ct.stream.mimeType=Oe.mimeType,io.includes(ct.stream.mimeType)&&(ct.stream.codecs=""));_x(e)&&(e.ua?If(e,[$]):(e.ua=!0,It=Array.from(e.h.values()),Ye=It.filter(function(wn){return wn.stream.segmentIndex}),If(e,Ye),Ex(e),gn=e.P,0<gn&&e.m.R(gn))),le(un)})}var O=ta(e.O,n),z=Cf(e,r,s,a,d,f,g,T,I,M,L);io.includes(z.mimeType)&&(z.codecs="");var $={stream:z,type:s,bd:n,ld:O,Ab:0,zd:new Map,pd:!1,Lc:!1,ke:-1,ue:!1},G=null,W=new AbortController;return z.createSegmentIndex=function(){return G||(W=new AbortController,G=new Promise(function(ae){ae(N(W.signal))}))},z.closeSegmentIndex=function(){G&&!z.segmentIndex&&W.abort(),z.segmentIndex&&(z.segmentIndex.release(),z.segmentIndex=null),G=null},$}function k0(e){var n=1/0;e=A(e.h.values());for(var r=e.next();!r.done;r=e.next())r=r.value,r.stream.segmentIndex&&r.stream.type!="text"&&(n=Math.min(n,r.Ab));return n}function Mx(e,n){var r=[];n=A(n);for(var s=n.next();!s.done;s=n.next())s=s.value,s.segmentIndex&&kh(s.segmentIndex,function(a){r.push(a)});e.j.lc(r)}function If(e,n){if(!Or(e))for(var r=k0(e),s=A(n),a=s.next();!a.done;a=s.next())a.value.stream.segmentIndex.wb(0,r);for(r=A(n),a=r.next();!a.done;a=r.next())a=a.value.stream,io.includes(a.mimeType)&&(a.codecs="");Mx(e,n.map(function(d){return d.stream})),e.g.hls.ignoreManifestProgramDateTime?wx(e,n):w0(e,n)}function _x(e){if(!e.G)return!1;var n=[],r=[];e=A(e.G.variants);for(var s=e.next();!s.done;s=e.next())s=s.value,s.video&&n.push(s.video),s.audio&&r.push(s.audio);return!(0<n.length&&!n.some(function(a){return a.segmentIndex})||0<r.length&&!r.some(function(a){return a.segmentIndex}))}function ia(e,n,r,s,a,d,f,g,T,I,M,L,N,O,z){var $,G,W,ae,J,fe,xe,Se,Me,Oe,Ue,rt,ut,ct,It;return j(function(Ye){if(Ye.g==1){if(n.type!=1)throw new se(2,4,4017);return $=br(n.g,"EXT-X-DEFINE"),G=Af(e,$),Mf(e,n),z?Ye.D(2):k(Ye,Df(e,d,a,n,G),3)}if(Ye.g!=2&&(z=Ye.h),W=kf(n,z),ae=W.drmInfos,J=W.keyIds,fe=W.encrypted,xe=W.ng,fe&&!ae.length&&!xe)throw new se(2,4,4026);return Se=Or(e)?e.H.get(d):new Map,Me=e.l,Oe=Rf(e,n,d,Se,G),Me!=e.l&&Mf(e,n),Ue=Oe[Oe.length-1].endTime,rt=new Rt(Oe),ct=(ut=vi(n.g,"EXT-X-SERVER-CONTROL"))?ut.getAttribute("CAN-SKIP-UNTIL")!=null:!1,It=Cf(e,a,d,f,g,T,I,M,L,N,O),It.segmentIndex=rt,It.encrypted=fe,It.drmInfos=ae,It.keyIds=J,It.mimeType=z,Ye.return({stream:It,type:d,bd:r,ld:s,Ab:Ue,pd:ct,Lc:!1,ke:-1,zd:Se,ue:!1})})}function Cf(e,n,r,s,a,d,f,g,T,I,M){var L=Lf(r,n)||Nf(r);return{id:e.sa++,originalId:d,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:null,mimeType:L,codecs:n,kind:r==yt?"subtitle":void 0,encrypted:!1,drmInfos:[],keyIds:new Set,language:s,label:d,type:r,primary:a,trickModeVideo:null,emsgSchemeIdUris:null,frameRate:void 0,pixelAspectRatio:void 0,width:void 0,height:void 0,bandwidth:void 0,roles:T?T.split(","):[],forced:I,channelsCount:f,audioSamplingRate:null,spatialAudio:M,closedCaptions:g,hdr:void 0,tilesLayout:void 0}}function kf(e,n){var r=[];if(e.segments){e=A(e.segments);for(var s=e.next();!s.done;s=e.next())s=br(s.value.g,"EXT-X-KEY"),r.push.apply(r,q(s))}s=e=!1;var a=[],d=new Set;r=A(r);for(var f=r.next();!f.done;f=r.next()){f=f.value;var g=Yt(f,"METHOD");if(g!="NONE"){if(e=!0,g=="AES-128")s=!0;else if(g=Je(f,"KEYFORMAT")||"identity",f=(g=Lx[g])?g(f,n):null){if(f.keyIds){g=A(f.keyIds);for(var T=g.next();!T.done;T=g.next())d.add(T.value)}a.push(f)}}}return{drmInfos:a,keyIds:d,encrypted:e,ng:s}}function _A(e,n,r){if(!S.crypto||!S.crypto.subtle)throw ze("Web Crypto API is not available to decrypt AES-128. (Web Crypto only exists in secure origins like https)"),new se(2,4,4042);var s=0,a=Je(n,"IV","");if(a){var d=Ra(a.substr(2));if(d.byteLength!=16)throw new se(2,4,4043)}else s=Yc(r.g,"EXT-X-MEDIA-SEQUENCE");n=ta(r.h,Yt(n,"URI"));var f=Ct([n],e.g.retryParameters),g={method:"AES-128",iv:d,firstMediaSequenceNumber:s,fetchKey:function(){var T,I,M;return j(function(L){if(L.g==1)return k(L,Zc(e,f,6),2);if(L.g!=3){if(T=L.h,!T.data||T.data.byteLength!=16)throw new se(2,4,4044);return I={name:"AES-CBC"},M=g,k(L,S.crypto.subtle.importKey("raw",T.data,I,!0,["decrypt"]),3)}M.cryptoKey=L.h,g.fetchKey=void 0,le(L)})}};return g}function Mf(e,n){var r=vi(n.g,"EXT-X-PLAYLIST-TYPE"),s=vi(n.g,"EXT-X-ENDLIST");if(s=r&&r.value=="VOD"||s,r=r&&r.value=="EVENT"&&!s,r=!s&&!r,s)Qc(e,Of);else{if(r?Qc(e,D0):Qc(e,Nx),s=vi(n.g,"EXT-X-TARGETDURATION"),!s)throw new se(2,4,4024,"EXT-X-TARGETDURATION");s=Number(s.value),r=vi(n.g,"EXT-X-PART-INF"),e.l&&r?(e.$=Number(Yt(r,"PART-TARGET")),e.K=Math.min(e.$,e.K),n=vi(n.g,"EXT-X-SERVER-CONTROL"),e.V=n?Number(Yt(n,"PART-HOLD-BACK")):0):e.K=Math.min(s,e.K),e.ra=Math.max(s,e.ra)}}function Rx(e){var n=e.g.defaultPresentationDelay?e.g.defaultPresentationDelay:e.V?e.V:e.ra*e.g.hls.liveSegmentsDelay;e.j.Zf(0),e.j.Wf(n),e.j.$c(!1)}function Pr(e,n,r,s){if(r=vi(r,"EXT-X-MAP"),!r)return null;var a=Yt(r,"URI");return s=Ys(ta(n,a),s),n=[s,Je(r,"BYTERANGE","")].join("-"),e.Z.has(n)||(r=_f(s,r),e.Z.set(n,r)),e.Z.get(n)}function _f(e,n){var r=0,s=null;return(n=Je(n,"BYTERANGE"))&&(r=n.split("@"),s=Number(r[0]),r=Number(r[1]),s=r+s-1),new ur(function(){return[e]},r,s)}function M0(e,n,r,s,a,d,f,g,T){var I=s.g,M=Ys(s.i,d),L=vi(I,"EXTINF"),N=d=0,O=null;s.h.length&&!e.l&&ze("Low-latency HLS live stream detected, but low-latency streaming mode is not enabled in Shaka Player. Set streaming.lowLatencyMode configuration to true, and see https://bit.ly/3clctcj for details.");var z=null;if(!e.g.hls.ignoreManifestProgramDateTime){var $=vi(I,"EXT-X-PROGRAM-DATE-TIME");$&&$.value&&(z=za($.value))}if($=vc,vi(I,"EXT-X-GAP")&&($=2),!L){if(s.h.length==0)throw new se(2,4,4024,"EXTINF");if(!e.l)return null}var G=[];if(e.l)for(var W={},ae=0;ae<s.h.length;W={Wd:W.Wd},ae++){var J=s.h[ae],fe=ae==0?r:G[G.length-1],xe=ae==0?a:fe.endTime,Se=Number(Je(J,"DURATION"))||e.$;if(Se){Se=xe+Se;var Me=0,Oe=null;J.name=="EXT-X-PRELOAD-HINT"?Me=(Me=Je(J,"BYTERANGE-START"))?Number(Me):0:(Me=Je(J,"BYTERANGE"),Oe=A(_0(fe,Me)),Me=Oe.next().value,Oe=Oe.next().value),(fe=Je(J,"URI"))&&(W.Wd=ta(f,fe),fe=vc,Je(J,"GAP")=="YES"&&(fe=2),G.push(new ft(xe,Se,function(Ue){return function(){return[Ue.Wd]}}(W),Me,Oe,n,0,0,1/0,[],"",null,null,fe)))}}return L?d=a+Number(L.value.split(",")[0]):d=G[G.length-1].endTime,(e=vi(I,"EXT-X-BYTERANGE"))?(O=A(_0(r,e.value)),N=O.next().value,O=O.next().value):G.length&&(N=G[0].Ta,O=G[G.length-1].Ba),r="",e=null,g=="image"&&(r="1x1",g=vi(I,"EXT-X-TILES"))&&(r=Yt(g,"LAYOUT"),(g=Je(g,"DURATION"))&&(e=Number(g))),new ft(a,d,function(){return M.length?[M]:[]},N,O,n,0,0,1/0,G,r,e,z,$,T)}function _0(e,n){var r=0,s=null;return n&&(r=n.split("@"),n=Number(r[0]),r=r[1]?Number(r[1]):e.Ba+1,s=r+n-1),[r,s]}function Rf(e,n,r,s,a){var d=n.segments,f=void 0,g=Yc(n.g,"EXT-X-DISCONTINUITY-SEQUENCE"),T=Yc(n.g,"EXT-X-MEDIA-SEQUENCE"),I=vi(n.g,"EXT-X-SKIP");I=I?Number(Je(I,"SKIPPED-SEGMENTS")):0;var M=T+I,L=0;Or(e)&&s.has(M)&&(L=s.get(M));for(var N=[],O=null,z=0;z<d.length;z++){var $=d[z],G=z==0?L:O.endTime;M=T+I+z,vi($.g,"EXT-X-DISCONTINUITY")&&g++;for(var W=A($.g),ae=W.next();!ae.done;ae=W.next())ae=ae.value,ae.name=="EXT-X-KEY"&&(Yt(ae,"METHOD")=="AES-128"?f=_A(e,ae,n):f=void 0);s.set(M,G),W=Pr(e,n.h,$.g,a),!e.l&&e.i.isAutoLowLatencyMode()&&(e.i.enableLowLatencyMode(),e.l=e.i.isLowLatencyMode()),(O=$=M0(e,W,O,$,G,a,n.h,r,f))&&($.m=g,e.g.hls.ignoreManifestProgramDateTime&&e.F!=null&&M<e.F||N.push($))}if(n=N.some(function(J){return J.g!=null})){for(r={},s=0;s<N.length;r={tc:r.tc,sc:r.sc,cd:r.cd,rb:r.rb,rc:r.rc},s++)if(r.rb=N[s],r.rb.g==null)for(r.sc=0,r.tc=s,a=function(J){return function(){var fe=N[J.tc];if(fe){if(fe.g!=null)return fe.g+J.sc;J.sc-=fe.endTime-fe.startTime,J.tc+=1}return null}}(r),r.rc=0,r.cd=s,d=function(J){return function(){var fe=N[J.cd];if(fe){if(fe!=J.rb&&(J.rc+=fe.endTime-fe.startTime),fe.g!=null)return fe.g+J.rc;--J.cd}return null}}(r);r.rb.g==null;)r.rb.g=d(),r.rb.g==null&&(r.rb.g=a())}if(n)for(r=A(N),s=r.next();!s.done;s=r.next())for(a=s.value,s=a.g,a=A(a.i),d=a.next();!d.done;d=a.next())d=d.value,d.g=s,s+=d.endTime-d.startTime;if(e=e.J,n&&e!=1/0)for(n=A(N),s=n.next();!s.done;s=n.next())s.value.Ve(e);return N}function Ys(e,n){e=String(e).replace(/%7B/g,"{").replace(/%7D/g,"}");var r=e.match(/{\$\w*}/g);if(r){r=A(r);for(var s=r.next();!s.done;s=r.next()){s=s.value;var a=s.slice(2,s.length-1),d=n.get(a);if(d)e=e.replace(s,d);else throw new se(2,4,4039,a)}}return e}function Lf(e,n){if(e==yt){if(n=="vtt"||n=="wvtt")return"text/vtt";if(n&&n!=="")return"application/mp4"}return e!="image"||n&&n!="jpeg"?e=="audio"&&n=="mp4a.40.34"?"audio/mpeg":null:"image/jpeg"}function Nf(e){return e==yt?"text/vtt":N0[e].mp4}function Df(e,n,r,s,a){var d,f,g,T,I,M,L,N,O,z;return j(function($){return $.g==1?(d=ts,f=Math.trunc((s.segments.length-1)/2),g=Ys(s.segments[f].i,a),T=new Pi(g),I=T.Ha.split(".").pop(),M=N0[n],(L=M[I])||(L=Jc[I])||(L=Lf(n,r))?$.return(L):(N=Ct([g],e.g.retryParameters),N.method="HEAD",k($,Zc(e,N,d),2))):(O=$.h,(z=O.headers["content-type"])?$.return(z.split(";")[0]):$.return(Nf(n)))})}function bf(e,n){return n=Ct([n],e.g.retryParameters),e.i.modifyManifestRequest(n,{format:"h"}),Zc(e,n,0)}function R0(e){var n,r;j(function(s){if(s.g==1)return e.i?(ye(s,2),k(s,e.update(),4)):s.return();if(s.g!=2)return Or(e)&&(n=e.P,e.m.R(n)),_e(s,0);if(r=we(s),!e.i)return s.return();r.severity=1,e.i.onError(r),e.m.R(.1),le(s)})}function Or(e){return e.aa!=Of}function Qc(e,n){e.aa=n,e.j&&e.j.$c(!Or(e)),Or(e)||e.m.stop()}function Zc(e,n,r){if(!e.I)throw new se(2,7,7001);return n=e.i.networkingEngine.request(r,n),Iu(e.I,n),n.promise}pe("shaka.hls.HlsParser",$c);var Jc={aac:"audio/aac",ac3:"audio/ac3",ec3:"audio/ec3",mp3:"audio/mpeg"},L0={mp4:"audio/mp4",mp4a:"audio/mp4",m4s:"audio/mp4",m4i:"audio/mp4",m4a:"audio/mp4",m4f:"audio/mp4",cmfa:"audio/mp4",ts:"video/mp2t"},Pf={mp4:"video/mp4",mp4v:"video/mp4",m4s:"video/mp4",m4i:"video/mp4",m4v:"video/mp4",m4f:"video/mp4",cmfv:"video/mp4",ts:"video/mp2t"},N0={audio:L0,video:Pf,text:{mp4:"application/mp4",m4s:"application/mp4",m4i:"application/mp4",m4f:"application/mp4",cmft:"application/mp4",vtt:"text/vtt",webvtt:"text/vtt",ttml:"application/ttml+xml"},image:{jpg:"image/jpeg",png:"image/png",svg:"image/svg+xml",webp:"image/webp",avif:"image/avif"}},Lx={"com.apple.streamingkeydelivery":function(e,n){if(n=="video/mp2t")throw new se(2,4,4040);if(S.shakaMediaKeysPolyfill)throw new se(2,4,4041);return qr("com.apple.fps",[{initDataType:"sinf",initData:new Uint8Array(0),keyId:null}])},"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":function(e){var n=Yt(e,"METHOD");return["SAMPLE-AES","SAMPLE-AES-CTR"].includes(n)?(n=Yt(e,"URI"),n=x0(n),n=Tt(n.data),n=qr("com.widevine.alpha",[{initDataType:"cenc",initData:n}]),(e=Je(e,"KEYID"))&&(n.keyIds=new Set([e.toLowerCase().substr(2)])),n):null},"com.microsoft.playready":function(e){var n=Yt(e,"METHOD");return["SAMPLE-AES","SAMPLE-AES-CTR"].includes(n)?(e=Yt(e,"URI"),e=x0(e),e=Tt(e.data),n=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]),e=Ba(e,n,new Set,0),qr("com.microsoft.playready",[{initDataType:"cenc",initData:e}])):null},identity:function(e){return e=Yt(e,"METHOD"),["SAMPLE-AES","SAMPLE-AES-CTR"].includes(e)?qr("org.w3.clearkey",null):null}},Of="VOD",Nx="EVENT",D0="LIVE",Dx={jg:Of,ii:Nx,hg:D0};zt("Tizen 3")||zt("Tizen 2")||tg()||(Ps.m3u8=function(){return new $c},or["application/x-mpegurl"]=function(){return new $c},or["application/vnd.apple.mpegurl"]=function(){return new $c});function ed(e,n,r,s,a,d){if(200<=r&&299>=r&&r!=202)return{uri:a||s,Qf:s,data:n,status:r,headers:e,fromCache:!!e["x-shaka-from-cache"]};a=null;try{a=$r(n)}catch(f){}throw new se(r==401||r==403?2:1,1,1001,s,r,a,e,d)}function Uf(){}function jf(e,n,r,s,a){var d=new RA;is(n.headers).forEach(function(I,M){d.append(M,I)});var f=new Ux,g={wf:!1,eg:!1};if(e=bx(e,r,{body:n.body||void 0,headers:d,method:n.method,signal:f.signal,credentials:n.allowCrossSiteCredentials?"include":void 0},g,s,a,n.streamDataCallback),e=new jt(e,function(){return g.wf=!0,f.abort(),Promise.resolve()}),n=n.retryParameters.timeout){var T=new Qe(function(){g.eg=!0,f.abort()});T.R(n/1e3),e.finally(function(){T.stop()})}return e}function bx(e,n,r,s,a,d,f){var g,T,I,M,L,N,O,z,$,G,W,ae,J;return j(function(fe){switch(fe.g){case 1:return g=Ox,T=jx,N=L=0,O=Date.now(),ye(fe,2),k(fe,g(e,r),4);case 4:return I=fe.h,d(Bf(I.headers)),z=I.clone().body.getReader(),G=($=I.headers.get("Content-Length"))?parseInt($,10):0,W=function(xe){function Se(){var Me,Oe;return j(function(Ue){switch(Ue.g){case 1:return ye(Ue,2),k(Ue,z.read(),4);case 4:Me=Ue.h,_e(Ue,3);break;case 2:return we(Ue),Ue.return();case 3:if(Me.done){Ue.D(5);break}if(L+=Me.value.byteLength,!f){Ue.D(5);break}return k(Ue,f(Me.value),5);case 5:Oe=Date.now(),(100<Oe-O||Me.done)&&(a(Oe-O,L-N,G-L),N=L,O=Oe),Me.done?xe.close():(xe.enqueue(Me.value),Se()),le(Ue)}})}Se()},new T({start:W}),k(fe,I.arrayBuffer(),5);case 5:M=fe.h,_e(fe,3);break;case 2:throw ae=we(fe),s.wf?new se(1,1,7001,e,n):s.eg?new se(1,1,1003,e,n):new se(1,1,1002,e,ae,n);case 3:return J=Bf(I.headers),fe.return(ed(J,M,I.status,e,I.url,n))}})}function Bf(e){var n={};return e.forEach(function(r,s){n[s.trim()]=r}),n}function Px(){if(S.ReadableStream)try{new ReadableStream({})}catch(e){return!1}else return!1;return!(!S.fetch||!S.AbortController)}pe("shaka.net.HttpFetchPlugin",Uf),Uf.isSupported=Px,Uf.parse=jf;var Ox=S.fetch,Ux=S.AbortController,jx=S.ReadableStream,RA=S.Headers;Px()&&(Mi("http",jf,2,!0),Mi("https",jf,2,!0),Mi("blob",jf,2,!0));function Ff(){}function zf(e,n,r,s,a){var d=new LA,f=Date.now(),g=0,T=new Promise(function(I,M){d.open(n.method,e,!0),d.responseType="arraybuffer",d.timeout=n.retryParameters.timeout,d.withCredentials=n.allowCrossSiteCredentials,d.onabort=function(){M(new se(1,1,7001,e,r))};var L=!1;d.onreadystatechange=function(){if(d.readyState==2&&!L){var O=Bx(d);a(O),L=!0}},d.onload=function(){var O=Bx(d),z=d.response;try{var $=ed(O,z,d.status,e,d.responseURL,r);I($)}catch(G){M(G)}},d.onerror=function(O){M(new se(1,1,1002,e,O,r))},d.ontimeout=function(){M(new se(1,1,1003,e,r))},d.onprogress=function(O){var z=Date.now();(100<z-f||O.lengthComputable&&O.loaded==O.total)&&(s(z-f,O.loaded-g,O.total-O.loaded),g=O.loaded,f=z)};for(var N in n.headers)d.setRequestHeader(N.toLowerCase(),n.headers[N]);d.send(n.body)});return new jt(T,function(){return d.abort(),Promise.resolve()})}function Bx(e){var n=e.getAllResponseHeaders().trim().split("\r\n");e={},n=A(n);for(var r=n.next();!r.done;r=n.next())r=r.value.split(": "),e[r[0].toLowerCase()]=r.slice(1).join(": ");return e}pe("shaka.net.HttpXHRPlugin",Ff),Ff.parse=zf;var LA=S.XMLHttpRequest;Mi("http",zf,1,!0),Mi("https",zf,1,!0),Mi("blob",zf,1,!0);function td(e,n,r,s){this.g=e,this.i=n,this.groupId=r,this.h=s}function nd(e){return e.Pa().map(function(n){return"{"+encodeURI(n)+"}"}).join("")+":"+e.Ta+":"+e.Ba}function b0(e,n){return Fs(e.g.Pa(),e.g.Ta,e.g.Ba,n.streaming.retryParameters)}function $s(){this.h=this.j=this.i=0,this.g=new Map,this.l=0}function id(e,n){e.i+=n;var r=e.l;return e.l++,e.g.set(r,n),r}$s.prototype.close=function(e,n){if(this.g.has(e)){var r=this.g.get(e);this.g.delete(e),this.j+=r,this.h+=n}};function Qs(e){var n=this;this.s=e,this.j=new Map,this.i=new ns(function(){return Gf(n).catch(function(){})}),this.h=[],this.m=function(){},this.l=function(){},this.g=new $s}Qs.prototype.destroy=function(){return this.i.destroy()};function NA(e,n,r){e.m=n,e.l=r}function Gf(e){var n=e.h.map(function(r){return r()});return e.h=[],Promise.all(n)}function Fx(e,n,r,s,a,d){Gt(e.i);var f=(e.j.get(n)||Promise.resolve()).then(function(){var g,T,I,M,L,N,O;return j(function(z){if(z.g==1)return k(z,rd(e,r),2);if(g=z.h,e.i.g)throw new se(2,9,7001);if(a)for(M in T=Tt(g),I=new Io(T),I.data)L=Number(M),N=I.data[L],O=I.g[L],e.l(N,O);e.g.close(s,g.byteLength);var $=e.g;return e.m($.i==0?0:$.j/$.i,e.g.h),z.return(d(g))})});e.j.set(n,f)}function zx(e){return j(function(n){return n.g==1?k(n,Promise.all(e.j.values()),2):n.return(e.g.h)})}function rd(e,n){var r,s,a,d;return j(function(f){return f.g==1?(r=ts,s=e.s.request(r,n),a=function(){return s.abort()},e.h.push(a),k(f,s.promise,2)):(d=f.h,Ii(e.h,a),f.return(d.data))})}function Wn(e,n){var r=this;this.i=e,this.h=e.objectStore(n),this.g=new bt,e.onabort=function(s){s.preventDefault(),r.g.reject()},e.onerror=function(s){s.preventDefault(),r.g.reject()},e.oncomplete=function(){r.g.resolve()}}Wn.prototype.abort=function(){var e=this;return j(function(n){if(n.g==1){try{e.i.abort()}catch(r){}return ye(n,2),k(n,e.g,4)}if(n.g!=2)return _e(n,0);we(n),le(n)})};function Vf(e,n){return new Promise(function(r,s){var a=e.h.openCursor();a.onerror=s,a.onsuccess=function(){var d;return j(function(f){if(f.g==1)return a.result==null?(r(),f.return()):(d=a.result,k(f,n(d.key,d.value,d),2));d.continue(),le(f)})}})}Wn.prototype.store=function(){return this.h},Wn.prototype.promise=function(){return this.g};function P0(e){this.h=e,this.g=[]}P0.prototype.destroy=function(){return Promise.all(this.g.map(function(e){return e.abort()}))};function Uo(e,n){return Kf(e,n,"readwrite")}function Kf(e,n,r){r=e.h.transaction([n],r);var s=new Wn(r,n);return e.g.push(s),s.promise().then(function(){Ii(e.g,s)},function(){Ii(e.g,s)}),s}function ra(e,n,r){this.h=new P0(e),this.i=n,this.g=r}v=ra.prototype,v.destroy=function(){return this.h.destroy()},v.hasFixedKeySpace=function(){return!0},v.addSegments=function(){return O0(this.i)},v.removeSegments=function(e,n){return Cl(this,this.i,e,n)},v.getSegments=function(e){var n=this,r;return j(function(s){return s.g==1?k(s,kl(n,n.i,e),2):(r=s.h,s.return(r.map(function(a){return n.zf(a)})))})},v.addManifests=function(){return O0(this.g)},v.updateManifest=function(){return Promise.reject(new se(2,9,9016,"Cannot modify values in "+this.g))};function DA(e,n,r){e=Uo(e.h,e.g);var s=e.store();return s.get(n).onsuccess=function(){s.put(r,n)},e.promise()}v.updateManifestExpiration=function(e,n){var r=Uo(this.h,this.g),s=r.store();return s.get(e).onsuccess=function(a){(a=a.target.result)&&(a.expiration=n,s.put(a,e))},r.promise()},v.removeManifests=function(e,n){return Cl(this,this.g,e,n)},v.getManifests=function(e){var n=this,r;return j(function(s){return s.g==1?k(s,kl(n,n.g,e),2):(r=s.h,s.return(Promise.all(r.map(function(a){return n.Dc(a)}))))})},v.getAllManifests=function(){var e=this,n,r;return j(function(s){return s.g==1?(n=Kf(e.h,e.g,"readonly"),r=new Map,k(s,Vf(n,function(a,d){var f;return j(function(g){if(g.g==1)return k(g,e.Dc(d),2);f=g.h,r.set(a,f),le(g)})}),2)):s.g!=3?k(s,n.promise(),3):s.return(r)})},v.zf=function(e){return e},v.Dc=function(e){return Promise.resolve(e)};function O0(e){return Promise.reject(new se(2,9,9011,"Cannot add new value to "+e))}v.add=function(e,n){var r=this,s,a,d,f,g,T,I;return j(function(M){if(M.g==1){for(s=Uo(r.h,e),a=s.store(),d=[],f={},g=A(n),T=g.next();!T.done;f={gd:f.gd},T=g.next())I=T.value,f.gd=a.add(I),f.gd.onsuccess=function(L){return function(){d.push(L.gd.result)}}(f);return k(M,s.promise(),2)}return M.return(d)})};function Cl(e,n,r,s){e=Uo(e.h,n),n=e.store();var a={};r=A(r);for(var d=r.next();!d.done;a={fd:a.fd},d=r.next())a.fd=d.value,n.delete(a.fd).onsuccess=function(f){return function(){return s(f.fd)}}(a);return e.promise()}function kl(e,n,r){var s,a,d,f,g,T,I;return j(function(M){if(M.g==1){for(s=Kf(e.h,n,"readonly"),a=s.store(),d={},f=[],g={},T=A(r),I=T.next();!I.done;g={zc:g.zc,wc:g.wc},I=T.next())g.wc=I.value,g.zc=a.get(g.wc),g.zc.onsuccess=function(L){return function(){L.zc.result==null&&f.push(L.wc),d[L.wc]=L.zc.result}}(g);return k(M,s.promise(),2)}if(f.length)throw new se(2,9,9012,"Could not find values for "+f);return M.return(r.map(function(L){return d[L]}))})}function od(e){this.g=new P0(e)}od.prototype.destroy=function(){return this.g.destroy()},od.prototype.getAll=function(){var e=this,n,r;return j(function(s){return s.g==1?(n=Kf(e.g,"session-ids","readonly"),r=[],k(s,Vf(n,function(a,d){r.push(d)}),2)):s.g!=3?k(s,n.promise(),3):s.return(r)})},od.prototype.add=function(e){var n=Uo(this.g,"session-ids"),r=n.store();e=A(e);for(var s=e.next();!s.done;s=e.next())r.add(s.value);return n.promise()},od.prototype.remove=function(e){var n=this,r;return j(function(s){return s.g==1?(r=Uo(n.g,"session-ids"),k(s,Vf(r,function(a,d,f){e.includes(d.sessionId)&&f.delete()}),2)):k(s,r.promise(),0)})};function yi(){this.g=new Map}yi.prototype.destroy=function(){for(var e=[],n=A(this.g.values()),r=n.next();!r.done;r=n.next())e.push(r.value.destroy());return this.g.clear(),Promise.all(e)},yi.prototype.init=function(){var e=this;qi.forEach(function(a,d){(a=a())&&e.g.set(d,a)});for(var n=[],r=A(this.g.values()),s=r.next();!s.done;s=r.next())n.push(s.value.init());return Promise.all(n)};function U0(e){var n=null;if(e.g.forEach(function(r,s){r.getCells().forEach(function(a,d){a.hasFixedKeySpace()||n||(n={path:{Ra:s,Aa:d},Aa:a})})}),n)return n;throw new se(2,9,9013,"Could not find a cell that supports add-operations")}function bA(e,n){e.g.forEach(function(r,s){r.getCells().forEach(function(a,d){n({Ra:s,Aa:d},a)})})}function oa(e,n,r){if(e=e.g.get(n),!e)throw new se(2,9,9013,"Could not find mechanism with name "+n);if(n=e.getCells().get(r),!n)throw new se(2,9,9013,"Could not find cell with name "+r);return n}function PA(e,n){e.g.forEach(function(r){n(r.getEmeSessionCell())})}function j0(e){var n=Array.from(e.g.keys());if(!n.length)throw new se(2,9,9e3,"No supported storage mechanisms found");return e.g.get(n[0]).getEmeSessionCell()}function Gx(e){var n,r,s;return j(function(a){return a.g==1?(n=Array.from(e.g.values()),r=0<n.length,r||(s=qi,s.forEach(function(d){(d=d())&&n.push(d)})),k(a,Promise.all(n.map(function(d){return d.erase()})),2)):r?a.D(0):k(a,Promise.all(n.map(function(d){return d.destroy()})),0)})}function Vx(e,n){qi.set(e,n)}pe("shaka.offline.StorageMuxer",yi),yi.unregister=function(e){qi.delete(e)},yi.register=Vx,yi.prototype.destroy=yi.prototype.destroy;var qi=new Map;function sa(){ra.apply(this,arguments)}Te(sa,ra),sa.prototype.updateManifestExpiration=function(e,n){var r=this,s,a,d;return j(function(f){return s=Uo(r.h,r.g),a=s.store(),d=new bt,a.get(e).onsuccess=function(g){(g=g.target.result)?(g.expiration=n,a.put(g),d.resolve()):d.reject(new se(2,9,9012,"Could not find values for "+e))},k(f,Promise.all([s.promise(),d]),0)})},sa.prototype.Dc=function(e){var n,r,s,a,d,f;return j(function(g){if(g.g==1){for(n=[],r=0;r<e.periods.length;++r)s=r==e.periods.length-1?e.duration:e.periods[r+1].startTime,a=s-e.periods[r].startTime,d=Kx(e.periods[r],a),n.push(d);return k(g,c0(n),2)}return f=g.h,g.return({creationTime:0,originalManifestUri:e.originalManifestUri,duration:e.duration,size:e.size,expiration:e.expiration==null?1/0:e.expiration,streams:f,sessionIds:e.sessionIds,drmInfo:e.drmInfo,appMetadata:e.appMetadata,sequenceMode:!1})})};function Kx(e,n){Hf(e);for(var r=A(e.streams),s=r.next();!s.done;s=r.next());return e.streams.map(function(a){return Hx(a,e.startTime,n)})}function Hx(e,n,r){var s=e.initSegmentUri?Wx(e.initSegmentUri):null,a=n+e.presentationTimeOffset,d=n+r;return{id:e.id,originalId:null,primary:e.primary,type:e.contentType,mimeType:e.mimeType,codecs:e.codecs,frameRate:e.frameRate,pixelAspectRatio:void 0,hdr:void 0,kind:e.kind,language:e.language,label:e.label,width:e.width,height:e.height,initSegmentKey:s,encrypted:e.encrypted,keyIds:new Set([e.keyId]),segments:e.segments.map(function(f){var g=Wx(f.uri);return{startTime:n+f.startTime,endTime:n+f.endTime,dataKey:g,initSegmentKey:s,appendWindowStart:n,appendWindowEnd:d,timestampOffset:a,tilesLayout:""}}),variantIds:e.variantIds,roles:[],forced:!1,audioSamplingRate:null,channelsCount:null,spatialAudio:!1,closedCaptions:null,tilesLayout:void 0}}sa.prototype.zf=function(e){return{data:e.data}};function Wx(e){var n;if((n=/^offline:[0-9]+\/[0-9]+\/([0-9]+)$/.exec(e))||(n=/^offline:segment\/([0-9]+)$/.exec(e)))return Number(n[1]);throw new se(2,9,9004,"Could not parse uri "+e)}function Hf(e){var n=e.streams.filter(function(g){return g.contentType=="audio"});if(e=e.streams.filter(function(g){return g.contentType=="video"}),!n.every(function(g){return g.variantIds})||!e.every(function(g){return g.variantIds})){for(var r=A(n),s=r.next();!s.done;s=r.next())s.value.variantIds=[];for(r=A(e),s=r.next();!s.done;s=r.next())s.value.variantIds=[];if(r=0,e.length&&!n.length){var a=r++,d=A(e);for(s=d.next();!s.done;s=d.next())s.value.variantIds.push(a)}if(!e.length&&n.length)for(a=r++,d=A(n),s=d.next();!s.done;s=d.next())s.value.variantIds.push(a);if(e.length&&n.length)for(n=A(n),s=n.next();!s.done;s=n.next())for(s=s.value,a=A(e),d=a.next();!d.done;d=a.next()){d=d.value;var f=r++;s.variantIds.push(f),d.variantIds.push(f)}}}function Wf(){ra.apply(this,arguments)}Te(Wf,ra),Wf.prototype.Dc=function(e){var n,r,s,a,d,f;return j(function(g){if(g.g==1){for(n=[],r=0;r<e.periods.length;++r){s=r==e.periods.length-1?e.duration:e.periods[r+1].startTime,a=s-e.periods[r].startTime;for(var T=e.periods[r],I=[],M=A(T.streams),L=M.next();!L.done;L=M.next())L=L.value,L.variantIds.length!=0&&I.push(OA(L,T.startTime,T.startTime+a));d=I,n.push(d)}return k(g,c0(n),2)}return f=g.h,g.return({appMetadata:e.appMetadata,creationTime:0,drmInfo:e.drmInfo,duration:e.duration,expiration:e.expiration==null?1/0:e.expiration,originalManifestUri:e.originalManifestUri,sessionIds:e.sessionIds,size:e.size,streams:f,sequenceMode:!1})})};function OA(e,n,r){return{id:e.id,originalId:e.originalId,primary:e.primary,type:e.contentType,mimeType:e.mimeType,codecs:e.codecs,frameRate:e.frameRate,pixelAspectRatio:e.pixelAspectRatio,hdr:void 0,kind:e.kind,language:e.language,label:e.label,width:e.width,height:e.height,encrypted:e.encrypted,keyIds:new Set([e.keyId]),segments:e.segments.map(function(s){return{startTime:n+s.startTime,endTime:n+s.endTime,initSegmentKey:e.initSegmentKey,appendWindowStart:n,appendWindowEnd:r,timestampOffset:n-e.presentationTimeOffset,dataKey:s.dataKey,tilesLayout:""}}),variantIds:e.variantIds,roles:[],forced:!1,audioSamplingRate:null,channelsCount:null,spatialAudio:!1,closedCaptions:null,tilesLayout:void 0}}function qf(){ra.apply(this,arguments)}Te(qf,ra),v=qf.prototype,v.hasFixedKeySpace=function(){return!1},v.addSegments=function(e){return this.add(this.i,e)},v.addManifests=function(e){return this.add(this.g,e)},v.updateManifest=function(e,n){return DA(this,e,n)},v.Dc=function(e){return e.expiration==null&&(e.expiration=1/0),Promise.resolve(e)};function B0(){this.m=this.j=this.i=this.h=this.g=this.l=null}v=B0.prototype,v.init=function(){var e=this,n=new bt,r=!1,s=new Qe(function(){r=!0,n.reject(new se(2,9,9017))});s.R(2);var a=S.indexedDB.open("shaka_offline_db",5);return a.onsuccess=function(){if(!r){var d=a.result;e.l=d;var f=d.objectStoreNames;f=f.contains("manifest")&&f.contains("segment")?new sa(d,"segment","manifest"):null,e.g=f,f=d.objectStoreNames,f=f.contains("manifest-v2")&&f.contains("segment-v2")?new Wf(d,"segment-v2","manifest-v2"):null,e.h=f,f=d.objectStoreNames,f=f.contains("manifest-v3")&&f.contains("segment-v3")?new Wf(d,"segment-v3","manifest-v3"):null,e.i=f,f=d.objectStoreNames,f=f.contains("manifest-v5")&&f.contains("segment-v5")?new qf(d,"segment-v5","manifest-v5"):null,e.j=f,d=d.objectStoreNames.contains("session-ids")?new od(d):null,e.m=d,s.stop(),n.resolve()}},a.onupgradeneeded=function(){for(var d=a.result,f=A(["segment-v5","manifest-v5","session-ids"]),g=f.next();!g.done;g=f.next())g=g.value,d.objectStoreNames.contains(g)||d.createObjectStore(g,{autoIncrement:!0})},a.onerror=function(d){r||(n.reject(new se(2,9,9001,a.error)),s.stop(),d.preventDefault())},n},v.destroy=function(){var e=this;return j(function(n){switch(n.g){case 1:if(!e.g){n.D(2);break}return k(n,e.g.destroy(),2);case 2:if(!e.h){n.D(4);break}return k(n,e.h.destroy(),4);case 4:if(!e.i){n.D(6);break}return k(n,e.i.destroy(),6);case 6:if(!e.j){n.D(8);break}return k(n,e.j.destroy(),8);case 8:if(!e.m){n.D(10);break}return k(n,e.m.destroy(),10);case 10:e.l&&e.l.close(),le(n)}})},v.getCells=function(){var e=new Map;return this.g&&e.set("v1",this.g),this.h&&e.set("v2",this.h),this.i&&e.set("v3",this.i),this.j&&e.set("v5",this.j),e},v.getEmeSessionCell=function(){return this.m},v.erase=function(){var e=this;return j(function(n){switch(n.g){case 1:if(!e.g){n.D(2);break}return k(n,e.g.destroy(),2);case 2:if(!e.h){n.D(4);break}return k(n,e.h.destroy(),4);case 4:if(!e.i){n.D(6);break}return k(n,e.i.destroy(),6);case 6:if(!e.j){n.D(8);break}return k(n,e.j.destroy(),8);case 8:return e.l&&e.l.close(),k(n,qx(),10);case 10:return e.l=null,e.g=null,e.h=null,e.i=null,e.j=null,k(n,e.init(),0)}})};function qx(){var e=new bt,n=S.indexedDB.deleteDatabase("shaka_offline_db");return n.onblocked=function(){},n.onsuccess=function(){e.resolve()},n.onerror=function(r){e.reject(new se(2,9,9001,n.error)),r.preventDefault()},e}Vx("idb",function(){return zt("CrKey")||ka()||!S.indexedDB?null:new B0});function jo(e,n,r,s){this.g=e,this.i=n,this.h=r,this.l=s,this.j=["offline:",e,"/",n,"/",r,"/",s].join("")}jo.prototype.Ra=function(){return this.i},jo.prototype.Aa=function(){return this.h},jo.prototype.key=function(){return this.l},jo.prototype.toString=function(){return this.j};function Xf(e){if(e=/^offline:([a-z]+)\/([^/]+)\/([^/]+)\/([0-9]+)$/.exec(e),e==null)return null;var n=e[1];if(n!="manifest"&&n!="segment")return null;var r=e[2];if(!r)return null;var s=e[3];return s&&n!=null?new jo(n,r,s,Number(e[4])):null}function Xx(e,n){this.h=e,this.g=n}function Yx(e,n){var r=new nt(null,0);r.Sa(n.duration);var s=n.streams.filter(function(I){return I.type=="audio"}),a=n.streams.filter(function(I){return I.type=="video"});s=UA(e,s,a,r),a=n.streams.filter(function(I){return I.type==yt}).map(function(I){return Ml(e,I,r)});var d=n.streams.filter(function(I){return I.type=="image"}).map(function(I){return Ml(e,I,r)}),f=n.drmInfo?[n.drmInfo]:[];if(n.drmInfo)for(var g=A(s.values()),T=g.next();!T.done;T=g.next())T=T.value,T.audio&&T.audio.encrypted&&(T.audio.drmInfos=f),T.video&&T.video.encrypted&&(T.video.drmInfos=f);return{presentationTimeline:r,minBufferTime:2,offlineSessionIds:n.sessionIds,variants:Array.from(s.values()),textStreams:a,imageStreams:d,sequenceMode:n.sequenceMode||!1}}function UA(e,n,r,s){for(var a=new Set,d=A(n),f=d.next();!f.done;f=d.next()){var g=A(f.value.variantIds);for(f=g.next();!f.done;f=g.next())a.add(f.value)}for(d=A(r),f=d.next();!f.done;f=d.next())for(g=A(f.value.variantIds),f=g.next();!f.done;f=g.next())a.add(f.value);for(d=new Map,a=A(a),f=a.next();!f.done;f=a.next())f=f.value,d.set(f,{id:f,language:"",disabledUntilTime:0,primary:!1,audio:null,video:null,bandwidth:0,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]});for(n=A(n),a=n.next();!a.done;a=n.next())for(a=a.value,f=Ml(e,a,s),g=A(a.variantIds),a=g.next();!a.done;a=g.next())a=d.get(a.value),a.language=f.language,a.primary=a.primary||f.primary,a.audio=f;for(r=A(r),n=r.next();!n.done;n=r.next())for(a=n.value,n=Ml(e,a,s),f=A(a.variantIds),a=f.next();!a.done;a=f.next())a=d.get(a.value),a.primary=a.primary||n.primary,a.video=n;return d}function Ml(e,n,r){var s=n.segments.map(function(a){return $x(e,a)});return r.lc(s),{id:n.id,originalId:n.originalId,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new Rt(s),mimeType:n.mimeType,codecs:n.codecs,width:n.width||void 0,height:n.height||void 0,frameRate:n.frameRate,pixelAspectRatio:n.pixelAspectRatio,hdr:n.hdr,kind:n.kind,encrypted:n.encrypted,drmInfos:[],keyIds:n.keyIds,language:n.language,label:n.label,type:n.type,primary:n.primary,trickModeVideo:null,emsgSchemeIdUris:null,roles:n.roles,forced:n.forced,channelsCount:n.channelsCount,audioSamplingRate:n.audioSamplingRate,spatialAudio:n.spatialAudio,closedCaptions:n.closedCaptions,tilesLayout:n.tilesLayout}}function $x(e,n){var r=new jo("segment",e.h,e.g,n.dataKey);return new ft(n.startTime,n.endTime,function(){return[r.toString()]},0,null,n.initSegmentKey!=null?jA(e,n.initSegmentKey):null,n.timestampOffset,n.appendWindowStart,n.appendWindowEnd,[],n.tilesLayout||"")}function jA(e,n){var r=new jo("segment",e.h,e.g,n);return new ur(function(){return[r.toString()]},0,null)}function Qx(){this.g=null}v=Qx.prototype,v.configure=function(){},v.start=function(e,n){var r=this,s,a,d,f,g,T,I;return j(function(M){switch(M.g){case 1:if(s=Xf(e),r.g=s,s==null||s.g!="manifest")throw new se(2,1,9004,e);return a=new yi,He(M),k(M,a.init(),4);case 4:return k(M,oa(a,s.Ra(),s.Aa()),5);case 5:return d=M.h,k(M,d.getManifests([s.key()]),6);case 6:return f=M.h,g=f[0],T=new Xx(s.Ra(),s.Aa()),I=Yx(T,g),n.makeTextStreamsForClosedCaptions(I),M.return(I);case 2:return st(M),k(M,a.destroy(),7);case 7:Et(M,0)}})},v.stop=function(){return Promise.resolve()},v.update=function(){},v.onExpirationUpdated=function(e,n){var r=this,s,a,d,f,g,T,I;return j(function(M){switch(M.g){case 1:return s=r.g,a=new yi,ye(M,2,3),k(M,a.init(),5);case 5:return k(M,oa(a,s.Ra(),s.Aa()),6);case 6:return d=M.h,k(M,d.getManifests([s.key()]),7);case 7:if(f=M.h,g=f[0],T=g.sessionIds.includes(e),I=g.expiration==null||g.expiration>n,!T||!I){M.D(3);break}return k(M,d.updateManifestExpiration(s.key(),n),3);case 3:return st(M),k(M,a.destroy(),10);case 10:Et(M,0);break;case 2:we(M),M.D(3)}})},or["application/x-offline-manifest"]=function(){return new Qx};function Zx(){}function F0(e){var n=Xf(e);return n&&n.g=="manifest"?(e={uri:e,Qf:e,data:new ArrayBuffer(0),headers:{"content-type":"application/x-offline-manifest"}},e=oi(e)):e=n&&n.g=="segment"?Pn(n.key(),n):Nt(new se(2,1,9004,e)),e}function Pn(e,n){var r=new yi;return oi(void 0).ia(function(){return r.init()}).ia(function(){return oa(r,n.Ra(),n.Aa())}).ia(function(s){return s.getSegments([n.key()])}).ia(function(s){return{uri:n,data:s[0].data,headers:{}}}).finally(function(){return r.destroy()})}pe("shaka.offline.OfflineScheme",Zx),Zx.plugin=F0,Mi("offline",F0);function Yf(e,n,r){var s,a,d,f,g,T;return j(function(I){switch(I.g){case 1:s=[];for(var M=[],L=A(r),N=L.next();!N.done;N=L.next()){N=N.value;for(var O=!1,z=A(M),$=z.next();!$.done;$=z.next())if($=$.value,FA($.info,N)){$.sessionIds.push(N.sessionId),O=!0;break}O||M.push({info:N,sessionIds:[N.sessionId]})}a=A(M),d=a.next();case 2:if(d.done){I.D(4);break}return f=d.value,g=BA(e,n,f),k(I,g,5);case 5:T=I.h,s=s.concat(T),d=a.next(),I.D(2);break;case 4:return I.return(s)}})}function BA(e,n,r){var s,a;return j(function(d){switch(d.g){case 1:return s=new Ka({Ob:n,onError:function(){},Fd:function(){},onExpirationUpdated:function(){},onEvent:function(){}}),ye(d,2),s.configure(e),k(d,Ey(s,r.info.keySystem,r.info.licenseUri,r.info.serverCertificate,r.info.audioCapabilities,r.info.videoCapabilities),4);case 4:_e(d,3);break;case 2:return we(d),k(d,s.destroy(),5);case 5:return d.return([]);case 3:return ye(d,6),k(d,Mg(s),8);case 8:_e(d,7);break;case 6:return we(d),k(d,s.destroy(),9);case 9:return d.return([]);case 7:return a=[],k(d,Promise.all(r.sessionIds.map(function(f){return j(function(g){if(g.g==1)return ye(g,2),k(g,tE(s,f),4);if(g.g!=2)return a.push(f),_e(g,0);we(g),le(g)})})),10);case 10:return k(d,s.destroy(),11);case 11:return d.return(a)}})}function FA(e,n){function r(s,a){return s.robustness==a.robustness&&s.contentType==a.contentType}return e.keySystem==n.keySystem&&e.licenseUri==n.licenseUri&&xo(e.audioCapabilities,n.audioCapabilities,r)&&xo(e.videoCapabilities,n.videoCapabilities,r)}function Jx(e,n,r){var s=n.presentationTimeline.getDuration();return n=eT(n),{offlineUri:null,originalManifestUri:e,duration:s,size:0,expiration:1/0,tracks:n,appMetadata:r,isIncomplete:!1}}function $f(e,n){var r=Yx(new Xx(e.Ra(),e.Aa()),n),s=n.appMetadata||{};return r=eT(r),{offlineUri:e.toString(),originalManifestUri:n.originalManifestUri,duration:n.duration,size:n.size,expiration:n.expiration,tracks:r,appMetadata:s,isIncomplete:n.isIncomplete||!1}}function eT(e){var n=[],r=ay(e.variants);r=A(r);for(var s=r.next();!s.done;s=r.next())n.push(wu(s.value));for(e=A(e.textStreams),r=e.next();!r.done;r=e.next())n.push(Wd(r.value));return n}function zA(){this.g={}}function z0(e,n){var r=n.audio,s=n.video;if(r&&!s&&(e.g[r.id]=r.bandwidth||n.bandwidth),!r&&s&&(e.g[s.id]=s.bandwidth||n.bandwidth),r&&s){var a=r.bandwidth||393216,d=s.bandwidth||n.bandwidth-a;0>=d&&(d=n.bandwidth),e.g[r.id]=a,e.g[s.id]=d}}function tT(e,n){e.g[n.id]=n.bandwidth||2048}function nT(e,n){return e=e.g[n],e==null&&(e=0),e}function On(e){var n=this;if(e&&e.constructor!=Ce)throw new se(2,9,9008);this.g=this.h=null,e?(this.h=e.h,this.g=e.Hc()):(this.h=Ae(),this.g=new Ot),this.i=[],this.j=[];var r=!e;this.l=new ns(function(){var s,a,d,f,g;return j(function(T){switch(T.g){case 1:return k(T,Promise.all(n.j.map(function(I){return Gf(I)})),2);case 2:for(s=function(){},a=[],d=A(n.i),f=d.next();!f.done;f=d.next())g=f.value,a.push(g.then(s,s));return k(T,Promise.all(a),3);case 3:if(!r){T.D(4);break}return k(T,n.g.destroy(),4);case 4:n.h=null,n.g=null,le(T)}})})}function Qf(){if(Ci())e:{for(var e=A(qi.values()),n=e.next();!n.done;n=e.next())if(n=n.value,n=n()){n.destroy(),e=!0;break e}e=!1}else e=!1;return e}v=On.prototype,v.destroy=function(){return this.l.destroy()},v.configure=function(e,n){return arguments.length==2&&typeof e=="string"&&(e=zu(e,n)),ds(this.h,e)},v.getConfiguration=function(){var e=Ae();return ds(e,this.h,Ae()),e},v.Hc=function(){return this.g},v.store=function(e,n,r){var s=this,a=this.getConfiguration(),d=new Qs(this.g);return this.j.push(d),n=GA(this,e,n||{},function(){var f;return j(function(g){return g.g==1?k(g,My(e,s.g,a.manifest.retryParameters,r||null),2):(f=g.h,g.return(f()))})},a,d),n=new jt(n,function(){return Gf(d)}),n.finally(function(){Ii(s.j,d)}),Jf(this,n)};function GA(e,n,r,s,a,d){var f,g,T,I,M,L,N,O,z,$,G,W,ae,J;return j(function(fe){switch(fe.g){case 1:return Zs(),g=f=null,T=new yi,L=M=I=null,ye(fe,2,3),k(fe,s(),5);case 5:return f=fe.h,k(fe,sT(e,n,f,a),6);case 6:if(N=fe.h,An(e),O=!N.presentationTimeline.T()&&!N.presentationTimeline.Lb(),!O)throw new se(2,9,9005,n);return k(fe,$A(e,N,function(xe){L=L||xe},a),7);case 7:if(g=fe.h,An(e),L)throw L;return k(fe,KA(N,a),8);case 8:return k(fe,T.init(),9);case 9:return An(e),k(fe,U0(T),10);case 10:return I=fe.h,An(e),z=HA(g,N,n,r,a,d),$=z.jh,G=z.We,k(fe,I.Aa.addManifests([$]),11);case 11:if(W=fe.h,An(e),M=W[0],An(e),L)throw L;return k(fe,VA(e,G,M,$,d,a,I.Aa,N,g),12);case 12:return An(e),ae=new jo("manifest",I.path.Ra,I.path.Aa,M),fe.return($f(ae,$));case 3:return st(fe),k(fe,T.destroy(),13);case 13:if(!f){fe.D(14);break}return k(fe,f.stop(),14);case 14:if(!g){fe.D(16);break}return k(fe,g.destroy(),16);case 16:Et(fe,0);break;case 2:if(J=we(fe),M==null){fe.D(18);break}return k(fe,iT(M),18);case 18:throw L||J}})}function VA(e,n,r,s,a,d,f,g,T){var I,M,L,N,O,z,$,G,W,ae;return j(function(J){switch(J.g){case 1:if(I={},M=0,L=function(fe,xe){var Se,Me,Oe,Ue,rt,ut,ct;return j(function(It){if(It.g==1){for(Se={},Me=A(fe),Oe=Me.next();!Oe.done;Se={Fb:Se.Fb},Oe=Me.next())Se.Fb=Oe.value,Ue=b0(Se.Fb,d),rt=Se.Fb.i,ut=Se.Fb.h,ct=function(Ye){return function(gn){var un,wn,po;return j(function(Bo){if(Bo.g==1)return k(Bo,f.addSegments([{data:gn}]),2);un=Bo.h,An(e),wn=Ye.Fb.g,po=nd(wn),I[po]=un[0],M+=gn.byteLength,le(Bo)})}}(Se),Fx(a,Se.Fb.groupId,Ue,rt,ut,ct);return k(It,zx(a),2)}return xe?(An(e),WA(g,s,T,d),k(It,f.updateManifest(r,s),0)):It.D(0)})},N=!1,ye(J,2),!G0(g)||!N||oT(g)){J.D(4);break}return k(J,L(n.filter(function(fe){return fe.h}),!0),5);case 5:return An(e),n=n.filter(function(fe){return!fe.h}),O=I,z=M,I={},M=0,k(J,rT(f,r,s,O,z,function(){return An(e)}),6);case 6:An(e);case 4:if(N){J.D(7);break}return k(J,L(n,!1),8);case 8:return An(e),$=I,G=M,I={},M=0,k(J,rT(f,r,s,$,G,function(){return An(e)}),9);case 9:An(e);case 7:_e(J,0);break;case 2:return W=we(J),ae=Object.values(I),k(J,f.removeSegments(ae,function(){}),10);case 10:throw W}})}function iT(e){var n,r,s,a;return j(function(d){switch(d.g){case 1:return n=new yi,k(d,n.init(),2);case 2:return k(d,U0(n),3);case 3:return r=d.h,s=new jo("manifest",r.path.Ra,r.path.Aa,e),k(d,n.destroy(),4);case 4:return a=new On,k(d,a.remove(s.toString()),0)}})}function rT(e,n,r,s,a,d){var f,g,T,I,M,L,N,O,z,$,G;return j(function(W){switch(W.g){case 1:for(f=!1,ye(W,2),g=!0,T=A(r.streams),I=T.next();!I.done;I=T.next())for(M=I.value,L=A(M.segments),N=L.next();!N.done;N=L.next())O=N.value,z=O.pendingSegmentRefId?s[O.pendingSegmentRefId]:null,z!=null&&(O.dataKey=z,O.pendingSegmentRefId=void 0),z=O.pendingInitSegmentRefId?s[O.pendingInitSegmentRefId]:null,z!=null&&(O.initSegmentKey=z,O.pendingInitSegmentRefId=void 0),O.pendingSegmentRefId&&(g=!1),O.pendingInitSegmentRefId&&(g=!1);return r.size+=a,g&&(r.isIncomplete=!1),k(W,e.updateManifest(n,r),4);case 4:f=!0,d(),_e(W,0);break;case 2:return $=we(W),k(W,iT(n),5);case 5:if(f){W.D(6);break}return G=Object.values(s),k(W,e.removeSegments(G,function(){}),6);case 6:throw $}})}function KA(e,n){var r,s,a,d,f,g,T,I,M,L,N,O,z,$,G,W,ae,J,fe,xe,Se,Me,Oe,Ue,rt,ut,ct,It,Ye;return j(function(gn){switch(gn.g){case 1:return r={width:1/0,height:1/0},xu(e,n.restrictions,r),k(gn,lg(e,n.offline.usePersistentLicense),2);case 2:for(s=[],a=n.preferredAudioChannelCount,d=n.preferredDecodingAttributes,f=n.preferredVideoCodecs,g=n.preferredAudioCodecs,iy(e,f,g,a,d),T=A(e.variants),I=T.next();!I.done;I=T.next())M=I.value,s.push(wu(M));for(L=A(e.textStreams),N=L.next();!N.done;N=L.next())O=N.value,s.push(Wd(O));for(z=A(e.imageStreams),$=z.next();!$.done;$=z.next())G=$.value,s.push(fg(G));return k(gn,n.offline.trackSelectionCallback(s),3);case 3:for(W=gn.h,ae=e.presentationTimeline.getDuration(),J=0,fe=A(W),xe=fe.next();!xe.done;xe=fe.next())Se=xe.value,Me=Se.bandwidth*ae/8,J+=Me;return ye(gn,4),k(gn,n.offline.downloadSizeCallback(J),6);case 6:if(Oe=gn.h,!Oe)throw new se(2,9,9014);_e(gn,5);break;case 4:throw Ue=we(gn),Ue instanceof se?Ue:new se(2,9,9015);case 5:for(rt=new Set,ut=new Set,ct=new Set,It=A(W),xe=It.next();!xe.done;xe=It.next())Ye=xe.value,Ye.type=="variant"&&rt.add(Ye.id),Ye.type=="text"&&ut.add(Ye.id),Ye.type=="image"&&ct.add(Ye.id);e.variants=e.variants.filter(function(un){return rt.has(un.id)}),e.textStreams=e.textStreams.filter(function(un){return ut.has(un.id)}),e.imageStreams=e.imageStreams.filter(function(un){return ct.has(un.id)}),cT(e),le(gn)}})}function HA(e,n,r,s,a,d){var f=Jx(r,n,s),g=a.offline.progressCallback;NA(d,function(O,z){f.size=z,g(f,O)},function(O,z){T&&a.offline.usePersistentLicense&&I==z&&oc(e,"cenc",O)});var T=G0(n)&&!oT(n),I=null;T&&(I=dT.get(e.g.keySystem));for(var M=new zA,L=A(n.textStreams),N=L.next();!N.done;N=L.next())M.g[N.value.id]=52;for(L=A(n.imageStreams),N=L.next();!N.done;N=L.next())tT(M,N.value);for(N=A(n.variants),L=N.next();!L.done;L=N.next())z0(M,L.value);return M=QA(d,M,n,a),d=M.streams,M=M.We,N=e.g,L=a.offline.usePersistentLicense,N&&L&&(N.initData=[]),{jh:{creationTime:Date.now(),originalManifestUri:r,duration:n.presentationTimeline.getDuration(),size:0,expiration:e.Gc(),streams:d,sessionIds:L?Ay(e):[],drmInfo:N,appMetadata:s,isIncomplete:!0,sequenceMode:n.sequenceMode},We:M}}function G0(e){return e.variants.some(function(n){var r=n.audio&&n.audio.encrypted;return n.video&&n.video.encrypted||r})}function oT(e){return e.variants.some(function(n){return(n.video?n.video.drmInfos:[]).concat(n.audio?n.audio.drmInfos:[]).some(function(r){return r.initData&&r.initData.length})})}function WA(e,n,r,s){if(n.expiration=r.Gc(),r=Ay(r),n.sessionIds=s.offline.usePersistentLicense?r:[],G0(e)&&s.offline.usePersistentLicense&&!r.length)throw new se(2,9,9007)}v.remove=function(e){return Zf(this,Yn(this,e))};function Yn(e,n){var r,s,a,d,f,g;return j(function(T){switch(T.g){case 1:if(Zs(),r=Xf(n),r==null||r.g!="manifest")throw new se(2,9,9004,n);return s=r,a=new yi,He(T),k(T,a.init(),4);case 4:return k(T,oa(a,s.Ra(),s.Aa()),5);case 5:return d=T.h,k(T,d.getManifests([s.key()]),6);case 6:return f=T.h,g=f[0],k(T,Promise.all([V0(e,g,a),qA(d,s,g)]),2);case 2:return st(T),k(T,a.destroy(),8);case 8:Et(T,0)}})}function sd(e,n){for(var r=[],s=A(e.streams),a=s.next();!a.done;a=s.next())a=a.value,n&&a.type=="video"?r.push({contentType:Qr(a.mimeType,a.codecs),robustness:e.drmInfo.videoRobustness}):n||a.type!="audio"||r.push({contentType:Qr(a.mimeType,a.codecs),robustness:e.drmInfo.audioRobustness});return r}function V0(e,n,r){return j(function(s){return k(s,aT(e.g,e.h.drm,r,n),0)})}function qA(e,n,r){function s(){}var a=uT(r);return $f(n,r),Promise.all([e.removeSegments(a,s),e.removeManifests([n.key()],s)])}v.Ah=function(){return Zf(this,XA(this))};function XA(e){var n,r,s,a,d,f,g,T,I,M;return j(function(L){switch(L.g){case 1:return Zs(),n=e.g,r=e.h.drm,s=new yi,a=!1,He(L),k(L,s.init(),4);case 4:d=[],PA(s,function(N){return d.push(N)}),f=A(d),g=f.next();case 5:if(g.done){L.D(2);break}return T=g.value,k(L,T.getAll(),8);case 8:return I=L.h,k(L,Yf(r,n,I),9);case 9:return M=L.h,k(L,T.remove(M),10);case 10:M.length!=I.length&&(a=!0),g=f.next(),L.D(5);break;case 2:return st(L),k(L,s.destroy(),11);case 11:Et(L,3);break;case 3:return L.return(!a)}})}v.list=function(){return Zf(this,YA())};function YA(){var e,n,r;return j(function(s){switch(s.g){case 1:return Zs(),e=[],n=new yi,He(s),k(s,n.init(),4);case 4:return r=Promise.resolve(),bA(n,function(a,d){r=r.then(function(){var f;return j(function(g){if(g.g==1)return k(g,d.getAllManifests(),2);f=g.h,f.forEach(function(T,I){T=$f(new jo("manifest",a.Ra,a.Aa,I),T),e.push(T)}),le(g)})})}),k(s,r,2);case 2:return st(s),k(s,n.destroy(),6);case 6:Et(s,3);break;case 3:return s.return(e)}})}function sT(e,n,r,s){var a,d,f,g,T;return j(function(I){if(I.g==1)return a=null,d=e.g,f={networkingEngine:d,modifyManifestRequest:function(){},modifySegmentRequest:function(){},filter:function(){return Promise.resolve()},makeTextStreamsForClosedCaptions:function(){},onTimelineRegionAdded:function(){},onEvent:function(){},onError:function(M){a=M},isLowLatencyMode:function(){return!1},isAutoLowLatencyMode:function(){return!1},enableLowLatencyMode:function(){},updateDuration:function(){},newDrmInfo:function(){}},r.configure(s.manifest),An(e),k(I,r.start(n,f),2);if(I.g!=3)return g=I.h,An(e),T=lT(g),k(I,Promise.all(qp(T,function(M){return M.createSegmentIndex()})),3);if(An(e),a)throw a;return I.return(g)})}function $A(e,n,r,s){var a;return j(function(d){switch(d.g){case 1:return a=new Ka({Ob:e.g,onError:r,Fd:function(){},onExpirationUpdated:function(){},onEvent:function(){}}),a.configure(s.drm),k(d,wy(a,n.variants,s.offline.usePersistentLicense),2);case 2:return k(d,Mg(a),3);case 3:return k(d,_g(a),4);case 4:return d.return(a)}})}function QA(e,n,r,s){var a=new Map,d=lT(r),f=new Map;d=A(d);for(var g=d.next();!g.done;g=d.next()){g=g.value;var T=Gn(e,n,r,g,s,a);f.set(g.id,T)}for(e=A(r.variants),n=e.next();!n.done;n=e.next())n=n.value,n.audio&&f.get(n.audio.id).variantIds.push(n.id),n.video&&f.get(n.video.id).variantIds.push(n.id);return{streams:Array.from(f.values()),We:Array.from(a.values())}}function Gn(e,n,r,s,a,d){var f={id:s.id,originalId:s.originalId,primary:s.primary,type:s.type,mimeType:s.mimeType,codecs:s.codecs,frameRate:s.frameRate,pixelAspectRatio:s.pixelAspectRatio,hdr:s.hdr,kind:s.kind,language:s.language,label:s.label,width:s.width||null,height:s.height||null,encrypted:s.encrypted,keyIds:s.keyIds,segments:[],variantIds:[],roles:s.roles,forced:s.forced,channelsCount:s.channelsCount,audioSamplingRate:s.audioSamplingRate,spatialAudio:s.spatialAudio,closedCaptions:s.closedCaptions,tilesLayout:s.tilesLayout},g=a.offline.numberOfParallelDownloads,T=0;return ui(s,r.presentationTimeline.mb(),function(I){var M=nd(I),L=void 0;if(!d.has(M)){var N=I.endTime-I.startTime;N=nT(n,s.id)*N,N=id(e.g,N),d.set(M,new td(I,N,T,!1))}I.h&&(L=nd(I.h),d.has(L)||(N=.5*nT(n,s.id),N=id(e.g,N),d.set(L,new td(I.h,N,T,!0)))),f.segments.push({pendingInitSegmentRefId:L,initSegmentKey:L?0:null,startTime:I.startTime,endTime:I.endTime,appendWindowStart:I.appendWindowStart,appendWindowEnd:I.appendWindowEnd,timestampOffset:I.timestampOffset,tilesLayout:I.tilesLayout,pendingSegmentRefId:M,dataKey:0}),T=(T+1)%g}),f}function ui(e,n,r){if(n=e.segmentIndex.find(n),n!=null)for(var s=e.segmentIndex.get(n);s;)r(s),s=e.segmentIndex.get(++n)}function An(e){if(e.l.g)throw new se(2,9,7001)}function Zs(){if(!Qf())throw new se(2,9,9e3)}function Zf(e,n){return j(function(r){return r.g==1?(e.i.push(n),He(r),k(r,n,4)):r.g!=2?r.return(r.h):(st(r),Ii(e.i,n),Et(r,0))})}function Jf(e,n){var r=n.promise;return e.i.push(r),n.finally(function(){Ii(e.i,r)})}function uT(e){var n=new Set;e=A(e.streams);for(var r=e.next();!r.done;r=e.next()){r=A(r.value.segments);for(var s=r.next();!s.done;s=r.next())s=s.value,s.initSegmentKey!=null&&n.add(s.initSegmentKey),n.add(s.dataKey)}return Array.from(n)}function aT(e,n,r,s){var a,d,f;return j(function(g){return g.g==1?s.drmInfo?(a=j0(r),d=s.sessionIds.map(function(T){return{sessionId:T,keySystem:s.drmInfo.keySystem,licenseUri:s.drmInfo.licenseServerUri,serverCertificate:s.drmInfo.serverCertificate,audioCapabilities:sd(s,!1),videoCapabilities:sd(s,!0)}}),k(g,Yf(n,e,d),2)):g.return():g.g!=3?(f=g.h,k(g,a.remove(f),3)):k(g,a.add(d.filter(function(T){return!f.includes(T.sessionId)})),0)})}function lT(e){for(var n=new Set,r=A(e.textStreams),s=r.next();!s.done;s=r.next())n.add(s.value);for(r=A(e.imageStreams),s=r.next();!s.done;s=r.next())n.add(s.value);for(e=A(e.variants),r=e.next();!r.done;r=e.next())r=r.value,r.audio&&n.add(r.audio),r.video&&n.add(r.video);return n}function cT(e){e.variants.map(function(d){return d.video});var n=new Set(e.variants.map(function(d){return d.audio}));e=e.textStreams;for(var r=A(n),s=r.next();!s.done;s=r.next()){s=A(n);for(var a=s.next();!a.done;a=s.next());}for(n=A(e),r=n.next();!r.done;r=n.next())for(r=A(e),s=r.next();!s.done;s=r.next());}pe("shaka.offline.Storage",On),On.deleteAll=function(){var e;return j(function(n){return n.g==1?(e=new yi,He(n),k(n,Gx(e),2)):n.g!=5?(st(n),k(n,e.destroy(),5)):Et(n,0)})},On.prototype.list=On.prototype.list,On.prototype.removeEmeSessions=On.prototype.Ah,On.prototype.remove=On.prototype.remove,On.prototype.store=On.prototype.store,On.prototype.getNetworkingEngine=On.prototype.Hc,On.prototype.getConfiguration=On.prototype.getConfiguration,On.prototype.configure=On.prototype.configure,On.prototype.destroy=On.prototype.destroy,On.support=Qf;var dT=new Map().set("org.w3.clearkey","1077efecc0b24d02ace33c1e52e2fb4b").set("com.widevine.alpha","edef8ba979d64acea3c827dcd51d21ed").set("com.microsoft.playready","9a04f07998404286ab92e65be0885f95").set("com.microsoft.playready.recommendation","9a04f07998404286ab92e65be0885f95").set("com.microsoft.playready.software","9a04f07998404286ab92e65be0885f95").set("com.microsoft.playready.hardware","9a04f07998404286ab92e65be0885f95").set("com.adobe.primetime","f239e769efa348509c16a903c6932efb");Zh.offline=Qf;function Un(){}function K0(){for(var e=A(ua),n=e.next();!n.done;n=e.next()){n=n.value;try{n.pg()}catch(r){ze("Error installing polyfill!",r)}}}function Sn(e,n){for(e={priority:n||0,pg:e},n=0;n<ua.length;n++)if(ua[n].priority<e.priority){ua.splice(n,0,e);return}ua.push(e)}pe("shaka.polyfill",Un),Un.register=Sn,Un.installAll=K0;var ua=[];function _l(){this.g=new ud}function hT(){S.AbortController||(S.AbortController=_l,S.AbortSignal=ud)}_l.prototype.abort=function(e){var n=this.g;n.h||(n.h=!0,n.g=e,n.g===void 0&&(n.g=new DOMException("signal is aborted without reason","AbortError")),e=new Fe("abort"),n.onabort&&n.onabort(e),n.dispatchEvent(e))},ee.Object.defineProperties(_l.prototype,{signal:{configurable:!0,enumerable:!0,get:function(){return this.g}}}),Un.AbortController=_l,_l.install=hT;function ud(){vt.call(this),this.h=!1,this.g=void 0,this.onabort=null}Te(ud,vt),ee.Object.defineProperties(ud.prototype,{aborted:{configurable:!0,enumerable:!0,get:function(){return this.h}},reason:{configurable:!0,enumerable:!0,get:function(){return this.g}}}),Sn(hT);function H0(){}function W0(){if(!Object.getOwnPropertyDescriptor(Element.prototype,"ariaHidden"))for(var e=A(["ariaHidden","ariaLabel","ariaPressed","ariaSelected"]),n=e.next();!n.done;n=e.next())fT(n.value)}function fT(e){var n="aria-"+e.toLowerCase().replace(/^aria/,"");Object.defineProperty(Element.prototype,e,{get:function(){return this.getAttribute(n)},set:function(r){r==null||r==null?this.removeAttribute(n):this.setAttribute(n,r)}})}Un.Aria=H0,H0.install=W0,Sn(W0);function pT(){}function gT(){D()}Un.EncryptionScheme=pT,pT.install=gT,Sn(gT,-2);function mT(){}function vT(){if(S.Document){var e=Element.prototype;e.requestFullscreen=e.requestFullscreen||e.mozRequestFullScreen||e.msRequestFullscreen||e.webkitRequestFullscreen,e=Document.prototype,e.exitFullscreen=e.exitFullscreen||e.mozCancelFullScreen||e.msExitFullscreen||e.webkitCancelFullScreen,"fullscreenElement"in document||(Object.defineProperty(document,"fullscreenElement",{get:function(){return document.mozFullScreenElement||document.msFullscreenElement||document.webkitCurrentFullScreenElement||document.webkitFullscreenElement}}),Object.defineProperty(document,"fullscreenEnabled",{get:function(){return document.mozFullScreenEnabled||document.msFullscreenEnabled||document.webkitFullscreenEnabled}})),document.addEventListener("webkitfullscreenchange",aa),document.addEventListener("webkitfullscreenerror",aa),document.addEventListener("mozfullscreenchange",aa),document.addEventListener("mozfullscreenerror",aa),document.addEventListener("MSFullscreenChange",aa),document.addEventListener("MSFullscreenError",aa)}}function aa(e){var n=e.type.replace(/^(webkit|moz|MS)/,"").toLowerCase(),r=document.createEvent("Event");r.initEvent(n,e.bubbles,e.cancelable),e.target.dispatchEvent(r)}Un.Fullscreen=mT,mT.install=vT,Sn(vT);function ep(){}function yT(){var e=!0;(pu()||zt("PlayStation 5")||Ma()||zt("Web0S")||Yo()||zt("CrKey")||zt("PC=EOS")||zt("Hisense")||zt("VIDAA"))&&(e=!1),e&&navigator.mediaCapabilities||(navigator.mediaCapabilities||(navigator.mediaCapabilities={}),np=navigator.mediaCapabilities,navigator.mediaCapabilities.decodingInfo=tp)}function tp(e){var n,r,s,a,d,f,g,T,I,M,L,N,O,z,$,G,W;return j(function(ae){switch(ae.g){case 1:if(n={supported:!1,powerEfficient:!0,smooth:!0,keySystemAccess:null,configuration:e},!e)return ae.return(n);if(r=e.video,s=e.audio,e.type=="media-source"){if(!Ci())return ae.return(n);if(r){if(zt("CrKey")){if(!S.cast)throw new se(2,8,8e3);if(cast.__platform__&&cast.__platform__.canDisplayType){var J=r.contentType;r.width&&r.height&&(J+="; width="+r.width+"; height="+r.height),r.framerate&&(J+="; framerate="+r.framerate),r.transferFunction==="pq"&&(J+="; eotf=smpte2084"),J=cast.__platform__.canDisplayType(J)}else J=Hn(r.contentType)}else J=Hn(r.contentType);if(a=J,!a)return ae.return(n)}if(s&&(d=s.contentType,f=Hn(d),!f))return ae.return(n)}else if(e.type=="file"){if(r&&(g=r.contentType,T=Xo(g),!T)||s&&(I=s.contentType,M=Xo(I),!M))return ae.return(n)}else return ae.return(n);return e.keySystemConfiguration?(L=e.keySystemConfiguration,N=[],O=[],L.audio&&(z={robustness:L.audio.robustness||"",contentType:e.audio.contentType},N.push(z)),L.video&&($={robustness:L.video.robustness||"",contentType:e.video.contentType},O.push($)),G={initDataTypes:[L.initDataType],distinctiveIdentifier:L.distinctiveIdentifier,persistentState:L.persistentState,sessionTypes:L.sessionTypes},N.length&&(G.audioCapabilities=N),O.length&&(G.videoCapabilities=O),ye(ae,3),k(ae,navigator.requestMediaKeySystemAccess(L.keySystem,[G]),5)):(n.supported=!0,ae.return(Promise.resolve(n)));case 5:W=ae.h,_e(ae,4);break;case 3:we(ae);case 4:W&&(n.supported=!0,n.keySystemAccess=W);case 2:return ae.return(n)}})}Un.MediaCapabilities=ep,ep.install=yT;var np=null;ep.originalMcap=np,Sn(yT,-1);function ip(){}function rp(){var e=jd();S.MediaSource&&(S.cast&&cast.__platform__&&cast.__platform__.canDisplayType?Y0():e?12>=e?(op(),q0()):op():(zt("Tizen 2")||zt("Tizen 3")||zt("Tizen 4"))&&X0()),S.MediaSource&&MediaSource.isTypeSupported('video/webm; codecs="vp9"')&&!MediaSource.isTypeSupported('video/webm; codecs="vp09.00.10.08"')&&ZA()}function op(){var e=MediaSource.prototype.addSourceBuffer;MediaSource.prototype.addSourceBuffer=function(){var n=e.apply(this,fn.apply(0,arguments));return n.abort=function(){},n}}function q0(){var e=SourceBuffer.prototype.remove;SourceBuffer.prototype.remove=function(n,r){return e.call(this,n,r-.001)}}function X0(){var e=MediaSource.isTypeSupported;MediaSource.isTypeSupported=function(n){return Wl(n)[0]!="opus"&&e(n)}}function Y0(){var e=MediaSource.isTypeSupported;MediaSource.isTypeSupported=function(n){var r=n.split(/ *; */);return r.shift(),r.some(function(s){return s.startsWith("codecs=")})?cast.__platform__.canDisplayType(n):e(n)}}function ZA(){var e=MediaSource.isTypeSupported;zt("Web0S")||(MediaSource.isTypeSupported=function(n){var r=n.split(/ *; */),s=r.findIndex(function(f){return f.startsWith("codecs=")});if(0>s)return e(n);var a=r[s].replace("codecs=","").replace(/"/g,"").split(/\s*,\s*/),d=a.findIndex(function(f){return f.startsWith("vp09")});return 0<=d&&(a[d]="vp9",r[s]='codecs="'+a.join(",")+'"',n=r.join("; ")),e(n)})}Un.MediaSource=ip,ip.install=rp,Sn(rp);function xT(){}function TT(){screen.orientation||S.orientation!=null&&sp()}function sp(){function e(){switch(S.orientation){case-90:n.type="landscape-secondary",n.angle=270;break;case 0:n.type="portrait-primary",n.angle=0;break;case 90:n.type="landscape-primary",n.angle=90;break;case 180:n.type="portrait-secondary",n.angle=180}}var n=new la;screen.orientation=n,e(),S.addEventListener("orientationchange",function(){e();var r=new Fe("change");n.dispatchEvent(r)})}Un.Orientation=xT,xT.install=TT;function la(){vt.call(this),this.type="",this.angle=0}Te(la,vt),la.prototype.lock=function(e){function n(s){return screen.lockOrientation?screen.lockOrientation(s):screen.mozLockOrientation?screen.mozLockOrientation(s):screen.msLockOrientation?screen.msLockOrientation(s):!1}var r=!1;switch(e){case"natural":r=n("default");break;case"any":r=!0,this.unlock();break;default:r=n(e)}return r?Promise.resolve():(e=Error("screen.orientation.lock() is not available on this device"),e.name="NotSupportedError",e.code=DOMException.NOT_SUPPORTED_ERR,Promise.reject(e))},la.prototype.unlock=function(){screen.unlockOrientation?screen.unlockOrientation():screen.mozUnlockOrientation?screen.mozUnlockOrientation():screen.msUnlockOrientation&&screen.msUnlockOrientation()},Sn(TT);function up(){}var ad,Rl,ap,lp,cp,$0;function JA(e,n){try{var r=new ld(e,n);return Promise.resolve(r)}catch(s){return Promise.reject(s)}}function Q0(e){var n=this.mediaKeys;return n&&n!=e&&dp(n,null),delete this.mediaKeys,(this.mediaKeys=e)?dp(e,this):Promise.resolve()}function Z0(e){if(e=Tt(e.initData),Ln(e).getUint32(0,!0)+4!=e.byteLength)throw new RangeError("Malformed FairPlay init data");e=$o(e.subarray(4),!0),e=fi(e);var n=new Event("encrypted");n.initDataType="skd",n.initData=ji(e),this.dispatchEvent(n)}Un.PatchedMediaKeysApple=up,up.uninstall=function(){ad&&(ad=!1,Object.defineProperty(HTMLMediaElement.prototype,"mediaKeys",Rl),HTMLMediaElement.prototype.setMediaKeys=ap,S.MediaKeys=lp,S.MediaKeySystemAccess=cp,navigator.requestMediaKeySystemAccess=$0,Rl=$0=ap=cp=lp=null,S.shakaMediaKeysPolyfill=!1)},up.install=function(e){S.HTMLVideoElement&&S.WebKitMediaKeys&&(e!==void 0&&e&&(ad=!0,Rl=Object.getOwnPropertyDescriptor(HTMLMediaElement.prototype,"mediaKeys"),ap=HTMLMediaElement.prototype.setMediaKeys,lp=S.MediaKeys,cp=S.MediaKeySystemAccess,$0=navigator.requestMediaKeySystemAccess),delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=Q0,S.MediaKeys=cd,S.MediaKeySystemAccess=ld,navigator.requestMediaKeySystemAccess=JA,S.shakaMediaKeysPolyfill=!0)};function ld(e,n){if(this.keySystem=e,e.startsWith("com.apple.fps"))for(e=A(n),n=e.next();!n.done;n=e.next()){var r=n.value;if(r.persistentState=="required")n=null;else{n={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:r.initDataTypes,sessionTypes:["temporary"],label:r.label};var s=!1,a=!1;if(r.audioCapabilities)for(var d=A(r.audioCapabilities),f=d.next();!f.done;f=d.next())f=f.value,f.contentType&&(s=!0,WebKitMediaKeys.isTypeSupported(this.keySystem,f.contentType.split(";")[0])&&(n.audioCapabilities.push(f),a=!0));if(r.videoCapabilities)for(r=A(r.videoCapabilities),f=r.next();!f.done;f=r.next())d=f.value,d.contentType&&(s=!0,WebKitMediaKeys.isTypeSupported(this.keySystem,d.contentType.split(";")[0])&&(n.videoCapabilities.push(d),a=!0));s||(a=WebKitMediaKeys.isTypeSupported(this.keySystem,"video/mp4")),n=a?n:null}if(n){this.g=n;return}}throw e=Error("Unsupported keySystem"),e.name="NotSupportedError",e.code=DOMException.NOT_SUPPORTED_ERR,e}ld.prototype.createMediaKeys=function(){var e=new cd(this.keySystem);return Promise.resolve(e)},ld.prototype.getConfiguration=function(){return this.g};function cd(e){this.h=new WebKitMediaKeys(e),this.g=new Ve}cd.prototype.createSession=function(e){if(e=e||"temporary",e!="temporary")throw new TypeError("Session type "+e+" is unsupported on this platform.");return new J0(this.h)},cd.prototype.setServerCertificate=function(){return Promise.resolve(!1)};function dp(e,n){if(e.g.Rb(),!n)return Promise.resolve();e.g.o(n,"webkitneedkey",Z0);try{return Du(n,HTMLMediaElement.HAVE_METADATA,e.g,function(){n.webkitSetMediaKeys(e.h)}),Promise.resolve()}catch(r){return Promise.reject(r)}}function J0(e){vt.call(this),this.i=null,this.l=e,this.g=this.h=null,this.j=new Ve,this.sessionId="",this.expiration=NaN,this.closed=new bt,this.keyStatuses=new dd}Te(J0,vt),v=J0.prototype,v.generateRequest=function(e,n){var r=this;this.h=new bt;try{var s=this.l.createSession("video/mp4",Tt(n));this.i=s,this.sessionId=s.sessionId||"",this.j.o(this.i,"webkitkeymessage",function(a){r.h&&(r.h.resolve(),r.h=null),a=new Map().set("messageType",r.keyStatuses.ec()==null?"license-request":"license-renewal").set("message",ji(a.message)),a=new Fe("message",a),r.dispatchEvent(a)}),this.j.o(s,"webkitkeyadded",function(){r.g&&(hp(r,"usable"),r.g.resolve(),r.g=null)}),this.j.o(s,"webkitkeyerror",function(){var a=Error("EME PatchedMediaKeysApple key error");if(a.errorCode=r.i.error,r.h!=null)r.h.reject(a),r.h=null;else if(r.g!=null)r.g.reject(a),r.g=null;else switch(r.i.error.code){case WebKitMediaKeyError.MEDIA_KEYERR_OUTPUT:case WebKitMediaKeyError.MEDIA_KEYERR_HARDWARECHANGE:hp(r,"output-not-allowed");break;default:hp(r,"internal-error")}}),hp(this,"status-pending")}catch(a){this.h.reject(a)}return this.h},v.load=function(){return Promise.reject(Error("MediaKeySession.load not yet supported"))},v.update=function(e){this.g=new bt;try{this.i.update(Tt(e))}catch(n){this.g.reject(n)}return this.g},v.close=function(){try{this.i.close(),this.closed.resolve(),this.j.Rb()}catch(e){this.closed.reject(e)}return this.closed},v.remove=function(){return Promise.reject(Error("MediaKeySession.remove is only applicable for persistent licenses, which are not supported on this platform"))};function hp(e,n){var r=e.keyStatuses;r.size=n==null?0:1,r.g=n,n=new Fe("keystatuseschange"),e.dispatchEvent(n)}function dd(){this.size=0,this.g=void 0}v=dd.prototype,v.ec=function(){return this.g},v.forEach=function(e){this.g&&e(this.g,uh.value())},v.get=function(e){if(this.has(e))return this.g},v.has=function(e){var n=uh.value();return!!(this.g&&ir(e,n))},v.entries=function(){},v.keys=function(){},v.values=function(){};function hd(){}function ev(){!S.HTMLVideoElement||navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration||(navigator.requestMediaKeySystemAccess=tv,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=nv,S.MediaKeys=fp,S.MediaKeySystemAccess=fd,S.shakaMediaKeysPolyfill=!0)}function tv(){return Promise.reject(Error("The key system specified is not supported."))}function nv(e){return e==null?Promise.resolve():Promise.reject(Error("MediaKeys not supported."))}Un.PatchedMediaKeysNop=hd,hd.install=ev;function fp(){throw new TypeError("Illegal constructor.")}fp.prototype.createSession=function(){},fp.prototype.setServerCertificate=function(){};function fd(){throw this.keySystem="",new TypeError("Illegal constructor.")}fd.prototype.getConfiguration=function(){},fd.prototype.createMediaKeys=function(){},Sn(ev,-10);function pd(){}function iv(){if(!(!S.HTMLVideoElement||navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration)){if(HTMLMediaElement.prototype.webkitGenerateKeyRequest)yp="webkit";else if(!HTMLMediaElement.prototype.generateKeyRequest)return;navigator.requestMediaKeySystemAccess=wT,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=ET,S.MediaKeys=gp,S.MediaKeySystemAccess=pp,S.shakaMediaKeysPolyfill=!0}}function gd(e){var n=yp;return n?n+e.charAt(0).toUpperCase()+e.slice(1):e}function wT(e,n){try{var r=new pp(e,n);return Promise.resolve(r)}catch(s){return Promise.reject(s)}}function ET(e){var n=this.mediaKeys;return n&&n!=e&&AT(n,null),delete this.mediaKeys,(this.mediaKeys=e)&&AT(e,this),Promise.resolve()}Un.PatchedMediaKeysWebkit=pd,pd.install=iv;function pp(e,n){this.g=this.keySystem=e;var r=!1;e=="org.w3.clearkey"&&(this.g="webkit-org.w3.clearkey",r=!1);var s=!1,a=document.getElementsByTagName("video");a=a.length?a[0]:document.createElement("video"),n=A(n);for(var d=n.next();!d.done;d=n.next()){d=d.value;var f={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:d.initDataTypes,sessionTypes:["temporary"],label:d.label},g=!1;if(d.audioCapabilities)for(var T=A(d.audioCapabilities),I=T.next();!I.done;I=T.next())I=I.value,I.contentType&&(g=!0,a.canPlayType(I.contentType.split(";")[0],this.g)&&(f.audioCapabilities.push(I),s=!0));if(d.videoCapabilities)for(T=A(d.videoCapabilities),I=T.next();!I.done;I=T.next())I=I.value,I.contentType&&(g=!0,a.canPlayType(I.contentType,this.g)&&(f.videoCapabilities.push(I),s=!0));if(g||(s=a.canPlayType("video/mp4",this.g)||a.canPlayType("video/webm",this.g)),d.persistentState=="required"&&(r?(f.persistentState="required",f.sessionTypes=["persistent-license"]):s=!1),s){this.h=f;return}}throw r="Unsupported keySystem",(e=="org.w3.clearkey"||e=="com.widevine.alpha")&&(r="None of the requested configurations were supported."),e=Error(r),e.name="NotSupportedError",e.code=DOMException.NOT_SUPPORTED_ERR,e}pp.prototype.createMediaKeys=function(){var e=new gp(this.g);return Promise.resolve(e)},pp.prototype.getConfiguration=function(){return this.h};function gp(e){this.l=e,this.h=null,this.g=new Ve,this.i=[],this.j=new Map}function AT(e,n){e.h=n,e.g.Rb();var r=yp;n&&(e.g.o(n,r+"needkey",function(s){var a=new CustomEvent("encrypted");a.initDataType="cenc",a.initData=ji(s.initData),e.h.dispatchEvent(a)}),e.g.o(n,r+"keymessage",function(s){var a=rv(e,s.sessionId);a&&(s=new Map().set("messageType",a.keyStatuses.ec()==null?"licenserequest":"licenserenewal").set("message",s.message),s=new Fe("message",s),a.h&&(a.h.resolve(),a.h=null),a.dispatchEvent(s))}),e.g.o(n,r+"keyadded",function(s){(s=rv(e,s.sessionId))&&(vp(s,"usable"),s.g&&s.g.resolve(),s.g=null)}),e.g.o(n,r+"keyerror",function(s){var a=rv(e,s.sessionId);a&&a.handleError(s)}))}gp.prototype.createSession=function(e){if(e=e||"temporary",e!="temporary"&&e!="persistent-license")throw new TypeError("Session type "+e+" is unsupported on this platform.");var n=this.h||document.createElement("video");return n.src||(n.src="about:blank"),e=new ov(n,this.l,e),this.i.push(e),e},gp.prototype.setServerCertificate=function(){return Promise.resolve(!1)};function rv(e,n){var r=e.j.get(n);return r||((r=e.i.shift())?(r.sessionId=n,e.j.set(n,r),r):null)}function ov(e,n,r){vt.call(this),this.j=e,this.m=!1,this.g=this.h=null,this.i=n,this.l=r,this.sessionId="",this.expiration=NaN,this.closed=new bt,this.keyStatuses=new uv}Te(ov,vt),v=ov.prototype,v.handleError=function(e){var n=Error("EME v0.1b key error"),r=e.errorCode;r.systemCode=e.systemCode,n.errorCode=r,!e.sessionId&&this.h?(e.systemCode==45&&(n.message="Unsupported session type."),this.h.reject(n),this.h=null):e.sessionId&&this.g?(this.g.reject(n),this.g=null):(n=e.systemCode,e.errorCode.code==MediaKeyError.MEDIA_KEYERR_OUTPUT?vp(this,"output-restricted"):n==1?vp(this,"expired"):vp(this,"internal-error"))};function sv(e,n,r){if(e.m)return Promise.reject(Error("The session is already initialized."));e.m=!0;try{if(e.l=="persistent-license")if(r)var s=Tt(fi("LOAD_SESSION|"+r));else{var a=fi("PERSISTENT|");s=pi(a,n)}else s=Tt(n)}catch(f){return Promise.reject(f)}e.h=new bt;var d=gd("generateKeyRequest");try{e.j[d](e.i,s)}catch(f){if(f.name!="InvalidStateError")return e.h=null,Promise.reject(f);new Qe(function(){try{e.j[d](e.i,s)}catch(g){e.h.reject(g),e.h=null}}).R(.01)}return e.h}function mp(e,n,r){if(e.g)e.g.then(function(){return mp(e,n,r)}).catch(function(){return mp(e,n,r)});else{if(e.g=n,e.i=="webkit-org.w3.clearkey"){var s=Bt(r),a=JSON.parse(s);a.keys[0].kty!="oct"&&(e.g.reject(Error("Response is not a valid JSON Web Key Set.")),e.g=null),s=wo(a.keys[0].k),a=wo(a.keys[0].kid)}else s=Tt(r),a=null;var d=gd("addKey");try{e.j[d](e.i,s,a,e.sessionId)}catch(f){e.g.reject(f),e.g=null}}}function vp(e,n){var r=e.keyStatuses;r.size=n==null?0:1,r.g=n,n=new Fe("keystatuseschange"),e.dispatchEvent(n)}v.generateRequest=function(e,n){return sv(this,n,null)},v.load=function(e){return this.l=="persistent-license"?sv(this,null,e):Promise.reject(Error("Not a persistent session."))},v.update=function(e){var n=new bt;return mp(this,n,e),n},v.close=function(){if(this.l!="persistent-license"){if(!this.sessionId)return this.closed.reject(Error("The session is not callable.")),this.closed;var e=gd("cancelKeyRequest");try{this.j[e](this.i,this.sessionId)}catch(n){}}return this.closed.resolve(),this.closed},v.remove=function(){return this.l!="persistent-license"?Promise.reject(Error("Not a persistent session.")):this.close()};function uv(){this.size=0,this.g=void 0}v=uv.prototype,v.ec=function(){return this.g},v.forEach=function(e){this.g&&e(this.g,uh.value())},v.get=function(e){if(this.has(e))return this.g},v.has=function(e){var n=uh.value();return!!(this.g&&ir(e,n))},v.entries=function(){},v.keys=function(){},v.values=function(){};var yp="";Sn(iv);function ST(){}function av(){if(S.HTMLVideoElement){var e=HTMLVideoElement.prototype;e.requestPictureInPicture&&document.exitPictureInPicture||!e.webkitSupportsPresentationMode||(document.pictureInPictureEnabled=!0,document.pictureInPictureElement=null,e.requestPictureInPicture=eS,Object.defineProperty(e,"disablePictureInPicture",{get:kT,set:MT,enumerable:!0,configurable:!0}),document.exitPictureInPicture=CT,document.addEventListener("webkitpresentationmodechanged",IT,!0))}}function IT(e){if(e=e.target,e.webkitPresentationMode=="picture-in-picture"){document.pictureInPictureElement=e;var n=new Event("enterpictureinpicture");e.dispatchEvent(n)}else document.pictureInPictureElement==e&&(document.pictureInPictureElement=null),n=new Event("leavepictureinpicture"),e.dispatchEvent(n)}function eS(){return this.webkitSupportsPresentationMode("picture-in-picture")?(this.webkitSetPresentationMode("picture-in-picture"),document.pictureInPictureElement=this,Promise.resolve()):Promise.reject(Error("PiP not allowed by video element"))}function CT(){var e=document.pictureInPictureElement;return e?(e.webkitSetPresentationMode("inline"),document.pictureInPictureElement=null,Promise.resolve()):Promise.reject(Error("No picture in picture element found"))}function kT(){return this.hasAttribute("disablePictureInPicture")?!0:!this.webkitSupportsPresentationMode("picture-in-picture")}function MT(e){e?this.setAttribute("disablePictureInPicture",""):this.removeAttribute("disablePictureInPicture")}Un.PiPWebkit=ST,ST.install=av,Sn(av);function lv(){}function _T(){S.crypto&&("randomUUID"in S.crypto||(S.crypto.randomUUID=RT))}function RT(){var e=URL.createObjectURL(new Blob),n=e.toString();return URL.revokeObjectURL(e),n.substr(n.lastIndexOf("/")+1)}Un.RandomUUID=lv,lv.install=_T,Sn(_T);function cv(){}function xp(){navigator.storage&&navigator.storage.estimate||!navigator.webkitTemporaryStorage||!navigator.webkitTemporaryStorage.queryUsageAndQuota||("storage"in navigator||(navigator.storage={}),navigator.storage.estimate=tS)}function tS(){return new Promise(function(e,n){navigator.webkitTemporaryStorage.queryUsageAndQuota(function(r,s){e({usage:r,quota:s})},n)})}Un.StorageEstimate=cv,cv.install=xp,Sn(xp);function Ur(){}function LT(){var e=Symbol.prototype;"description"in e||Object.defineProperty(e,"description",{get:nS})}function nS(){var e=/\((.*)\)/.exec(this.toString());return e?e[1]:void 0}Un.Symbol=Ur,Ur.install=LT,Sn(LT);function pr(){}function dv(){if(S.HTMLMediaElement){var e=HTMLMediaElement.prototype.play;HTMLMediaElement.prototype.play=function(){var n=e.apply(this);return n&&n.catch(function(){}),n}}}Un.VideoPlayPromise=pr,pr.install=dv,Sn(dv);function NT(){}function hv(){if(S.HTMLVideoElement){var e=HTMLVideoElement.prototype;!e.getVideoPlaybackQuality&&("webkitDroppedFrameCount"in e||tg())&&(e.getVideoPlaybackQuality=ai)}}function ai(){return{droppedVideoFrames:this.webkitDroppedFrameCount,totalVideoFrames:this.webkitDecodedFrameCount,corruptedVideoFrames:0,creationTime:NaN,totalFrameDelay:0}}Un.VideoPlaybackQuality=NT,NT.install=hv,Sn(hv);function md(){}function Tp(){if(!S.VTTCue&&S.TextTrackCue){var e=null,n=TextTrackCue.length;if(n==3)e=wp;else if(n==6)e=Ep;else{try{var r=!!wp(1,2,"")}catch(s){r=!1}r&&(e=wp)}e&&(S.VTTCue=function(s,a,d){return e(s,a,d)})}}function wp(e,n,r){return new S.TextTrackCue(e,n,r)}function Ep(e,n,r){return new S.TextTrackCue(e+"-"+n+"-"+r,e,n,r)}Un.VTTCue=md,md.install=Tp,Sn(Tp);function lo(){}lo.prototype.parseInit=function(){},lo.prototype.setSequenceMode=function(){},lo.prototype.parseMedia=function(e,n){var r=null,s=[];e=Bt(e).split(/\r?\n/),e=A(e);for(var a=e.next();!a.done;a=e.next())if((a=a.value)&&!/^\s+$/.test(a)&&(a=DT.exec(a))){var d=fv.exec(a[1]);d=60*parseInt(d[1],10)+parseFloat(d[2].replace(",",".")),a=new xt(d,n.segmentEnd?n.segmentEnd:d+2,a[2]),r&&(r.endTime=d,s.push(r)),r=a}return r&&s.push(r),s},pe("shaka.text.LrcTextParser",lo),lo.prototype.parseMedia=lo.prototype.parseMedia,lo.prototype.setSequenceMode=lo.prototype.setSequenceMode,lo.prototype.parseInit=lo.prototype.parseInit;var DT=/^\[(\d{1,2}:\d{1,2}(?:[.,]\d{1,3})?)\](.*)/,fv=/^(\d+):(\d{1,2}(?:[.,]\d{1,3})?)$/;Nn["application/x-subtitle-lrc"]=function(){return new lo};function Xi(){}Xi.prototype.parseInit=function(){},Xi.prototype.setSequenceMode=function(){},Xi.prototype.parseMedia=function(e,n){var r=Bt(e);if(e=[],r=="")return e;var s=Va(r,"tt");if(!s)throw new se(2,2,2005,"Failed to parse TTML.");if(r=s.getElementsByTagName("body")[0],!r)return[];var a=Sr(s,xd,"frameRate"),d=Sr(s,xd,"subFrameRate"),f=Sr(s,xd,"frameRateMultiplier"),g=Sr(s,xd,"tickRate"),T=Sr(s,xd,"cellResolution"),I=s.getAttribute("xml:space")||"default",M=Sr(s,Td,"extent");if(I!="default"&&I!="preserve")throw new se(2,2,2005,"Invalid xml:space value: "+I);I=I=="default",a=new iS(a,d,f,g),T=T&&(T=/^(\d+) (\d+)$/.exec(T))?{columns:parseInt(T[1],10),rows:parseInt(T[2],10)}:null,d=(d=s.getElementsByTagName("metadata")[0])?os(d):[],f=Array.from(s.getElementsByTagName("style")),s=Array.from(s.getElementsByTagName("region")),g=[];for(var L=A(s),N=L.next();!N.done;N=L.next()){var O=N.value;N=new Yr;var z=O.getAttribute("xml:id");if(z){N.id=z;var $=null;M&&($=ca.exec(M)||xi.exec(M)),z=$?Number($[1]):null,$=$?Number($[2]):null;var G,W;(G=Ll(O,f,"extent"))&&(G=(W=ca.exec(G))||xi.exec(G),G!=null&&(N.width=Number(G[1]),N.height=Number(G[2]),W||(z!=null&&(N.width=100*N.width/z),$!=null&&(N.height=100*N.height/$)),N.widthUnits=W||z!=null?hi:0,N.heightUnits=W||$!=null?hi:0)),(O=Ll(O,f,"origin"))&&(G=(W=ca.exec(O))||xi.exec(O),G!=null&&(N.viewportAnchorX=Number(G[1]),N.viewportAnchorY=Number(G[2]),W||($!=null&&(N.viewportAnchorY=100*N.viewportAnchorY/$),z!=null&&(N.viewportAnchorX=100*N.viewportAnchorX/z)),N.viewportAnchorUnits=W||z!=null?hi:0))}else N=null;N&&g.push(N)}if(on(r,"p").length)throw new se(2,2,2001,"<p> can only be inside <div> in TTML");for(M=A(on(r,"div")),L=M.next();!L.done;L=M.next())if(on(L.value,"span").length)throw new se(2,2,2001,"<span> can only be inside <p> in TTML");return(n=bT(r,n,a,d,f,s,g,I,T,null,!1))&&(n.backgroundColor||(n.backgroundColor="transparent"),e.push(n)),e};function bT(e,n,r,s,a,d,f,g,T,I,M){var L=e.parentNode;if(e.nodeType==Node.COMMENT_NODE)return null;if(e.nodeType==Node.TEXT_NODE){if(!M)return null;var N=document.createElement("span");N.textContent=e.textContent}else N=e;for(var O=null,z=A(co),$=z.next();!$.done&&!(O=vd(N,"backgroundImage",s,"#",$.value)[0]);$=z.next());if(z=M,(e.nodeName=="p"||O)&&(M=!0),g=(N.getAttribute("xml:space")||(g?"default":"preserve"))=="default",$=Array.from(N.childNodes).every(function(fe){return fe.nodeType==Node.TEXT_NODE}),e=[],!$)for(var G=A(N.childNodes),W=G.next();!W.done;W=G.next())(W=bT(W.value,n,r,s,a,d,f,g,T,N,M))&&e.push(W);s=I!=null,G=/\S/.test(N.textContent);var ae=N.hasAttribute("begin")||N.hasAttribute("end")||N.hasAttribute("dur");if(!(ae||G||N.tagName=="br"||e.length!=0||s&&!g))return null;for(W=mv(N,r),G=W.start,W=W.end;L&&L.nodeType==Node.ELEMENT_NODE&&L.tagName!="tt";)W=OT(L,r,G,W),G=W.start,W=W.end,L=L.parentNode;if(G==null&&(G=0),G+=n.periodStart,W=W==null?1/0:W+n.periodStart,G=Math.max(G,n.segmentStart),W=Math.min(W,n.segmentEnd),!ae&&0<e.length)for(G=1/0,W=0,n=A(e),r=n.next();!r.done;r=n.next())r=r.value,G=Math.min(G,r.startTime),W=Math.max(W,r.endTime);if(N.tagName=="br")return a=new xt(G,W,""),a.lineBreak=!0,a;if(n="",$&&(n=N.textContent,g&&(n=n.trim(),n=n.replace(/\s+/g," "))),n=new xt(G,W,n),n.nestedCues=e,M||(n.isContainer=!0),T&&(n.cellResolution=T),T=vd(N,"region",d,"")[0],N.hasAttribute("region")&&T&&T.getAttribute("xml:id")){var J=T.getAttribute("xml:id");n.region=f.filter(function(fe){return fe.id==J})[0]}return f=T,I&&s&&!N.getAttribute("region")&&!N.getAttribute("style")&&(f=vd(I,"region",d,"")[0]),pv(n,N,f,O,a,z,e.length==0),n}function pv(e,n,r,s,a,d,f){if(d=d||f,In(n,r,a,"direction",d)=="rtl"&&(e.direction="rtl"),f=In(n,r,a,"writingMode",d),f=="tb"||f=="tblr"?e.writingMode="vertical-lr":f=="tbrl"?e.writingMode="vertical-rl":f=="rltb"||f=="rl"?e.direction="rtl":f&&(e.direction=Is),(f=In(n,r,a,"textAlign",!0))?(e.positionAlign=Cp[f],e.lineAlign=rS[f],e.textAlign=fu[f.toUpperCase()]):e.textAlign=Ui,(f=In(n,r,a,"displayAlign",!0))&&(e.displayAlign=Tr[f.toUpperCase()]),(f=In(n,r,a,"color",d))&&(e.color=f),(f=In(n,r,a,"backgroundColor",d))&&(e.backgroundColor=f),(f=In(n,r,a,"border",d))&&(e.border=f),f=In(n,r,a,"fontFamily",d))switch(f){case"monospaceSerif":e.fontFamily="Courier New,Liberation Mono,Courier,monospace";break;case"proportionalSansSerif":e.fontFamily="Arial,Helvetica,Liberation Sans,sans-serif";break;case"sansSerif":e.fontFamily="sans-serif";break;case"monospaceSansSerif":e.fontFamily="Consolas,monospace";break;case"proportionalSerif":e.fontFamily="serif";break;default:e.fontFamily=f}if((f=In(n,r,a,"fontWeight",d))&&f=="bold"&&(e.fontWeight=700),f=In(n,r,a,"wrapOption",d),e.wrapLine=!(f&&f=="noWrap"),(f=In(n,r,a,"lineHeight",d))&&f.match(Nl)&&(e.lineHeight=f),(f=In(n,r,a,"fontSize",d))&&(f.match(Nl)||f.match(Ip))&&(e.fontSize=f),(f=In(n,r,a,"fontStyle",d))&&(e.fontStyle=Ud[f.toUpperCase()]),s){f=s.getAttribute("imageType")||s.getAttribute("imagetype");var g=s.getAttribute("encoding");s=s.textContent.trim(),f=="PNG"&&g=="Base64"&&s&&(e.backgroundImage="data:image/png;base64,"+s)}(s=In(n,r,a,"textOutline",d))&&(s=s.split(" "),s[0].match(Nl)?e.textStrokeColor=e.color:(e.textStrokeColor=s[0],s.shift()),s[0]&&s[0].match(Nl)?e.textStrokeWidth=s[0]:e.textStrokeColor=""),(s=In(n,r,a,"letterSpacing",d))&&s.match(Nl)&&(e.letterSpacing=s),(s=In(n,r,a,"linePadding",d))&&s.match(Nl)&&(e.linePadding=s),(d=In(n,r,a,"opacity",d))&&(e.opacity=parseFloat(d)),(r=Ll(r,a,"textDecoration"))&&PT(e,r),(n=Ap(n,a,"textDecoration"))&&PT(e,n)}function PT(e,n){n=A(n.split(" "));for(var r=n.next();!r.done;r=n.next())switch(r.value){case"underline":e.textDecoration.includes("underline")||e.textDecoration.push("underline");break;case"noUnderline":e.textDecoration.includes("underline")&&Ii(e.textDecoration,"underline");break;case"lineThrough":e.textDecoration.includes("lineThrough")||e.textDecoration.push("lineThrough");break;case"noLineThrough":e.textDecoration.includes("lineThrough")&&Ii(e.textDecoration,"lineThrough");break;case"overline":e.textDecoration.includes("overline")||e.textDecoration.push("overline");break;case"noOverline":e.textDecoration.includes("overline")&&Ii(e.textDecoration,"overline")}}function In(e,n,r,s,a){return a=a===void 0?!0:a,(e=Ap(e,r,s))?e:a?Ll(n,r,s):null}function Ll(e,n,r){if(!e)return null;var s=Sr(e,Td,r);return s||gv(e,n,r)}function Ap(e,n,r){var s=Sr(e,Td,r);return s||gv(e,n,r)}function gv(e,n,r){e=vd(e,"style",n,"");for(var s=null,a=0;a<e.length;a++){var d=Cu(e[a],"urn:ebu:tt:style",r);d||(d=Sr(e[a],Td,r)),d||(d=Ap(e[a],n,r)),d&&(s=d)}return s}function vd(e,n,r,s,a){var d=[];if(!e||1>r.length)return d;var f=e;for(e=null;f&&!(e=a?Cu(f,a,n):f.getAttribute(n))&&(f=f.parentNode,f instanceof Element););if(n=e){for(n=A(n.split(" ")),a=n.next();!a.done;a=n.next())for(a=a.value,e=A(r),f=e.next();!f.done;f=e.next())if(f=f.value,s+f.getAttribute("xml:id")==a){d.push(f);break}}return d}function OT(e,n,r,s){return e=mv(e,n),r==null?r=e.start:e.start!=null&&(r+=e.start),s==null?s=e.end:e.start!=null&&(s+=e.start),{start:r,end:s}}function mv(e,n){var r=Sp(e.getAttribute("begin"),n),s=Sp(e.getAttribute("end"),n);return e=Sp(e.getAttribute("dur"),n),s==null&&e!=null&&(s=r+e),{start:r,end:s}}function Sp(e,n){var r=null;if(_i.test(e)){e=_i.exec(e),r=Number(e[1]);var s=Number(e[2]),a=Number(e[3]),d=Number(e[4]);d+=(Number(e[5])||0)/n.h,a+=d/n.frameRate,r=a+60*s+3600*r}else if(yv.test(e))r=vv(yv,e);else if(xv.test(e))r=vv(xv,e);else if(yd.test(e))e=yd.exec(e),r=Number(e[1])/n.frameRate;else if(Tv.test(e))e=Tv.exec(e),r=Number(e[1])/n.g;else if(wv.test(e))r=vv(wv,e);else if(e)throw new se(2,2,2001,"Could not parse cue time range in TTML");return r}function vv(e,n){return e=e.exec(n),e==null||e[0]==""?null:(Number(e[4])||0)/1e3+(Number(e[3])||0)+60*(Number(e[2])||0)+3600*(Number(e[1])||0)}pe("shaka.text.TtmlTextParser",Xi),Xi.prototype.parseMedia=Xi.prototype.parseMedia,Xi.prototype.setSequenceMode=Xi.prototype.setSequenceMode,Xi.prototype.parseInit=Xi.prototype.parseInit;function iS(e,n,r,s){this.frameRate=Number(e)||30,this.h=Number(n)||1,this.g=Number(s),this.g==0&&(this.g=e?this.frameRate*this.h:1),r&&(e=/^(\d+) (\d+)$/g.exec(r))&&(this.frameRate*=Number(e[1])/Number(e[2]))}var ca=/^(\d{1,2}(?:\.\d+)?|100(?:\.0+)?)% (\d{1,2}(?:\.\d+)?|100(?:\.0+)?)%$/,Ip=/^(\d{1,2}(?:\.\d+)?|100)%$/,Nl=/^(\d+px|\d+em|\d*\.?\d+c)$/,xi=/^(\d+)px (\d+)px$/,_i=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,yv=/^(?:(\d{2,}):)?(\d{2}):(\d{2})$/,xv=/^(?:(\d{2,}):)?(\d{2}):(\d{2}\.\d{2,})$/,yd=/^(\d*(?:\.\d*)?)f$/,Tv=/^(\d*(?:\.\d*)?)t$/,wv=RegExp("^(?:(\\d*(?:\\.\\d*)?)h)?(?:(\\d*(?:\\.\\d*)?)m)?(?:(\\d*(?:\\.\\d*)?)s)?(?:(\\d*(?:\\.\\d*)?)ms)?$"),rS={left:ks,center:"center",right:"end",start:ks,end:"end"},Cp={left:"line-left",center:"center",right:"line-right"},xd=["http://www.w3.org/ns/ttml#parameter","http://www.w3.org/2006/10/ttaf1#parameter"],Td=["http://www.w3.org/ns/ttml#styling","http://www.w3.org/2006/10/ttaf1#styling"],co=["http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt","http://www.smpte-ra.org/schemas/2052-1/2013/smpte-tt"];Nn["application/ttml+xml"]=function(){return new Xi};function Yi(){this.g=new Xi}Yi.prototype.parseInit=function(e){var n=!1;if(new Kt().box("moov",en).box("trak",en).box("mdia",en).box("minf",en).box("stbl",en).S("stsd",ja).box("stpp",function(r){n=!0,r.parser.stop()}).parse(e),!n)throw new se(2,2,2007)},Yi.prototype.setSequenceMode=function(){},Yi.prototype.parseMedia=function(e,n){var r=this,s=!1,a=[];if(new Kt().box("mdat",rs(function(d){s=!0,a=a.concat(r.g.parseMedia(d,n))})).parse(e,!1),!s)throw new se(2,2,2007);return a},pe("shaka.text.Mp4TtmlParser",Yi),Yi.prototype.parseMedia=Yi.prototype.parseMedia,Yi.prototype.setSequenceMode=Yi.prototype.setSequenceMode,Yi.prototype.parseInit=Yi.prototype.parseInit,Nn['application/mp4; codecs="stpp"']=function(){return new Yi},Nn['application/mp4; codecs="stpp.ttml"']=function(){return new Yi},Nn['application/mp4; codecs="stpp.ttml.im1t"']=function(){return new Yi},Nn['application/mp4; codecs="stpp.TTML.im1t"']=function(){return new Yi};function $i(){this.g=!1}$i.prototype.parseInit=function(){},$i.prototype.setSequenceMode=function(e){this.g=e},$i.prototype.parseMedia=function(e,n){e=Bt(e),e=e.replace(/\r\n|\r(?=[^\n]|$)/gm,"\n");var r=e.split(/\n{2,}/m);if(!/^WEBVTT($|[ \t\n])/m.test(r[0]))throw new se(2,2,2e3);if(e=n.vttOffset,r[0].includes("X-TIMESTAMP-MAP")&&this.g){var s=r[0].match(/LOCAL:((?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{3}))/m),a=r[0].match(/MPEGTS:(\d+)/m);if(s&&a){if(e=wd(new xs(s[1])),e==null)throw new se(2,2,2e3);for(a=Number(a[1]),s=n.segmentStart-n.periodStart;95443.7176888889<=s;)s-=95443.7176888889,a+=8589934592;e=n.periodStart+a/9e4-e}}for(n=[],a=A(r[0].split("\n")),s=a.next();!s.done;s=a.next())if(s=s.value,/^Region:/.test(s)){s=new xs(s);var d=new Yr;na(s),Po(s);for(var f=na(s);f;){var g=d,T=f;(f=/^id=(.*)$/.exec(T))?g.id=f[1]:(f=/^width=(\d{1,2}|100)%$/.exec(T))?g.width=Number(f[1]):(f=/^lines=(\d+)$/.exec(T))?(g.height=Number(f[1]),g.heightUnits=2):(f=/^regionanchor=(\d{1,2}|100)%,(\d{1,2}|100)%$/.exec(T))?(g.regionAnchorX=Number(f[1]),g.regionAnchorY=Number(f[2])):(f=/^viewportanchor=(\d{1,2}|100)%,(\d{1,2}|100)%$/.exec(T))?(g.viewportAnchorX=Number(f[1]),g.viewportAnchorY=Number(f[2])):/^scroll=up$/.exec(T)&&(g.scroll="up"),Po(s),f=na(s)}n.push(d)}for(a=new Map,jr(a),s=[],r=A(r.slice(1)),d=r.next();!d.done;d=r.next()){if(d=d.value.split("\n"),(d.length!=1||d[0])&&!/^NOTE($|[ \t])/.test(d[0])&&d[0]=="STYLE"){for(g=[],f=-1,T=1;T<d.length;T++)d[T].includes("::cue")&&(g.push([]),f=g.length-1),f!=-1&&(g[f].push(d[T]),d[T].includes("}")&&(f=-1));for(g=A(g),f=g.next();!f.done;f=g.next()){var I=f.value;f="global",(T=I[0].match(/\((.*)\)/))&&(f=T.pop()),T=I.slice(1,-1),I[0].includes("}")&&(I=/\{(.*?)\}/.exec(I[0]))&&(T=I[1].split(";")),(I=a.get(f))||(I=new xt(0,0,""));for(var M=!1,L=0;L<T.length;L++){var N=/^\s*([^:]+):\s*(.*)/.exec(T[L]);if(N){var O=N[2].trim().replace(";","");switch(N[1].trim()){case"background-color":case"background":M=!0,I.backgroundColor=O;break;case"color":M=!0,I.color=O;break;case"font-family":M=!0,I.fontFamily=O;break;case"font-size":M=!0,I.fontSize=O;break;case"font-weight":(700<=parseInt(O,10)||O=="bold")&&(M=!0,I.fontWeight=700);break;case"font-style":switch(O){case"normal":M=!0,I.fontStyle=Od;break;case"italic":M=!0,I.fontStyle="italic";break;case"oblique":M=!0,I.fontStyle="oblique"}break;case"opacity":M=!0,I.opacity=parseFloat(O);break;case"text-shadow":M=!0,I.textShadow=O;break;case"white-space":M=!0,I.wrapLine=O!="noWrap"}}}M&&a.set(f,I)}}if(M=e,d.length==1&&!d[0]||/^NOTE($|[ \t])/.test(d[0])||d[0]=="STYLE"||d[0]=="REGION")d=null;else{if(g=null,d[0].includes("-->")||(g=d[0],d.splice(0,1)),f=new xs(d[0]),T=wd(f),L=Oo(f,/[ \t]+--\x3e[ \t]+/g),I=wd(f),T==null||L==null||I==null)throw new se(2,2,2001,"Could not parse cue time range in WebVTT");for(T+=M,I+=M,M=UT(d.slice(1).join("\n").trim()),a.has("global")?(d=a.get("global").clone(),d.startTime=T,d.endTime=I,d.payload=""):d=new xt(T,I,""),Ev(M,d,a),Po(f),T=na(f);T;)Br(d,T,n),Po(f),T=na(f);g!=null&&(d.id=g)}d&&s.push(d)}return s};function jr(e){for(var n=A(Object.entries(Ca)),r=n.next();!r.done;r=n.next()){var s=A(r.value);r=s.next().value,s=s.next().value;var a=new xt(0,0,"");a.color=s,e.set("."+r,a)}for(n=A(Object.entries(Pd)),r=n.next();!r.done;r=n.next())s=A(r.value),r=s.next().value,s=s.next().value,a=new xt(0,0,""),a.backgroundColor=s,e.set("."+r,a)}function Ev(e,n,r){r.size===0&&jr(r);e:{var s=e;e=[];for(var a=-1,d="",f=0;f<s.length;f++)if(s[f]==="/"&&0<f&&s[f-1]==="<"){var g=s.indexOf(">",f);if(g<=f){e=s;break e}if((g=s.substring(f+1,g))&&g==="c"){var T=e.pop();T?T===g?(d+="/"+g+">",f+=g.length+1):T.startsWith("c.")?(f+=g.length+1,d+="/"+T+">"):d+=s[f]:d+=s[f]}else d+=s[f]}else s[f]==="<"?(a=f+1,s[a]!="c"&&(a=-1)):s[f]===">"&&0<a&&(e.push(s.substr(a,f-a)),a=-1),d+=s[f];e=d}for(s=[],d=-1,a=0;a<e.length;a++)e[a]==="<"?d=a+1:e[a]===">"&&0<d&&(d=e.substr(d,a-d),d.match(jT)&&s.push(d),d=-1);for(s=A(s),a=s.next();!a.done;a=s.next())a=a.value,e=e.replace("<"+a+">",'<div time="'+a+'">'),e+="</div>";e:{for(a=e,d=[],f=-1,s="",e=!1,g=0;g<a.length;g++)if(a[g]==="/"){if(T=a.indexOf(">",g),T===-1){e=a;break e}if((T=a.substring(g+1,T))&&T=="v"){e=!0;var I=null;if(d.length&&(I=d[d.length-1]),I){if(I===T)s+="/"+T+">";else{if(!I.startsWith("v")){s+=a[g];continue}s+="/"+I+">"}g+=T.length+1}else s+=a[g]}else s+=a[g]}else a[g]==="<"?(f=g+1,a[f]!="v"&&(f=-1)):a[g]===">"&&0<f&&(d.push(a.substr(f,g-f)),f=-1),s+=a[g];for(a=A(d),d=a.next();!d.done;d=a.next())d=d.value,f=d.replace(" ",".voice-"),s=s.replace("<"+d+">","<"+f+">"),s=s.replace("</"+d+">","</"+f+">"),e||(s+="</"+f+">");e=s}if(a=Va("<span>"+e+"</span>","span")){if(s=[],a=a.childNodes,a.length==1&&(d=a[0],d.nodeType==Node.TEXT_NODE||d.nodeType==Node.CDATA_SECTION_NODE)){n.payload=e;return}for(e=A(a),a=e.next();!a.done;a=e.next())Av(a.value,n,s,r);n.nestedCues=s}else n.payload=e}function Ri(e,n){return e&&0<e.length?e:n}function Av(e,n,r,s){var a=n.clone();if(e.nodeType===Node.ELEMENT_NODE&&e.nodeName)for(var d=A(e.nodeName.split(/(?=[ .])+/g)),f=d.next();!f.done;f=d.next()){var g=f=f.value;if(g.startsWith(".voice-")){var T=g.split("-").pop();g='v[voice="'+T+'"]',s.has(g)||(g="v[voice="+T+"]")}switch(s.has(g)&&(g=s.get(g))&&(a.backgroundColor=Ri(g.backgroundColor,a.backgroundColor),a.color=Ri(g.color,a.color),a.fontFamily=Ri(g.fontFamily,a.fontFamily),a.fontSize=Ri(g.fontSize,a.fontSize),a.fontWeight=g.fontWeight,a.fontStyle=g.fontStyle,a.opacity=g.opacity,a.wrapLine=g.wrapLine),f){case"br":f=n.clone(),f.lineBreak=!0,r.push(f);break;case"b":a.fontWeight=700;break;case"i":a.fontStyle="italic";break;case"u":a.textDecoration.push("underline");break;case"div":(f=e.getAttribute("time"))&&(f=wd(new xs(f)))&&(a.startTime=f)}}if(Fa(e))for(d=!0,s=A(e.textContent.split("\n")),e=s.next();!e.done;e=s.next())e=e.value,d||(d=n.clone(),d.lineBreak=!0,r.push(d)),0<e.length&&(d=a.clone(),d.payload=e,r.push(d)),d=!1;else for(n=A(e.childNodes),e=n.next();!e.done;e=n.next())Av(e.value,a,r,s)}function Br(e,n,r){var s;(s=/^align:(start|middle|center|end|left|right)$/.exec(n))?(n=s[1],n=="middle"?e.textAlign=Ui:e.textAlign=fu[n.toUpperCase()]):(s=/^vertical:(lr|rl)$/.exec(n))?e.writingMode=s[1]=="lr"?"vertical-lr":"vertical-rl":(s=/^size:([\d.]+)%$/.exec(n))?e.size=Number(s[1]):(s=/^position:([\d.]+)%(?:,(line-left|line-right|center|start|end))?$/.exec(n))?(e.position=Number(s[1]),s[2]&&(n=s[2],e.positionAlign=n=="line-left"||n=="start"?"line-left":n=="line-right"||n=="end"?"line-right":"center")):(s=/^region:(.*)$/.exec(n))?(n=oS(r,s[1]))&&(e.region=n):(r=/^line:([\d.]+)%(?:,(start|end|center))?$/.exec(n))?(e.lineInterpretation=1,e.line=Number(r[1]),r[2]&&(e.lineAlign=Ia[r[2].toUpperCase()])):(r=/^line:(-?\d+)(?:,(start|end|center))?$/.exec(n))&&(e.lineInterpretation=Cs,e.line=Number(r[1]),r[2]&&(e.lineAlign=Ia[r[2].toUpperCase()]))}function oS(e,n){return e=e.filter(function(r){return r.id==n}),e.length?e[0]:null}function wd(e){if(e=Oo(e,jT),e==null)return null;var n=Number(e[2]),r=Number(e[3]);return 59<n||59<r?null:Number(e[4])/1e3+r+60*n+3600*(Number(e[1])||0)}function UT(e){var n={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&nbsp;":" ","&lrm;":"‎","&rlm;":"‏"},r=/&(?:amp|lt|gt|quot|#(0+)?39|nbsp|lrm|rlm);/g,s=RegExp(r.source);return e&&s.test(e)?e.replace(r,function(a){return n[a]||"'"}):e||""}pe("shaka.text.VttTextParser",$i),$i.prototype.parseMedia=$i.prototype.parseMedia,$i.prototype.setSequenceMode=$i.prototype.setSequenceMode,$i.prototype.parseInit=$i.prototype.parseInit;var jT=/(?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{2,3})/g;Nn["text/vtt"]=function(){return new $i},Nn['text/vtt; codecs="vtt"']=function(){return new $i},Nn['text/vtt; codecs="wvtt"']=function(){return new $i};function Fr(){this.g=null}Fr.prototype.parseInit=function(e){var n=this,r=!1;if(new Kt().box("moov",en).box("trak",en).box("mdia",en).S("mdhd",function(s){s=Xg(s.reader,s.version),n.g=s.timescale}).box("minf",en).box("stbl",en).S("stsd",ja).box("wvtt",function(){r=!0}).parse(e),!this.g)throw new se(2,2,2008);if(!r)throw new se(2,2,2008)},Fr.prototype.setSequenceMode=function(){},Fr.prototype.parseMedia=function(e,n){if(!this.g)throw new se(2,2,2008);var r=0,s=[],a,d=[],f=!1,g=!1,T=!1,I=null;if(new Kt().box("moof",en).box("traf",en).S("tfdt",function(J){f=!0,r=qg(J.reader,J.version).rf}).S("tfhd",function(J){I=gc(J.reader,J.flags).Cf}).S("trun",function(J){g=!0,s=sr(J.reader,J.version,J.flags).Tf}).box("mdat",rs(function(J){T=!0,a=J})).parse(e,!1),!T&&!f&&!g)throw new se(2,2,2008);e=r;for(var M=new Pt(a,0),L=A(s),N=L.next();!N.done;N=L.next()){N=N.value;var O=N.Ge||I,z=N.Ld?r+N.Ld:e;e=z+(O||0);var $=0;do{var G=M.N();$+=G;var W=M.N(),ae=null;tn(W)=="vttc"?8<G&&(ae=M.Bb(G-8)):M.skip(G-8),O&&ae&&(G=kp(ae,n.periodStart+z/this.g,n.periodStart+e/this.g),d.push(G))}while(N.sampleSize&&$<N.sampleSize)}return d.filter(ri)};function kp(e,n,r){var s,a,d;return new Kt().box("payl",rs(function(f){s=Bt(f)})).box("iden",rs(function(f){a=Bt(f)})).box("sttg",rs(function(f){d=Bt(f)})).parse(e),s?sS(s,a,d,n,r):null}function sS(e,n,r,s,a){if(s=new xt(s,a,""),Ev(e,s,new Map),n&&(s.id=n),r)for(e=new xs(r),n=na(e);n;)Br(s,n,[]),Po(e),n=na(e);return s}pe("shaka.text.Mp4VttParser",Fr),Fr.prototype.parseMedia=Fr.prototype.parseMedia,Fr.prototype.setSequenceMode=Fr.prototype.setSequenceMode,Fr.prototype.parseInit=Fr.prototype.parseInit,Nn['application/mp4; codecs="wvtt"']=function(){return new Fr};function zr(){}zr.prototype.parseInit=function(){},zr.prototype.setSequenceMode=function(){},zr.prototype.parseMedia=function(e){var n=Bt(e).replace(/\r+/g,"");if(n=n.trim(),e=[],n=="")return e;n=A(n.split("\n\n"));for(var r=n.next();!r.done;r=n.next()){r=r.value.split("\n");var s=new xs(r[0]),a=Dl(s),d=Oo(s,/,/g);if(s=Dl(s),a==null||d==null||s==null)throw new se(2,2,2001,"Could not parse cue time range in SubViewer");e.push(new xt(a,s,r.slice(1).join("\n").trim()))}return e};function Dl(e){if(e=Oo(e,/(?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{2,3})/g),e==null)return null;var n=Number(e[2]),r=Number(e[3]);return 59<n||59<r?null:Number(e[4])/1e3+r+60*n+3600*(Number(e[1])||0)}pe("shaka.text.SbvTextParser",zr),zr.prototype.parseMedia=zr.prototype.parseMedia,zr.prototype.setSequenceMode=zr.prototype.setSequenceMode,zr.prototype.parseInit=zr.prototype.parseInit,Nn["text/x-subviewer"]=function(){return new zr};function gr(){this.g=new $i}gr.prototype.parseInit=function(){},gr.prototype.setSequenceMode=function(){},gr.prototype.parseMedia=function(e,n){return e=Bt(e),e=BT(e),e=Tt(fi(e)),this.g.parseMedia(e,n)};function BT(e){var n="WEBVTT\n\n";if(e=="")return n;e=e.replace(/\r+/g,""),e=e.trim(),e=A(e.split("\n\n"));for(var r=e.next();!r.done;r=e.next())r=r.value.split(/\n/),r[0].match(/\d+/)&&r.shift(),r[0]=r[0].replace(/,/g,"."),n+=r.join("\n")+"\n\n";return n}pe("shaka.text.SrtTextParser",gr),gr.srt2webvtt=BT,gr.prototype.parseMedia=gr.prototype.parseMedia,gr.prototype.setSequenceMode=gr.prototype.setSequenceMode,gr.prototype.parseInit=gr.prototype.parseInit,Nn["text/srt"]=function(){return new gr};function Gr(){}Gr.prototype.parseInit=function(){},Gr.prototype.setSequenceMode=function(){},Gr.prototype.parseMedia=function(e){var n="",r="";e=Bt(e).split(/\r?\n\s*\r?\n/),e=A(e);for(var s=e.next();!s.done;s=e.next()){var a=zT.exec(s.value);a&&(s=a[1],a=a[2],s=="V4 Styles"||s=="V4+ Styles"?n=a:s=="Events"&&(r=a))}e=[],s=null,n=A(n.split(/\r?\n/));for(var d=n.next();!d.done;d=n.next())if(a=d.value,!/^\s*;/.test(a)&&(d=GT.exec(a))){if(a=d[1].trim(),d=d[2].trim(),a=="Format")s=d.split(Ed);else if(a=="Style"){a=d.split(Ed),d={};for(var f=0;f<s.length&&f<a.length;f++)d[s[f]]=a[f];e.push(d)}}for(s=[],n=null,a={},r=A(r.split(/\r?\n/)),d=r.next();!d.done;a={be:a.be},d=r.next())if(d=d.value,!/^\s*;/.test(d)&&(f=GT.exec(d))){if(d=f[1].trim(),f=f[2].trim(),d=="Format")n=f.split(Ed);else if(d=="Dialogue"){f=f.split(Ed),d={};for(var g=0;g<n.length&&g<f.length;g++)d[n[g]]=f[g];g=bl(d.Start);var T=bl(d.End);f=new xt(g,T,f.slice(n.length-1).join(",").replace(/\\N/g,"\n").replace(/\{[^}]+\}/g,"")),a.be=d.Style,(d=e.find(function(I){return function(M){return M.Name==I.be}}(a)))&&FT(f,d),s.push(f)}}return s};function FT(e,n){var r=n.Fontname;if(r&&(e.fontFamily=r),(r=n.Fontsize)&&(e.fontSize=r+"px"),(r=n.PrimaryColour)&&(r=Sv(r))&&(e.color=r),(r=n.BackColour)&&(r=Sv(r))&&(e.backgroundColor=r),n.Bold&&(e.fontWeight=700),n.Italic&&(e.fontStyle="italic"),n.Underline&&e.textDecoration.push("underline"),(r=n.Spacing)&&(e.letterSpacing=r+"px"),r=n.Alignment)switch(parseInt(r,10)){case 1:e.displayAlign=ht,e.textAlign="start";break;case 2:e.displayAlign=ht,e.textAlign=Ui;break;case 3:e.displayAlign=ht,e.textAlign="end";break;case 5:e.displayAlign="before",e.textAlign="start";break;case 6:e.displayAlign="before",e.textAlign=Ui;break;case 7:e.displayAlign="before",e.textAlign="end";break;case 9:e.displayAlign="center",e.textAlign="start";break;case 10:e.displayAlign="center",e.textAlign=Ui;break;case 11:e.displayAlign="center",e.textAlign="end"}(n=n.AlphaLevel)&&(e.opacity=parseFloat(n))}function Sv(e){return e=parseInt(e.replace("&H",""),16),0<=e?"rgba("+(e&255)+","+(e>>8&255)+","+(e>>16&255)+","+(e>>24&255^255)/255+")":null}function bl(e){return e=VT.exec(e),3600*(e[1]?parseInt(e[1].replace(":",""),10):0)+60*parseInt(e[2],10)+parseFloat(e[3])}pe("shaka.text.SsaTextParser",Gr),Gr.prototype.parseMedia=Gr.prototype.parseMedia,Gr.prototype.setSequenceMode=Gr.prototype.setSequenceMode,Gr.prototype.parseInit=Gr.prototype.parseInit;var zT=/^\s*\[([^\]]+)\]\r?\n([\s\S]*)/,GT=/^\s*([^:]+):\s*(.*)/,Ed=/\s*,\s*/,VT=/^(\d+:)?(\d{1,2}):(\d{1,2}(?:[.]\d{1,3})?)?$/;Nn["text/x-ssa"]=function(){return new Gr};/*
 @license
 EME Encryption Scheme Polyfill
 Copyright 2019 Google LLC
 SPDX-License-Identifier: Apache-2.0
*/function Ad(){}var Pl;function Iv(){Pl?console.debug("EmeEncryptionSchemePolyfill: Already installed."):navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration?(Pl=navigator.requestMediaKeySystemAccess,console.debug("EmeEncryptionSchemePolyfill: Waiting to detect encryptionScheme support."),navigator.requestMediaKeySystemAccess=Cv):console.debug("EmeEncryptionSchemePolyfill: EME not found")}function Cv(e,n){var r=this,s;return j(function(a){return a.g==1?(console.assert(r==navigator,'bad "this" for requestMediaKeySystemAccess'),k(a,Pl.call(r,e,n),2)):(s=a.h,C(s)?(console.debug("EmeEncryptionSchemePolyfill: Native encryptionScheme support found."),navigator.requestMediaKeySystemAccess=Pl,a.return(s)):(console.debug("EmeEncryptionSchemePolyfill: No native encryptionScheme support found. Patching encryptionScheme support."),navigator.requestMediaKeySystemAccess=kv,a.return(kv.call(r,e,n))))})}function kv(e,n){var r=this,s,a,d,f,g,T,I,M,L,N;return j(function(O){if(O.g==1){for(console.assert(r==navigator,'bad "this" for requestMediaKeySystemAccess'),s=w(e),a=[],d=A(n),f=d.next();!f.done;f=d.next())g=f.value,T=t(g.videoCapabilities,s),I=t(g.audioCapabilities,s),g.videoCapabilities&&g.videoCapabilities.length&&!T.length||g.audioCapabilities&&g.audioCapabilities.length&&!I.length||(M=Object.assign({},g),M.videoCapabilities=T,M.audioCapabilities=I,a.push(M));if(!a.length)throw L=Error("Unsupported keySystem or supportedConfigurations."),L.name="NotSupportedError",L.code=DOMException.NOT_SUPPORTED_ERR,L;return k(O,Pl.call(r,e,a),2)}return N=O.h,O.return(new m(N,s))})}function t(e,n){return e&&e.filter(function(r){return!r.encryptionScheme||r.encryptionScheme==n})}pe("EmeEncryptionSchemePolyfill",Ad),Ad.install=Iv;function i(){}var o;function u(){o?console.debug("McEncryptionSchemePolyfill: Already installed."):navigator.mediaCapabilities?(o=navigator.mediaCapabilities.decodingInfo,console.debug("McEncryptionSchemePolyfill: Waiting to detect encryptionScheme support."),navigator.mediaCapabilities.decodingInfo=l):console.debug("McEncryptionSchemePolyfill: MediaCapabilities not found")}function l(e){var n=this,r,s,a;return j(function(d){switch(d.g){case 1:return console.assert(n==navigator.mediaCapabilities,'bad "this" for decodingInfo'),k(d,o.call(n,e),2);case 2:if(r=d.h,!e.keySystemConfiguration)return d.return(r);if((s=r.keySystemAccess)&&C(s))return console.debug("McEncryptionSchemePolyfill: Native encryptionScheme support found."),navigator.mediaCapabilities.decodingInfo=o,d.return(r);if(console.debug("McEncryptionSchemePolyfill: No native encryptionScheme support found. Patching encryptionScheme support."),navigator.mediaCapabilities.decodingInfo=h,s){d.D(3);break}return a=r,k(d,p(e),4);case 4:return a.keySystemAccess=d.h,d.return(r);case 3:return d.return(h.call(n,e))}})}function h(e){var n=this,r,s,a,d,f,g,T,I;return j(function(M){switch(M.g){case 1:return console.assert(n==navigator.mediaCapabilities,'bad "this" for decodingInfo'),r=null,e.keySystemConfiguration&&(s=e.keySystemConfiguration,a=s.keySystem,d=s.audio&&s.audio.encryptionScheme,f=s.video&&s.video.encryptionScheme,r=w(a),g={powerEfficient:!1,smooth:!1,supported:!1,keySystemAccess:null,configuration:e},d&&d!=r||f&&f!=r)?M.return(g):k(M,o.call(n,e),2);case 2:if(T=M.h,T.keySystemAccess){T.keySystemAccess=new m(T.keySystemAccess,r),M.D(3);break}if(!e.keySystemConfiguration){M.D(3);break}return I=T,k(M,p(e),5);case 5:I.keySystemAccess=M.h;case 3:return M.return(T)}})}function p(e){var n,r;return j(function(s){if(s.g==1){var a=e.keySystemConfiguration,d=[],f=[];return a.audio&&d.push({robustness:a.audio.robustness||"",contentType:e.audio.contentType}),a.video&&f.push({robustness:a.video.robustness||"",contentType:e.video.contentType}),a={initDataTypes:a.initDataType?[a.initDataType]:[],distinctiveIdentifier:a.distinctiveIdentifier,persistentState:a.persistentState,sessionTypes:a.sessionTypes},d.length&&(a.audioCapabilities=d),f.length&&(a.videoCapabilities=f),n=a,k(s,navigator.requestMediaKeySystemAccess(e.keySystemConfiguration.keySystem,[n]),2)}return r=s.h,s.return(r)})}pe("McEncryptionSchemePolyfill",i),i.install=u;function m(e,n){this.h=e,this.g=n,this.keySystem=e.keySystem}m.prototype.getConfiguration=function(){var e=this.h.getConfiguration();if(e.videoCapabilities)for(var n=A(e.videoCapabilities),r=n.next();!r.done;r=n.next())r.value.encryptionScheme=this.g;if(e.audioCapabilities)for(n=A(e.audioCapabilities),r=n.next();!r.done;r=n.next())r.value.encryptionScheme=this.g;return e},m.prototype.createMediaKeys=function(){return this.h.createMediaKeys()};function w(e){return e.startsWith("com.widevine")||e.startsWith("com.microsoft")||e.startsWith("com.chromecast")||e.startsWith("com.adobe")||e.startsWith("org.w3")?"cenc":e.startsWith("com.apple")?"cbcs-1-9":(console.warn("EmeEncryptionSchemePolyfill: Unknown key system:",e,"Please contribute!"),null)}function C(e){e=e.getConfiguration();var n=e.audioCapabilities&&e.audioCapabilities[0];return!!((e=e.videoCapabilities&&e.videoCapabilities[0]||n)&&e.encryptionScheme!==void 0)}function _(){}function D(){Iv(),u()}pe("EncryptionSchemePolyfills",_),_.install=D,typeof P<"u"&&P.exports&&(P.exports=_);/*
	 @license
	 Copyright 2013 Ali Al Dallal

	 Licensed under the MIT license.

	 Permission is hereby granted, free of charge, to any person obtaining a copy
	 of this software and associated documentation files (the "Software"), to deal
	 in the Software without restriction, including without limitation the rights
	 to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
	 copies of the Software, and to permit persons to whom the Software is
	 furnished to do so, subject to the following conditions:

	 The above copyright notice and this permission notice shall be included in
	 all copies or substantial portions of the Software.

	 THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
	 IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
	 FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
	 AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
	 LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
	 OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
	 SOFTWARE.
	*/for(var b={ach:{u:"Lwo",A:"Acholi"},ady:{u:"Адыгэбзэ",A:"Adyghe"},af:{u:"Afrikaans",A:"Afrikaans"},"af-NA":{u:"Afrikaans (Namibia)",A:"Afrikaans (Namibia)"},"af-ZA":{u:"Afrikaans (South Africa)",A:"Afrikaans (South Africa)"},ak:{u:"Tɕɥi",A:"Akan"},ar:{u:"العربية",A:"Arabic"},"ar-AR":{u:"العربية",A:"Arabic"},"ar-MA":{u:"العربية",A:"Arabic (Morocco)"},"ar-SA":{u:"العربية (السعودية)",A:"Arabic (Saudi Arabia)"},"ay-BO":{u:"Aymar aru",A:"Aymara"},az:{u:"Azərbaycan dili",A:"Azerbaijani"},"az-AZ":{u:"Azərbaycan dili",A:"Azerbaijani"},"be-BY":{u:"Беларуская",A:"Belarusian"},bg:{u:"Български",A:"Bulgarian"},"bg-BG":{u:"Български",A:"Bulgarian"},bn:{u:"বাংলা",A:"Bengali"},"bn-IN":{u:"বাংলা (ভারত)",A:"Bengali (India)"},"bn-BD":{u:"বাংলা(বাংলাদেশ)",A:"Bengali (Bangladesh)"},"bs-BA":{u:"Bosanski",A:"Bosnian"},ca:{u:"Català",A:"Catalan"},"ca-ES":{u:"Català",A:"Catalan"},cak:{u:"Maya Kaqchikel",A:"Kaqchikel"},"ck-US":{u:"ᏣᎳᎩ (tsalagi)",A:"Cherokee"},cs:{u:"Čeština",A:"Czech"},"cs-CZ":{u:"Čeština",A:"Czech"},cy:{u:"Cymraeg",A:"Welsh"},"cy-GB":{u:"Cymraeg",A:"Welsh"},da:{u:"Dansk",A:"Danish"},"da-DK":{u:"Dansk",A:"Danish"},de:{u:"Deutsch",A:"German"},"de-AT":{u:"Deutsch (Österreich)",A:"German (Austria)"},"de-DE":{u:"Deutsch (Deutschland)",A:"German (Germany)"},"de-CH":{u:"Deutsch (Schweiz)",A:"German (Switzerland)"},dsb:{u:"Dolnoserbšćina",A:"Lower Sorbian"},el:{u:"Ελληνικά",A:"Greek"},"el-GR":{u:"Ελληνικά",A:"Greek (Greece)"},en:{u:"English",A:"English"},"en-GB":{u:"English (UK)",A:"English (UK)"},"en-AU":{u:"English (Australia)",A:"English (Australia)"},"en-CA":{u:"English (Canada)",A:"English (Canada)"},"en-IE":{u:"English (Ireland)",A:"English (Ireland)"},"en-IN":{u:"English (India)",A:"English (India)"},"en-PI":{u:"English (Pirate)",A:"English (Pirate)"},"en-UD":{u:"English (Upside Down)",A:"English (Upside Down)"},"en-US":{u:"English (US)",A:"English (US)"},"en-ZA":{u:"English (South Africa)",A:"English (South Africa)"},"en@pirate":{u:"English (Pirate)",A:"English (Pirate)"},eo:{u:"Esperanto",A:"Esperanto"},"eo-EO":{u:"Esperanto",A:"Esperanto"},es:{u:"Español",A:"Spanish"},"es-AR":{u:"Español (Argentine)",A:"Spanish (Argentina)"},"es-419":{u:"Español (Latinoamérica)",A:"Spanish (Latin America)"},"es-CL":{u:"Español (Chile)",A:"Spanish (Chile)"},"es-CO":{u:"Español (Colombia)",A:"Spanish (Colombia)"},"es-EC":{u:"Español (Ecuador)",A:"Spanish (Ecuador)"},"es-ES":{u:"Español (España)",A:"Spanish (Spain)"},"es-LA":{u:"Español (Latinoamérica)",A:"Spanish (Latin America)"},"es-NI":{u:"Español (Nicaragua)",A:"Spanish (Nicaragua)"},"es-MX":{u:"Español (México)",A:"Spanish (Mexico)"},"es-US":{u:"Español (Estados Unidos)",A:"Spanish (United States)"},"es-VE":{u:"Español (Venezuela)",A:"Spanish (Venezuela)"},et:{u:"eesti keel",A:"Estonian"},"et-EE":{u:"Eesti (Estonia)",A:"Estonian (Estonia)"},eu:{u:"Euskara",A:"Basque"},"eu-ES":{u:"Euskara",A:"Basque"},fa:{u:"فارسی",A:"Persian"},"fa-IR":{u:"فارسی",A:"Persian"},"fb-LT":{u:"Leet Speak",A:"Leet"},ff:{u:"Fulah",A:"Fulah"},fi:{u:"Suomi",A:"Finnish"},"fi-FI":{u:"Suomi",A:"Finnish"},"fo-FO":{u:"Føroyskt",A:"Faroese"},fr:{u:"Français",A:"French"},"fr-CA":{u:"Français (Canada)",A:"French (Canada)"},"fr-FR":{u:"Français (France)",A:"French (France)"},"fr-BE":{u:"Français (Belgique)",A:"French (Belgium)"},"fr-CH":{u:"Français (Suisse)",A:"French (Switzerland)"},"fy-NL":{u:"Frysk",A:"Frisian (West)"},ga:{u:"Gaeilge",A:"Irish"},"ga-IE":{u:"Gaeilge (Gaelic)",A:"Irish (Gaelic)"},gl:{u:"Galego",A:"Galician"},"gl-ES":{u:"Galego",A:"Galician"},"gn-PY":{u:"Avañe'ẽ",A:"Guarani"},"gu-IN":{u:"ગુજરાતી",A:"Gujarati"},"gx-GR":{u:"Ἑλληνική ἀρχαία",A:"Classical Greek"},he:{u:"עברית‏",A:"Hebrew"},"he-IL":{u:"עברית‏",A:"Hebrew"},hi:{u:"हिन्दी",A:"Hindi"},"hi-IN":{u:"हिन्दी",A:"Hindi"},hr:{u:"Hrvatski",A:"Croatian"},"hr-HR":{u:"Hrvatski",A:"Croatian"},hsb:{u:"Hornjoserbšćina",A:"Upper Sorbian"},ht:{u:"Kreyòl",A:"Haitian Creole"},hu:{u:"Magyar",A:"Hungarian"},"hu-HU":{u:"Magyar",A:"Hungarian"},"hy-AM":{u:"Հայերեն",A:"Armenian"},id:{u:"Bahasa Indonesia",A:"Indonesian"},"id-ID":{u:"Bahasa Indonesia",A:"Indonesian"},is:{u:"Íslenska",A:"Icelandic"},"is-IS":{u:"Íslenska (Iceland)",A:"Icelandic (Iceland)"},it:{u:"Italiano",A:"Italian"},"it-IT":{u:"Italiano",A:"Italian"},ja:{u:"日本語",A:"Japanese"},"ja-JP":{u:"日本語",A:"Japanese"},"jv-ID":{u:"Basa Jawa",A:"Javanese"},"ka-GE":{u:"ქართული",A:"Georgian"},"kk-KZ":{u:"Қазақша",A:"Kazakh"},km:{u:"ភាសាខ្មែរ",A:"Khmer"},"km-KH":{u:"ភាសាខ្មែរ",A:"Khmer"},kab:{u:"Taqbaylit",A:"Kabyle"},kn:{u:"ಕನ್ನಡ",A:"Kannada"},"kn-IN":{u:"ಕನ್ನಡ (India)",A:"Kannada (India)"},ko:{u:"한국어",A:"Korean"},"ko-KR":{u:"한국어 (韩国)",A:"Korean (Korea)"},ku:{u:"Kurdî",A:"Kurdish"},"ku-TR":{u:"Kurdî",A:"Kurdish"},la:{u:"Latin",A:"Latin"},"la-VA":{u:"Latin",A:"Latin"},lb:{u:"Lëtzebuergesch",A:"Luxembourgish"},"li-NL":{u:"Lèmbörgs",A:"Limburgish"},lt:{u:"Lietuvių",A:"Lithuanian"},"lt-LT":{u:"Lietuvių",A:"Lithuanian"},lv:{u:"Latviešu",A:"Latvian"},"lv-LV":{u:"Latviešu",A:"Latvian"},mai:{u:"मैथिली, মৈথিলী",A:"Maithili"},"mg-MG":{u:"Malagasy",A:"Malagasy"},mk:{u:"Македонски",A:"Macedonian"},"mk-MK":{u:"Македонски (Македонски)",A:"Macedonian (Macedonian)"},ml:{u:"മലയാളം",A:"Malayalam"},"ml-IN":{u:"മലയാളം",A:"Malayalam"},"mn-MN":{u:"Монгол",A:"Mongolian"},mr:{u:"मराठी",A:"Marathi"},"mr-IN":{u:"मराठी",A:"Marathi"},ms:{u:"Bahasa Melayu",A:"Malay"},"ms-MY":{u:"Bahasa Melayu",A:"Malay"},mt:{u:"Malti",A:"Maltese"},"mt-MT":{u:"Malti",A:"Maltese"},my:{u:"ဗမာစကာ",A:"Burmese"},nb:{u:"Norsk (bokmål)",A:"Norwegian (bokmal)"},"nb-NO":{u:"Norsk (bokmål)",A:"Norwegian (bokmal)"},ne:{u:"नेपाली",A:"Nepali"},"ne-NP":{u:"नेपाली",A:"Nepali"},nl:{u:"Nederlands",A:"Dutch"},"nl-BE":{u:"Nederlands (België)",A:"Dutch (Belgium)"},"nl-NL":{u:"Nederlands (Nederland)",A:"Dutch (Netherlands)"},"nn-NO":{u:"Norsk (nynorsk)",A:"Norwegian (nynorsk)"},no:{u:"Norsk",A:"Norwegian"},oc:{u:"Occitan",A:"Occitan"},"or-IN":{u:"ଓଡ଼ିଆ",A:"Oriya"},pa:{u:"ਪੰਜਾਬੀ",A:"Punjabi"},"pa-IN":{u:"ਪੰਜਾਬੀ (ਭਾਰਤ ਨੂੰ)",A:"Punjabi (India)"},pl:{u:"Polski",A:"Polish"},"pl-PL":{u:"Polski",A:"Polish"},"ps-AF":{u:"پښتو",A:"Pashto"},pt:{u:"Português",A:"Portuguese"},"pt-BR":{u:"Português (Brasil)",A:"Portuguese (Brazil)"},"pt-PT":{u:"Português (Portugal)",A:"Portuguese (Portugal)"},"qu-PE":{u:"Qhichwa",A:"Quechua"},"rm-CH":{u:"Rumantsch",A:"Romansh"},ro:{u:"Română",A:"Romanian"},"ro-RO":{u:"Română",A:"Romanian"},ru:{u:"Русский",A:"Russian"},"ru-RU":{u:"Русский",A:"Russian"},"sa-IN":{u:"संस्कृतम्",A:"Sanskrit"},"se-NO":{u:"Davvisámegiella",A:"Northern Sámi"},"si-LK":{u:"පළාත",A:"Sinhala (Sri Lanka)"},sk:{u:"Slovenčina",A:"Slovak"},"sk-SK":{u:"Slovenčina (Slovakia)",A:"Slovak (Slovakia)"},sl:{u:"Slovenščina",A:"Slovenian"},"sl-SI":{u:"Slovenščina",A:"Slovenian"},"so-SO":{u:"Soomaaliga",A:"Somali"},sq:{u:"Shqip",A:"Albanian"},"sq-AL":{u:"Shqip",A:"Albanian"},sr:{u:"Српски",A:"Serbian"},"sr-RS":{u:"Српски (Serbia)",A:"Serbian (Serbia)"},su:{u:"Basa Sunda",A:"Sundanese"},sv:{u:"Svenska",A:"Swedish"},"sv-SE":{u:"Svenska",A:"Swedish"},sw:{u:"Kiswahili",A:"Swahili"},"sw-KE":{u:"Kiswahili",A:"Swahili (Kenya)"},ta:{u:"தமிழ்",A:"Tamil"},"ta-IN":{u:"தமிழ்",A:"Tamil"},te:{u:"తెలుగు",A:"Telugu"},"te-IN":{u:"తెలుగు",A:"Telugu"},tg:{u:"забо́ни тоҷикӣ́",A:"Tajik"},"tg-TJ":{u:"тоҷикӣ",A:"Tajik"},th:{u:"ภาษาไทย",A:"Thai"},"th-TH":{u:"ภาษาไทย (ประเทศไทย)",A:"Thai (Thailand)"},tl:{u:"Filipino",A:"Filipino"},"tl-PH":{u:"Filipino",A:"Filipino"},tlh:{u:"tlhIngan-Hol",A:"Klingon"},tr:{u:"Türkçe",A:"Turkish"},"tr-TR":{u:"Türkçe",A:"Turkish"},"tt-RU":{u:"татарча",A:"Tatar"},uk:{u:"Українська",A:"Ukrainian"},"uk-UA":{u:"Українська",A:"Ukrainian"},ur:{u:"اردو",A:"Urdu"},"ur-PK":{u:"اردو",A:"Urdu"},uz:{u:"O'zbek",A:"Uzbek"},"uz-UZ":{u:"O'zbek",A:"Uzbek"},vi:{u:"Tiếng Việt",A:"Vietnamese"},"vi-VN":{u:"Tiếng Việt",A:"Vietnamese"},"xh-ZA":{u:"isiXhosa",A:"Xhosa"},yi:{u:"ייִדיש",A:"Yiddish"},"yi-DE":{u:"ייִדיש (German)",A:"Yiddish (German)"},zh:{u:"中文",A:"Chinese"},"zh-HANS":{u:"中文简体",A:"Chinese Simplified"},"zh-HANT":{u:"中文繁體",A:"Chinese Traditional"},"zh-CN":{u:"中文（中国）",A:"Chinese Simplified (China)"},"zh-HK":{u:"中文（香港）",A:"Chinese Traditional (Hong Kong)"},"zh-SG":{u:"中文（新加坡）",A:"Chinese Simplified (Singapore)"},"zh-TW":{u:"中文（台灣）",A:"Chinese Traditional (Taiwan)"},"zu-ZA":{u:"isiZulu",A:"Zulu"}},U=A(Object.keys(b)),K=U.next();!K.done;K=U.next()){var Z=K.value;b[Z.toLowerCase()]=b[Z]}function B(e,n){var r=this;this.parent=e,this.controls=n,this.eventManager=new Ve,this.localization=this.controls.ua,this.player=this.controls.cc(),this.video=this.controls.zb(),this.adManager=this.player.sd(),this.ad=n.getAd(),this.eventManager.o(this.adManager,"ad-started",function(s){r.ad=s.ad}),this.eventManager.o(this.adManager,"ad-stopped",function(){r.ad=null})}B.prototype.release=function(){this.eventManager.release(),this.ad=this.adManager=this.video=this.player=this.localization=this.eventManager=this.controls=this.parent=null},pe("shaka.ui.Element",B),B.prototype.release=B.prototype.release;function X(e){return ge(e,"shaka-back-to-overflow-button")}function ge(e,n){return e=e.getElementsByClassName(n),e.length?e[0]:null}function ne(e){e&&(e=ge(e,"shaka-chosen-item"))&&e.parentElement.focus()}function ce(){var e=We("i");return e.classList.add("material-icons-round"),e.classList.add("shaka-chosen-item"),e.textContent="done",e.ariaHidden="true",e}function de(e,n){e&&(n?e.classList.remove("shaka-hidden"):e.classList.add("shaka-hidden"))}function Ee(e,n){var r=Math.floor(e/3600),s=Math.floor(e/60%60);return e=Math.floor(e%60),10>e&&(e="0"+e),e=s+":"+e,n&&(10>s&&(e="0"+e),e=r+":"+e),e}function Ie(e,n){B.call(this,e,n);var r=this;this.i=We("div"),this.i.classList.add("shaka-ad-counter"),this.parent.appendChild(this.i),this.h=We("span"),this.h.classList.add("shaka-ad-counter-span"),this.i.appendChild(this.h),this.g=new Qe(function(){var s=Math.round(r.ad.getRemainingTime()),a=r.ad.getDuration();s!=-1&&a!=-1&&(0<s?(s=Ee(a-s,!1)+" / "+Ee(a,!1),1<r.ad.getSequenceLength()?r.h.textContent=s:(a=r.localization.resolve("AD_TIME"),r.h.textContent=a.replace("[AD_TIME]",s))):(r.g.stop(),r.h.textContent=""))}),this.eventManager.o(this.localization,"locale-updated",function(){}),this.eventManager.o(this.localization,"locale-changed",function(){}),this.eventManager.o(this.adManager,"ad-started",function(){r.g.za(),r.g.ea(.5)}),this.eventManager.o(this.adManager,"ad-stopped",function(){r.g.stop(),r.h.textContent=""}),this.ad&&(this.g.za(),this.g.ea(.5))}Te(Ie,B),Ie.prototype.release=function(){this.g.stop(),this.g=null,B.prototype.release.call(this)},pe("shaka.ui.AdCounter",Ie);function be(e,n){B.call(this,e,n);var r=this;this.g=We("div"),this.g.classList.add("shaka-ad-position"),de(this.g,!1),this.parent.appendChild(this.g),this.h=We("span"),this.h.classList.add("shaka-ad-position-span"),this.g.appendChild(this.h),this.eventManager.o(this.localization,"locale-updated",function(){r.ad&&Pe(r)}),this.eventManager.o(this.localization,"locale-changed",function(){r.ad&&Pe(r)}),this.eventManager.o(this.adManager,"ad-started",function(){Pe(r)}),this.eventManager.o(this.adManager,"ad-stopped",function(){r.h.textContent="",de(r.g,!1)}),this.ad&&Pe(this)}Te(be,B);function Pe(e){var n=e.ad.getSequenceLength();if(1<n){var r=e.ad.getPositionInSequence();e.h.textContent=e.localization.resolve("AD_PROGRESS").replace("[AD_ON]",String(r)).replace("[NUM_ADS]",String(n)),de(e.g,!0)}}pe("shaka.ui.AdPosition",be);function Ke(e,n){B.call(this,e,n);var r=this;this.button=bn(),this.parent.appendChild(this.button),this.eventManager.o(this.localization,"locale-updated",function(){r.g()}),this.eventManager.o(this.localization,"locale-changed",function(){r.g()}),this.eventManager.o(this.video,"play",function(){r.g(),r.h()}),this.eventManager.o(this.video,"pause",function(){r.g(),r.h()}),this.eventManager.o(this.video,"seeking",function(){r.g(),r.h()}),this.eventManager.o(this.adManager,"ad-paused",function(){r.g(),r.h()}),this.eventManager.o(this.adManager,"ad-resumed",function(){r.g(),r.h()}),this.eventManager.o(this.adManager,"ad-started",function(){r.g(),r.h()}),this.eventManager.o(this.button,"click",function(){r.ad&&r.ad.isLinear()?YI(r.controls):XI(r.controls)}),this.ad&&(this.g(),this.h())}Te(Ke,B),Ke.prototype.isPaused=function(){if(this.ad&&this.ad.isLinear())var e=this.ad.isPaused();else e=this.controls,e=e.s.paused&&!e.X;return e},Ke.prototype.g=function(){},Ke.prototype.h=function(){},pe("shaka.ui.PlayButton",Ke);function Ze(e,n){Ke.call(this,e,n),this.button.classList.add("shaka-play-button"),this.button.classList.add("shaka-no-propagation"),this.h(),this.g()}Te(Ze,Ke),Ze.prototype.h=function(){this.isPaused()?this.button.setAttribute("icon","play"):this.button.setAttribute("icon","pause")},Ze.prototype.g=function(){var e=this.isPaused()?"PLAY":"PAUSE";this.button.ariaLabel=this.localization.resolve(e)},pe("shaka.ui.BigPlayButton",Ze);function et(e,n){B.call(this,e,n);var r=this;this.j=this.controls.i,this.h=this.controls.g,this.i=[],this.g=We("div"),this.g.classList.add("shaka-no-propagation"),this.g.classList.add("shaka-context-menu"),this.g.classList.add("shaka-hidden"),this.h.appendChild(this.g),this.eventManager.o(this.h,"contextmenu",function(s){if(r.g.classList.contains("shaka-hidden")){s.preventDefault();var a=r.h.getBoundingClientRect();r.g.style.left=s.clientX-a.left+"px",r.g.style.top=s.clientY-a.top+"px",de(r.g,!0)}else de(r.g,!1)}),this.eventManager.o(S,"click",function(){de(r.g,!1)}),qe(this)}Te(et,B),et.prototype.release=function(){this.h=null;for(var e=A(this.i),n=e.next();!n.done;n=e.next())n.value.release();this.i=[],B.prototype.release.call(this)};function mt(e,n){rn.set(e,n)}function qe(e){for(var n=A(e.j.contextMenuElements),r=n.next();!r.done;r=n.next()){r=r.value;var s=rn.get(r);s?e.i.push(s.create(e.g,e.controls)):ze("Unrecognized context menu element:",r)}}pe("shaka.ui.ContextMenu",et),et.registerElement=mt;var rn=new Map;function lt(e,n,r,s){B.call(this,e,n);var a=this;this.container=We("div"),this.container.classList.add("shaka-range-container"),this.container.classList.add.apply(this.container.classList,q(r)),this.g=!1,this.bar=document.createElement("input"),this.l=new Qe(function(){a.onChangeEnd(),a.g=!1}),this.bar.classList.add("shaka-range-element"),this.bar.classList.add.apply(this.bar.classList,q(s)),this.bar.type="range",this.bar.step="any",this.bar.min="0",this.bar.max="1",this.bar.value="0",this.container.appendChild(this.bar),this.parent.appendChild(this.container),this.eventManager.o(this.bar,"mousedown",function(){a.controls.Mb()&&(a.g=!0,a.onChangeStart())}),this.eventManager.o(this.bar,"touchstart",function(d){a.controls.Mb()&&(a.g=!0,sn(a,d),a.onChangeStart())}),this.eventManager.o(this.bar,"input",function(){a.onChange()}),this.eventManager.o(this.bar,"touchmove",function(d){a.g&&(sn(a,d),a.onChange())}),this.eventManager.o(this.bar,"touchend",function(d){a.g&&(a.g=!1,sn(a,d),a.onChangeEnd())}),this.eventManager.o(this.bar,"mouseup",function(){a.g&&(a.g=!1,a.onChangeEnd())})}Te(lt,B),v=lt.prototype,v.release=function(){this.l&&(this.l.stop(),this.l=null),B.prototype.release.call(this)},v.setRange=function(e,n){this.bar.min=e,this.bar.max=n},v.onChangeStart=function(){},v.onChange=function(){},v.onChangeEnd=function(){},v.changeTo=function(e){this.g||(this.g=!0,this.onChangeStart());var n=parseFloat(this.bar.min),r=parseFloat(this.bar.max);this.bar.value=e>r?r:e<n?n:e,this.onChange(),this.l.R(.5)},v.getValue=function(){return parseFloat(this.bar.value)},v.setValue=function(e){this.g||(this.bar.value=e)};function sn(e,n){n.preventDefault();var r=n.changedTouches[0],s=e.bar.getBoundingClientRect();n=parseFloat(e.bar.min);var a=parseFloat(e.bar.max);r=n+(a-n)/s.width*(r.clientX-s.left),r<n?r=n:r>a&&(r=a),e.bar.value=r}pe("shaka.ui.RangeElement",lt),lt.prototype.setValue=lt.prototype.setValue,lt.prototype.getValue=lt.prototype.getValue,lt.prototype.changeTo=lt.prototype.changeTo,lt.prototype.onChangeEnd=lt.prototype.onChangeEnd,lt.prototype.onChange=lt.prototype.onChange,lt.prototype.onChangeStart=lt.prototype.onChangeStart,lt.prototype.setRange=lt.prototype.setRange;function li(e,n){lt.call(this,e,n,["shaka-seek-bar-container"],["shaka-seek-bar","shaka-no-propagation","shaka-show-controls-on-mouse-over"]);var r=this;this.j=We("div"),this.j.classList.add("shaka-ad-markers"),this.container.insertBefore(this.j,this.container.childNodes[0]),this.m=this.controls.i,this.h=new Qe(function(){r.video.currentTime=r.getValue()}),this.s=new Qe(function(){mr(r)}),this.B=!1,this.i=[],this.eventManager.o(this.localization,"locale-updated",function(){return $n(r)}),this.eventManager.o(this.localization,"locale-changed",function(){return $n(r)}),this.eventManager.o(this.adManager,"ad-started",function(){Cn(r)||de(r.container,!1)}),this.eventManager.o(this.adManager,"ad-stopped",function(){Cn(r)&&de(r.container,!0)}),this.eventManager.o(this.adManager,"ad-cue-points-changed",function(s){r.i=s.cuepoints,ho(r)}),this.eventManager.o(this.player,"unloading",function(){r.i=[],ho(r)}),this.setValue(this.video.currentTime),this.update(),$n(this),this.ad&&de(this.container,!1)}Te(li,lt),v=li.prototype,v.release=function(){this.h&&(this.h.stop(),this.h=null,this.s.stop(),this.s=null),lt.prototype.release.call(this)},v.onChangeStart=function(){this.B=!this.video.paused,this.controls.Qe(!0),this.video.pause()},v.onChange=function(){this.video.duration&&(this.update(),this.h.R(.125))},v.onChangeEnd=function(){this.h.za(),this.controls.Qe(!1),this.B&&this.video.play()},v.isShowing=function(){return!this.container.classList.contains("shaka-hidden")},v.update=function(){var e=this.m.seekBarColors,n=this.getValue(),r=this.video.buffered.length,s=r?this.video.buffered.start(0):0,a=r?this.video.buffered.end(r-1):0,d=this.player.Ja(),f=d.end-d.start;this.setRange(d.start,d.end),Cn(this)?(de(this.container,!0),r==0?this.container.style.background=e.base:(r=(Math.max(s,d.start)-d.start)/f||0,a=(Math.min(a,d.end)-d.start)/f||0,n=(Math.min(Math.max(n,d.start),d.end)-d.start)/f||0,this.container.style.background="linear-gradient("+["to right",(this.m.showUnbufferedStart?e.base:e.played)+" "+100*r+"%",e.played+" "+100*r+"%",e.played+" "+100*n+"%",e.buffered+" "+100*n+"%",e.buffered+" "+100*a+"%",e.base+" "+100*a+"%"].join()+")")):de(this.container,!1)};function mr(e){if(e.i.length){for(var n=e.player.Ja(),r=n.end-n.start,s=["to right"],a=[],d=e.m.seekBarColors.adBreaks,f=!1,g=A(e.i),T=g.next();!T.done;T=g.next())if(T=T.value,T.start!=-1||T.end||(f=!0),T.start>=n.start&&T.start<n.end&&!(T.end&&T.end>n.end)){var I=(T.start-n.start)/r||0,M=I+.01;T.end&&(M=(T.end-n.start)/r||0),a.push({start:I,end:M})}for(n=A(a),T=n.next();!T.done;T=n.next())r=T.value,s.push("transparent "+100*r.start+"%"),s.push(d+" "+100*r.start+"%"),s.push(d+" "+100*r.end+"%"),s.push("transparent "+100*r.end+"%");f&&(s.push("transparent 99%"),s.push(d+" 99%")),e.j.style.background="linear-gradient("+s.join(",")+")"}else e.j.style.background="transparent"}function ho(e){mr(e);var n=e.player.Ja();n=n.end-n.start,e.player.T()&&5<n&&e.s.ea(1)}function Cn(e){var n=e.player.Ja();return n=n.end-n.start,e.player.T()&&5>n?!1:e.ad==null||!e.ad.isLinear()}function $n(e){e.bar.ariaLabel=e.localization.resolve("SEEK")}pe("shaka.ui.SeekBar",li);function fo(){}fo.prototype.create=function(e,n){return new li(e,n)},li.Factory=fo;function Be(e,n,r,s){vt.call(this);var a=this;this.P=!0,this.i=s,this.C=new wt(r,e,this.i.castReceiverAppId,this.i.castAndroidReceiverCompatible),this.Za=!0,this.s=this.C.zb(),this.B=r,this.F=this.C.cc(),this.sa=e,this.j=n,this.Xa=this.F.sd(),this.l=this.m=null,this.X=!1,this.G=[],this.vb=[],this.gb=!1,this.Z=new Qe(function(){a.j.style.cursor="none",a.gb=!1,Ts(a)}),this.aa=new Qe(function(){a.g.removeAttribute("shown"),a.I.R(2)}),this.I=new Qe(function(){for(var d=A(a.G),f=d.next();!f.done;f=d.next())de(f.value,!1)}),this.La=new Qe(function(){a.Mb()&&HT(a)}),this.J=null,this.H=[],this.ua=P4(),this.h=new Ve,this.configure(this.i),R4(this),this.ka=new Set,uS(this),this.La.ea(.125),this.h.o(this.ua,"locale-changed",function(d){a.Xa.setLocale(d.locales[0])})}Te(Be,vt),v=Be.prototype,v.destroy=function(){var e=this;return j(function(n){switch(n.g){case 1:if(document.pictureInPictureElement!=e.B){n.D(2);break}return k(n,document.exitPictureInPicture(),2);case 2:if(e.h&&(e.h.release(),e.h=null),e.Z&&(e.Z.stop(),e.Z=null),e.aa&&(e.aa.stop(),e.aa=null),e.I&&(e.I.stop(),e.I=null),e.La&&(e.La.stop(),e.La=null),Mv(e),e.g&&(e.j.removeChild(e.g),e.g=null),!e.C){n.D(4);break}return k(n,e.C.destroy(),5);case 5:e.C=null;case 4:if(!e.sa){n.D(6);break}return k(n,e.sa.destroy(),7);case 7:e.sa=null;case 6:e.F=null,e.B=null,e.s=null,e.ua=null,e.ka.clear(),vt.prototype.release.call(e),le(n)}})};function Mv(e){for(var n=A(e.H),r=n.next();!r.done;r=n.next())r.value.release();e.H=[]}function Ti(e,n){aS.set(e,n)}v.og=function(e){this.Za=e,uS(this)},v.ih=function(){Ts(this)},v.configure=function(e){this.i=e,this.C.yf(e.castReceiverAppId,e.castAndroidReceiverCompatible),this.l&&(this.l=null),this.fb&&(this.fb=null),this.Ya&&(this.Ya=null),this.g?(ju(this.g),Mv(this)):(E4(this),_4(this)),this.j.classList.add("shaka-video-container"),this.B.classList.add("shaka-video"),S4(this),this.i.addBigPlayButton&&A4(this),this.i.customContextMenu&&(this.Ya=new et(this.V,this),this.H.push(this.Ya)),this.$||C4(this),this.$a=We("div"),this.$a.classList.add("shaka-server-side-ad-container"),this.g.appendChild(this.$a),k4(this),this.G=Array.from(this.j.getElementsByClassName("shaka-settings-menu")),this.G.push.apply(this.G,q(Array.from(this.j.getElementsByClassName("shaka-overflow-menu")))),M4(this),this.vb=Array.from(this.j.getElementsByClassName("shaka-show-controls-on-mouse-over")),Ts(this),e=A(this.j.getElementsByClassName("shaka-no-propagation"));for(var n=e.next();!n.done;n=e.next()){n=n.value;var r=function(s){return s.stopPropagation()};this.h.o(n,"click",r),this.h.o(n,"dblclick",r)}},v.Me=function(e){(this.P=e)?(this.j.setAttribute("shaka-controls","true"),this.B.tabIndex=-1,this.B.controls=!1):this.j.removeAttribute("shaka-controls"),Ts(this)},v.Xf=function(e){this.B.controls=e,this.B.tabIndex=e?0:-1,e&&this.Me(!1)},v.getAd=function(){return this.m},v.Bg=function(){return this.C},v.Ng=function(){return this.ua},v.bh=function(){return this.j},v.zb=function(){return this.s},v.Mg=function(){return this.B},v.cc=function(){return this.F},v.Lg=function(){return this.sa},v.Gg=function(){return this.g},v.Vg=function(){return this.$a},v.Dg=function(){return this.O},v.Eg=function(){return this.i},v.hh=function(){return this.X},v.Qe=function(e){this.X=e},v.fh=function(){return this.Za},v.Hf=function(){return this.l?this.l.getValue():this.s.currentTime},v.Yf=function(e){this.J=e},v.md=function(){return this.G.some(function(e){return!e.classList.contains("shaka-hidden")})},v.fc=function(){this.I.za()},v.xd=function(){return!!(document.fullscreenEnabled||this.B.webkitSupportsFullscreen)},v.ic=function(){if(document.fullscreenEnabled)return!!document.fullscreenElement;var e=this.B;return e.webkitSupportsFullscreen?e.webkitDisplayingFullscreen:!1};function WI(e){var n,r;return j(function(s){switch(s.g){case 1:if(ye(s,2),!document.fullscreenEnabled){n=e.B,n.webkitSupportsFullscreen&&n.webkitEnterFullscreen(),s.D(4);break}if(!document.pictureInPictureElement){s.D(5);break}return k(s,document.exitPictureInPicture(),5);case 5:return k(s,e.j.requestFullscreen({navigationUI:"hide"}),7);case 7:if(!e.i.forceLandscapeOnFullscreen||!screen.orientation){s.D(4);break}return ye(s,9),k(s,screen.orientation.lock("landscape"),11);case 11:_e(s,4,2);break;case 9:we(s,2);case 4:_e(s,0);break;case 2:r=we(s),e.dispatchEvent(new Fe("error",new Map().set("detail",r))),le(s)}})}function qI(e){var n;return j(function(r){return document.fullscreenEnabled?(screen.orientation&&screen.orientation.unlock(),k(r,document.exitFullscreen(),0)):(n=e.B,n.webkitSupportsFullscreen&&n.webkitExitFullscreen(),r.D(0))})}v.Xe=function(){var e=this;return j(function(n){return e.ic()?k(n,qI(e),0):k(n,WI(e),0)})},v.cg=function(){de(this.K,!0),de(this.O,!0),this.g.setAttribute("ad-active","true")},v.Kf=function(){de(this.K,!1),de(this.O,!1),this.g.removeAttribute("ad-active")};function XI(e){e.P&&e.s.duration&&(e.F.vf(),e.s.paused&&!e.X?e.s.play():e.s.pause())}function YI(e){e.m&&e.m.isPaused()?e.m.play():e.m&&e.m.pause()}function E4(e){e.g=We("div"),e.g.classList.add("shaka-controls-container"),e.j.appendChild(e.g),e.j.setAttribute("shaka-controls","true"),e.h.o(e.g,"touchstart",function(n){e.s.duration&&(e.Mb()?e.J=Date.now():(_v(e,n),n.cancelable&&n.preventDefault()))},{passive:!1}),e.h.o(e.g,"click",function(){$I(e)}),e.h.o(e.g,"dblclick",function(){e.i.doubleClickForFullscreen&&e.xd()&&e.Xe()})}function A4(e){var n=We("div");n.classList.add("shaka-play-button-container"),e.g.appendChild(n),e.fb=new Ze(n,e),e.H.push(e.fb)}function S4(e){var n=We("div");n.classList.add("shaka-scrim-container"),e.g.appendChild(n)}function I4(e){e.K=We("div"),e.K.classList.add("shaka-ad-controls");var n=e.m!=null&&e.m.isLinear();de(e.K,n),e.M.appendChild(e.K),n=new be(e.K,e),e.H.push(n),n=new Ie(e.K,e),e.H.push(n)}function C4(e){e.$=We("div"),e.$.classList.add("shaka-spinner-container"),e.j.appendChild(e.$);var n=We("div");n.classList.add("shaka-spinner"),e.$.appendChild(n),e=document.createElementNS("http://www.w3.org/2000/svg","svg"),e.classList.add("shaka-spinner-svg"),e.setAttribute("viewBox","0 0 30 30"),n.appendChild(e),n=document.createElementNS("http://www.w3.org/2000/svg","circle"),n.classList.add("shaka-spinner-path"),n.setAttribute("cx","15"),n.setAttribute("cy","15"),n.setAttribute("r","14.5"),n.setAttribute("fill","none"),n.setAttribute("stroke-width","1"),n.setAttribute("stroke-miterlimit","10"),e.appendChild(n)}function k4(e){e.M=We("div"),e.M.classList.add("shaka-bottom-controls"),e.M.classList.add("shaka-no-propagation"),e.g.appendChild(e.M),e.h.o(e.M,"click",function(s){s.target.closest(".shaka-overflow-button")||e.fc()}),I4(e),e.V=We("div"),e.V.classList.add("shaka-controls-button-panel"),e.V.classList.add("shaka-show-controls-on-mouse-over"),e.i.enableTooltips&&e.V.classList.add("shaka-tooltips-on"),e.M.appendChild(e.V);for(var n=A(e.i.controlPanelElements),r=n.next();!r.done;r=n.next())r=r.value,aS.get(r)?(r=aS.get(r).create(e.V,e),e.H.push(r)):ze("Unrecognized control panel element requested:",r)}function M4(e){if(e.i.addSeekBar)e.l=ZI.create(e.M,e),e.H.push(e.l);else{e=A(e.G);for(var n=e.next();!n.done;n=e.next())n.value.classList.add("shaka-low-position")}}function _4(e){e.O=We("div"),e.O.classList.add("shaka-client-side-ad-container"),de(e.O,!1),e.h.o(e.O,"click",function(){$I(e)}),e.j.appendChild(e.O)}function R4(e){e.h.o(e.F,"buffering",function(){e.P&&de(e.$,e.F.Pc())}),e.P&&de(e.$,e.F.Pc()),e.h.o(S,"keydown",function(n){D4(e,n)}),e.h.o(S,"click",function(){return e.fc()}),e.h.o(e,"submenuopen",function(){e.fc()}),e.h.o(e.s,"play",function(){Ts(e)}),e.h.o(e.s,"pause",function(){Ts(e)}),e.h.o(e.j,"mousemove",function(n){_v(e,n)}),e.h.o(e.j,"touchmove",function(n){_v(e,n)},{passive:!0}),e.h.o(e.j,"touchend",function(n){_v(e,n)},{passive:!0}),e.h.o(e.j,"mouseleave",function(){e.J||e.Z.za()}),e.h.o(e.C,"caststatuschanged",function(){uS(e)}),e.h.o(e.j,"keydown",function(n){var r=document.activeElement,s=r&&r.classList?r.classList.contains("shaka-volume-bar"):!1,a=r&&r.classList&&r.classList.contains("shaka-seek-bar");if(e.g.contains(r)&&_v(e,n),e.i.enableKeyboardPlaybackControls)switch(r=e.i.keyboardSeekDistance,n.key){case"ArrowLeft":e.l&&!s&&0<r&&(n.preventDefault(),KT(e,e.l.getValue()-r));break;case"ArrowRight":e.l&&!s&&0<r&&(n.preventDefault(),KT(e,e.l.getValue()+r));break;case"Home":e.l&&KT(e,e.F.Ja().start);break;case"End":e.l&&KT(e,e.F.Ja().end);break;case" ":a&&QI(e)}}),e.h.o(e.j,"keyup",function(n){e.ka.delete(n.key)}),e.h.o(e.Xa,"ad-started",function(n){e.m=n.ad,e.cg()}),e.h.o(e.Xa,"ad-stopped",function(){e.m=null,e.Kf()}),screen.orientation&&e.h.o(screen.orientation,"change",function(){return j(function(n){return k(n,L4(e),0)})})}function L4(e){return j(function(n){return e.s&&e.s.readyState!=0&&!e.C.na()&&e.i.enableFullscreenOnRotation&&e.xd()?screen.orientation.type.includes("landscape")&&!e.ic()?k(n,WI(e),0):screen.orientation.type.includes("portrait")&&e.ic()?k(n,qI(e),0):n.D(0):n.return()})}function _v(e,n){n.type=="mousemove"&&(e.g.classList.remove("shaka-keyboard-navigation"),Ts(e)),n.type=="touchstart"||n.type=="touchmove"||n.type=="touchend"||n.type=="keyup"?e.J=Date.now():e.J+1e3<Date.now()&&(e.J=null),e.J&&n.type=="mousemove"||(e.j.style.cursor="",e.gb=!0,e.I.stop(),e.Mb()||(HT(e),Ts(e)),e.Z.stop(),n.type!="touchend"&&n.type!="keyup"&&e.J||e.Z.R(3))}function N4(e){return S.matchMedia("hover: hover").matches?e.vb.some(function(n){return n.matches(":hover")}):!1}function Ts(e){var n=e.m?e.m.isPaused():!1,r=e.s.paused&&!e.X,s=e.g.classList.contains("shaka-keyboard-navigation");n||(!e.m||!e.m.isLinear())&&r||e.gb||s||N4(e)?(HT(e),e.g.setAttribute("shown","true"),e.aa.stop()):e.aa.R(e.i.fadeDelay)}function $I(e){e.P&&(e.md()?e.I.za():e.i.singleClickForPlayAndPause&&QI(e))}function QI(e){e.m&&e.m.isLinear()?YI(e):XI(e)}function uS(e){var n=e.C.na();e.dispatchEvent(new Fe("caststatuschanged",new Map().set("newStatus",n))),n?e.g.setAttribute("casting","true"):e.g.removeAttribute("casting")}v.Mb=function(){return this.P?this.g.getAttribute("shown")!=null||this.g.getAttribute("casting")!=null:!1};function KT(e,n){e.l.changeTo(n),e.Mb()&&HT(e)}function HT(e){if(e.l)if(e.l.setValue(e.s.currentTime),e.l.update(),e.l.isShowing())for(var n=A(e.G),r=n.next();!r.done;r=n.next())r.value.classList.remove("shaka-low-position");else for(n=A(e.G),r=n.next();!r.done;r=n.next())r.value.classList.add("shaka-low-position");e.dispatchEvent(new Fe("timeandseekrangeupdated"))}function D4(e,n){e.ka.add(n.key);var r=e.md();n.key=="Tab"&&(e.g.classList.add("shaka-keyboard-navigation"),Ts(e),e.h.o(S,"mousedown",function(){e.h.qc(S,"mousedown")})),n.key=="Escape"&&e.I.za(),r&&e.ka.has("Tab")&&b4(e,n)}function b4(e,n){var r=e.G.filter(function(d){return!d.classList.contains("shaka-hidden")});if(r.length){var s=r[0];if(s.childNodes.length){for(r=s.firstElementChild;r&&r.classList.contains("shaka-hidden");)r=r.nextElementSibling;for(s=s.lastElementChild;s&&s.classList.contains("shaka-hidden");)s=s.previousElementSibling;var a=document.activeElement;e.ka.has("Shift")?a==r&&(n.preventDefault(),s.focus()):a==s&&(n.preventDefault(),r.focus())}}}function P4(){var e=new Fn("en");return e.ba("ar",new Map([["AD_DURATION","مدة الإعلان"],["AD_PROGRESS","الإعلان [AD_ON] من [NUM_ADS]"],["AD_TIME","الإعلان: [AD_TIME]"],["AUTO_QUALITY","تلقائي"],["BACK","رجوع"],["CAPTIONS","الترجمة والشرح"],["CAST","إرسال..."],["ENTER_LOOP_MODE","تكرار الفيديو الحالي"],["ENTER_PICTURE_IN_PICTURE",'الدخول في وضع "نافذة ضمن نافذة"'],["EXIT_FULL_SCREEN","إنهاء وضع ملء الشاشة"],["EXIT_LOOP_MODE","إيقاف تكرار الفيديو الحالي"],["EXIT_PICTURE_IN_PICTURE",'الخروج من وضع "نافذة ضمن نافذة"'],["FAST_FORWARD","تقديم سريع"],["FULL_SCREEN","ملء الشاشة"],["LANGUAGE","اللغة"],["LIVE","مباشر"],["LOOP","تكرار"],["MORE_SETTINGS","مزيد من الإعدادات"],["MULTIPLE_LANGUAGES","لغات متعددة"],["MUTE","كتم الصوت"],["NOT_APPLICABLE","غير سارٍ"],["OFF","إيقاف"],["ON","تشغيل"],["PAUSE","إيقاف مؤقت"],["PICTURE_IN_PICTURE","نافذة ضمن النافذة"],["PLAY","التشغيل"],["PLAYBACK_RATE","سرعة التشغيل"],["RESOLUTION","درجة الدقة"],["REWIND","ترجيع"],["SEEK","البحث بالتمرير"],["SKIP_AD","تخطّي الإعلان"],["SKIP_TO_LIVE","الانتقال إلى بث مباشر"],["UNDETERMINED_LANGUAGE","غير محدد"],["UNMUTE","إعادة الصوت"],["UNRECOGNIZED_LANGUAGE","غير معروف"],["VOLUME","مستوى الصوت"]])),e.ba("de",new Map([["AD_DURATION","Dauer der Werbeanzeige"],["AD_PROGRESS","Werbung [AD_ON] von [NUM_ADS]"],["AD_TIME","Werbeanzeige: [AD_TIME]"],["AUTO_QUALITY","Automatisch"],["BACK","Zurück"],["CAPTIONS","Untertitel"],["CAST","Streamen..."],["ENTER_LOOP_MODE","In Endlosschleife spielen"],["ENTER_PICTURE_IN_PICTURE","Bild-im-Bild-Modus aktivieren"],["EXIT_FULL_SCREEN","Vollbildmodus beenden"],["EXIT_LOOP_MODE","Endlosschleife stoppen"],["EXIT_PICTURE_IN_PICTURE","Bild-im-Bild-Modus beenden"],["FAST_FORWARD","Vorspulen"],["FULL_SCREEN","Vollbildmodus"],["LANGUAGE","Sprache"],["LIVE","Live"],["LOOP","Schleife"],["MORE_SETTINGS","Weitere Einstellungen"],["MULTIPLE_LANGUAGES","Mehrere Sprachen"],["MUTE","Stummschalten"],["NOT_APPLICABLE","Nicht zutreffend"],["OFF","Aus"],["ON","Ein"],["PAUSE","Pause"],["PICTURE_IN_PICTURE","Bild im Bild"],["PLAY","Wiedergabe"],["PLAYBACK_RATE","Geschwindigkeit"],["RESOLUTION","Auflösung"],["REWIND","Zurückspulen"],["SEEK","Suche"],["SKIP_AD","Überspringen"],["SKIP_TO_LIVE","Zum Live-Videostream wechseln"],["UNDETERMINED_LANGUAGE","Unbestimmt"],["UNMUTE","Stummschaltung aufheben"],["UNRECOGNIZED_LANGUAGE","Unbekannt"],["VOLUME","Lautstärke"]])),e.ba("en",new Map([["AD_DURATION","Ad duration"],["AD_PROGRESS","Ad [AD_ON] of [NUM_ADS]"],["AD_TIME","Ad: [AD_TIME]"],["AIRPLAY","AirPlay"],["AUTO_QUALITY","Auto"],["BACK","Back"],["CAPTIONS","Captions"],["CAST","Cast..."],["ENTER_LOOP_MODE","Loop the current video"],["ENTER_PICTURE_IN_PICTURE","Enter Picture-in-Picture"],["EXIT_FULL_SCREEN","Exit full screen"],["EXIT_LOOP_MODE","Stop looping the current video"],["EXIT_PICTURE_IN_PICTURE","Exit Picture-in-Picture"],["FAST_FORWARD","Fast-forward"],["FULL_SCREEN","Full screen"],["LANGUAGE","Language"],["LIVE","Live"],["LOOP","Loop"],["MORE_SETTINGS","More settings"],["MULTIPLE_LANGUAGES","Multiple languages"],["MUTE","Mute"],["NOT_APPLICABLE","Not applicable"],["OFF","Off"],["ON","On"],["PAUSE","Pause"],["PICTURE_IN_PICTURE","Picture-in-Picture"],["PLAY","Play"],["PLAYBACK_RATE","Playback speed"],["QUALITY","Quality"],["REPLAY","Replay"],["RESOLUTION","Resolution"],["REWIND","Rewind"],["SEEK","Seek"],["SKIP_AD","Skip Ad"],["SKIP_TO_LIVE","Skip ahead to live"],["STATISTICS","Statistics"],["SUBTITLE_FORCED","Forced"],["UNDETERMINED_LANGUAGE","Undetermined"],["UNMUTE","Unmute"],["UNRECOGNIZED_LANGUAGE","Unrecognized"],["VOLUME","Volume"]])),e.ba("en-GB",new Map([["AD_DURATION","Ad duration"],["AD_PROGRESS","Ad [AD_ON] of [NUM_ADS]"],["AD_TIME","Ad: [AD_TIME]"],["AUTO_QUALITY","Auto"],["BACK","Back"],["CAPTIONS","Captions"],["CAST","Cast..."],["ENTER_LOOP_MODE","Loop the current video"],["ENTER_PICTURE_IN_PICTURE","Enter picture-in-picture"],["EXIT_FULL_SCREEN","Exit full screen"],["EXIT_LOOP_MODE","Stop looping the current video"],["EXIT_PICTURE_IN_PICTURE","Exit picture-in-picture"],["FAST_FORWARD","Fast-forward"],["FULL_SCREEN","Full screen"],["LANGUAGE","Language"],["LIVE","Live"],["LOOP","Loop"],["MORE_SETTINGS","More settings"],["MULTIPLE_LANGUAGES","Multiple languages"],["MUTE","Mute"],["NOT_APPLICABLE","Not applicable"],["OFF","Off"],["ON","On"],["PAUSE","Pause"],["PICTURE_IN_PICTURE","Picture-in-picture"],["PLAY","Play"],["PLAYBACK_RATE","Playback speed"],["RESOLUTION","Resolution"],["REWIND","Rewind"],["SEEK","Seek"],["SKIP_AD","Skip ad"],["SKIP_TO_LIVE","Skip ahead to live"],["UNDETERMINED_LANGUAGE","Undetermined"],["UNMUTE","Unmute"],["UNRECOGNIZED_LANGUAGE","Unrecognised"],["VOLUME","volume"]])),e.ba("es",new Map([["AD_DURATION","Duración del anuncio"],["AD_PROGRESS","Anuncio [AD_ON] de [NUM_ADS]"],["AD_TIME","Anuncio: [AD_TIME]"],["AUTO_QUALITY","Automático"],["BACK","Atrás"],["CAPTIONS","Subtítulos"],["CAST","Enviar..."],["ENTER_LOOP_MODE","Reproducir en bucle el vídeo actual"],["ENTER_PICTURE_IN_PICTURE","Activar el modo imagen en imagen"],["EXIT_FULL_SCREEN","Salir del modo de pantalla completa"],["EXIT_LOOP_MODE","Dejar de reproducir en bucle el vídeo actual"],["EXIT_PICTURE_IN_PICTURE","Salir del modo imagen en imagen"],["FAST_FORWARD","Avanzar rápidamente"],["FULL_SCREEN","Pantalla completa"],["LANGUAGE","Idioma"],["LIVE","En directo"],["LOOP","Reproducir en bucle"],["MORE_SETTINGS","Más ajustes"],["MULTIPLE_LANGUAGES","Varios idiomas"],["MUTE","Silenciar"],["NOT_APPLICABLE","No aplicable"],["OFF","Desactivado"],["ON","Activado"],["PAUSE","Pausar"],["PICTURE_IN_PICTURE","Imagen en imagen"],["PLAY","Reproducir"],["PLAYBACK_RATE","Velocidad de reproducción"],["RESOLUTION","Resolución"],["REWIND","Rebobinar"],["SEEK","Buscar"],["SKIP_AD","Saltar anuncio"],["SKIP_TO_LIVE","Ir al vídeo en directo"],["SUBTITLE_FORCED","Forzado"],["UNDETERMINED_LANGUAGE","Sin especificar"],["UNMUTE","Activar sonido"],["UNRECOGNIZED_LANGUAGE","No reconocida"],["VOLUME","Volumen"]])),e.ba("es-419",new Map([["AD_DURATION","Duración del anuncio"],["AD_PROGRESS","Anuncio [AD_ON] de [NUM_ADS]"],["AD_TIME","Anuncio: [AD_TIME]"],["AUTO_QUALITY","Automático"],["BACK","Atrás"],["CAPTIONS","Subtítulos"],["CAST","Transmitir..."],["ENTER_LOOP_MODE","Repetir indefinidamente el video actual"],["ENTER_PICTURE_IN_PICTURE","Ingresar al modo de pantalla en pantalla"],["EXIT_FULL_SCREEN","Salir de pantalla completa"],["EXIT_LOOP_MODE","Detener la repetición indefinida del video actual"],["EXIT_PICTURE_IN_PICTURE","Salir del modo de pantalla en pantalla"],["FAST_FORWARD","Avanzar"],["FULL_SCREEN","Pantalla completa"],["LANGUAGE","Idioma"],["LIVE","En directo"],["LOOP","Repetir indefinidamente"],["MORE_SETTINGS","Más opciones de configuración"],["MULTIPLE_LANGUAGES","Varios idiomas"],["MUTE","Silenciar"],["NOT_APPLICABLE","No aplicable"],["OFF","Desactivado"],["ON","Activado"],["PAUSE","Detener"],["PICTURE_IN_PICTURE","Pantalla en pantalla"],["PLAY","Reproducir"],["PLAYBACK_RATE","Velocidad de reproducción"],["RESOLUTION","Resolución"],["REWIND","Retroceder"],["SEEK","Buscar"],["SKIP_AD","Omitir anuncio"],["SKIP_TO_LIVE","Adelantar hasta la transmisión en vivo"],["SUBTITLE_FORCED","Forzado"],["UNDETERMINED_LANGUAGE","Sin especificar"],["UNMUTE","Dejar de silenciar"],["UNRECOGNIZED_LANGUAGE","No reconocida"],["VOLUME","Volumen"]])),e.ba("fr",new Map([["AD_DURATION","Durée de l'annonce"],["AD_PROGRESS","Annonce [AD_ON] sur [NUM_ADS]"],["AD_TIME","Annonce : [AD_TIME]"],["AUTO_QUALITY","Automatique"],["BACK","Retour"],["CAPTIONS","Sous-titres"],["CAST","Caster…"],["ENTER_LOOP_MODE","Lire en boucle la vidéo en cours"],["ENTER_PICTURE_IN_PICTURE","Utiliser le mode Picture-in-Picture"],["EXIT_FULL_SCREEN","Quitter le mode plein écran"],["EXIT_LOOP_MODE","Arrêter la lecture en boucle de la vidéo en cours"],["EXIT_PICTURE_IN_PICTURE","Quitter le mode PIP (Picture-in-picture)"],["FAST_FORWARD","Avance rapide"],["FULL_SCREEN","Plein écran"],["LANGUAGE","Langue"],["LIVE","En direct"],["LOOP","Répéter"],["MORE_SETTINGS","Plus de paramètres"],["MULTIPLE_LANGUAGES","Plusieurs langues"],["MUTE","Couper le son"],["NOT_APPLICABLE","Non applicable"],["OFF","Désactivée"],["ON","Activée"],["PAUSE","Pause"],["PICTURE_IN_PICTURE","Picture-in-Picture"],["PLAY","Visionner"],["PLAYBACK_RATE","Vitesse de lecture"],["RESOLUTION","Résolution"],["REWIND","Retour arrière"],["SEEK","Chercher"],["SKIP_AD","Passer l'annonce"],["SKIP_TO_LIVE","Accéder à la partie la plus récente du direct"],["UNDETERMINED_LANGUAGE","Langue indéterminée"],["UNMUTE","Réactiver le son"],["UNRECOGNIZED_LANGUAGE","Non reconnu"],["VOLUME","Volume"]])),e.ba("it",new Map([["AD_DURATION","Durata dell'annuncio"],["AD_PROGRESS","Annuncio [AD_ON] di [NUM_ADS]"],["AD_TIME","Annuncio: [AD_TIME]"],["AUTO_QUALITY","Automatica"],["BACK","Indietro"],["CAPTIONS","Sottotitoli"],["CAST","Trasmetti..."],["ENTER_LOOP_MODE","Riproduci in loop il video corrente"],["ENTER_PICTURE_IN_PICTURE","Attiva Picture in picture"],["EXIT_FULL_SCREEN","Esci da schermo intero"],["EXIT_LOOP_MODE","Interrompi riproduzione in loop del video corrente"],["EXIT_PICTURE_IN_PICTURE","Esci da Picture in picture"],["FAST_FORWARD","Avanti veloce"],["FULL_SCREEN","Schermo intero"],["LANGUAGE","Lingua"],["LIVE","Dal vivo"],["LOOP","Riproduci in loop"],["MORE_SETTINGS","Altre impostazioni"],["MULTIPLE_LANGUAGES","Più lingue"],["MUTE","Disattiva audio"],["NOT_APPLICABLE","Non applicabile"],["OFF","Disattivo"],["ON","Attivo"],["PAUSE","Metti in pausa"],["PICTURE_IN_PICTURE","Picture in picture"],["PLAY","Riproduci"],["PLAYBACK_RATE","Velocità di riproduzione"],["RESOLUTION","Risoluzione"],["REWIND","Riavvolgi"],["SEEK","Cerca"],["SKIP_AD","Salta annuncio"],["SKIP_TO_LIVE","Passa alla trasmissione dal vivo"],["UNDETERMINED_LANGUAGE","Indeterminata"],["UNMUTE","Riattiva audio"],["UNRECOGNIZED_LANGUAGE","Non riconosciuto"],["VOLUME","Volume"]])),e.ba("ja",new Map([["AD_DURATION","広告再生時間"],["AD_PROGRESS","[AD_ON] 番目の広告（全 [NUM_ADS] 個）"],["AD_TIME","広告: [AD_TIME]"],["AUTO_QUALITY","自動"],["BACK","戻る"],["CAPTIONS","字幕"],["CAST","キャスト..."],["ENTER_LOOP_MODE","現在の動画をループ再生"],["ENTER_PICTURE_IN_PICTURE","ピクチャー イン ピクチャーを開始"],["EXIT_FULL_SCREEN","全画面表示を終了"],["EXIT_LOOP_MODE","現在の動画のループ再生を停止"],["EXIT_PICTURE_IN_PICTURE","ピクチャー イン ピクチャーを終了"],["FAST_FORWARD","早送り"],["FULL_SCREEN","全画面表示"],["LANGUAGE","言語"],["LIVE","ライブ"],["LOOP","ループ"],["MORE_SETTINGS","詳細設定"],["MULTIPLE_LANGUAGES","多言語"],["MUTE","ミュート"],["NOT_APPLICABLE","該当なし"],["OFF","オフ"],["ON","オン"],["PAUSE","一時停止"],["PICTURE_IN_PICTURE","ピクチャー イン ピクチャー"],["PLAY","再生"],["PLAYBACK_RATE","再生速度"],["RESOLUTION","解像度"],["REWIND","巻き戻し"],["SEEK","シーク再生"],["SKIP_AD","広告をスキップ"],["SKIP_TO_LIVE","ライブ配信までスキップ"],["UNDETERMINED_LANGUAGE","不明"],["UNMUTE","ミュートを解除"],["UNRECOGNIZED_LANGUAGE","不明"],["VOLUME","音量"]])),e.ba("ko",new Map([["AD_DURATION","광고 기간"],["AD_PROGRESS","광고 [AD_ON]/[NUM_ADS]"],["AD_TIME","광고: [AD_TIME]"],["AUTO_QUALITY","자동"],["BACK","뒤로"],["CAPTIONS","자막"],["CAST","전송..."],["ENTER_LOOP_MODE","현재 동영상 반복 재생"],["ENTER_PICTURE_IN_PICTURE","PIP 모드 시작"],["EXIT_FULL_SCREEN","전체화면 닫기"],["EXIT_LOOP_MODE","현재 동영상 반복 재생 중지"],["EXIT_PICTURE_IN_PICTURE","PIP 모드 종료"],["FAST_FORWARD","빨리 감기"],["FULL_SCREEN","전체화면"],["LANGUAGE","언어"],["LIVE","실시간"],["LOOP","반복 재생"],["MORE_SETTINGS","설정 더보기"],["MULTIPLE_LANGUAGES","여러 언어"],["MUTE","음소거"],["NOT_APPLICABLE","해당 사항 없음"],["OFF","사용 안함"],["ON","사용"],["PAUSE","일시중지"],["PICTURE_IN_PICTURE","PIP 모드"],["PLAY","재생"],["PLAYBACK_RATE","재생 속도"],["RESOLUTION","해상도"],["REWIND","되감기"],["SEEK","찾기"],["SKIP_AD","광고 건너뛰기"],["SKIP_TO_LIVE","라이브 동영상으로 건너뛰기"],["UNDETERMINED_LANGUAGE","미정"],["UNMUTE","음소거 해제"],["UNRECOGNIZED_LANGUAGE","알 수 없음"],["VOLUME","볼륨"]])),e.ba("nl",new Map([["AD_DURATION","Advertentieduur"],["AD_PROGRESS","Advertentie [AD_ON] van [NUM_ADS]"],["AD_TIME","Advertentie: [AD_TIME]"],["AUTO_QUALITY","Automatisch"],["BACK","Terug"],["CAPTIONS","Ondertiteling"],["CAST","Casten..."],["ENTER_LOOP_MODE","De huidige video lussen"],["ENTER_PICTURE_IN_PICTURE","Scherm-in-scherm openen"],["EXIT_FULL_SCREEN","Volledig scherm sluiten"],["EXIT_LOOP_MODE","De huidige video niet meer lussen"],["EXIT_PICTURE_IN_PICTURE","Scherm-in-scherm afsluiten"],["FAST_FORWARD","Vooruitspoelen"],["FULL_SCREEN","Volledig scherm"],["LANGUAGE","Taal"],["LIVE","Live"],["LOOP","Lussen"],["MORE_SETTINGS","Meer instellingen"],["MULTIPLE_LANGUAGES","Meerdere talen"],["MUTE","Dempen"],["NOT_APPLICABLE","Niet van toepassing"],["OFF","Uit"],["ON","Aan"],["PAUSE","Onderbreken"],["PICTURE_IN_PICTURE","Scherm-in-scherm"],["PLAY","Afspelen"],["PLAYBACK_RATE","Afspeelsnelheid"],["RESOLUTION","Resolutie"],["REWIND","Terugspoelen"],["SEEK","Zoeken"],["SKIP_AD","Advertentie overslaan"],["SKIP_TO_LIVE","Doorgaan naar live"],["UNDETERMINED_LANGUAGE","Onbepaald"],["UNMUTE","Dempen opheffen"],["UNRECOGNIZED_LANGUAGE","Onbekend"],["VOLUME","Volume"]])),e.ba("pl",new Map([["AD_DURATION","Czas trwania reklamy"],["AD_PROGRESS","Reklama [AD_ON] z [NUM_ADS]"],["AD_TIME","Reklama: [AD_TIME]"],["AUTO_QUALITY","Automatycznie"],["BACK","Wstecz"],["CAPTIONS","Napisy"],["CAST","Przesyłaj..."],["ENTER_LOOP_MODE","Odtwarzaj bieżący film w pętli"],["ENTER_PICTURE_IN_PICTURE","Włącz tryb obrazu w obrazie"],["EXIT_FULL_SCREEN","Zamknij pełny ekran"],["EXIT_LOOP_MODE","Wyłącz odtwarzanie bieżącego filmu w pętli"],["EXIT_PICTURE_IN_PICTURE","Wyłącz tryb obrazu w obrazie"],["FAST_FORWARD","Przewiń do przodu"],["FULL_SCREEN","Pełny ekran"],["LANGUAGE","Język"],["LIVE","Na żywo"],["LOOP","Odtwarzaj w pętli"],["MORE_SETTINGS","Więcej ustawień"],["MULTIPLE_LANGUAGES","Wiele języków"],["MUTE","Wycisz"],["NOT_APPLICABLE","Nie dotyczy"],["OFF","Wyłączone"],["ON","Włączone"],["PAUSE","Wstrzymaj"],["PICTURE_IN_PICTURE","Obraz w obrazie"],["PLAY","Odtwórz"],["PLAYBACK_RATE","Szybkość odtwarzania"],["RESOLUTION","Rozdzielczość"],["REWIND","Przewiń do tyłu"],["SEEK","Szukaj"],["SKIP_AD","Pomiń reklamę"],["SKIP_TO_LIVE","Przejdź do transmisji na żywo"],["UNDETERMINED_LANGUAGE","Nie określono"],["UNMUTE","Wyłącz wyciszenie"],["UNRECOGNIZED_LANGUAGE","Nierozpoznany"],["VOLUME","Głośność"]])),e.ba("pt-BR",new Map([["AD_DURATION","Duração do anúncio"],["AD_PROGRESS","Anúncio [AD_ON] de [NUM_ADS]"],["AD_TIME","Anúncio: [AD_TIME]"],["AUTO_QUALITY","Automática"],["BACK","Voltar"],["CAPTIONS","Legendas"],["CAST","Transmitir..."],["ENTER_LOOP_MODE","Repetir o vídeo atual"],["ENTER_PICTURE_IN_PICTURE","Entrar no modo picture-in-picture"],["EXIT_FULL_SCREEN","Sair do modo tela cheia"],["EXIT_LOOP_MODE","Parar repetição do vídeo atual"],["EXIT_PICTURE_IN_PICTURE","Sair de picture-in-picture"],["FAST_FORWARD","Avançar"],["FULL_SCREEN","Tela cheia"],["LANGUAGE","Idioma"],["LIVE","Ao vivo"],["LOOP","Repetir"],["MORE_SETTINGS","Mais definições"],["MULTIPLE_LANGUAGES","Vários idiomas"],["MUTE","Desativar som"],["NOT_APPLICABLE","Não relevante"],["OFF","Desativado"],["ON","Ativado"],["PAUSE","Pausar"],["PICTURE_IN_PICTURE","Picture-in-picture"],["PLAY","Reproduzir"],["PLAYBACK_RATE","Velocidade da reprodução"],["RESOLUTION","Resolução"],["REWIND","Retroceder"],["SEEK","Procurar"],["SKIP_AD","Pular anúncio"],["SKIP_TO_LIVE","Pular para transmissão ao vivo"],["UNDETERMINED_LANGUAGE","Indeterminado"],["UNMUTE","Ativar som"],["UNRECOGNIZED_LANGUAGE","Não reconhecido"],["VOLUME","Volume"]])),e.ba("ru",new Map([["AD_DURATION","Продолжительность рекламы"],["AD_PROGRESS","Реклама [AD_ON] из [NUM_ADS]"],["AD_TIME","Реклама: [AD_TIME]"],["AUTO_QUALITY","Авто"],["BACK","Назад"],["CAPTIONS","Субтитры"],["CAST","Транслировать..."],["ENTER_LOOP_MODE","Зациклить текущее видео"],["ENTER_PICTURE_IN_PICTURE",'Перейти в режим "Картинка в картинке"'],["EXIT_FULL_SCREEN","Обычный режим"],["EXIT_LOOP_MODE","Отменить зацикливание текущего видео"],["EXIT_PICTURE_IN_PICTURE",'Выйти из режима "Картинка в картинке"'],["FAST_FORWARD","Перемотка вперед"],["FULL_SCREEN","Полноэкранный режим"],["LANGUAGE","Язык"],["LIVE","Прямой эфир"],["LOOP","Зациклить"],["MORE_SETTINGS","Дополнительные настройки"],["MULTIPLE_LANGUAGES","Несколько языков"],["MUTE","Отключить звук"],["NOT_APPLICABLE","Неприменимо"],["OFF","Выкл."],["ON","Вкл."],["PAUSE","Пауза"],["PICTURE_IN_PICTURE","Картинка в картинке"],["PLAY","Воспроизвести"],["PLAYBACK_RATE","Скорость воспроизведения"],["RESOLUTION","Разрешение"],["REWIND","Перемотать назад"],["SEEK","Перемотка"],["SKIP_AD","Пропустить"],["SKIP_TO_LIVE","Пропустить и перейти к прямой трансляции"],["UNDETERMINED_LANGUAGE","Не указано"],["UNMUTE","Включить звук"],["UNRECOGNIZED_LANGUAGE","Не распознано"],["VOLUME","Громкость"]])),e.ba("th",new Map([["AD_DURATION","ระยะเวลาโฆษณา"],["AD_PROGRESS","โฆษณา [AD_ON] จาก [NUM_ADS] รายการ"],["AD_TIME","โฆษณา: [AD_TIME]"],["AUTO_QUALITY","อัตโนมัติ"],["BACK","กลับ"],["CAPTIONS","คำบรรยาย"],["CAST","แคสต์..."],["ENTER_LOOP_MODE","วนซ้ำวิดีโอปัจจุบัน"],["ENTER_PICTURE_IN_PICTURE","เข้าสู่การแสดงภาพซ้อนภาพ"],["EXIT_FULL_SCREEN","ออกจากการแสดงแบบเต็มหน้าจอ"],["EXIT_LOOP_MODE","หยุดวนซ้ำวิดีโอปัจจุบัน"],["EXIT_PICTURE_IN_PICTURE","ออกจากการแสดงภาพซ้อนภาพ"],["FAST_FORWARD","กรอไปข้างหน้า"],["FULL_SCREEN","เต็มหน้าจอ"],["LANGUAGE","ภาษา"],["LIVE","สด"],["LOOP","ลูป"],["MORE_SETTINGS","การตั้งค่าเพิ่มเติม"],["MULTIPLE_LANGUAGES","หลายภาษา"],["MUTE","ปิดเสียง"],["NOT_APPLICABLE","ไม่เกี่ยวข้อง"],["OFF","ปิด"],["ON","เปิด"],["PAUSE","หยุดชั่วคราว"],["PICTURE_IN_PICTURE","การแสดงภาพซ้อนภาพ"],["PLAY","เล่น"],["PLAYBACK_RATE","ความเร็วในการเล่น"],["RESOLUTION","ความละเอียด"],["REWIND","กรอกลับ"],["SEEK","ค้นหา"],["SKIP_AD","ข้ามโฆษณา"],["SKIP_TO_LIVE","ข้ามไปที่การถ่ายทอดสด"],["UNDETERMINED_LANGUAGE","ไม่กำหนด"],["UNMUTE","เปิดเสียง"],["UNRECOGNIZED_LANGUAGE","ที่ไม่รู้จัก"],["VOLUME","ระดับเสียง"]])),e.ba("tr",new Map([["AD_DURATION","Reklam süresi"],["AD_PROGRESS","[AD_ON]/[NUM_ADS] reklam"],["AD_TIME","Reklam: [AD_TIME]"],["AUTO_QUALITY","Otomatik"],["BACK","Geri"],["CAPTIONS","Altyazılar"],["CAST","Yayınla..."],["ENTER_LOOP_MODE","Mevcut videoyu döngüye al"],["ENTER_PICTURE_IN_PICTURE","Pencere içinde Pencere moduna gir"],["EXIT_FULL_SCREEN","Tam ekrandan çık"],["EXIT_LOOP_MODE","Mevcut videonun döngüsünü durdur"],["EXIT_PICTURE_IN_PICTURE","Pencere İçinde Pencereden Çık"],["FAST_FORWARD","İleri sar"],["FULL_SCREEN","Tam ekran"],["LANGUAGE","Dil"],["LIVE","Canlı"],["LOOP","Döngü"],["MORE_SETTINGS","Daha fazla ayar"],["MULTIPLE_LANGUAGES","Birden çok dil"],["MUTE","Sesi kapat"],["NOT_APPLICABLE","Geçerli değil"],["OFF","Kapalı"],["ON","Açık"],["PAUSE","Duraklat"],["PICTURE_IN_PICTURE","Pencere İçinde Pencere"],["PLAY","Oynat"],["PLAYBACK_RATE","Çalma hızı"],["RESOLUTION","Çözünürlük"],["REWIND","Geri sar"],["SEEK","Ara"],["SKIP_AD","Reklamı Atla"],["SKIP_TO_LIVE","Canlı yayına atla"],["UNDETERMINED_LANGUAGE","Belirsiz"],["UNMUTE","Sesi aç"],["UNRECOGNIZED_LANGUAGE","Tanınmayan"],["VOLUME","Ses"]])),e.ba("zh",new Map([["AD_DURATION","广告持续时间"],["AD_PROGRESS","广告 [AD_ON]/[NUM_ADS]"],["AD_TIME","广告：[AD_TIME]"],["AUTO_QUALITY","自动"],["BACK","返回"],["CAPTIONS","字幕"],["CAST","投射…"],["ENTER_LOOP_MODE","循环播放当前视频"],["ENTER_PICTURE_IN_PICTURE","进入“画中画”模式"],["EXIT_FULL_SCREEN","退出全屏模式"],["EXIT_LOOP_MODE","停止循环播放当前视频"],["EXIT_PICTURE_IN_PICTURE","退出“画中画”模式"],["FAST_FORWARD","快进"],["FULL_SCREEN","全屏"],["LANGUAGE","语言"],["LIVE","直播"],["LOOP","循环播放"],["MORE_SETTINGS","更多设置"],["MULTIPLE_LANGUAGES","多种语言"],["MUTE","静音"],["NOT_APPLICABLE","不适用"],["OFF","关闭"],["ON","开启"],["PAUSE","暂停"],["PICTURE_IN_PICTURE","画中画"],["PLAY","播放"],["PLAYBACK_RATE","播放速度"],["RESOLUTION","分辨率"],["REWIND","快退"],["SEEK","进度"],["SKIP_AD","跳过广告"],["SKIP_TO_LIVE","跳至当前直播"],["UNDETERMINED_LANGUAGE","未确定"],["UNMUTE","取消静音"],["UNRECOGNIZED_LANGUAGE","无法识别"],["VOLUME","音量"]])),e.ba("zh-TW",new Map([["AD_DURATION","廣告長度"],["AD_PROGRESS","廣告 [AD_ON]/[NUM_ADS]"],["AD_TIME","廣告：[AD_TIME]"],["AUTO_QUALITY","自動"],["BACK","返回"],["CAPTIONS","字幕"],["CAST","投放..."],["ENTER_LOOP_MODE","循環播放目前的影片"],["ENTER_PICTURE_IN_PICTURE","進入子母畫面"],["EXIT_FULL_SCREEN","退出全螢幕模式"],["EXIT_LOOP_MODE","停止循環播放目前的影片"],["EXIT_PICTURE_IN_PICTURE","離開子母畫面"],["FAST_FORWARD","快轉"],["FULL_SCREEN","全螢幕"],["LANGUAGE","語言"],["LIVE","直播"],["LOOP","循環播放"],["MORE_SETTINGS","顯示更多設定"],["MULTIPLE_LANGUAGES","多種語言"],["MUTE","靜音"],["NOT_APPLICABLE","不適用"],["OFF","關閉"],["ON","開啟"],["PAUSE","暫停"],["PICTURE_IN_PICTURE","子母畫面"],["PLAY","播放"],["PLAYBACK_RATE","播放速度"],["RESOLUTION","解析度"],["REWIND","倒轉"],["SEEK","搜尋"],["SKIP_AD","略過廣告"],["SKIP_TO_LIVE","跳至当前直播"],["UNDETERMINED_LANGUAGE","不明"],["UNMUTE","取消靜音"],["UNRECOGNIZED_LANGUAGE","無法辨識"],["VOLUME","音量"]])),e.xf(navigator.languages||[]),e}pe("shaka.ui.Controls",Be),Be.prototype.isOpaque=Be.prototype.Mb,Be.prototype.hideAdUI=Be.prototype.Kf,Be.prototype.showAdUI=Be.prototype.cg,Be.prototype.toggleFullScreen=Be.prototype.Xe,Be.prototype.isFullScreenEnabled=Be.prototype.ic,Be.prototype.isFullScreenSupported=Be.prototype.xd,Be.prototype.hideSettingsMenus=Be.prototype.fc,Be.prototype.anySettingsMenusAreOpen=Be.prototype.md,Be.prototype.setLastTouchEventTime=Be.prototype.Yf,Be.prototype.getDisplayTime=Be.prototype.Hf,Be.prototype.isCastAllowed=Be.prototype.fh,Be.prototype.setSeeking=Be.prototype.Qe,Be.prototype.isSeeking=Be.prototype.hh,Be.prototype.getConfig=Be.prototype.Eg,Be.prototype.getClientSideAdContainer=Be.prototype.Dg,Be.prototype.getServerSideAdContainer=Be.prototype.Vg,Be.prototype.getControlsContainer=Be.prototype.Gg,Be.prototype.getLocalPlayer=Be.prototype.Lg,Be.prototype.getPlayer=Be.prototype.cc,Be.prototype.getLocalVideo=Be.prototype.Mg,Be.prototype.getVideo=Be.prototype.zb,Be.prototype.getVideoContainer=Be.prototype.bh,Be.prototype.getLocalization=Be.prototype.Ng,Be.prototype.getCastProxy=Be.prototype.Bg,Be.prototype.getAd=Be.prototype.getAd,Be.prototype.setEnabledNativeControls=Be.prototype.Xf,Be.prototype.setEnabledShakaControls=Be.prototype.Me,Be.prototype.configure=Be.prototype.configure,Be.prototype.loadComplete=Be.prototype.ih,Be.prototype.allowCast=Be.prototype.og,Be.registerSeekBar=function(e){ZI=e},Be.registerElement=Ti,Be.prototype.destroy=Be.prototype.destroy;var aS=new Map,ZI=new fo;function Rv(e,n){B.call(this,e,n);var r=this;this.l=this.controls.i,this.j=this.controls.g,this.i=[],this.g=bn(),this.g.classList.add("shaka-overflow-menu-button"),this.g.classList.add("shaka-no-propagation"),this.g.classList.add("material-icons-round"),this.g.classList.add("shaka-tooltip"),this.g.textContent="more_vert",this.parent.appendChild(this.g),this.h=We("div"),this.h.classList.add("shaka-overflow-menu"),this.h.classList.add("shaka-no-propagation"),this.h.classList.add("shaka-show-controls-on-mouse-over"),this.h.classList.add("shaka-hidden"),this.j.appendChild(this.h),O4(this),this.eventManager.o(this.localization,"locale-updated",function(){lS(r)}),this.eventManager.o(this.localization,"locale-changed",function(){lS(r)}),this.eventManager.o(this.adManager,"ad-started",function(){r.ad&&r.ad.isLinear()&&de(r.g,!1)}),this.eventManager.o(this.adManager,"ad-stopped",function(){de(r.g,!0)}),this.eventManager.o(this.controls,"submenuopen",function(){de(r.h,!1)}),this.eventManager.o(this.h,"touchstart",function(s){r.controls.Yf(Date.now()),s.stopPropagation()}),this.eventManager.o(this.g,"click",function(){U4(r)}),lS(this),this.ad&&this.ad.isLinear()&&de(this.g,!1)}Te(Rv,B),Rv.prototype.release=function(){this.j=null;for(var e=A(this.i),n=e.next();!n.done;n=e.next())n.value.release();this.i=[],B.prototype.release.call(this)};function Js(e,n){cS.set(e,n)}function O4(e){for(var n=A(e.l.overflowMenuButtons),r=n.next();!r.done;r=n.next())r=r.value,cS.get(r)?(r=cS.get(r),e.i.push(r.create(e.h,e.controls))):ze("Unrecognized overflow menu element requested:",r)}function U4(e){if(e.controls.md())e.controls.fc();else{de(e.h,!0),Ts(e.controls);var n=function(r){return r.classList.contains("shaka-hidden")==0};xa(e.h.childNodes,n)&&Es(e.h.childNodes,n)[0].focus()}}function lS(e){e.g.ariaLabel=e.localization.resolve("MORE_SETTINGS")}pe("shaka.ui.OverflowMenu",Rv),Rv.registerElement=Js;function JI(){}JI.prototype.create=function(e,n){return new Rv(e,n)},Ti("overflow_menu",new JI);var cS=new Map;function dS(e,n){B.call(this,e,n);var r=this;this.g=bn(),this.g.classList.add("shaka-airplay-button"),this.g.classList.add("shaka-tooltip"),this.g.ariaPressed="false",this.h=We("i"),this.h.classList.add("material-icons-round"),this.h.textContent="airplay",this.g.appendChild(this.h),S.WebKitPlaybackTargetAvailabilityEvent||this.g.classList.add("shaka-hidden"),e=We("label"),e.classList.add("shaka-overflow-button-label"),e.classList.add("shaka-overflow-menu-only"),this.j=We("span"),e.appendChild(this.j),this.i=We("span"),this.i.classList.add("shaka-current-selection-span"),e.appendChild(this.i),this.g.appendChild(e),this.parent.appendChild(this.g),hS(this),e2(this),this.eventManager.o(this.localization,"locale-updated",function(){hS(r)}),this.eventManager.o(this.localization,"locale-changed",function(){hS(r)}),this.eventManager.o(this.g,"click",function(){r.controls.zb().webkitShowPlaybackTargetPicker()}),e=this.controls.zb(),this.eventManager.o(e,"webkitplaybacktargetavailabilitychanged",function(s){var a=r.player.If()==dr;de(r.g,s.availability=="available"&&a)}),this.eventManager.o(e,"webkitcurrentplaybacktargetiswirelesschanged",function(){e2(r)})}Te(dS,B);function e2(e){var n=e.controls.zb();e.g.ariaPressed=n&&n.webkitCurrentPlaybackTargetIsWireless?"true":"false"}function hS(e){e.g.ariaLabel=e.localization.resolve("AIRPLAY"),e.j.textContent=e.localization.resolve("AIRPLAY")}pe("shaka.ui.AirPlayButton",dS);function fS(){}fS.prototype.create=function(e,n){return new dS(e,n)},Js("airplay",new fS),Ti("airplay",new fS);function Li(e,n,r){this.i=e,this.h=WT(this),n.dataset.shakaPlayerContainer="",n.ui=this,this.pe()&&n.classList.add("shaka-mobile"),this.g=new Be(e,n,r,this.h),this.configure({}),r.controls||e.Te(n),n.ui=this,r.ui=this}v=Li.prototype,v.destroy=function(){var e=this;return j(function(n){if(n.g==1)return e.g?k(n,e.g.destroy(),2):n.D(2);if(n.g!=4)return e.g=null,e.i?k(n,e.i.destroy(),4):n.D(4);e.i=null,le(n)})},v.pe=function(){return/(?:iPhone|iPad|iPod|Android)/.test(navigator.userAgent)?!0:pu()&&1<navigator.maxTouchPoints},v.getConfiguration=function(){var e=WT(this);return kc(e,this.h,WT(this),{},""),e},v.configure=function(e,n){arguments.length==2&&typeof e=="string"&&(e=zu(e,n)),kc(this.h,e,WT(this),{},""),this.h.castReceiverAppId&&!this.h.overflowMenuButtons.includes("cast")&&this.h.overflowMenuButtons.push("cast"),this.g.configure(this.h),this.g.dispatchEvent(new Fe("uiupdated"))},v.Fg=function(){return this.g},v.Kh=function(e){this.g.Me(e)};function WT(e){var n={controlPanelElements:"play_pause time_and_duration spacer mute volume fullscreen overflow_menu".split(" "),overflowMenuButtons:"captions quality language picture_in_picture cast playback_rate".split(" "),statisticsList:"width height corruptedFrames decodedFrames droppedFrames drmTimeSeconds licenseTime liveLatency loadLatency bufferingTime manifestTimeSeconds estimatedBandwidth streamBandwidth maxSegmentDuration pauseTime playTime completionPercent".split(" "),contextMenuElements:["loop","picture_in_picture","statistics"],playbackRates:[.5,.75,1,1.25,1.5,1.75,2],fastForwardRates:[2,4,8,1],rewindRates:[-1,-2,-4,-8],addSeekBar:!0,addBigPlayButton:!1,customContextMenu:!1,castReceiverAppId:"",castAndroidReceiverCompatible:!1,clearBufferOnQualityChange:!0,showUnbufferedStart:!1,seekBarColors:{base:"rgba(255, 255, 255, 0.3)",buffered:"rgba(255, 255, 255, 0.54)",played:"rgb(255, 255, 255)",adBreaks:"rgb(255, 204, 0)"},volumeBarColors:{base:"rgba(255, 255, 255, 0.54)",level:"rgb(255, 255, 255)"},trackLabelFormat:gS,fadeDelay:0,doubleClickForFullscreen:!0,singleClickForPlayAndPause:!0,enableKeyboardPlaybackControls:!0,enableFullscreenOnRotation:!0,forceLandscapeOnFullscreen:!0,enableTooltips:!1,keyboardSeekDistance:5};return S.WebKitPlaybackTargetAvailabilityEvent&&n.overflowMenuButtons.push("airplay"),e.pe()&&(n.addBigPlayButton=!0,n.controlPanelElements=n.controlPanelElements.filter(function(r){return r!="play_pause"&&r!="volume"})),n}function t2(){var e,n,r,s,a,d,f,g,T,I,M,L,N,O,z,$,G,W,ae,J,fe;return j(function(xe){switch(xe.g){case 1:if(K0(),!m1())return pS("shaka-ui-load-failed",i2),xe.return();if(e=document.querySelectorAll("[data-shaka-player-container]"),n=document.querySelectorAll("[data-shaka-player]"),r=document.querySelectorAll("[data-shaka-player-canvas]"),!n.length&&!e.length){xe.D(2);break}if(n.length&&!e.length){for(s=A(n),a=s.next();!a.done;a=s.next())if(d=a.value,!d.ui){for(f=document.createElement("div"),g=d.parentElement,g.replaceChild(f,d),f.appendChild(d),T=null,I=A(r),M=I.next();!M.done;M=I.next())if(L=M.value,L.parentElement==f){T=L;break}T||(T=document.createElement("canvas"),T.classList.add("shaka-canvas-container"),f.appendChild(T)),n2(f,d,T)}xe.D(2);break}N=A(e),O=N.next();case 4:if(O.done){xe.D(2);break}if(z=O.value,z.ui){xe.D(5);break}for($=null,G=A(n),a=G.next();!a.done;a=G.next())if(W=a.value,W.parentElement==z){$=W;break}for($||($=document.createElement("video"),$.setAttribute("playsinline",""),z.appendChild($)),ae=null,J=A(r),M=J.next();!M.done;M=J.next())if(fe=M.value,fe.parentElement==z){ae=fe;break}return ae||(ae=document.createElement("canvas"),ae.classList.add("shaka-canvas-container"),z.appendChild(ae)),ye(xe,7),k(xe,n2(z,$,ae),9);case 9:_e(xe,5);break;case 7:return we(xe),pS("shaka-ui-load-failed",r2),xe.return();case 5:O=N.next(),xe.D(4);break;case 2:pS("shaka-ui-loaded"),le(xe)}})}function pS(e,n){var r=null;n!=null&&(r={reasonCode:n}),e=new CustomEvent(e,{detail:r}),document.dispatchEvent(e)}function n2(e,n,r){var s,a,d,f,g,T,I,M,L;return j(function(N){switch(N.g){case 1:s=new Ce(n),a=new Li(s,e,n),s.qf(r),d="",f=!1,e.dataset&&e.dataset.shakaPlayerCastReceiverId?(d=e.dataset.shakaPlayerCastReceiverId,f=e.dataset.shakaPlayerCastAndroidReceiverCompatible==="true"):n.dataset&&n.dataset.shakaPlayerCastReceiverId&&(d=n.dataset.shakaPlayerCastReceiverId,f=n.dataset.shakaPlayerCastAndroidReceiverCompatible==="true"),d.length&&a.configure({castReceiverAppId:d,castAndroidReceiverCompatible:f}),n.controls&&a.g.Xf(!0),(g=n.getAttribute("src"))&&(T=document.createElement("source"),T.setAttribute("src",g),n.appendChild(T),n.removeAttribute("src")),I=A(n.querySelectorAll("source")),M=I.next();case 2:if(M.done){N.D(0);break}return L=M.value,ye(N,5),k(N,a.g.cc().load(L.getAttribute("src")),7);case 7:N.D(0);break;case 5:we(N);case 3:M=I.next(),N.D(2)}})}pe("shaka.ui.Overlay",Li),Li.prototype.setEnabled=Li.prototype.Kh,Li.prototype.getControls=Li.prototype.Fg,Li.prototype.configure=Li.prototype.configure,Li.prototype.getConfiguration=Li.prototype.getConfiguration,Li.prototype.isMobile=Li.prototype.pe,Li.prototype.destroy=Li.prototype.destroy;var gS=0;Li.TrackLabelFormat={LANGUAGE:gS,ROLE:1,LANGUAGE_ROLE:2,LABEL:3};var i2=0,r2=1;Li.FailReasonCode={NO_BROWSER_SUPPORT:i2,PLAYER_FAILED_TO_LOAD:r2},document.readyState=="complete"?j(function(e){if(e.g==1)return k(e,Promise.resolve(),2);t2(),le(e)}):S.addEventListener("load",t2);function o2(e,n,r,s,a,d,f){function g(J,fe){return J+": "+fe}function T(J){return J.type=="variant"?J.audioRoles?J.audioRoles.join(", "):void 0:J.roles.join(", ")}var I=e.find(function(J){return J.active==1}),M=X(n);ju(n),n.appendChild(M),M=new Map;for(var L=A(e),N=L.next();!N.done;N=L.next())N=N.value,M.has(N.language)||M.set(N.language,new Set),M.get(N.language).add(T(N));for(M=new Set,I=I?g(I.language,T(I)):"",L={},e=A(e),N=e.next();!N.done;L={Va:L.Va},N=e.next()){L.Va=N.value,N=L.Va.language;var O=L.Va.forced,z=d.resolve(Sa.ig),$=T(L.Va),G=g(N,$);if(!M.has(G)){M.add(G);var W=bn();W.addEventListener("click",function(J){return function(){r(J.Va)}}(L));var ae=We("span");switch(W.appendChild(ae),ae.textContent=j4(N,d),f){case gS:O&&(ae.textContent+=" ("+z+")");break;case 1:$?ae.textContent=$:(ze("Track #"+L.Va.id+" does not have a role, but the UI is configured to only show role."),ae.textContent="?"),O&&(ae.textContent+=" ("+z+")");break;case 2:$&&(ae.textContent+=": "+$),O&&(ae.textContent+=" ("+z+")");break;case 3:L.Va.label?ae.textContent=L.Va.label:(ze("Track #"+L.Va.id+" does not have a label, but the UI is configured to only show labels."),ae.textContent="?")}s&&G==I&&(W.appendChild(ce()),ae.classList.add("shaka-chosen-item"),W.ariaSelected="true",a.textContent=ae.textContent),n.appendChild(W)}}}function j4(e,n){if(!e&&!n)return"";switch(e){case"mul":return n.resolve("MULTIPLE_LANGUAGES");case"und":return n.resolve("UNDETERMINED_LANGUAGE");case"zxx":return n.resolve("NOT_APPLICABLE")}var r=yo(e);return e in b?b[e].u:r in b?b[r].u+" ("+e+")":n.resolve("UNRECOGNIZED_LANGUAGE")+" ("+e+")"}function eu(e,n,r){B.call(this,e,n);var s=this;B4(this,r),F4(this),z4(this),this.eventManager.o(this.button,"click",function(){s.menu.classList.contains("shaka-hidden")?(s.controls.dispatchEvent(new Fe("submenuopen")),de(s.menu,!0),ne(s.menu)):de(s.menu,!1)})}Te(eu,B);function B4(e,n){e.button=bn(),e.button.classList.add("shaka-overflow-button"),e.icon=We("i"),e.icon.classList.add("material-icons-round"),e.icon.textContent=n,e.button.appendChild(e.icon),n=We("label"),n.classList.add("shaka-overflow-button-label"),n.classList.add("shaka-overflow-menu-only"),e.nameSpan=We("span"),n.appendChild(e.nameSpan),e.currentSelection=We("span"),e.currentSelection.classList.add("shaka-current-selection-span"),n.appendChild(e.currentSelection),e.button.appendChild(n),e.parent.appendChild(e.button)}function F4(e){e.menu=We("div"),e.menu.classList.add("shaka-no-propagation"),e.menu.classList.add("shaka-show-controls-on-mouse-over"),e.menu.classList.add("shaka-settings-menu"),e.menu.classList.add("shaka-hidden"),e.backButton=bn(),e.backButton.classList.add("shaka-back-to-overflow-button"),e.menu.appendChild(e.backButton),e.eventManager.o(e.backButton,"click",function(){e.controls.fc()});var n=We("i");n.classList.add("material-icons-round"),n.textContent="close",e.backButton.appendChild(n),e.backSpan=We("span"),e.backButton.appendChild(e.backSpan),e.controls.g.appendChild(e.menu)}function z4(e){e.parent.classList.contains("shaka-overflow-menu")&&(e.backButton.firstChild.textContent="arrow_back",e.eventManager.o(e.backButton,"click",function(){function n(r){return r.classList.contains("shaka-hidden")==0}de(e.parent,!0),xa(e.parent.childNodes,n)&&Es(e.parent.childNodes,n)[0].focus(),Ts(e.controls)}))}pe("shaka.ui.SettingsMenu",eu);function mS(e,n){eu.call(this,e,n,"language");var r=this;this.button.classList.add("shaka-language-button"),this.button.classList.add("shaka-tooltip-status"),this.menu.classList.add("shaka-audio-languages"),this.eventManager.o(this.localization,"locale-updated",function(){yS(r)}),this.eventManager.o(this.localization,"locale-changed",function(){yS(r)}),this.eventManager.o(this.player,"trackschanged",function(){var s=0<r.player.Qa().length;de(r.button,s),vS(r)}),this.eventManager.o(this.player,"variantchanged",function(){vS(r)}),yS(this),vS(this)}Te(mS,eu);function vS(e){var n=e.player.Qa();o2(n,e.menu,function(r){e.player.Md(r.language,r.roles[0])},!0,e.currentSelection,e.localization,e.controls.i.trackLabelFormat),ne(e.menu),e.controls.dispatchEvent(new Fe("languageselectionupdated")),e.button.setAttribute("shaka-status",e.currentSelection.innerText)}function yS(e){e.backButton.ariaLabel=e.localization.resolve("BACK"),e.button.ariaLabel=e.localization.resolve("LANGUAGE"),e.nameSpan.textContent=e.localization.resolve("LANGUAGE"),e.backSpan.textContent=e.localization.resolve("LANGUAGE")}pe("shaka.ui.AudioLanguageSelection",mS);function xS(){}xS.prototype.create=function(e,n){return new mS(e,n)},Js("language",new xS),Ti("language",new xS);function TS(e,n){B.call(this,e,n);var r=this;this.h=this.controls.C,this.g=bn(),this.g.classList.add("shaka-cast-button"),this.g.classList.add("shaka-tooltip"),this.g.ariaPressed="false",this.i=We("i"),this.i.classList.add("material-icons-round"),this.i.textContent="cast",this.g.appendChild(this.i),e=We("label"),e.classList.add("shaka-overflow-button-label"),e.classList.add("shaka-overflow-menu-only"),this.l=We("span"),e.appendChild(this.l),this.j=We("span"),this.j.classList.add("shaka-current-selection-span"),e.appendChild(this.j),this.g.appendChild(e),this.parent.appendChild(this.g),wS(this),s2(this),this.eventManager.o(this.localization,"locale-updated",function(){wS(r)}),this.eventManager.o(this.localization,"locale-changed",function(){wS(r)}),this.eventManager.o(this.g,"click",function(){G4(r)}),this.eventManager.o(this.controls,"caststatuschanged",function(){s2(r)})}Te(TS,B);function G4(e){var n;j(function(r){if(r.g==1)return e.h.na()?(e.h.dg(),r.D(0)):(ye(r,3),e.g.disabled=!0,k(r,e.h.cast(),5));if(r.g!=3)return e.g.disabled=!1,_e(r,0);n=we(r),e.g.disabled=!1,n.code!=8004&&e.controls.dispatchEvent(new Fe("error",new Map().set("detail",n))),le(r)})}function s2(e){var n=e.h.uf()&&e.controls.Za,r=e.h.na();de(e.g,n),e.i.textContent=r?"cast_connected":"cast",n&&(e.g.ariaPressed=r?"true":"false"),u2(e)}function u2(e){e.j.textContent=e.h.na()?e.h.Jd():e.localization.resolve("OFF")}function wS(e){e.g.ariaLabel=e.localization.resolve("CAST"),e.l.textContent=e.localization.resolve("CAST"),u2(e)}pe("shaka.ui.CastButton",TS);function ES(){}ES.prototype.create=function(e,n){return new TS(e,n)},Js("cast",new ES),Ti("cast",new ES);function AS(e,n){B.call(this,e,n);var r=this;this.g=bn(),this.g.classList.add("material-icons-round"),this.g.classList.add("shaka-fast-forward-button"),this.g.classList.add("shaka-tooltip-status"),this.g.setAttribute("shaka-status","1x"),this.g.textContent="fast_forward",this.parent.appendChild(this.g),SS(this),this.h=this.controls.i.fastForwardRates,this.eventManager.o(this.localization,"locale-updated",function(){SS(r)}),this.eventManager.o(this.localization,"locale-changed",function(){SS(r)}),this.eventManager.o(this.g,"click",function(){if(r.video.duration){var s=r.h.indexOf(r.player.xb())+1;s=s!=r.h.length?r.h[s]:r.h[0],r.player.Ze(s),r.g.setAttribute("shaka-status",s+"x")}})}Te(AS,B);function SS(e){e.g.ariaLabel=e.localization.resolve("FAST_FORWARD")}pe("shaka.ui.FastForwardButton",AS);function a2(){}a2.prototype.create=function(e,n){return new AS(e,n)},Ti("fast_forward",new a2);function IS(e,n){B.call(this,e,n);var r=this;this.h=this.controls.B,this.g=bn(),this.g.classList.add("shaka-fullscreen-button"),this.g.classList.add("material-icons-round"),this.g.classList.add("shaka-tooltip"),CS(this),this.g.textContent="fullscreen",this.parent.appendChild(this.g),qT(this),this.eventManager.o(this.localization,"locale-updated",function(){qT(r)}),this.eventManager.o(this.localization,"locale-changed",function(){qT(r)}),this.eventManager.o(this.g,"click",function(){return j(function(s){return k(s,r.controls.Xe(),0)})}),this.eventManager.o(document,"fullscreenchange",function(){r.g.textContent=r.controls.ic()?"fullscreen_exit":"fullscreen",qT(r)}),this.eventManager.o(this.h,"loadedmetadata",function(){CS(r)}),this.eventManager.o(this.h,"loadeddata",function(){CS(r)})}Te(IS,B);function CS(e){e.controls.xd()?e.g.classList.remove("shaka-hidden"):e.g.classList.add("shaka-hidden")}function qT(e){e.g.ariaLabel=e.localization.resolve(e.controls.ic()?"EXIT_FULL_SCREEN":"FULL_SCREEN")}pe("shaka.ui.FullscreenButton",IS);function l2(){}l2.prototype.create=function(e,n){return new IS(e,n)},Ti("fullscreen",new l2);function XT(e,n){B.call(this,e,n);var r=this;this.g=bn(),this.g.classList.add("shaka-loop-button"),this.g.classList.add("shaka-tooltip"),this.i=We("i"),this.i.classList.add("material-icons-round"),this.i.textContent="repeat",this.g.appendChild(this.i),e=We("label"),e.classList.add("shaka-overflow-button-label"),e.classList.add("shaka-overflow-menu-only"),this.j=We("span"),this.j.textContent=this.localization.resolve("LOOP"),e.appendChild(this.j),this.l=We("span"),this.l.classList.add("shaka-current-selection-span"),e.appendChild(this.l),this.g.appendChild(e),YT(this),this.parent.appendChild(this.g),this.eventManager.o(this.localization,"locale-updated",function(){YT(r)}),this.eventManager.o(this.localization,"locale-changed",function(){YT(r)}),this.eventManager.o(this.g,"click",function(){r.video.loop=!r.video.loop,r.h.za(),r.h.ea(1)}),this.m=this.video.loop,this.h=new Qe(function(){r.m!=r.video.loop&&(YT(r),r.m=r.video.loop)}),this.h.ea(1)}Te(XT,B),XT.prototype.release=function(){this.h.stop(),this.h=null,B.prototype.release.call(this)};function YT(e){e.j.textContent=e.localization.resolve("LOOP"),e.l.textContent=e.localization.resolve(e.video.loop?"ON":"OFF"),e.i.textContent=e.video.loop?"repeat_on":"repeat",e.g.ariaLabel=e.localization.resolve(e.video.loop?"EXIT_LOOP_MODE":"ENTER_LOOP_MODE")}pe("shaka.ui.LoopButton",XT);function $T(){}$T.prototype.create=function(e,n){return new XT(e,n)},Js("loop",new $T),Ti("loop",new $T),mt("loop",new $T);function kS(e,n){B.call(this,e,n);var r=this;this.g=bn(),this.g.classList.add("shaka-mute-button"),this.g.classList.add("material-icons-round"),this.g.classList.add("shaka-tooltip"),this.parent.appendChild(this.g),Sd(this),Lv(this),this.eventManager.o(this.localization,"locale-updated",function(){Sd(r)}),this.eventManager.o(this.localization,"locale-changed",function(){Sd(r)}),this.eventManager.o(this.g,"click",function(){r.ad&&r.ad.isLinear()?r.ad.setMuted(!r.ad.isMuted()):r.video.muted=!r.video.muted}),this.eventManager.o(this.video,"volumechange",function(){Sd(r),Lv(r)}),this.eventManager.o(this.adManager,"ad-volume-changed",function(){Sd(r),Lv(r)}),this.eventManager.o(this.adManager,"ad-muted",function(){Sd(r),Lv(r)}),this.eventManager.o(this.adManager,"ad-stopped",function(){r.ad=null,Sd(r),Lv(r)})}Te(kS,B);function Sd(e){var n=e.ad?e.ad.isMuted()?"UNMUTE":"MUTE":e.video.muted?"UNMUTE":"MUTE";e.g.ariaLabel=e.localization.resolve(n)}function Lv(e){var n=e.ad?e.ad.isMuted()?"volume_off":"volume_up":e.video.muted?"volume_off":"volume_up";e.g.textContent=n}pe("shaka.ui.MuteButton",kS);function c2(){}c2.prototype.create=function(e,n){return new kS(e,n)},Ti("mute",new c2);function MS(e,n){B.call(this,e,n);var r=this;this.l=this.controls.B,this.g=bn(),this.g.classList.add("shaka-pip-button"),this.g.classList.add("shaka-tooltip"),this.i=We("i"),this.i.classList.add("material-icons-round"),this.i.textContent="picture_in_picture_alt",this.g.appendChild(this.i),e=We("label"),e.classList.add("shaka-overflow-button-label"),e.classList.add("shaka-overflow-menu-only"),this.j=We("span"),this.j.textContent=this.localization.resolve("PICTURE_IN_PICTURE"),e.appendChild(this.j),this.h=We("span"),this.h.classList.add("shaka-current-selection-span"),e.appendChild(this.h),this.g.appendChild(e),_S(this),this.parent.appendChild(this.g),document.pictureInPictureEnabled&&!this.video.disablePictureInPicture||de(this.g,!1),this.eventManager.o(this.localization,"locale-updated",function(){_S(r)}),this.eventManager.o(this.localization,"locale-changed",function(){_S(r)}),this.eventManager.o(this.g,"click",function(){V4(r)}),this.eventManager.o(this.l,"enterpictureinpicture",function(){r.i.textContent="branding_watermark",r.g.ariaLabel=r.localization.resolve("EXIT_PICTURE_IN_PICTURE"),r.h.textContent=r.localization.resolve("ON")}),this.eventManager.o(this.l,"leavepictureinpicture",function(){r.i.textContent="picture_in_picture_alt",r.g.ariaLabel=r.localization.resolve("ENTER_PICTURE_IN_PICTURE"),r.h.textContent=r.localization.resolve("OFF")}),this.eventManager.o(this.controls,"caststatuschanged",function(s){s.newStatus?document.pictureInPictureEnabled&&!r.video.disablePictureInPicture&&de(r.g,!1):document.pictureInPictureEnabled&&!r.video.disablePictureInPicture&&de(r.g,!0)}),this.eventManager.o(this.player,"trackschanged",function(){K4(r)})}Te(MS,B);function V4(e){var n;j(function(r){if(r.g==1)return ye(r,2),document.pictureInPictureElement?k(r,document.exitPictureInPicture(),5):(document.fullscreenElement&&document.exitFullscreen(),k(r,e.video.requestPictureInPicture(),5));if(r.g!=2)return _e(r,0);n=we(r),e.controls.dispatchEvent(new Fe("error",new Map().set("detail",n))),le(r)})}function _S(e){e.j.textContent=e.localization.resolve("PICTURE_IN_PICTURE"),e.g.ariaLabel=e.localization.resolve(document.pictureInPictureElement?"EXIT_PICTURE_IN_PICTURE":"ENTER_PICTURE_IN_PICTURE"),e.h.textContent=e.localization.resolve(document.pictureInPictureElement?"ON":"OFF")}function K4(e){j(function(n){return!document.pictureInPictureEnabled||e.video.disablePictureInPicture?(de(e.g,!1),n.D(0)):!e.player||!e.player.hc()?(de(e.g,!0),n.D(0)):(de(e.g,!1),document.pictureInPictureElement?k(n,document.exitPictureInPicture(),0):n.D(0))})}pe("shaka.ui.PipButton",MS);function QT(){}QT.prototype.create=function(e,n){return new MS(e,n)},Js("picture_in_picture",new QT),Ti("picture_in_picture",new QT),mt("picture_in_picture",new QT);function RS(e,n){eu.call(this,e,n,"slow_motion_video");var r=this;this.button.classList.add("shaka-playbackrate-button"),this.menu.classList.add("shaka-playback-rates"),this.button.classList.add("shaka-tooltip-status"),this.eventManager.o(this.localization,"locale-updated",function(){LS(r)}),this.eventManager.o(this.localization,"locale-changed",function(){LS(r)}),this.eventManager.o(this.player,"ratechange",function(){d2(r,r.player.xb())}),this.g=new Map(this.controls.i.playbackRates.map(function(s){return[s+"x",s]})),LS(this),H4(this),d2(this,this.player.xb())}Te(RS,eu);function LS(e){e.backButton.ariaLabel=e.localization.resolve("BACK"),e.button.ariaLabel=e.localization.resolve("PLAYBACK_RATE"),e.nameSpan.textContent=e.localization.resolve("PLAYBACK_RATE"),e.backSpan.textContent=e.localization.resolve("PLAYBACK_RATE")}function d2(e,n){var r=ge(e.menu,"material-icons-round shaka-chosen-item");if(r){var s=r.parentElement;s.removeAttribute("aria-selected"),s.getElementsByTagName("span")[0].classList.remove("shaka-chosen-item"),s.removeChild(r)}(r=Array.from(e.menu.querySelectorAll("span")).find(function(a){return e.g.get(a.textContent)==n}))&&(s=r.parentElement,s.appendChild(ce()),s.ariaSelected="true",r.classList.add("shaka-chosen-item")),e.currentSelection.textContent=n+"x",e.button.setAttribute("shaka-status",n+"x")}function H4(e){for(var n={},r=A(e.g.keys()),s=r.next();!s.done;n={xc:n.xc},s=r.next()){n.xc=s.value,s=bn();var a=We("span");a.textContent=n.xc,s.appendChild(a),e.eventManager.o(s,"click",function(d){return function(){e.video.playbackRate=e.g.get(d.xc),e.video.defaultPlaybackRate=e.g.get(d.xc)}}(n)),e.menu.appendChild(s)}ne(e.menu)}pe("shaka.ui.PlaybackRateSelection",RS);function NS(){}NS.prototype.create=function(e,n){return new RS(e,n)},Js("playback_rate",new NS),Ti("playback_rate",new NS);function DS(e,n){B.call(this,e,n);var r=this;this.g=bn(),this.g.classList.add("shaka-current-time"),ZT(this,"0:00"),this.parent.appendChild(this.g),this.eventManager.o(this.g,"click",function(){r.player.T()&&(r.video.currentTime=r.player.Ja().end)}),this.eventManager.o(this.controls,"timeandseekrangeupdated",function(){var s=r.controls.X,a=r.controls.Hf(),d=r.video.duration,f=r.player.Ja(),g=f.end-f.start;r.player.T()?(a=Math.max(0,Math.floor(f.end-a)),d=3600<=g,1<=a||s?(ZT(r,"- "+Ee(a,d)),r.g.disabled=!1):(ZT(r,r.localization.resolve("LIVE")),r.g.disabled=!0)):(s=3600<=d,a=Ee(a,s),d&&(a+=" / "+Ee(d,s)),ZT(r,a),r.g.disabled=!0)}),this.eventManager.o(this.player,"trackschanged",function(){r.player.T()&&(r.g.ariaLabel=r.localization.resolve("SKIP_TO_LIVE"))})}Te(DS,B);function ZT(e,n){n!=e.g.textContent&&(e.g.textContent=n)}pe("shaka.ui.PresentationTimeTracker",DS);function h2(){}h2.prototype.create=function(e,n){return new DS(e,n)},Ti("time_and_duration",new h2);function bS(e,n){eu.call(this,e,n,"settings");var r=this;this.button.classList.add("shaka-resolution-button"),this.button.classList.add("shaka-tooltip-status"),this.menu.classList.add("shaka-resolutions"),this.eventManager.o(this.localization,"locale-updated",function(){PS(r)}),this.eventManager.o(this.localization,"locale-changed",function(){PS(r)}),this.eventManager.o(this.player,"variantchanged",function(){Nv(r)}),this.eventManager.o(this.player,"trackschanged",function(){Nv(r)}),this.eventManager.o(this.player,"abrstatuschanged",function(){Nv(r)}),Nv(this)}Te(bS,eu);function Nv(e){var n=e.player.Qa(),r=n.find(function(T){return T.active});r&&(n=n.filter(function(T){return T.language==r.language&&T.channelsCount==r.channelsCount})),n=n.filter(function(T,I){return(e.player.hc()?n.findIndex(function(M){return M.bandwidth==T.bandwidth}):n.findIndex(function(M){return M.height==T.height}))==I}),e.player.hc()?n.sort(function(T,I){return I.bandwidth-T.bandwidth}):n.sort(function(T,I){return I.height-T.height});var s=X(e.menu);ju(e.menu),e.menu.appendChild(s),s=e.player.getConfiguration().abr.enabled;for(var a={},d=A(n),f=d.next();!f.done;a={Yb:a.Yb},f=d.next()){a.Yb=f.value,f=bn(),f.classList.add("explicit-resolution"),e.eventManager.o(f,"click",function(T){return function(){var I=T.Yb;e.player.configure({abr:{enabled:!1}}),e.player.Ke(I,e.controls.i.clearBufferOnQualityChange)}}(a));var g=We("span");g.textContent=e.player.hc()?Math.round(a.Yb.bandwidth/1e3)+" kbits/s":a.Yb.height+"p",f.appendChild(g),s||a.Yb!=r||(f.ariaSelected="true",f.appendChild(ce()),g.classList.add("shaka-chosen-item"),e.currentSelection.textContent=g.textContent),e.menu.appendChild(f)}a=bn(),a.classList.add("shaka-enable-abr-button"),e.eventManager.o(a,"click",function(){e.player.configure({abr:{enabled:!0}}),Nv(e)}),e.g=We("span"),e.g.classList.add("shaka-auto-span"),e.g.textContent=e.localization.resolve("AUTO_QUALITY"),a.appendChild(e.g),s&&(a.ariaSelected="true",a.appendChild(ce()),e.g.classList.add("shaka-chosen-item"),e.currentSelection.textContent=e.localization.resolve("AUTO_QUALITY")),e.button.setAttribute("shaka-status",e.currentSelection.textContent),e.menu.appendChild(a),ne(e.menu),e.controls.dispatchEvent(new Fe("resolutionselectionupdated")),PS(e)}function PS(e){var n=e.player.hc()?"QUALITY":"RESOLUTION";e.button.ariaLabel=e.localization.resolve(n),e.backButton.ariaLabel=e.localization.resolve(n),e.backSpan.textContent=e.localization.resolve(n),e.nameSpan.textContent=e.localization.resolve(n),e.g.textContent=e.localization.resolve("AUTO_QUALITY"),e.player.getConfiguration().abr.enabled&&(e.currentSelection.textContent=e.localization.resolve("AUTO_QUALITY"))}pe("shaka.ui.ResolutionSelection",bS);function OS(){}OS.prototype.create=function(e,n){return new bS(e,n)},Js("quality",new OS),Ti("quality",new OS);function US(e,n){B.call(this,e,n);var r=this;this.g=bn(),this.g.classList.add("material-icons-round"),this.g.classList.add("shaka-rewind-button"),this.g.classList.add("shaka-tooltip-status"),this.g.setAttribute("shaka-status",this.localization.resolve("OFF")),this.g.textContent="fast_rewind",this.parent.appendChild(this.g),jS(this),this.h=this.controls.i.rewindRates,this.eventManager.o(this.localization,"locale-updated",function(){jS(r)}),this.eventManager.o(this.localization,"locale-changed",function(){jS(r)}),this.eventManager.o(this.g,"click",function(){if(r.video.duration){var s=r.h.indexOf(r.player.xb())+1;s=s!=r.h.length?r.h[s]:r.h[0],r.player.Ze(s),r.g.setAttribute("shaka-status",s+"x")}})}Te(US,B);function jS(e){e.g.ariaLabel=e.localization.resolve("REWIND")}pe("shaka.ui.RewindButton",US);function f2(){}f2.prototype.create=function(e,n){return new US(e,n)},Ti("rewind",new f2);function BS(e,n){B.call(this,e,n);var r=this;this.j=We("div"),this.j.classList.add("shaka-skip-ad-container"),this.parent.appendChild(this.j),this.h=We("div"),this.h.classList.add("shaka-skip-ad-counter"),de(this.h,!1),this.j.appendChild(this.h),this.g=bn(),this.g.classList.add("shaka-skip-ad-button"),this.g.disabled=!0,de(this.g,!1),this.g.classList.add("shaka-no-propagation"),this.j.appendChild(this.g),FS(this),this.i=new Qe(function(){var s=Math.round(r.ad.getTimeUntilSkippable());0<s?r.h.textContent=s:(r.i.stop(),de(r.h,!1))}),this.eventManager.o(this.localization,"locale-updated",function(){FS(r)}),this.eventManager.o(this.localization,"locale-changed",function(){FS(r)}),this.eventManager.o(this.adManager,"ad-started",function(){p2(r)}),this.eventManager.o(this.adManager,"ad-skip-state-changed",function(){r.ad.canSkipNow()&&(r.g.disabled=!1,r.i.stop(),de(r.h,!1))}),this.eventManager.o(this.adManager,"ad-stopped",function(){r.i.stop(),r.g.disabled=!0,de(r.g,!1),de(r.h,!1)}),this.eventManager.o(this.g,"click",function(){r.ad.skip()}),this.ad&&p2(this)}Te(BS,B),BS.prototype.release=function(){this.i.stop(),this.i=null,B.prototype.release.call(this)};function FS(e){e.g.textContent=e.localization.resolve("SKIP_AD")}function p2(e){e.ad.isSkippable()&&(de(e.g,!0),de(e.h,!0),e.h.textContent="",e.i.za(),e.i.ea(.5))}pe("shaka.ui.SkipAdButton",BS);function Dv(e,n){Ke.call(this,e,n),this.button.classList.add("shaka-small-play-button"),this.button.classList.add("material-icons-round"),this.button.classList.add("shaka-tooltip"),this.h(),this.g()}Te(Dv,Ke),Dv.prototype.h=function(){this.button.textContent=this.video.ended?"replay":this.isPaused()?"play_arrow":"pause"},Dv.prototype.g=function(){if(this.video.ended)this.button.ariaLabel=this.localization.resolve("REPLAY");else{var e=this.isPaused()?"PLAY":"PAUSE";this.button.ariaLabel=this.localization.resolve(e)}},pe("shaka.ui.SmallPlayButton",Dv);function g2(){}g2.prototype.create=function(e,n){return new Dv(e,n)},Ti("play_pause",new g2);function zS(e,n){B.call(this,e,n),e=We("div"),e.classList.add("shaka-spacer"),e.ariaHidden="true",this.parent.appendChild(e)}Te(zS,B),pe("shaka.ui.Spacer",zS);function m2(){}m2.prototype.create=function(e,n){return new zS(e,n)},Ti("spacer",new m2);function JT(e,n){function r(T){return Ee(g.h[T],!1)+" (m)"}function s(T){return Math.round(g.h[T]/1e3)+" (kbits/s)"}function a(T){return g.h[T].toFixed(2)+" (s)"}function d(T){return g.h[T]+" (frames)"}function f(T){return g.h[T]+" (px)"}B.call(this,e,n);var g=this;this.i=bn(),this.i.classList.add("shaka-statistics-button"),this.j=We("i"),this.j.classList.add("material-icons-round"),this.j.textContent="insert_chart_outlined",this.i.appendChild(this.j),e=We("label"),e.classList.add("shaka-overflow-button-label"),this.s=We("span"),e.appendChild(this.s),this.m=We("span"),this.m.classList.add("shaka-current-selection-span"),e.appendChild(this.m),this.i.appendChild(e),this.parent.appendChild(this.i),this.g=We("div"),this.g.classList.add("shaka-no-propagation"),this.g.classList.add("shaka-show-controls-on-mouse-over"),this.g.classList.add("shaka-statistics-container"),this.g.classList.add("shaka-hidden"),this.controls.g.appendChild(this.g),this.F=[],this.G=["stateHistory","switchHistory"],this.h=this.player.getStats(),this.B={},this.C={width:f,height:f,completionPercent:function(T){return g.h[T]+" (%)"},bufferingTime:a,drmTimeSeconds:a,licenseTime:a,liveLatency:a,loadLatency:a,manifestTimeSeconds:a,estimatedBandwidth:s,streamBandwidth:s,maxSegmentDuration:r,pauseTime:r,playTime:r,corruptedFrames:d,decodedFrames:d,droppedFrames:d,stallsDetected:function(T){return g.h[T]+" (stalls)"},gapsJumped:function(T){return g.h[T]+" (gaps)"}},this.l=new Qe(function(){g.h=g.player.getStats();for(var T=A(g.F),I=T.next();!I.done;I=T.next())I=I.value,g.B[I].textContent=g.C[I](I)}),ew(this),W4(this),this.eventManager.o(this.localization,"locale-updated",function(){ew(g)}),this.eventManager.o(this.localization,"locale-changed",function(){ew(g)}),this.eventManager.o(this.i,"click",function(){de(g.parent,!1),g.g.classList.contains("shaka-hidden")?(g.j.textContent="insert_chart",g.l.ea(.1),de(g.g,!0)):(g.j.textContent="insert_chart_outlined",g.l.stop(),de(g.g,!1)),ew(g)})}Te(JT,B);function ew(e){e.s.textContent=e.localization.resolve("STATISTICS"),e.i.ariaLabel=e.localization.resolve("STATISTICS"),e.m.textContent=e.localization.resolve(e.g.classList.contains("shaka-hidden")?"OFF":"ON")}function W4(e){for(var n=A(e.controls.i.statisticsList),r=n.next();!r.done;r=n.next())if(r=r.value,r in e.h&&!e.G.includes(r)){var s=e.g,a=s.appendChild,d=e,f=We("div"),g=We("label");g.textContent=r+":",f.appendChild(g),g=We("span"),g.textContent=d.C[r](r),f.appendChild(g),d.B[r]=g,a.call(s,f),e.F.push(r)}else ze("Unrecognized statistic element:",r)}JT.prototype.release=function(){this.l.stop(),this.l=null,B.prototype.release.call(this)},pe("shaka.ui.StatisticsButton",JT);function GS(){}GS.prototype.create=function(e,n){return new JT(e,n)},Js("statistics",new GS),mt("statistics",new GS);function VS(e,n){eu.call(this,e,n,"closed_caption");var r=this;this.button.classList.add("shaka-caption-button"),this.button.classList.add("shaka-tooltip-status"),this.menu.classList.add("shaka-text-languages"),this.player&&this.player.Nb()?this.button.ariaPressed="true":this.button.ariaPressed="false",q4(this),this.eventManager.o(this.localization,"locale-updated",function(){KS(r),Id(r)}),this.eventManager.o(this.localization,"locale-changed",function(){KS(r),Id(r)}),this.eventManager.o(this.player,"texttrackvisibility",function(){v2(r),Id(r)}),this.eventManager.o(this.player,"textchanged",function(){Id(r)}),this.eventManager.o(this.player,"trackschanged",function(){y2(r)}),v2(this),KS(this),Id(this),y2(this)}Te(VS,eu);function q4(e){var n=bn();n.ariaSelected="true",e.menu.appendChild(n),n.appendChild(ce()),e.g=We("span"),e.g.classList.add("shaka-auto-span"),n.appendChild(e.g)}function v2(e){e.player.Nb()?(e.icon.textContent="closed_caption",e.button.ariaPressed="true"):(e.icon.textContent="closed_caption_disabled",e.button.ariaPressed="false"),e.controls.dispatchEvent(new Fe("captionselectionupdated"))}function Id(e){var n=e.player.yb();o2(n,e.menu,function(r){return X4(e,r)},e.player.Nb(),e.currentSelection,e.localization,e.controls.i.trackLabelFormat),n=bn(),n.classList.add("shaka-turn-captions-off-button"),e.eventManager.o(n,"click",function(){e.player.Se(!1),Id(e)}),n.appendChild(e.g),e.menu.appendChild(n),e.player.Nb()||(n.ariaSelected="true",n.appendChild(ce()),e.g.classList.add("shaka-chosen-item"),e.currentSelection.textContent=e.localization.resolve("OFF")),e.button.setAttribute("shaka-status",e.currentSelection.textContent),ne(e.menu),e.controls.dispatchEvent(new Fe("captionselectionupdated"))}function X4(e,n){return j(function(r){return e.player.Je(n),k(r,e.player.Se(!0),0)})}function KS(e){e.button.ariaLabel=e.localization.resolve("CAPTIONS"),e.backButton.ariaLabel=e.localization.resolve("BACK"),e.nameSpan.textContent=e.localization.resolve("CAPTIONS"),e.backSpan.textContent=e.localization.resolve("CAPTIONS"),e.g.textContent=e.localization.resolve("OFF")}function y2(e){var n=0<e.player.yb().length;de(e.button,n),Id(e)}pe("shaka.ui.TextSelection",VS);function HS(){}HS.prototype.create=function(e,n){return new VS(e,n)},Js("captions",new HS),Ti("captions",new HS);function tw(e,n){lt.call(this,e,n,["shaka-volume-bar-container"],["shaka-volume-bar"]);var r=this;this.h=this.controls.i,this.eventManager.o(this.video,"volumechange",function(){return WS(r)}),this.eventManager.o(this.adManager,"ad-volume-changed",function(){return x2(r)}),this.eventManager.o(this.adManager,"ad-muted",function(){return x2(r)}),this.eventManager.o(this.adManager,"ad-stopped",function(){return WS(r)}),this.eventManager.o(this.localization,"locale-updated",function(){return qS(r)}),this.eventManager.o(this.localization,"locale-changed",function(){return qS(r)}),WS(this),qS(this),this.ad&&this.onChange()}Te(tw,lt),tw.prototype.onChange=function(){this.ad&&this.ad.isLinear()?this.ad.setVolume(this.getValue()):(this.video.volume=this.getValue(),this.video.muted=this.video.volume==0)};function WS(e){e.video.muted?e.setValue(0):e.setValue(e.video.volume),T2(e)}function x2(e){var n=e.ad.getVolume();e.setValue(n),T2(e)}function T2(e){var n=e.h.volumeBarColors,r=["to right"];r.push(n.level+100*e.getValue()+"%"),r.push(n.base+100*e.getValue()+"%"),r.push(n.base+"100%"),e.container.style.background="linear-gradient("+r.join(",")+")"}function qS(e){e.bar.ariaLabel=e.localization.resolve("VOLUME")}pe("shaka.ui.VolumeBar",tw);function w2(){}w2.prototype.create=function(e,n){return new tw(e,n)},Ti("volume",new w2)}).call(c,x,x,void 0);for(var y in c.shaka)E[y]=c.shaka[y]})()})(EI);const rL={videoStyles:{position:"absolute",width:"1920px",height:"1080px",top:"0px",left:"0px",zIndex:"150"}},oL=E=>{console.error("Error code:",E.code,"object",E)};async function sL(){cC.polyfill.installAll();let E,x,c="https://storage.googleapis.com/shaka-demo-assets/angel-one/dash.mpd";const y=document.createElement("div");y.id="video-container",document.body.appendChild(y),document.getElementById("video-player")===null?(x=document.createElement("video"),x.id="video-player"):x=document.getElementById("video-player"),x.setAttribute("crossorigin","anonymous"),y.appendChild(x),Object.assign(x.style,rL.videoStyles),E=new EI.Player(x),window.player=E,new EI.ui.Overlay(E,y,x).getControls().addEventListener("error",console.error),E.addEventListener("error",console.error),document.querySelectorAll(".shaka-spinner")[0].remove(),document.querySelectorAll(".shaka-controls-container")[0].remove();try{await E.load(c),x.src=h4,new cC.util.EventManager().listen(E,"buffering",V=>{x.style.zIndex="0",V.buffering==!1&&(x.style.zIndex="150",x.play())})}catch(F){oL(F)}}const uL=()=>{let E,x=document.getElementById("video-container"),c=document.getElementById("video-player");const[y,S]=kn(!1);ma(()=>{S(!0),sL(),S(!1)}),TC(()=>{E.setFocus()});function R(P){switch(c===null&&(c=document.getElementById("video-player")),P.code){case"Enter":Ew.playPause(c);break;case"Space":Ew.playPause(c);break;case"Backspace":Ew.shouldPause()?x===null&&(x=document.getElementById("video-container"),x.remove()):c.style.display="none";break}}return y()?ot(HI,{}):ot(Ji,{ref(P){var v=E;typeof v=="function"?v(P):E=P},onKeyPress:P=>R(P),get style(){return{zIndex:110,color:jn.black}}})},aL=()=>ot(su,{children:"Not Found"}),lL=new URL("AppCoreExtensions-Ne9eQjat.js",import.meta.url).href;ou.debug=!1;ou.fontSettings.fontFamily="Ubuntu";ou.fontSettings.color=4294967295;ou.rendererOptions={coreExtensionModule:lL,numImageWorkers:2,deviceLogicalPixelRatio:window.innerWidth===1280?2/3:1,enableInspector:!0,boundsMargin:20};GM(()=>ot(x_,{root:j_,get children(){return[ot(Ov,{path:"",component:lC}),ot(Ov,{path:"/browse/:category",component:lC}),ot(Ov,{path:"/details/:type/:id",component:iL}),ot(Ov,{path:"/video",component:uL}),ot(Ov,{path:"/*all",component:aL})]}}));export{dL as __vite_legacy_guard};
//# sourceMappingURL=index-C5ggMlGd.js.map
