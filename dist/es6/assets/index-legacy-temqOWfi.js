!function(){var e=["defaultTone"],t=["defaultTone"],n=["defaultTone"],r=["surfaceDefaultTone"],i=["defaultTone"],a=["defaultTone"],o=["defaultTone"],s=["defaultTone"],u=["defaultTone"],l=["defaultTone"],c=["defaultTone"],d=["defaultTone"],h=["defaultTone"],f=["defaultTone"],p=["defaultTone"],g=["defaultTone"],m=["defaultTone"],v=["defaultSurfaceTone"];function y(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function b(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */b=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",s=a.asyncIterator||"@@asyncIterator",u=a.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,n){return e[t]=n}}function c(e,t,n,r){var a=t&&t.prototype instanceof v?t:v,o=Object.create(a.prototype),s=new R(r||[]);return i(o,"_invoke",{value:k(e,n,s)}),o}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=c;var h="suspendedStart",f="suspendedYield",p="executing",g="completed",m={};function v(){}function y(){}function x(){}var w={};l(w,o,(function(){return this}));var T=Object.getPrototypeOf,A=T&&T(T(N([])));A&&A!==n&&r.call(A,o)&&(w=A);var S=x.prototype=v.prototype=Object.create(w);function E(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function I(e,t){function n(i,a,o,s){var u=d(e[i],e,a);if("throw"!==u.type){var l=u.arg,c=l.value;return c&&"object"==typeof c&&r.call(c,"__await")?t.resolve(c.__await).then((function(e){n("next",e,o,s)}),(function(e){n("throw",e,o,s)})):t.resolve(c).then((function(e){l.value=e,o(l)}),(function(e){return n("throw",e,o,s)}))}s(u.arg)}var a;i(this,"_invoke",{value:function(e,r){function i(){return new t((function(t,i){n(e,r,t,i)}))}return a=a?a.then(i,i):i()}})}function k(t,n,r){var i=h;return function(a,o){if(i===p)throw Error("Generator is already running");if(i===g){if("throw"===a)throw o;return{value:e,done:!0}}for(r.method=a,r.arg=o;;){var s=r.delegate;if(s){var u=C(s,r);if(u){if(u===m)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===h)throw i=g,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=p;var l=d(t,n,r);if("normal"===l.type){if(i=r.done?g:f,l.arg===m)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(i=g,r.method="throw",r.arg=l.arg)}}}function C(t,n){var r=n.method,i=t.iterator[r];if(i===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,C(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),m;var a=d(i,t.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,m;var o=a.arg;return o?o.done?(n[t.resultName]=o.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,m):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,m)}function _(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function M(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function R(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(_,this),this.reset(!0)}function N(t){if(t||""===t){var n=t[o];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,a=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}throw new TypeError(typeof t+" is not iterable")}return y.prototype=x,i(S,"constructor",{value:x,configurable:!0}),i(x,"constructor",{value:y,configurable:!0}),y.displayName=l(x,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,x):(e.__proto__=x,l(e,u,"GeneratorFunction")),e.prototype=Object.create(S),e},t.awrap=function(e){return{__await:e}},E(I.prototype),l(I.prototype,s,(function(){return this})),t.AsyncIterator=I,t.async=function(e,n,r,i,a){void 0===a&&(a=Promise);var o=new I(c(e,n,r,i),a);return t.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},E(S),l(S,u,"Generator"),l(S,o,(function(){return this})),l(S,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=N,R.prototype={constructor:R,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(M),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return s.type="throw",s.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],s=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var u=r.call(o,"catchLoc"),l=r.call(o,"finallyLoc");if(u&&l){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(u){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,m):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),M(n),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;M(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:N(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),m}},t}function x(e,t,n,r,i,a,o){try{var s=e[a](o),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,i)}function w(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){x(a,r,i,o,s,"next",e)}function s(e){x(a,r,i,o,s,"throw",e)}o(void 0)}))}}function T(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function A(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?T(Object(n),!0).forEach((function(t){S(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function S(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function E(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,o,s=[],u=!0,l=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=a.call(n)).done)&&(s.push(r.value),s.length!==t);u=!0);}catch(e){l=!0,i=e}finally{try{if(!u&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(l)throw i}}return s}}(e,t)||k(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function I(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=k(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function k(e,t){if(e){if("string"==typeof e)return C(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?C(e,t):void 0}}function C(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}System.register(["./CoreExtension-legacy-CPLj1SGQ.js"],(function(x,T){"use strict";var k,C,_,M,R,N,L,D,P,O,U,B,j,F,z,G,V,K,H,W,X,q,Y,$,Q,J,Z,ee,te,ne,re,ie,ae,oe;return{setters:[e=>{k=e.a,C=e.i,_=e.T,M=e.g,R=e.E,N=e.b,L=e.c,D=e.d,P=e.e,O=e.f,U=e.m,B=e.W,j=e.C,F=e.h,z=e.j,G=e.k,V=e.S,K=e.l,H=e.B,W=e.n,X=e.o,q=e.p,Y=e.q,$=e.r,Q=e.s,J=e.t,Z=e.u,ee=e.v,te=e.w,ne=e.R,re=e.x,ie=e.y,ae=e.z,oe=e.A}],execute:function(){var x,se,ue,le=b().mark(sn),ce=(e,t)=>e===t,de=Symbol("solid-proxy"),he=Symbol("solid-track"),fe={equals:ce},pe=He,ge=1,me=2,ve={owned:null,cleanups:null,context:null,owner:null},ye=null,be=null,xe=null,we=null,Te=null,Ae=0;function Se(e,t){var n=xe,r=ye,i=0===e.length,a=void 0===t?r:t,o=i?ve:{owned:null,cleanups:null,context:a?a.context:null,owner:a},s=i?e:()=>e((()=>_e((()=>Ye(o)))));ye=o,xe=null;try{return Ke(s,!0)}finally{xe=n,ye=r}}function Ee(e,t){var n={value:e,observers:null,observerSlots:null,comparator:(t=t?Object.assign({},fe,t):fe).equals||void 0};return[je.bind(n),e=>("function"==typeof e&&(e=e(n.value)),Fe(n,e))]}function Ie(e,t,n){ze(Ge(e,t,!1,ge))}function ke(e,t,n){pe=We;var r=Ge(e,t,!1,ge);r.user=!0,Te?Te.push(r):ze(r)}function Ce(e,t,n){n=n?Object.assign({},fe,n):fe;var r=Ge(e,t,!0,0);return r.observers=null,r.observerSlots=null,r.comparator=n.equals||void 0,ze(r),je.bind(r)}function _e(e){if(null===xe)return e();var t=xe;xe=null;try{return e()}finally{xe=t}}function Me(e,t,n){var r,i=Array.isArray(e),a=n&&n.defer;return n=>{var o;if(i){o=Array(e.length);for(var s=0;s<e.length;s++)o[s]=e[s]()}else o=e();if(a)return a=!1,n;var u=_e((()=>t(o,r,n)));return r=o,u}}function Re(e){ke((()=>_e(e)))}function Ne(e){return null===ye||(null===ye.cleanups?ye.cleanups=[e]:ye.cleanups.push(e)),e}function Le(){return ye}function De(e,t){var n=ye,r=xe;ye=e,xe=null;try{return Ke(t,!0)}catch(i){$e(i)}finally{ye=n,xe=r}}function Pe(e){var t=xe,n=ye;return Promise.resolve().then((()=>{xe=t,ye=n,Ke(e,!1),xe=ye=null}))}function Oe(e,t){var n=Symbol("context");return{id:n,Provider:Je(n),defaultValue:e}}function Ue(e){return ye&&ye.context&&void 0!==ye.context[e.id]?ye.context[e.id]:e.defaultValue}function Be(e){var t=Ce(e),n=Ce((()=>Qe(t())));return n.toArray=()=>{var e=n();return Array.isArray(e)?e:null!=e?[e]:[]},n}function je(){if(this.sources&&this.state)if(this.state===ge)ze(this);else{var e=we;we=null,Ke((()=>Xe(this)),!1),we=e}if(xe){var t=this.observers?this.observers.length:0;xe.sources?(xe.sources.push(this),xe.sourceSlots.push(t)):(xe.sources=[this],xe.sourceSlots=[t]),this.observers?(this.observers.push(xe),this.observerSlots.push(xe.sources.length-1)):(this.observers=[xe],this.observerSlots=[xe.sources.length-1])}return this.value}function Fe(e,t,n){var r=e.value;return e.comparator&&e.comparator(r,t)||(e.value=t,e.observers&&e.observers.length&&Ke((()=>{for(var t=0;t<e.observers.length;t+=1){var n=e.observers[t],r=be&&be.running;r&&be.disposed.has(n),(r?n.tState:n.state)||(n.pure?we.push(n):Te.push(n),n.observers&&qe(n)),r||(n.state=ge)}if(we.length>1e6)throw we=[],new Error}),!1)),t}function ze(e){if(e.fn){Ye(e);var t=Ae;!function(e,t,n){var r,i=ye,a=xe;xe=ye=e;try{r=e.fn(t)}catch(o){return e.pure&&(e.state=ge,e.owned&&e.owned.forEach(Ye),e.owned=null),e.updatedAt=n+1,$e(o)}finally{xe=a,ye=i}(!e.updatedAt||e.updatedAt<=n)&&(null!=e.updatedAt&&"observers"in e?Fe(e,r):e.value=r,e.updatedAt=n)}(e,e.value,t)}}function Ge(e,t,n,r=ge,i){var a={fn:e,state:r,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:t,owner:ye,context:ye?ye.context:null,pure:n};return null===ye||ye!==ve&&(ye.owned?ye.owned.push(a):ye.owned=[a]),a}function Ve(e){if(0!==e.state){if(e.state===me)return Xe(e);if(e.suspense&&_e(e.suspense.inFallback))return e.suspense.effects.push(e);for(var t=[e];(e=e.owner)&&(!e.updatedAt||e.updatedAt<Ae);)e.state&&t.push(e);for(var n=t.length-1;n>=0;n--)if((e=t[n]).state===ge)ze(e);else if(e.state===me){var r=we;we=null,Ke((()=>Xe(e,t[0])),!1),we=r}}}function Ke(e,t){if(we)return e();var n=!1;t||(we=[]),Te?n=!0:Te=[],Ae++;try{var r=e();return function(e){we&&(He(we),we=null);if(e)return;var t=Te;Te=null,t.length&&Ke((()=>pe(t)),!1)}(n),r}catch(i){n||(Te=null),we=null,$e(i)}}function He(e){for(var t=0;t<e.length;t++)Ve(e[t])}function We(e){var t,n=0;for(t=0;t<e.length;t++){var r=e[t];r.user?e[n++]=r:Ve(r)}for(t=0;t<n;t++)Ve(e[t])}function Xe(e,t){e.state=0;for(var n=0;n<e.sources.length;n+=1){var r=e.sources[n];if(r.sources){var i=r.state;i===ge?r!==t&&(!r.updatedAt||r.updatedAt<Ae)&&Ve(r):i===me&&Xe(r,t)}}}function qe(e){for(var t=0;t<e.observers.length;t+=1){var n=e.observers[t];n.state||(n.state=me,n.pure?we.push(n):Te.push(n),n.observers&&qe(n))}}function Ye(e){var t;if(e.sources)for(;e.sources.length;){var n=e.sources.pop(),r=e.sourceSlots.pop(),i=n.observers;if(i&&i.length){var a=i.pop(),o=n.observerSlots.pop();r<i.length&&(a.sourceSlots[o]=r,i[r]=a,n.observerSlots[r]=o)}}if(e.owned){for(t=e.owned.length-1;t>=0;t--)Ye(e.owned[t]);e.owned=null}if(e.cleanups){for(t=e.cleanups.length-1;t>=0;t--)e.cleanups[t]();e.cleanups=null}e.state=0}function $e(e,t=ye){var n=function(e){return e instanceof Error?e:new Error("string"==typeof e?e:"Unknown error",{cause:e})}(e);throw n}function Qe(e){if("function"==typeof e&&!e.length)return Qe(e());if(Array.isArray(e)){for(var t=[],n=0;n<e.length;n++){var r=Qe(e[n]);Array.isArray(r)?t.push.apply(t,r):t.push(r)}return t}return e}function Je(e,t){return function(t){var n;return Ie((()=>n=_e((()=>(ye.context=A(A({},ye.context),{},{[e]:t.value}),Be((()=>t.children)))))),void 0),n}}var Ze=Symbol("fallback");function et(e){for(var t=0;t<e.length;t++)e[t]()}function tt(e,t){return _e((()=>e(t||{})))}function nt(){return!0}var rt={get:(e,t,n)=>t===de?n:e.get(t),has:(e,t)=>t===de||e.has(t),set:nt,deleteProperty:nt,getOwnPropertyDescriptor:(e,t)=>({configurable:!0,enumerable:!0,get:()=>e.get(t),set:nt,deleteProperty:nt}),ownKeys:e=>e.keys()};function it(e){return(e="function"==typeof e?e():e)?e:{}}function at(){for(var e=0,t=this.length;e<t;++e){var n=this[e]();if(void 0!==n)return n}}function ot(...e){for(var t=!1,n=0;n<e.length;n++){var r=e[n];t=t||!!r&&de in r,e[n]="function"==typeof r?(t=!0,Ce(r)):r}if(t)return new Proxy({get(t){for(var n=e.length-1;n>=0;n--){var r=it(e[n])[t];if(void 0!==r)return r}},has(t){for(var n=e.length-1;n>=0;n--)if(t in it(e[n]))return!0;return!1},keys(){for(var t=[],n=0;n<e.length;n++)t.push(...Object.keys(it(e[n])));return[...new Set(t)]}},rt);for(var i={},a=Object.create(null),o=e.length-1;o>=0;o--){var s=e[o];if(s)for(var u=Object.getOwnPropertyNames(s),l=function(){var e=u[c];if("__proto__"===e||"constructor"===e)return 1;var t=Object.getOwnPropertyDescriptor(s,e);if(a[e]){var n=i[e];n&&(t.get?n.push(t.get.bind(s)):void 0!==t.value&&n.push((()=>t.value)))}else a[e]=t.get?{enumerable:!0,configurable:!0,get:at.bind(i[e]=[t.get.bind(s)])}:void 0!==t.value?t:void 0},c=u.length-1;c>=0;c--)l()}for(var d={},h=Object.keys(a),f=h.length-1;f>=0;f--){var p=h[f],g=a[p];g&&g.get?Object.defineProperty(d,p,g):d[p]=g?g.value:void 0}return d}var st=e=>`Stale read from <${e}>.`;function ut(e){var t="fallback"in e&&{fallback:()=>e.fallback};return Ce(function(e,t,n={}){var r=[],i=[],a=[],o=0,s=t.length>1?[]:null;return Ne((()=>et(a))),()=>{var u,l,c=e()||[];return c[he],_e((()=>{var e,t,h,f,p,g,m,v,y,b=c.length;if(0===b)0!==o&&(et(a),a=[],r=[],i=[],o=0,s&&(s=[])),n.fallback&&(r=[Ze],i[0]=Se((e=>(a[0]=e,n.fallback()))),o=1);else if(0===o){for(i=new Array(b),l=0;l<b;l++)r[l]=c[l],i[l]=Se(d);o=b}else{for(h=new Array(b),f=new Array(b),s&&(p=new Array(b)),g=0,m=Math.min(o,b);g<m&&r[g]===c[g];g++);for(m=o-1,v=b-1;m>=g&&v>=g&&r[m]===c[v];m--,v--)h[v]=i[m],f[v]=a[m],s&&(p[v]=s[m]);for(e=new Map,t=new Array(v+1),l=v;l>=g;l--)y=c[l],u=e.get(y),t[l]=void 0===u?-1:u,e.set(y,l);for(u=g;u<=m;u++)y=r[u],void 0!==(l=e.get(y))&&-1!==l?(h[l]=i[u],f[l]=a[u],s&&(p[l]=s[u]),l=t[l],e.set(y,l)):a[u]();for(l=g;l<b;l++)l in h?(i[l]=h[l],a[l]=f[l],s&&(s[l]=p[l],s[l](l))):i[l]=Se(d);i=i.slice(0,o=b),r=c.slice(0)}return i}));function d(e){if(a[l]=e,s){var n=E(Ee(l),2),r=n[0],i=n[1];return s[l]=i,t(c[l],r)}return t(c[l])}}}((()=>e.each),e.children,t||void 0))}function lt(e){var t=e.keyed,n=Ce((()=>e.when),void 0,{equals:(e,n)=>t?e===n:!e==!n});return Ce((()=>{var r=n();if(r){var i=e.children;return"function"==typeof i&&i.length>0?_e((()=>i(t?r:()=>{if(!_e(n))throw st("Show");return e.when}))):i}return e.fallback}),void 0,void 0)}var ct=E(Ee(void 0),2),dt=ct[0],ht=ct[1];class ft{constructor(e){S(this,"releaseCallback",void 0),this.releaseCallback=e}}class pt extends ft{constructor(e,t){var n,r;super(e),S(this,"textureMap",new Map),S(this,"zeroReferenceTextureSet",new Set),S(this,"options",void 0),this.options={textureCleanupIntervalMs:null!==(n=t.textureCleanupIntervalMs)&&void 0!==n?n:1e4,textureCleanupAgeThreadholdMs:null!==(r=t.textureCleanupAgeThreadholdMs)&&void 0!==r?r:6e4},setInterval((()=>{var e,t=Date.now(),n=this.options.textureCleanupAgeThreadholdMs,r=I(this.zeroReferenceTextureSet);try{for(r.s();!(e=r.n()).done;){var i=e.value;t-i.lastUpdate>n&&(this.releaseCallback(i.id),this.textureMap.delete(i.id),this.zeroReferenceTextureSet.delete(i))}}catch(a){r.e(a)}finally{r.f()}}),this.options.textureCleanupIntervalMs)}registerTexture(e){var t,n=null===(t=e.options)||void 0===t?void 0:t.id;if(k(n,"Texture must have an id to be registered"),!this.textureMap.has(n)){var r={id:n,nodeRefCount:0,lastUpdate:Date.now()};this.textureMap.set(n,r),this.zeroReferenceTextureSet.add(r)}}incrementTextureRefCount(e){var t,n=null===(t=e.options)||void 0===t?void 0:t.id;k(n,"Texture must have an id to be registered");var r=this.textureMap.get(n);r||(this.registerTexture(e),r=this.textureMap.get(n)),k(r,"Texture must have been registered"),"SubTexture"===e.txType&&this.incrementTextureRefCount(e.props.texture),r.nodeRefCount++,r.lastUpdate=Date.now(),this.zeroReferenceTextureSet.has(r)&&this.zeroReferenceTextureSet.delete(r)}decrementTextureRefCount(e){var t,n=null===(t=e.options)||void 0===t?void 0:t.id;k(n,"Texture must have an id to be registered");var r=this.textureMap.get(n);k(r,"Texture must have been registered"),r.nodeRefCount--,r.lastUpdate=Date.now(),0===r.nodeRefCount&&this.zeroReferenceTextureSet.add(r),"SubTexture"===e.txType&&this.decrementTextureRefCount(e.props.texture)}}class gt extends ft{constructor(e){super(e),S(this,"registry",void 0),this.registry=new FinalizationRegistry(e)}registerTexture(e){var t,n;k(null===(t=e.options)||void 0===t?void 0:t.id,"Texture must have an ID to be registered"),this.registry.register(e,null===(n=e.options)||void 0===n?void 0:n.id)}incrementTextureRefCount(){}decrementTextureRefCount(){}}var mt={alpha:e=>1===e?null:{prop:"opacity",value:`${e}`},x:e=>({prop:"left",value:`${e}px`}),y:e=>({prop:"top",value:`${e}px`}),width:e=>0===e?null:{prop:"width",value:`${e}px`},height:e=>0===e?null:{prop:"height",value:`${e}px`},zIndex:()=>"zIndex",fontFamily:()=>"font-family",fontSize:()=>"font-size",fontStyle:()=>"font-style",fontWeight:()=>"font-weight",fontStretch:()=>"font-stretch",lineHeight:()=>"line-height",letterSpacing:()=>"letter-spacing",textAlign:()=>"text-align",overflowSuffix:()=>"overflow-suffix",maxLines:()=>"max-lines",contain:()=>"contain",verticalAlign:()=>"vertical-align",clipping:e=>!1===e?null:{prop:"overflow",value:e?"hidden":"visible"},rotation:e=>0===e?null:{prop:"transform",value:`rotate(${e}rad)`},scale:e=>1===e?null:{prop:"transform",value:`scale(${e})`},scaleX:e=>1===e?null:{prop:"transform",value:`scaleX(${e})`},scaleY:e=>1===e?null:{prop:"transform",value:`scaleY(${e})`},color:e=>0===e?null:{prop:"color",value:vt(e)}},vt=e=>`rgba(${e>>24&255},${e>>16&255},${e>>8&255},${(255&e)/255})`,yt={id:"id"};class bt{constructor(e,t){var n,r,i,a,o,s;if(S(this,"root",null),S(this,"canvas",null),S(this,"height",1080),S(this,"width",1920),S(this,"scaleX",1),S(this,"scaleY",1),!C()){if(!t)throw new Error("settings is required");this.height=Math.ceil(null!==(n=t.appHeight)&&void 0!==n?n:1080/(null!==(r=t.deviceLogicalPixelRatio)&&void 0!==r?r:1)),this.width=Math.ceil(null!==(i=t.appWidth)&&void 0!==i?i:1900/(null!==(a=t.deviceLogicalPixelRatio)&&void 0!==a?a:1)),this.scaleX=null!==(o=t.deviceLogicalPixelRatio)&&void 0!==o?o:1,this.scaleY=null!==(s=t.deviceLogicalPixelRatio)&&void 0!==s?s:1,this.canvas=e,this.root=document.createElement("div"),this.setRootPosition(),document.body.appendChild(this.root),new MutationObserver(this.setRootPosition.bind(this)).observe(e,{attributes:!0,childList:!1,subtree:!1}),new ResizeObserver(this.setRootPosition.bind(this)).observe(e),window.addEventListener("resize",this.setRootPosition.bind(this)),console.warn("Inspector is enabled, this will impact performance")}}setRootPosition(){if(null!==this.root&&null!==this.canvas){var e=this.canvas.getBoundingClientRect(),t=document.documentElement.scrollTop+e.top,n=document.documentElement.scrollLeft+e.left;this.root.id="root",this.root.style.left=`${n}px`,this.root.style.top=`${t}px`,this.root.style.width=`${this.width}px`,this.root.style.height=`${this.height}px`,this.root.style.position="absolute",this.root.style.transformOrigin="0 0 0",this.root.style.transform=`scale(${this.scaleX}, ${this.scaleY})`,this.root.style.overflow="hidden",this.root.style.zIndex="65534"}}createDiv(e,t){var n=document.createElement("div");for(var r in n.style.position="absolute",n.id=e.id.toString(),t)this.updateNodeProperty(n,r,t[r]);return n}createNode(e,t){var n=e.createNode(t),r=this.createDiv(n,t);return r.node=n,n.div=r,this.createProxy(n,r)}createTextNode(e,t){var n=e.createTextNode(t),r=this.createDiv(n,t);return r.node=n,n.div=r,this.createProxy(n,r)}createProxy(e,t){return new Proxy(e,{set:(e,n,r)=>(this.updateNodeProperty(t,n,r),Reflect.set(e,n,r)),get:(n,r,i)=>("destroy"===r&&this.destroyNode(n),"animate"===r?(r,i)=>{var a=n.animate(r,i);return new Proxy(a,{get:(n,a,o)=>("start"===a&&this.animateNode(t,e,r,i),Reflect.get(n,a,o))})}:Reflect.get(n,r,i))})}destroyNode(e){var t=document.getElementById(e.id.toString());null==t||t.remove()}updateNodeProperty(e,t,n){if(null!==this.root&&null!=n)if("parent"!==t){if("text"===t)return e.innerHTML=String(n),void(e.style.visibility="hidden");if("src"===t&&n)e.setAttribute("data-src",String(n));else{if(mt[t]){var r,i=null===(r=mt[t])||void 0===r?void 0:r.call(mt,n);if(null===i)return;return"string"==typeof i?void e.style.setProperty(i,String(n)):void("object"==typeof i&&e.style.setProperty(i.prop,i.value))}if(yt[t])e.setAttribute(String(mt[t]),String(n));else if("data"!==t);else for(var a in n){var o=n[a];void 0===o?e.removeAttribute(`data-${a}`):e.setAttribute(`data-${a}`,String(o))}}}else{var s=n.id;if(1===s)return void this.root.appendChild(e);var u=document.getElementById(s.toString());null==u||u.appendChild(e)}}animateNode(e,t,n,r){var i=r.duration,a=void 0===i?1e3:i,o=r.delay,s=void 0===o?0:o,u=n.x,l=n.y,c=n.width,d=n.height,h=n.alpha,f=void 0===h?1:h,p=n.rotation,g=void 0===p?0:p,m=n.scale,v=void 0===m?1:m,y=n.color;setTimeout((function(){setTimeout((()=>{e.style.top=`${l}px`,e.style.left=`${u}px`,e.style.width=`${c}px`,e.style.height=`${d}px`,e.style.opacity=`${f}`,e.style.rotate=`${g}rad`,e.style.scale=`${v}`,e.style.color=vt(y)}),a)}),s)}}class xt{static getEffectKey(e){return""}static getMethodParameters(e,t){var n=[];for(var r in e){var i=e[r],a="";i.size&&(a=`[${i.size(t)}]`),n.push(`${i.type} ${r}${a}`)}return n.join(",")}constructor(e){S(this,"priority",1),S(this,"name",""),S(this,"ref",void 0),S(this,"target",void 0),S(this,"passParameters",""),S(this,"declaredUniforms",""),S(this,"uniformInfo",{});var t=e.ref,n=e.target,r=e.props,i=void 0===r?{}:r;this.ref=t,this.target=n;var a={},o=[],s="",u=this.constructor.uniforms||{};for(var l in u){var c=u[l],d=c.type,h=`${t}_${l}`,f="";c.size&&(f=`[${c.size(i)}]`),o.push(h),s+=`uniform ${d} ${h}${f};`,a[l]={name:h,uniform:u[l].method}}this.passParameters=o.join(","),this.declaredUniforms=s,this.uniformInfo=a}static resolveDefaults(e){return{}}static makeEffectKey(e){return!1}}S(xt,"uniforms",{}),S(xt,"methods",void 0),S(xt,"onShaderMask",void 0),S(xt,"onColorize",void 0),S(xt,"onEffectMask",void 0);var wt={x:(e,t)=>{e.props.x=t},y:(e,t)=>{e.props.y=t},width:(e,t)=>{e.props.width=t},height:(e,t)=>{e.props.height=t},color:(e,t)=>{e.props.color=t},zIndex:(e,t)=>{e.props.zIndex=t},fontFamily:(e,t)=>{e.props.fontFamily=t},fontWeight:(e,t)=>{e.props.fontWeight=t},fontStyle:(e,t)=>{e.props.fontStyle=t},fontStretch:(e,t)=>{e.props.fontStretch=t},fontSize:(e,t)=>{e.props.fontSize=t},text:(e,t)=>{e.props.text=t},textAlign:(e,t)=>{e.props.textAlign=t},contain:(e,t)=>{e.props.contain=t},offsetY:(e,t)=>{e.props.offsetY=t},scrollable:(e,t)=>{e.props.scrollable=t},scrollY:(e,t)=>{e.props.scrollY=t},letterSpacing:(e,t)=>{e.props.letterSpacing=t},lineHeight:(e,t)=>{e.props.lineHeight=t},maxLines:(e,t)=>{e.props.maxLines=t},textBaseline:(e,t)=>{e.props.textBaseline=t},verticalAlign:(e,t)=>{e.props.verticalAlign=t},overflowSuffix:(e,t)=>{e.props.overflowSuffix=t},debug:(e,t)=>{e.props.debug=t}};class Tt{constructor(e){S(this,"stage",void 0),S(this,"set",void 0),this.stage=e;var t=A(A({},wt),this.getPropertySetters());this.set=Object.freeze(Object.fromEntries(Object.entries(t).map((([e,t])=>[e,(n,r)=>{n.props[e]!==r&&(t(n,r),this.stage.requestRender())}]))))}setStatus(e,t,n){e.status!==t&&(e.status=t,e.emitter.emit(t,n))}setIsRenderable(e,t){e.isRenderable=t}destroyState(e){["loading","loaded","failed"].forEach((t=>{e.emitter.off(t)}))}scheduleUpdateState(e){e.updateScheduled||(e.updateScheduled=!0,queueMicrotask((()=>{e.updateScheduled=!1,this.updateState(e)})))}}class At extends _{constructor(e,t,n){super(e,t),S(this,"fontFace",void 0),S(this,"fontUrl",void 0);var r=n.replace(/\(|\)/g,""),i=this.descriptors,a={style:i.style,weight:"number"==typeof i.weight?`${i.weight}`:i.weight,stretch:i.stretch,unicodeRange:i.unicodeRange,variant:i.variant,featureSettings:i.featureSettings,display:i.display},o=new FontFace(e,`url(${r})`,a);o.load().then((()=>{this.loaded=!0,this.emit("loaded")})).catch(console.error),this.fontFace=o,this.fontUrl=n}}function St(e,t,n,r,i){return n*(r-1)+("bottom"!==e?.5*t:0)+Math.max(n,t)+(i||0)}class Et{constructor(e,t){S(this,"_canvas",void 0),S(this,"_context",void 0),S(this,"_settings",void 0),S(this,"renderInfo",void 0),this._canvas=e,this._context=t,this._settings=this.mergeDefaults({})}set settings(e){this._settings=this.mergeDefaults(e)}get settings(){return this._settings}getPrecision(){return this._settings.precision}setFontProperties(){this._context.font=this._getFontSetting(),this._context.textBaseline=this._settings.textBaseline}_getFontSetting(){for(var e=[this._settings.fontFace],t=[],n=0,r=e.length;n<r;n++)"serif"===e[n]||"sans-serif"===e[n]?t.push(e[n]):t.push(`"${e[n]}"`);return`${this._settings.fontStyle} ${this._settings.fontSize*this.getPrecision()}px ${t.join(",")}`}_load(){if(document.fonts){var e=this._getFontSetting();try{if(!document.fonts.check(e,this._settings.text))return document.fonts.load(e,this._settings.text).catch((t=>{console.warn("[Lightning] Font load error",t,e)})).then((()=>{document.fonts.check(e,this._settings.text)||console.warn("[Lightning] Font not found",e)}))}catch(t){console.warn("[Lightning] Can't check font loading for "+e)}}}calculateRenderInfo(){var e={},t=this.getPrecision(),n=this._settings.paddingLeft*t,r=this._settings.paddingRight*t,i=this._settings.fontSize*t,a=null===this._settings.offsetY?null:this._settings.offsetY*t,o=(this._settings.lineHeight||i)*t,s=this._settings.w*t,u=this._settings.h*t,l=this._settings.wordWrapWidth*t,c=this._settings.cutSx*t,d=this._settings.cutEx*t,h=this._settings.cutSy*t,f=this._settings.cutEy*t,p=(this._settings.letterSpacing||0)*t,g=this._settings.textIndent*t;this.setFontProperties();var m,v=s||2048/this.getPrecision(),y=v-n;if(y<10&&(v+=10-y,y=10),l||(l=y),this._settings.textOverflow&&!this._settings.wordWrap){var b;switch(this._settings.textOverflow){case"clip":b="";break;case"ellipsis":b=this._settings.overflowSuffix;break;default:b=this._settings.textOverflow}this._settings.text=this.wrapWord(this._settings.text,l-g,b)}if(this._settings.wordWrap)m=this.wrapText(this._settings.text,l,p,g);else for(var x=(m={l:this._settings.text.split(/(?:\r\n|\r|\n)/),n:[]}).l.length,w=0;w<x-1;w++)m.n.push(w);var T=m.l;if(this._settings.maxLines&&T.length>this._settings.maxLines){var A,S=T.slice(0,this._settings.maxLines),E=null;if(this._settings.overflowSuffix){var I=this._settings.overflowSuffix?this.measureText(this._settings.overflowSuffix):0,k=this.wrapText(S[S.length-1],l-I,p,g);S[S.length-1]=`${k.l[0]}${this._settings.overflowSuffix}`,E=[k.l.length>1?k.l[1]:""]}else E=[""];var C=T.length,_=0,M=m.n.length;for(A=this._settings.maxLines;A<C;A++)E[_]+=`${E[_]?" ":""}${T[A]}`,A+1<M&&m.n[A+1]&&_++;e.remainingText=E.join("\n"),e.moreTextLines=!0,T=S}else e.moreTextLines=!1,e.remainingText="";for(var R,N=0,L=[],D=0;D<T.length;D++){var P=this.measureText(T[D],p)+(0===D?g:0);L.push(P),N=Math.max(N,P)}return e.lineWidths=L,s||(v=N+n+r,y=N),o=o||i,R=u||St(this._settings.textBaseline,i,o,T.length,a),null===a&&(a=i),e.w=v,e.h=R,e.lines=T,e.precision=t,v||(v=1),R||(R=1),(c||d)&&(v=Math.min(v,d-c)),(h||f)&&(R=Math.min(R,f-h)),e.width=v,e.innerWidth=y,e.height=R,e.fontSize=i,e.cutSx=c,e.cutSy=h,e.cutEx=d,e.cutEy=f,e.lineHeight=o,e.lineWidths=L,e.offsetY=a,e.paddingLeft=n,e.paddingRight=r,e.letterSpacing=p,e.textIndent=g,e}draw(e,t){var n,r,i=this.getPrecision(),a=(null==t?void 0:t.lines)||e.lines,o=(null==t?void 0:t.lineWidths)||e.lineWidths,s=t?St(this._settings.textBaseline,e.fontSize,e.lineHeight,t.lines.length,null===this._settings.offsetY?null:this._settings.offsetY*i):e.height;this._canvas.width=Math.min(Math.ceil(e.width+this._settings.textRenderIssueMargin),2048),this._canvas.height=Math.min(Math.ceil(s),2048),this.setFontProperties(),e.fontSize>=128&&(this._context.globalAlpha=.01,this._context.fillRect(0,0,.01,.01),this._context.globalAlpha=1),(e.cutSx||e.cutSy)&&this._context.translate(-e.cutSx,-e.cutSy);for(var u=[],l=0,c=a.length;l<c;l++)n=0===l?e.textIndent:0,r=l*e.lineHeight+e.offsetY,"middle"==this._settings.verticalAlign?r+=(e.lineHeight-e.fontSize)/2:"bottom"==this._settings.verticalAlign&&(r+=e.lineHeight-e.fontSize),"right"===this._settings.textAlign?n+=e.innerWidth-o[l]:"center"===this._settings.textAlign&&(n+=(e.innerWidth-o[l])/2),n+=e.paddingLeft,u.push({text:a[l],x:n,y:r,w:o[l]});if(this._settings.highlight){var d=this._settings.highlightColor,h=this._settings.highlightHeight*i||1.5*e.fontSize,f=this._settings.highlightOffset*i,p=null!==this._settings.highlightPaddingLeft?this._settings.highlightPaddingLeft*i:e.paddingLeft,g=null!==this._settings.highlightPaddingRight?this._settings.highlightPaddingRight*i:e.paddingRight;this._context.fillStyle=M(d);for(var m=0;m<u.length;m++){var v=u[m];this._context.fillRect(v.x-p,v.y-e.offsetY+f,v.w+g+p,h)}}var y=null;this._settings.shadow&&(y=[this._context.shadowColor,this._context.shadowOffsetX,this._context.shadowOffsetY,this._context.shadowBlur],this._context.shadowColor=M(this._settings.shadowColor),this._context.shadowOffsetX=this._settings.shadowOffsetX*i,this._context.shadowOffsetY=this._settings.shadowOffsetY*i,this._context.shadowBlur=this._settings.shadowBlur*i),this._context.fillStyle=M(this._settings.textColor);for(var b=0,x=u.length;b<x;b++){var w=u[b];if(0===e.letterSpacing)this._context.fillText(w.text,w.x,w.y);else for(var T=w.text.split(""),A=w.x,S=0,E=T.length;S<E;S++)this._context.fillText(T[S],A,w.y),A+=this.measureText(T[S],e.letterSpacing)}y&&(this._context.shadowColor=y[0],this._context.shadowOffsetX=y[1],this._context.shadowOffsetY=y[2],this._context.shadowBlur=y[3]),(e.cutSx||e.cutSy)&&this._context.translate(e.cutSx,e.cutSy),this.renderInfo=e}wrapWord(e,t,n){var r=this._context.measureText(n).width,i=e.length,a=this._context.measureText(e).width;if(a<=t)return e;var o=Math.floor(t*i/a),s=this._context.measureText(e.substring(0,o)).width+r;if(s>t)for(;o>0&&(s=this._context.measureText(e.substring(0,o)).width+r)>t;)o-=1;else for(;o<i;){if(!((s=this._context.measureText(e.substring(0,o)).width+r)<t)){o-=1;break}o+=1}return e.substring(0,o)+(t>=r?n:"")}wrapText(e,t,n,r=0){for(var i=e.split(/\r?\n/g),a=[],o=[],s=0;s<i.length;s++){for(var u=[],l="",c=t-r,d=i[s].split(" "),h=0;h<d.length;h++){var f=this.measureText(d[h],n),p=f+this.measureText(" ",n);0===h||p>c?(h>0&&(u.push(l),l=""),l+=d[h],c=t-f-(0===h?r:0)):(c-=p,l+=` ${d[h]}`)}u.push(l),l="",a=a.concat(u),s<i.length-1&&o.push(a.length)}return{l:a,n:o}}measureText(e,t=0){return t?e.split("").reduce(((e,n)=>e+this._context.measureText(n).width+t),0):this._context.measureText(e).width}mergeDefaults(e){return A({text:"",w:0,h:0,fontStyle:"normal",fontSize:40,fontFace:null,wordWrap:!0,wordWrapWidth:0,wordBreak:!1,textOverflow:"",lineHeight:null,textBaseline:"alphabetic",textAlign:"left",verticalAlign:"top",offsetY:null,maxLines:0,overflowSuffix:"...",textColor:[1,1,1,1],paddingLeft:0,paddingRight:0,shadow:!1,shadowColor:[0,0,0,1],shadowOffsetX:0,shadowOffsetY:0,shadowBlur:5,highlight:!1,highlightHeight:0,highlightColor:[0,0,0,1],highlightOffset:0,highlightPaddingLeft:0,highlightPaddingRight:0,letterSpacing:0,textIndent:0,cutSx:0,cutEx:0,cutSy:0,cutEy:0,advancedRenderer:!1,fontBaselineRatio:0,precision:1,textRenderIssueMargin:0},e)}}var It="undefined"==typeof self?globalThis:self,kt=(null===(x=It.document)||void 0===x?void 0:x.fonts)||It.fonts;var Ct=L(0,0,0,0);class _t extends Tt{constructor(e){super(e),S(this,"canvas",void 0),S(this,"context",void 0),S(this,"rendererBounds",void 0),"undefined"!=typeof OffscreenCanvas?this.canvas=new OffscreenCanvas(0,0):this.canvas=document.createElement("canvas");var t=this.canvas.getContext("2d");t||(this.canvas=document.createElement("canvas"),t=this.canvas.getContext("2d")),k(t),this.context=t,this.rendererBounds={x1:0,y1:0,x2:this.stage.options.appWidth,y2:this.stage.options.appHeight}}getPropertySetters(){return{fontFamily:(e,t)=>{e.props.fontFamily=t,e.fontInfo=void 0,this.invalidateLayoutCache(e)},fontWeight:(e,t)=>{e.props.fontWeight=t,e.fontInfo=void 0,this.invalidateLayoutCache(e)},fontStyle:(e,t)=>{e.props.fontStyle=t,e.fontInfo=void 0,this.invalidateLayoutCache(e)},fontStretch:(e,t)=>{e.props.fontStretch=t,e.fontInfo=void 0,this.invalidateLayoutCache(e)},fontSize:(e,t)=>{e.props.fontSize=t,e.fontInfo=void 0,this.invalidateLayoutCache(e)},text:(e,t)=>{e.props.text=t,this.invalidateLayoutCache(e)},textAlign:(e,t)=>{e.props.textAlign=t,this.invalidateLayoutCache(e)},color:(e,t)=>{e.props.color=t,this.invalidateLayoutCache(e)},x:(e,t)=>{e.props.x=t,this.invalidateVisibleWindowCache(e)},y:(e,t)=>{e.props.y=t,this.invalidateVisibleWindowCache(e)},contain:(e,t)=>{e.props.contain=t,this.invalidateLayoutCache(e)},width:(e,t)=>{e.props.width=t,"none"!==e.props.contain&&this.invalidateLayoutCache(e)},height:(e,t)=>{e.props.height=t,"both"===e.props.contain&&this.invalidateLayoutCache(e)},offsetY:(e,t)=>{e.props.offsetY=t,this.invalidateLayoutCache(e)},scrollY:(e,t)=>{e.props.scrollY=t},letterSpacing:(e,t)=>{e.props.letterSpacing=t,this.invalidateLayoutCache(e)},lineHeight:(e,t)=>{e.props.lineHeight=t,this.invalidateLayoutCache(e)},maxLines:(e,t)=>{e.props.maxLines=t,this.invalidateLayoutCache(e)},textBaseline:(e,t)=>{e.props.textBaseline=t,this.invalidateLayoutCache(e)},verticalAlign:(e,t)=>{e.props.verticalAlign=t,this.invalidateLayoutCache(e)},overflowSuffix:(e,t)=>{e.props.overflowSuffix=t,this.invalidateLayoutCache(e)}}}canRenderFont(e){return!0}isFontFaceSupported(e){return e instanceof At}addFontFace(e){k(e instanceof At),kt.add(e.fontFace)}createState(e){return{props:e,status:"initialState",updateScheduled:!1,emitter:new R,canvasPages:void 0,lightning2TextRenderer:new Et(this.canvas,this.context),renderWindow:void 0,visibleWindow:{x1:0,y1:0,x2:0,y2:0,valid:!1},renderInfo:void 0,forceFullLayoutCalc:!1,textW:0,textH:0,fontInfo:void 0,fontFaceLoadedHandler:void 0,isRenderable:!1,debugData:{updateCount:0,layoutCount:0,drawCount:0,lastLayoutNumCharacters:0,layoutSum:0,drawSum:0,bufferSize:0}}}updateState(e){if("initialState"===e.status&&this.setStatus(e,"loading"),!e.fontInfo){var t=(n=e.props,r=n.fontFamily,[n.fontStyle,n.fontWeight,n.fontStretch,`${n.fontSize}px`,r].join(" "));if(e.fontInfo={cssString:t,loaded:!1},!e.fontInfo.loaded)return void kt.load(t).then(this.onFontLoaded.bind(this,e,t)).catch(this.onFontLoadError.bind(this,e,t))}var n,r;if(e.fontInfo.loaded){if(!e.renderInfo){var i=e.props.maxLines,a="both"===e.props.contain?Math.floor((e.props.height-e.props.offsetY)/e.props.lineHeight):0,o=a>0&&i>0?Math.min(a,i):Math.max(a,i);e.lightning2TextRenderer.settings={text:e.props.text,textAlign:e.props.textAlign,fontFace:e.props.fontFamily,fontSize:e.props.fontSize,fontStyle:[e.props.fontStretch,e.props.fontStyle,e.props.fontWeight].join(" "),textColor:N(e.props.color),offsetY:e.props.fontSize+e.props.offsetY,wordWrap:"none"!==e.props.contain,wordWrapWidth:"none"===e.props.contain?void 0:e.props.width,letterSpacing:e.props.letterSpacing,lineHeight:e.props.lineHeight,maxLines:o,textBaseline:e.props.textBaseline,verticalAlign:e.props.verticalAlign,overflowSuffix:e.props.overflowSuffix},e.renderInfo=e.lightning2TextRenderer.calculateRenderInfo(),e.textH=e.renderInfo.lineHeight*e.renderInfo.lines.length,e.textW=e.renderInfo.width,e.renderWindow=void 0}var s=e.props,u=s.x,l=s.y,c=s.width,d=s.height,h=s.scrollY,f=s.contain,p=e.visibleWindow,g=e.renderWindow,m=e.canvasPages;if(!p.valid){var v=L(u,l,"none"!==f?u+c:1/0,"both"===f?l+d:1/0,Ct);D(this.rendererBounds,v,p),p.valid=!0}var y=p.y2-p.y1,b=Math.ceil(y/e.renderInfo.lineHeight);if(0===y)return m=void 0,g=void 0,void this.setStatus(e,"loaded");if(g&&m){var x=u+g.x1,w=l-h+g.y1,T=u+g.x2,A=l-h+g.y2;if(x<=p.x1&&T>=p.x2&&w<=p.y1&&A>=p.y2)return void this.setStatus(e,"loaded");A<p.y2?(g.y1+=b*e.renderInfo.lineHeight,g.y2+=b*e.renderInfo.lineHeight,m.push(m.shift()),m[2].lineNumStart=m[1].lineNumStart+b,m[2].lineNumEnd=m[2].lineNumStart+b,m[2].valid=!1):w>p.y1&&(g.y1-=b*e.renderInfo.lineHeight,g.y2-=b*e.renderInfo.lineHeight,m.unshift(m.pop()),m[0].lineNumStart=m[1].lineNumStart-b,m[0].lineNumEnd=m[0].lineNumStart+b,m[0].valid=!1)}else{var S,E,k,C=e.renderInfo.lineHeight*b,_=Math.ceil(h/C),M=_*b,R=M-b,P=M+b;m=[{texture:null===(S=m)||void 0===S?void 0:S[0].texture,lineNumStart:R,lineNumEnd:R+b,valid:!1},{texture:null===(E=m)||void 0===E?void 0:E[1].texture,lineNumStart:M,lineNumEnd:M+b,valid:!1},{texture:null===(k=m)||void 0===k?void 0:k[2].texture,lineNumStart:P,lineNumEnd:P+b,valid:!1}],e.canvasPages=m;var O=_*C;g={x1:0,y1:O-C,x2:c,y2:O+2*C}}e.renderWindow=g,performance.now();var U,B=I(m);try{for(B.s();!(U=B.n()).done;){var j=U.value;if(!j.valid)if(j.lineNumStart<0){var F;null===(F=j.texture)||void 0===F||F.setRenderableOwner(e,!1),j.texture=this.stage.txManager.loadTexture("ImageTexture",{src:""}),j.texture.setRenderableOwner(e,e.isRenderable),j.valid=!0}else{var z;if(e.lightning2TextRenderer.draw(e.renderInfo,{lines:e.renderInfo.lines.slice(j.lineNumStart,j.lineNumEnd),lineWidths:e.renderInfo.lineWidths.slice(j.lineNumStart,j.lineNumEnd)}),0!==this.canvas.width&&0!==this.canvas.height)null===(z=j.texture)||void 0===z||z.setRenderableOwner(e,!1),j.texture=this.stage.txManager.loadTexture("ImageTexture",{src:this.context.getImageData(0,0,this.canvas.width,this.canvas.height)},{preload:!0}),j.texture.setRenderableOwner(e,e.isRenderable);j.valid=!0}}}catch(G){B.e(G)}finally{B.f()}this.setStatus(e,"loaded")}}renderQuads(e,t,n,r){var i=this.stage,a=e.canvasPages,o=e.textW,s=void 0===o?0:o,u=e.textH,l=void 0===u?0:u,c=e.renderWindow;if(a&&c){var d=e.props,h=d.x,f=d.y,p=d.scrollY,g=d.contain,m=d.width,v=d.height,y={x:h,y:f,width:"none"!==g?m:s,height:"both"===g?v:l};P({x:0,y:0,width:i.options.appWidth,height:i.options.appHeight},y),k(a,"canvasPages is not defined"),k(c,"renderWindow is not defined");var b,x,w,T,A,S,E=(c.y2-c.y1)/3,I=e.props,C=I.zIndex,_=I.color,M=r*O(_),R=U(4294967295,M);if(a[0].valid)this.stage.renderer.addQuad({alpha:M,clippingRect:n,colorBl:R,colorBr:R,colorTl:R,colorTr:R,width:(null===(b=a[0].texture)||void 0===b||null===(b=b.dimensions)||void 0===b?void 0:b.width)||0,height:(null===(x=a[0].texture)||void 0===x||null===(x=x.dimensions)||void 0===x?void 0:x.height)||0,texture:a[0].texture,textureOptions:{},shader:null,shaderProps:null,zIndex:C,tx:t.tx,ty:t.ty-p+c.y1,ta:t.ta,tb:t.tb,tc:t.tc,td:t.td});if(a[1].valid)this.stage.renderer.addQuad({alpha:M,clippingRect:n,colorBl:R,colorBr:R,colorTl:R,colorTr:R,width:(null===(w=a[1].texture)||void 0===w||null===(w=w.dimensions)||void 0===w?void 0:w.width)||0,height:(null===(T=a[1].texture)||void 0===T||null===(T=T.dimensions)||void 0===T?void 0:T.height)||0,texture:a[1].texture,textureOptions:{},shader:null,shaderProps:null,zIndex:C,tx:t.tx,ty:t.ty-p+c.y1+E,ta:t.ta,tb:t.tb,tc:t.tc,td:t.td});if(a[2].valid)this.stage.renderer.addQuad({alpha:M,clippingRect:n,colorBl:R,colorBr:R,colorTl:R,colorTr:R,width:(null===(A=a[2].texture)||void 0===A||null===(A=A.dimensions)||void 0===A?void 0:A.width)||0,height:(null===(S=a[2].texture)||void 0===S||null===(S=S.dimensions)||void 0===S?void 0:S.height)||0,texture:a[2].texture,textureOptions:{},shader:null,shaderProps:null,zIndex:C,tx:t.tx,ty:t.ty-p+c.y1+E+E,ta:t.ta,tb:t.tb,tc:t.tc,td:t.td})}}setIsRenderable(e,t){var n;super.setIsRenderable(e,t),null===(n=e.canvasPages)||void 0===n||n.forEach((n=>{var r;null===(r=n.texture)||void 0===r||r.setRenderableOwner(e,t)}))}destroyState(e){var t;null===(t=e.canvasPages)||void 0===t||t.forEach((t=>{var n;null===(n=t.texture)||void 0===n||n.setRenderableOwner(e,!1)}))}invalidateVisibleWindowCache(e){e.visibleWindow.valid=!1,this.setStatus(e,"loading"),this.scheduleUpdateState(e)}invalidateLayoutCache(e){e.renderInfo=void 0,e.visibleWindow.valid=!1,this.setStatus(e,"loading"),this.scheduleUpdateState(e)}onFontLoaded(e,t){var n;t===(null===(n=e.fontInfo)||void 0===n?void 0:n.cssString)&&e.fontInfo&&(e.fontInfo.loaded=!0,this.scheduleUpdateState(e))}onFontLoadError(e,t,n){var r;t===(null===(r=e.fontInfo)||void 0===r?void 0:r.cssString)&&e.fontInfo&&(e.fontInfo.loaded=!0,console.error(`CanvasTextRenderer: Error loading font '${e.fontInfo.cssString}'`,n),this.scheduleUpdateState(e))}}class Mt extends B{constructor(e){super({renderer:e,attributes:["a_position","a_textureCoordinate","a_color"],uniforms:[{name:"u_resolution",uniform:"uniform2fv"},{name:"u_pixelRatio",uniform:"uniform1f"},{name:"u_texture",uniform:"uniform2fv"}]})}bindTextures(e){var t=this.glw;t.activeTexture(0),t.bindTexture(e[0].ctxTexture)}}S(Mt,"shaderSources",{vertex:"\n      # ifdef GL_FRAGMENT_PRESICISON_HIGH\n      precision highp float;\n      # else\n      precision mediump float;\n      # endif\n\n      attribute vec2 a_position;\n      attribute vec2 a_textureCoordinate;\n      attribute vec4 a_color;\n\n      uniform vec2 u_resolution;\n      uniform float u_pixelRatio;\n\n\n      varying vec4 v_color;\n      varying vec2 v_textureCoordinate;\n\n      void main() {\n        vec2 normalized = a_position * u_pixelRatio;\n        vec2 screenSpace = vec2(2.0 / u_resolution.x, -2.0 / u_resolution.y);\n\n        v_color = a_color;\n        v_textureCoordinate = a_textureCoordinate;\n\n        gl_Position = vec4(normalized.x * screenSpace.x - 1.0, normalized.y * -abs(screenSpace.y) + 1.0, 0.0, 1.0);\n        gl_Position.y = -sign(screenSpace.y) * gl_Position.y;\n      }\n    ",fragment:"\n      # ifdef GL_FRAGMENT_PRESICISON_HIGH\n      precision highp float;\n      # else\n      precision mediump float;\n      # endif\n\n      uniform vec2 u_resolution;\n      uniform sampler2D u_texture;\n\n      varying vec4 v_color;\n      varying vec2 v_textureCoordinate;\n\n      void main() {\n          vec4 color = texture2D(u_texture, v_textureCoordinate);\n          gl_FragColor = vec4(v_color) * texture2D(u_texture, v_textureCoordinate);\n      }\n    "});class Rt extends B{constructor(e){super({renderer:e,attributes:["a_position","a_textureCoordinate","a_color","a_textureIndex"],uniforms:[{name:"u_resolution",uniform:"uniform2fv"},{name:"u_pixelRatio",uniform:"uniform1f"},{name:"u_textures[0]",uniform:"uniform1iv"}]}),S(this,"supportsIndexedTextures",!0)}bindTextures(e){var t=this.renderer,n=this.glw;if(e.length>t.system.parameters.MAX_VERTEX_TEXTURE_IMAGE_UNITS)throw new Error(`DefaultShaderBatched: Cannot bind more than ${t.system.parameters.MAX_VERTEX_TEXTURE_IMAGE_UNITS} textures`);e.forEach(((e,t)=>{n.activeTexture(t),n.bindTexture(e.ctxTexture)}));var r=Array.from(Array(e.length).keys());this.setUniform("u_textures[0]",r)}}function Nt(e,t){var n,r,i=0;function a(){var a,o,s=n,u=arguments.length;e:for(;s;){if(s.args.length===arguments.length){for(o=0;o<u;o++)if(s.args[o]!==arguments[o]){s=s.next;continue e}return s!==n&&(s===r&&(r=s.prev),s.prev.next=s.next,s.next&&(s.next.prev=s.prev),s.next=n,s.prev=null,n.prev=s,n=s),s.val}s=s.next}for(a=new Array(u),o=0;o<u;o++)a[o]=arguments[o];return s={args:a,val:e.apply(null,a)},n?(n.prev=s,s.next=n):r=s,i===t.maxSize?(r=r.prev).next=null:i++,n=s,s.val}return t=t||{},a.clear=function(){n=null,r=null,i=0},a}S(Rt,"shaderSources",{vertex:"\n      # ifdef GL_FRAGMENT_PRESICISON_HIGH\n      precision highp float;\n      # else\n      precision mediump float;\n      # endif\n\n      attribute vec2 a_textureCoordinate;\n      attribute vec2 a_position;\n      attribute vec4 a_color;\n      attribute float a_textureIndex;\n      attribute float a_depth;\n\n      uniform vec2 u_resolution;\n      uniform float u_pixelRatio;\n\n      varying vec4 v_color;\n      varying vec2 v_textureCoordinate;\n      varying float v_textureIndex;\n\n      void main(){\n        vec2 normalized = a_position * u_pixelRatio / u_resolution;\n        vec2 zero_two = normalized * 2.0;\n        vec2 clip_space = zero_two - 1.0;\n\n        // pass to fragment\n        v_color = a_color;\n        v_textureCoordinate = a_textureCoordinate;\n        v_textureIndex = a_textureIndex;\n\n        // flip y\n        gl_Position = vec4(clip_space * vec2(1.0, -1.0), 0, 1);\n      }\n    ",fragment:e=>`\n      #define txUnits ${e}\n      # ifdef GL_FRAGMENT_PRESICISON_HIGH\n      precision highp float;\n      # else\n      precision mediump float;\n      # endif\n\n      uniform vec2 u_resolution;\n      uniform sampler2D u_image;\n      uniform sampler2D u_textures[txUnits];\n\n      varying vec4 v_color;\n      varying vec2 v_textureCoordinate;\n      varying float v_textureIndex;\n\n      vec4 sampleFromTexture(sampler2D textures[${e}], int idx, vec2 uv) {\n        ${Array.from(Array(e).keys()).map((e=>`\n          ${0!==e?"else ":""}if (idx == ${e}) {\n            return texture2D(textures[${e}], uv);\n          }\n        `)).join("")}\n        return texture2D(textures[0], uv);\n      }\n\n      void main(){\n        gl_FragColor = vec4(v_color) * sampleFromTexture(u_textures, int(v_textureIndex), v_textureCoordinate);\n      }\n    `});var Lt=new Map,Dt=(e,t)=>{var n=JSON.stringify(e);if(Lt.has(n))return Lt.get(n);var r=(null!=e?e:[]).map((e=>({type:e.type,props:t[e.type].resolveDefaults(e.props||{})})));return Lt.set(n,r),r};class Pt extends B{constructor(e,t,n){var r=Pt.createShader(t,n);super({renderer:e,attributes:["a_position","a_textureCoordinate","a_color"],uniforms:[{name:"u_resolution",uniform:"uniform2fv"},{name:"u_pixelRatio",uniform:"uniform1f"},{name:"u_texture",uniform:"uniform2fv"},{name:"u_dimensions",uniform:"uniform2fv"},{name:"u_alpha",uniform:"uniform1f"},...r.uniforms],shaderSources:{vertex:r.vertex,fragment:r.fragment}}),S(this,"effects",[]),this.effects=r.effects,this.calculateProps=Nt(this.calculateProps.bind(this))}bindTextures(e){var t=this.glw;t.activeTexture(0),t.bindTexture(e[0].ctxTexture)}calculateProps(e){var t=this.renderer.shManager.getRegisteredEffects(),n=[];return null==e||e.forEach(((e,r)=>{var i,a=this.effects[r],o=t[a.name],s=null!==(i=e.props)&&void 0!==i?i:{},u=a.uniformInfo;Object.keys(s).forEach((e=>{var t=o.uniforms[e],r=u[e],i=t.validator?t.validator(s[e],s):s[e];Array.isArray(i)&&(i=new Float32Array(i)),n.push({name:r.name,value:i})}))})),n}bindProps(e){this.calculateProps(e.effects).forEach((e=>{this.setUniform(e.name,e.value)}))}canBatchShaderProps(e,t){if(e.$dimensions.width!==t.$dimensions.width||e.$dimensions.height!==t.$dimensions.height||e.effects.length!==t.effects.length)return!1;for(var n=e.effects.length,r=0;r<n;r++){var i=e.effects[r],a=t.effects[r];if(i.type!==a.type)return!1;for(var o in i.props)if(a.props&&!a.props[o]||i.props[o]!==a.props[o])return!1}return!0}static createShader(e,t){var n={},r={},i="",a=[],o=[],s=e.effects.map((e=>{var r=t[e.type],s=r.getEffectKey(e.props||{});n[s]=n[s]?++n[s]:1;var u=n[s];1===u&&o.push({key:s,type:e.type,props:e.props});var l=new r({ref:`${s}${1===u?"":u}`,target:s,props:e.props});return i+=l.declaredUniforms,a.push(...Object.values(l.uniformInfo)),l})),u="";null==o||o.forEach((e=>{var n,i=t[e.type],a=i.resolveDefaults(null!==(n=e.props)&&void 0!==n?n:{}),o=[];for(var s in i.methods){var l=s,c=i.methods[s];r[s]&&r[s]!==c&&(l=Pt.resolveMethodDuplicate(s,c,r)),r[l]=c.replace("function",l),o.push({m:s,cm:l})}var d=i.onShaderMask instanceof Function?i.onShaderMask(a):i.onShaderMask,h=i.onColorize instanceof Function?i.onColorize(a):i.onColorize,f=i.onEffectMask instanceof Function?i.onEffectMask(a):i.onEffectMask;o.forEach((e=>{var t=e.m,n=e.cm,r=new RegExp(`\\$${t}`,"g");d&&(d=d.replace(r,n)),h&&(h=h.replace(r,n)),f&&(f=f.replace(r,n))}));var p=i.getMethodParameters(i.uniforms,a),g=p.length>0?`, ${p}`:"";d&&(u+=`\n        float fx_${e.key}_onShaderMask(float shaderMask ${g}) {\n          ${d}\n        }\n        `),h&&(u+=`\n          vec4 fx_${e.key}_onColorize(float shaderMask, vec4 maskColor, vec4 shaderColor${g}) {\n            ${h}\n          }\n        `),f&&(u+=`\n          vec4 fx_${e.key}_onEffectMask(float shaderMask, vec4 maskColor, vec4 shaderColor${g}) {\n            ${f}\n          }\n        `)}));var l="";for(var c in r)l+=r[c];for(var d="mix(shaderColor, maskColor, clamp(-(lng_DefaultMask), 0.0, 1.0))",h="\n\n    ",f=0;f<s.length;f++){var p=s[f],g=p.passParameters.length>0?`, ${p.passParameters}`:"",m=t[p.name];m.onShaderMask&&(h+=`\n        shaderMask = fx_${p.target}_onShaderMask(shaderMask ${g});\n        `),m.onColorize&&(h+=`\n        maskColor = fx_${p.target}_onColorize(shaderMask, maskColor, shaderColor${g});\n        `),m.onEffectMask&&(d=`fx_${p.target}_onEffectMask(shaderMask, maskColor, shaderColor${g})`);var v=s[f+1];(void 0===v||t[v.name].onEffectMask)&&(h+=`\n          shaderColor = ${d};\n        `)}return{effects:s,uniforms:a,fragment:Pt.fragment(i,l,u,h),vertex:Pt.vertex()}}static resolveMethodDuplicate(e,t,n,r=0){var i=e+(r>0?r:"");return n[i]&&n[i]!==t?this.resolveMethodDuplicate(e,t,n,++r):i}static resolveDefaults(e,t){return{effects:Dt(e.effects,t),$dimensions:{width:0,height:0},$alpha:0}}static makeCacheKey(e,t){var n,r="";return null===(n=e.effects)||void 0===n||n.forEach((e=>{var n=t[e.type].getEffectKey(e.props||{});r+=`,${n}`})),`DynamicShader${r}`}}S(Pt,"z$__type__Props",void 0),S(Pt,"vertex",(()=>"\n    # ifdef GL_FRAGMENT_PRESICISON_HIGH\n    precision highp float;\n    # else\n    precision mediump float;\n    # endif\n\n    attribute vec2 a_textureCoordinate;\n    attribute vec2 a_position;\n    attribute vec4 a_color;\n    attribute float a_textureIndex;\n\n    uniform vec2 u_resolution;\n    uniform float u_pixelRatio;\n\n    varying vec4 v_color;\n    varying vec2 v_textureCoordinate;\n    varying float v_textureIndex;\n\n    void main(){\n      vec2 normalized = a_position * u_pixelRatio / u_resolution;\n      vec2 zero_two = normalized * 2.0;\n      vec2 clip_space = zero_two - 1.0;\n\n      // pass to fragment\n      v_color = a_color;\n      v_textureCoordinate = a_textureCoordinate;\n      v_textureIndex = a_textureIndex;\n\n      // flip y\n      gl_Position = vec4(clip_space * vec2(1.0, -1.0), 0, 1);\n    }\n  ")),S(Pt,"fragment",((e,t,n,r)=>`\n    # ifdef GL_FRAGMENT_PRESICISON_HIGH\n    precision highp float;\n    # else\n    precision mediump float;\n    # endif\n\n    #define PI 3.14159265359\n\n    uniform vec2 u_resolution;\n    uniform vec2 u_dimensions;\n    uniform float u_alpha;\n    uniform float u_radius;\n    uniform sampler2D u_texture;\n    uniform float u_pixelRatio;\n\n    ${e}\n\n    varying vec4 v_color;\n    varying vec2 v_textureCoordinate;\n\n    ${t}\n\n    ${n}\n\n    void main() {\n      vec2 p = v_textureCoordinate.xy * u_dimensions - u_dimensions * 0.5;\n      vec2 d = abs(p) - (u_dimensions) * 0.5;\n      float lng_DefaultMask = min(max(d.x, d.y), 0.0) + length(max(d, 0.0));\n\n      vec4 shaderColor = vec4(0.0);\n      float shaderMask = lng_DefaultMask;\n\n      vec4 maskColor = texture2D(u_texture, v_textureCoordinate) * v_color;\n\n      shaderColor = mix(shaderColor, maskColor, clamp(-(lng_DefaultMask + 0.5), 0.0, 1.0));\n\n      ${r}\n\n      gl_FragColor = shaderColor * u_alpha;\n    }\n  `));class Ot extends B{constructor(e){super({renderer:e,attributes:["a_position","a_textureCoordinate","a_color"],uniforms:[{name:"u_resolution",uniform:"uniform2fv"},{name:"u_pixelRatio",uniform:"uniform1f"},{name:"u_texture",uniform:"uniform2f"},{name:"u_dimensions",uniform:"uniform2fv"},{name:"u_radius",uniform:"uniform1f"}]})}static resolveDefaults(e){return{radius:e.radius||10,$dimensions:{width:0,height:0}}}bindTextures(e){var t=this.glw;t.activeTexture(0),t.bindTexture(e[0].ctxTexture)}bindProps(e){this.setUniform("u_radius",e.radius)}canBatchShaderProps(e,t){return e.radius===t.radius&&e.$dimensions.width===t.$dimensions.width&&e.$dimensions.height===t.$dimensions.height}}S(Ot,"z$__type__Props",void 0),S(Ot,"shaderSources",{vertex:"\n      # ifdef GL_FRAGMENT_PRESICISON_HIGH\n      precision highp float;\n      # else\n      precision mediump float;\n      # endif\n\n      attribute vec2 a_position;\n      attribute vec2 a_textureCoordinate;\n      attribute vec4 a_color;\n      attribute float a_textureIndex;\n      attribute float a_depth;\n\n      uniform vec2 u_resolution;\n      uniform float u_pixelRatio;\n\n      varying vec4 v_color;\n      varying vec2 v_textureCoordinate;\n\n      void main() {\n        vec2 normalized = a_position * u_pixelRatio / u_resolution;\n        vec2 zero_two = normalized * 2.0;\n        vec2 clip_space = zero_two - 1.0;\n\n        // pass to fragment\n        v_color = a_color;\n        v_textureCoordinate = a_textureCoordinate;\n\n        // flip y\n        gl_Position = vec4(clip_space * vec2(1.0, -1.0), 0, 1);\n      }\n    ",fragment:"\n      # ifdef GL_FRAGMENT_PRESICISON_HIGH\n      precision highp float;\n      # else\n      precision mediump float;\n      # endif\n\n      uniform vec2 u_resolution;\n      uniform vec2 u_dimensions;\n      uniform float u_radius;\n      uniform sampler2D u_texture;\n\n      varying vec4 v_color;\n      varying vec2 v_textureCoordinate;\n\n      float boxDist(vec2 p, vec2 size, float radius){\n        size -= vec2(radius);\n        vec2 d = abs(p) - size;\n        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0)) - radius;\n      }\n\n      float fillMask(float dist) {\n        return clamp(-dist, 0.0, 1.0);\n      }\n\n      void main() {\n        vec4 color = texture2D(u_texture, v_textureCoordinate) * v_color;\n        vec2 halfDimensions = u_dimensions * 0.5;\n\n        float d = boxDist(v_textureCoordinate.xy * u_dimensions - halfDimensions, halfDimensions + 0.5, u_radius);\n        gl_FragColor = mix(vec4(0.0), color, fillMask(d));\n      }\n    "});var Ut=new Float32Array([1,0,0,0,1,0,0,0,1]);class Bt extends B{constructor(e){super({renderer:e,attributes:["a_position","a_textureCoordinate"],uniforms:[{name:"u_resolution",uniform:"uniform2fv"},{name:"u_transform",uniform:"uniformMatrix3fv"},{name:"u_scrollY",uniform:"uniform1f"},{name:"u_pixelRatio",uniform:"uniform1f"},{name:"u_texture",uniform:"uniform2f"},{name:"u_color",uniform:"uniform4fv"},{name:"u_size",uniform:"uniform1f"},{name:"u_distanceRange",uniform:"uniform1f"},{name:"u_debug",uniform:"uniform1i"}]})}bindTextures(e){var t=this.glw;t.activeTexture(0),t.bindTexture(e[0].ctxTexture)}bindProps(e){var t=Bt.resolveDefaults(e);for(var n in t)if("transform"===n)this.setUniform("u_transform",!1,t[n]);else if("scrollY"===n)this.setUniform("u_scrollY",t[n]);else if("color"===n){var r=N(t.color);this.setUniform("u_color",r)}else"size"===n?this.setUniform("u_size",t[n]):"distanceRange"===n?this.setUniform("u_distanceRange",t[n]):"debug"===n&&this.setUniform("u_debug",t[n]?1:0)}static resolveDefaults(e={}){var t,n,r,i,a,o;return{transform:null!==(t=e.transform)&&void 0!==t?t:Ut,scrollY:null!==(n=e.scrollY)&&void 0!==n?n:0,color:null!==(r=e.color)&&void 0!==r?r:4294967295,size:null!==(i=e.size)&&void 0!==i?i:16,distanceRange:null!==(a=e.distanceRange)&&void 0!==a?a:1,debug:null!==(o=e.debug)&&void 0!==o&&o}}}S(Bt,"shaderSources",{vertex:"\n      // an attribute is an input (in) to a vertex shader.\n      // It will receive data from a buffer\n      attribute vec2 a_position;\n      attribute vec2 a_textureCoordinate;\n\n      uniform vec2 u_resolution;\n      uniform mat3 u_transform;\n      uniform float u_scrollY;\n      uniform float u_pixelRatio;\n      uniform float u_size;\n\n      varying vec2 v_texcoord;\n\n      void main() {\n        vec2 scrolledPosition = a_position * u_size - vec2(0, u_scrollY);\n        vec2 transformedPosition = (u_transform * vec3(scrolledPosition, 1)).xy;\n\n        // Calculate screen space with pixel ratio\n        vec2 screenSpace = (transformedPosition * u_pixelRatio / u_resolution * 2.0 - 1.0) * vec2(1, -1);\n\n        gl_Position = vec4(screenSpace, 0.0, 1.0);\n        v_texcoord = a_textureCoordinate;\n\n      }\n    ",fragment:"\n      precision highp float;\n\n      uniform vec4 u_color;\n      uniform sampler2D u_texture;\n      uniform float u_distanceRange;\n      uniform float u_pixelRatio;\n      uniform int u_debug;\n\n      varying vec2 v_texcoord;\n\n      float median(float r, float g, float b) {\n          return max(min(r, g), min(max(r, g), b));\n      }\n\n      void main() {\n          vec3 sample = texture2D(u_texture, v_texcoord).rgb;\n          if (u_debug == 1) {\n            gl_FragColor = vec4(sample.r, sample.g, sample.b, 1.0);\n            return;\n          }\n          float scaledDistRange = u_distanceRange * u_pixelRatio;\n          float sigDist = scaledDistRange * (median(sample.r, sample.g, sample.b) - 0.5);\n          float opacity = clamp(sigDist + 0.5, 0.0, 1.0) * u_color.a;\n\n          // Build the final color.\n          // IMPORTANT: We must premultiply the color by the alpha value before returning it.\n          gl_FragColor = vec4(u_color.r * opacity, u_color.g * opacity, u_color.b * opacity, opacity);\n      }\n    "});class jt extends xt{constructor(...e){super(...e),S(this,"name","radius")}static getEffectKey(){return"radius"}static resolveDefaults(e){var t;return{radius:null!==(t=e.radius)&&void 0!==t?t:10}}}S(jt,"z$__type__Props",void 0),S(jt,"uniforms",{radius:{value:0,method:"uniform4fv",type:"vec4",validator:e=>{var t=e;return Array.isArray(t)?2===t.length?t=[t[0],t[1],t[0],t[1]]:3===t.length?t=[t[0],t[1],t[2],t[0]]:4!==t.length&&(t=[t[0],t[0],t[0],t[0]]):"number"==typeof t&&(t=[t,t,t,t]),t}}}),S(jt,"methods",{fillMask:"\n      float function(float dist) {\n        return clamp(-dist, 0.0, 1.0);\n      }\n    ",boxDist:"\n      float function(vec2 p, vec2 size, float radius) {\n        size -= vec2(radius);\n        vec2 d = abs(p) - size;\n        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0)) - radius;\n      }\n    "}),S(jt,"onShaderMask","\n  vec2 halfDimensions = u_dimensions * 0.5;\n  float r = radius[0] * step(v_textureCoordinate.x, 0.5) * step(v_textureCoordinate.y, 0.5);\n  r = r + radius[1] * step(0.5, v_textureCoordinate.x) * step(v_textureCoordinate.y, 0.5);\n  r = r + radius[2] * step(0.5, v_textureCoordinate.x) * step(0.5, v_textureCoordinate.y);\n  r = r + radius[3] * step(v_textureCoordinate.x, 0.5) * step(0.5, v_textureCoordinate.y);\n  return $boxDist(v_textureCoordinate.xy * u_dimensions - halfDimensions, halfDimensions, r);\n  "),S(jt,"onEffectMask","\n  return mix(vec4(0.0), maskColor, $fillMask(shaderMask));\n  ");class Ft extends xt{constructor(...e){super(...e),S(this,"name","border")}static getEffectKey(){return"border"}static resolveDefaults(e){var t,n;return{width:null!==(t=e.width)&&void 0!==t?t:10,color:null!==(n=e.color)&&void 0!==n?n:4294967295}}}S(Ft,"z$__type__Props",void 0),S(Ft,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},color:{value:4294967295,validator:e=>N(e),method:"uniform4fv",type:"vec4"}}),S(Ft,"onEffectMask","\n  float mask = clamp(shaderMask + width, 0.0, 1.0) - clamp(shaderMask, 0.0, 1.0);\n  return mix(shaderColor, mix(shaderColor, maskColor, maskColor.a), mask);\n  "),S(Ft,"onColorize","\n    return color;\n  ");class zt extends xt{constructor(...e){super(...e),S(this,"name","linearGradient")}static getEffectKey(e){return`linearGradient${e.colors.length}`}static resolveDefaults(e){var t,n,r=null!==(t=e.colors)&&void 0!==t?t:[4278190080,4294967295],i=e.stops||[];if(0===i.length||i.length!==r.length){for(var a=r.length,o=0,s=i;o<a;o++)i[o]?(s[o]=i[o],void 0===i[o-1]&&void 0!==s[o-2]&&(s[o-1]=s[o-2]+(i[o]-s[o-2])/2)):s[o]=o*(1/(r.length-1));i=s}return{colors:r,stops:i,angle:null!==(n=e.angle)&&void 0!==n?n:0}}}se=zt,S(zt,"z$__type__Props",void 0),S(zt,"uniforms",{angle:{value:0,method:"uniform1f",type:"float"},colors:{value:4294967295,validator:e=>e.map((e=>N(e))).reduce(((e,t)=>e.concat(t)),[]),size:e=>e.colors.length,method:"uniform4fv",type:"vec4"},stops:{value:[],size:e=>e.colors.length,method:"uniform1fv",type:"float"}}),S(zt,"methods",{fromLinear:"\n      vec4 function(vec4 linearRGB) {\n        vec4 higher = vec4(1.055)*pow(linearRGB, vec4(1.0/2.4)) - vec4(0.055);\n        vec4 lower = linearRGB * vec4(12.92);\n        return mix(higher, lower, 1.0);\n      }\n    ",toLinear:"\n      vec4 function(vec4 sRGB) {\n        vec4 higher = pow((sRGB + vec4(0.055))/vec4(1.055), vec4(2.4));\n        vec4 lower = sRGB/vec4(12.92);\n        return mix(higher, lower, 1.0);\n      }\n    ",calcPoint:"\n      vec2 function(float d, float angle) {\n        return d * vec2(cos(angle), sin(angle)) + (u_dimensions * 0.5);\n      }\n    "}),S(zt,"ColorLoop",(e=>{for(var t="",n=2;n<e;n++)t+=`colorOut = mix(colorOut, colors[${n}], clamp((dist - stops[${n-1}]) / (stops[${n}] - stops[${n-1}]), 0.0, 1.0));`;return t})),S(zt,"onColorize",(e=>{var t=e.colors.length||1;return`\n      float a = angle - (PI / 180.0 * 90.0);\n      float lineDist = abs(u_dimensions.x * cos(a)) + abs(u_dimensions.y * sin(a));\n      vec2 f = $calcPoint(lineDist * 0.5, a);\n      vec2 t = $calcPoint(lineDist * 0.5, a + PI);\n      vec2 gradVec = t - f;\n      float dist = dot(v_textureCoordinate.xy * u_dimensions - f, gradVec) / dot(gradVec, gradVec);\n\n      float stopCalc = (dist - stops[0]) / (stops[1] - stops[0]);\n      vec4 colorOut = $fromLinear(mix($toLinear(colors[0]), $toLinear(colors[1]), stopCalc));\n      ${se.ColorLoop(t)}\n      return mix(maskColor, colorOut, clamp(colorOut.a, 0.0, 1.0));\n    `}));class Gt extends xt{constructor(...e){super(...e),S(this,"name","grayscale")}static getEffectKey(){return"grayscale"}static resolveDefaults(e){var t;return{amount:null!==(t=e.amount)&&void 0!==t?t:1}}}S(Gt,"uniforms",{amount:{value:1,method:"uniform1f",type:"float"}}),S(Gt,"onColorize","\n    float grayness = 0.2 * maskColor.r + 0.6 * maskColor.g + 0.2 * maskColor.b;\n    return vec4(amount * vec3(grayness) + (1.0 - amount) * maskColor.rgb, maskColor.a);\n  ");class Vt extends xt{constructor(...e){super(...e),S(this,"name","borderRight")}static getEffectKey(){return"borderRight"}static resolveDefaults(e){var t,n;return{width:null!==(t=e.width)&&void 0!==t?t:10,color:null!==(n=e.color)&&void 0!==n?n:4294967295}}}S(Vt,"z$__type__Props",void 0),S(Vt,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},color:{value:4294967295,validator:e=>N(e),method:"uniform4fv",type:"vec4"}}),S(Vt,"methods",{fillMask:"\n      float function(float dist) {\n        return clamp(-dist, 0.0, 1.0);\n      }\n    ",rectDist:"\n      float function(vec2 p, vec2 size) {\n        vec2 d = abs(p) - size;\n        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0));\n      }\n    "}),S(Vt,"onEffectMask","\n  vec2 pos = vec2(u_dimensions.x - width * 0.5, 0.0);\n  float mask = $rectDist(v_textureCoordinate.xy * u_dimensions - pos, vec2(width*0.5, u_dimensions.y));\n  return mix(shaderColor, maskColor, $fillMask(mask));\n  "),S(Vt,"onColorize","\n    return color;\n  ");class Kt extends xt{constructor(...e){super(...e),S(this,"name","borderTop")}static getEffectKey(){return"borderTop"}static resolveDefaults(e){var t,n;return{width:null!==(t=e.width)&&void 0!==t?t:10,color:null!==(n=e.color)&&void 0!==n?n:4294967295}}}S(Kt,"z$__type__Props",void 0),S(Kt,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},color:{value:4294967295,validator:e=>N(e),method:"uniform4fv",type:"vec4"}}),S(Kt,"methods",{fillMask:"\n      float function(float dist) {\n        return clamp(-dist, 0.0, 1.0);\n      }\n    ",rectDist:"\n      float function(vec2 p, vec2 size) {\n        vec2 d = abs(p) - size;\n        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0));\n      }\n    "}),S(Kt,"onEffectMask","\n  vec2 pos = vec2(0.0, width * 0.5);\n  float mask = $rectDist(v_textureCoordinate.xy * u_dimensions - pos, vec2(u_dimensions.x, width*0.5));\n  return mix(shaderColor, maskColor, $fillMask(mask));\n  "),S(Kt,"onColorize","\n    return color;\n  ");class Ht extends xt{constructor(...e){super(...e),S(this,"name","borderBottom")}static getEffectKey(){return"borderBottom"}static resolveDefaults(e){var t,n;return{width:null!==(t=e.width)&&void 0!==t?t:10,color:null!==(n=e.color)&&void 0!==n?n:4294967295}}}S(Ht,"z$__type__Props",void 0),S(Ht,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},color:{value:4294967295,validator:e=>N(e),method:"uniform4fv",type:"vec4"}}),S(Ht,"methods",{fillMask:"\n      float function(float dist) {\n        return clamp(-dist, 0.0, 1.0);\n      }\n    ",rectDist:"\n      float function(vec2 p, vec2 size) {\n        vec2 d = abs(p) - size;\n        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0));\n      }\n    "}),S(Ht,"onEffectMask","\n  vec2 pos = vec2(0.0, u_dimensions.y - width * 0.5);\n  float mask = $rectDist(v_textureCoordinate.xy * u_dimensions - pos, vec2(u_dimensions.x, width*0.5));\n  return mix(shaderColor, maskColor, $fillMask(mask));\n  "),S(Ht,"onColorize","\n    return color;\n  ");class Wt extends xt{constructor(...e){super(...e),S(this,"name","borderLeft")}static getEffectKey(){return"borderLeft"}static resolveDefaults(e){var t,n;return{width:null!==(t=e.width)&&void 0!==t?t:10,color:null!==(n=e.color)&&void 0!==n?n:4294967295}}}S(Wt,"z$__type__Props",void 0),S(Wt,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},color:{value:4294967295,validator:e=>N(e),method:"uniform4fv",type:"vec4"}}),S(Wt,"methods",{fillMask:"\n      float function(float dist) {\n        return clamp(-dist, 0.0, 1.0);\n      }\n    ",rectDist:"\n      float function(vec2 p, vec2 size) {\n        vec2 d = abs(p) - size;\n        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0));\n      }\n    "}),S(Wt,"onEffectMask","\n  vec2 pos = vec2(width * 0.5, 0.0);\n  float mask = $rectDist(v_textureCoordinate.xy * u_dimensions - pos, vec2(width*0.5, u_dimensions.y));\n  return mix(shaderColor, maskColor, $fillMask(mask));\n  "),S(Wt,"onColorize","\n    return color;\n  ");class Xt extends xt{constructor(...e){super(...e),S(this,"name","glitch")}static getEffectKey(e){return"glitch"}static resolveDefaults(e){var t,n,r,i,a;return{amplitude:null!==(t=e.amplitude)&&void 0!==t?t:.2,narrowness:null!==(n=e.narrowness)&&void 0!==n?n:4,blockiness:null!==(r=e.blockiness)&&void 0!==r?r:2,minimizer:null!==(i=e.minimizer)&&void 0!==i?i:8,time:null!==(a=e.time)&&void 0!==a?a:Date.now()}}}S(Xt,"z$__type__Props",void 0),S(Xt,"uniforms",{amplitude:{value:0,method:"uniform1f",type:"float"},narrowness:{value:0,method:"uniform1f",type:"float"},blockiness:{value:0,method:"uniform1f",type:"float"},minimizer:{value:0,method:"uniform1f",type:"float"},time:{value:0,method:"uniform1f",validator:e=>(Date.now()-e)%1e3,type:"float"}}),S(Xt,"methods",{rand:"\n      float function(vec2 p, float time) {\n        float t = floor(time * 20.) / 10.;\n        return fract(sin(dot(p, vec2(t * 12.9898, t * 78.233))) * 43758.5453);\n      }\n    ",noise:"\n      float function(vec2 uv, float blockiness, float time) {\n        vec2 lv = fract(uv);\n        vec2 id = floor(uv);\n\n        float n1 = rand(id, time);\n        float n2 = rand(id+vec2(1,0), time);\n        float n3 = rand(id+vec2(0,1), time);\n        float n4 = rand(id+vec2(1,1), time);\n        vec2 u = smoothstep(0.0, 1.0 + blockiness, lv);\n        return mix(mix(n1, n2, u.x), mix(n3, n4, u.x), u.y);\n      }\n    ",fbm:"\n      float function(vec2 uv, int count, float blockiness, float complexity, float time) {\n        float val = 0.0;\n        float amp = 0.5;\n        const int MAX_ITERATIONS = 10;\n\n        for(int i = 0; i < MAX_ITERATIONS; i++) {\n          if(i >= count) {break;}\n          val += amp * noise(uv, blockiness, time);\n          amp *= 0.5;\n          uv *= complexity;\n        }\n        return val;\n      }\n    "}),S(Xt,"onColorize","\n    vec2 uv = v_textureCoordinate.xy;\n    float aspect = u_dimensions.x / u_dimensions.y;\n    vec2 a = vec2(uv.x * aspect , uv.y);\n    vec2 uv2 = vec2(a.x / u_dimensions.x, exp(a.y));\n\n    float shift = amplitude * pow($fbm(uv2, 4, blockiness, narrowness, time), minimizer);\n    float colR = texture2D(u_texture, vec2(uv.x + shift, uv.y)).r * (1. - shift);\n    float colG = texture2D(u_texture, vec2(uv.x - shift, uv.y)).g * (1. - shift);\n    float colB = texture2D(u_texture, vec2(uv.x - shift, uv.y)).b * (1. - shift);\n\n    vec3 f = vec3(colR, colG, colB);\n    return vec4(f, texture2D(u_texture, vec2(uv.x - shift, uv.y)).a);\n  ");class qt extends xt{constructor(...e){super(...e),S(this,"name","fadeOut")}static getEffectKey(){return"fadeOut"}static resolveDefaults(e){var t;return{fade:null!==(t=e.fade)&&void 0!==t?t:10}}}S(qt,"z$__type__Props",void 0),S(qt,"uniforms",{fade:{value:0,method:"uniform4fv",type:"vec4",validator:e=>{var t=e;return Array.isArray(t)?2===t.length?t=[t[0],t[1],t[0],t[1]]:3===t.length?t=[t[0],t[1],t[2],t[0]]:4!==t.length&&(t=[t[0],t[0],t[0],t[0]]):"number"==typeof t&&(t=[t,t,t,t]),t}}}),S(qt,"onColorize","\n  vec2 point = v_textureCoordinate.xy * u_dimensions.xy;\n  vec2 pos1;\n  vec2 pos2;\n  vec2 d;\n  float c;\n  vec4 result = maskColor;\n\n\n  if(fade[0] > 0.0) {\n    pos1 = vec2(point.x, point.y);\n    pos2 = vec2(point.x, point.y + fade[0]);\n    d = pos2 - pos1;\n    c = dot(pos1, d) / dot(d, d);\n    result = mix(vec4(0.0), result, smoothstep(0.0, 1.0, clamp(c, 0.0, 1.0)));\n  }\n\n  if(fade[1] > 0.0) {\n    pos1 = vec2(point.x - u_dimensions.x - fade[1], v_textureCoordinate.y);\n    pos2 = vec2(point.x - u_dimensions.x, v_textureCoordinate.y);\n    d = pos1 - pos2;\n    c = dot(pos2, d) / dot(d, d);\n    result = mix(vec4(0.0), result, smoothstep(0.0, 1.0, clamp(c, 0.0, 1.0)));\n  }\n\n  if(fade[2] > 0.0) {\n    pos1 = vec2(v_textureCoordinate.x, point.y - u_dimensions.y - fade[2]);\n    pos2 = vec2(v_textureCoordinate.x, point.y - u_dimensions.y);\n    d = pos1 - pos2;\n    c = dot(pos2, d) / dot(d, d);\n    result = mix(vec4(0.0), result, smoothstep(0.0, 1.0, clamp(c, 0.0, 1.0)));\n  }\n\n  if(fade[3] > 0.0) {\n    pos1 = vec2(point.x, point.y);\n    pos2 = vec2(point.x + fade[3], point.y);\n    d = pos2 - pos1;\n    c = dot(pos1, d) / dot(d, d);\n    result = mix(vec4(0.0), result, smoothstep(0.0, 1.0, clamp(c, 0.0, 1.0)));\n  }\n\n  return result;\n  ");class Yt extends xt{constructor(...e){super(...e),S(this,"name","radialGradient")}static getEffectKey(e){return`radialGradient${e.colors.length}`}static resolveDefaults(e){var t,n,r,i,a,o=null!==(t=e.colors)&&void 0!==t?t:[4278190080,4294967295],s=e.stops||[];if(0===s.length||s.length!==o.length){for(var u=o.length,l=0,c=s;l<u;l++)s[l]?(c[l]=s[l],void 0===s[l-1]&&void 0!==c[l-2]&&(c[l-1]=c[l-2]+(s[l]-c[l-2])/2)):c[l]=l*(1/(o.length-1));s=c}return{colors:o,stops:s,width:null!==(n=e.width)&&void 0!==n?n:0,height:null!==(r=null!==(i=e.height)&&void 0!==i?i:e.width)&&void 0!==r?r:0,pivot:null!==(a=e.pivot)&&void 0!==a?a:[.5,.5]}}}ue=Yt,S(Yt,"z$__type__Props",void 0),S(Yt,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},height:{value:0,method:"uniform1f",type:"float"},pivot:{value:[.5,.5],method:"uniform2fv",type:"vec2"},colors:{value:4294967295,validator:e=>e.map((e=>N(e))).reduce(((e,t)=>e.concat(t)),[]),size:e=>e.colors.length,method:"uniform4fv",type:"vec4"},stops:{value:[],size:e=>e.colors.length,method:"uniform1fv",type:"float"}}),S(Yt,"ColorLoop",(e=>{for(var t="",n=2;n<e;n++)t+=`colorOut = mix(colorOut, colors[${n}], clamp((dist - stops[${n-1}]) / (stops[${n}] - stops[${n-1}]), 0.0, 1.0));`;return t})),S(Yt,"onColorize",(e=>{var t=e.colors.length||1;return`\n      vec2 point = v_textureCoordinate.xy * u_dimensions;\n      vec2 projection = vec2(pivot.x * u_dimensions.x, pivot.y * u_dimensions.y);\n\n      float dist = length((point - projection) / vec2(width, height));\n\n      float stopCalc = (dist - stops[0]) / (stops[1] - stops[0]);\n      vec4 colorOut = mix(colors[0], colors[1], stopCalc);\n      ${ue.ColorLoop(t)}\n      return mix(maskColor, colorOut, clamp(colorOut.a, 0.0, 1.0));\n    `}));class $t extends xt{constructor(...e){super(...e),S(this,"name","radialProgress")}static getEffectKey(){return"radialProgress"}static resolveDefaults(e){var t,n,r,i,a,o,s;return{width:null!==(t=e.width)&&void 0!==t?t:10,progress:null!==(n=e.progress)&&void 0!==n?n:.5,offset:null!==(r=e.offset)&&void 0!==r?r:0,range:null!==(i=e.range)&&void 0!==i?i:2*Math.PI,rounded:null!==(a=e.rounded)&&void 0!==a&&a,radius:null!==(o=e.radius)&&void 0!==o?o:1,color:null!==(s=e.color)&&void 0!==s?s:4294967295}}}S($t,"z$__type__Props",void 0),S($t,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},progress:{value:.5,method:"uniform1f",type:"float"},offset:{value:0,method:"uniform1f",type:"float"},range:{value:0,method:"uniform1f",type:"float"},rounded:{value:0,method:"uniform1f",type:"float",validator:e=>e?1:0},radius:{value:1,method:"uniform1f",type:"float"},color:{value:4294967295,validator:e=>N(e),method:"uniform4fv",type:"vec4"}}),S($t,"methods",{rotateUV:"\n    vec2 function(vec2 uv, float d) {\n      float s = sin(d);\n      float c = cos(d);\n      mat2 rotMatrix = mat2(c, -s, s, c);\n      return uv * rotMatrix;\n    }\n    ",drawDot:"\n    float function(vec2 uv, vec2 p, float r) {\n      uv += p;\n      float circle = length(uv) - r;\n      return clamp(-circle, 0.0, 1.0);\n    }\n    "}),S($t,"onEffectMask","\n    float outerRadius = radius * u_dimensions.y * 0.5;\n\n    float endAngle = range * progress - 0.0005;\n\n    vec2 uv = v_textureCoordinate.xy * u_dimensions.xy - u_dimensions * 0.5;\n\n    uv = $rotateUV(uv, -(offset));\n    float linewidth = width * u_pixelRatio;\n    float circle = length(uv) - (outerRadius - linewidth) ;\n    circle = abs(circle) - linewidth;\n    circle = clamp(-circle, 0.0, 1.0);\n\n    float angle = (atan(uv.x, -uv.y) / 3.14159265359 * 0.5);\n    float p = endAngle / (PI * 2.);\n\n    circle *= step(fract(angle), fract(p));\n\n    circle = rounded < 1. ? circle : max(circle, $drawDot(uv, vec2(0, outerRadius - linewidth), linewidth));\n    circle = rounded < 1. ? circle : max(circle, $drawDot($rotateUV(uv, -(endAngle)), vec2(0, outerRadius - linewidth), linewidth));\n\n    return mix(shaderColor, maskColor, circle);\n  "),S($t,"onColorize","\n    return color;\n  ");class Qt extends xt{constructor(...e){super(...e),S(this,"name","holePunch")}static getEffectKey(){return"holePunch"}static resolveDefaults(e){var t;return{x:e.x||0,y:e.y||0,width:e.width||50,height:e.height||50,radius:null!==(t=e.radius)&&void 0!==t?t:0}}}S(Qt,"z$__type__Props",void 0),S(Qt,"uniforms",{x:{value:0,method:"uniform1f",type:"float"},y:{value:0,method:"uniform1f",type:"float"},width:{value:0,method:"uniform1f",type:"float"},height:{value:0,method:"uniform1f",type:"float"},radius:{value:0,method:"uniform4fv",type:"vec4",validator:e=>{var t=e;return Array.isArray(t)?2===t.length?t=[t[0],t[1],t[0],t[1]]:3===t.length?t=[t[0],t[1],t[2],t[0]]:4!==t.length&&(t=[t[0],t[0],t[0],t[0]]):"number"==typeof t&&(t=[t,t,t,t]),t}}}),S(Qt,"methods",{fillMask:"\n      float function(float dist) {\n        return clamp(-dist, 0.0, 1.0);\n      }\n    ",boxDist:"\n      float function(vec2 p, vec2 size, float radius) {\n        size -= vec2(radius);\n        vec2 d = abs(p) - size;\n        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0)) - radius;\n      }\n    "}),S(Qt,"onShaderMask","\n  vec2 halfDimensions = u_dimensions * 0.5;\n  vec2 size = vec2(width, height) * 0.5;\n  vec2 basePos = v_textureCoordinate.xy * u_dimensions.xy - vec2(x, y);\n  vec2 pos = basePos - size;\n  float r = radius[0] * step(pos.x, 0.5) * step(pos.y, 0.5);\n  r = r + radius[1] * step(0.5, pos.x) * step(pos.y, 0.5);\n  r = r + radius[2] * step(0.5, pos.x) * step(0.5, pos.y);\n  r = r + radius[3] * step(pos.x, 0.5) * step(0.5, pos.y);\n  return $boxDist(pos, size, r);\n  "),S(Qt,"onEffectMask","\n  return mix(maskColor, vec4(0.0), $fillMask(shaderMask));\n  ");var Jt="RoundedRectangle";class Zt extends j{constructor(e){super(),S(this,"shType",void 0),this.shType=e,e!==Jt&&console.warn("Unsupported shader:",e)}bindRenderOp(){}bindProps(){}attach(){}detach(){}}class en{constructor(){S(this,"shCache",new Map),S(this,"shConstructors",{}),S(this,"attachedShader",null),S(this,"effectConstructors",{}),S(this,"renderer",void 0),this.registerShaderType("DefaultShader",Mt),this.registerShaderType("DefaultShaderBatched",Rt),this.registerShaderType("RoundedRectangle",Ot),this.registerShaderType("DynamicShader",Pt),this.registerShaderType("SdfShader",Bt),this.registerEffectType("border",Ft),this.registerEffectType("borderBottom",Ht),this.registerEffectType("borderLeft",Wt),this.registerEffectType("borderRight",Vt),this.registerEffectType("borderTop",Kt),this.registerEffectType("fadeOut",qt),this.registerEffectType("linearGradient",zt),this.registerEffectType("radialGradient",Yt),this.registerEffectType("grayscale",Gt),this.registerEffectType("glitch",Xt),this.registerEffectType("radius",jt),this.registerEffectType("radialProgress",$t),this.registerEffectType("holePunch",Qt)}registerShaderType(e,t){this.shConstructors[e]=t}registerEffectType(e,t){this.effectConstructors[e]=t}getRegisteredEffects(){return this.effectConstructors}getRegisteredShaders(){return this.shConstructors}loadShader(e,t){if(!this.renderer)throw new Error("Renderer is not been defined");var n=this.shConstructors[e];if(!n)throw new Error(`Shader type "${e}" is not registered`);if("canvas"===this.renderer.mode&&n.prototype instanceof B)return{shader:new Zt(e),props:t};if("DynamicShader"===e)return this.loadDynamicShader(t);var r=n.resolveDefaults(t),i=n.makeCacheKey(r)||n.name;if(i&&this.shCache.has(i))return{shader:this.shCache.get(i),props:r};var a=new n(this.renderer,t);return i&&this.shCache.set(i,a),{shader:a,props:r}}loadDynamicShader(e){if(!this.renderer)throw new Error("Renderer is not been defined");var t=Pt.resolveDefaults(e,this.effectConstructors),n=Pt.makeCacheKey(t,this.effectConstructors);if(n&&this.shCache.has(n))return{shader:this.shCache.get(n),props:t};var r=new Pt(this.renderer,e,this.effectConstructors);return n&&this.shCache.set(n,r),{shader:r,props:t}}useShader(e){this.attachedShader!==e&&(this.attachedShader&&this.attachedShader.detach(),e.attach(),this.attachedShader=e)}}var tn=function(){var e=w(b().mark((function e(t){var n,r;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:return n=e.sent,e.next=5,n.arrayBuffer();case 5:if(r=e.sent,-1===t.indexOf(".ktx")){e.next=8;break}return e.abrupt("return",nn(r));case 8:return e.abrupt("return",rn(r));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),nn=function(){var e=w(b().mark((function e(t){var n,r,i,a,o,s,u;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(n=new DataView(t),r=16909060===n.getUint32(12),i=[],a={glInternalFormat:n.getUint32(28,r),pixelWidth:n.getUint32(36,r),pixelHeight:n.getUint32(40,r),numberOfMipmapLevels:n.getUint32(56,r),bytesOfKeyValueData:n.getUint32(60,r)},o=64,o+=a.bytesOfKeyValueData,s=0;s<a.numberOfMipmapLevels;s++)u=n.getUint32(o),o+=4,i.push(n.buffer.slice(o,u)),o+=u;return e.abrupt("return",{data:{glInternalFormat:a.glInternalFormat,mipmaps:i,width:a.pixelWidth||0,height:a.pixelHeight||0,type:"ktx"},premultiplyAlpha:!1});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),rn=function(){var e=w(b().mark((function e(t){var n,r,i,a,o,s,u,l,c,d,h,f;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(13,36196,7,6,11,12,n=t,r=new Int32Array(n,0,13),i=r[12]+52,a=new Uint8Array(n,i),o=[],s={pixelWidth:r[7],pixelHeight:r[6],numberOfMipmapLevels:r[11]||0},u=0,l=s.pixelWidth||0,c=s.pixelHeight||0,d=0;d<s.numberOfMipmapLevels;d++)h=(l+3>>2)*(c+3>>2)*8,f=new Uint8Array(n,a.byteOffset+u,h),o.push(f),u+=h,l>>=1,c>>=1;return e.abrupt("return",{data:{glInternalFormat:36196,mipmaps:o,width:s.pixelWidth||0,height:s.pixelHeight||0,type:"pvr"},premultiplyAlpha:!1});case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();class an extends F{constructor(e,t){super(e),S(this,"props",void 0),this.props=an.resolveDefaults(t)}hasAlphaChannel(e){return-1!==e.indexOf("image/png")}getTextureData(){var e=this;return w(b().mark((function t(){var n,r,i,a,o,s,u;return b().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.props,r=n.src,i=n.premultiplyAlpha,r){t.next=3;break}return t.abrupt("return",{data:null});case 3:if(!(r instanceof ImageData)){t.next=5;break}return t.abrupt("return",{data:r,premultiplyAlpha:i});case 5:if(!/\.(ktx|pvr)$/.test(r)){t.next=7;break}return t.abrupt("return",tn(r));case 7:if(!e.txManager.imageWorkerManager){t.next=13;break}return t.next=10,e.txManager.imageWorkerManager.getImage(r,i);case 10:return t.abrupt("return",t.sent);case 13:if(!e.txManager.hasCreateImageBitmap){t.next=28;break}return t.next=16,fetch(r);case 16:return a=t.sent,t.next=19,a.blob();case 19:return o=t.sent,s=null!=i?i:e.hasAlphaChannel(o.type),t.next=23,createImageBitmap(o,{premultiplyAlpha:s?"premultiply":"none",colorSpaceConversion:"none",imageOrientation:"none"});case 23:return t.t0=t.sent,t.t1=s,t.abrupt("return",{data:t.t0,premultiplyAlpha:t.t1});case 28:return u=new Image,"data:"!==r.substr(0,5)&&(u.crossOrigin="Anonymous"),u.src=r,t.next=33,new Promise(((e,t)=>{u.onload=()=>e(),u.onerror=()=>t(new Error("Failed to load image"))})).catch((e=>{console.error(e)}));case 33:return t.abrupt("return",{data:u,premultiplyAlpha:null==i||i});case 34:case"end":return t.stop()}}),t)})))()}static makeCacheKey(e){var t=an.resolveDefaults(e);return!(t.src instanceof ImageData)&&`ImageTexture,${t.src},${t.premultiplyAlpha}`}static resolveDefaults(e){var t,n;return{src:null!==(t=e.src)&&void 0!==t?t:"",premultiplyAlpha:null===(n=e.premultiplyAlpha)||void 0===n||n}}}S(an,"z$__type__Props",void 0);class on{constructor(e,t=0){S(this,"iterator",void 0),S(this,"peekBuffer",[]),S(this,"_lastIndex",void 0),this.iterator=e,this.iterator=e,this._lastIndex=t-1,this.peekBuffer=[]}next(){var e=this.peekBuffer.length>0?this.peekBuffer.pop():this.iterator.next();return e.done?this._lastIndex=-1:this._lastIndex++,e}peek(){if(this.peekBuffer.length>0)return this.peekBuffer[0];var e=this.iterator.next();return this.peekBuffer.push(e),e}get lastIndex(){return this._lastIndex}}function sn(e,t=0){var n,r;return b().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:n=t;case 1:if(!(n<e.length)){i.next=10;break}if(void 0!==(r=e.codePointAt(n))){i.next=5;break}throw new Error("Invalid Unicode code point");case 5:return i.next=7,r;case 7:n+=r<=65535?1:2,i.next=1;break;case 10:case"end":return i.stop()}}),le)}function un(e,t,n,r,i,a,o,s,u,l,c,d,h,f,p,g,m,v,y){k(p,"Font face must be loaded"),k(p.loaded,"Font face must be loaded"),k(p.data,"Font face must be loaded"),k(p.shaper,"Font face must be loaded");for(var b,x=s/p.data.info.size,w=u/x,T=a/x,A=l/x,S=h[e],E=(null==S?void 0:S.codepointIndex)||0,C=(null==S?void 0:S.maxX)||0,_=(null==S?void 0:S.maxY)||0,M=t,R=n,N=0,L={codepointIndex:-1,bufferOffset:-1,xStart:-1},D=p.shaper,P={letterSpacing:A},O=D.shapeText(P,new on(sn(r,E),E)),U=-1,B=[],j=o/x,F=function(e,t,n){var r,i=0,a=I(n.shapeText(t,new on(sn(e,0),0)));try{for(a.s();!(r=a.n()).done;){var o=r.value;o.mapped&&(i+=o.xAdvance)}}catch(s){a.e(s)}finally{a.f()}return i}(v,P,D),z=!0;z;){for(var G=(0===y||e+1<y)&&("both"!==d||m||R+w+p.maxCharHeight<=j),V=G?T:T-F,K=0,H=R+w>=f.y1,W=R<=f.y2,X=H&&W;(b=O.next())&&!b.done;){var q=b.value;if(e===h.length)h.push({codepointIndex:q.cluster,maxY:_,maxX:C});else if(e>h.length)throw new Error("Unexpected lineCache length");if(32===q.codepoint||10===q.codepoint?-1!==L.codepointIndex&&(L.codepointIndex=-1,K=M):-1===L.codepointIndex&&(L.codepointIndex=q.cluster,L.bufferOffset=N,L.xStart=K),q.mapped){var Y=M+q.xOffset+q.width;if("none"!==d&&Y>=V&&-1!==L.codepointIndex&&L.xStart>0){if(G){O=D.shapeText(P,new on(sn(r,L.codepointIndex),L.codepointIndex)),N=L.bufferOffset;break}O=D.shapeText(P,new on(sn(v,0),0)),M=L.xStart,N=L.bufferOffset,d="none"}else{var $=M+q.xOffset,Q=R+q.yOffset;if(X){-1===U&&(U=N);var J=p.getAtlasEntry(q.glyphId),Z=J.x/p.data.common.scaleW,ee=J.y/p.data.common.scaleH,te=J.width/p.data.common.scaleW,ne=J.height/p.data.common.scaleH;c[N++]=$,c[N++]=Q,c[N++]=Z,c[N++]=ee,c[N++]=$+q.width,c[N++]=Q,c[N++]=Z+te,c[N++]=ee,c[N++]=$,c[N++]=Q+q.height,c[N++]=Z,c[N++]=ee+ne,c[N++]=$+q.width,c[N++]=Q+q.height,c[N++]=Z+te,c[N++]=ee+ne}_=Math.max(_,Q+q.height),C=Math.max(C,$+q.width),M+=q.xAdvance}}else if(10===q.codepoint){if(G)break;O=D.shapeText(P,new on(sn(v,0),0)),d="none"}}-1!==U&&(B.push({bufferStart:U,bufferEnd:N}),U=-1),M=0,R+=w,e++,L.codepointIndex=-1,K=0,!g&&"both"===d&&R>f.y2||b&&b.done?z=!1:G||(z=!1)}if("center"===i)for(var re="none"===d?C:T,ie=0;ie<B.length;ie++)for(var ae=B[ie],oe=(re-(c[ae.bufferEnd-4]-c[ae.bufferStart]))/2,se=ae.bufferStart;se<ae.bufferEnd;se+=4)c[se]+=oe;else if("right"===i)for(var ue="none"===d?C:T,le=0;le<B.length;le++)for(var ce=B[le],de=ue-(ce.bufferEnd===ce.bufferStart?0:c[ce.bufferEnd-4]-c[ce.bufferStart]),he=ce.bufferStart;he<ce.bufferEnd;he+=4)c[he]+=de;return k(b),{bufferNumFloats:N,bufferNumQuads:N/16,layoutNumCharacters:b.done?r.length-E:b.value.cluster-E+1,fullyProcessed:!!b.done,maxX:C,maxY:_}}function ln(e,t,n,r,i,a,o,s){var u,l,c=e.screen,d=e.sdf;if(z(o)){var h=o.x1-t,f=h+(o.x2-o.x1),p=o.y1-n+r,g=(u=p-a,l=i||1,Math.floor(u/l)*l),m=function(e,t){return Math.ceil(e/t)*t}(p+(o.y2-o.y1)+a,i||1);c.x1=h,c.y1=g,c.x2=f,c.y2=m,d.x1=h/s,d.y1=g/s,d.x2=f/s,d.y2=m/s,e.numLines=Math.ceil((m-g)/i),e.firstLineIdx=i?Math.floor(g/i):0}else c.x1=0,c.y1=0,c.x2=0,c.y2=0,d.x1=0,d.y1=0,d.x2=0,d.y2=0,e.numLines=0,e.firstLineIdx=0;e.valid=!0}var cn={normal:400,bold:700,bolder:900,lighter:100},dn=e=>"number"==typeof e?e:cn[e]||400;var hn=Nt((function(e,t,n,r,i){var a,o=dn(n),s=I(e);try{for(s.s();!(a=s.n()).done;){var u=a.value[t];if(u){if(1===u.size)return console.warn(`TrFontManager: Only one font face found for family: '${t}' - will be used for all weights and styles`),u.values().next().value;var l,c=new Map,d=I(u);try{for(d.s();!(l=d.n()).done;){var h=l.value,f=dn(h.descriptors.weight);if(f===o&&h.descriptors.style===r&&h.descriptors.stretch===i)return h;c.set(f,h)}}catch(g){d.e(g)}finally{d.f()}var p=`TrFontManager: No exact match: '${t} Weight: ${o} Style: ${r} Stretch: ${i}'`;if(console.error(p),400===o&&c.has(500))return c.get(500);if(500===o&&c.has(400))return c.get(400);if(o<400){for(;o>0;){if(c.has(o))return c.get(o);o-=100}o=600}for(;o<1e3;){if(c.has(o))return c.get(o);o+=100}for(o=500;o>0;){if(c.has(o))return c.get(o);o-=100}}}}catch(g){s.e(g)}finally{s.f()}}));class fn{constructor(e){S(this,"textRenderers",void 0),this.textRenderers=e}addFontFace(e){for(var t in this.textRenderers){var n=this.textRenderers[t];n&&n.isFontFaceSupported(e)&&n.addFontFace(e)}}static resolveFontFace(e,t){var n=t.fontFamily,r=t.fontWeight,i=t.fontStyle,a=t.fontStretch;return hn(e,n,r,i,a)}}var pn={x:0,y:0,width:0,height:0};class gn extends Tt{constructor(e){super(e),S(this,"ssdfFontFamilies",{}),S(this,"msdfFontFamilies",{}),S(this,"fontFamilyArray",[this.ssdfFontFamilies,this.msdfFontFamilies]),S(this,"sdfShader",void 0),S(this,"rendererBounds",void 0),this.sdfShader=this.stage.shManager.loadShader("SdfShader").shader,this.rendererBounds={x1:0,y1:0,x2:this.stage.options.appWidth,y2:this.stage.options.appHeight}}getPropertySetters(){return{fontFamily:(e,t)=>{e.props.fontFamily=t,this.releaseFontFace(e),this.invalidateLayoutCache(e)},fontWeight:(e,t)=>{e.props.fontWeight=t,this.releaseFontFace(e),this.invalidateLayoutCache(e)},fontStyle:(e,t)=>{e.props.fontStyle=t,this.releaseFontFace(e),this.invalidateLayoutCache(e)},fontStretch:(e,t)=>{e.props.fontStretch=t,this.releaseFontFace(e),this.invalidateLayoutCache(e)},fontSize:(e,t)=>{e.props.fontSize=t,this.invalidateLayoutCache(e)},text:(e,t)=>{e.props.text=t,this.invalidateLayoutCache(e)},textAlign:(e,t)=>{e.props.textAlign=t,this.invalidateLayoutCache(e)},color:(e,t)=>{e.props.color=t},x:(e,t)=>{e.props.x=t,e.elementBounds.valid&&(this.setElementBoundsX(e),!e.renderWindow.valid&&G(e.elementBounds,this.rendererBounds)&&this.scheduleUpdateState(e))},y:(e,t)=>{e.props.y=t,e.elementBounds.valid&&(this.setElementBoundsY(e),!e.renderWindow.valid&&G(e.elementBounds,this.rendererBounds)&&this.scheduleUpdateState(e))},contain:(e,t)=>{e.props.contain=t,this.invalidateLayoutCache(e)},width:(e,t)=>{e.props.width=t,"none"!==e.props.contain&&this.invalidateLayoutCache(e)},height:(e,t)=>{e.props.height=t,"both"===e.props.contain&&this.invalidateLayoutCache(e)},offsetY:(e,t)=>{e.props.offsetY=t,this.invalidateLayoutCache(e)},scrollable:(e,t)=>{e.props.scrollable=t,this.invalidateLayoutCache(e)},scrollY:(e,t)=>{e.props.scrollY=t,this.scheduleUpdateState(e)},letterSpacing:(e,t)=>{e.props.letterSpacing=t,this.invalidateLayoutCache(e)},lineHeight:(e,t)=>{e.props.lineHeight=t,this.invalidateLayoutCache(e)},maxLines:(e,t)=>{e.props.maxLines=t,this.invalidateLayoutCache(e)},textBaseline:(e,t)=>{e.props.textBaseline=t,this.invalidateLayoutCache(e)},verticalAlign:(e,t)=>{e.props.verticalAlign=t,this.invalidateLayoutCache(e)},overflowSuffix:(e,t)=>{e.props.overflowSuffix=t,this.invalidateLayoutCache(e)},debug:(e,t)=>{e.props.debug=t}}}canRenderFont(e){var t=e.fontFamily;return t in this.ssdfFontFamilies||t in this.msdfFontFamilies||"$$SDF_FAILURE_TEST$$"===t}isFontFaceSupported(e){return e instanceof V}addFontFace(e){k(e instanceof V);var t=e.fontFamily,n="ssdf"===e.type?this.ssdfFontFamilies:"msdf"===e.type?this.msdfFontFamilies:void 0;if(n){var r=n[t];r||(r=new Set,n[t]=r),r.add(e)}else console.warn(`Invalid font face type: ${e.type}`)}createState(e){return{props:e,status:"initialState",updateScheduled:!1,emitter:new R,lineCache:[],forceFullLayoutCalc:!1,renderWindow:{screen:{x1:0,y1:0,x2:0,y2:0},sdf:{x1:0,y1:0,x2:0,y2:0},firstLineIdx:0,numLines:0,valid:!1},elementBounds:{x1:0,y1:0,x2:0,y2:0,valid:!1},clippingRect:{x:0,y:0,width:0,height:0,valid:!1},bufferNumFloats:0,bufferNumQuads:0,vertexBuffer:void 0,webGlBuffers:null,bufferUploaded:!1,textH:void 0,textW:void 0,distanceRange:0,trFontFace:void 0,isRenderable:!1,debugData:{updateCount:0,layoutCount:0,lastLayoutNumCharacters:0,layoutSum:0,drawSum:0,drawCount:0,bufferSize:0}}}updateState(e){var t=e.trFontFace,n=e.textH,r=e.lineCache,i=e.debugData,a=e.forceFullLayoutCalc;if(i.updateCount++,"initialState"===e.status&&this.setStatus(e,"loading"),!t){if(t=this.resolveFontFace(e.props),e.trFontFace=t,!t){var o=`SdfTextRenderer: Could not resolve font face for family: '${e.props.fontFamily}'`;return console.error(o),void this.setStatus(e,"failed",new Error(o))}t.texture.setRenderableOwner(e,e.isRenderable)}if(t.loaded){k(t.data,"Font face data should be loaded");var s=e.props,u=s.text,l=s.fontSize,c=s.x,d=s.y,h=s.contain,f=s.width,p=s.height,g=s.lineHeight,m=s.verticalAlign,v=s.scrollable,y=s.overflowSuffix,b=s.maxLines,x="both"===h&&v?e.props.scrollY:0,w=e.renderWindow,T=t.data.info.size,A=l/T,S=g/A;e.distanceRange=A*t.data.distanceField.distanceRange;var E=24*u.length,I=e.vertexBuffer;(!I||I.length<E)&&(I=new Float32Array(2*E));var C=e.elementBounds;if(C.valid||(this.setElementBoundsX(e),this.setElementBoundsY(e),C.valid=!0),!a&&w.valid){var _=w.screen;if(c+_.x1<=C.x1&&c+_.x2>=C.x2&&d-x+_.y1<=C.y1&&d-x+_.y2>=C.y2)return void this.setStatus(e,"loaded");w.valid=!1,this.setStatus(e,"loading")}var M=e.props,R=M.offsetY,N=M.textAlign;if(!w.valid){if(!G(C,this.rendererBounds))return;ln(w,c,d,x,g,"both"===h?C.y2-C.y1:0,C,A)}var L=function(e,t,n,r,i,a,o,s,u){var l=Math.min(Math.max(o.firstLineIdx,0),s.length),c=0;"middle"===r?c=(t-e)/2:"bottom"===r&&(c=t-e);var d=i/a+l*t+c;if(!(u&&d>=u/a))return{sdfX:0,sdfY:d,lineIndex:l}}(T,S,0,m,R,A,w,r,n);if(L){var D=e.props.letterSpacing,P=un(L.lineIndex,L.sdfX,L.sdfY,u,N,f,p,l,g,D,I,h,r,w.sdf,t,a,v,y,b);e.bufferUploaded=!1,e.bufferNumFloats=P.bufferNumFloats,e.bufferNumQuads=P.bufferNumQuads,e.vertexBuffer=I,e.renderWindow=w,i.lastLayoutNumCharacters=P.layoutNumCharacters,i.bufferSize=I.byteLength,P.fullyProcessed&&(e.textW=P.maxX*A,e.textH=P.maxY*A),this.setStatus(e,"loaded")}else this.setStatus(e,"loaded")}else t.once("loaded",(()=>{this.scheduleUpdateState(e)}))}renderQuads(e,t,n,r,i,a){var o,s;if(e.vertexBuffer){var u=this.stage.renderer;k(u instanceof K);var l=e.props,c=l.fontSize,d=l.color,h=l.contain,f=l.scrollable,p=l.zIndex,g=l.debug,m="both"===h&&f?e.props.scrollY:0,v=e.textW,y=void 0===v?0:v,b=e.textH,x=void 0===b?0:b,w=e.distanceRange,T=e.vertexBuffer,A=e.bufferUploaded,S=e.trFontFace,E=e.elementBounds,I=e.webGlBuffers;if(!I){var C=u.glw,_=4*Float32Array.BYTES_PER_ELEMENT,M=C.createBuffer();k(M),e.webGlBuffers=new H([{buffer:M,attributes:{a_position:{name:"a_position",size:2,type:C.FLOAT,normalized:!1,stride:_,offset:0},a_textureCoordinate:{name:"a_textureCoordinate",size:2,type:C.FLOAT,normalized:!1,stride:_,offset:2*Float32Array.BYTES_PER_ELEMENT}}}]),e.bufferUploaded=!1,k(e.webGlBuffers),I=e.webGlBuffers}if(!A){var R,N,L=u.glw,D=null!==(R=null===(N=I)||void 0===N?void 0:N.getBuffer("a_textureCoordinate"))&&void 0!==R?R:null;L.arrayBufferData(D,T,L.STATIC_DRAW),e.bufferUploaded=!0}if(k(S),f&&"both"===h){k(E.valid);var O=W(E,pn);n.valid?(e.clippingRect.valid=!0,n=P(n,O,e.clippingRect)):(e.clippingRect.valid=!0,n=X(O,e.clippingRect))}var U=new q(u.glw,u.options,I,this.sdfShader,{transform:t.data,color:Y(d,r),size:c/((null===(o=S.data)||void 0===o?void 0:o.info.size)||0),scrollY:m,distanceRange:w,debug:g.sdfShaderDebug},r,n,{height:x,width:y},0,p,!1,i,a),B=null===(s=e.trFontFace)||void 0===s?void 0:s.texture;k(B);var j=this.stage.txManager.getCtxTexture(B);U.addTexture(j),U.length=e.bufferNumFloats,U.numQuads=e.bufferNumQuads,u.addRenderOp(U)}}setIsRenderable(e,t){var n;super.setIsRenderable(e,t),null===(n=e.trFontFace)||void 0===n||n.texture.setRenderableOwner(e,t)}destroyState(e){var t;super.destroyState(e),null===(t=e.trFontFace)||void 0===t||t.texture.setRenderableOwner(e,!1)}resolveFontFace(e){return fn.resolveFontFace(this.fontFamilyArray,e)}releaseFontFace(e){e.trFontFace&&(e.trFontFace.texture.setRenderableOwner(e,!1),e.trFontFace=void 0)}invalidateLayoutCache(e){e.renderWindow.valid=!1,e.elementBounds.valid=!1,e.textH=void 0,e.textW=void 0,e.lineCache=[],this.setStatus(e,"loading"),this.scheduleUpdateState(e)}setElementBoundsX(e){var t=e.props,n=t.x,r=t.contain,i=t.width,a=e.elementBounds;a.x1=n,a.x2="none"!==r?n+i:1/0}setElementBoundsY(e){var t=e.props,n=t.y,r=t.contain,i=t.height,a=e.elementBounds;a.y1=n,a.y2="both"===r?n+i:1/0}}function mn(e,t){return vn.apply(this,arguments)}function vn(){return(vn=w(b().mark((function e(t,n){var r,i,a;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log("Loading core extension",t),e.next=4,T.import(t);case 4:r=e.sent,e.next=12;break;case 7:return e.prev=7,e.t0=e.catch(0),console.error(`The core extension module at '${t}' could not be loaded.`),console.error(e.t0),e.abrupt("return");case 12:if(r.default){e.next=15;break}return console.error(`The core extension module at '${t}' does not have a default export.`),e.abrupt("return");case 15:if(i=r.default,!(i.prototype instanceof $)){e.next=29;break}return a=new i,e.prev=18,e.next=21,a.run(n);case 21:e.next=27;break;case 23:e.prev=23,e.t1=e.catch(18),console.error(`The core extension at '${t}' threw an error.`),console.error(e.t1);case 27:e.next=30;break;case 29:console.error(`The core extension at '${t}' does not extend CoreExtension.`);case 30:case"end":return e.stop()}}),e,null,[[0,7],[18,23]])})))).apply(this,arguments)}function yn(e){for(var t={boolean:!0,string:!0,number:!0,undefined:!0},n=Object.keys(e),r=0;r<n.length;r++){var i=n[r];if(i){var a=e[i],o=typeof a;"string"===o&&a.length>2048&&(console.warn(`Custom Data value for ${i} is too long, it will be truncated to 2048 characters`),e[i]=a.substring(0,2048)),t[o]||(console.warn(`Custom Data value for ${i} is not a boolean, string, or number, it will be ignored`),delete e[i])}}return e}class bn extends R{constructor(e,t,n){var r,i,a,o,s;super(),S(this,"root",null),S(this,"driver",void 0),S(this,"canvas",void 0),S(this,"settings",void 0),S(this,"inspector",null),S(this,"nodes",new Map),S(this,"nextTextureId",1),S(this,"textureTracker",void 0);var u={appWidth:e.appWidth||1920,appHeight:e.appHeight||1080,txMemByteThreshold:e.txMemByteThreshold||124e6,boundsMargin:e.boundsMargin||0,deviceLogicalPixelRatio:e.deviceLogicalPixelRatio||1,devicePhysicalPixelRatio:e.devicePhysicalPixelRatio||window.devicePixelRatio,clearColor:null!==(r=e.clearColor)&&void 0!==r?r:0,coreExtensionModule:e.coreExtensionModule||null,experimental_FinalizationRegistryTextureUsageTracker:null!==(i=e.experimental_FinalizationRegistryTextureUsageTracker)&&void 0!==i&&i,textureCleanupOptions:e.textureCleanupOptions||{},fpsUpdateInterval:e.fpsUpdateInterval||0,numImageWorkers:void 0!==e.numImageWorkers?e.numImageWorkers:2,enableContextSpy:null!==(a=e.enableContextSpy)&&void 0!==a&&a,enableInspector:null!==(o=e.enableInspector)&&void 0!==o&&o,renderMode:null!==(s=e.renderMode)&&void 0!==s?s:"webgl"};this.settings=u;var l=u.appWidth,c=u.appHeight,d=u.deviceLogicalPixelRatio,h=u.devicePhysicalPixelRatio,f=u.enableInspector,p=e=>{this.driver.releaseTexture(e)},g=u.experimental_FinalizationRegistryTextureUsageTracker&&"function"==typeof FinalizationRegistry;this.textureTracker=g?new gt(p):new pt(p,this.settings.textureCleanupOptions);var m=l*d,v=c*d;this.driver=n;var y,b=document.createElement("canvas");if(this.canvas=b,b.width=m*h,b.height=v*h,b.style.width=`${m}px`,b.style.height=`${v}px`,!(y="string"==typeof t?document.getElementById(t):t))throw new Error("Could not find target element");n.onCreateNode=e=>{this.nodes.set(e.id,e)},n.onBeforeDestroyNode=e=>{this.nodes.delete(e.id)},n.onFpsUpdate=e=>{this.emit("fpsUpdate",e)},n.onFrameTick=e=>{this.emit("frameTick",e)},n.onIdle=()=>{this.emit("idle")},y.appendChild(b),f&&!C()&&(this.inspector=new bt(b,u))}init(){var e=this;return w(b().mark((function t(){return b().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.driver.init(e,e.settings,e.canvas);case 2:e.root=e.driver.getRootNode();case 3:case"end":return t.stop()}}),t)})))()}createNode(e){return this.inspector?this.inspector.createNode(this.driver,this.resolveNodeDefaults(e)):this.driver.createNode(this.resolveNodeDefaults(e))}createTextNode(e){var t,n,r,i,a,o,s,u,l,c,d,h,f,p,g,m,v,y,b,x=null!==(t=e.fontSize)&&void 0!==t?t:16,w=A(A({},this.resolveNodeDefaults(e)),{},{text:null!==(n=e.text)&&void 0!==n?n:"",textRendererOverride:null!==(r=e.textRendererOverride)&&void 0!==r?r:null,fontSize:x,fontFamily:null!==(i=e.fontFamily)&&void 0!==i?i:"sans-serif",fontStyle:null!==(a=e.fontStyle)&&void 0!==a?a:"normal",fontWeight:null!==(o=e.fontWeight)&&void 0!==o?o:"normal",fontStretch:null!==(s=e.fontStretch)&&void 0!==s?s:"normal",textAlign:null!==(u=e.textAlign)&&void 0!==u?u:"left",contain:null!==(l=e.contain)&&void 0!==l?l:"none",scrollable:null!==(c=e.scrollable)&&void 0!==c&&c,scrollY:null!==(d=e.scrollY)&&void 0!==d?d:0,offsetY:null!==(h=e.offsetY)&&void 0!==h?h:0,letterSpacing:null!==(f=e.letterSpacing)&&void 0!==f?f:0,lineHeight:null!==(p=e.lineHeight)&&void 0!==p?p:x,maxLines:null!==(g=e.maxLines)&&void 0!==g?g:0,textBaseline:null!==(m=e.textBaseline)&&void 0!==m?m:"alphabetic",verticalAlign:null!==(v=e.verticalAlign)&&void 0!==v?v:"top",overflowSuffix:null!==(y=e.overflowSuffix)&&void 0!==y?y:"...",debug:null!==(b=e.debug)&&void 0!==b?b:{}});return this.inspector?this.inspector.createTextNode(this.driver,w):this.driver.createTextNode(w)}resolveNodeDefaults(e){var t,n,r,i,a,o,s,u,l,c,d,h,f,p,g,m,v,y,b,x,w,T,A,S,E,I,k,C,_,M,R,N,L,D,P,O,U,B,j,F,z,G,V,K,H,W,X,q,Y=null!==(t=e.color)&&void 0!==t?t:4294967295,$=null!==(n=null!==(r=null!==(i=e.colorTl)&&void 0!==i?i:e.colorTop)&&void 0!==r?r:e.colorLeft)&&void 0!==n?n:Y,Q=null!==(a=null!==(o=null!==(s=e.colorTr)&&void 0!==s?s:e.colorTop)&&void 0!==o?o:e.colorRight)&&void 0!==a?a:Y,J=null!==(u=null!==(l=null!==(c=e.colorBl)&&void 0!==c?c:e.colorBottom)&&void 0!==l?l:e.colorLeft)&&void 0!==u?u:Y,Z=null!==(d=null!==(h=null!==(f=e.colorBr)&&void 0!==f?f:e.colorBottom)&&void 0!==h?h:e.colorRight)&&void 0!==d?d:Y,ee=yn(null!==(p=e.data)&&void 0!==p?p:{});return{x:null!==(g=e.x)&&void 0!==g?g:0,y:null!==(m=e.y)&&void 0!==m?m:0,width:null!==(v=e.width)&&void 0!==v?v:0,height:null!==(y=e.height)&&void 0!==y?y:0,alpha:null!==(b=e.alpha)&&void 0!==b?b:1,autosize:null!==(x=e.autosize)&&void 0!==x&&x,clipping:null!==(w=e.clipping)&&void 0!==w&&w,color:Y,colorTop:null!==(T=e.colorTop)&&void 0!==T?T:Y,colorBottom:null!==(A=e.colorBottom)&&void 0!==A?A:Y,colorLeft:null!==(S=e.colorLeft)&&void 0!==S?S:Y,colorRight:null!==(E=e.colorRight)&&void 0!==E?E:Y,colorBl:J,colorBr:Z,colorTl:$,colorTr:Q,zIndex:null!==(I=e.zIndex)&&void 0!==I?I:0,zIndexLocked:null!==(k=e.zIndexLocked)&&void 0!==k?k:0,parent:null!==(C=e.parent)&&void 0!==C?C:null,texture:null!==(_=e.texture)&&void 0!==_?_:null,shader:null!==(M=e.shader)&&void 0!==M?M:null,src:null!==(R=e.src)&&void 0!==R?R:"",scale:null!==(N=e.scale)&&void 0!==N?N:null,scaleX:null!==(L=null!==(D=e.scaleX)&&void 0!==D?D:e.scale)&&void 0!==L?L:1,scaleY:null!==(P=null!==(O=e.scaleY)&&void 0!==O?O:e.scale)&&void 0!==P?P:1,mount:null!==(U=e.mount)&&void 0!==U?U:0,mountX:null!==(B=null!==(j=e.mountX)&&void 0!==j?j:e.mount)&&void 0!==B?B:0,mountY:null!==(F=null!==(z=e.mountY)&&void 0!==z?z:e.mount)&&void 0!==F?F:0,pivot:null!==(G=e.pivot)&&void 0!==G?G:.5,pivotX:null!==(V=null!==(K=e.pivotX)&&void 0!==K?K:e.pivot)&&void 0!==V?V:.5,pivotY:null!==(H=null!==(W=e.pivotY)&&void 0!==W?W:e.pivot)&&void 0!==H?H:.5,rotation:null!==(X=e.rotation)&&void 0!==X?X:0,rtt:null!==(q=e.rtt)&&void 0!==q&&q,data:ee}}destroyNode(e){return this.inspector&&this.inspector.destroyNode(e),this.driver.destroyNode(e)}createTexture(e,t,n){var r=this.nextTextureId++,i={descType:"texture",txType:e,props:t,options:A(A({},n),{},{id:r})};return this.textureTracker.registerTexture(i),i}createShader(e,t){return{descType:"shader",shType:e,props:t}}getNodeById(e){return this.nodes.get(e)||null}toggleFreeze(){throw new Error("Not implemented")}advanceFrame(){throw new Error("Not implemented")}rerender(){throw new Error("Not implemented")}}class xn extends R{constructor(e,t,n){super(),S(this,"node",void 0),S(this,"props",void 0),S(this,"settings",void 0),S(this,"propStartValues",{}),S(this,"restoreValues",{}),S(this,"progress",0),S(this,"delayFor",0),S(this,"timingFunction",void 0),S(this,"propsList",void 0),this.node=e,this.props=t,this.settings=n,this.propStartValues={},this.propsList=Object.keys(t),this.propsList.forEach((t=>{this.propStartValues[t]=e[t]})),this.timingFunction=e=>e,n.easing&&"string"==typeof n.easing&&(this.timingFunction=Q(n.easing)),this.delayFor=n.delay||0}reset(){this.progress=0,this.delayFor=this.settings.delay||0,this.update(0)}restore(){this.reset(),Object.keys(this.props).forEach((e=>{this.node[e]=this.propStartValues[e]}))}reverse(){this.progress=0,Object.keys(this.props).forEach((e=>{var t=this.props[e],n=this.propStartValues[e];this.props[e]=n,this.propStartValues[e]=t})),this.settings.loop||(this.settings.stopMethod=!1)}applyEasing(e,t,n){return(this.timingFunction(e)||e)*(n-t)+t}update(e){var t=this.settings,n=t.duration,r=t.loop,i=t.easing,a=t.stopMethod;if(n)if(this.delayFor>0)this.delayFor-=e;else if(this.delayFor<=0&&0===this.progress&&this.emit("start",{}),this.progress+=e/n,this.progress>1&&(this.progress=r?0:1,a))this.emit("finished",{});else{for(var o=0;o<this.propsList.length;o++){var s=this.propsList[o],u=this.props[s],l=this.propStartValues[s],c=u;if(-1===s.indexOf("color"))this.node[s]=i?this.applyEasing(this.progress,l,c):l+(c-l)*this.progress;else{if(l===c){this.node[s]=l;continue}if(i){var d=this.timingFunction(this.progress)||this.progress,h=J(l,c,d);this.node[s]=h;continue}this.node[s]=J(l,c,this.progress)}}1===this.progress&&this.emit("finished",{})}else this.emit("finished",{})}}class wn{constructor(e,t){S(this,"manager",void 0),S(this,"animation",void 0),S(this,"startedPromise",null),S(this,"startedResolve",null),S(this,"stoppedPromise",null),S(this,"stoppedResolve",null),S(this,"state",void 0),this.manager=e,this.animation=t,this.state="stopped"}start(){return this.makeStartedPromise(),this.animation.once("start",this.started.bind(this)),this.makeStoppedPromise(),this.animation.once("finished",this.finished.bind(this)),this.manager.activeAnimations.has(this.animation)||this.manager.registerAnimation(this.animation),this.state="running",this}stop(){return this.manager.unregisterAnimation(this.animation),null!==this.stoppedResolve&&(this.stoppedResolve(),this.stoppedResolve=null),this.animation.reset(),this.state="stopped",this}pause(){return this.manager.unregisterAnimation(this.animation),this.state="paused",this}restore(){return this.stoppedResolve=null,this.animation.restore(),this}waitUntilStarted(){this.makeStartedPromise();var e=this.startedPromise;return k(e),e}waitUntilStopped(){this.makeStoppedPromise();var e=this.stoppedPromise;return k(e),e}makeStartedPromise(){null===this.startedResolve&&(this.startedPromise=new Promise((e=>{this.startedResolve=e})))}makeStoppedPromise(){null===this.stoppedResolve&&(this.stoppedPromise=new Promise((e=>{this.stoppedResolve=e})))}started(){k(this.startedResolve),this.startedResolve(this),this.startedResolve=null}finished(){k(this.stoppedResolve);var e=this.animation.settings,t=e.loop;if("reverse"===e.stopMethod)return this.animation.reverse(),void this.start();this.stoppedResolve(),this.stoppedResolve=null,t||this.manager.unregisterAnimation(this.animation)}}class Tn{constructor(e){S(this,"data",void 0),e?(this.data=new Float32Array(9),this.data[0]=e[0],this.data[3]=e[3],this.data[6]=e[6],this.data[1]=e[1],this.data[4]=e[4],this.data[7]=e[7],this.data[2]=e[2],this.data[5]=e[5],this.data[8]=e[8]):this.data=new Float32Array(9)}static get temp(){return Sn}static multiply(e,t,n){var r=e.data[0]*t.data[0]+e.data[3]*t.data[1]+e.data[6]*t.data[2],i=e.data[0]*t.data[3]+e.data[3]*t.data[4]+e.data[6]*t.data[5],a=e.data[0]*t.data[6]+e.data[3]*t.data[7]+e.data[6]*t.data[8],o=e.data[1]*t.data[0]+e.data[4]*t.data[1]+e.data[7]*t.data[2],s=e.data[1]*t.data[3]+e.data[4]*t.data[4]+e.data[7]*t.data[5],u=e.data[1]*t.data[6]+e.data[4]*t.data[7]+e.data[7]*t.data[8],l=e.data[2]*t.data[0]+e.data[5]*t.data[1]+e.data[8]*t.data[2],c=e.data[2]*t.data[3]+e.data[5]*t.data[4]+e.data[8]*t.data[5],d=e.data[2]*t.data[6]+e.data[5]*t.data[7]+e.data[8]*t.data[8];return n||(n=new Tn),n.data[0]=r,n.data[3]=i,n.data[6]=a,n.data[1]=o,n.data[4]=s,n.data[7]=u,n.data[2]=l,n.data[5]=c,n.data[8]=d,n}static identity(e){return e||(e=new Tn),e.data[0]=1,e.data[3]=0,e.data[6]=0,e.data[1]=0,e.data[4]=1,e.data[7]=0,e.data[2]=0,e.data[5]=0,e.data[8]=1,e}static translate(e,t,n){return n||(n=new Tn),n.data[0]=1,n.data[3]=0,n.data[6]=e,n.data[1]=0,n.data[4]=1,n.data[7]=t,n.data[2]=0,n.data[5]=0,n.data[8]=1,n}static scale(e,t,n){return n||(n=new Tn),n.data[0]=e,n.data[3]=0,n.data[6]=0,n.data[1]=0,n.data[4]=t,n.data[7]=0,n.data[2]=0,n.data[5]=0,n.data[8]=1,n}static rotate(e,t){var n=Math.cos(e),r=Math.sin(e);return t||(t=new Tn),t.data[0]=n,t.data[3]=-r,t.data[6]=0,t.data[1]=r,t.data[4]=n,t.data[7]=0,t.data[2]=0,t.data[5]=0,t.data[8]=1,t}static copy(e,t,n){return t||(t=new Tn),t.data[0]=e.data[0],t.data[1]=e.data[1],t.data[2]=e.data[2],t.data[3]=e.data[3],t.data[4]=e.data[4],t.data[5]=e.data[5],t.data[6]=e.data[6],t.data[7]=e.data[7],t.data[8]=e.data[8],t}translate(e,t){return this.data[6]=this.data[0]*e+this.data[3]*t+this.data[6],this.data[7]=this.data[1]*e+this.data[4]*t+this.data[7],this}scale(e,t){return this.data[0]=this.data[0]*e,this.data[3]=this.data[3]*t,this.data[1]=this.data[1]*e,this.data[4]=this.data[4]*t,this}rotate(e){if(0===e||!(e%Math.PI*2))return this;var t=Math.cos(e),n=Math.sin(e),r=this.data[0]*t+this.data[3]*n,i=this.data[3]*t-this.data[0]*n,a=this.data[1]*t+this.data[4]*n,o=this.data[4]*t-this.data[1]*n;return this.data[0]=r,this.data[3]=i,this.data[1]=a,this.data[4]=o,this}multiply(e){return Tn.multiply(this,e,this)}get tx(){return this.data[6]}get ty(){return this.data[7]}get ta(){return this.data[0]}get tb(){return this.data[3]}get tc(){return this.data[1]}get td(){return this.data[4]}transformPoint(e,t){return[this.data[0]*e+this.data[3]*t+this.data[6],this.data[1]*e+this.data[4]*t+this.data[1]]}}var An,Sn=new Tn;class En{constructor(e){S(this,"data",void 0),this.data=new Float32Array(8),e&&(this.data[0]=e[0],this.data[2]=e[2],this.data[4]=e[4],this.data[6]=e[6],this.data[1]=e[1],this.data[3]=e[3],this.data[5]=e[5],this.data[7]=e[7])}static translate(e,t,n,r,i,a,o,s,u){return u||(u=new En),u.data[0]=e,u.data[2]=n,u.data[4]=i,u.data[6]=o,u.data[1]=t,u.data[3]=r,u.data[5]=a,u.data[7]=s,u}get x1(){return this.data[0]}get x2(){return this.data[2]}get x3(){return this.data[4]}get x4(){return this.data[6]}get y1(){return this.data[1]}get y2(){return this.data[3]}get y3(){return this.data[5]}get y4(){return this.data[7]}}!function(e){e[e.Init=0]="Init",e[e.OutOfBounds=2]="OutOfBounds",e[e.InBounds=4]="InBounds",e[e.InViewport=8]="InViewport"}(An||(An={}));var In,kn=new Map;kn.set(An.Init,"init"),kn.set(An.OutOfBounds,"outOfBounds"),kn.set(An.InBounds,"inBounds"),kn.set(An.InViewport,"inViewport"),function(e){e[e.Children=1]="Children",e[e.ScaleRotate=2]="ScaleRotate",e[e.Local=4]="Local",e[e.Global=8]="Global",e[e.Clipping=16]="Clipping",e[e.CalculatedZIndex=32]="CalculatedZIndex",e[e.ZIndexSortedChildren=64]="ZIndexSortedChildren",e[e.PremultipliedColors=128]="PremultipliedColors",e[e.WorldAlpha=256]="WorldAlpha",e[e.RenderState=512]="RenderState",e[e.IsRenderable=1024]="IsRenderable",e[e.RenderTexture=2048]="RenderTexture",e[e.ParentRenderTexture=4096]="ParentRenderTexture",e[e.None=0]="None",e[e.All=8191]="All"}(In||(In={}));class Cn extends R{constructor(e,t){super(),S(this,"stage",void 0),S(this,"children",[]),S(this,"props",void 0),S(this,"updateType",In.All),S(this,"globalTransform",void 0),S(this,"scaleRotateTransform",void 0),S(this,"localTransform",void 0),S(this,"renderCoords",void 0),S(this,"renderBound",void 0),S(this,"strictBound",void 0),S(this,"preloadBound",void 0),S(this,"clippingRect",{x:0,y:0,width:0,height:0,valid:!1}),S(this,"isRenderable",!1),S(this,"renderState",An.Init),S(this,"worldAlpha",1),S(this,"premultipliedColorTl",0),S(this,"premultipliedColorTr",0),S(this,"premultipliedColorBl",0),S(this,"premultipliedColorBr",0),S(this,"calcZIndex",0),S(this,"hasRTTupdates",!1),S(this,"parentHasRenderTexture",!1),S(this,"onTextureLoaded",((e,t)=>{this.autosizeNode(t),this.stage.requestRender(),this.parentHasRenderTexture&&this.setRTTUpdates(1),this.emit("loaded",{type:"texture",dimensions:t})})),S(this,"onTextureFailed",((e,t)=>{this.emit("failed",{type:"texture",error:t})})),S(this,"onTextureFreed",(e=>{this.emit("freed",{type:"texture"})})),this.stage=e,this.props=A(A({},t),{},{parent:null}),this.parent=t.parent,this.rtt=t.rtt,this.updateScaleRotateTransform()}loadTexture(e,t,n=null){this.props.texture&&this.unloadTexture();var r=this.stage.txManager.loadTexture(e,t,n);this.props.texture=r,this.props.textureOptions=n,this.setUpdateType(In.IsRenderable),queueMicrotask((()=>{"loaded"===r.state?this.onTextureLoaded(r,r.dimensions):"failed"===r.state?this.onTextureFailed(r,r.error):"freed"===r.state&&this.onTextureFreed(r),r.on("loaded",this.onTextureLoaded),r.on("failed",this.onTextureFailed),r.on("freed",this.onTextureFreed)}))}unloadTexture(){if(this.props.texture){var e=this.props.texture;e.off("loaded",this.onTextureLoaded),e.off("failed",this.onTextureFailed),e.off("freed",this.onTextureFreed),e.setRenderableOwner(this,!1)}this.props.texture=null,this.props.textureOptions=null,this.setUpdateType(In.IsRenderable)}autosizeNode(e){this.autosize&&(this.width=e.width,this.height=e.height)}loadShader(e,t){var n=this.stage.renderer.getShaderManager();k(n);var r=n.loadShader(e,t),i=r.shader,a=r.props;this.props.shader=i,this.props.shaderProps=a,this.setUpdateType(In.IsRenderable)}setUpdateType(e){this.updateType|=e;var t=this.props.parent;!t||t.updateType&In.Children||t.setUpdateType(In.Children),this.parentHasRenderTexture&&this.setRTTUpdates(e)}sortChildren(){this.children.sort(((e,t)=>e.calcZIndex-t.calcZIndex))}updateScaleRotateTransform(){this.scaleRotateTransform=Tn.rotate(this.props.rotation,this.scaleRotateTransform).scale(this.props.scaleX,this.props.scaleY)}updateLocalTransform(){k(this.scaleRotateTransform);var e=this.props.pivotX*this.props.width,t=this.props.pivotY*this.props.height,n=this.props.mountX*this.props.width,r=this.props.mountY*this.props.height;this.localTransform=Tn.translate(e-n+this.props.x,t-r+this.props.y,this.localTransform).multiply(this.scaleRotateTransform).translate(-e,-t),this.setUpdateType(In.Global)}update(e,t){this.updateType&In.ScaleRotate&&(this.updateScaleRotateTransform(),this.setUpdateType(In.Local)),this.updateType&In.Local&&(this.updateLocalTransform(),this.setUpdateType(In.Global));var n,r=this.props.parent,i=In.None;if(this.updateType&In.ParentRenderTexture)for(var a=this.parent;a;)a.rtt&&(this.parentHasRenderTexture=!0),a=a.parent;(this.updateType^In.All&&this.updateType&In.RenderTexture&&this.children.forEach((e=>{e.setUpdateType(In.All)})),this.updateType&In.Global)&&(k(this.localTransform),this.globalTransform=Tn.copy((null==r?void 0:r.globalTransform)||this.localTransform,this.globalTransform),this.parentHasRenderTexture&&null!==(n=this.props.parent)&&void 0!==n&&n.rtt&&(this.globalTransform=Tn.identity()),r&&this.globalTransform.multiply(this.localTransform),this.calculateRenderCoords(),this.updateBoundingRect(),this.setUpdateType(In.Clipping|In.RenderState|In.Children),i|=In.Global);this.updateType&In.Clipping&&(this.calculateClippingRect(t),this.setUpdateType(In.Children),i|=In.Clipping),this.updateType&In.WorldAlpha&&(this.worldAlpha=r?r.worldAlpha*this.props.alpha:this.props.alpha,this.setUpdateType(In.Children|In.PremultipliedColors|In.IsRenderable),i|=In.WorldAlpha),this.updateType&In.PremultipliedColors&&(this.premultipliedColorTl=U(this.props.colorTl,this.worldAlpha,!0),this.props.colorTl===this.props.colorTr&&this.props.colorBl===this.props.colorBr&&this.props.colorTl===this.props.colorBl?this.premultipliedColorTr=this.premultipliedColorBl=this.premultipliedColorBr=this.premultipliedColorTl:(this.premultipliedColorTr=U(this.props.colorTr,this.worldAlpha,!0),this.premultipliedColorBl=U(this.props.colorBl,this.worldAlpha,!0),this.premultipliedColorBr=U(this.props.colorBr,this.worldAlpha,!0))),this.updateType&In.RenderState&&(this.updateRenderState(t),this.setUpdateType(In.IsRenderable)),this.updateType&In.IsRenderable&&this.updateIsRenderable(),r&&this.updateType&In.CalculatedZIndex&&(this.calculateZIndex(),r.setUpdateType(In.ZIndexSortedChildren)),this.updateType&In.Children&&this.children.length&&!this.rtt&&this.children.forEach((t=>{t.setUpdateType(i),0!==t.updateType&&t.update(e,this.clippingRect)})),this.updateType&In.ZIndexSortedChildren&&this.sortChildren(),this.updateType=0}checkRenderProps(){return!!this.props.texture||!(!this.props.width||!this.props.height)&&(!!this.props.shader||(!!this.props.clipping||(0!==this.props.color||(0!==this.props.colorTop||(0!==this.props.colorBottom||(0!==this.props.colorLeft||(0!==this.props.colorRight||(0!==this.props.colorTl||(0!==this.props.colorTr||(0!==this.props.colorBl||0!==this.props.colorBr))))))))))}checkRenderBounds(e){k(this.renderBound);var t=e.width||this.stage.root.width,n=e.height||this.stage.root.height;this.strictBound=L(e.x,e.y,e.x+t,e.y+n,this.strictBound);var r=this.stage.boundsMargin;return this.preloadBound=L(e.x-r[3],e.y-r[0],e.x+t+r[1],e.y+n+r[2],this.preloadBound),Z(this.renderBound,this.strictBound)?An.InViewport:Z(this.renderBound,this.preloadBound)?An.InBounds:An.OutOfBounds}updateRenderState(e){var t=this.checkRenderBounds(e);if(t!==this.renderState){var n=this.renderState;this.renderState=t,n===An.InViewport&&this.emit("outOfViewport",{previous:n,current:t}),(n<An.InBounds&&t===An.InViewport||n>An.InBounds&&t===An.OutOfBounds)&&(this.emit(kn.get(An.InBounds),{previous:n,current:t}),n=An.InBounds);var r=kn.get(t);k(r),this.emit(r,{previous:n,current:t})}}setRenderState(e){e!==this.renderState&&(this.renderState=e,this.emit(An[e]))}updateIsRenderable(){var e;e=!(0===this.worldAlpha||!this.checkRenderProps())&&this.renderState>An.OutOfBounds,this.isRenderable!==e&&(this.isRenderable=e,this.onChangeIsRenderable(e))}onChangeIsRenderable(e){var t;null===(t=this.props.texture)||void 0===t||t.setRenderableOwner(this,e)}calculateRenderCoords(){var e=this.width,t=this.height,n=this.globalTransform;k(n);var r=n.tx,i=n.ty,a=n.ta,o=n.tb,s=n.tc,u=n.td;if(0===o&&0===s){var l=r,c=r+e*a,d=i,h=i+t*u;this.renderCoords=En.translate(l,d,c,d,c,h,l,h,this.renderCoords)}else this.renderCoords=En.translate(r,i,r+e*a,i+e*s,r+e*a+t*o,i+e*s+t*u,r+t*o,i+t*u,this.renderCoords)}updateBoundingRect(){var e=this.renderCoords,t=this.globalTransform;k(t),k(e);var n=t.tb,r=t.tc,i=e.x1,a=e.y1,o=e.x3,s=e.y3;if(0===n||0===r)this.renderBound=L(i,a,o,s,this.renderBound);else{var u=e.x2,l=e.x4,c=e.y2,d=e.y4;this.renderBound=L(Math.min(i,u,o,l),Math.min(a,c,s,d),Math.max(i,u,o,l),Math.max(a,c,s,d),this.renderBound)}}calculateClippingRect(e){k(this.globalTransform);var t=this.clippingRect,n=this.props,r=this.globalTransform,i=n.clipping,a=0!==r.tb||0!==r.tc;i&&!a?(t.x=r.tx,t.y=r.ty,t.width=this.width*r.ta,t.height=this.height*r.td,t.valid=!0):t.valid=!1,e.valid&&t.valid?P(e,t,t):e.valid&&(X(e,t),t.valid=!0)}calculateZIndex(){var e,t,n=this.props,r=n.zIndex||0,i=(null===(e=n.parent)||void 0===e?void 0:e.zIndex)||0,a=r;null!==(t=n.parent)&&void 0!==t&&t.zIndexLocked&&(a=r<i?r:i),this.calcZIndex=a}destroy(){this.unloadTexture(),this.clippingRect.valid=!1,this.isRenderable=!1,delete this.renderCoords,delete this.renderBound,delete this.strictBound,delete this.preloadBound,delete this.globalTransform,delete this.scaleRotateTransform,delete this.localTransform,this.props.texture=null,this.props.shader=null,this.rtt&&this.stage.renderer.removeRTTNode(this),this.removeAllListeners(),this.parent=null}renderQuads(e){var t=this.props,n=t.width,r=t.height,i=t.texture,a=t.textureOptions,o=t.shader,s=t.shaderProps,u=t.rtt;if(this.parentHasRenderTexture){if(!e.renderToTextureActive)return;if(this.parentRenderTexture!==e.activeRttNode)return}var l=this.premultipliedColorTl,c=this.premultipliedColorTr,d=this.premultipliedColorBl,h=this.premultipliedColorBr,f=this.zIndex,p=this.worldAlpha,g=this.globalTransform,m=this.clippingRect;k(g),e.addQuad({width:n,height:r,colorTl:l,colorTr:c,colorBl:d,colorBr:h,texture:i,textureOptions:a,zIndex:f,shader:o,shaderProps:s,alpha:p,clippingRect:m,tx:g.tx,ty:g.ty,ta:g.ta,tb:g.tb,tc:g.tc,td:g.td,rtt:u,parentHasRenderTexture:this.parentHasRenderTexture,framebufferDimensions:this.framebufferDimensions})}get id(){return this.props.id}get x(){return this.props.x}set x(e){this.props.x!==e&&(this.props.x=e,this.setUpdateType(In.Local))}get absX(){var e,t;return this.props.x+((null===(e=this.props.parent)||void 0===e?void 0:e.absX)||(null===(t=this.props.parent)||void 0===t||null===(t=t.globalTransform)||void 0===t?void 0:t.tx)||0)}get absY(){var e,t;return this.props.y+(null!==(e=null===(t=this.props.parent)||void 0===t?void 0:t.absY)&&void 0!==e?e:0)}get y(){return this.props.y}set y(e){this.props.y!==e&&(this.props.y=e,this.setUpdateType(In.Local))}get width(){return this.props.width}set width(e){this.props.width!==e&&(this.props.width=e,this.setUpdateType(In.Local),this.props.rtt&&this.setUpdateType(In.RenderTexture))}get height(){return this.props.height}set height(e){this.props.height!==e&&(this.props.height=e,this.setUpdateType(In.Local),this.props.rtt&&this.setUpdateType(In.RenderTexture))}get scale(){return this.scaleX}set scale(e){this.scaleX=e,this.scaleY=e}get scaleX(){return this.props.scaleX}set scaleX(e){this.props.scaleX!==e&&(this.props.scaleX=e,this.setUpdateType(In.ScaleRotate))}get scaleY(){return this.props.scaleY}set scaleY(e){this.props.scaleY!==e&&(this.props.scaleY=e,this.setUpdateType(In.ScaleRotate))}get mount(){return this.props.mount}set mount(e){this.props.mountX===e&&this.props.mountY===e||(this.props.mountX=e,this.props.mountY=e,this.props.mount=e,this.setUpdateType(In.Local))}get mountX(){return this.props.mountX}set mountX(e){this.props.mountX!==e&&(this.props.mountX=e,this.setUpdateType(In.Local))}get mountY(){return this.props.mountY}set mountY(e){this.props.mountY!==e&&(this.props.mountY=e,this.setUpdateType(In.Local))}get pivot(){return this.props.pivot}set pivot(e){this.props.pivotX===e&&this.props.pivotY===e||(this.props.pivotX=e,this.props.pivotY=e,this.props.pivot=e,this.setUpdateType(In.Local))}get pivotX(){return this.props.pivotX}set pivotX(e){this.props.pivotX!==e&&(this.props.pivotX=e,this.setUpdateType(In.Local))}get pivotY(){return this.props.pivotY}set pivotY(e){this.props.pivotY!==e&&(this.props.pivotY=e,this.setUpdateType(In.Local))}get rotation(){return this.props.rotation}set rotation(e){this.props.rotation!==e&&(this.props.rotation=e,this.setUpdateType(In.ScaleRotate))}get alpha(){return this.props.alpha}set alpha(e){this.props.alpha=e,this.setUpdateType(In.PremultipliedColors|In.WorldAlpha)}get autosize(){return this.props.autosize}set autosize(e){this.props.autosize=e}get clipping(){return this.props.clipping}set clipping(e){this.props.clipping=e,this.setUpdateType(In.Clipping)}get color(){return this.props.color}set color(e){this.props.colorTl===e&&this.props.colorTr===e&&this.props.colorBl===e&&this.props.colorBr===e||(this.colorTl=e,this.colorTr=e,this.colorBl=e,this.colorBr=e),this.props.color=e,this.setUpdateType(In.PremultipliedColors)}get colorTop(){return this.props.colorTop}set colorTop(e){this.props.colorTl===e&&this.props.colorTr===e||(this.colorTl=e,this.colorTr=e),this.props.colorTop=e,this.setUpdateType(In.PremultipliedColors)}get colorBottom(){return this.props.colorBottom}set colorBottom(e){this.props.colorBl===e&&this.props.colorBr===e||(this.colorBl=e,this.colorBr=e),this.props.colorBottom=e,this.setUpdateType(In.PremultipliedColors)}get colorLeft(){return this.props.colorLeft}set colorLeft(e){this.props.colorTl===e&&this.props.colorBl===e||(this.colorTl=e,this.colorBl=e),this.props.colorLeft=e,this.setUpdateType(In.PremultipliedColors)}get colorRight(){return this.props.colorRight}set colorRight(e){this.props.colorTr===e&&this.props.colorBr===e||(this.colorTr=e,this.colorBr=e),this.props.colorRight=e,this.setUpdateType(In.PremultipliedColors)}get colorTl(){return this.props.colorTl}set colorTl(e){this.props.colorTl=e,this.setUpdateType(In.PremultipliedColors)}get colorTr(){return this.props.colorTr}set colorTr(e){this.props.colorTr=e,this.setUpdateType(In.PremultipliedColors)}get colorBl(){return this.props.colorBl}set colorBl(e){this.props.colorBl=e,this.setUpdateType(In.PremultipliedColors)}get colorBr(){return this.props.colorBr}set colorBr(e){this.props.colorBr=e,this.setUpdateType(In.PremultipliedColors)}get zIndexLocked(){return this.props.zIndexLocked||0}set zIndexLocked(e){this.props.zIndexLocked=e,this.setUpdateType(In.CalculatedZIndex|In.Children),this.children.forEach((e=>{e.setUpdateType(In.CalculatedZIndex)}))}get zIndex(){return this.props.zIndex}set zIndex(e){this.props.zIndex=e,this.setUpdateType(In.CalculatedZIndex|In.Children),this.children.forEach((e=>{e.setUpdateType(In.CalculatedZIndex)}))}get parent(){return this.props.parent}set parent(e){var t=this.props.parent;if(t!==e){if(this.props.parent=e,t){var n=t.children.indexOf(this);k(-1!==n,"CoreNode.parent: Node not found in old parent's children!"),t.children.splice(n,1),t.setUpdateType(In.Children|In.ZIndexSortedChildren)}e&&(e.children.push(this),this.setUpdateType(In.All),e.setUpdateType(In.Children|In.ZIndexSortedChildren),(e.rtt||e.parentHasRenderTexture)&&this.setRTTUpdates(In.All)),this.updateScaleRotateTransform()}}get rtt(){return this.props.rtt}set rtt(e){var t,n;e?(this.props.rtt=!0,this.hasRTTupdates=!0,this.setUpdateType(In.All),this.children.forEach((e=>{e.setUpdateType(In.All)})),null===(t=this.stage.renderer)||void 0===t||t.renderToTexture(this)):this.props.rtt&&(this.props.rtt=!1,this.unloadTexture(),this.setUpdateType(In.All),this.children.forEach((e=>{e.parentHasRenderTexture=!1})),null===(n=this.stage.renderer)||void 0===n||n.removeRTTNode(this))}get framebufferDimensions(){return this.parentHasRenderTexture&&!this.rtt&&this.parent?this.parent.framebufferDimensions:{width:this.width,height:this.height}}get parentRenderTexture(){for(var e=this.parent;e;){if(e.rtt)return e;e=e.parent}return null}get texture(){return this.props.texture}setRTTUpdates(e){var t;this.hasRTTupdates=!0,null===(t=this.parent)||void 0===t||t.setRTTUpdates(e)}}var _n=1;function Mn(){return _n++}class Rn extends R{constructor(e,t,n,r){var i;super(),S(this,"rendererMain",void 0),S(this,"stage",void 0),S(this,"id",void 0),S(this,"coreNode",void 0),S(this,"_children",[]),S(this,"_src",""),S(this,"_parent",null),S(this,"_texture",null),S(this,"_shader",null),S(this,"_data",{}),S(this,"onTextureLoaded",((e,t)=>{this.emit("loaded",t)})),S(this,"onTextureFailed",((e,t)=>{this.emit("failed",t)})),S(this,"onTextureFreed",((e,t)=>{this.emit("freed",t)})),S(this,"onOutOfBounds",((e,t)=>{this.emit("outOfBounds",t)})),S(this,"onInBounds",((e,t)=>{this.emit("inBounds",t)})),S(this,"onOutOfViewport",((e,t)=>{this.emit("outOfViewport",t)})),S(this,"onInViewport",((e,t)=>{this.emit("inViewport",t)})),this.rendererMain=t,this.stage=n,this.id=null!==(i=null==r?void 0:r.id)&&void 0!==i?i:Mn(),this.coreNode=r||new Cn(this.stage,{id:this.id,x:e.x,y:e.y,width:e.width,height:e.height,alpha:e.alpha,autosize:e.autosize,clipping:e.clipping,color:e.color,colorTop:e.colorTop,colorBottom:e.colorBottom,colorLeft:e.colorLeft,colorRight:e.colorRight,colorTl:e.colorTl,colorTr:e.colorTr,colorBl:e.colorBl,colorBr:e.colorBr,zIndex:e.zIndex,zIndexLocked:e.zIndexLocked,scaleX:e.scaleX,scaleY:e.scaleY,mountX:e.mountX,mountY:e.mountY,mount:e.mount,pivot:e.pivot,pivotX:e.pivotX,pivotY:e.pivotY,rotation:e.rotation,parent:null,shader:null,shaderProps:null,texture:null,textureOptions:null,rtt:e.rtt}),this.coreNode.on("loaded",this.onTextureLoaded),this.coreNode.on("failed",this.onTextureFailed),this.coreNode.on("freed",this.onTextureFreed),this.coreNode.on("outOfBounds",this.onOutOfBounds),this.coreNode.on("inBounds",this.onInBounds),this.coreNode.on("outOfViewport",this.onOutOfViewport),this.coreNode.on("inViewport",this.onInViewport),this.parent=e.parent,this.shader=e.shader,this.texture=e.texture,this.src=e.src,this.rtt=e.rtt,this._data=e.data}get x(){return this.coreNode.x}set x(e){this.coreNode.x=e}get y(){return this.coreNode.y}set y(e){this.coreNode.y=e}get width(){return this.coreNode.width}set width(e){e!==this.coreNode.width&&this.coreNode.rtt&&(this.texture=this.rendererMain.createTexture("RenderTexture",{width:this.width,height:this.height},{preload:!0,flipY:!0})),this.coreNode.width=e}get height(){return this.coreNode.height}set height(e){e!==this.coreNode.height&&this.coreNode.rtt&&(this.texture=this.rendererMain.createTexture("RenderTexture",{width:this.width,height:this.height},{preload:!0,flipY:!0})),this.coreNode.height=e}get alpha(){return this.coreNode.alpha}set alpha(e){this.coreNode.alpha=e}get autosize(){return this.coreNode.autosize}set autosize(e){this.coreNode.autosize=e}get clipping(){return this.coreNode.clipping}set clipping(e){this.coreNode.clipping=e}get color(){return this.coreNode.color}set color(e){this.coreNode.color=e}get colorTop(){return this.coreNode.colorTop}set colorTop(e){this.coreNode.colorTop=e}get colorBottom(){return this.coreNode.colorBottom}set colorBottom(e){this.coreNode.colorBottom=e}get colorLeft(){return this.coreNode.colorLeft}set colorLeft(e){this.coreNode.colorLeft=e}get colorRight(){return this.coreNode.colorRight}set colorRight(e){this.coreNode.colorRight=e}get colorTl(){return this.coreNode.colorTl}set colorTl(e){this.coreNode.colorTl=e}get colorTr(){return this.coreNode.colorTr}set colorTr(e){this.coreNode.colorTr=e}get colorBl(){return this.coreNode.colorBl}set colorBl(e){this.coreNode.colorBl=e}get colorBr(){return this.coreNode.colorBr}set colorBr(e){this.coreNode.colorBr=e}get scale(){return this.scaleX!==this.scaleY?null:this.coreNode.scaleX}set scale(e){null!==e&&(this.coreNode.scaleX=e,this.coreNode.scaleY=e)}get scaleX(){return this.coreNode.scaleX}set scaleX(e){this.coreNode.scaleX=e}get scaleY(){return this.coreNode.scaleY}set scaleY(e){this.coreNode.scaleY=e}get mount(){return this.coreNode.mount}set mount(e){this.coreNode.mount=e}get mountX(){return this.coreNode.mountX}set mountX(e){this.coreNode.mountX=e}get mountY(){return this.coreNode.mountY}set mountY(e){this.coreNode.mountY=e}get pivot(){return this.coreNode.pivot}set pivot(e){this.coreNode.pivot=e}get pivotX(){return this.coreNode.pivotX}set pivotX(e){this.coreNode.pivotX=e}get pivotY(){return this.coreNode.pivotY}set pivotY(e){this.coreNode.pivotY=e}get rotation(){return this.coreNode.rotation}set rotation(e){this.coreNode.rotation=e}get parent(){return this._parent}set parent(e){var t,n=this._parent;if(this._parent=e,this.coreNode.parent=null!==(t=null==e?void 0:e.coreNode)&&void 0!==t?t:null,n){var r=n.children.indexOf(this);k(-1!==r,"MainOnlyNode.parent: Node not found in old parent's children!"),n.children.splice(r,1)}e&&e.children.push(this)}get children(){return this._children}get zIndex(){return this.coreNode.zIndex}set zIndex(e){this.coreNode.zIndex=e}get zIndexLocked(){return this.coreNode.zIndexLocked}set zIndexLocked(e){this.coreNode.zIndexLocked=e}get src(){return this._src}set src(e){this._src!==e&&(this._src=e,this.texture=e?this.rendererMain.createTexture("ImageTexture",{src:e}):null)}get texture(){return this._texture}set texture(e){this._texture!==e&&(this._texture&&this.rendererMain.textureTracker.decrementTextureRefCount(this._texture),e&&this.rendererMain.textureTracker.incrementTextureRefCount(e),this._texture=e,e?this.coreNode.loadTexture(e.txType,e.props,e.options):this.coreNode.unloadTexture())}get rtt(){return this.coreNode.rtt}set rtt(e){e&&(this.texture=this.rendererMain.createTexture("RenderTexture",{width:this.width,height:this.height},{preload:!0,flipY:!0})),this.coreNode.rtt=e}get parentHasRenderTexture(){return this.coreNode.parentHasRenderTexture}get shader(){return this._shader}set shader(e){this._shader!==e&&(this._shader=e,e&&this.coreNode.loadShader(e.shType,e.props))}get data(){return this._data}set data(e){this._data=yn(e)}destroy(){this.emit("beforeDestroy",{});for(var e=this.children[0];e;)e.destroy(),e=this.children[0];this.coreNode.destroy(),this.parent=null,this.texture=null,this.emit("afterDestroy",{}),this.removeAllListeners()}flush(){}animate(e,t){var n=new xn(this.coreNode,e,t);return new wn(this.stage.animationManager,n)}}class Nn{constructor(){S(this,"activeAnimations",new Set)}registerAnimation(e){this.activeAnimations.add(e)}unregisterAnimation(e){this.activeAnimations.delete(e)}update(e){this.activeAnimations.forEach((t=>{t.update(e)}))}}class Ln{constructor(e){S(this,"imageWorkersEnabled",!0),S(this,"messageManager",{}),S(this,"workers",[]),S(this,"workerIndex",0),S(this,"nextId",0),this.workers=this.createWorkers(e),this.workers.forEach((e=>{e.onmessage=this.handleMessage.bind(this)}))}handleMessage(e){var t=e.data,n=t.id,r=t.data,i=t.error,a=this.messageManager[n];if(a){var o=E(a,2),s=o[0],u=o[1];delete this.messageManager[n],i?u(new Error(i)):s(r)}}createWorkers(e=1){for(var t=new Blob(["\n      function hasAlphaChannel(mimeType) {\n          return (mimeType.indexOf(\"image/png\") !== -1);\n      }\n\n      function getImage(src, premultiplyAlpha) {\n        return new Promise(function(resolve, reject) {\n          var xhr = new XMLHttpRequest();\n          xhr.open('GET', src, true);\n          xhr.responseType = 'blob';\n\n          xhr.onload = function() {\n            if (xhr.status === 200) {\n              var blob = xhr.response;\n              var hasAlphaChannel = premultiplyAlpha !== undefined ? premultiplyAlpha : hasAlphaChannel(blob.type);\n\n              createImageBitmap(blob, {\n                premultiplyAlpha: hasAlphaChannel ? 'premultiply' : 'none',\n                colorSpaceConversion: 'none',\n                imageOrientation: 'none'\n              }).then(function(data) {\n                resolve({ data: data, premultiplyAlpha: premultiplyAlpha });\n              }).catch(function(error) {\n                reject(error);\n              });\n            } else {\n              reject(new Error('Failed to load image: ' + xhr.statusText));\n            }\n          };\n\n          xhr.onerror = function() {\n            reject(new Error('Network error occurred while trying to fetch the image.'));\n          };\n\n          xhr.send();\n        });\n      }\n\n      self.onmessage = (event) => {\n        var id = event.data.id;\n        var src = event.data.src;\n        var premultiplyAlpha = event.data.premultiplyAlpha;\n\n        getImage(src, premultiplyAlpha)\n          .then(function(data) {\n              self.postMessage({ id: id, data: data }, [data.data]);\n          })\n          .catch(function(error) {\n              self.postMessage({ id: id, error: error.message });\n          });\n      };\n    ".replace("","")],{type:"application/javascript"}),n=(self.URL?URL:webkitURL).createObjectURL(t),r=[],i=0;i<e;i++)r.push(new Worker(n));return r}getNextWorker(){var e=this.workers[this.workerIndex];return this.workerIndex=(this.workerIndex+1)%this.workers.length,e}convertUrlToAbsolute(e){return new URL(e,self.location.href).href}getImage(e,t){return new Promise(((n,r)=>{try{if(this.workers){var i=this.convertUrlToAbsolute(e),a=this.nextId++;this.messageManager[a]=[n,r],this.getNextWorker().postMessage({id:a,src:i,premultiplyAlpha:t})}}catch(o){r(o)}}))}}class Dn extends F{constructor(e,t){super(e),S(this,"props",void 0),this.props=Dn.resolveDefaults(t)}getTextureData(){var e=this;return w(b().mark((function t(){var n,r,i,a,o,s,u;return b().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(n=e.props,r=n.width,i=n.height,a=r*i*4,o=new Uint8ClampedArray(a),s=0;s<a;s+=4)u=Math.floor(256*Math.random()),o[s]=u,o[s+1]=u,o[s+2]=u,o[s+3]=255;return t.abrupt("return",{data:new ImageData(o,r,i)});case 5:case"end":return t.stop()}}),t)})))()}static makeCacheKey(e){var t=Dn.resolveDefaults(e);return`NoiseTexture,${t.width},${t.height},${t.cacheId}`}static resolveDefaults(e){var t,n,r;return{width:null!==(t=e.width)&&void 0!==t?t:128,height:null!==(n=e.height)&&void 0!==n?n:128,cacheId:null!==(r=e.cacheId)&&void 0!==r?r:0}}}S(Dn,"z$__type__Props",void 0);class Pn{constructor(e){S(this,"usedMemory",0),S(this,"txConstructors",{}),S(this,"textureKeyCache",new Map),S(this,"textureIdCache",new Map),S(this,"ctxTextureCache",new WeakMap),S(this,"textureRefCountMap",new WeakMap),S(this,"imageWorkerManager",null),S(this,"hasCreateImageBitmap",!!self.createImageBitmap),S(this,"hasWorker",!!self.Worker),S(this,"renderer",void 0),this.hasCreateImageBitmap&&this.hasWorker&&(this.imageWorkerManager=new Ln(e)),this.hasCreateImageBitmap||console.warn("[Lightning] createImageBitmap is not supported on this browser. ImageTexture will be slower."),this.registerTextureType("ImageTexture",an),this.registerTextureType("ColorTexture",ee),this.registerTextureType("NoiseTexture",Dn),this.registerTextureType("SubTexture",te),this.registerTextureType("RenderTexture",ne)}registerTextureType(e,t){this.txConstructors[e]=t}loadTexture(e,t,n=null){var r,i=this.txConstructors[e];if(!i)throw new Error(`Texture type "${e}" is not registered`);if(void 0!==(null==n?void 0:n.id)&&this.textureIdCache.has(n.id)&&(r=this.textureIdCache.get(n.id)),!r){var a,o=null==n?void 0:n.id,s=null!==(a=null==n?void 0:n.cacheKey)&&void 0!==a?a:i.makeCacheKey(t);r=s&&this.textureKeyCache.has(s)?this.textureKeyCache.get(s):new i(this,t),o&&this.addTextureIdToCache(o,s,r)}null!=n&&n.preload&&this.getCtxTexture(r).load();return r}addTextureIdToCache(e,t,n){var r=this.textureIdCache,i=this.textureRefCountMap;r.set(e,n),i.has(n)?i.get(n).count++:(i.set(n,{cacheKey:t,count:1}),t&&this.textureKeyCache.set(t,n))}removeTextureIdFromCache(e){var t,n=this.textureIdCache,r=this.textureRefCountMap,i=n.get(e);if(i){if(n.delete(e),r.has(i)){var a=r.get(i);k(a),a.count--,0===a.count&&(r.delete(i),a.cacheKey&&this.textureKeyCache.delete(a.cacheKey))}null===(t=this.ctxTextureCache.get(i))||void 0===t||t.free()}}getDebugInfo(){return{keyCacheSize:this.textureKeyCache.size,idCacheSize:this.textureIdCache.size}}getCtxTexture(e){if(this.ctxTextureCache.has(e))return this.ctxTextureCache.get(e);var t=this.renderer.createCtxTexture(e);return this.ctxTextureCache.set(e,t),t}}class On{constructor(){S(this,"data",{})}reset(){this.data={}}increment(e){this.data[e]||(this.data[e]=0),this.data[e]++}getData(){return A({},this.data)}}class Un{constructor(e){S(this,"memUsed",0),S(this,"textures",new Map),S(this,"threshold",void 0),S(this,"gcRequested",!1),this.threshold=e,0===e&&(this.setTextureMemUse=()=>{})}setTextureMemUse(e,t){this.textures.has(e)&&(this.memUsed-=this.textures.get(e)),0!==t?(this.memUsed+=t,this.textures.set(e,t),this.memUsed>this.threshold&&(this.gcRequested=!0)):this.textures.delete(e)}gc(){this.gcRequested=!1,this.textures.forEach(((e,t)=>{t.renderable||t.free()}))}}var Bn={isWhite:!0,a:1,r:255,g:255,b:255};function jn(e){return 4294967295===e?Bn:{isWhite:!1,a:(e>>>24&255)/255,r:255&e,g:255&e>>>8,b:255&e>>>16}}function Fn({a:e,r:t,g:n,b:r}){return`rgba(${t},${n},${r},${e})`}class zn extends re{constructor(...e){super(...e),S(this,"image",void 0),S(this,"tintCache",void 0)}load(){"freed"===this.textureSource.state&&(this.textureSource.setState("loading"),this.onLoadRequest().then((e=>{this.textureSource.setState("loaded",e),this.updateMemSize()})).catch((e=>{this.textureSource.setState("failed",e)})))}free(){this.image=void 0,this.tintCache=void 0,this.textureSource.setState("freed"),this.memManager.setTextureMemUse(this,0)}updateMemSize(){var e=this.tintCache?8:4;if(this.textureSource.dimensions){var t=this.textureSource.dimensions,n=t.width,r=t.height;this.memManager.setTextureMemUse(this,n*r*e)}}hasImage(){return void 0!==this.image}getImage(e){var t,n=this.image;if(k(n,"Attempt to get unloaded image texture"),e.isWhite)return this.tintCache&&(this.tintCache=void 0,this.updateMemSize()),n;var r=Fn(e);if((null===(t=this.tintCache)||void 0===t?void 0:t.key)===r)return this.tintCache.image;var i=this.tintTexture(n,r);return this.tintCache={key:r,image:i},this.updateMemSize(),i}tintTexture(e,t){var n=e.width,r=e.height,i=document.createElement("canvas");i.width=n,i.height=r;var a=i.getContext("2d");return a&&(a.fillStyle=t,a.globalCompositeOperation="copy",a.fillRect(0,0,n,r),a.globalCompositeOperation="multiply",a.drawImage(e,0,0,n,r,0,0,n,r),a.globalCompositeOperation="destination-in",a.drawImage(e,0,0,n,r,0,0,n,r)),i}get renderable(){return this.textureSource.renderable}onLoadRequest(){var e=this;return w(b().mark((function t(){var n,r,i,a;return b().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.textureSource.getTextureData();case 2:if(n=t.sent,!((r=n.data)instanceof ImageData)){t.next=14;break}return(i=document.createElement("canvas")).width=r.width,i.height=r.height,(a=i.getContext("2d"))&&a.putImageData(r,0,0),e.image=i,t.abrupt("return",{width:r.width,height:r.height});case 14:if(!(r instanceof ImageBitmap)){t.next=17;break}return e.image=r,t.abrupt("return",{width:r.width,height:r.height});case 17:return t.abrupt("return",{width:0,height:0});case 18:case"end":return t.stop()}}),t)})))()}}class Gn extends ie{constructor(e){super(e),S(this,"context",void 0),S(this,"canvas",void 0),S(this,"pixelRatio",void 0),S(this,"clearColor",void 0),S(this,"renderToTextureActive",!1),S(this,"activeRttNode",null),this.mode="canvas",this.shManager.renderer=this;var t=e.canvas,n=e.pixelRatio,r=e.clearColor;this.canvas=t,this.context=t.getContext("2d"),this.pixelRatio=n,this.clearColor=r?ae(r):void 0}reset(){this.canvas.width=this.canvas.width;var e=this.context;if(this.clearColor){var t=E(this.clearColor,4),n=t[0],r=t[1],i=t[2],a=t[3];e.fillStyle=`rgba(${n}, ${r}, ${i}, ${a/255})`,e.fillRect(0,0,this.canvas.width,this.canvas.height)}e.scale(this.pixelRatio,this.pixelRatio)}render(){}addQuad(e){var t,n=this.context,r=e.tx,i=e.ty,a=e.width,o=e.height,s=e.alpha,u=e.colorTl,l=e.colorTr,c=e.colorBr,d=e.ta,h=e.tb,f=e.tc,p=e.td,g=e.clippingRect,m=e.texture,v=void 0;if(m){if(m instanceof te&&(t=m.props,m=m.parentTexture),v=this.txManager.getCtxTexture(m),"freed"===m.state)return void v.load();if("loaded"!==m.state||!v.hasImage())return}var y=jn(u),b=1!==d,x=0!==g.width&&0!==g.height,w=u!==l||u!==c,T=e.shader?function(e){var t,n;return e.shader instanceof Zt&&e.shader.shType===Jt&&null!==(t=null===(n=e.shaderProps)||void 0===n?void 0:n.radius)&&void 0!==t?t:0}(e):0;if((b||x||T)&&n.save(),x){var A=new Path2D,S=g.x,E=g.y,I=g.width,k=g.height;A.rect(S,E,I,k),n.clip(A)}if(b){var C=this.pixelRatio;n.setTransform(d,f,h,p,r*C,i*C),n.scale(C,C),n.translate(-r,-i)}if(T){var _=new Path2D;_.roundRect(r,i,a,o,T),n.clip(_)}if(v){var M=v.getImage(y);n.globalAlpha=s,t?n.drawImage(M,t.x,t.y,t.width,t.height,r,i,a,o):n.drawImage(M,r,i,a,o),n.globalAlpha=1}else if(w){var R,N=r,L=i;u===l?(N=r,L=i+o,R=jn(c)):(N=r+a,L=i,R=jn(l));var D=n.createLinearGradient(r,i,N,L);D.addColorStop(0,Fn(y)),D.addColorStop(1,Fn(R)),n.fillStyle=D,n.fillRect(r,i,a,o)}else n.fillStyle=Fn(y),n.fillRect(r,i,a,o);(b||x||T)&&n.restore()}createCtxTexture(e){return new zn(this.txMemManager,e)}getShaderManager(){return this.shManager}renderRTTNodes(){}removeRTTNode(e){}renderToTexture(e){}}var Vn,Kn;class Hn extends R{constructor(e){super(),S(this,"options",void 0),S(this,"animationManager",void 0),S(this,"txManager",void 0),S(this,"txMemManager",void 0),S(this,"fontManager",void 0),S(this,"textRenderers",void 0),S(this,"shManager",void 0),S(this,"renderer",void 0),S(this,"root",void 0),S(this,"boundsMargin",void 0),S(this,"deltaTime",0),S(this,"lastFrameTime",0),S(this,"currentFrameTime",0),S(this,"fpsNumFrames",0),S(this,"fpsElapsedTime",0),S(this,"renderRequested",!1),S(this,"contextSpy",null),this.options=e;var t=e.canvas,n=e.clearColor,r=e.rootId,i=e.debug,a=e.appWidth,o=e.appHeight,s=e.boundsMargin,u=e.enableContextSpy,l=e.numImageWorkers,c=e.txMemByteThreshold,d=e.renderMode;this.txManager=new Pn(l),this.txMemManager=new Un(c),this.shManager=new en,this.animationManager=new Nn,this.contextSpy=u?new On:null;var h=[0,0,0,0];s&&(h=Array.isArray(s)?s:[s,s,s,s]),this.boundsMargin=h,null!=i&&i.monitorTextureCache&&setInterval((()=>{k(this.txManager);var e=this.txManager.getDebugInfo();console.log("Texture ID Cache Size: ",e.idCacheSize),console.log("Texture Key Cache Size: ",e.keyCacheSize)}),1e3);var f={stage:this,canvas:t,pixelRatio:e.devicePhysicalPixelRatio*e.deviceLogicalPixelRatio,clearColor:null!=n?n:4278190080,bufferMemory:2e6,txManager:this.txManager,txMemManager:this.txMemManager,shManager:this.shManager,contextSpy:this.contextSpy};this.renderer="canvas"===d?new Gn(f):new K(f),oe(d),this.txManager.renderer=this.renderer,this.textRenderers="webgl"===d?{canvas:new _t(this),sdf:new gn(this)}:{canvas:new _t(this)},this.fontManager=new fn(this.textRenderers);var p,g,m,v=new Cn(this,{id:r,x:0,y:0,width:a,height:o,alpha:1,autosize:!1,clipping:!1,color:0,colorTop:0,colorBottom:0,colorLeft:0,colorRight:0,colorTl:0,colorTr:0,colorBl:0,colorBr:0,zIndex:0,zIndexLocked:0,scaleX:1,scaleY:1,mountX:0,mountY:0,mount:0,pivot:.5,pivotX:.5,pivotY:.5,rotation:0,parent:null,texture:null,textureOptions:null,shader:null,shaderProps:null,rtt:!1});this.root=v,p=this,g=!1,m=()=>{if(p.updateAnimations(),!p.hasSceneUpdates())return p.calculateFps(),setTimeout(m,16.666666666666668),void(g||(p.emit("idle"),g=!0));g=!1,p.drawFrame(),requestAnimationFrame(m)},requestAnimationFrame(m)}updateAnimations(){var e=this.animationManager;this.root&&(this.lastFrameTime=this.currentFrameTime,this.currentFrameTime=performance?performance.now():Date.now(),this.deltaTime=this.lastFrameTime?this.currentFrameTime-this.lastFrameTime:100/6,this.emit("frameTick",{time:this.currentFrameTime,delta:this.deltaTime}),e.update(this.deltaTime))}hasSceneUpdates(){return!!this.root.updateType||this.renderRequested}drawFrame(){var e=this.renderer,t=this.renderRequested;k(e),0!==this.root.updateType&&this.root.update(this.deltaTime,this.root.clippingRect),e.reset(),e.txMemManager.gcRequested&&e.txMemManager.gc(),e.rttNodes.length>0&&e.renderRTTNodes(),this.addQuads(this.root),null==e||e.render(),this.calculateFps(),t&&(this.renderRequested=!1)}calculateFps(){var e=this.options.fpsUpdateInterval;if(e&&(this.fpsNumFrames++,this.fpsElapsedTime+=this.deltaTime,this.fpsElapsedTime>=e)){var t,n,r,i=Math.round(1e3*this.fpsNumFrames/this.fpsElapsedTime);this.fpsNumFrames=0,this.fpsElapsedTime=0,this.emit("fpsUpdate",{fps:i,contextSpyData:null!==(t=null===(n=this.contextSpy)||void 0===n?void 0:n.getData())&&void 0!==t?t:null}),null===(r=this.contextSpy)||void 0===r||r.reset()}}addQuads(e){k(this.renderer&&e.globalTransform),e.isRenderable&&e.renderQuads(this.renderer);for(var t=0;t<e.children.length;t++){var n=e.children[t];n&&(0!==(null==n?void 0:n.worldAlpha)&&this.addQuads(n))}}requestRender(){this.renderRequested=!0}resolveTextRenderer(e,t=null){var n=t,r=!1;if(n){var i=this.textRenderers[n];i?i.canRenderFont(e)||(console.warn(`Cannot use override text renderer '${n}' for font`,e),n=null,r=!0):(console.warn(`Text renderer override '${n}' not found.`),n=null,r=!0)}if(!n){for(var a=0,o=Object.entries(this.textRenderers);a<o.length;a++){var s=E(o[a],2),u=s[0],l=s[1];if("canvas"!==u&&l.canRenderFont(e)){n=u;break}}n||(n="canvas")}r&&console.warn(`Falling back to text renderer ${String(n)}`);var c=this.textRenderers[n];return k(c,"resolvedTextRenderer undefined"),c}}class Wn extends Cn{constructor(e,t){super(e,t),S(this,"textRenderer",void 0),S(this,"trState",void 0),S(this,"_textRendererOverride",null),S(this,"onTextLoaded",(()=>{var e=this.contain,t=this.trState.props.width,n=this.trState.props.height,r=this.trState.textW||0,i=this.trState.textH||0;"both"===e?(this.props.width=t,this.props.height=n):"width"===e?(this.props.width=t,this.props.height=i):"none"===e&&(this.props.width=r,this.props.height=i),this.updateLocalTransform(),this.stage.requestRender(),this.emit("loaded",{type:"text",dimensions:{width:this.trState.textW||0,height:this.trState.textH||0}})})),S(this,"onTextFailed",((e,t)=>{this.emit("failed",{type:"text",error:t})})),this._textRendererOverride=t.textRendererOverride;var n=this.resolveTextRendererAndState({x:this.absX,y:this.absY,width:t.width,height:t.height,textAlign:t.textAlign,color:t.color,zIndex:t.zIndex,contain:t.contain,scrollable:t.scrollable,scrollY:t.scrollY,offsetY:t.offsetY,letterSpacing:t.letterSpacing,debug:t.debug,fontFamily:t.fontFamily,fontSize:t.fontSize,fontStretch:t.fontStretch,fontStyle:t.fontStyle,fontWeight:t.fontWeight,text:t.text,lineHeight:t.lineHeight,maxLines:t.maxLines,textBaseline:t.textBaseline,verticalAlign:t.verticalAlign,overflowSuffix:t.overflowSuffix}),r=n.resolvedTextRenderer,i=n.textRendererState;this.textRenderer=r,this.trState=i}get width(){return this.props.width}set width(e){this.props.width=e,this.textRenderer.set.width(this.trState,e),"none"===this.contain&&this.setUpdateType(In.Local)}get height(){return this.props.height}set height(e){this.props.height=e,this.textRenderer.set.height(this.trState,e),"both"!==this.contain&&this.setUpdateType(In.Local)}get color(){return this.trState.props.color}set color(e){this.textRenderer.set.color(this.trState,e)}get text(){return this.trState.props.text}set text(e){this.textRenderer.set.text(this.trState,e)}get textRendererOverride(){return this._textRendererOverride}set textRendererOverride(e){this._textRendererOverride=e,this.textRenderer.destroyState(this.trState);var t=this.resolveTextRendererAndState(this.trState.props),n=t.resolvedTextRenderer,r=t.textRendererState;this.textRenderer=n,this.trState=r}get fontSize(){return this.trState.props.fontSize}set fontSize(e){this.textRenderer.set.fontSize(this.trState,e)}get fontFamily(){return this.trState.props.fontFamily}set fontFamily(e){this.textRenderer.set.fontFamily(this.trState,e)}get fontStretch(){return this.trState.props.fontStretch}set fontStretch(e){this.textRenderer.set.fontStretch(this.trState,e)}get fontStyle(){return this.trState.props.fontStyle}set fontStyle(e){this.textRenderer.set.fontStyle(this.trState,e)}get fontWeight(){return this.trState.props.fontWeight}set fontWeight(e){this.textRenderer.set.fontWeight(this.trState,e)}get textAlign(){return this.trState.props.textAlign}set textAlign(e){this.textRenderer.set.textAlign(this.trState,e)}get contain(){return this.trState.props.contain}set contain(e){this.textRenderer.set.contain(this.trState,e)}get scrollable(){return this.trState.props.scrollable}set scrollable(e){this.textRenderer.set.scrollable(this.trState,e)}get scrollY(){return this.trState.props.scrollY}set scrollY(e){this.textRenderer.set.scrollY(this.trState,e)}get offsetY(){return this.trState.props.offsetY}set offsetY(e){this.textRenderer.set.offsetY(this.trState,e)}get letterSpacing(){return this.trState.props.letterSpacing}set letterSpacing(e){this.textRenderer.set.letterSpacing(this.trState,e)}get lineHeight(){return this.trState.props.lineHeight}set lineHeight(e){this.textRenderer.set.lineHeight&&this.textRenderer.set.lineHeight(this.trState,e)}get maxLines(){return this.trState.props.maxLines}set maxLines(e){this.textRenderer.set.maxLines&&this.textRenderer.set.maxLines(this.trState,e)}get textBaseline(){return this.trState.props.textBaseline}set textBaseline(e){this.textRenderer.set.textBaseline&&this.textRenderer.set.textBaseline(this.trState,e)}get verticalAlign(){return this.trState.props.verticalAlign}set verticalAlign(e){this.textRenderer.set.verticalAlign&&this.textRenderer.set.verticalAlign(this.trState,e)}get overflowSuffix(){return this.trState.props.overflowSuffix}set overflowSuffix(e){this.textRenderer.set.overflowSuffix&&this.textRenderer.set.overflowSuffix(this.trState,e)}get debug(){return this.trState.props.debug}set debug(e){this.textRenderer.set.debug(this.trState,e)}update(e,t){super.update(e,t),k(this.globalTransform),this.textRenderer.set.x(this.trState,this.globalTransform.tx),this.textRenderer.set.y(this.trState,this.globalTransform.ty)}checkRenderProps(){return""!==this.trState.props.text||super.checkRenderProps()}onChangeIsRenderable(e){super.onChangeIsRenderable(e),this.textRenderer.setIsRenderable(this.trState,e)}renderQuads(e){var t;if(k(this.globalTransform),this.parentHasRenderTexture){if(!e.renderToTextureActive)return;if(this.parentRenderTexture!==e.activeRttNode)return}this.parentHasRenderTexture&&null!==(t=this.props.parent)&&void 0!==t&&t.rtt&&(this.globalTransform=Tn.identity(),this.localTransform&&this.globalTransform.multiply(this.localTransform)),k(this.globalTransform),this.textRenderer.renderQuads(this.trState,this.globalTransform,this.clippingRect,this.worldAlpha,this.parentHasRenderTexture,this.framebufferDimensions)}destroy(){super.destroy(),this.textRenderer.destroyState(this.trState)}resolveTextRendererAndState(e){var t=this.stage.resolveTextRenderer(e,this._textRendererOverride),n=t.createState(e);return n.emitter.on("loaded",this.onTextLoaded),n.emitter.on("failed",this.onTextFailed),t.scheduleUpdateState(n),{resolvedTextRenderer:t,textRendererState:n}}}class Xn extends Rn{constructor(e,t,n){super(e,t,n,new Wn(n,{id:Mn(),x:e.x,y:e.y,width:e.width,height:e.height,alpha:e.alpha,autosize:e.autosize,clipping:e.clipping,color:e.color,colorTop:e.colorTop,colorBottom:e.colorBottom,colorLeft:e.colorLeft,colorRight:e.colorRight,colorTl:e.colorTl,colorTr:e.colorTr,colorBl:e.colorBl,colorBr:e.colorBr,zIndex:e.zIndex,zIndexLocked:e.zIndexLocked,scaleX:e.scaleX,scaleY:e.scaleY,mountX:e.mountX,mountY:e.mountY,mount:e.mount,pivot:e.pivot,pivotX:e.pivotX,pivotY:e.pivotY,rotation:e.rotation,text:e.text,fontSize:e.fontSize,fontFamily:e.fontFamily,fontWeight:e.fontWeight,fontStretch:e.fontStretch,fontStyle:e.fontStyle,contain:e.contain,scrollable:e.scrollable,letterSpacing:e.letterSpacing,textAlign:e.textAlign,scrollY:e.scrollY,offsetY:e.offsetY,textRendererOverride:e.textRendererOverride,lineHeight:e.lineHeight,maxLines:e.maxLines,textBaseline:e.textBaseline,verticalAlign:e.verticalAlign,overflowSuffix:e.overflowSuffix,debug:e.debug,parent:null,texture:null,textureOptions:null,shader:null,shaderProps:null,rtt:!1}))}get text(){return this.coreNode.text}set text(e){this.coreNode.text=e}get textRendererOverride(){return this.coreNode.textRendererOverride}set textRendererOverride(e){this.coreNode.textRendererOverride=e}get fontSize(){return this.coreNode.fontSize}set fontSize(e){this.coreNode.fontSize=e}get fontFamily(){return this.coreNode.fontFamily}set fontFamily(e){this.coreNode.fontFamily=e}get fontWeight(){return this.coreNode.fontWeight}set fontWeight(e){this.coreNode.fontWeight=e}get fontStretch(){return this.coreNode.fontStretch}set fontStretch(e){this.coreNode.fontStretch=e}get fontStyle(){return this.coreNode.fontStyle}set fontStyle(e){this.coreNode.fontStyle=e}get textAlign(){return this.coreNode.textAlign}set textAlign(e){this.coreNode.textAlign=e}get contain(){return this.coreNode.contain}set contain(e){this.coreNode.contain=e}get scrollable(){return this.coreNode.scrollable}set scrollable(e){this.coreNode.scrollable=e}get scrollY(){return this.coreNode.scrollY}set scrollY(e){this.coreNode.scrollY=e}get offsetY(){return this.coreNode.offsetY}set offsetY(e){this.coreNode.offsetY=e}get letterSpacing(){return this.coreNode.letterSpacing}set letterSpacing(e){this.coreNode.letterSpacing=e}get lineHeight(){return this.coreNode.lineHeight}set lineHeight(e){e&&(this.coreNode.lineHeight=e)}get maxLines(){return this.coreNode.maxLines}set maxLines(e){e&&(this.coreNode.maxLines=e)}get textBaseline(){return this.coreNode.textBaseline}set textBaseline(e){e&&(this.coreNode.textBaseline=e)}get verticalAlign(){return this.coreNode.verticalAlign}set verticalAlign(e){e&&(this.coreNode.verticalAlign=e)}get overflowSuffix(){return this.coreNode.overflowSuffix}set overflowSuffix(e){e&&(this.coreNode.overflowSuffix=e)}get debug(){return this.coreNode.debug}set debug(e){this.coreNode.debug=e}}class qn{constructor(){S(this,"root",null),S(this,"stage",null),S(this,"rendererMain",null)}init(e,t,n){var r=this;return w(b().mark((function i(){var a;return b().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(r.stage=new Hn({rootId:Mn(),appWidth:t.appWidth,appHeight:t.appHeight,txMemByteThreshold:t.txMemByteThreshold,boundsMargin:t.boundsMargin,deviceLogicalPixelRatio:t.deviceLogicalPixelRatio,devicePhysicalPixelRatio:t.devicePhysicalPixelRatio,clearColor:t.clearColor,canvas:n,fpsUpdateInterval:t.fpsUpdateInterval,enableContextSpy:t.enableContextSpy,numImageWorkers:t.numImageWorkers,renderMode:t.renderMode,debug:{monitorTextureCache:!1}}),r.rendererMain=e,k(r.stage.root),a=new Rn(e.resolveNodeDefaults({}),r.rendererMain,r.stage,r.stage.root),r.root=a,a.once("beforeDestroy",r.onBeforeDestroyNode.bind(r,a)),r.onCreateNode(a),!t.coreExtensionModule){i.next=10;break}return i.next=10,mn(t.coreExtensionModule,r.stage);case 10:r.stage.on("fpsUpdate",((e,t)=>{r.onFpsUpdate(t)})),r.stage.on("frameTick",((e,t)=>{r.onFrameTick(t)})),r.stage.on("idle",(()=>{r.onIdle()}));case 13:case"end":return i.stop()}}),i)})))()}createNode(e){k(this.rendererMain),k(this.stage);var t=new Rn(e,this.rendererMain,this.stage);return t.once("beforeDestroy",this.onBeforeDestroyNode.bind(this,t)),this.onCreateNode(t),t}createTextNode(e){k(this.rendererMain),k(this.stage);var t=new Xn(e,this.rendererMain,this.stage);return t.once("beforeDestroy",this.onBeforeDestroyNode.bind(this,t)),this.onCreateNode(t),t}destroyNode(e){e.destroy()}releaseTexture(e){var t=this.stage;k(t),t.txManager.removeTextureIdFromCache(e)}getRootNode(){return k(this.root),this.root}onCreateNode(e){throw new Error("Method not implemented.")}onBeforeDestroyNode(e){throw new Error("Method not implemented.")}onFpsUpdate(e){throw new Error("Method not implemented.")}onFrameTick(e){throw new Error("Method not implemented.")}onIdle(){throw new Error("Method not implemented.")}}function Yn(e={},t="app"){var n=new qn;return Vn=new bn(e,t,n),Kn=Vn.createShader.bind(Vn),Vn}class $n extends Array{constructor(e){super(),this._parent=e}get selected(){return this[this._parent.selected||0]}get firstChild(){return this[0]}insert(e,t){if(t){var n=this.indexOf(t);this.splice(n,0,e)}else this.push(e);e.parent=this._parent}remove(e){var t=this.indexOf(e);t>=0&&this.splice(t,1)}}var Qn={debug:!1,animationsEnabled:!0,animationSettings:{duration:250,easing:"ease-in-out"},fontSettings:{fontFamily:"Ubuntu",fontSize:100}};function Jn(e,t,...n){false}function Zn(e){return"function"==typeof e}function er(e){return Array.isArray(e)}function tr(e,t={}){if(er(e))e.forEach((e=>{tr(e,t)}));else if(e)for(var n in e)void 0===t[n]&&(t[n]=e[n]);return t}class nr extends Array{constructor(e,t={}){return er(t)?super(...t):!function(e){return"string"==typeof e}(t)?super(...Object.entries(t).filter((([e,t])=>t)).map((([e])=>e))):super(t),this.onChange=e,this}has(e){return this.indexOf(e)>=0}is(e){return this.indexOf(e)>=0}add(e){this.push(e),this.onChange()}toggle(e){this.has(e)?this.remove(e):this.add(e)}remove(e){var t=this.indexOf(e);t>=0&&(this.splice(t,1),this.onChange())}}var rr=Qn.animationSettings,ir=[],ar=!0;function or(e){for(var t=[],n=0,r=Object.entries(e);n<r.length;n++){var i=E(r[n],2),a=i[0],o=i[1];t.push({type:a,props:o})}return Kn("DynamicShader",{effects:t})}function sr(e=""){return{set(t){(function(e){return"number"==typeof e})(t)&&(t={width:t,color:255}),this.effects=A(A({},this.effects||{}),{[`border${e}`]:t}),this[`_border${e}`]=t},get(){return this[`_border${e}`]}}}class ur extends Object{constructor(e){super(),this._animationQueue=[],this._animationRunning=!1,this.name=e,this._renderProps={},this.children=new $n(this)}get effects(){return this._effects}set effects(e){this._effects=e,this.lng&&(this.shader=or(e))}get parent(){return this._parent}set parent(e){var t;(this._parent=e,this.lng)&&(this.lng.parent=null!==(t=null==e?void 0:e.lng)&&void 0!==t?t:null)}get shader(){return this._shader}set shader(e){er(e)?this._shader=Kn(...e):this._shader=e,this._sendToLightning("shader",this._shader)}_sendToLightningAnimatable(e,t){if(this.lng){if(this.transition&&(!0===this.transition||this.transition[e])){var n=!0===this.transition||!0===this.transition[e]?void 0:this.transition[e];return this.animate({[e]:t},n).start()}this.lng[e]=t}else this._renderProps[e]=t}_sendToLightning(e,t){this.lng?this.lng[e]=t:this._renderProps[e]=t}animate(e,t){return k(this.lng,"Node must be rendered before animating"),this.lng.animate(e,t||this.animationSettings)}chain(e,t){return this._animationRunning&&(this._animationQueue=[],this._animationRunning=!1),t?this._animationQueueSettings=t:this._animationQueueSettings||(this._animationQueueSettings=t||this.animationSettings),t=t||this._animationQueueSettings,this._animationQueue.push({props:e,animationSettings:t}),this}start(){var e=this;return w(b().mark((function t(){var n;return b().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=e._animationQueue.shift();case 1:if(!n){t.next=8;break}return e._animationRunning=!0,t.next=5,e.animate(n.props,n.animationSettings).start().waitUntilStopped();case 5:n=e._animationQueue.shift(),t.next=1;break;case 8:e._animationRunning=!1,e._animationQueueSettings=void 0;case 10:case"end":return t.stop()}}),t)})))()}setFocus(){if(this.lng){if(void 0!==this.forwardFocus)if(Zn(this.forwardFocus)){if(!1!==this.forwardFocus.call(this,this))return}else{var e="number"==typeof this.forwardFocus?this.forwardFocus:null;if(null!==e&&e<this.children.length){var t=this.children[e];return void(t instanceof ur&&t.setFocus())}}queueMicrotask((()=>ht(this)))}else this.autofocus=!0}isTextNode(){return"text"===this.name}_layoutOnLoad(){this.lng.on("loaded",((e,t)=>{var n=t.dimensions;this.parent.updateLayout(this,n)}))}getText(){return this.children.map((e=>e.text)).join("")}destroy(){var e;this._queueDelete&&(null===(e=this.lng)||void 0===e||e.destroy())}set onEvents(e){this._events=e}get onEvents(){return this._events||[]}set style(e){for(var t in er(e)?this._style=tr(e):this._style=e,this._style)void 0===this[t]&&(this[t]=this._style[t])}get style(){return this._style}get hasChildren(){return this.children.length>0}getChildById(e){return this.children.find((t=>t.id===e))}searchChildrenById(e){for(var t=0;t<this.children.length;t++){var n=this.children[t];if(n instanceof ur){if(n.id===e)return n;var r=n.searchChildrenById(e);if(r)return r}}}set states(e){this._states=new nr(this._stateChanged.bind(this),e),this.lng&&this._stateChanged()}get states(){return this._states=this._states||new nr(this._stateChanged.bind(this)),this._states}get animationSettings(){return this._animationSettings||rr}set animationSettings(e){this._animationSettings=e}requiresLayout(){return"flex"===this.display||this.onBeforeLayout}updateLayout(e,t){if(this.hasChildren){Jn();var n,r=!1;if(Zn(this.onBeforeLayout)&&(r=this.onBeforeLayout.call(this,this,e,t)),"flex"===this.display){if(function(e){for(var t=[],n=!1,r=0;r<e.children.length;r++){var i=e.children[r];if("TextNode"!==i.name&&!1!==i.flexItem){if("text"===i.name&&""!==i.text&&!i.width&&!i.height)return!1;void 0!==i.flexOrder&&(n=!0),t.push(i)}}n&&t.sort(((e,t)=>(e.flexOrder||0)-(t.flexOrder||0)));var a=t.length,o="row"===(e.flexDirection||"row"),s=o?"width":"height",u=o?"height":"width",l=o?"marginLeft":"marginTop",c=o?"marginRight":"marginBottom",d=o?"x":"y",h=o?"y":"x",f=e[s]||0,p=e[u]||0,g=e.gap||0,m=e.justifyContent||"flexStart",v=e.alignItems,y=0;["center","spaceBetween","spaceEvenly"].includes(m)&&(y=t.reduce(((e,t)=>e+(t[s]||0)),0));var b=p&&v?e=>{"flexStart"===v?e[h]=0:"center"===v?e[h]=(p-(e[u]||0))/2:"flexEnd"===v&&(e[h]=p-(e[u]||0))}:e=>e;if("flexStart"===m){var x=0;if(t.forEach((e=>{e[d]=x+(e[l]||0),x+=(e[s]||0)+g+(e[l]||0)+(e[c]||0),b(e)})),"fixed"!==e.flexBoundary){var w=x-g;if(w!==e[s])return e[s]=w,!0}}else if("flexEnd"===m)for(var T=f,A=a-1;A>=0;A--){var S=t[A];k(S),S[d]=T-(S[s]||0)-(S[c]||0),T-=(S[s]||0)+g+(S[l]||0)+(S[c]||0),b(S)}else if("center"===m){var E=(f-(y+g*(a-1)))/2;t.forEach((e=>{e[d]=E,E+=(e[s]||0)+g,b(e)}))}else if("spaceBetween"===m){var I=(f-y)/(a-1),C=0;t.forEach((e=>{e[d]=C,C+=(e[s]||0)+I,b(e)}))}else if("spaceEvenly"===m){var _=(f-y)/(a+1),M=_;t.forEach((e=>{e[d]=M,M+=(e[s]||0)+_,b(e)}))}return!1}(this)||r)null===(n=this.parent)||void 0===n||n.updateLayout()}else if(r){var i;null===(i=this.parent)||void 0===i||i.updateLayout()}Zn(this.onLayout)&&this.onLayout.call(this,this,e,t)}}_stateChanged(){if(Jn(0,0,this.states),this.forwardStates){var e=this.states.slice();this.children.forEach((t=>t.states=e))}var t=this.states;if(this._undoStyles||this.style&&function(e,t){var n,r=I(t);try{for(r.s();!(n=r.n()).done;)if(n.value in e)return!0}catch(i){r.e(i)}finally{r.f()}return!1}(this.style,t)){this._undoStyles=this._undoStyles||[];var n={};this._undoStyles.forEach((e=>{n[e]=this.style[e]}));var r=t.reduce(((e,t)=>{var n=this.style[t];return n&&(e=A(A({},e),n)),e}),{});this._undoStyles=Object.keys(r),void 0!==r.transition&&(this.transition=r.transition),Object.assign(this,n,r)}}render(){var e=this,t=this.parent;if(t)if(t.lng)if(this.lng)console.warn("Node already rendered: ",this);else{t.requiresLayout()&&-1===ir.indexOf(t)&&(ir.push(t),ar&&(ar=!1,queueMicrotask((()=>{for(ar=!0;ir.length;){ir.pop().updateLayout()}})))),this.states.length&&this._stateChanged();var n=e._renderProps;if(n.x=n.x||0,n.y=n.y||0,t.lng&&(n.parent=t.lng),e._effects&&(this.shader=or(e._effects)),e.isTextNode()){if(Qn.fontSettings)for(var r in Qn.fontSettings)void 0===n[r]&&(n[r]=Qn.fontSettings[r]);n.text=e.getText(),n.contain&&(n.width||(n.width=(t.width||0)-n.x-(n.marginRight||0)),"both"!==n.contain||n.height||n.maxLines?1===n.maxLines&&(n.height=n.height||n.lineHeight||n.fontSize):n.height=(t.height||0)-n.y-(n.marginBottom||0)),Jn(0,0),e.lng=Vn.createTextNode(n),!t.requiresLayout()||n.width&&n.height||e._layoutOnLoad()}else n.texture||(isNaN(n.width)&&(n.width=(t.width||0)-n.x),isNaN(n.height)&&(n.height=(t.height||0)-n.y),n.color||n.src||(n.color=0)),Jn(0,0),e.lng=Vn.createNode(n);n.autosize&&t.requiresLayout()&&e._layoutOnLoad(),e.onFail&&e.lng.on("failed",e.onFail),e.onLoad&&e.lng.on("loaded",e.onLoad),Zn(this.onCreate)&&this.onCreate.call(this,e),e.onEvents.forEach((([t,n])=>{var r;null===(r=e.lng)||void 0===r||r.on(t,((t,r)=>n(e,r)))})),e.lng.div&&(e.lng.div.solid=e),"text"!==e.name&&e.children.forEach((e=>{e.render?e.render():""!==e.text&&console.warn("TextNode outside of <Text>: ",e)})),e.autofocus&&e.setFocus(),this._renderProps={}}else console.warn("Parent not rendered yet: ",this);else console.warn("Parent not set - no node created for: ",this)}}for(var lr=function(){var e=dr[cr];Object.defineProperty(ur.prototype,e,{get(){return this.lng?this.lng[e]:this._renderProps[e]},set(t){this._sendToLightningAnimatable(e,t)}})},cr=0,dr=["alpha","color","colorTop","colorRight","colorLeft","colorBottom","colorTl","colorTr","colorBl","colorBr","height","fontSize","lineHeight","mount","mountX","mountY","pivot","pivotX","pivotY","rotation","scale","width","worldX","worldY","x","y","zIndex","zIndexLocked"];cr<dr.length;cr++)lr();for(var hr=function(){var e=pr[fr];Object.defineProperty(ur.prototype,e,{get(){return this.lng?this.lng[e]:this._renderProps[e]},set(t){this._sendToLightning(e,t)}})},fr=0,pr=["autosize","clipping","contain","fontFamily","fontStretch","fontStyle","fontWeight","letterSpacing","maxLines","offsetY","overflowSuffix","rtt","scrollable","scrollY","src","text","textAlign","textBaseline","textOverflow","texture","verticalAlign","wordWrap"];fr<pr.length;fr++)hr();Object.defineProperties(ur.prototype,{borderRadius:{set(e){this._borderRadius=e,this.effects=A(A({},this.effects||{}),{radius:{radius:e}})},get(){return this._borderRadius}},border:sr(),borderLeft:sr("Left"),borderRight:sr("Right"),borderTop:sr("Top"),borderBottom:sr("Bottom")}),Object.defineProperties(ur.prototype,{linearGradient:{set(e={}){this._linearGradient=e,this.effects=A(A({},this.effects||{}),{linearGradient:e})},get(){return this._linearGradient}}});var gr=e=>{return t=Ir("text"),kr(t,e,!1),t;var t},mr=e=>{return t=Ir("node"),kr(t,e,!1),t;var t};function vr({createElement:e,createTextNode:t,isTextNode:n,replaceText:r,insertNode:i,removeNode:a,setProperty:o,getParentNode:s,getFirstChild:u,getNextSibling:l}){function c(e,t,n,r){if(void 0===n||r||(r=[]),"function"!=typeof t)return d(e,t,r,n);Ie((r=>d(e,t(),r,n)),r)}function d(e,a,o,s,l){for(;"function"==typeof o;)o=o();if(a===o)return o;var c=typeof a,v=void 0!==s;if("string"===c||"number"===c)if("number"===c&&(a=a.toString()),v){var y=o[0];y&&n(y)?r(y,a):y=t(a),o=p(e,o,s,y)}else""!==o&&"string"==typeof o?r(u(e),o=a):(p(e,o,s,t(a)),o=a);else if(null==a||"boolean"===c)o=p(e,o,s);else{if("function"===c)return Ie((()=>{for(var t=a();"function"==typeof t;)t=t();o=d(e,t,o,s)})),()=>o;if(Array.isArray(a)){var b=[];if(h(b,a,l))return Ie((()=>o=d(e,b,o,s,!0))),()=>o;if(0===b.length){var x=p(e,o,s);if(v)return o=x}else Array.isArray(o)?0===o.length?g(e,b,s):f(e,o,b):null==o||""===o?g(e,b):f(e,v&&o||[u(e)],b);o=b}else{if(Array.isArray(o)){if(v)return o=p(e,o,s,a);p(e,o,null,a)}else null!=o&&""!==o&&u(e)?m(e,a,u(e)):i(e,a);o=a}}return o}function h(e,n,r){for(var i=!1,a=0,o=n.length;a<o;a++){var s=n[a],u=void 0;if(null==s||!0===s||!1===s);else if(Array.isArray(s))i=h(e,s)||i;else if("string"==(u=typeof s)||"number"===u)e.push(t(s));else if("function"===u)if(r){for(;"function"==typeof s;)s=s();i=h(e,Array.isArray(s)?s:[s])||i}else e.push(s),i=!0;else e.push(s)}return i}function f(e,t,n){for(var r=n.length,o=t.length,s=r,u=0,c=0,d=l(t[o-1]),h=null;u<o||c<s;)if(t[u]!==n[c]){for(;t[o-1]===n[s-1];)o--,s--;if(o===u)for(var f=s<r?c?l(n[c-1]):n[s-c]:d;c<s;)i(e,n[c++],f);else if(s===c)for(;u<o;)h&&h.has(t[u])||a(e,t[u]),u++;else if(t[u]===n[s-1]&&n[c]===t[o-1]){var p=l(t[--o]);i(e,n[c++],l(t[u++])),i(e,n[--s],p),t[o]=n[s]}else{if(!h){h=new Map;for(var g=c;g<s;)h.set(n[g],g++)}var v=h.get(t[u]);if(null!=v)if(c<v&&v<s){for(var y=u,b=1,x=void 0;++y<o&&y<s&&null!=(x=h.get(t[y]))&&x===v+b;)b++;if(b>v-c)for(var w=t[u];c<v;)i(e,n[c++],w);else m(e,n[c++],t[u++])}else u++;else a(e,t[u++])}}else u++,c++}function p(e,n,r,o){if(void 0===r){for(var l;l=u(e);)a(e,l);return o&&i(e,o),""}var c=o||t("");if(n.length)for(var d=!1,h=n.length-1;h>=0;h--){var f=n[h];if(c!==f){var p=s(f)===e;d||h?p&&a(e,f):p?m(e,c,f):i(e,c,r)}else d=!0}else i(e,c,r);return[c]}function g(e,t,n){for(var r=0,a=t.length;r<a;r++)i(e,t[r],n)}function m(e,t,n){i(e,t,n),a(e,n)}function v(e,t,n={},r){return t||(t={}),r||Ie((()=>n.children=d(e,t.children,n.children))),Ie((()=>t.ref&&t.ref(e))),Ie((()=>{for(var r in t)if("children"!==r&&"ref"!==r){var i=t[r];i!==n[r]&&(o(e,r,i,n[r]),n[r]=i)}})),n}return{render(e,t){var n;return Se((r=>{n=r,c(t,e())})),n},insert:c,spread(e,t,n){"function"==typeof t?Ie((r=>v(e,t(),r,n))):v(e,t,void 0,n)},createElement:e,createTextNode:t,insertNode:i,setProp:(e,t,n,r)=>(o(e,t,n,r),n),mergeProps:ot,effect:Ie,memo:Ce,createComponent:tt,use:(e,t,n)=>_e((()=>e(t,n)))}}var yr,br={createElement:e=>new ur(e),createTextNode:e=>({name:"TextNode",text:e,parent:void 0}),replaceText(e,t){Jn(0,0),e.text=t;var n=e.parent;k(n),n.text=n.getText()},setProperty(e,t,n=!0){e[t]=n},insertNode(e,t,n){Jn(0,0),e.children.insert(t,n),t._queueDelete=!1,t instanceof ur?e.lng&&t.render():e.isTextNode()&&(e.text=e.getText())},isTextNode:e=>e.isTextNode(),removeNode(e,t){Jn(0,0),e.children.remove(t),t._queueDelete=!0,t instanceof ur&&queueMicrotask((()=>t.destroy()))},getParentNode:e=>e.parent,getFirstChild:e=>e.children[0],getNextSibling(e){var t=e.parent.children||[],n=t.indexOf(e)+1;if(n<t.length)return t[n]}},xr=function(e){var t=vr(e);return t.mergeProps=ot,t}(br);function wr(e,t){return Tr.apply(this,arguments)}function Tr(){return(Tr=w(b().mark((function e(t,n){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return yr=Yn(Qn.rendererOptions,"app"),e.next=3,yr.init();case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Ar=function(){var e=w(b().mark((function e(t,n){var r,i;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=br.createElement("App"),e.next=3,wr();case 3:return r.lng=yr.root,i=xr.render(t,r),e.abrupt("return",{dispose:i,rootNode:r,renderer:yr});case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Sr=(xr.effect,xr.memo),Er=xr.createComponent,Ir=xr.createElement,kr=(xr.createTextNode,xr.insertNode,xr.insert,xr.spread),Cr=(xr.setProp,xr.mergeProps);xr.use;function _r(e=""){return function(e){return Number.isInteger(e)}(e)?e:"string"==typeof e?e.startsWith("#")?Number(e.replace("#","0x")+(7===e.length?"ff":"")):e.startsWith("0x")?Number(e):Number("0x"+(6===e.length?e+"ff":e)):0}var Mr="_$DX_DELEGATE";function Rr(e){var t=`$$${e.type}`,n=e.composedPath&&e.composedPath()[0]||e.target;for(e.target!==n&&Object.defineProperty(e,"target",{configurable:!0,value:n}),Object.defineProperty(e,"currentTarget",{configurable:!0,get:()=>n||document});n;){var r=n[t];if(r&&!n.disabled){var i=n[`${t}Data`];if(void 0!==i?r.call(n,i,e):r.call(n,e),e.cancelBubble)return}n=n._$host||n.parentNode||n.host}}var Nr;function Lr(){var e=new Set;var t=!1;return{subscribe:function(t){return e.add(t),()=>e.delete(t)},confirm:function(n,r){if(t)return!(t=!1);var i,a={to:n,options:r,defaultPrevented:!1,preventDefault:()=>a.defaultPrevented=!0},o=I(e);try{var s=function(){var e=i.value;e.listener(A(A({},a),{},{from:e.location,retry:i=>{i&&(t=!0),e.navigate(n,A(A({},r),{},{resolve:!1}))}}))};for(o.s();!(i=o.n()).done;)s()}catch(u){o.e(u)}finally{o.f()}return!a.defaultPrevented}}}function Dr(){window.history.state&&null!=window.history.state._depth||window.history.replaceState(A(A({},window.history.state),{},{_depth:window.history.length-1}),""),Nr=window.history.state._depth}Dr();var Pr=/^(?:[a-z0-9]+:)?\/\//i,Or=/^\/+|(\/)\/+$/g,Ur="http://sr";function Br(e,t=!1){var n=e.replace(Or,"$1");return n?t||/^[?#]/.test(n)?n:"/"+n:""}function jr(e,t,n){if(!Pr.test(t)){var r=Br(e),i=n&&Br(n),a="";return((a=!i||t.startsWith("/")?r:0!==i.toLowerCase().indexOf(r.toLowerCase())?r+i:i)||"/")+Br(t,!a)}}function Fr(e){var t={};return e.searchParams.forEach(((e,n)=>{t[n]=e})),t}function zr(e,t,n){var r=E(e.split("/*",2),2),i=r[0],a=r[1],o=i.split("/").filter(Boolean),s=o.length;return e=>{var r=e.split("/").filter(Boolean),i=r.length-s;if(i<0||i>0&&void 0===a&&!t)return null;for(var u={path:s?"":"/",params:{}},l=e=>void 0===n?void 0:n[e],c=0;c<s;c++){var d=o[c],h=r[c],f=":"===d[0],p=f?d.slice(1):d;if(f&&Gr(h,l(p)))u.params[p]=h;else if(f||!Gr(h,d))return null;u.path+=`/${h}`}if(a){var g=i?r.slice(-i).join("/"):"";if(!Gr(g,l(a)))return null;u.params[a]=g}return u}}function Gr(e,t){var n=t=>0===t.localeCompare(e,void 0,{sensitivity:"base"});return void 0===t||("string"==typeof t?n(t):"function"==typeof t?t(e):Array.isArray(t)?t.some(n):t instanceof RegExp&&t.test(e))}function Vr(e){var t=new Map,n=Le();return new Proxy({},{get:(r,i)=>(t.has(i)||De(n,(()=>t.set(i,Ce((()=>e()[i]))))),t.get(i)()),getOwnPropertyDescriptor:()=>({enumerable:!0,configurable:!0}),ownKeys:()=>Reflect.ownKeys(e())})}function Kr(e){var t=/(\/?\:[^\/]+)\?/.exec(e);if(!t)return[e];for(var n=e.slice(0,t.index),r=e.slice(t.index+t[0].length),i=[n,n+=t[1]];t=/^(\/\:[^\/]+)\?/.exec(r);)i.push(n+=t[1]),r=r.slice(t[0].length);return Kr(r).reduce(((e,t)=>[...e,...i.map((e=>e+t))]),[])}var Hr,Wr=Oe(),Xr=Oe(),qr=()=>function(e,t){if(null==e)throw new Error(t);return e}(Ue(Wr),"<A> and 'use' router primitives can be only used inside a Route."),Yr=()=>qr().navigatorFactory(),$r=(e,t)=>{var n=qr().location,r=Ce((()=>Kr(e()).map((e=>zr(e,void 0,t)))));return Ce((()=>{var e,t=I(r());try{for(t.s();!(e=t.n()).done;){var i=(0,e.value)(n.pathname);if(i)return i}}catch(a){t.e(a)}finally{t.f()}}))},Qr=()=>qr().params;function Jr(e,t=""){var n=e.component,r=e.load,i=e.children,a=e.info,o=!i||Array.isArray(i)&&!i.length,s={key:e,component:n,load:r,info:a};return ei(e.path).reduce(((n,r)=>{var i,a,u=I(Kr(r));try{for(u.s();!(i=u.n()).done;){var l=i.value,c=(a=l,Br(t).replace(/\/*(\*.*)?$/g,"")+Br(a)),d=o?c:c.split("/*",1)[0];d=d.split("/").map((e=>e.startsWith(":")||e.startsWith("*")?e:encodeURIComponent(e))).join("/"),n.push(A(A({},s),{},{originalPath:r,pattern:d,matcher:zr(d,!o,e.matchFilters)}))}}catch(h){u.e(h)}finally{u.f()}return n}),[])}function Zr(e,t=0){return{routes:e,score:1e4*(n=e[e.length-1],r=E(n.pattern.split("/*",2),2),i=r[0],a=r[1],o=i.split("/").filter(Boolean),o.reduce(((e,t)=>e+(t.startsWith(":")?2:3)),o.length-(void 0===a?0:1)))-t,matcher(t){for(var n=[],r=e.length-1;r>=0;r--){var i=e[r],a=i.matcher(t);if(!a)return null;n.unshift(A(A({},a),{},{route:i}))}return n}};var n,r,i,a,o}function ei(e){return Array.isArray(e)?e:[e]}function ti(e,t="",n=[],r=[]){for(var i=ei(e),a=0,o=i.length;a<o;a++){var s=i[a];if(s&&"object"==typeof s){s.hasOwnProperty("path")||(s.path="");var u,l=I(Jr(s,t));try{for(l.s();!(u=l.n()).done;){var c=u.value;n.push(c);var d=Array.isArray(s.children)&&0===s.children.length;if(s.children&&!d)ti(s.children,c.pattern,n,r);else{var h=Zr([...n],r.length);r.push(h)}n.pop()}}catch(f){l.e(f)}finally{l.f()}}}return n.length?r:r.sort(((e,t)=>t.score-e.score))}function ni(e,t){for(var n=0,r=e.length;n<r;n++){var i=e[n].matcher(t);if(i)return i}return[]}function ri(e,t,n,r={}){var i=E(e.signal,2),a=i[0],o=i[1],s=e.utils,u=void 0===s?{}:s,l=u.parsePath||(e=>e),c=u.renderPath||(e=>e),d=u.beforeLeave||Lr(),h=jr("",r.base||"");if(void 0===h)throw new Error(`${h} is not a valid base path`);h&&!a().value&&o({value:h,replace:!0,scroll:!1});var f=E(Ee(!1),2),p=f[0],g=f[1],m=function(){var e=w(b().mark((function e(t){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g(!0),e.prev=1,e.next=4,Pe(t);case 4:return e.prev=4,g(!1),e.finish(4);case 7:case"end":return e.stop()}}),e,null,[[1,,4,7]])})));return function(t){return e.apply(this,arguments)}}(),v=E(Ee(a().value),2),y=v[0],x=v[1],T=E(Ee(a().state),2),S=T[0],I=T[1],k=function(e,t){var n=new URL(Ur),r=Ce((t=>{var r=e();try{return new URL(r,n)}catch(i){return console.error(`Invalid path ${r}`),t}}),n,{equals:(e,t)=>e.href===t.href}),i=Ce((()=>r().pathname)),a=Ce((()=>r().search),!0),o=Ce((()=>r().hash));return{get pathname(){return i()},get search(){return a()},get hash(){return o()},get state(){return t()},get key(){return""},query:Vr(Me(a,(()=>Fr(r()))))}}(y,S),C=[],_=Ee([]),M=Ce((()=>"function"==typeof r.transformUrl?ni(t(),r.transformUrl(k.pathname)):ni(t(),k.pathname))),R=Vr((()=>{for(var e=M(),t={},n=0;n<e.length;n++)Object.assign(t,e[n].params);return t})),N={pattern:h,path:()=>h,outlet:()=>null,resolvePath:e=>jr(h,e)};return Ie((()=>{var e=a(),t=e.value,n=e.state;_e((()=>{m((()=>{Hr="native",t!==y()&&x(t),I(n),_[1]([])})).then((()=>{Hr=void 0}))}))})),{base:N,location:k,params:R,isRouting:p,renderPath:c,parsePath:l,navigatorFactory:function(e){return e=e||Ue(Xr)||N,(t,n)=>function(e,t,n){_e((()=>{if("number"!=typeof t){var r=A({replace:!1,resolve:!0,scroll:!0},n),i=r.replace,a=r.resolve,s=r.scroll,l=r.state,c=a?e.resolvePath(t):jr("",t);if(void 0===c)throw new Error(`Path '${t}' is not a routable path`);if(C.length>=100)throw new Error("Too many redirects");var h=y();if((c!==h||l!==S())&&d.confirm(c,n)){var f=C.push({value:h,replace:i,scroll:s,state:S()});m((()=>{Hr="navigate",x(c),I(l),_[1]([])})).then((()=>{var e,t;C.length===f&&(Hr=void 0,e={value:c,state:l},(t=C[0])&&(e.value===t.value&&e.state===t.state||o(A(A({},e),{},{replace:t.replace,scroll:t.scroll})),C.length=0))}))}}else t&&(u.go?u.go(t):console.warn("Router integration does not support relative routing"))}))}(e,t,n)},matches:M,beforeLeave:d,preloadRoute:function(e,r){var i=ni(t(),e.pathname),a=Hr;Hr="preload";var o=function(){var t=i[s],a=t.route,o=t.params;a.component&&a.component.preload&&a.component.preload();var u=a.load;r&&u&&De(n(),(()=>u({params:o,location:{pathname:e.pathname,search:e.search,hash:e.hash,query:Fr(e),state:null,key:""},intent:"preload"})))};for(var s in i)o();Hr=a},singleFlight:void 0===r.singleFlight||r.singleFlight,submissions:_}}var ii=e=>t=>{var n,r=t.base,i=Be((()=>t.children)),a=Ce((()=>ti(i(),t.base||""))),o=ri(e,a,(()=>n),{base:r,singleFlight:t.singleFlight,transformUrl:t.transformUrl});return e.create&&e.create(o),Er(Wr.Provider,{value:o,get children(){return Er(ai,{routerState:o,get root(){return t.root},get load(){return t.rootLoad},get children(){return[Sr((()=>(n=Le())&&null)),Er(oi,{routerState:o,get branches(){return a()}})]}})}})};function ai(e){var t=e.routerState.location,n=e.routerState.params,r=Ce((()=>e.load&&_e((()=>{e.load({params:n,location:t,intent:Hr||"initial"})}))));return Er(lt,{get when(){return e.root},keyed:!0,get fallback(){return e.children},children:i=>Er(i,{params:n,location:t,get data(){return r()},get children(){return e.children}})})}function oi(e){var t,n=[],r=Ce(Me(e.routerState.matches,((i,a,o)=>{for(var s=a&&i.length===a.length,u=[],l=function(t){var l=a&&a[t],c=i[t];o&&l&&c.route.key===l.route.key?u[t]=o[t]:(s=!1,n[t]&&n[t](),Se((i=>{n[t]=i,u[t]=function(e,t,n,r){var i=e.base,a=e.location,o=e.params,s=r().route,u=s.pattern,l=s.component,c=s.load,d=Ce((()=>r().path));l&&l.preload&&l.preload();var h=c?c({params:o,location:a,intent:Hr||"initial"}):void 0;return{parent:t,pattern:u,path:d,outlet:()=>l?tt(l,{params:o,location:a,data:h,get children(){return n()}}):n(),resolvePath:e=>jr(i.path(),e,d())}}(e.routerState,u[t-1]||e.routerState.base,si((()=>r()[t+1])),(()=>e.routerState.matches()[t]))})))},c=0,d=i.length;c<d;c++)l(c);return n.splice(i.length).forEach((e=>e())),o&&s?o:(t=u[0],u)})));return si((()=>r()&&t))()}var si=e=>()=>Er(lt,{get when(){return e()},keyed:!0,children:e=>Er(Xr.Provider,{value:e,get children(){return e.outlet()}})}),ui=e=>{var t=Be((()=>e.children));return ot(e,{get children(){return t()}})};function li(e,t){var n=function(e){if("#"===e)return null;try{return document.querySelector(e)}catch(t){return null}}(`#${e}`);n?n.scrollIntoView():t&&window.scrollTo(0,0)}var ci=new Map;function di(e=!0,t=!1,n="/_server",r){return r=>{var i=r.base.path(),a=r.navigatorFactory(r.base),o={};function s(e){if(!(e.defaultPrevented||0!==e.button||e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)){var n=e.composedPath().find((e=>e instanceof Node&&"A"===e.nodeName.toUpperCase()));if(n&&(!t||n.hasAttribute("link"))){var r="http://www.w3.org/2000/svg"===n.namespaceURI,a=r?n.href.baseVal:n.href;if(!(r?n.target.baseVal:n.target)&&(a||n.hasAttribute("state"))){var o=(n.getAttribute("rel")||"").split(/\s+/);if(!(n.hasAttribute("download")||o&&o.includes("external"))){var s=r?new URL(a,document.baseURI):new URL(a);if(!(s.origin!==window.location.origin||i&&s.pathname&&!s.pathname.toLowerCase().startsWith(i.toLowerCase())))return[n,s]}}}}}function u(e){var t=s(e);if(t){var n=E(t,2),i=n[0],o=n[1],u=r.parsePath(o.pathname+o.search+o.hash),l=i.getAttribute("state");e.preventDefault(),a(u,{resolve:!1,replace:i.hasAttribute("replace"),scroll:!i.hasAttribute("noscroll"),state:l&&JSON.parse(l)})}}function l(e){var t=s(e);if(t){var n=E(t,2),i=n[0],a=n[1];o[a.pathname]||r.preloadRoute(a,"false"!==i.getAttribute("preload"))}}function c(e){var t=s(e);if(t){var n=E(t,2),i=n[0],a=n[1];o[a.pathname]||(o[a.pathname]=setTimeout((()=>{r.preloadRoute(a,"false"!==i.getAttribute("preload")),delete o[a.pathname]}),200))}}function d(e){var t=s(e);if(t){var n=E(t,2)[1];o[n.pathname]&&(clearTimeout(o[n.pathname]),delete o[n.pathname])}}function h(e){if(!e.defaultPrevented){var t=e.submitter&&e.submitter.hasAttribute("formaction")?e.submitter.getAttribute("formaction"):e.target.getAttribute("action");if(t){if(!t.startsWith("https://action/")){var i=new URL(t,Ur);if(!(t=r.parsePath(i.pathname+i.search)).startsWith(n))return}if("POST"!==e.target.method.toUpperCase())throw new Error("Only POST forms are supported for Actions");var a=ci.get(t);if(a){e.preventDefault();var o=new FormData(e.target);e.submitter&&e.submitter.name&&o.append(e.submitter.name,e.submitter.value),a.call({r:r,f:e.target},o)}}}}!function(e,t=window.document){for(var n=t[Mr]||(t[Mr]=new Set),r=0,i=e.length;r<i;r++){var a=e[r];n.has(a)||(n.add(a),t.addEventListener(a,Rr))}}(["click","submit"]),document.addEventListener("click",u),e&&(document.addEventListener("mouseover",c),document.addEventListener("mouseout",d),document.addEventListener("focusin",l),document.addEventListener("touchstart",l)),document.addEventListener("submit",h),Ne((()=>{document.removeEventListener("click",u),e&&(document.removeEventListener("mouseover",c),document.removeEventListener("mouseout",d),document.removeEventListener("focusin",l),document.removeEventListener("touchstart",l)),document.removeEventListener("submit",h)}))}}function hi(e){var t=e.replace(/^.*?#/,"");if(!t.startsWith("/")){var n=E(window.location.hash.split("#",2),2)[1];return`${void 0===n?"/":n}#${t}`}return t}function fi(e){var t=()=>window.location.hash.slice(1),n=Lr();return function(e){var t=!1,n=e=>"string"==typeof e?{value:e}:e,r=function([e,t],n,r){return[e,r?e=>t(r(e)):t]}(Ee(n(e.get()),{equals:(e,t)=>e.value===t.value&&e.state===t.state}),0,(n=>(!t&&e.set(n),n)));return e.init&&Ne(e.init(((i=e.get())=>{t=!0,r[1](n(i)),t=!1}))),ii({signal:r,create:e.create,utils:e.utils})}({get:t,set({value:e,replace:t,scroll:n,state:r}){t?window.history.replaceState(function(e){return A(A({},e),{},{_depth:window.history.state&&window.history.state._depth})}(r),"","#"+e):window.location.hash=e;var i=e.indexOf("#");li(i>=0?e.slice(i+1):"",n),Dr()},init:e=>{return r=window,i="hashchange",a=function(e,t){var n=!1;return()=>{var r=Nr;Dr();var i=null==r?null:Nr-r;n?n=!1:i&&t(i)?(n=!0,window.history.go(-i)):e()}}(e,(e=>!n.confirm(e&&e<0?e:t()))),r.addEventListener(i,a),()=>r.removeEventListener(i,a);var r,i,a},create:di(e.preload,e.explicitLinks,e.actionBase),utils:{go:e=>window.history.go(e),renderPath:e=>`#${e}`,parsePath:hi,beforeLeave:n}})(e)}var pi=Ne;function gi(e,t=Le()){var n,r,i=0;return()=>(i++,Ne((()=>{i--,queueMicrotask((()=>{!i&&r&&(r(),r=n=void 0)}))})),r||Se((t=>n=e(r=t)),t),n)}var mi=gi((()=>{var e,t,n,r,i=E(Ee(null),2),a=i[0],o=i[1];return e=window,t="keydown",n=e=>{o(e),setTimeout((()=>o(null)))},e.addEventListener(t,n,r),pi(e.removeEventListener.bind(e,t,n,r)),a}));function vi(e){return"function"==typeof e}var yi,bi={ArrowLeft:"Left",ArrowRight:"Right",ArrowUp:"Up",ArrowDown:"Down",Enter:"Enter",l:"Last"," ":"Space",Backspace:"Back",Escape:"Escape"},xi=E(Ee([]),2),wi=xi[0],Ti=xi[1],Ai=e=>{var t=mi();if(e)for(var n=function(){var e=E(i[r],2),t=e[0],n=e[1];!function(e){return Array.isArray(e)}(n)?bi[n]=t:n.forEach((e=>{bi[e]=t}))},r=0,i=Object.entries(e);r<i.length;r++)n();return ke(Me(dt,((e,t,n=[])=>{for(var r=e,i=[];r;)r.states.has("focus")||(r.states.add("focus"),vi(r.onFocus)&&r.onFocus.call(r,e,t)),i.push(r),r=r.parent;return n.forEach((n=>{i.includes(n)||(n.states.remove("focus"),vi(n.onBlur)&&n.onBlur.call(n,e,t))})),Ti(i),i}),{defer:!0})),ke((()=>{var e=t();if(e){var n=bi[e.key]||bi[e.keyCode];_e((()=>{var t,r=void 0,i=I(wi());try{for(i.s();!(t=i.n()).done;){var a=t.value;if(r=r||a,n){var o=a[`on${n}`];if(vi(o)&&!0===o.call(a,e,a,r))break}else console.log(`Unhandled key event: ${e.key||e.keyCode}`);if(vi(a.onKeyPress)&&!0===a.onKeyPress.call(a,e,n,a,r))break}}catch(s){i.e(s)}finally{i.f()}return!1}))}})),wi};function Si(e){return new Promise((t=>{setTimeout(t,e)}))}function Ei(e,t,n="en-US"){var r=window.speechSynthesis;return new Promise(((i,a)=>{var o=new SpeechSynthesisUtterance(e);o.lang=n,o.onend=()=>{i()},o.onerror=e=>{a(e)},t.push(o),r.speak(o)}))}function Ii(e,t,n=!0){var r=window.speechSynthesis,i=function(e=[]){var t,n=[];for(t=0;t<e.length;t++){var r=e[t];if("string"!=typeof r||r.includes("PAUSE-"))break;n.push(e[t])}return[n.join(",\b ")].concat(e.slice(t))}(Array.isArray(e)?e:[e]),a=[],o=[],s=!0;return{series:w(b().mark((function e(){var n,r,u,l,c,d;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0;case 1:if(!s||!i.length){e.next=62;break}return e.next=4,Promise.resolve(i.shift());case 4:if(n=e.sent,s){e.next=9;break}return e.abrupt("break",62);case 9:if("string"!=typeof n||!n.includes("PAUSE-")){e.next=16;break}return r=1e3*Number(n.split("PAUSE-")[1]),isNaN(r)&&(r=0),e.next=14,Si(r);case 14:e.next=60;break;case 16:if("string"!=typeof n||!n.length){e.next=48;break}l=u=3;case 19:if(!(s&&l>0)){e.next=46;break}return e.prev=20,e.next=23,Ei(n,o,t);case 23:l=0,e.next=44;break;case 26:if(e.prev=26,e.t0=e.catch(20),!(e.t0 instanceof SpeechSynthesisErrorEvent)){e.next=43;break}if("network"!==e.t0.error){e.next=36;break}return l--,console.warn(`Speech synthesis network error. Retries left: ${l}`),e.next=34,Si(500*(u-l));case 34:e.next=41;break;case 36:if("canceled"!==e.t0.error&&"interrupted"!==e.t0.error){e.next=40;break}l=0,e.next=41;break;case 40:throw new Error(`SpeechSynthesisErrorEvent: ${e.t0.error}`);case 41:e.next=44;break;case 43:throw e.t0;case 44:e.next=19;break;case 46:e.next=60;break;case 48:if("function"!=typeof n){e.next=55;break}return c=Ii(n(),t,!1),a.push(c),e.next=53,c.series;case 53:e.next=60;break;case 55:if(!Array.isArray(n)){e.next=60;break}return d=Ii(n,t,!1),a.push(d),e.next=60,d.series;case 60:e.next=1;break;case 62:return e.prev=62,s=!1,e.finish(62);case 65:case"end":return e.stop()}}),e,null,[[0,,62,65],[20,26]])})))(),get active(){return s},append:e=>{i.push(e)},cancel:()=>{s&&(n&&r.cancel(),a.forEach((e=>{e.cancel()})),s=!1)}}}function ki(e,t="en-US"){return yi&&yi.cancel(),yi=Ii(e,t)}var Ci,_i,Mi=[],Ri=!1;function Ni(e,t){var n,r=((e,t)=>{var n,r=()=>clearTimeout(n);return Le()&&Ne(r),Object.assign(((...i)=>{void 0!==n&&r(),n=setTimeout((()=>e(...i)),t)}),{clear:r})})(e,t),i=e=>{n=e,r(e)};return i.flush=()=>{r.clear(),e(n)},i.clear=r.clear,i}function Li(e){return e.id||e.name}function Di(e=[]){if(Pi.onFocusChange&&Pi.enabled){var t=e.every((e=>!e.loading)),n=e.filter((e=>!Mi.includes(e)));if(Ci(),t||!Pi.onFocusChange){Mi=e.slice(0);var r=[],i=n.reduce(((e,t)=>(t.announce?(e.push([Li(t),"Announce",t.announce]),r.push(t.announce)):t.title?(e.push([Li(t),"Title",t.title]),r.push(t.title)):e.push([Li(t),"No Announce",""]),e)),[]);return n.reverse().reduce(((e,t)=>(t.announceContext?(e.push([Li(t),"Context",t.announceContext]),r.push(t.announceContext)):e.push([Li(t),"No Context",""]),e)),i),Pi.debug&&console.table(i),r.length?Pi.speak(r.reduce(((e,t)=>e.concat(t)),[])):void 0}Pi.onFocusChange([])}}var Pi={debug:!1,enabled:!0,cancel:function(){_i&&_i.cancel()},clearPrevFocus:function(e=0){Mi=Mi.slice(0,e),Ci()},speak:function(e,{append:t=!1,notification:n=!1}={}){var r;Pi.onFocusChange&&Pi.enabled&&(Pi.onFocusChange.flush(),t&&_i&&_i.active?_i.append(e):(Pi.cancel(),function(e){if(!Ri)_i=ki(e)}(e)),n&&(Ri=!0,null===(r=_i)||void 0===r||r.series.finally((()=>{Ri=!1,Pi.refresh()})).catch(console.error)));return _i},refresh:function(e=0){Pi.clearPrevFocus(e),Pi.onFocusChange&&Pi.onFocusChange(_e((()=>wi())))},setupTimers:function({focusDebounce:e=400,focusChangeTimeout:t=3e5}={}){Pi.onFocusChange=Ni(Di,e),Ci=Ni((()=>{Mi=[]}),t)}},Oi={white:_r("#ffffff"),black:_r("#000000"),background:_r("#253C3C"),teal:_r("#008080"),posterUnfocused:_r("#767676"),buttonUnfocused:_r("#55C9C9"),butonFocused:_r("#FFEBCD")};function Ui(){return Er(mr,{width:1920,height:1080,zIndex:-5,get children(){return Er(mr,{get color(){return Oi.background},width:1920,height:1080})}})}var Bi,ji,Fi,zi,Gi,Vi,Ki,Hi,Wi,Xi,qi,Yi,$i,Qi,Ji,Zi,ea,ta,na,ra={width:1920,height:1080},ia=e=>{Ai({Announcer:["a"],Menu:["m"],Escape:["Escape",27],Backspace:["Backspace",8],Left:["ArrowLeft",37],Right:["ArrowRight",39],Up:["ArrowUp",38],Down:["ArrowDown",40],Enter:["Enter",13]});var t=Yr(),n=(Pi.setupTimers(),ke(Me(wi,Pi.onFocusChange,{defer:!0})),Pi);return n.debug=!1,n.enabled=!1,Er(mr,{ref(e){var t=window.APP;"function"==typeof t?t(e):window.APP=e},get style(){return ra},onAnnouncer:()=>n.enabled=!n.enabled,onLast:()=>history.back(),onMenu:()=>t("/browse/all"),onBackspace:()=>t("/browse/all"),get children(){return[Er(Ui,{}),Sr((()=>e.children))]}})},aa={name:"Base Lightning TV",alpha:{primary:1,secondary:.7,tertiary:.1,inactive:.5,full:1,none:0,alpha1:.1,alpha2:.3,alpha3:.5,alpha4:.7,alpha5:.9,alpha6:.95},animation:{duration:{none:0,xfast:100,fast:250,normal:500,slow:750,xslow:900},delay:{none:0,xfast:10,fast:25,normal:50,slow:75,xslow:90},expressive:{timingFunction:"cubic-bezier(0, 0, 1, 1)",delay:0,duration:.25},expressiveEntrance:{timingFunction:"cubic-bezier(0, 0, 1, 1)",delay:0,duration:.25},expressiveExit:{timingFunction:"cubic-bezier(0, 0, 1, 1)",delay:0,duration:.25},standard:{timingFunction:"cubic-bezier(0, 0, 1, 1)",delay:0,duration:.25},standardEntrance:{timingFunction:"cubic-bezier(0, 0, 1, 1)",delay:0,duration:.25},standardExit:{timingFunction:"cubic-bezier(0, 0, 1, 1)",delay:0,duration:.25},utility:{timingFunction:"cubic-bezier(0, 0, 1, 1)",delay:0,duration:.25},utilityEntrance:{timingFunction:"cubic-bezier(0, 0, 1, 1)",delay:0,duration:.25},utilityExit:{timingFunction:"cubic-bezier(0, 0, 1, 1)",delay:0,duration:.25}},asset:{arrowLeft:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAGKADAAQAAAABAAAAGAAAAADiNXWtAAAAi0lEQVRIDWNgGAWjIfD//38JID5Fk5AAGqwKxPeA+D/VLQCaaQLEr0CGgwBVLQCa5wbEn0EGwwDVLAAaGA3Ev2AGw2iqWAA0rBiI/8EMRaYptgBoWDeygehsci1gIlcjWfqArqZdEMFcBLSEdpGMZAntkimSJbTLaEiW0K6oQLKEdoUdzJJRemiHAAD4n+yzPWCs7QAAAABJRU5ErkJggg==",arrowRight:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAGKADAAQAAAABAAAAGAAAAADiNXWtAAAAg0lEQVRIDWNgGAWjIYArBP7//38KiCVwyVMsDjQcBO4BsSrFhmEzAGw8hHgFpEywqaFIDMkCEPMzELtRZCC6ZjQLQNxfQByNro5sPhYLQEL/gLiYbEORNeKwACbcDVPLBGMMOhrmVDSapkFE00imaTKlaUajaVFB28Ju0CXrUQfhDAEAEgHss6NhpLQAAAAASUVORK5CYII=",backspaceOutline:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJAAAACQCAYAAADnRuK4AAAAAXNSR0IArs4c6QAACmpJREFUeF7tnVmoZUcVhv/feY4gBEVEH/KgCCZxCK2itNo4xQQH+kUN0TjEiDGKKBqnaExwBjUaR6KY+NQgiQkOMSYhYEScIopGJOqDE2hHjfP0y4p1Oqdv33v2qr32Prv2Paug6Ye7Vu2qv75TtWvtGohMqUBAAQZ80zUVQAKUEIQUSIBC8qVzApQMhBRIgELypXMClAyEFEiAQvKlcwKUDIQUSIBC8qVzApQMhBRIgELypXMClAyEFEiAQvKlcwKUDIQUSIBC8qVzApQMhBRIgELypXMClAyEFEiAQvKlcwKUDIQUSIBC8qVzApQMhBRIgELypXMClAyEFEiAQvKlcwKUDIQUSIBC8qVzApQMhBRIgELypfPsAJJ0NYC92XRHKPB3AAfLv18BuBLAFSR/NKZWswJI0vkA3jCmILsw75sAvIfkR8eo22wAknQSgMvGEGFD8vwxgFeQvGrI+s4CIEnHAPgugHsMWfkNzevDAM4i+Z8h6t88QJLuXOB5yBAVzjxuVeBaAM8ieXNUjzkAdAmA50Yrmv5HKPATACeQ/GNEm6YBkvRyANblZhpHAXsfekpkOGsWIEmPAHA9gDuOo13mWhS4gOSZfdVoEiBJ9wFwA4D7961Y+lUpsK/v7KxVgL4K4ElOCS4l+Uyn7a41k3Q0gMcC2ANgH4CHV1T2OyStx69OzQEk6TwAZztr8lMAx5P8s9N+Y8wk2cTjfQDu66z080h+zml7yKwpgCSdCOByZyX+BuBRJH/otN84M0kWN/s0gOc4Kv8Nko922B1m0gxAkh4I4AcVwcL9JA/UVnjT7CXdHYD9yEzfVUkAjib5uxqNmgCoBAu/CeBhzsJ/kORZTtuNN5Nk70bXAZ0Hy59G8qIawVoB6LMAnu8suE3tH0/y3077NAMg6esAuoaoC0la7M2dJgdI0ssAXOgs8W8BHEvS/s9UoYCkdwN4bYfL5STto7U7TQpQZbDQehzreawHylSpgKSTAVza4XYDyeNqsp4MoB7BwteQfH9N5dL2NgWK3l0vyAdJWhDXnSYBSNLtANh3GO/KwgMk97trlYbbKiDJPpzea5U8JKuYqDIeql0kvQPAG5352ZLMR5L8q9M+zXZQYFcAJOnJAL7sbGWLMFuk2SLOmYIKzB6gEiz8HoB7O7U4meQXnLZp1qGApD8BuOcsh7AewcL3kuyadg4OjSSbhRxH0j4BjJok2Ufga0j+YdQHlcznDlBNsPAa+xpP8r/rEHbxjAKPbRuyHvKFY0Ik6QUALOprPfIT1gHRbAGSdDoA77aSX5Zg4e8nhGfx6FEgWoJn8Zy1QCTplq5vjc3NwnoEC/eQ/HYD8IwC0TbwrA2i2QHUI1h4JskLGoJnUIhWwLMWiGYFkCSLMX2t5WDhlneeLm5Dw5kDntEhkmRhEVvesWNqZgiTdC6AN3W1Svn72oOFkuxF+WcVIQUrai+IKuA5BBHJ453auc1mA1AJFn7Jsf7EKj9ZsLBHw1ZDtI5neAmaBUBzCxaO2cBj5u2FZtlO0l8A3K3ZIaxHsPB8kt5vYn00c/mM0dBj5OmqzAqjOQDUfLBwJ32HbPAh84pCM5seSNJLAHzcWeFJgoVdZRui4YfIo6ucff8uyVY03LW5IawyWPgvW5u77mChV/QIABFfb/kidk0CVKbDth3Huw35dJLeniqiV2/fniDYx1f7vlWTeoUFah6wZQhrqwcqwUKbrtsaH0+6mOQpHsOpbXpCVFPstcJjBZNkmzHv0swQJultAN7iVO375TyafzjtJzcbEaK1w9McQJXBQlvvYmtsfjE5FZUFGAGiSeBpCqDKYKFtmX0qya9Utl0z5gNCNBk8BSA7CtiODNwxjf4trEew8BySNtTNOg0A0aTwtARQTbDQeh3rfawXmn0KQDQ5PC0B9EkAL3LSkAD9X6hWALIJzJ3mNoSdS9I7U3NyuX6zQO+zKOzkEEmaHqDSFdpZM97tOfkSfRvvk0LUDEAFIgseetf85DS+AYgk/bPr1NvRZ2HLg4ektwI4xzmgZCBxYohaBMjWPeenDOcvaIvZ2oez5gAqQ5mtLbb3oa4z+Bb6nTHW1UP92vFIr54vzJ8BcGplGdYKkSRbCXGHSWdh2z1ckp1taGccroxyFt9cznG4iGuDqFmASk9kZxxakNGTckHZBBA1DVCB6BMAXuwhyA4VmGL/+05l6zlsbdt7DJmXU0uXmSQ7JvD2zQ1hiwJJsotRvlVxXO87SU5+heUYDT5Gni5KVhg1D1DphWqCjOYy6RlAYzb0mHn3gWkWABWIaoKMubHwSBpGebGWZNdc2vmUO6a1BhJXFUSSff/yLuOYamvzzwEcVfFr7tWwPXqi6uN2PXWYG0C1Qca1n8RaDlewl3kPRL3gWXo/XBwo1dXWdk/a3jEOnJoVQGUoqw0yvpLkh7oUHvLvTohC8FRANBo8pT3sxLeVJ/M2M4QtiVYTZJzkNPoOiAaBxwHRqPDMFqBS8Jog4yT3YewA0aDwrIBodHhmDVApvG0mtO3PnjTJjTxbIBoFnm0gWgs8pQ06lxY3N4QtCWZBRgPDezdnHvPr+alV2EiaL0DlF2Dbn20bdB40XtHwQ5nOHqAC0SyCjEM1Wkv57AqACkRvBvB2p7hrDzI6yzU7s90EUPNBxtnR4SjwrgGo9EK1Qca8cM4ByU4mkuz++F93ZHELyZX3iW31n+S+sKWZWfNBxkCbNeUq6ekArugo1I0kH1xT8EkBKj1R80HGGkFbtZVkZ3bb2d2r0tUkn1hTh8kBKhB9DMBLnQWfJMjoLFuTZpJsO/ONAB7UUcBLSHqvX781q1YAqg0yfoDkq5psrQYLJeldAF7nKFr1x+wmACq9kAUZLazvvTV4P8kDDlE22kTSQ4uuK9dCF5HuR/I3NYI1A1CBaB+AK50VsAMj7TJeixNl2kYBSccCsB/ZMQ6Brif5GIfdYSZNAVQg8rzsLSphl/Hapby2LDZTUaBcq/56ALb1fOVxLkuinULy4loRmwOoQGQX7T7DWZnPk3y203bXmkl6AIA91isDOBGADV3e1HsJbasA1QYZvUKl3fYKPI2knXFQnZoEqPRCNUHG6oqnwyEFLiJ5Wl89mgWoQFQTZOyrwSb7WUztcSRtu0+v1DRABaKPADijV+3SaZUCNgE5geTNEZnmAFBtkDGix6b4Xld2BNvJcaHUPEClF6oNMoZE2eXOtm3q1ZFha1mfWQBUINoL4Kqurbm7vPEj1bOAqx3udW0kk62+swGoQHQ2gPOGFGAD8roJgF0t+qkx6jorgApElwE4aQwxZp6n3YNxsPyzA7yst/4iSdvEMFqaHUCjKZEZ91IgAeolWzotFEiAkoWQAglQSL50ToCSgZACCVBIvnROgJKBkAIJUEi+dE6AkoGQAglQSL50ToCSgZACCVBIvnROgJKBkAIJUEi+dE6AkoGQAglQSL50ToCSgZACCVBIvnROgJKBkAIJUEi+dE6AkoGQAglQSL50ToCSgZACCVBIvnROgJKBkAIJUEi+dE6AkoGQAglQSL50ToCSgZACCVBIvnT+H0jPT81J3xWWAAAAAElFTkSuQmCC",check:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAAOCAYAAAAi2ky3AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAACtSURBVHgBvdPdDcIgEAfwoy8Nb45QN3AGF2s36Ahu4gpuIDoBfSgfpdoTlCbEWEMh6T8hFzjyg5AAkBHOcQe5UWqspRx435sDpMYj6IYQwwVSEiJ2MKVUBWuzLSLl2HL+uxmNCGFO8yaL7RHxve6qRZoAuS4hxac8735elWVx7jrtMKL1o0Gcat9jhExHSukN/kUIFZ7MpDRtzE1isDRkAUtDvrA8ZI597FUf8gWH9P0b4gko9wAAAABJRU5ErkJggg=="},color:{palette:{},white:"0xffffffff",black:"0x000000ff",grey:"0x929096ff",red:"0xe74c3cff",orange:"0xdc7633ff",yellow:"0xf7dc6fff",green:"0x2ecc71ff",blue:"0x93a9fdff",purple:"0x663399ff",overlay:"0x181819b3",material:"0x181819ff",materialNeutral:"0x181819ff",materialNeutralElevated:"0x373639ff",materialInverse:"0xf8f7faff",materialInverseElevated:"0xffffffff",materialBrand:"0x000033ff",materialBrandElevated:"0x242a65ff",textNeutral:"0xf8f7faff",textNeutralSecondary:"0xf8f7fab3",textNeutralTertiary:"0xf8f7fa1a",textNeutralDisabled:"0xf8f7fa80",textInverse:"0x181819ff",textInverseSecondary:"0x181819b3",textInverseTertiary:"0x1818191a",textInverseDisabled:"0x18181980",textBrand:"0x93a9fdff",textBrandSecondary:"0x93a9fdb3",textBrandTertiary:"0x93a9fd1a",textBrandDisabled:"0x93a9fd80",textPositive:"0x2ecc71ff",textNegative:"0xe74c3cff",textInfo:"0x93a9fdff",textCaution:"0xdc7633ff",fillTransparent:"0xffffff0",fillNeutral:"0xf8f7faff",fillNeutralSecondary:"0xf8f7fab3",fillNeutralTertiary:"0xf8f7fa1a",fillNeutralDisabled:"0xf8f7fa80",fillInverse:"0x181819ff",fillInverseSecondary:"0x181819b3",fillInverseTertiary:"0x1818191a",fillInverseDisabled:"0x18181980",fillBrand:"0x93a9fdff",fillBrandSecondary:"0x93a9fdb3",fillBrandTertiary:"0x93a9fd1a",fillBrandDisabled:"0x93a9fd80",fillPositive:"0x2ecc71ff",fillNegative:"0xe74c3cff",fillInfo:"0x93a9fdff",fillCaution:"0xdc7633ff",strokeNeutral:"0xf8f7faff",strokeNeutralSecondary:"0xf8f7fab3",strokeNeutralTertiary:"0xf8f7fa1a",strokeNeutralDisabled:"0xf8f7fa80",strokeInverse:"0x181819ff",strokeInverseSecondary:"0x181819b3",strokeInverseTertiary:"0x1818191a",strokeInverseDisabled:"0x18181980",strokeBrand:"0x93a9fdff",strokeBrandSecondary:"0x93a9fdb3",strokeBrandTertiary:"0x93a9fd1a",strokeBrandDisabled:"0x93a9fd80",strokePositive:"0x2ecc71ff",strokeNegative:"0xe74c3cff",strokeInfo:"0x93a9fdff",strokeCaution:"0xdc7633ff",interactiveNeutral:"0xffffff1a",interactiveNeutralFocus:"0xffffffff",interactiveNeutralFocusSoft:"0xffffff1a",interactiveInverse:"0x48474b1a",interactiveInverseFocus:"0x48474bff",interactiveInverseFocusSoft:"0x48474b1a",interactiveBrand:"0xbecffe1a",interactiveBrandFocus:"0xbecffeff",interactiveBrandFocusSoft:"0xbecffe1a",shadowNeutral:"0x000000b3",shadowNeutralFocus:"0x000000b3",shadowNeutralFocusSoft:"0x000000b3",shadowNeutralText:"0x000000ff",shadowInverse:"0x000000b3",shadowInverseFocus:"0x000000b3",shadowInverseFocusSoft:"0x000000b3",shadowInverseText:"0x000000ff",shadowBrand:"0x000000b3",shadowBrandFocus:"0x000000b3",shadowBrandFocusSoft:"0x000000b3",shadowBrandText:"0x000000ff"},font:[],layout:{columnCount:10,focusScale:1.2,gutterX:20,gutterY:20,marginX:150,marginY:150,safe:50,screenW:1920,screenH:1080},radius:{none:0,xs:2,sm:4,md:8,lg:16,xl:24},spacer:{none:0,xxs:2,xs:4,sm:8,md:10,lg:20,xl:30,xxl:40,xxxl:50},stroke:{none:0,sm:2,md:4,lg:6,xl:8},typography:{display1:{fontFamily:"Arial",fontSize:75,lineHeight:85,fontWeight:500,verticalAlign:"middle",textBaseline:"bottom"},display2:{fontFamily:"Arial",fontSize:50,lineHeight:60,fontWeight:500,verticalAlign:"middle",textBaseline:"bottom"},display3:{fontFamily:"Arial",fontSize:56,fontWeight:400,lineHeight:68,verticalAlign:"middle",textBaseline:"bottom"},display4:{fontFamily:"Arial",fontSize:48,fontWeight:400,lineHeight:64,verticalAlign:"middle",textBaseline:"bottom"},headline1:{fontFamily:"Arial",fontSize:35,fontWeight:500,lineHeight:48,verticalAlign:"middle",textBaseline:"bottom"},headline2:{fontFamily:"Arial",fontSize:30,fontWeight:500,lineHeight:40,verticalAlign:"middle",textBaseline:"bottom"},headline3:{fontFamily:"Arial",fontSize:25,fontWeight:500,lineHeight:36,verticalAlign:"middle",textBaseline:"bottom"},body1:{fontFamily:"Arial",fontSize:25,fontWeight:300,lineHeight:40,verticalAlign:"middle",textBaseline:"bottom"},body2:{fontFamily:"Arial",fontSize:22,fontWeight:300,lineHeight:32,verticalAlign:"middle",textBaseline:"bottom"},body3:{fontFamily:"Arial",fontSize:20,fontWeight:300,lineHeight:32,verticalAlign:"middle",textBaseline:"bottom"},button1:{fontFamily:"Arial",fontSize:25,fontWeight:500,lineHeight:32,verticalAlign:"middle",textBaseline:"bottom"},button2:{fontFamily:"Arial",fontSize:20,fontWeight:500,lineHeight:32,verticalAlign:"middle",textBaseline:"bottom"},callout1:{fontFamily:"Arial",fontSize:20,fontWeight:500,lineHeight:32,verticalAlign:"middle",textBaseline:"bottom"},caption1:{fontFamily:"Arial",fontSize:15,fontWeight:500,lineHeight:24,verticalAlign:"middle",textBaseline:"bottom"},tag1:{fontFamily:"Arial",fontSize:20,fontWeight:500,lineHeight:24,verticalAlign:"middle",textBaseline:"bottom"},footnote1:{fontFamily:"Arial",fontSize:22,fontWeight:300,lineHeight:30,verticalAlign:"middle",textBaseline:"bottom"},subtitle1:{fontFamily:"Arial",fontSize:32,fontWeight:400,lineHeight:36,verticalAlign:"middle",textBaseline:"bottom"},subtitle2:{fontFamily:"Arial",fontSize:28,fontWeight:500,lineHeight:32,verticalAlign:"middle",textBaseline:"bottom"},navigation:{fontFamily:"Arial",fontSize:28,fontWeight:400,lineHeight:32,verticalAlign:"middle",textBaseline:"bottom"}},componentConfig:{Keyboard:{base:{keyProps:{delete:{title:null,icon:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJAAAACQCAYAAADnRuK4AAAAAXNSR0IArs4c6QAACmpJREFUeF7tnVmoZUcVhv/feY4gBEVEH/KgCCZxCK2itNo4xQQH+kUN0TjEiDGKKBqnaExwBjUaR6KY+NQgiQkOMSYhYEScIopGJOqDE2hHjfP0y4p1Oqdv33v2qr32Prv2Paug6Ye7Vu2qv75TtWvtGohMqUBAAQZ80zUVQAKUEIQUSIBC8qVzApQMhBRIgELypXMClAyEFEiAQvKlcwKUDIQUSIBC8qVzApQMhBRIgELypXMClAyEFEiAQvKlcwKUDIQUSIBC8qVzApQMhBRIgELypXMClAyEFEiAQvKlcwKUDIQUSIBC8qVzApQMhBRIgELypXMClAyEFEiAQvKlcwKUDIQUSIBC8qVzApQMhBRIgELypfPsAJJ0NYC92XRHKPB3AAfLv18BuBLAFSR/NKZWswJI0vkA3jCmILsw75sAvIfkR8eo22wAknQSgMvGEGFD8vwxgFeQvGrI+s4CIEnHAPgugHsMWfkNzevDAM4i+Z8h6t88QJLuXOB5yBAVzjxuVeBaAM8ieXNUjzkAdAmA50Yrmv5HKPATACeQ/GNEm6YBkvRyANblZhpHAXsfekpkOGsWIEmPAHA9gDuOo13mWhS4gOSZfdVoEiBJ9wFwA4D7961Y+lUpsK/v7KxVgL4K4ElOCS4l+Uyn7a41k3Q0gMcC2ANgH4CHV1T2OyStx69OzQEk6TwAZztr8lMAx5P8s9N+Y8wk2cTjfQDu66z080h+zml7yKwpgCSdCOByZyX+BuBRJH/otN84M0kWN/s0gOc4Kv8Nko922B1m0gxAkh4I4AcVwcL9JA/UVnjT7CXdHYD9yEzfVUkAjib5uxqNmgCoBAu/CeBhzsJ/kORZTtuNN5Nk70bXAZ0Hy59G8qIawVoB6LMAnu8suE3tH0/y3077NAMg6esAuoaoC0la7M2dJgdI0ssAXOgs8W8BHEvS/s9UoYCkdwN4bYfL5STto7U7TQpQZbDQehzreawHylSpgKSTAVza4XYDyeNqsp4MoB7BwteQfH9N5dL2NgWK3l0vyAdJWhDXnSYBSNLtANh3GO/KwgMk97trlYbbKiDJPpzea5U8JKuYqDIeql0kvQPAG5352ZLMR5L8q9M+zXZQYFcAJOnJAL7sbGWLMFuk2SLOmYIKzB6gEiz8HoB7O7U4meQXnLZp1qGApD8BuOcsh7AewcL3kuyadg4OjSSbhRxH0j4BjJok2Ufga0j+YdQHlcznDlBNsPAa+xpP8r/rEHbxjAKPbRuyHvKFY0Ik6QUALOprPfIT1gHRbAGSdDoA77aSX5Zg4e8nhGfx6FEgWoJn8Zy1QCTplq5vjc3NwnoEC/eQ/HYD8IwC0TbwrA2i2QHUI1h4JskLGoJnUIhWwLMWiGYFkCSLMX2t5WDhlneeLm5Dw5kDntEhkmRhEVvesWNqZgiTdC6AN3W1Svn72oOFkuxF+WcVIQUrai+IKuA5BBHJ453auc1mA1AJFn7Jsf7EKj9ZsLBHw1ZDtI5neAmaBUBzCxaO2cBj5u2FZtlO0l8A3K3ZIaxHsPB8kt5vYn00c/mM0dBj5OmqzAqjOQDUfLBwJ32HbPAh84pCM5seSNJLAHzcWeFJgoVdZRui4YfIo6ucff8uyVY03LW5IawyWPgvW5u77mChV/QIABFfb/kidk0CVKbDth3Huw35dJLeniqiV2/fniDYx1f7vlWTeoUFah6wZQhrqwcqwUKbrtsaH0+6mOQpHsOpbXpCVFPstcJjBZNkmzHv0swQJultAN7iVO375TyafzjtJzcbEaK1w9McQJXBQlvvYmtsfjE5FZUFGAGiSeBpCqDKYKFtmX0qya9Utl0z5gNCNBk8BSA7CtiODNwxjf4trEew8BySNtTNOg0A0aTwtARQTbDQeh3rfawXmn0KQDQ5PC0B9EkAL3LSkAD9X6hWALIJzJ3mNoSdS9I7U3NyuX6zQO+zKOzkEEmaHqDSFdpZM97tOfkSfRvvk0LUDEAFIgseetf85DS+AYgk/bPr1NvRZ2HLg4ektwI4xzmgZCBxYohaBMjWPeenDOcvaIvZ2oez5gAqQ5mtLbb3oa4z+Bb6nTHW1UP92vFIr54vzJ8BcGplGdYKkSRbCXGHSWdh2z1ckp1taGccroxyFt9cznG4iGuDqFmASk9kZxxakNGTckHZBBA1DVCB6BMAXuwhyA4VmGL/+05l6zlsbdt7DJmXU0uXmSQ7JvD2zQ1hiwJJsotRvlVxXO87SU5+heUYDT5Gni5KVhg1D1DphWqCjOYy6RlAYzb0mHn3gWkWABWIaoKMubHwSBpGebGWZNdc2vmUO6a1BhJXFUSSff/yLuOYamvzzwEcVfFr7tWwPXqi6uN2PXWYG0C1Qca1n8RaDlewl3kPRL3gWXo/XBwo1dXWdk/a3jEOnJoVQGUoqw0yvpLkh7oUHvLvTohC8FRANBo8pT3sxLeVJ/M2M4QtiVYTZJzkNPoOiAaBxwHRqPDMFqBS8Jog4yT3YewA0aDwrIBodHhmDVApvG0mtO3PnjTJjTxbIBoFnm0gWgs8pQ06lxY3N4QtCWZBRgPDezdnHvPr+alV2EiaL0DlF2Dbn20bdB40XtHwQ5nOHqAC0SyCjEM1Wkv57AqACkRvBvB2p7hrDzI6yzU7s90EUPNBxtnR4SjwrgGo9EK1Qca8cM4ByU4mkuz++F93ZHELyZX3iW31n+S+sKWZWfNBxkCbNeUq6ekArugo1I0kH1xT8EkBKj1R80HGGkFbtZVkZ3bb2d2r0tUkn1hTh8kBKhB9DMBLnQWfJMjoLFuTZpJsO/ONAB7UUcBLSHqvX781q1YAqg0yfoDkq5psrQYLJeldAF7nKFr1x+wmACq9kAUZLazvvTV4P8kDDlE22kTSQ4uuK9dCF5HuR/I3NYI1A1CBaB+AK50VsAMj7TJeixNl2kYBSccCsB/ZMQ6Brif5GIfdYSZNAVQg8rzsLSphl/Hapby2LDZTUaBcq/56ALb1fOVxLkuinULy4loRmwOoQGQX7T7DWZnPk3y203bXmkl6AIA91isDOBGADV3e1HsJbasA1QYZvUKl3fYKPI2knXFQnZoEqPRCNUHG6oqnwyEFLiJ5Wl89mgWoQFQTZOyrwSb7WUztcSRtu0+v1DRABaKPADijV+3SaZUCNgE5geTNEZnmAFBtkDGix6b4Xld2BNvJcaHUPEClF6oNMoZE2eXOtm3q1ZFha1mfWQBUINoL4Kqurbm7vPEj1bOAqx3udW0kk62+swGoQHQ2gPOGFGAD8roJgF0t+qkx6jorgApElwE4aQwxZp6n3YNxsPyzA7yst/4iSdvEMFqaHUCjKZEZ91IgAeolWzotFEiAkoWQAglQSL50ToCSgZACCVBIvnROgJKBkAIJUEi+dE6AkoGQAglQSL50ToCSgZACCVBIvnROgJKBkAIJUEi+dE6AkoGQAglQSL50ToCSgZACCVBIvnROgJKBkAIJUEi+dE6AkoGQAglQSL50ToCSgZACCVBIvnROgJKBkAIJUEi+dE6AkoGQAglQSL50ToCSgZACCVBIvnT+H0jPT81J3xWWAAAAAElFTkSuQmCC"}}}}}};function oa(e){if(!e||!e[Symbol.iterator])throw new Error("objectFromEntries requires a single iterable argument");var t,n={},r=I(e);try{for(r.s();!(t=r.n()).done;){var i=E(t.value,2),a=i[0],o=i[1];n[a]=o}}catch(s){r.e(s)}finally{r.f()}return n}var sa=["focus","disabled"],ua=["brand","inverse","neutral"];function la({themeKeys:e,base:t,modes:n,tones:r,themeStyles:i,modeKeys:a=sa,toneKeys:o=ua},s=!1){var u=t=>oa(Object.entries(e).filter((([e,n])=>t[n])).map((([e,n])=>[e,t[n]])));return((e,t,n)=>{var r,l=(r=i,oa(Object.entries(r).map((([e,t])=>{var n=u(t);return Object.entries(t).filter((([e,t])=>a.includes(e))).forEach((([e,t])=>{n[e]=u(t)})),[e,n]}))));s&&console.log(l);var c=((e,t)=>A(A({},e),t.base))(e,l);s&&console.log(c);var d=((e,t)=>oa(a.map((n=>[n,A(A({},null==e?void 0:e[n]),null==t?void 0:t[n])]))))(t,l);s&&console.log(d);var h=((e,t,n)=>oa(o.map((r=>{var i,o,s={};return new Set([].concat.apply([],[null!==(i=null==e?void 0:e[r])&&void 0!==i?i:{},null!==(o=null==t?void 0:t[r])&&void 0!==o?o:{}].map(Object.keys))).forEach((n=>{var i,o,u;a.includes(n)||(s[n]=null!==(u=null==(i=null==t?void 0:t[r])?void 0:i[n])&&void 0!==u?u:null==(o=null==e?void 0:e[r])?void 0:o[n])})),a.forEach((i=>{var a,o;s[i]=A(A(A({},n[i]),null==(a=null==e?void 0:e[r])?void 0:a[i]),null==(o=null==t?void 0:t[r])?void 0:o[i])})),[r,s]}))))(n,l,d);return s&&console.log(h),{base:A(A({},c),d),tones:h}})(t,n,r)}function ca(e=0){return(t,n,r=0,i)=>{var a,o,s;if(0!==t.children.length){var u="row"===t.flexDirection?"width":"height",l="row"===t.flexDirection?"x":"y",c=t.gap||0,d=t.scroll||"auto",h=function(e){var t,n;if("row"===e.flexDirection){var r,i,a;t={position:null!==(r=e.children[e.children.length-1].x)&&void 0!==r?r:0,size:null!==(i=e.children[e.children.length-1].width)&&void 0!==i?i:0},n=null!==(a=e.width)&&void 0!==a?a:0}else{var o,s,u;t={position:null!==(o=e.children[e.children.length-1].y)&&void 0!==o?o:0,size:null!==(s=e.children[e.children.length-1].height)&&void 0!==s?s:0},n=null!==(u=e.height)&&void 0!==u?u:0}return[t,n]}(t),f=E(h,2),p=f[0],g=f[1],m=null!==(a=t[l])&&void 0!==a?a:0,v=null!==(o=null==n?void 0:n[l])&&void 0!==o?o:0,y=null!==(s=null==n?void 0:n[u])&&void 0!==s?s:0,b=void 0===i?"none":r>i?"positive":"negative",x=m;if("auto"===d)null!=t.scrollIndex&&t.scrollIndex>=0?t.selected>=t.scrollIndex&&(x="positive"===b?m-y-c:m+y+c):(Math.abs(m)+g<p.position+p.size||v<Math.abs(m))&&(x=-v+e);else if("always"===d||"edge"===d&&"negative"===b&&Math.abs(m)>v)x=-v+e;else if("edge"===d&&"positive"===b&&Math.abs(m)+g<v+y)x=m-y-c;else if("edge"===d&&"none"===b){for(var w=0;w<t.children.length&&Math.abs(m)+g<v+y;){var T;m-=(null!==(T=t.children[w++][u])&&void 0!==T?T:0)+c}x=m}"x"===l&&t.x!==x?t.x=x:"y"===l&&t.y!==x&&(t.y=x)}}}function da(...e){var t=e.filter((e=>"function"==typeof e));if(0!==t.length)return 1===t.length?t[0]:function(...e){var n,r,i=I(t);try{for(i.s();!(r=i.n()).done;){if(!0===(n=r.value.apply(this,e)))return n}}catch(a){i.e(a)}finally{i.f()}return n}}function ha(){if(!this||void 0===this.selected||0===this.children.length)return!1;for(var e=this.children[this.selected];null==e?void 0:e.skipFocus;)this.selected++,e=this.children[this.selected];return e instanceof ur&&(e.setFocus(),!0)}function fa(e){return function(){var t,n,r,i=this.children.length,a=this.wrap,o=this.selected||0;if(0===i)return!1;if("right"===e||"down"===e){do{if(this.selected=(this.selected||0)%i+1,this.selected>=i){if(!a){this.selected=void 0;break}this.selected=0}}while(null==(t=this.children[this.selected])?void 0:t.skipFocus)}else if("left"===e||"up"===e)do{if(this.selected=(this.selected||0)%i-1,this.selected<0){if(!a){this.selected=void 0;break}this.selected=i-1}}while(null==(n=this.children[this.selected])?void 0:n.skipFocus);if(void 0===this.selected&&(this.selected=o,null==(r=this.children[this.selected])?void 0:r.states.has("focus")))return!1;var s=this.children[this.selected];if(this.onSelectedChanged&&this.onSelectedChanged.call(this,this,s,this.selected,o),this.plinko&&void 0!==o){var u=this.children[o].selected||0;s.selected=u<s.children.length?u:s.children.length-1}return s.setFocus(),!0}}var pa=(null==(Bi=aa)?void 0:Bi.componentConfig).Artwork,ga=void 0===pa?{styles:{}}:pa,ma=(ga.defaultTone,y(ga,e));la({themeKeys:{fillColor:"fillColor",scale:"imageScale",pivotX:"imageScalePivotX",pivotY:"imageScalePivotY"},base:{fallbackSrc:void 0,fillColor:aa.color.overlay,gradientColor:aa.color.material,pivotX:.5,pivotY:.5,scale:void 0,borderRadius:aa.radius.md},themeStyles:ma});var va=(null==(ji=aa)?void 0:ji.componentConfig).Badge,ya=void 0===va?{styles:{}}:va,ba=(ya.defaultTone,y(ya,t)),xa={themeKeys:{color:"backgroundColor"},base:{color:aa.color.fillInverseSecondary,borderRadius:aa.radius.sm,border:{color:aa.color.strokeInverse,width:aa.stroke.sm},display:"flex",justifyContent:"spaceEvenly",padding:[aa.spacer.md-aa.stroke.sm,aa.spacer.xs+aa.stroke.sm,aa.spacer.md+aa.stroke.sm,aa.spacer.md+aa.stroke.sm]},tones:{inverse:{color:aa.color.fillNeutralSecondary,borderRadius:aa.radius.sm,border:{color:aa.color.strokeInverseSecondary,width:aa.stroke.sm}},brand:{color:aa.color.fillBrand,borderRadius:aa.radius.sm,border:{color:aa.color.strokeInverseSecondary,width:aa.stroke.sm}}},themeStyles:ba},wa={themeKeys:{color:"textColor"},base:A(A({},aa.typography.tag1),{},{color:aa.color.textNeutral}),tones:{inverse:{color:aa.color.textInverse},brand:{color:aa.color.textNeutral}},themeStyles:ba},Ta={themeKeys:{color:"iconColor"},base:{color:aa.color.textNeutral},tones:{inverse:{color:aa.color.textInverse},brand:{color:aa.color.textNeutral}},themeStyles:ba};la(xa),la(Ta),la(wa);var Aa=(null==(Fi=aa)?void 0:Fi.componentConfig).Button,Sa=void 0===Aa?{styles:{}}:Aa,Ea=Sa.defaultTone,Ia=y(Sa,n),ka=(null==(zi=aa)?void 0:zi.componentConfig).Surface,Ca=void 0===ka?{styles:{}}:ka,_a=Ca.surfaceDefaultTone,Ma=y(Ca,r),Ra={themeKeys:{textAlign:"textAlign",borderRadius:"radius",color:"backgroundColor",justifyContent:"justifyContent"},base:{height:aa.typography.button1.lineHeight+2*aa.spacer.xl,display:"flex",padding:[aa.spacer.xxxl,aa.spacer.xl],color:aa.color.interactiveNeutral,justifyContent:"center",alignItems:"center",borderRadius:aa.radius.sm,contentColor:aa.color.fillNeutral},modes:{focus:{color:aa.color.interactiveNeutralFocus,contentColor:aa.color.fillInverse},disabled:{color:aa.color.fillNeutralDisabled}},tones:{inverse:{color:aa.color.interactiveInverse},brand:{color:aa.color.interactiveBrand,focus:{color:aa.color.fillNeutral}}},themeStyles:A(A({},Ma),Ia)},Na={themeKeys:{color:"contentColor"},base:{color:aa.color.textNeutral},modes:{focus:{color:aa.color.textInverse},disabled:{color:aa.color.textNeutralDisabled}},tones:{inverse:{color:aa.color.fillNeutral},brand:{color:aa.color.fillBrand,focus:{color:aa.color.fillBrand}}},themeStyles:A(A({},Ma),Ia)},La={themeKeys:{color:"textColor"},base:A({textAlign:"left",color:aa.color.textNeutral},aa.typography.button1),modes:{focus:{color:aa.color.textInverse},disabled:{color:aa.color.textNeutralDisabled}},tones:{inverse:{color:aa.color.fillNeutral},brand:{color:aa.color.fillBrand,focus:{color:aa.color.fillBrand}}},themeStyles:A(A({},Ma),Ia)},Da={tone:Ea||_a||"neutral",Container:la(Ra),Content:la(Na),Text:la(La)},Pa=e=>Er(mr,Cr(e,{get style(){var t,n;return[e.style,null==(n=Da.Container.tones)?void 0:n[null!==(t=e.tone)&&void 0!==t?t:Da.tone],Da.Container.base]},forwardStates:!0,get children(){return Er(gr,{get style(){var t;return[Da.Text.tones[null!==(t=e.tone)&&void 0!==t?t:Da.tone],Da.Text.base]},get children(){return e.children}})}})),Oa=(null==(Gi=aa)?void 0:Gi.componentConfig).Checkbox,Ua=void 0===Oa?{styles:{}}:Oa,Ba=(Ua.defaultTone,y(Ua,i)),ja=aa.stroke.sm,Fa=aa.spacer.xxl,za={themeKeys:{color:"color",borderRadius:"borderRadius",border:"border",justifyContent:"justifyContent"},base:{width:Fa,height:Fa,display:"flex",justifyContent:"center",color:aa.color.fillNeutral,alignItems:"center",borderRadius:Fa/4,border:{color:aa.color.strokeInverse,width:ja}},modes:{disabled:{alpha:aa.alpha.inactive}},tones:{brand:{borderRadius:Fa/4,border:{color:aa.color.strokeNeutralSecondary,width:ja},color:aa.color.fillNeutralSecondary,checked:{borderRadius:Fa/4,border:{color:aa.color.strokeNeutralSecondary,width:ja},color:aa.color.fillBrand}},neutral:{borderRadius:Fa/4,border:{color:aa.color.strokeNeutralSecondary,width:ja},color:aa.color.fillInverseSecondary,checked:{borderRadius:Fa/4,border:{color:aa.color.strokeNeutralSecondary,width:ja},color:aa.color.fillNeutral}},inverse:{borderRadius:Fa/4,border:{color:aa.color.strokeInverseSecondary,width:ja},color:aa.color.fillNeutralSecondary,checked:{borderRadius:Fa/4,border:{color:aa.color.strokeInverseSecondary,width:ja},color:aa.color.fillInverse}}},modeKeys:["focus","disabled","checked"],themeStyles:Ba},Ga={themeKeys:{color:"color"},base:{width:aa.spacer.lg,height:aa.spacer.lg,src:aa.asset.check},tones:{neutral:{color:aa.color.fillInverse},inverse:{color:aa.color.fillNeutral},brand:{color:aa.color.fillInverse}},themeStyles:Ba};la(za),la(Ga);var Va=(null==(Vi=aa)?void 0:Vi.componentConfig).Icon,Ka=void 0===Va?{styles:{}}:Va,Ha=(Ka.defaultTone,y(Ka,a));la({themeKeys:{color:"color"},base:{width:100,height:100,color:aa.color.fillInverse},tones:{inverse:{color:aa.color.fillInverse},brand:{color:aa.color.fillBrand}},themeStyles:Ha});var Wa=(null==(Ki=aa)?void 0:Ki.componentConfig).Column,Xa=void 0===Wa?{styles:{}}:Wa,qa=Xa.defaultTone,Ya=y(Xa,o),$a={tone:qa||"neutral",Container:la({themeKeys:{gap:"itemSpacing",scrollIndex:"scrollIndex",itemTransition:"itemTransition"},base:{display:"flex",flexBoundary:"fixed",flexDirection:"column",gap:aa.layout.gutterY,itemTransition:A(A({},aa.animation.standardEntrance),{},{duration:aa.animation.duration.fast})},themeStyles:Ya})},Qa=e=>{var t=fa("up"),n=fa("down");return Er(mr,Cr(e,{get onUp(){return da(e.onUp,t)},get onDown(){return da(e.onDown,n)},get selected(){return e.selected||0},forwardFocus:ha,get onLayout(){return da((t=>{var n,r;return ca(e.y).call(t,t,t.children[null!==(n=e.selected)&&void 0!==n?n:0],null!==(r=e.selected)&&void 0!==r?r:0,void 0)}),e.onLayout)},get onSelectedChanged(){return da(e.onSelectedChanged,"none"!==e.scroll?ca(e.y):void 0)},get style(){var t;return[e.style,$a.Container.tones[null!==(t=e.tone)&&void 0!==t?t:$a.tone],$a.Container.base]}}))},Ja=(null==(Hi=aa)?void 0:Hi.componentConfig).Label,Za=void 0===Ja?{styles:{}}:Ja,eo=(Za.defaultTone,y(Za,s)),to={themeKeys:{color:"backgroundColor",borderRadius:"radius"},base:{display:"flex",justifyContent:"center",color:aa.color.textNeutral,padding:[aa.spacer.md,aa.spacer.lg],borderRadius:[aa.radius.md,aa.radius.md,aa.radius.md,aa.radius.none],height:aa.typography.caption1.lineHeight+aa.spacer.md,neutral:{backgroundColor:aa.color.fillNeutral}},tones:{inverse:{color:aa.color.fillInverse},brand:{color:aa.color.fillBrand,focus:{color:aa.color.orange}}},themeStyles:eo},no={themeKeys:{color:"textColor"},base:A(A({},aa.typography.caption1),{},{color:aa.color.textInverse}),tones:{inverse:{color:aa.color.textNeutral},brand:{color:aa.color.textNeutral}},themeStyles:eo};la(to),la(no);var ro=(null==(Wi=aa)?void 0:Wi.componentConfig).Details,io=void 0===ro?{styles:{}}:ro,ao=(io.defaultTone,y(io,u)),oo={themeKeys:{alignItems:"alignItems",contentSpacing:"contentSpacing",badgeContentSpacing:"badgeContentSpacing",ratingContentSpacing:"ratingContentSpacing"},base:{display:"flex",flexDirection:"row",alignItems:"center",contentSpacing:aa.spacer.lg,badgeContentSpacing:aa.spacer.sm,ratingContentSpacing:aa.spacer.lg},themeStyles:ao},so={themeKeys:{color:"textColor"},base:A(A({},aa.typography.body2),{},{marginRight:aa.spacer.lg,color:aa.color.textNeutral}),tones:{neutral:{disabled:{color:aa.color.textNeutralDisabled}},inverse:{color:aa.color.textInverse,disabled:{color:aa.color.textNeutralDisabled}},brand:{color:aa.color.textNeutral,disabled:{color:aa.color.textNeutralDisabled}}},themeStyles:ao};la(oo),la(so);var uo=(null==(Xi=aa)?void 0:Xi.componentConfig).Rating,lo=void 0===uo?{styles:{},defaultTone:"neutral"}:uo,co=lo.styles,ho=(lo.defaultTone,{themeKeys:{justifyContent:"justifyContent",itemSpacing:"itemSpacing"},base:{display:"flex",flexDirection:"column",justifyContent:"flexStart",itemSpacing:aa.spacer.sm},toneModes:{},themeStyles:co}),fo={themeKeys:{color:"textColor"},base:A({color:aa.color.textNeutral},aa.typography.body2),toneModes:{},themeStyles:co},po={themeKeys:{color:"color"},base:{height:aa.typography.body2.lineHeight,width:aa.typography.body2.lineHeight,color:aa.color.fillNeutral,marginRight:aa.spacer.sm},toneModes:{},themeStyles:co};la(ho),la(po),la(fo);var go=(null==(qi=aa)?void 0:qi.componentConfig).Metadata,mo=void 0===go?{styles:{}}:go,vo=(mo.defaultTone,y(mo,l)),yo={themeKeys:{justifyContent:"justifyContent",alpha:"alpha"},base:{display:"flex",flexDirection:"column",justifyContent:"flexStart",flexBoundary:"contain",alpha:aa.alpha.primary},modes:{disabled:{alpha:aa.alpha.inactive}},themeStyles:vo},bo={themeKeys:{color:"textColor"},base:A(A({maxLines:1,contain:"width"},aa.typography.headline3),{},{color:aa.color.textNeutral}),tones:{neutral:{disabled:{color:aa.color.textNeutralDisabled}},inverse:{color:aa.color.textInverse,disabled:{color:aa.color.textNeutralDisabled}},brand:{color:aa.color.textNeutral,disabled:{color:aa.color.textNeutralDisabled}}},themeStyles:vo},xo={themeKeys:{color:"textColor"},base:A(A({contain:"width",maxLines:2},aa.typography.body2),{},{color:aa.color.textNeutralSecondary}),tones:{neutral:{disabled:{color:aa.color.textNeutralDisabled}},inverse:{color:aa.color.textInverseSecondary,disabled:{color:aa.color.textNeutralDisabled}},brand:{color:aa.color.textNeutralSecondary,disabled:{color:aa.color.textNeutralDisabled}}},themeStyles:vo};la(yo),la(xo),la(bo);var wo=(null==(Yi=aa)?void 0:Yi.componentConfig).ProgressBar,To=void 0===wo?{styles:{}}:wo,Ao=(To.defaultTone,y(To,c)),So={themeKeys:{color:"barColor",borderRadius:"borderRadius"},base:{height:aa.spacer.md,color:aa.color.fillNeutralTertiary,borderRadius:aa.radius.xs},tones:{inverse:{color:aa.color.fillInverseTertiary}},themeStyles:Ao},Eo={themeKeys:{color:"progressColor",borderRadius:"borderRadius"},base:{borderRadius:aa.radius.xs,color:aa.color.fillNeutral},tones:{inverse:{color:aa.color.fillInverse},brand:{color:aa.color.fillBrand}},themeStyles:Ao};la(So),la(Eo);var Io=(null==($i=aa)?void 0:$i.componentConfig).Radio,ko=void 0===Io?{themeStyles:{}}:Io,Co=(ko.defaultTone,y(ko,d)),_o=aa.spacer.xxl,Mo=aa.stroke.sm,Ro={themeKeys:{borderRadius:"strokeRadius",color:"backgroundColor",colorChecked:"backgroundColorChecked"},base:{color:aa.color.fillNeutralSecondary,colorChecked:aa.color.fillInverse,height:_o+2*Mo,width:_o+2*Mo,borderRadius:_o/2+Mo,border:{color:aa.color.strokeNeutralSecondary,width:Mo}},tones:{inverse:{border:{color:aa.color.strokeInverseSecondary,width:Mo}},brand:{border:{color:aa.color.fillBrand,width:Mo}}},themeStyles:Co},No={themeKeys:{width:"knobWidth",height:"knobHeight",borderRadius:"knobRadius",color:"knobColor"},base:{color:aa.color.fillInverse,width:_o,height:_o,borderRadius:_o/2},tones:{inverse:{color:aa.color.fillNeutral}},themeStyles:Co};la(Ro),la(No);var Lo=(null==(Qi=aa)?void 0:Qi.componentConfig).Row,Do=void 0===Lo?{styles:{}}:Lo,Po=Do.defaultTone,Oo=y(Do,h),Uo={tone:Po,Container:la({themeKeys:{gap:"itemSpacing",scrollIndex:"scrollIndex",itemTransition:"itemTransition"},base:{display:"flex",flexBoundary:"fixed",flexDirection:"row",gap:aa.layout.gutterX,itemTransition:A(A({},aa.animation.standardEntrance),{},{duration:aa.animation.duration.fast})},themeStyles:Oo})},Bo=e=>{var t=fa("left"),n=fa("right");return Er(mr,Cr(e,{get selected(){return e.selected||0},get onLeft(){return da(e.onLeft,t)},get onRight(){return da(e.onRight,n)},forwardFocus:ha,get onLayout(){return da((t=>ca(e.x).call(t,t,t.children[t.selected],t.selected,void 0)),e.onLayout)},get onSelectedChanged(){return da(e.onSelectedChanged,"none"!==e.scroll?ca(e.x):void 0)},get style(){return[e.style,Uo.Container.tones[e.tone||Uo.tone],Uo.Container.base]}}))},jo=(null==(Ji=aa)?void 0:Ji.componentConfig).Keyboard,Fo=void 0===jo?{styles:{}}:jo,zo=(Fo.defaultTone,y(Fo,f)),Go={themeKeys:{keySpacing:"keySpacing",screenW:"screenW",marginX:"marginX"},base:{keySpacing:aa.spacer.md,screenW:aa.layout.screenW,marginX:aa.layout.marginX,height:100},themeStyles:zo},Vo={themeKeys:{keySpacing:"keySpacing",textAlign:"textAlign",borderRadius:"borderRadius",color:"backgroundColor",justifyContent:"justifyContent",baseWidth:"baseWidth",sizes:"sizes",contentColor:"contentColor"},base:{keySpacing:aa.spacer.md,height:9*aa.spacer.md,paddingX:aa.spacer.md,sizes:{sm:1,md:2,lg:3,xl:4,xxl:5},contentColor:aa.color.fillNeutral,padding:[aa.spacer.xxxl,aa.spacer.xl],baseWidth:7*aa.spacer.md,color:aa.color.interactiveNeutral,display:"flex",justifyContent:"center",alignItems:"center",borderRadius:aa.radius.sm},modes:{focus:{color:aa.color.interactiveNeutralFocus,contentColor:aa.color.fillInverse},disabled:{color:aa.color.fillNeutralDisabled,contentColor:aa.color.fillNeutralDisabled}},tones:{inverse:{color:aa.color.interactiveInverse,focus:{color:aa.color.interactiveInverseFocus,contentColor:aa.color.fillNeutral}},brand:{focus:{contentColor:aa.color.fillNeutral}}},themeStyles:zo},Ko={themeKeys:{color:"textColor"},base:A({textAlign:"left",color:aa.color.textNeutral},aa.typography.headline2),modes:{focus:{color:aa.color.textInverse},disabled:{color:aa.color.textNeutralDisabled}},tones:{inverse:{focus:{color:aa.color.textNeutral}}},themeStyles:zo};la(Go),la(Vo),la(Ko);var Ho=(null==(Zi=aa)?void 0:Zi.componentConfig).Key,Wo=void 0===Ho?{styles:{}}:Ho,Xo=(Wo.defaultTone,y(Wo,p)),qo={themeKeys:{keySpacing:"keySpacing",textAlign:"textAlign",borderRadius:"borderRadius",color:"backgroundColor",justifyContent:"justifyContent",baseWidth:"baseWidth",sizes:"sizes",contentColor:"contentColor"},base:{keySpacing:aa.spacer.md,height:9*aa.spacer.md,paddingX:aa.spacer.md,contentColor:aa.color.fillNeutral,sizes:{sm:1,md:2,lg:3,xl:4,xxl:5},padding:[aa.spacer.md],baseWidth:7*aa.spacer.md,color:aa.color.interactiveNeutral,display:"flex",justifyContent:"center",alignItems:"center",borderRadius:aa.radius.sm},modes:{focus:{color:aa.color.interactiveNeutralFocus,contentColor:aa.color.fillInverse},disabled:{color:aa.color.fillNeutralDisabled,contentColor:aa.color.fillNeutralDisabled}},tones:{inverse:{color:aa.color.interactiveInverse,focus:{color:aa.color.interactiveInverseFocus,contentColor:aa.color.fillNeutral}},brand:{focus:{contentColor:aa.color.fillNeutral}}},themeStyles:Xo},Yo={themeKeys:{color:"textColor"},base:A({textAlign:"left",color:aa.color.textNeutral},aa.typography.headline2),modes:{focus:{color:aa.color.textInverse},disabled:{color:aa.color.textNeutralDisabled}},tones:{inverse:{focus:{color:aa.color.textNeutral}}},themeStyles:Xo};la(qo),la(Yo);var $o=(null==(ea=aa)?void 0:ea.componentConfig).Input,Qo=void 0===$o?{styles:{}}:$o,Jo=(Qo.defaultTone,y(Qo,g)),Zo={themeKeys:{justifyContent:"justifyContent"},base:{display:"flex",justifyContent:"flexStart",flexDirection:"column",width:100,height:100,actualTitle:""},themeStyles:Jo},es={themeKeys:{borderRadius:"borderRadius",color:"backgroundColor"},base:{width:function(e=1){var t=aa.layout.screenW,n=aa.layout.columnCount,r=aa.layout.marginX,i=aa.layout.gutterX;if(!(e<1||e>n))return(t-2*r-(e-1)*i)/e;console.error(`Column expects a number between 1 & ${n}. Received ${e}`)}(4),height:100,display:"flex",flexDirection:"column",padding:[aa.spacer.xxxl,aa.spacer.xl],color:aa.color.interactiveNeutral,contentColor:aa.color.fillInverse,borderRadius:aa.radius.sm,marginX:aa.spacer.xxxl},modes:{focus:{color:aa.color.interactiveNeutralFocus},disabled:{color:aa.color.fillNeutralDisabled}},tones:{inverse:{color:aa.color.interactiveInverse},brand:{color:aa.color.interactiveBrand,focus:{color:aa.color.fillNeutral}}},themeStyles:Jo},ts={themeKeys:{color:"textColor"},base:A({textAlign:"left",color:aa.color.textNeutral},aa.typography.button1),themeStyles:Jo};la(Zo),la(es),la(ts);var ns=(null==(ta=aa)?void 0:ta.componentConfig).Tile,rs=void 0===ns?{styles:{}}:ns,is=(rs.defaultTone,y(rs,m)),as=(null==(na=aa)?void 0:na.componentConfig).Surface,os=void 0===as?{styles:{}}:as,ss=(os.defaultSurfaceTone,y(os,v)),us={themeKeys:{alpha:"alpha",paddingYProgress:"paddingYProgress",borderRadius:"radius"},base:{width:400,height:240,padding:[40,10],paddingYProgress:aa.spacer.xl,paddingYBetweenContent:aa.spacer.md,borderRadius:aa.radius.md,alpha:aa.alpha.primary},modes:{disabled:{alpha:aa.alpha.inactive}},themeStyles:A(A({},ss),is)},ls={themeKeys:{},base:{display:"flex",flexDirection:"column",flexBoundary:"contain",mountY:1},themeStyles:is},cs={themeKeys:{},base:{display:"flex",flexDirection:"column",justifyContent:"flexStart"},themeStyles:is},ds={themeKeys:{},base:{width:5*aa.spacer.lg,height:aa.spacer.xxl+aa.spacer.md},themeStyles:is};la(us),la(ls),la(cs),la(ds),_r("#f6f6f6"),_r("#f6f6f6"),Ee(0),Ee(0),Ee(99),Ee(0),Ee(0),Ee(0),Ee(0);var hs="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function fs(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var ps={},gs={},ms={};Object.defineProperty(ms,"__esModule",{value:!0}),ms.params=vs=ms.DEFAULT_VIDEO_URL=ms.CLOUDINARY_CLOUD_NAME=ms.TMDB_API_KEY=void 0,ms.TMDB_API_KEY="66683917a94e703e14ca150023f4ea7c",ms.CLOUDINARY_CLOUD_NAME="dhcb7oxjd";var vs=ms.DEFAULT_VIDEO_URL="http://commondatastorage.googleapis.com/gtv-videos-bucket/sample/BigBuckBunny.mp4";ms.params=new URL(window.location.href).searchParams;var ys,bs={},xs={};Object.defineProperty(xs,"__esModule",{value:!0}),xs.tvItemVideos=xs.tvItem=xs.tvPopular=void 0,xs.tvPopular={page:1,results:[{backdrop_path:"/4N6zEMfZ57zNEQcM8gWeERFupMv.jpg",first_air_date:"2021-08-11",genre_ids:[16,10759,10765],id:91363,name:"What If...?",origin_country:["US"],original_language:"en",original_name:"What If...?",overview:"Taking inspiration from the comic books of the same name, each episode explores a pivotal moment from the Marvel Cinematic Universe and turns it on its head, leading the audience into uncharted territory.",popularity:2271.98,poster_path:"/lztz5XBMG1x6Y5ubz7CxfPFsAcW.jpg",vote_average:8.6,vote_count:1064},{backdrop_path:"/bjsoOPkViI5WIREQb94XDeXrZlF.jpg",first_air_date:"2021-07-26",genre_ids:[10764],id:129936,name:"Ilha Record",origin_country:["BR"],original_language:"pt",original_name:"Ilha Record",overview:"Ilha Record is a Brazilian reality television competition format originally created and aired by RecordTV. The series is hosted by Sabrina Sato and premiered on Monday, July 26, 2021 at 10:30 p.m. / 9:30 p.m.  www.youtube.com/channel/UCW3Ve61iGOQQoE8UrPMOZcQ",popularity:1504.551,poster_path:"/43pX5G2eL4H6EppxVcirMxdkcGN.jpg",vote_average:2.9,vote_count:8},{backdrop_path:"/zN8vBX1jDRxIDqFQ2ARcodTHhdt.jpg",first_air_date:"2021-08-17",genre_ids:[18,10751],id:129203,name:"The Bond",origin_country:["CN"],original_language:"zh",original_name:"",overview:"",popularity:1387.833,poster_path:"/dLUJGSrFWA1h3pnAqygAHK7ShVb.jpg",vote_average:1,vote_count:1},{backdrop_path:"/qZtAf4Z1lazGQoYVXiHOrvLr5lI.jpg",first_air_date:"2017-01-26",genre_ids:[9648,18,80],id:69050,name:"Riverdale",origin_country:["US"],original_language:"en",original_name:"Riverdale",overview:"Set in the present, the series offers a bold, subversive take on Archie, Betty, Veronica and their friends, exploring the surreality of small-town life, the darkness and weirdness bubbling beneath Riverdales wholesome facade.",popularity:1220.838,poster_path:"/wRbjVBdDo5qHAEOVYoMWpM58FSA.jpg",vote_average:8.6,vote_count:11828},{backdrop_path:"/wvdWb5kTQipdMDqCclC6Y3zr4j3.jpg",first_air_date:"2010-10-31",genre_ids:[10759,18,10765],id:1402,name:"The Walking Dead",origin_country:["US"],original_language:"en",original_name:"The Walking Dead",overview:"Sheriff's deputy Rick Grimes awakens from a coma to find a post-apocalyptic world dominated by flesh-eating zombies. He sets out to find his family and encounters many other survivors along the way.",popularity:1138.365,poster_path:"/w21lgYIi9GeUH5dO8l3B9ARZbCB.jpg",vote_average:8.1,vote_count:11467},{backdrop_path:"/8C0eT8anizQBe8QoD4tY9GXq7tj.jpg",first_air_date:"2017-09-25",genre_ids:[18],id:71712,name:"The Good Doctor",origin_country:["US"],original_language:"en",original_name:"The Good Doctor",overview:"A young surgeon with Savant syndrome is recruited into the surgical unit of a prestigious hospital. The question will arise: can a person who doesn't have the ability to relate to people actually save their lives",popularity:1024.738,poster_path:"/6tfT03sGp9k4c0J3dypjrI8TSAI.jpg",vote_average:8.6,vote_count:9240},{backdrop_path:"/f5tjVQtxihaVwXOdpITSPeIqlpX.jpg",first_air_date:"2021-06-09",genre_ids:[18,10765],id:84958,name:"Loki",origin_country:["US"],original_language:"en",original_name:"Loki",overview:"After stealing the Tesseract during the events of Avengers: Endgame, an alternate version of Loki is brought to the mysterious Time Variance Authority, a bureaucratic organization that exists outside of time and space and monitors the timeline. They give Loki a choice: face being erased from existence due to being a time variant or help fix the timeline and stop a greater threat.",popularity:979.914,poster_path:"/kEl2t3OhXc3Zb9FBh1AuYzRTgZp.jpg",vote_average:8.2,vote_count:7464},{backdrop_path:"/pXjpqrx65mlQskf9mfTWSszYODn.jpg",first_air_date:"2020-05-18",genre_ids:[10765,10759,18],id:80986,name:"DC's Stargirl",origin_country:["US"],original_language:"en",original_name:"DC's Stargirl",overview:'Courtney Whitmore, a smart, athletic and above all else kind girl, discovers her step-father has a secret: he used to be the sidekick to a superhero. "Borrowing" the long-lost heros cosmic staff, she becomes the unlikely inspiration for an entirely new generation of superheroes.',popularity:865.358,poster_path:"/rbkGgrEHOPyAEZqPk609QN1Ird6.jpg",vote_average:7.9,vote_count:808},{backdrop_path:"/ujuhz8nVza03gXk2zRcx54LxA9Y.jpg",first_air_date:"2021-08-12",genre_ids:[18],id:130816,name:"The Ideal City",origin_country:["CN"],original_language:"zh",original_name:"",overview:"",popularity:862.001,poster_path:"/ap9bYavkoEusEZSNuNQ0WKhDs2z.jpg",vote_average:7,vote_count:4},{backdrop_path:"/ktDJ21QQscbMNQfPpZBsNORxdDx.jpg",first_air_date:"2016-01-25",genre_ids:[80,10765],id:63174,name:"Lucifer",origin_country:["US"],original_language:"en",original_name:"Lucifer",overview:"Bored and unhappy as the Lord of Hell, Lucifer Morningstar abandoned his throne and retired to Los Angeles, where he has teamed up with LAPD detective Chloe Decker to take down criminals.But the longer he's away from the underworld, the greater the threat that the worst of humanity could escape.",popularity:838.517,poster_path:"/ekZobS8isE6mA53RAiGDG93hBxL.jpg",vote_average:8.5,vote_count:9974},{backdrop_path:"/aSFDMJGik0vLzUoyl9uQPWstmup.jpg",first_air_date:"2021-08-14",genre_ids:[10765],id:131009,name:"Demi-Gods and Semi-Devils",origin_country:["CN"],original_language:"zh",original_name:"",overview:"",popularity:836.816,poster_path:"/A0gvywTPbbHLcJDedoLdciaiB2t.jpg",vote_average:8,vote_count:1},{backdrop_path:"/gMNDllBAxn3SuW12qZU0tIZaeY3.jpg",first_air_date:"2021-07-21",genre_ids:[35,10751,10759,80],id:114503,name:"Turner & Hooch",origin_country:["US"],original_language:"en",original_name:"Turner & Hooch",overview:"A Deputy Marshal inherits an unruly dog who helps him solve crimes and investigate a family mystery.",popularity:787.984,poster_path:"/1VLk2ObY5298UoGaFARqt0SDyTh.jpg",vote_average:7.5,vote_count:113},{backdrop_path:"/zJZfxi8X3XPHAhxXseRugtnNVtt.jpg",first_air_date:"2013-12-02",genre_ids:[16,35,10765,10759],id:60625,name:"Rick and Morty",origin_country:["US"],original_language:"en",original_name:"Rick and Morty",overview:"Rick is a mentally-unbalanced but scientifically-gifted old man who has recently reconnected with his family. He spends most of his time involving his young grandson Morty in dangerous, outlandish adventures throughout space and alternate universes. Compounded with Morty's already unstable family life, these events cause Morty much distress at home and school.",popularity:783.298,poster_path:"/8kOWDBK6XlPUzckuHDo3wwVRFwt.jpg",vote_average:8.8,vote_count:5231},{backdrop_path:"/eyG9srihv68ScRdEbJZj66WT4O0.jpg",first_air_date:"2014-10-07",genre_ids:[18,10765],id:60735,name:"The Flash",origin_country:["US"],original_language:"en",original_name:"The Flash",overview:'After a particle accelerator causes a freak storm, CSI Investigator Barry Allen is struck by lightning and falls into a coma. Months later he awakens with the power of super speed, granting him the ability to move through Central City like an unseen guardian angel. Though initially excited by his newfound powers, Barry is shocked to discover he is not the only "meta-human" who was created in the wake of the accelerator explosion -- and not everyone is using their new powers for good. Barry partners with S.T.A.R. Labs and dedicates his life to protect the innocent. For now, only a few close friends and associates know that Barry is literally the fastest man alive, but it won\'t be long before the world learns what Barry Allen has become...The Flash.',popularity:769.575,poster_path:"/lJA2RCMfsWoskqlQhXPSLFQGXEJ.jpg",vote_average:7.8,vote_count:8353},{backdrop_path:"/aGULNElJVpSru19WP2pUjopPX1U.jpg",first_air_date:"2021-07-28",genre_ids:[80,10766],id:128252,name:"The Snitch Cartel: Origins",origin_country:["CO"],original_language:"es",original_name:"El cartel de los sapos: El origen",overview:"In Cali during the '60s and '70s, two brothers juggle family, romance and the joint pursuit of a burning ambition: to rule Colombia's drug industry.",popularity:759.919,poster_path:"/A17Rt6BLHno0puR1QXbsSKhBfA4.jpg",vote_average:8,vote_count:100},{backdrop_path:"/9abMIArcm95q0CtTOTZnLdUIoSm.jpg",first_air_date:"1973-03-26",genre_ids:[10766],id:1054,name:"The Young and the Restless",origin_country:["US"],original_language:"en",original_name:"The Young and the Restless",overview:"The rivalries, romances, hopes and fears of the residents of the fictional Midwestern metropolis, Genoa City. The lives and loves of a wide variety of characters mingle through the generations, dominated by the Newman, Abbott, Baldwin and Winters families.",popularity:754.065,poster_path:"/5h58tbqpUhpdiQR1i4FawKWOidh.jpg",vote_average:6.4,vote_count:91},{backdrop_path:"/3IIBf6VlwEyKAX4cN2XCM1gKdgM.jpg",first_air_date:"2005-03-27",genre_ids:[18],id:1416,name:"Grey's Anatomy",origin_country:["US"],original_language:"en",original_name:"Grey's Anatomy",overview:"Follows the personal and professional lives of a group of doctors at Seattles Grey Sloan Memorial Hospital.",popularity:700.043,poster_path:"/clnyhPqj1SNgpAdeSS6a6fwE6Bo.jpg",vote_average:8.2,vote_count:6619},{backdrop_path:null,first_air_date:"2021-01-04",genre_ids:[10766],id:115810,name:"Amor Amor",origin_country:["PT"],original_language:"pt",original_name:"Amor Amor",overview:"This is the story of a woman who fell in love and was betrayed. Her beloved was successful at the expense of a song that stole from her, while she was forced to fight for survival, far from her homeland.\n\nIt is also the story of a girl forced to mature quickly, to raise her daughter, without knowing that, after all, it was not her daughter she was raising...",popularity:689.095,poster_path:"/wksRAOMoyHDxJWSW6bG4MyECW9G.jpg",vote_average:3.6,vote_count:10},{backdrop_path:"/5DN8LSWLCQySuPoQ5ozDqo9GR9o.jpg",first_air_date:"1991-12-30",genre_ids:[10766],id:25778,name:"Familie",origin_country:["BE"],original_language:"nl",original_name:"Familie",overview:"Famile is a Flemish television series, which is broadcast on VTM since December 30th, 1991. It's the longest running Belgian soap opera. The storylines take place mostly in and around the city of Mechelen, where the family Van Den Bossche longstanding operates its family business. The soap has a diverse cast where Jef De Smedt, Jacky Lafon and Annie Geeraerts all continuous part of it since the very beginning. Several times the series was subjected to a thorough facelift in order to stay fresh and innovative. Often thereby also young actors added to the series, without touching the base. Familie is from Monday to Friday to see about 19:45 on VTM, except from late June to late August.",popularity:628.733,poster_path:"/bPBeBzhhfbF0aYZaHd7ESe0TVwK.jpg",vote_average:7,vote_count:4},{backdrop_path:"/ki2V3d7DrQ79mYWvnXjTPLCgBdW.jpg",first_air_date:"2021-08-06",genre_ids:[18,10765],id:95281,name:"S.O.Z: Soldiers or Zombies",origin_country:["ES"],original_language:"es",original_name:"S.O.Z: Soldados o Zombies",overview:"Drug lord Alonso Marroqun escapes from a Mexican prison in an attempt to go into hiding. A US military secret experiment goes wrong and the elite unit from the Mexican Police that is after Marroqun gets infected, creating a new zombie species. The Army and the zombies end up at the drug lords hideout and a battle for human survival begins.",popularity:616.774,poster_path:"/arYdHX708nDq6oWNOSjw6NczWc5.jpg",vote_average:7.4,vote_count:338}],total_pages:500,total_results:1e4},xs.tvItem={backdrop_path:"/4N6zEMfZ57zNEQcM8gWeERFupMv.jpg",created_by:[],episode_run_time:[34],first_air_date:"2021-08-11",genres:[{id:16,name:"Animation"},{id:10759,name:"Action & Adventure"},{id:10765,name:"Sci-Fi & Fantasy"}],homepage:"https://www.disneyplus.com/series/what-if/7672ZVj1ZxU9",id:91363,in_production:!0,languages:["en"],last_air_date:"2021-08-25",last_episode_to_air:{air_date:"2021-08-25",episode_number:3,id:3062391,name:"What If The World Lost Its Mightiest Heroes?",overview:"Nick Fury struggles to launch The Avengers when candidates are targeted by a serial killer.",production_code:"",season_number:1,still_path:"/jUFFhj6bFtQbvhmVEt0GDpJAPuf.jpg",vote_average:7.6,vote_count:9},name:"What If...?",next_episode_to_air:{air_date:"2021-09-01",episode_number:4,id:3062392,name:"What If Doctor Strange Lost His Heart Instead of His Hands?",overview:"A grief-stricken Doctor Strange uses the Eye of Agamotto in a dangerous effort to change the past.",production_code:"",season_number:1,still_path:"/zOBb8e3pljjO4GPh2oa7LXHKWjn.jpg",vote_average:6.75,vote_count:4},networks:[{name:"Disney+",id:2739,logo_path:"/gJ8VX6JSu3ciXHuC2dDGAo2lvwM.png",origin_country:"US"}],number_of_episodes:9,number_of_seasons:1,origin_country:["US"],original_language:"en",original_name:"What If...?",overview:"Taking inspiration from the comic books of the same name, each episode explores a pivotal moment from the Marvel Cinematic Universe and turns it on its head, leading the audience into uncharted territory.",popularity:2271.98,poster_path:"/lztz5XBMG1x6Y5ubz7CxfPFsAcW.jpg",production_companies:[{id:420,logo_path:"/hUzeosd33nzE5MCNsZxCGEKTXaQ.png",name:"Marvel Studios",origin_country:"US"},{id:42171,logo_path:"/yTvfCUChMCmeEbjWNyIFGwgiXQE.png",name:"Blue Spirit",origin_country:"FR"},{id:129671,logo_path:null,name:"Squeeze",origin_country:"CA"},{id:20187,logo_path:"/bYdzRm9r74bIWlSRKIWZeZyDBFD.png",name:"Flying Bark Productions",origin_country:"AU"}],production_countries:[{iso_3166_1:"AU",name:"Australia"},{iso_3166_1:"CA",name:"Canada"},{iso_3166_1:"FR",name:"France"},{iso_3166_1:"US",name:"United States of America"}],seasons:[{air_date:"2021-08-11",episode_count:9,id:134723,name:"Season 1",overview:"",poster_path:"/lztz5XBMG1x6Y5ubz7CxfPFsAcW.jpg",season_number:1}],spoken_languages:[{english_name:"English",iso_639_1:"en",name:"English"}],status:"Returning Series",tagline:"One question changes everything.",type:"Scripted",vote_average:8.6,vote_count:1102},xs.tvItemVideos={id:91363,results:[{iso_639_1:"en",iso_3166_1:"US",name:"Are You Seeing This? Official Clip",key:"IPjjbhAJyZM",site:"YouTube",size:1080,type:"Clip",official:!0,published_at:"2021-08-10T22:06:57.000Z",id:"611362a7770700005de71311"},{iso_639_1:"en",iso_3166_1:"US",name:"Moment",key:"xV5Wm7qixyQ",site:"YouTube",size:1080,type:"Teaser",official:!0,published_at:"2021-08-09T18:00:18.000Z",id:"6111794e8d1b8e0046e96bea"},{iso_639_1:"en",iso_3166_1:"US",name:"What Is What If? Featurette",key:"wzjQsZ_Wr50",site:"YouTube",size:1080,type:"Featurette",official:!0,published_at:"2021-08-04T18:00:41.000Z",id:"610b0da07719d70072c5ad8f"},{iso_639_1:"en",iso_3166_1:"US",name:"Steve Official Clip",key:"7U48ewCum88",site:"YouTube",size:1080,type:"Clip",official:!0,published_at:"2021-08-04T13:05:50.000Z",id:"610a922bee43e80027ccac53"},{iso_639_1:"en",iso_3166_1:"US",name:"Ask The Question",key:"HwioB_clHgg",site:"YouTube",size:1080,type:"Teaser",official:!0,published_at:"2021-08-03T16:00:08.000Z",id:"610969e1c613ce0047d2fffa"},{iso_639_1:"en",iso_3166_1:"US",name:"Changed",key:"G-7Q7bUYgKk",site:"YouTube",size:1080,type:"Teaser",official:!0,published_at:"2021-07-29T18:17:51.000Z",id:"6102fec68e8d30005e090739"},{iso_639_1:"en",iso_3166_1:"US",name:"Official Trailer",key:"x9D0uUKJ5KI",site:"YouTube",size:1080,type:"Trailer",official:!0,published_at:"2021-07-08T16:00:02.000Z",id:"60e723804ca676002de84948"},{iso_639_1:"en",iso_3166_1:"US",name:"Exclusive First Look",key:"4iLVoEg9aLk",site:"YouTube",size:1080,type:"Trailer",official:!0,published_at:"2020-12-11T00:49:50.000Z",id:"5fd2c2ee5aadc400425b52b5"}]},Object.defineProperty(bs,"__esModule",{value:!0}),bs.getBackdropSize=bs.getPosterSize=bs.imageUrl=bs.getVideos=_s=bs.getDetails=bs.getPopular=void 0;var ws=ms,Ts=xs,As=ws.params.has("debug"),Ss=+(null!==(ys=ws.params.get("apidelay"))&&void 0!==ys?ys:0),Es=function(){var e=w(b().mark((function e(t){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((e=>setTimeout((()=>{e(t)}),Ss)));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Is=function(){var e=w(b().mark((function e(t){var n,r;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=new URL(`https://api.themoviedb.org/3/${t}`)).searchParams.set("api_key",ws.TMDB_API_KEY),e.t0=Es,e.next=5,fetch(n.toString(),{headers:{accept:"application/json"}});case 5:return e.t1=e.sent,e.next=8,(0,e.t0)(e.t1);case 8:return r=e.sent,e.next=11,r.json();case 11:return e.abrupt("return",e.sent);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ks=function(){var e=w(b().mark((function e(t,n=1){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!As){e.next=2;break}return e.abrupt("return",Es(Ts.tvPopular));case 2:return e.next=4,Is(`${t}/popular?page=${n}`);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();bs.getPopular=ks;var Cs=function(){var e=w(b().mark((function e(t,n){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!As){e.next=2;break}return e.abrupt("return",Es(Ts.tvItem));case 2:return e.next=4,Is(`${t}/${n}`);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),_s=bs.getDetails=Cs,Ms=function(){var e=w(b().mark((function e(t,n){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!As){e.next=2;break}return e.abrupt("return",Es(Ts.tvItemVideos));case 2:return e.next=4,Is(`${t}/${n}/videos`);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();bs.getVideos=Ms;bs.imageUrl=(e,t)=>""===(null!=t?t:"")?"":`https://image.tmdb.org/t/p/${e}${t}`;bs.getPosterSize=e=>e>780?"original":e>500?"w780":e>342?"w500":e>200?"w342":e>185?"w200":e>154?"w185":e>92?"w154":"w92";bs.getBackdropSize=e=>e>1280?"original":e>780?"w1280":e>300?"w780":"w300",function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.getBackdropUrl=e.getPosterUrl=e.getBackdropSize=e.getPosterSize=e.getImagePath=e.getRuntimeStr=e.getRuntime=e.getYouTubeEmbedUrl=e.getVideo=e.getVideos=e.getDetails=e.getPopular=e.getDetail=void 0;var t=ms,n=bs;e.getDetail=(e,n)=>({id:n.id,name:n.name,poster:n.poster_path,backdrop:n.backdrop_path,airDate:"first_air_date"in n?new Date(n.first_air_date):void 0,releaseDate:"release_date"in n?new Date(n.release_date):void 0,description:n.overview,popularity:n.popularity,voteAverage:n.vote_average,video:t.DEFAULT_VIDEO_URL,type:e});var r=function(){var t=w(b().mark((function t(r,i=1){var a;return b().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.getPopular(r,i);case 2:return a=t.sent,t.abrupt("return",a.results.map((t=>(0,e.getDetail)(r,t))));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();e.getPopular=r;var i=function(){var e=w(b().mark((function e(t,r){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.getDetails(t,r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();e.getDetails=i;var a=function(){var e=w(b().mark((function e(t,r){var i;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.getVideos(t,r);case 2:return i=e.sent,e.abrupt("return",i.results);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();e.getVideos=a;var o=function(){var t=w(b().mark((function t(n,r){var i;return b().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,e.getVideos)(n,r);case 2:return i=t.sent,t.abrupt("return",i.filter((e=>"Trailer"===e.type)).reverse().pop());case 4:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}();e.getVideo=o;e.getYouTubeEmbedUrl=e=>`https://www.youtube-nocookie.com/embed/${e}?controls=0&autoplay=0&enablejsapi=1`;e.getRuntime=e=>"runtime"in e?e.runtime:"episode_run_time"in e?e.episode_run_time[0]:0;e.getRuntimeStr=e=>{if(0===e)return"";var t=Math.floor(e/60),n=e-60*t;return(t>0?`${t}h `:"")+(n>0?`${n}m`:"")};e.getImagePath=(e,t)=>`${t}/${e}`;e.getPosterSize=e=>n.getPosterSize(e);e.getBackdropSize=e=>n.getBackdropSize(e);e.getPosterUrl=(e,t)=>{var r=n.getPosterSize(t);return n.imageUrl(r,e)};e.getBackdropUrl=(e,t)=>{var r=n.getBackdropSize(t);return n.imageUrl(r,e)}}(gs);var Rs={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.adjustLeft=e.getX=e.shouldLoadMore=e.ITEM_POSITION_LEFT=e.TOTAL_ITEM_WIDTH=e.ITEM_MARGIN=e.ITEM_WIDTH=e.TOTAL_HEIGHT=e.MARGIN=e.HEIGHT=void 0,e.HEIGHT=23.75,e.MARGIN=.625,e.TOTAL_HEIGHT=e.HEIGHT+2*e.MARGIN,e.ITEM_WIDTH=12.5,e.ITEM_MARGIN=.625,e.TOTAL_ITEM_WIDTH=e.ITEM_WIDTH+2*e.ITEM_MARGIN,e.ITEM_POSITION_LEFT=13.75;e.shouldLoadMore=(e,t)=>t>=e-15;e.getX=t=>e.TOTAL_ITEM_WIDTH*t;e.adjustLeft=t=>e.ITEM_POSITION_LEFT*t+"rem"}(Rs),function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.adjustTop=e.getY=e.isCarousel=e.getPage=e.renderRange=e.carouselsToLoad=e.startingCarousels=e.shouldAddList=e.getIndex=e.subtitle=e.title=e.CAROUSEL_POSITION_TOP=e.STARTING_CAROUSELS=e.TYPE=void 0;var t=gs,n=Rs,r=ms;e.TYPE="tv",e.STARTING_CAROUSELS=4,e.CAROUSEL_POSITION_TOP=25;e.title=e=>`${e} Demo App`;e.subtitle=e=>0===e.width?"":`${e.width}x${e.height}`;e.getIndex=e=>+e.split(":")[1]-1;e.shouldAddList=(t,n)=>t>=(0,e.startingCarousels)()&&n>=t-3;e.startingCarousels=()=>r.params.has("startingCarousels")&&!isNaN(r.params.get("startingCarousels"))?Math.round(Number(r.params.get("startingCarousels"))):e.STARTING_CAROUSELS;e.carouselsToLoad=()=>r.params.has("loadCarousels")&&!isNaN(r.params.get("loadCarousels"))?Math.round(Number(r.params.get("loadCarousels"))):1;e.renderRange=()=>r.params.has("renderRange")&&!isNaN(r.params.get("renderRange"))?Math.round(Number(r.params.get("renderRange"))):0;var i=function(){var n=w(b().mark((function n(r){return b().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,t.getPopular)(e.TYPE,r);case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();e.getPage=i;e.isCarousel=e=>e.startsWith("carousel:");e.getY=e=>n.TOTAL_HEIGHT*e;e.adjustTop=t=>e.CAROUSEL_POSITION_TOP*t+"rem"}(ps);var Ns={};Object.defineProperty(Ns,"__esModule",{value:!0}),Ns.ITEMS=Ns.TITLE=void 0;var Ls=Ns.TITLE="Categories";Ns.ITEMS=["TV Series","Movies","Documentaries","Short Films","Indie Films","Sports"];var Ds={Column:{flexDirection:"column",display:"flex",justifyContent:"center",alignItems:"center",color:Oi.teal,width:600,height:1080,gap:20,zIndex:101,transition:{x:{duration:250,easing:"ease-in-out"}},x:-450,focus:{width:600,x:0}},SidebarBtn:{color:Oi.buttonUnfocused,focus:{color:Oi.butonFocused}}};function Ps(e){var t=Yr();var n=[{key:"tv",title:"TV Series"},{key:"movie",title:"Movies"},{key:"documentaries",title:"Documentaries"},{key:"trending",title:"Trending"}];return Er(Qa,Cr(e,{onFocus:function(){this.children.forEach((e=>e.states.add("active"))),this.children.selected.setFocus()},onBlur:function(){this.selected=0,this.children.forEach((e=>e.states.remove("active")))},get style(){return Ds.Column},scroll:"none",get children(){return[Er(gr,{skipFocus:!0,fontSize:42,get color(){return Oi.white},children:Ls}),Er(ut,{each:n,children:(n,r)=>Er(Pa,{width:250,height:80,get style(){return Ds.SidebarBtn},onEnter:()=>function(n){if($r((()=>n))())return e.focusPage();t(n)}(`/browse/${n.key}`),get children(){return n.title}})})]}}))}var Os={},Us={};Object.defineProperty(Us,"__esModule",{value:!0}),Us.imageUrl=Us.imagePath=Us.isEnabled=void 0;var Bs=ms;Us.isEnabled=()=>Bs.params.has("cloudinary");Us.imagePath=e=>`tmdb/${e}`;Us.imageUrl=(e,t,n,r,i,a,o)=>{if(0===o)return"";var s=o/200,u=e=>Math.ceil(e*s);return encodeURI(`https://res.cloudinary.com/${Bs.CLOUDINARY_CLOUD_NAME}/image/upload/c_fill,g_auto,h_${u(300)},w_${u(200)}/b_rgb:${e?"000000":"1C1C1C"},bo_${u(10)}px_solid_rgb:${e?"000000":"1C1C1C"},co_rgb:ffffff,g_south_east,l_text:merriweather_${u(20)}:${encodeURIComponent(t)},o_${u(100)},r_${u(0)},x_${u(15)},y_${u(15)}/b_rgb:${e?"ffffff":"1C1C1C"},c_pad,g_north,h_${u(380)},w_${u(200)}/co_rgb:${e?"000000":"ffffff"},g_west,l_text:merriweather_${u(18)}:${encodeURIComponent(n)},x_${u(10)},y_${u(128)}/co_rgb:${e?"000000":"ffffff"},g_west,l_text:merriweather_${u(20)}_bold:${encodeURIComponent(r)},x_${u(10)},y_${u(150)}/co_rgb:${e?"000000":"ffffff"},g_west,l_text:merriweather_${u(18)}:${i.toString()},x_${u(10)},y_${u(172)}/${a}`)},function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.preload=e.imageAlt=e.cloudinaryUrl=e.airDate=e.name=e.ITEM_WIDTH=void 0;var t=ms,n=gs,r=Us;e.ITEM_WIDTH=12.5;e.name=e=>e.length>14?`${e.substring(0,13)}...`:e;e.airDate=e=>void 0===e?"":e.toLocaleDateString();e.cloudinaryUrl=(t,i,a)=>{var o;if(!r.isEnabled()||0===(null!==(o=t.poster)&&void 0!==o?o:"").length)return"";var s=(0,n.getPosterSize)(a),u=(0,n.getImagePath)(t.poster,s),l=r.imagePath(u);return r.imageUrl(i,"1 min",(0,e.airDate)(t.airDate),(0,e.name)(t.name),t.voteAverage,l,a)};e.imageAlt=e=>`Poster image for '${e}'`;e.preload=()=>t.params.has("preload")}(Os);var js={Container:{width:200,height:350,borderRadius:6,scale:1,color:Oi.posterUnfocused,transition:{color:!0,scale:!0},focus:{scale:1.1,color:Oi.white}},assetContainer:{width:200,height:100,color:Oi.black,transition:{color:!0,scale:!0},focus:{scale:1.1,color:Oi.white},y:340}};function Fs(e){var t=E(Ee(Oi.black),2),n=t[0],r=t[1],i=()=>n()===Oi.white?Oi.black:Oi.white;return Er(mr,Cr(e,{onFocus:()=>r(Oi.white),onBlur:()=>r(Oi.black),get style(){return js.Container},get src(){return gs.getPosterUrl(e.poster,200)},get children(){return Er(mr,{get style(){return js.assetContainer},get color(){return n()},get children(){return[Er(gr,{x:10,y:10,fontSize:20,width:200,height:42,contain:"both",get color(){return i()},get children(){return Os.airDate(e.airDate)}}),Er(gr,{x:10,y:40,fontSize:24,width:200,height:42,contain:"both",get color(){return i()},get children(){return e.name}}),Er(gr,{x:10,y:70,fontSize:20,width:200,height:42,contain:"both",get color(){return i()},get children(){return e.voteAverage}})]}})}}))}var zs={width:1920,height:1080,display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",zIndex:100},Gs={width:150,height:150,rotation:0,transition:{rotation:{duration:1e3,easing:"ease-in-out"}}},Vs=()=>{var e,t,n=0;return Re((()=>{t=setInterval((()=>{n=(n+10)%360,e.rotation=n}),1e3)})),Ne((()=>{clearInterval(t)})),Er(mr,{get style(){return zs},get children(){return[Er(mr,{ref(t){"function"==typeof e?e(t):e=t},src:"../../assets/spinner.png",get style(){return Gs}}),Er(gr,{children:"Loading..."})]}})},Ks={AppHeader:{width:1920,height:175,display:"flex",justifyContent:"center",flexDirection:"row",y:0,zIndex:99,color:Oi.background},AppTitle:{textAlign:"center",fontSize:64,y:50},LoadingContainer:{width:1920,height:1080,display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",zIndex:100},Spinner:{width:150,height:150,rotation:0,transition:{rotation:{duration:1e3,easing:"ease-in-out"}}},Row:{display:"flex",justifyContent:"spaceBetween",width:1760,height:300,gap:26,transition:{x:{duration:250,easing:"ease-in-out"}}},Column:{display:"flex",flexDirection:"column",justifyContent:"flexStart",width:1760,height:500,gap:50,y:200,x:80},CarouselAnimation:{transition:{y:{duration:250,easing:"ease-in-out"}}}},Hs=()=>{var e,t,n=Yr(),r=E(Ee(Array.from({length:10},(()=>[]))),2),i=r[0],a=r[1],o=E(Ee(!1),2),s=o[0],u=o[1],l=function(e,t=ce,n){var r=new Map,i=Ge((n=>{var i,a=e(),o=I(r.entries());try{for(o.s();!(i=o.n()).done;){var s=E(i.value,2),u=s[0],l=s[1];if(t(u,a)!==t(u,n)){var c,d=I(l.values());try{for(d.s();!(c=d.n()).done;){var h=c.value;h.state=ge,h.pure?we.push(h):Te.push(h)}}catch(f){d.e(f)}finally{d.f()}}}}catch(f){o.e(f)}finally{o.f()}return a}),void 0,!0,ge);return ze(i),e=>{var n,a=xe;return a&&((n=r.get(e))?n.add(a):r.set(e,n=new Set([a])),Ne((()=>{n.delete(a),!n.size&&r.delete(e)}))),t(e,i.value)}}((()=>0)),c=function(){var e=w(b().mark((function e(t){var n;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ps.getPage(t);case 2:n=e.sent,a((e=>{var r=[...e];return r[t-1]=n,r}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function d(){return!e.states.has("focus")&&(t=dt(),e.setFocus())}return ke((()=>{u(!0);for(var e=1;e<=10;e++)c(e);u(!1)})),Sr((()=>Sr((()=>!!s()))()?Er(Vs,{}):Er(mr,{onLeft:d,onRight:()=>e.states.has("focus")&&t.setFocus(),get children(){return[Er(mr,{get style(){return Ks.AppHeader},get children(){return Er(gr,{get style(){return Ks.AppTitle},children:"Solid Demo App"})}}),Er(Ps,{ref(t){"function"==typeof e?e(t):e=t},focusPage:()=>t.setFocus()}),Er(Qa,{scroll:"auto",y:200,x:170,gap:200,get style(){return Ks.CarouselAnimation},get children(){return Er(ut,{get each(){return i()},children:(e,t)=>Er(Bo,{get style(){return Ks.Row},justifyContent:"center",gap:40,get children(){return Er(ut,{each:e,children:(e,t)=>Er(Fs,Cr({get autofocus(){return l(t())},get index(){return t()+1}},e,{onEnter:()=>function(e){n(`details/${e.type}/${e.id}`)}(e)}))})}})})}})]}})))},Ws={Container:{width:1920,height:1080,borderRadius:6,scale:1,color:Oi.posterUnfocused,zIndex:105},Poster:{y:300,x:200,width:300,height:450,color:Oi.white,zIndex:99},Button:{color:Oi.buttonUnfocused,focus:{color:Oi.butonFocused}}};function Xs(e){var t=Yr();Qr();var n=E(Ee(""),2),r=n[0],i=n[1],a=E(Ee(""),2),o=a[0],s=a[1];function u(){t("/video")}return ke((()=>{i(gs.getPosterUrl(e.poster_path,300))})),ke((()=>{s(gs.getBackdropUrl(e.backdrop_path,window.innerWidth))})),Er(mr,Cr(e,{get style(){return Ws.Container},x:0,get src(){return o()},get children(){return[Er(mr,{get style(){return Ws.Poster},get src(){return r()}}),Er(mr,{get style(){return{y:500,x:0,width:1920,height:100,color:Oi.background}},get children(){return Er(Bo,{x:550,y:25,gap:40,scroll:"none",get children(){return[Er(Pa,{autofocus:!0,width:150,height:50,get style(){return Ws.Button},onEnter:u,children:"Play"}),Er(Pa,{width:150,height:50,get style(){return Ws.Button},onEnter:()=>history.back(),children:"Back"})]}})}}),Er(Qa,{y:620,width:1920,height:480,get color(){return Oi.teal},get children(){return[Er(gr,{x:550,y:20,fontSize:36,marginTop:20,get children(){return e.name}}),Er(gr,{x:550,width:900,fontSize:24,contain:"width",lineHeight:30,get children(){return e.overview}})]}})]}}))}var qs=()=>{var e=Qr(),t=E(Ee({}),2),n=t[0],r=t[1],i=E(Ee(!1),2),a=i[0],o=i[1],s=function(){var e=w(b().mark((function e(t,n){var i;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_s(t,n);case 2:i=e.sent,r(i);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();return ke((()=>{o(!0),s(e.type,e.id),o(!1)})),a()?Er(Vs,{}):Er(Xs,Cr(n))},Ys={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.shouldPause=e.onKeyDown=e.playPause=e.play=e.isYouTube=void 0;var t=ms;e.isYouTube=e=>"YouTube"===(null==e?void 0:e.site);var n=function(){var e=w(b().mark((function e(t,n){var r,i;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n instanceof HTMLIFrameElement)){e.next=8;break}if((i="true"===n.getAttribute("data-playing"))!==t){e.next=4;break}return e.abrupt("return");case 4:null===(r=n.contentWindow)||void 0===r||r.postMessage(JSON.stringify({event:"command",func:i?"pauseVideo":"playVideo",args:""}),"*"),n.setAttribute("data-playing",i?"false":"true"),e.next=17;break;case 8:if(!(n instanceof HTMLVideoElement)){e.next=17;break}if(n.paused!==!t){e.next=11;break}return e.abrupt("return");case 11:if(!n.paused){e.next=16;break}return e.next=14,n.play();case 14:e.next=17;break;case 16:n.pause();case 17:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();e.play=n;var r=function(){var t=w(b().mark((function t(n){var r;return b().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n instanceof HTMLIFrameElement?"true"===n.getAttribute("data-playing"):n instanceof HTMLVideoElement&&!n.paused,t.next=3,(0,e.play)(!r,n);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();e.playPause=r;var i=function(){var t=w(b().mark((function t(n,r){return b().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null!==r){t.next=2;break}return t.abrupt("return");case 2:t.t0=n.key,t.next=" "===t.t0?5:9;break;case 5:return n.preventDefault(),t.next=8,(0,e.playPause)(r);case 8:return t.abrupt("break",9);case 9:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}();e.onKeyDown=i;e.shouldPause=()=>t.params.has("pauseVideoOnBrowse")}(Ys);var $s={};
/*
             @license
             Shaka Player
             Copyright 2016 Google LLC
             SPDX-License-Identifier: Apache-2.0
            */!function(e){!function(){var t="undefined"!=typeof window?window:hs,n={};for(var r in function(e,t,n){
/*
            	 @license
            	 Shaka Player
            	 Copyright 2016 Google LLC
            	 SPDX-License-Identifier: Apache-2.0
            	*/
var i;function a(e){var t=0;return function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}}}var o="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e};var s=function(n){n=["object"==typeof globalThis&&globalThis,n,"object"==typeof e&&e,"object"==typeof self&&self,"object"==typeof t&&t];for(var r=0;r<n.length;++r){var i=n[r];if(i&&i.Math==Math)return i}throw Error("Cannot find global object")}(this);function u(e,t){if(t)e:{var n=s;e=e.split(".");for(var r=0;r<e.length-1;r++){var i=e[r];if(!(i in n))break e;n=n[i]}(t=t(r=n[e=e[e.length-1]]))!=r&&null!=t&&o(n,e,{configurable:!0,writable:!0,value:t})}}function l(e){return(e={next:e})[Symbol.iterator]=function(){return this},e}function c(e){var t="undefined"!=typeof Symbol&&Symbol.iterator&&e[Symbol.iterator];return t?t.call(e):{next:a(e)}}function d(e){if(!(e instanceof Array)){e=c(e);for(var t,n=[];!(t=e.next()).done;)n.push(t.value);e=n}return e}u("Symbol",(function(e){function t(e,t){this.g=e,o(this,"description",{configurable:!0,writable:!0,value:t})}if(e)return e;t.prototype.toString=function(){return this.g};var n="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",r=0;return function e(i){if(this instanceof e)throw new TypeError("Symbol is not a constructor");return new t(n+(i||"")+"_"+r++,i)}})),u("Symbol.iterator",(function(e){if(e)return e;e=Symbol("Symbol.iterator");for(var t="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),n=0;n<t.length;n++){var r=s[t[n]];"function"==typeof r&&"function"!=typeof r.prototype[e]&&o(r.prototype,e,{configurable:!0,writable:!0,value:function(){return l(a(this))}})}return e}));var h,f="function"==typeof Object.create?Object.create:function(e){function t(){}return t.prototype=e,new t};if("function"==typeof Object.setPrototypeOf)h=Object.setPrototypeOf;else{var p;e:{var g={};try{g.__proto__={a:!0},p=g.a;break e}catch(Vv){}p=!1}h=p?function(e,t){if(e.__proto__=t,e.__proto__!==t)throw new TypeError(e+" is not extensible");return e}:null}var m=h;function v(e,t){if(e.prototype=f(t.prototype),e.prototype.constructor=e,m)m(e,t);else for(var n in t)if("prototype"!=n)if(Object.defineProperties){var r=Object.getOwnPropertyDescriptor(t,n);r&&Object.defineProperty(e,n,r)}else e[n]=t[n];e.zh=t.prototype}function y(){this.o=!1,this.l=null,this.h=void 0,this.g=1,this.j=this.m=0,this.u=this.i=null}function b(e){if(e.o)throw new TypeError("Generator is already running");e.o=!0}function x(e,t){e.i={Ee:t,Le:!0},e.g=e.m||e.j}function w(e,t,n){return e.g=n,{value:t}}function T(e){e.g=0}function A(e,t,n){e.m=t,null!=n&&(e.j=n)}function S(e){e.m=0,e.j=2}function E(e,t){e.g=t,e.m=0}function I(e){e.m=0;var t=e.i.Ee;return e.i=null,t}function k(e){e.u=[e.i],e.m=0,e.j=0}function C(e,t){var n=e.u.splice(0)[0];(n=e.i=e.i||n)?n.Le?e.g=e.m||e.j:null!=n.A&&e.j<n.A?(e.g=n.A,e.i=null):e.g=e.j:e.g=t}function _(e){this.g=new y,this.h=e}function M(e,t,n,r){try{var i=t.call(e.g.l,n);if(!(i instanceof Object))throw new TypeError("Iterator result "+i+" is not an object");if(!i.done)return e.g.o=!1,i;var a=i.value}catch(o){return e.g.l=null,x(e.g,o),R(e)}return e.g.l=null,r.call(e.g,a),R(e)}function R(e){for(;e.g.g;)try{var t=e.h(e.g);if(t)return e.g.o=!1,{value:t.value,done:!1}}catch(n){e.g.h=void 0,x(e.g,n)}if(e.g.o=!1,e.g.i){if(t=e.g.i,e.g.i=null,t.Le)throw t.Ee;return{value:t.return,done:!0}}return{value:void 0,done:!0}}function N(e){this.next=function(t){return b(e.g),e.g.l?t=M(e,e.g.l.next,t,e.g.s):(e.g.s(t),t=R(e)),t},this.throw=function(t){return b(e.g),e.g.l?t=M(e,e.g.l.throw,t,e.g.s):(x(e.g,t),t=R(e)),t},this.return=function(t){return function(e,t){b(e.g);var n=e.g.l;return n?M(e,"return"in n?n.return:function(e){return{value:e,done:!0}},t,e.g.return):(e.g.return(t),R(e))}(e,t)},this[Symbol.iterator]=function(){return this}}function L(e){return function(e){function t(t){return e.next(t)}function n(t){return e.throw(t)}return new Promise((function(r,i){!function e(a){a.done?r(a.value):Promise.resolve(a.value).then(t,n).then(e,i)}(e.next())}))}(new N(new _(e)))}function D(){for(var e=Number(this),t=[],n=e;n<arguments.length;n++)t[n-e]=arguments[n];return t}function P(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function O(e,t,n){e instanceof String&&(e=String(e));for(var r=e.length,i=0;i<r;i++){var a=e[i];if(t.call(n,a,i,e))return{Je:i,v:a}}return{Je:-1,v:void 0}}function U(e,t,n){if(null==e)throw new TypeError("The 'this' value for String.prototype."+n+" must not be null or undefined");if(t instanceof RegExp)throw new TypeError("First argument to String.prototype."+n+" must not be a regular expression");return e+""}function B(e,t){e instanceof String&&(e+="");var n=0,r=!1,i={next:function(){if(!r&&n<e.length){var i=n++;return{value:t(i,e[i]),done:!1}}return r=!0,{done:!0,value:void 0}}};return i[Symbol.iterator]=function(){return i},i}y.prototype.s=function(e){this.h=e},y.prototype.return=function(e){this.i={return:e},this.g=this.j},y.prototype.A=function(e){this.g=e},u("Promise",(function(e){function t(e){this.h=0,this.i=void 0,this.g=[],this.o=!1;var t=this.j();try{e(t.resolve,t.reject)}catch(r){t.reject(r)}}function n(){this.g=null}function i(e){return e instanceof t?e:new t((function(t){t(e)}))}if(e)return e;n.prototype.h=function(e){if(null==this.g){this.g=[];var t=this;this.i((function(){t.l()}))}this.g.push(e)};var a=s.setTimeout;n.prototype.i=function(e){a(e,0)},n.prototype.l=function(){for(;this.g&&this.g.length;){var e=this.g;this.g=[];for(var t=0;t<e.length;++t){var n=e[t];e[t]=null;try{n()}catch(r){this.j(r)}}}this.g=null},n.prototype.j=function(e){this.i((function(){throw e}))},t.prototype.j=function(){function e(e){return function(r){n||(n=!0,e.call(t,r))}}var t=this,n=!1;return{resolve:e(this.F),reject:e(this.l)}},t.prototype.F=function(e){if(e===this)this.l(new TypeError("A Promise cannot resolve to itself"));else if(e instanceof t)this.H(e);else{e:switch(typeof e){case"object":var n=null!=e;break e;case"function":n=!0;break e;default:n=!1}n?this.D(e):this.m(e)}},t.prototype.D=function(e){var t=void 0;try{t=e.then}catch(r){return void this.l(r)}"function"==typeof t?this.J(t,e):this.m(e)},t.prototype.l=function(e){this.s(2,e)},t.prototype.m=function(e){this.s(1,e)},t.prototype.s=function(e,t){if(0!=this.h)throw Error("Cannot settle("+e+", "+t+"): Promise already settled in state"+this.h);this.h=e,this.i=t,2===this.h&&this.G(),this.u()},t.prototype.G=function(){var e=this;a((function(){if(e.B()){var t=s.console;void 0!==t&&t.error(e.i)}}),1)},t.prototype.B=function(){if(this.o)return!1;var e=s.CustomEvent,t=s.Event,n=s.dispatchEvent;return void 0===n||("function"==typeof e?e=new e("unhandledrejection",{cancelable:!0}):"function"==typeof t?e=new t("unhandledrejection",{cancelable:!0}):(e=s.document.createEvent("CustomEvent")).initCustomEvent("unhandledrejection",!1,!0,e),e.promise=this,e.reason=this.i,n(e))},t.prototype.u=function(){if(null!=this.g){for(var e=0;e<this.g.length;++e)o.h(this.g[e]);this.g=null}};var o=new n;return t.prototype.H=function(e){var t=this.j();e.Lc(t.resolve,t.reject)},t.prototype.J=function(e,t){var n=this.j();try{e.call(t,n.resolve,n.reject)}catch(r){n.reject(r)}},t.prototype.then=function(e,n){function r(e,t){return"function"==typeof e?function(t){try{i(e(t))}catch(n){a(n)}}:t}var i,a,o=new t((function(e,t){i=e,a=t}));return this.Lc(r(e,i),r(n,a)),o},t.prototype.catch=function(e){return this.then(void 0,e)},t.prototype.Lc=function(e,t){function n(){switch(r.h){case 1:e(r.i);break;case 2:t(r.i);break;default:throw Error("Unexpected state: "+r.h)}}var r=this;null==this.g?o.h(n):this.g.push(n),this.o=!0},t.resolve=i,t.reject=function(e){return new t((function(t,n){n(e)}))},t.race=function(e){return new t((function(t,n){for(var r=c(e),a=r.next();!a.done;a=r.next())i(a.value).Lc(t,n)}))},t.all=function(e){var n=c(e),r=n.next();return r.done?i([]):new t((function(e,t){function a(t){return function(n){o[t]=n,0==--s&&e(o)}}var o=[],s=0;do{o.push(void 0),s++,i(r.value).Lc(a(o.length-1),t),r=n.next()}while(!r.done)}))},t})),u("WeakMap",(function(e){function t(e){if(this.g=(u+=Math.random()+1).toString(),e){e=c(e);for(var t;!(t=e.next()).done;)t=t.value,this.set(t[0],t[1])}}function n(){}function r(e){var t=typeof e;return"object"===t&&null!==e||"function"===t}function i(e){if(!P(e,s)){var t=new n;o(e,s,{value:t})}}function a(e){var t=Object[e];t&&(Object[e]=function(e){return e instanceof n?e:(Object.isExtensible(e)&&i(e),t(e))})}if(function(){if(!e||!Object.seal)return!1;try{var t=Object.seal({}),n=Object.seal({}),r=new e([[t,2],[n,3]]);return 2==r.get(t)&&3==r.get(n)&&(r.delete(t),r.set(n,4),!r.has(t)&&4==r.get(n))}catch(i){return!1}}())return e;var s="$jscomp_hidden_"+Math.random();a("freeze"),a("preventExtensions"),a("seal");var u=0;return t.prototype.set=function(e,t){if(!r(e))throw Error("Invalid WeakMap key");if(i(e),!P(e,s))throw Error("WeakMap key fail: "+e);return e[s][this.g]=t,this},t.prototype.get=function(e){return r(e)&&P(e,s)?e[s][this.g]:void 0},t.prototype.has=function(e){return r(e)&&P(e,s)&&P(e[s],this.g)},t.prototype.delete=function(e){return!!(r(e)&&P(e,s)&&P(e[s],this.g))&&delete e[s][this.g]},t})),u("Map",(function(e){function t(){var e={};return e.Qa=e.next=e.head=e}function n(e,t){var n=e.g;return l((function(){if(n){for(;n.head!=e.g;)n=n.Qa;for(;n.next!=n.head;)return n=n.next,{done:!1,value:t(n)};n=null}return{done:!0,value:void 0}}))}function r(e,t){var n=t&&typeof t;"object"==n||"function"==n?a.has(t)?n=a.get(t):(n=""+ ++o,a.set(t,n)):n="p_"+t;var r=e.h[n];if(r&&P(e.h,n))for(e=0;e<r.length;e++){var i=r[e];if(t!=t&&i.key!=i.key||t===i.key)return{id:n,list:r,index:e,fa:i}}return{id:n,list:r,index:-1,fa:void 0}}function i(e){if(this.h={},this.g=t(),this.size=0,e){e=c(e);for(var n;!(n=e.next()).done;)n=n.value,this.set(n[0],n[1])}}if(function(){if(!e||"function"!=typeof e||!e.prototype.entries||"function"!=typeof Object.seal)return!1;try{var t=Object.seal({x:4}),n=new e(c([[t,"s"]]));if("s"!=n.get(t)||1!=n.size||n.get({x:4})||n.set({x:4},"t")!=n||2!=n.size)return!1;var r=n.entries(),i=r.next();return!i.done&&i.value[0]==t&&"s"==i.value[1]&&!((i=r.next()).done||4!=i.value[0].x||"t"!=i.value[1]||!r.next().done)}catch(a){return!1}}())return e;var a=new WeakMap;i.prototype.set=function(e,t){var n=r(this,e=0===e?0:e);return n.list||(n.list=this.h[n.id]=[]),n.fa?n.fa.value=t:(n.fa={next:this.g,Qa:this.g.Qa,head:this.g,key:e,value:t},n.list.push(n.fa),this.g.Qa.next=n.fa,this.g.Qa=n.fa,this.size++),this},i.prototype.delete=function(e){return!(!(e=r(this,e)).fa||!e.list)&&(e.list.splice(e.index,1),e.list.length||delete this.h[e.id],e.fa.Qa.next=e.fa.next,e.fa.next.Qa=e.fa.Qa,e.fa.head=null,this.size--,!0)},i.prototype.clear=function(){this.h={},this.g=this.g.Qa=t(),this.size=0},i.prototype.has=function(e){return!!r(this,e).fa},i.prototype.get=function(e){return(e=r(this,e).fa)&&e.value},i.prototype.entries=function(){return n(this,(function(e){return[e.key,e.value]}))},i.prototype.keys=function(){return n(this,(function(e){return e.key}))},i.prototype.values=function(){return n(this,(function(e){return e.value}))},i.prototype.forEach=function(e,t){for(var n,r=this.entries();!(n=r.next()).done;)n=n.value,e.call(t,n[1],n[0],this)},i.prototype[Symbol.iterator]=i.prototype.entries;var o=0;return i})),u("Set",(function(e){function t(e){if(this.g=new Map,e){e=c(e);for(var t;!(t=e.next()).done;)this.add(t.value)}this.size=this.g.size}return function(){if(!e||"function"!=typeof e||!e.prototype.entries||"function"!=typeof Object.seal)return!1;try{var t=Object.seal({x:4}),n=new e(c([t]));if(!n.has(t)||1!=n.size||n.add(t)!=n||1!=n.size||n.add({x:4})!=n||2!=n.size)return!1;var r=n.entries(),i=r.next();return!i.done&&i.value[0]==t&&i.value[1]==t&&(!(i=r.next()).done&&i.value[0]!=t&&4==i.value[0].x&&i.value[1]==i.value[0]&&r.next().done)}catch(a){return!1}}()?e:(t.prototype.add=function(e){return e=0===e?0:e,this.g.set(e,e),this.size=this.g.size,this},t.prototype.delete=function(e){return e=this.g.delete(e),this.size=this.g.size,e},t.prototype.clear=function(){this.g.clear(),this.size=0},t.prototype.has=function(e){return this.g.has(e)},t.prototype.entries=function(){return this.g.entries()},t.prototype.values=function(){return this.g.values()},t.prototype.keys=t.prototype.values,t.prototype[Symbol.iterator]=t.prototype.values,t.prototype.forEach=function(e,t){var n=this;this.g.forEach((function(r){return e.call(t,r,r,n)}))},t)})),u("Array.prototype.findIndex",(function(e){return e||function(e,t){return O(this,e,t).Je}})),u("Object.is",(function(e){return e||function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}})),u("Array.prototype.includes",(function(e){return e||function(e,t){var n=this;n instanceof String&&(n=String(n));var r=n.length;for(0>(t=t||0)&&(t=Math.max(t+r,0));t<r;t++){var i=n[t];if(i===e||Object.is(i,e))return!0}return!1}})),u("String.prototype.includes",(function(e){return e||function(e,t){return-1!==U(this,e,"includes").indexOf(e,t||0)}})),u("Array.prototype.find",(function(e){return e||function(e,t){return O(this,e,t).v}})),u("String.prototype.startsWith",(function(e){return e||function(e,t){var n=U(this,e,"startsWith"),r=n.length,i=e.length;t=Math.max(0,Math.min(0|t,n.length));for(var a=0;a<i&&t<r;)if(n[t++]!=e[a++])return!1;return a>=i}})),u("Array.prototype.keys",(function(e){return e||function(){return B(this,(function(e){return e}))}}));var j="function"==typeof Object.assign?Object.assign:function(e,t){for(var n=1;n<arguments.length;n++){var r=arguments[n];if(r)for(var i in r)P(r,i)&&(e[i]=r[i])}return e};u("Object.assign",(function(e){return e||j})),u("Array.from",(function(e){return e||function(e,t,n){t=null!=t?t:function(e){return e};var r=[],i="undefined"!=typeof Symbol&&Symbol.iterator&&e[Symbol.iterator];if("function"==typeof i){e=i.call(e);for(var a=0;!(i=e.next()).done;)r.push(t.call(n,i.value,a++))}else for(i=e.length,a=0;a<i;a++)r.push(t.call(n,e[a],a));return r}})),u("Array.prototype.values",(function(e){return e||function(){return B(this,(function(e,t){return t}))}})),u("Promise.prototype.finally",(function(e){return e||function(e){return this.then((function(t){return Promise.resolve(e()).then((function(){return t}))}),(function(t){return Promise.resolve(e()).then((function(){throw t}))}))}})),u("Array.prototype.entries",(function(e){return e||function(){return B(this,(function(e,t){return[e,t]}))}})),u("String.prototype.repeat",(function(e){return e||function(e){var t=U(this,null,"repeat");if(0>e||1342177279<e)throw new RangeError("Invalid count value");e|=0;for(var n="";e;)1&e&&(n+=t),(e>>>=1)&&(t+=t);return n}})),u("Number.isNaN",(function(e){return e||function(e){return"number"==typeof e&&isNaN(e)}})),u("Object.values",(function(e){return e||function(e){var t,n=[];for(t in e)P(e,t)&&n.push(e[t]);return n}})),u("Math.log2",(function(e){return e||function(e){return Math.log(e)/Math.LN2}})),u("Math.trunc",(function(e){return e||function(e){if(e=Number(e),isNaN(e)||1/0===e||-1/0===e||0===e)return e;var t=Math.floor(Math.abs(e));return 0>e?-t:t}})),u("Object.entries",(function(e){return e||function(e){var t,n=[];for(t in e)P(e,t)&&n.push([t,e[t]]);return n}}));var F=this||self;function z(e,t){e=e.split(".");var n,r=F;e[0]in r||void 0===r.execScript||r.execScript("var "+e[0]);for(;e.length&&(n=e.shift());)e.length||void 0===t?r=r[n]&&r[n]!==Object.prototype[n]?r[n]:r[n]={}:r[n]=t}function G(e){this.g=Math.exp(Math.log(.5)/e),this.i=this.h=0}function V(e){return e.h/(1-Math.pow(e.g,e.i))}function K(){this.h=new G(2),this.j=new G(5),this.g=0,this.i=128e3,this.l=16e3}function H(){}function W(){}function X(){}function q(e){var t=D.apply(1,arguments);$.has(e)||($.add(e),X.apply(H,d(t)))}function Y(){}G.prototype.sample=function(e,t){var n=Math.pow(this.g,e);t=t*(1-n)+n*this.h,isNaN(t)||(this.h=t,this.i+=e)},K.prototype.configure=function(e){this.i=e.minTotalBytes,this.l=e.minBytes,this.h.g=Math.exp(Math.log(.5)/e.fastHalfLife),this.j.g=Math.exp(Math.log(.5)/e.slowHalfLife)},K.prototype.sample=function(e,t){if(!(t<this.l)){var n=8e3*t/e;e/=1e3,this.g+=t,this.h.sample(e,n),this.j.sample(e,n)}},K.prototype.getBandwidthEstimate=function(e){return this.g<this.i?e:Math.min(V(this.h),V(this.j))};var $=new Set;if(e.console&&e.console.log.bind){var Q={},J=(Q[1]=console.error.bind(console),Q[2]=console.warn.bind(console),Q[3]=console.info.bind(console),Q[4]=console.log.bind(console),Q[5]=console.debug.bind(console),Q[6]=console.debug.bind(console),Q);X=J[2],W=J[1]}function Z(e){if(ee.has(e))return ee.get(e);var t=MediaSource.isTypeSupported(e);return ee.set(e,t),t}var ee=new Map;function te(e,t){return!("number"!=typeof e||"number"!=typeof t||!isNaN(e)||!isNaN(t))||e===t}function ne(e,t){-1<(t=e.indexOf(t))&&e.splice(t,1)}function re(e,t,n){if(n||(n=te),e.length!=t.length)return!1;t=t.slice();for(var r={},i=(e=c(e)).next();!i.done;r={md:r.md},i=e.next()){if(r.md=i.value,-1==(i=t.findIndex(function(e){return function(t){return n(e.md,t)}}(r))))return!1;t[i]=t[t.length-1],t.pop()}return 0==t.length}function ie(e,t,n){if(n||(n=te),e.length!=t.length)return!1;for(var r=0;r<e.length;r++)if(!n(e[r],t[r]))return!1;return!0}function ae(e,t,n){this.startTime=e,this.direction=he,this.endTime=t,this.payload=n,this.region=new Te,this.position=null,this.positionAlign=se,this.size=0,this.textAlign=ue,this.writingMode=fe,this.lineInterpretation=pe,this.line=null,this.lineHeight="",this.lineAlign=ge,this.displayAlign=ce,this.fontSize=this.textStrokeWidth=this.textStrokeColor=this.textShadow=this.border=this.backgroundImage=this.backgroundColor=this.color="",this.fontWeight=be,this.fontStyle=xe,this.linePadding=this.letterSpacing=this.fontFamily="",this.opacity=1,this.textDecoration=[],this.wrapLine=!0,this.id="",this.nestedCues=[],this.lineBreak=this.isContainer=!1,this.cellResolution={columns:32,rows:15}}function oe(e,t){if(e.startTime!=t.startTime||e.endTime!=t.endTime||e.payload!=t.payload)return!1;for(var n in e)if("startTime"!=n&&"endTime"!=n&&"payload"!=n)if("nestedCues"==n){if(!ie(e.nestedCues,t.nestedCues,oe))return!1}else if("region"==n||"cellResolution"==n){for(var r in e[n])if(e[n][r]!=t[n][r])return!1}else if(Array.isArray(e[n])){if(!ie(e[n],t[n]))return!1}else if(e[n]!=t[n])return!1;return!0}ae.prototype.clone=function(){var e,t=new ae(0,0,"");for(e in this)t[e]=this[e],t[e]&&t[e].constructor==Array&&(t[e]=t[e].slice());return t},z("shaka.text.Cue",ae);var se="auto";ae.positionAlign={LEFT:"line-left",RIGHT:"line-right",CENTER:"center",AUTO:se};var ue="center",le={LEFT:"left",RIGHT:"right",CENTER:ue,START:"start",END:"end"};ae.textAlign=le;var ce="after",de={BEFORE:"before",CENTER:"center",AFTER:ce};ae.displayAlign=de;var he="ltr";ae.direction={HORIZONTAL_LEFT_TO_RIGHT:he,HORIZONTAL_RIGHT_TO_LEFT:"rtl"};var fe="horizontal-tb";ae.writingMode={HORIZONTAL_TOP_TO_BOTTOM:fe,VERTICAL_LEFT_TO_RIGHT:"vertical-lr",VERTICAL_RIGHT_TO_LEFT:"vertical-rl"};var pe=0;ae.lineInterpretation={LINE_NUMBER:pe,PERCENTAGE:1};var ge="start",me={CENTER:"center",START:ge,END:"end"};ae.lineAlign=me;var ve={white:"#FFF",lime:"#0F0",cyan:"#0FF",red:"#F00",yellow:"#FF0",magenta:"#F0F",blue:"#00F",black:"#000"};ae.defaultTextColor=ve;var ye={bg_white:"#FFF",bg_lime:"#0F0",bg_cyan:"#0FF",bg_red:"#F00",bg_yellow:"#FF0",bg_magenta:"#F0F",bg_blue:"#00F",bg_black:"#000"};ae.defaultTextBackgroundColor=ye;var be=400;ae.fontWeight={NORMAL:be,BOLD:700};var xe="normal",we={NORMAL:xe,ITALIC:"italic",OBLIQUE:"oblique"};function Te(){this.id="",this.regionAnchorY=this.regionAnchorX=this.viewportAnchorY=this.viewportAnchorX=0,this.height=this.width=100,this.viewportAnchorUnits=this.widthUnits=this.heightUnits=Ae,this.scroll=Se}ae.fontStyle=we,ae.textDecoration={UNDERLINE:"underline",LINE_THROUGH:"lineThrough",OVERLINE:"overline"},z("shaka.text.CueRegion",Te);var Ae=1;Te.units={PX:0,PERCENTAGE:Ae,LINES:2};var Se="";function Ee(){}function Ie(e,t){if(!e&&!t)return!0;if(!e||!t||e.byteLength!=t.byteLength)return!1;if(ke(e)==ke(t)&&(e.byteOffset||0)==(t.byteOffset||0))return!0;var n=_e(e);t=_e(t);for(var r=0;r<e.byteLength;r++)if(n[r]!=t[r])return!1;return!0}function ke(e){return e instanceof ArrayBuffer?e:e.buffer}function Ce(e){return e instanceof ArrayBuffer?e:0==e.byteOffset&&e.byteLength==e.buffer.byteLength?e.buffer:new Uint8Array(e).buffer}function _e(e,t,n){return Re(e,void 0===t?0:t,n=void 0===n?1/0:n,Uint8Array)}function Me(e,t,n){return Re(e,void 0===t?0:t,n=void 0===n?1/0:n,DataView)}function Re(e,t,n,r){var i=(e.byteOffset||0)+e.byteLength;return t=Math.max(0,Math.min((e.byteOffset||0)+t,i)),new r(ke(e),t,Math.min(t+Math.max(n,0),i)-t)}function Ne(e,t,n){var r=D.apply(3,arguments);this.severity=e,this.category=t,this.code=n,this.data=r,this.handled=!1}Te.scrollMode={NONE:Se,UP:"up"},z("shaka.util.BufferUtils",Ee),Ee.toDataView=Me,Ee.toUint8=_e,Ee.toArrayBuffer=Ce,Ee.equal=Ie,Ne.prototype.toString=function(){return"shaka.util.Error "+JSON.stringify(this,null,"  ")},z("shaka.util.Error",Ne),Ne.Severity={RECOVERABLE:1,CRITICAL:2},Ne.Category={NETWORK:1,TEXT:2,MEDIA:3,MANIFEST:4,STREAMING:5,DRM:6,PLAYER:7,CAST:8,STORAGE:9,ADS:10},Ne.Code={UNSUPPORTED_SCHEME:1e3,BAD_HTTP_STATUS:1001,HTTP_ERROR:1002,TIMEOUT:1003,MALFORMED_DATA_URI:1004,REQUEST_FILTER_ERROR:1006,RESPONSE_FILTER_ERROR:1007,MALFORMED_TEST_URI:1008,UNEXPECTED_TEST_REQUEST:1009,ATTEMPTS_EXHAUSTED:1010,SEGMENT_MISSING:1011,INVALID_TEXT_HEADER:2e3,INVALID_TEXT_CUE:2001,UNABLE_TO_DETECT_ENCODING:2003,BAD_ENCODING:2004,INVALID_XML:2005,INVALID_MP4_TTML:2007,INVALID_MP4_VTT:2008,UNABLE_TO_EXTRACT_CUE_START_TIME:2009,INVALID_MP4_CEA:2010,TEXT_COULD_NOT_GUESS_MIME_TYPE:2011,CANNOT_ADD_EXTERNAL_TEXT_TO_SRC_EQUALS:2012,TEXT_ONLY_WEBVTT_SRC_EQUALS:2013,MISSING_TEXT_PLUGIN:2014,CHAPTERS_TRACK_FAILED:2015,CANNOT_ADD_EXTERNAL_THUMBNAILS_TO_SRC_EQUALS:2016,UNSUPPORTED_EXTERNAL_THUMBNAILS_URI:2017,BUFFER_READ_OUT_OF_BOUNDS:3e3,JS_INTEGER_OVERFLOW:3001,EBML_OVERFLOW:3002,EBML_BAD_FLOATING_POINT_SIZE:3003,MP4_SIDX_WRONG_BOX_TYPE:3004,MP4_SIDX_INVALID_TIMESCALE:3005,MP4_SIDX_TYPE_NOT_SUPPORTED:3006,WEBM_CUES_ELEMENT_MISSING:3007,WEBM_EBML_HEADER_ELEMENT_MISSING:3008,WEBM_SEGMENT_ELEMENT_MISSING:3009,WEBM_INFO_ELEMENT_MISSING:3010,WEBM_DURATION_ELEMENT_MISSING:3011,WEBM_CUE_TRACK_POSITIONS_ELEMENT_MISSING:3012,WEBM_CUE_TIME_ELEMENT_MISSING:3013,MEDIA_SOURCE_OPERATION_FAILED:3014,MEDIA_SOURCE_OPERATION_THREW:3015,VIDEO_ERROR:3016,QUOTA_EXCEEDED_ERROR:3017,TRANSMUXING_FAILED:3018,CONTENT_TRANSFORMATION_FAILED:3019,UNABLE_TO_GUESS_MANIFEST_TYPE:4e3,DASH_INVALID_XML:4001,DASH_NO_SEGMENT_INFO:4002,DASH_EMPTY_ADAPTATION_SET:4003,DASH_EMPTY_PERIOD:4004,DASH_WEBM_MISSING_INIT:4005,DASH_UNSUPPORTED_CONTAINER:4006,DASH_PSSH_BAD_ENCODING:4007,DASH_NO_COMMON_KEY_SYSTEM:4008,DASH_MULTIPLE_KEY_IDS_NOT_SUPPORTED:4009,DASH_CONFLICTING_KEY_IDS:4010,RESTRICTIONS_CANNOT_BE_MET:4012,HLS_PLAYLIST_HEADER_MISSING:4015,INVALID_HLS_TAG:4016,HLS_INVALID_PLAYLIST_HIERARCHY:4017,DASH_DUPLICATE_REPRESENTATION_ID:4018,HLS_MULTIPLE_MEDIA_INIT_SECTIONS_FOUND:4020,HLS_REQUIRED_ATTRIBUTE_MISSING:4023,HLS_REQUIRED_TAG_MISSING:4024,HLS_COULD_NOT_GUESS_CODECS:4025,HLS_KEYFORMATS_NOT_SUPPORTED:4026,DASH_UNSUPPORTED_XLINK_ACTUATE:4027,DASH_XLINK_DEPTH_LIMIT:4028,CONTENT_UNSUPPORTED_BY_BROWSER:4032,CANNOT_ADD_EXTERNAL_TEXT_TO_LIVE_STREAM:4033,NO_VARIANTS:4036,PERIOD_FLATTENING_FAILED:4037,INCONSISTENT_DRM_ACROSS_PERIODS:4038,HLS_VARIABLE_NOT_FOUND:4039,HLS_MSE_ENCRYPTED_MP2T_NOT_SUPPORTED:4040,HLS_MSE_ENCRYPTED_LEGACY_APPLE_MEDIA_KEYS_NOT_SUPPORTED:4041,NO_WEB_CRYPTO_API:4042,HLS_AES_128_INVALID_IV_LENGTH:4043,HLS_AES_128_INVALID_KEY_LENGTH:4044,CANNOT_ADD_EXTERNAL_THUMBNAILS_TO_LIVE_STREAM:4045,STREAMING_ENGINE_STARTUP_INVALID_STATE:5006,NO_RECOGNIZED_KEY_SYSTEMS:6e3,REQUESTED_KEY_SYSTEM_CONFIG_UNAVAILABLE:6001,FAILED_TO_CREATE_CDM:6002,FAILED_TO_ATTACH_TO_VIDEO:6003,INVALID_SERVER_CERTIFICATE:6004,FAILED_TO_CREATE_SESSION:6005,FAILED_TO_GENERATE_LICENSE_REQUEST:6006,LICENSE_REQUEST_FAILED:6007,LICENSE_RESPONSE_REJECTED:6008,ENCRYPTED_CONTENT_WITHOUT_DRM_INFO:6010,NO_LICENSE_SERVER_GIVEN:6012,OFFLINE_SESSION_REMOVED:6013,EXPIRED:6014,SERVER_CERTIFICATE_REQUIRED:6015,INIT_DATA_TRANSFORM_ERROR:6016,SERVER_CERTIFICATE_REQUEST_FAILED:6017,LOAD_INTERRUPTED:7e3,OPERATION_ABORTED:7001,NO_VIDEO_ELEMENT:7002,OBJECT_DESTROYED:7003,CONTENT_NOT_LOADED:7004,CAST_API_UNAVAILABLE:8e3,NO_CAST_RECEIVERS:8001,ALREADY_CASTING:8002,UNEXPECTED_CAST_ERROR:8003,CAST_CANCELED_BY_USER:8004,CAST_CONNECTION_TIMED_OUT:8005,CAST_RECEIVER_APP_UNAVAILABLE:8006,STORAGE_NOT_SUPPORTED:9e3,INDEXED_DB_ERROR:9001,DEPRECATED_OPERATION_ABORTED:9002,REQUESTED_ITEM_NOT_FOUND:9003,MALFORMED_OFFLINE_URI:9004,CANNOT_STORE_LIVE_OFFLINE:9005,NO_INIT_DATA_FOR_OFFLINE:9007,LOCAL_PLAYER_INSTANCE_REQUIRED:9008,NEW_KEY_OPERATION_NOT_SUPPORTED:9011,KEY_NOT_FOUND:9012,MISSING_STORAGE_CELL:9013,STORAGE_LIMIT_REACHED:9014,DOWNLOAD_SIZE_CALLBACK_ERROR:9015,MODIFY_OPERATION_NOT_SUPPORTED:9016,INDEXED_DB_INIT_TIMED_OUT:9017,CS_IMA_SDK_MISSING:1e4,CS_AD_MANAGER_NOT_INITIALIZED:10001,SS_IMA_SDK_MISSING:10002,SS_AD_MANAGER_NOT_INITIALIZED:10003,CURRENT_DAI_REQUEST_NOT_FINISHED:10004};
/*
            	 @license
            	 Copyright 2008 The Closure Library Authors
            	 SPDX-License-Identifier: Apache-2.0
            	*/
var Le=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#(.*))?$");
/*
            	 @license
            	 Copyright 2006 The Closure Library Authors
            	 SPDX-License-Identifier: Apache-2.0
            	*/function De(e){var t;e instanceof De?(Pe(this,e.Ea),this.pb=e.pb,this.Ha=e.Ha,Oe(this,e.Kb),this.qa=e.qa,Ue(this,e.g.clone()),this.fb=e.fb):e&&(t=String(e).match(Le))?(Pe(this,t[1]||"",!0),this.pb=Be(t[2]||""),this.Ha=Be(t[3]||"",!0),Oe(this,t[4]),this.qa=Be(t[5]||"",!0),Ue(this,t[6]||"",!0),this.fb=Be(t[7]||"")):this.g=new We(null)}function Pe(e,t,n){e.Ea=n?Be(t,!0):t,e.Ea&&(e.Ea=e.Ea.replace(/:$/,""))}function Oe(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.Kb=t}else e.Kb=null}function Ue(e,t,n){t instanceof We?e.g=t:(n||(t=je(t,Ke)),e.g=new We(t))}function Be(e,t){return e?t?decodeURI(e):decodeURIComponent(e):""}function je(e,t,n){return null!=e?(e=encodeURI(e).replace(t,Fe),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Fe(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}(i=De.prototype).Ea="",i.pb="",i.Ha="",i.Kb=null,i.qa="",i.fb="",i.toString=function(){var e=[],t=this.Ea;if(t&&e.push(je(t,ze,!0),":"),t=this.Ha){e.push("//");var n=this.pb;n&&e.push(je(n,ze,!0),"@"),e.push(encodeURIComponent(t).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.Kb)&&e.push(":",String(t))}return(t=this.qa)&&(this.Ha&&"/"!=t.charAt(0)&&e.push("/"),e.push(je(t,"/"==t.charAt(0)?Ve:Ge,!0))),(t=this.g.toString())&&e.push("?",t),(t=this.fb)&&e.push("#",je(t,He)),e.join("")},i.resolve=function(e){var t=this.clone();"data"===t.Ea&&(t=new De);var n=!!e.Ea;n?Pe(t,e.Ea):n=!!e.pb,n?t.pb=e.pb:n=!!e.Ha,n?t.Ha=e.Ha:n=null!=e.Kb;var r=e.qa;if(n)Oe(t,e.Kb);else if(n=!!e.qa){if("/"!=r.charAt(0))if(this.Ha&&!this.qa)r="/"+r;else{var i=t.qa.lastIndexOf("/");-1!=i&&(r=t.qa.substr(0,i+1)+r)}if(".."==r||"."==r)r="";else if(-1!=r.indexOf("./")||-1!=r.indexOf("/.")){i=0==r.lastIndexOf("/",0),r=r.split("/");for(var a=[],o=0;o<r.length;){var s=r[o++];"."==s?i&&o==r.length&&a.push(""):".."==s?((1<a.length||1==a.length&&""!=a[0])&&a.pop(),i&&o==r.length&&a.push("")):(a.push(s),i=!0)}r=a.join("/")}}return n?t.qa=r:n=""!==e.g.toString(),n?Ue(t,e.g.clone()):n=!!e.fb,n&&(t.fb=e.fb),t},i.clone=function(){return new De(this)};var ze=/[#\/\?@]/g,Ge=/[#\?:]/g,Ve=/[#\?]/g,Ke=/[#\?@]/g,He=/#/g;function We(e){this.g=e||null}function Xe(e){if(!e.la&&(e.la={},e.Oc=0,e.g))for(var t=e.g.split("&"),n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var a=t[n].substring(0,r);i=t[n].substring(r+1)}else a=t[n];a=decodeURIComponent(a.replace(/\+/g," ")),i=i||"",e.add(a,decodeURIComponent(i.replace(/\+/g," ")))}}function qe(e,t){return e.concat(t)}function Ye(){}function $e(e){return null!=e}function Qe(e,t){if(0==t.length)return e;var n=t.map((function(e){return new De(e)}));return e.map((function(e){return new De(e)})).map((function(e){return n.map((function(t){return e.resolve(t)}))})).reduce(qe,[]).map((function(e){return e.toString()}))}function Je(e,t){return{keySystem:e,licenseServerUri:"",distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,serverCertificateUri:"",sessionType:"",initData:t||[],keyIds:new Set}}function Ze(e,t){if(1==t.length)return t[0];if(null!=(e=et(e,t)))return e;throw new Ne(2,4,4025,t)}function et(e,t){for(var n=c(rt[e]),r=n.next();!r.done;r=n.next()){r=r.value;for(var i=c(t),a=i.next();!a.done;a=i.next())if(a=a.value,r.test(a.trim()))return a.trim()}return e==tt?"":null}(i=We.prototype).la=null,i.Oc=null,i.add=function(e,t){Xe(this),this.g=null;var n=this.la.hasOwnProperty(e)?this.la[e]:null;return n||(this.la[e]=n=[]),n.push(t),this.Oc++,this},i.set=function(e,t){return Xe(this),this.g=null,this.la.hasOwnProperty(e)?this.la[e]=[t]:this.add(e,t),this},i.toString=function(){if(this.g)return this.g;if(!this.la)return"";var e,t=[];for(e in this.la)for(var n=encodeURIComponent(e),r=this.la[e],i=0;i<r.length;i++){var a=n;""!==r[i]&&(a+="="+encodeURIComponent(r[i])),t.push(a)}return this.g=t.join("&")},i.clone=function(){var e=new We;if(e.g=this.g,this.la){var t,n={};for(t in this.la)n[t]=this.la[t].concat();e.la=n,e.Oc=this.Oc}return e};var tt="text",nt={va:"video",Hc:"audio",X:tt,Wb:"image",Gg:"application"},rt={audio:[/^vorbis$/,/^opus$/,/^flac$/,/^mp4a/,/^[ae]c-3$/,/^ac-4$/,/^dts[cx]$/,/^[du]dts$/],video:[/^avc/,/^hev/,/^hvc/,/^vp0?[89]/,/^av01/,/^dvhe/],text:[/^vtt$/,/^wvtt/,/^stpp/]};function it(){var e,t,n=new Promise((function(n,r){e=n,t=r}));return n.resolve=e,n.reject=t,n}function at(e){this.h=e,this.g=void 0}function ot(e){this.h=e,this.g=null}function st(e){this.h=e,this.g=null}function ut(){return!(!e.MediaSource||!MediaSource.isTypeSupported)}function lt(e){return""!=vt().canPlayType(e)}function ct(){return mt("Xbox One")}function dt(){return mt("Tizen")}function ht(){return mt("Web0S")&&mt("Chrome/38.0.2125.122 Safari/537.36")}function ft(){return!!navigator.vendor&&navigator.vendor.includes("Apple")&&!dt()&&!mt("PC=EOS")&&!mt("VirginMedia")&&!pt()&&!mt("AFT")}function pt(){return mt("PlayStation 4")}function gt(){if(!ft())return null;var e=navigator.userAgent.match(/Version\/(\d+)/);return e||(e=navigator.userAgent.match(/OS (\d+)(?:_\d+)?/))?parseInt(e[1],10):null}function mt(e){return(navigator.userAgent||"").includes(e)}function vt(){return bt||(yt||(yt=new st((function(){bt=null}))),(bt=document.getElementsByTagName("video")[0]||document.getElementsByTagName("audio")[0])||(bt=document.createElement("video")),yt.N(1),bt)}it.prototype.resolve=function(){},it.prototype.reject=function(){},at.prototype.value=function(){return null==this.g&&(this.g=this.h()),this.g},ot.prototype.N=function(t){var n=this;this.stop();var r=!0,i=null;return this.g=function(){e.clearTimeout(i),r=!1},i=e.setTimeout((function(){r&&n.h()}),1e3*t),this},ot.prototype.stop=function(){this.g&&(this.g(),this.g=null)},st.prototype.Mb=function(){return this.stop(),this.h(),this},st.prototype.N=function(e){var t=this;return this.stop(),this.g=new ot((function(){t.h()})).N(e),this},st.prototype.Ca=function(e){var t=this;return this.stop(),this.g=new ot((function(){t.g.N(e),t.h()})).N(e),this},st.prototype.stop=function(){this.g&&(this.g.stop(),this.g=null)},z("shaka.util.Timer",st),st.prototype.stop=st.prototype.stop,st.prototype.tickEvery=st.prototype.Ca,st.prototype.tickAfter=st.prototype.N,st.prototype.tickNow=st.prototype.Mb;var yt=null,bt=null;function xt(){}function wt(t){if(!t)return"";if(239==(t=_e(t))[0]&&187==t[1]&&191==t[2]&&(t=t.subarray(3)),e.TextDecoder&&!pt())return(t=(new TextDecoder).decode(t)).includes("")&&W('Decoded string contains an "unknown character" codepoint.  That probably means the UTF8 encoding was incorrect!'),t;for(var n="",r=0;r<t.length;++r){var i=65533;if(128&t[r]?t.length>=r+2&&192==(224&t[r])&&128==(192&t[r+1])?(i=(31&t[r])<<6|63&t[r+1],r+=1):t.length>=r+3&&224==(240&t[r])&&128==(192&t[r+1])&&128==(192&t[r+2])?(i=(15&t[r])<<12|(63&t[r+1])<<6|63&t[r+2],r+=2):t.length>=r+4&&240==(241&t[r])&&128==(192&t[r+1])&&128==(192&t[r+2])&&128==(192&t[r+3])&&(i=(7&t[r])<<18|(63&t[r+1])<<12|(63&t[r+2])<<6|63&t[r+3],r+=3):i=t[r],65535>=i)n+=String.fromCharCode(i);else{var a=1023&(i-=65536);n+=String.fromCharCode(55296+(i>>10)),n+=String.fromCharCode(56320+a)}}return n}function Tt(e,t,n){if(!e)return"";if(!n&&0!=e.byteLength%2)throw new Ne(2,2,2004);n=Math.floor(e.byteLength/2);var r=new Uint16Array(n);e=Me(e);for(var i=0;i<n;i++)r[i]=e.getUint16(2*i,t);return It.value()(r)}function At(e){function t(e){return n.byteLength<=e||32<=n[e]&&126>=n[e]}if(!e)return"";var n=_e(e);if(239==n[0]&&187==n[1]&&191==n[2])return wt(n);if(254==n[0]&&255==n[1])return Tt(n.subarray(2),!1);if(255==n[0]&&254==n[1])return Tt(n.subarray(2),!0);if(0==n[0]&&0==n[2])return Tt(e,!1);if(0==n[1]&&0==n[3])return Tt(e,!0);if(t(0)&&t(1)&&t(2)&&t(3))return wt(e);throw new Ne(2,2,2003)}function St(t){if(e.TextEncoder&&!pt()){var n=new TextEncoder;return Ce(n.encode(t))}t=encodeURIComponent(t),t=unescape(t),n=new Uint8Array(t.length);for(var r=0;r<t.length;r++)n[r]=t[r].charCodeAt(0);return Ce(n)}function Et(e,t){for(var n=new ArrayBuffer(2*e.length),r=new DataView(n),i=0;i<e.length;++i)r.setUint16(2*i,e.charCodeAt(i),t);return n}z("shaka.util.StringUtils",xt),xt.resetFromCharCode=function(){It.g=void 0},xt.toUTF16=Et,xt.toUTF8=St,xt.fromBytesAutoDetect=At,xt.fromUTF16=Tt,xt.fromUTF8=wt;var It=new at((function(){function e(e){try{var t=new Uint8Array(e);return 0<String.fromCharCode.apply(null,t).length}catch(n){return!1}}for(var t={Ua:65536};0<t.Ua;(t={Ua:t.Ua}).Ua/=2)if(e(t.Ua))return function(e){return function(t){for(var n="",r=0;r<t.length;r+=e.Ua)n+=String.fromCharCode.apply(null,t.subarray(r,r+e.Ua));return n}}(t);return null}));function kt(){}function Ct(e){return e=_e(e),e=It.value()(e),btoa(e)}function _t(e,t){return t=null==t||t,e=Ct(e).replace(/\+/g,"-").replace(/\//g,"_"),t?e:e.replace(/[=]*$/,"")}function Mt(t){t=e.atob(t.replace(/-/g,"+").replace(/_/g,"/"));for(var n=new Uint8Array(t.length),r=0;r<t.length;++r)n[r]=t.charCodeAt(r);return n}function Rt(t){for(var n=t.length/2,r=new Uint8Array(n),i=0;i<n;i++)r[i]=e.parseInt(t.substr(2*i,2),16);return r}function Nt(e){var t=_e(e);e="";for(var n=(t=c(t)).next();!n.done;n=t.next())1==(n=(n=n.value).toString(16)).length&&(n="0"+n),e+=n;return e}function Lt(){for(var e=D.apply(0,arguments),t=0,n=c(e),r=n.next();!r.done;r=n.next())t+=r.value.byteLength;for(t=new Uint8Array(t),n=0,r=(e=c(e)).next();!r.done;r=e.next())r=r.value,t.set(_e(r),n),n+=r.byteLength;return t}function Dt(){}z("shaka.util.Uint8ArrayUtils",kt),kt.concat=Lt,kt.toHex=Nt,kt.fromHex=Rt,kt.fromBase64=Mt,kt.toBase64=_t,kt.toStandardBase64=Ct,z("shaka.dependencies",Dt),Dt.has=function(e){return Ot.has(e)},Dt.add=function(e,t){if(!Pt[e])throw Error(e+" is not supported");Ot.set(e,(function(){return t}))};var Pt={muxjs:"muxjs"};Dt.Allowed=Pt;var Ot=new Map([["muxjs",function(){return e.muxjs}]]);function Ut(e){var t=this;this.o=e,this.m=Ot.get("muxjs")(),this.g=new this.m.mp4.Transmuxer({keepOriginalTimestamps:!0}),this.h=null,this.l=[],this.i=[],this.j=!1,this.g.on("data",(function(e){t.i=e.captions,t.l.push(Lt(e.initSegment,e.data))})),this.g.on("done",(function(){var e={data:Lt.apply(kt,d(t.l)),captions:t.i};t.h.resolve(e),t.j=!1}))}function Bt(e,t){var n=jt(e),r="audio/aac"==e.toLowerCase().split(";")[0];return!(!Ot.get("muxjs")()||!n&&!r)&&(r?Z('audio/mp4; codecs="mp4a.40.2"'):t?Z(zt(t,e)):(t=zt("audio",e),e=zt("video",e),Z(t)||Z(e)))}function jt(e){return"mp2t"==e.toLowerCase().split(";")[0].split("/")[1]}function Ft(e,t){return"audio/aac"==t.toLowerCase().split(";")[0]?'audio/mp4; codecs="mp4a.40.2"':jt(t)?zt(e,t):t}function zt(e,t){if(t=t.replace(/mp2t/i,"mp4"),"audio"==e&&(t=t.replace("video","audio")),e=/avc1\.(66|77|100)\.(\d+)/.exec(t)){var n="avc1.",r=e[1],i=Number(e[2]);n=("66"==r?n+"4200":"77"==r?n+"4d00":n+"6400")+(i>>4).toString(16),n+=(15&i).toString(16),t=t.replace(e[0],n)}return t}function Gt(){}function Vt(e,t){return t&&(e+='; codecs="'+t+'"'),e}function Kt(e,t,n){return Bt(e=Vt(e,t),n)?Ft(n,e):"audio"==n?e.replace("video","audio"):e}function Ht(e){var t=Xt(e);switch(e=t[0],t=t[1].toLowerCase(),!0){case"mp4a"===e&&"69"===t:case"mp4a"===e&&"6b"===t:return"mp3";case"mp4a"===e&&"66"===t:case"mp4a"===e&&"67"===t:case"mp4a"===e&&"68"===t:case"mp4a"===e&&"40.2"===t:case"mp4a"===e&&"40.02"===t:case"mp4a"===e&&"40.5"===t:case"mp4a"===e&&"40.05"===t:case"mp4a"===e&&"40.29"===t:case"mp4a"===e&&"40.42"===t:return"aac";case"mp4a"===e&&"a5"===t:return"ac-3";case"mp4a"===e&&"a6"===t:return"ec-3";case"mp4a"===e&&"b2"===t:return"dtsx";case"mp4a"===e&&"a9"===t:return"dtsc";case"avc1"===e:case"avc3"===e:return"avc";case"hvc1"===e:case"hev1"===e:return"hevc";case"dvh1"===e:case"dvhe"===e:return"dovi"}return e}function Wt(e){return(e=e.split(/ *; */)).shift(),(e=e.find((function(e){return e.startsWith("codecs=")})))?e.split("=")[1].replace(/^"|"$/g,""):""}function Xt(e){var t=(e=e.split("."))[0];return e.shift(),[t,e.join(".")]}function qt(e){this.j=null,this.i=e,this.u=!1,this.l=this.s=0,this.m=1/0,this.h=this.g=null,this.B="",this.o=new Map}function Yt(e){return!(!Zt[e]&&"application/cea-608"!=e&&"application/cea-708"!=e)}function $t(e,t,n){if(e.B=t,t=e.o.get(t))for(var r=c(t.keys()),i=r.next();!i.done;i=r.next())(i=t.get(i.value).filter((function(e){return e.endTime<=n})))&&e.i.append(i)}function Qt(e,t,n){t.startTime+=n,t.endTime+=n;for(var r=(t=c(t.nestedCues)).next();!r.done;r=t.next())Qt(e,r.value,n)}function Jt(e,t,n,r,i){for(var a=n+" "+r,o=new Map,s=(t=c(t)).next();!s.done;s=t.next()){var u=s.value;s=u.stream,u=u.cue,o.has(s)||o.set(s,new Map),o.get(s).has(a)||o.get(s).set(a,[]),Qt(e,u,i),u.startTime>=e.l&&u.startTime<e.m&&(o.get(s).get(a).push(u),s==e.B&&e.i.append([u]))}for(a=(i=c(o.keys())).next();!a.done;a=i.next())for(a=a.value,e.o.has(a)||e.o.set(a,new Map),s=(t=c(o.get(a).keys())).next();!s.done;s=t.next())s=s.value,u=o.get(a).get(s),e.o.get(a).set(s,u);e.g=null==e.g?Math.max(n,e.l):Math.min(e.g,Math.max(n,e.l)),e.h=Math.max(e.h,Math.min(r,e.m))}Ut.prototype.destroy=function(){return this.g.dispose(),this.g=null,Promise.resolve()},z("shaka.util.MimeUtils",Gt),Gt.getFullType=Vt,(new Map).set("codecs","codecs").set("frameRate","framerate").set("bandwidth","bitrate").set("width","width").set("height","height").set("channelsCount","channels"),qt.prototype.destroy=function(){return this.i=this.j=null,this.o.clear(),Promise.resolve()},qt.prototype.remove=function(e,t){var n=this;return L((function(r){if(1==r.g)return w(r,Promise.resolve(),2);!n.i||!n.i.remove(e,t)||null==n.g||t<=n.g||e>=n.h||(e<=n.g&&t>=n.h?n.g=n.h=null:e<=n.g&&t<n.h?n.g=t:e>n.g&&t>=n.h&&(n.h=e)),T(r)}))},z("shaka.text.TextEngine",qt),qt.prototype.destroy=qt.prototype.destroy,qt.findParser=function(e){return Zt[e]},qt.unregisterParser=function(e){delete Zt[e]},qt.registerParser=function(e,t){Zt[e]=t};var Zt={};function en(){}function tn(e,t){return e=an(e),t=an(t),e.split("-")[0]==t.split("-")[0]}function nn(e,t){return e=an(e),t=an(t),e=e.split("-"),t=t.split("-"),e[0]==t[0]&&1==e.length&&2==t.length}function rn(e,t){return e=an(e),t=an(t),e=e.split("-"),t=t.split("-"),2==e.length&&2==t.length&&e[0]==t[0]}function an(e){var t=e.split("-");return e=t[0]||"",t=t[1]||"",e=e.toLowerCase(),e=cn.get(e)||e,(t=t.toUpperCase())?e+"-"+t:e}function on(e,t){return e=an(e),(t=an(t))==e?4:nn(t,e)?3:rn(t,e)?2:nn(e,t)?1:0}function sn(e){var t=e.indexOf("-");return e=(e=0<=t?e.substring(0,t):e).toLowerCase(),cn.get(e)||e}function un(e){return e.language?an(e.language):e.audio&&e.audio.language?an(e.audio.language):e.video&&e.video.language?an(e.video.language):"und"}function ln(e,t){e=an(e);var n=new Set,r=c(t);for(t=r.next();!t.done;t=r.next())n.add(an(t.value));for(t=(r=c(n)).next();!t.done;t=r.next())if((t=t.value)==e)return t;for(t=(r=c(n)).next();!t.done;t=r.next())if(nn(t=t.value,e))return t;for(t=(r=c(n)).next();!t.done;t=r.next())if(rn(t=t.value,e))return t;for(t=(n=c(n)).next();!t.done;t=n.next())if(nn(e,t=t.value))return t;return null}z("shaka.util.LanguageUtils",en),en.findClosestLocale=ln,en.getLocaleForVariant=un,en.getLocaleForText=function(e){return an(e.language||"und")},en.getBase=sn,en.relatedness=on,en.areSiblings=function(e,t){var n=sn(e),r=sn(t);return e!=n&&t!=r&&n==r},en.normalize=an,en.isSiblingOf=rn,en.isParentOf=nn,en.areLanguageCompatible=tn,en.areLocaleCompatible=function(e,t){return(e=an(e))==(t=an(t))};var cn=new Map([["aar","aa"],["abk","ab"],["afr","af"],["aka","ak"],["alb","sq"],["amh","am"],["ara","ar"],["arg","an"],["arm","hy"],["asm","as"],["ava","av"],["ave","ae"],["aym","ay"],["aze","az"],["bak","ba"],["bam","bm"],["baq","eu"],["bel","be"],["ben","bn"],["bih","bh"],["bis","bi"],["bod","bo"],["bos","bs"],["bre","br"],["bul","bg"],["bur","my"],["cat","ca"],["ces","cs"],["cha","ch"],["che","ce"],["chi","zh"],["chu","cu"],["chv","cv"],["cor","kw"],["cos","co"],["cre","cr"],["cym","cy"],["cze","cs"],["dan","da"],["deu","de"],["div","dv"],["dut","nl"],["dzo","dz"],["ell","el"],["eng","en"],["epo","eo"],["est","et"],["eus","eu"],["ewe","ee"],["fao","fo"],["fas","fa"],["fij","fj"],["fin","fi"],["fra","fr"],["fre","fr"],["fry","fy"],["ful","ff"],["geo","ka"],["ger","de"],["gla","gd"],["gle","ga"],["glg","gl"],["glv","gv"],["gre","el"],["grn","gn"],["guj","gu"],["hat","ht"],["hau","ha"],["heb","he"],["her","hz"],["hin","hi"],["hmo","ho"],["hrv","hr"],["hun","hu"],["hye","hy"],["ibo","ig"],["ice","is"],["ido","io"],["iii","ii"],["iku","iu"],["ile","ie"],["ina","ia"],["ind","id"],["ipk","ik"],["isl","is"],["ita","it"],["jav","jv"],["jpn","ja"],["kal","kl"],["kan","kn"],["kas","ks"],["kat","ka"],["kau","kr"],["kaz","kk"],["khm","km"],["kik","ki"],["kin","rw"],["kir","ky"],["kom","kv"],["kon","kg"],["kor","ko"],["kua","kj"],["kur","ku"],["lao","lo"],["lat","la"],["lav","lv"],["lim","li"],["lin","ln"],["lit","lt"],["ltz","lb"],["lub","lu"],["lug","lg"],["mac","mk"],["mah","mh"],["mal","ml"],["mao","mi"],["mar","mr"],["may","ms"],["mkd","mk"],["mlg","mg"],["mlt","mt"],["mon","mn"],["mri","mi"],["msa","ms"],["mya","my"],["nau","na"],["nav","nv"],["nbl","nr"],["nde","nd"],["ndo","ng"],["nep","ne"],["nld","nl"],["nno","nn"],["nob","nb"],["nor","no"],["nya","ny"],["oci","oc"],["oji","oj"],["ori","or"],["orm","om"],["oss","os"],["pan","pa"],["per","fa"],["pli","pi"],["pol","pl"],["por","pt"],["pus","ps"],["que","qu"],["roh","rm"],["ron","ro"],["rum","ro"],["run","rn"],["rus","ru"],["sag","sg"],["san","sa"],["sin","si"],["slk","sk"],["slo","sk"],["slv","sl"],["sme","se"],["smo","sm"],["sna","sn"],["snd","sd"],["som","so"],["sot","st"],["spa","es"],["sqi","sq"],["srd","sc"],["srp","sr"],["ssw","ss"],["sun","su"],["swa","sw"],["swe","sv"],["tah","ty"],["tam","ta"],["tat","tt"],["tel","te"],["tgk","tg"],["tgl","tl"],["tha","th"],["tib","bo"],["tir","ti"],["ton","to"],["tsn","tn"],["tso","ts"],["tuk","tk"],["tur","tr"],["twi","tw"],["uig","ug"],["ukr","uk"],["urd","ur"],["uzb","uz"],["ven","ve"],["vie","vi"],["vol","vo"],["wel","cy"],["wln","wa"],["wol","wo"],["xho","xh"],["yid","yi"],["yor","yo"],["zha","za"],["zho","zh"],["zul","zu"]]);function dn(){this.g={}}function hn(e,t,n,r,i){var a=e.variants;(t.length||n.length)&&(a=function(e,t,n){for(var r={},i=(t=c(t)).next();!i.done;r={xd:r.xd},i=t.next())if(r.xd=i.value,i=e.filter(function(e){return function(t){return t.video&&t.video.codecs.startsWith(e.xd)}}(r)),i.length){e=i;break}for(r={},n=c(n),t=n.next();!t.done;r={jd:r.jd},t=n.next())if(r.jd=t.value,t=e.filter(function(e){return function(t){return t.audio&&t.audio.codecs.startsWith(e.jd)}}(r)),t.length){e=t;break}return e}(a,t,n)),t=function(e){for(var t=new dn,n=(e=c(e)).next();!n.done;n=e.next()){var r=pn(n=n.value);t.push(r,n)}return t}(a=Ln(a,r)),t=function(e){var t=0,n=new Map,r=e.size();return e.forEach((function(e,i){for(var a=(i=c(i)).next();!a.done;a=i.next()){var o=(a=a.value).video;if(o&&o.width&&o.height){o=o.width*o.height*(o.frameRate||1),n.has(o)||n.set(o,new dn);var s=n.get(o);s.push(e,a),s.size()===r&&(t=Math.max(t,o))}}})),t?n.get(t):e}(t);var o=function(e,t){for(var n=(t=c(t)).next();!n.done;n=t.next())if((n=n.value)==jn||n==Fn){if(1==(e=fn(e,n)).size())return e.keys()[0]}else if(n==zn)break;return function(e){var t="",n=1/0;return e.forEach((function(e,r){for(var i=0,a=0,o=(r=c(r)).next();!o.done;o=r.next())i+=o.value.bandwidth||0,++a;(i/=a)<n&&(t=e,n=i)})),t}(e)}(t,i);e.variants=e.variants.filter((function(e){return pn(e)==o}))}function fn(e,t){var n=0,r=new dn;return e.forEach((function(e,i){for(var a=0,o=0,s=c(i),u=s.next();!u.done;u=s.next())(u=u.value).decodingInfos.length&&(a+=u.decodingInfos[0][t]?1:0,o++);(a/=o)>n?(r.g={},r.push(e,i),n=a):a==n&&r.push(e,i)})),r}function pn(e){var t="";e.video&&(t=Ht(e.video.codecs));var n="";return e.audio&&(n=Ht(e.audio.codecs)),t+"-"+n}function gn(e,t,n){function r(e,t,n){return e>=t&&e<=n}var i=e.video;if(0!=e.disabledUntilTime){if(e.disabledUntilTime>Date.now()/1e3)return!1;e.disabledUntilTime=0}return!(i&&i.width&&i.height&&(!r(i.width,t.minWidth,Math.min(t.maxWidth,n.width))||!r(i.height,t.minHeight,Math.min(t.maxHeight,n.height))||!r(i.width*i.height,t.minPixels,t.maxPixels))||e&&e.video&&e.video.frameRate&&!r(e.video.frameRate,t.minFrameRate,t.maxFrameRate)||!r(e.bandwidth,t.minBandwidth,t.maxBandwidth))}function mn(e,t,n){for(var r=!1,i=(e=c(e)).next();!i.done;i=e.next()){var a=(i=i.value).allowedByApplication;i.allowedByApplication=gn(i,t,n),a!=i.allowedByApplication&&(r=!0)}return r}function vn(e,t){return L((function(n){return 1==n.g?w(n,yn(t,0<t.offlineSessionIds.length),2):(An(e,t),function(e){e.textStreams=e.textStreams.filter((function(e){return Yt(Vt(e.mimeType,e.codecs))}))}(t),w(n,function(e){var t,n,r,i,a,o,s;return L((function(u){switch(u.g){case 1:t=[],n=c(e.imageStreams),r=n.next();case 2:if(r.done){u.A(4);break}if(i=r.value,a=i.mimeType,Gn.has(a)){u.A(5);break}if(!(o=Vn.get(a))){Gn.set(a,!1),u.A(5);break}return w(u,function(e){return new Promise((function(t){var n=new Image;n.src=e,"decode"in n?n.decode().then((function(){t(!0)})).catch((function(){t(!1)})):n.onload=n.onerror=function(){t(2===n.height)}}))}(o),7);case 7:s=u.h,Gn.set(a,s);case 5:Gn.get(a)&&t.push(i),r=n.next(),u.A(2);break;case 4:e.imageStreams=t,T(u)}}))}(t),0))}))}function yn(e,t){return L((function(n){if(1==n.g)return w(n,bn(e.variants,t,!1),2);e.variants=e.variants.filter((function(e){var t=e.video;if(t){var n=Tn(t.codecs);if(t.codecs.includes(",")){var r=t.codecs.split(",");n=Tn(n=Ze("video",r)),r=wn(r=Ze("audio",r));var i=Kt(t.mimeType,r,"audio");if(!Z(i))return!1;n=[n,r].join()}if(!Z(r=Kt(t.mimeType,n,"video")))return!1;t.codecs=n}if(n=e.audio){if(r=wn(n.codecs),!Z(i=Kt(n.mimeType,r,"audio")))return!1;n.codecs=r}return ct()&&t&&(t.width&&1920<t.width||t.height&&1080<t.height)&&(t.codecs.includes("avc1.")||t.codecs.includes("avc3."))?(On(e),!1):((t=e.decodingInfos.some((function(e){return e.supported})))||On(e),t)})),T(n)}))}function bn(e,t,n){var r,i,a,o,s,u,l,d,h,f;return L((function(p){if(e.some((function(e){return e.decodingInfos.length})))return p.return();for(r=navigator.mediaCapabilities,i=[],a=function(e,t){var n;return L((function(i){return 1==i.g?(A(i,2),w(i,r.decodingInfo(t),4)):2!=i.g?(n=i.h,e.decodingInfos.push(n),E(i,0)):(I(i),JSON.stringify(t),void T(i))}))},o=c(e),s=o.next();!s.done;s=o.next())for(u=s.value,l=xn(u,t,n),d=c(l),h=d.next();!h.done;h=d.next())f=h.value,i.push(a(u,f));return w(p,Promise.all(i),0)}))}function xn(e,t,n){var r=e.audio,i=e.video;if(n={type:n?"file":"media-source"},i){var a=i.codecs;if(i.codecs.includes(",")){var o=i.codecs.split(",");a=Tn(a=Ze("video",o)),o=Ze("audio",o),o=Kt(i.mimeType,o,"audio"),n.audio={contentType:o,channels:2,bitrate:e.bandwidth||1,samplerate:1,spatialRendering:!1}}if(a=Tn(a),a=Kt(i.mimeType,a,"video"),n.video={contentType:a,width:i.width||64,height:i.height||64,bitrate:i.bandwidth||e.bandwidth||1,framerate:i.frameRate||1},i.hdr)switch(i.hdr){case"SDR":n.video.transferFunction="srgb";break;case"PQ":n.video.transferFunction="pq";break;case"HLG":n.video.transferFunction="hlg"}}if(r&&(a=wn(r.codecs),a=Kt(r.mimeType,a,"audio"),n.audio={contentType:a,channels:r.channelsCount||2,bitrate:r.bandwidth||e.bandwidth||1,samplerate:r.audioSamplingRate||1,spatialRendering:r.spatialAudio}),!(o=(e.video?e.video.drmInfos:[]).concat(e.audio?e.audio.drmInfos:[])).length)return[n];e=[],a=new Map;for(var s=(o=c(o)).next();!s.done;s=o.next()){var u=s.value;a.get(u.keySystem)||a.set(u.keySystem,[]),a.get(u.keySystem).push(u)}o=t?"required":"optional",t=t?["persistent-license"]:["temporary"];for(var l=(u=c(a.keys())).next();!l.done;l=u.next()){var d=l.value;l=Object.assign({},n);var h=a.get(d);for(d={keySystem:d,initDataType:"cenc",persistentState:o,distinctiveIdentifier:"optional",sessionTypes:t},s=(h=c(h)).next();!s.done;s=h.next()){if((s=s.value).initData&&s.initData.length){for(var f=new Set,p=c(s.initData),g=p.next();!g.done;g=p.next())f.add(g.value.initDataType);d.initDataType=s.initData[0].initDataType}s.distinctiveIdentifierRequired&&(d.distinctiveIdentifier="required"),s.persistentStateRequired&&(d.persistentState="required"),s.sessionType&&(d.sessionTypes=[s.sessionType]),r&&(d.audio?d.audio.robustness=d.audio.robustness||s.audioRobustness:d.audio={robustness:s.audioRobustness}),i&&(d.video?d.video.robustness=d.video.robustness||s.videoRobustness:d.video={robustness:s.videoRobustness})}l.keySystemConfiguration=d,e.push(l)}return e}function wn(e){return dt()&&"ac-3"==e.toLowerCase()?"ec-3":e}function Tn(e){if(e.includes("avc1")){var t=e.split(".");if(3==t.length)return e=t.shift()+".",(e+=parseInt(t.shift(),10).toString(16))+("000"+parseInt(t.shift(),10).toString(16)).slice(-4)}else if("vp9"==e)return"vp09.00.41.08";return e}function An(e,t){t.variants=t.variants.filter((function(t){var n=t.audio;return t=t.video,!(n&&e&&e.audio&&!Sn(n,e.audio)||t&&e&&e.video&&!Sn(t,e.video))}))}function Sn(e,t){return e.mimeType==t.mimeType&&e.codecs.split(".")[0]==t.codecs.split(".")[0]}function En(e){var t=e.audio,n=e.video,r=t?t.mimeType:null,i=n?n.mimeType:null,a=t?t.codecs:null,o=n?n.codecs:null,s=[];o&&s.push(o),a&&s.push(a);var u=[];n&&u.push(n.mimeType),t&&u.push(t.mimeType),u=u[0]||null;var l=[];t&&l.push(t.kind),n&&l.push(n.kind),l=l[0]||null;var d=new Set;if(t)for(var h=c(t.roles),f=h.next();!f.done;f=h.next())d.add(f.value);if(n)for(f=(h=c(n.roles)).next();!f.done;f=h.next())d.add(f.value);return e={id:e.id,active:!1,type:"variant",bandwidth:e.bandwidth,language:e.language,label:null,kind:l,width:null,height:null,frameRate:null,pixelAspectRatio:null,hdr:null,mimeType:u,audioMimeType:r,videoMimeType:i,codecs:s.join(", "),audioCodec:a,videoCodec:o,primary:e.primary,roles:Array.from(d),audioRoles:null,forced:!1,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null,originalImageId:null},n&&(e.videoId=n.id,e.originalVideoId=n.originalId,e.width=n.width||null,e.height=n.height||null,e.frameRate=n.frameRate||null,e.pixelAspectRatio=n.pixelAspectRatio||null,e.videoBandwidth=n.bandwidth||null),t&&(e.audioId=t.id,e.originalAudioId=t.originalId,e.channelsCount=t.channelsCount,e.audioSamplingRate=t.audioSamplingRate,e.audioBandwidth=t.bandwidth||null,e.spatialAudio=t.spatialAudio,e.label=t.label,e.audioRoles=t.roles),e}function In(e){return{id:e.id,active:!1,type:tt,bandwidth:0,language:e.language,label:e.label,kind:e.kind||null,width:null,height:null,frameRate:null,pixelAspectRatio:null,hdr:null,mimeType:e.mimeType,audioMimeType:null,videoMimeType:null,codecs:e.codecs||null,audioCodec:null,videoCodec:null,primary:e.primary,roles:e.roles,audioRoles:null,forced:e.forced,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:e.originalId,originalImageId:null}}function kn(e){var t=e.width||null,n=e.height||null,r=null;e.segmentIndex&&(r=e.segmentIndex.get(0));var i=e.tilesLayout;return r&&(i=r.tilesLayout||i),i&&null!=t&&(t/=Number(i.split("x")[0])),i&&null!=n&&(n/=Number(i.split("x")[1])),{id:e.id,active:!1,type:"image",bandwidth:e.bandwidth||0,language:"",label:null,kind:null,width:t,height:n,frameRate:null,pixelAspectRatio:null,hdr:null,mimeType:e.mimeType,audioMimeType:null,videoMimeType:null,codecs:null,audioCodec:null,videoCodec:null,primary:!1,roles:[],audioRoles:null,forced:!1,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:i||null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null,originalImageId:e.originalId}}function Cn(e){return e.__shaka_id||(e.__shaka_id=Bn++),e.__shaka_id}function _n(e){var t=Rn(e);return t.active="disabled"!=e.mode,t.type="text",t.originalTextId=e.id,"captions"==e.kind&&(t.mimeType="application/cea-608"),e.kind&&(t.roles=[e.kind]),"forced"==e.kind&&(t.forced=!0),t}function Mn(e){var t=Rn(e);return t.active=e.enabled,t.type="variant",t.originalAudioId=e.id,"main"==e.kind&&(t.primary=!0),e.kind&&(t.roles=[e.kind],t.audioRoles=[e.kind],t.label=e.label),t}function Rn(e){return{id:Cn(e),active:!1,type:"",bandwidth:0,language:an(e.language),label:e.label,kind:e.kind,width:null,height:null,frameRate:null,pixelAspectRatio:null,hdr:null,mimeType:null,audioMimeType:null,videoMimeType:null,codecs:null,audioCodec:null,videoCodec:null,primary:!1,roles:[],forced:!1,audioRoles:null,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null,originalImageId:null}}function Nn(e){return e.allowedByApplication&&e.allowedByKeySystem}function Ln(e,t){for(var n=e.filter((function(e){return e.audio&&e.audio.channelsCount})),r=new Map,i=(n=c(n)).next();!i.done;i=n.next()){var a=(i=i.value).audio.channelsCount;r.has(a)||r.set(a,[]),r.get(a).push(i)}return 0==(n=Array.from(r.keys())).length?e:(e=n.filter((function(e){return e<=t}))).length?r.get(Math.max.apply(Math,d(e))):r.get(Math.min.apply(Math,d(n)))}function Dn(e,t,n,r){var i=e,a=e.filter((function(e){return e.primary}));a.length&&(i=a);var o=i.length?i[0].language:"";if(i=i.filter((function(e){return e.language==o})),t){var s=ln(an(t),e.map((function(e){return e.language})));s&&(i=e.filter((function(e){return an(e.language)==s})))}if(i=i.filter((function(e){return e.forced==r})),n){if((e=Pn(i,n)).length)return e}else if(e=i.filter((function(e){return 0==e.roles.length})),e.length)return e;return e=i.map((function(e){return e.roles})).reduce(qe,[]),e.length?Pn(i,e[0]):i}function Pn(e,t){return e.filter((function(e){return e.roles.includes(t)}))}function On(e){var t=[];return e.audio&&t.push(Un(e.audio)),e.video&&t.push(Un(e.video)),t.join(", ")}function Un(e){return"audio"==e.type?"type=audio codecs="+e.codecs+" bandwidth="+e.bandwidth+" channelsCount="+e.channelsCount+" audioSamplingRate="+e.audioSamplingRate:"video"==e.type?"type=video codecs="+e.codecs+" bandwidth="+e.bandwidth+" frameRate="+e.frameRate+" width="+e.width+" height="+e.height:"unexpected stream type"}(i=dn.prototype).push=function(e,t){this.g.hasOwnProperty(e)?this.g[e].push(t):this.g[e]=[t]},i.get=function(e){return(e=this.g[e])?e.slice():null},i.remove=function(e,t){e in this.g&&(this.g[e]=this.g[e].filter((function(e){return e!=t})),0==this.g[e].length&&delete this.g[e])},i.forEach=function(e){for(var t in this.g)e(t,this.g[t])},i.size=function(){return Object.keys(this.g).length},i.keys=function(){return Object.keys(this.g)};var Bn=0,jn="smooth",Fn="powerEfficient",zn="bandwidth",Gn=(new Map).set("image/svg+xml",!0).set("image/png",!0).set("image/jpeg",!0).set("image/jpg",!0),Vn=(new Map).set("image/webp","data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA").set("image/avif","data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A=");function Kn(){var e=this;this.l=null,this.o=!1,this.i=new K,navigator.connection&&navigator.connection.addEventListener("change",(function(){if(e.g.useNetworkInformation&&e.o){e.i=new K,e.g&&e.i.configure(e.g.advanced);var t=e.chooseVariant();t&&e.l(t)}})),this.m=[],this.u=1,this.B=!1,this.h=this.j=this.g=this.s=null,this.D=new st((function(){if(e.g.restrictToElementSize){var t=e.chooseVariant();t&&e.l(t)}}))}function Hn(e){var t=e.g.defaultBandwidthEstimate;return navigator.connection&&navigator.connection.downlink&&e.g.useNetworkInformation&&(t=1e6*navigator.connection.downlink),t}function Wn(e,t,n,r){return e&&(t=t.filter((function(t){return gn(t,e,{width:r,height:n})}))),t.sort((function(e,t){return e.bandwidth-t.bandwidth}))}(i=Kn.prototype).stop=function(){this.l=null,this.o=!1,this.m=[],this.u=1,this.j=this.s=null,this.h&&(this.h.disconnect(),this.h=null),this.D.stop()},i.init=function(e){this.l=e},i.chooseVariant=function(){var t=1/0,n=1/0;this.g.restrictToScreenSize&&(n=this.g.ignoreDevicePixelRatio?1:e.devicePixelRatio,t=e.screen.height*n,n*=e.screen.width),this.h&&this.g.restrictToElementSize&&(n=this.g.ignoreDevicePixelRatio?1:e.devicePixelRatio,t=this.j.clientWidth*n,n*=this.j.clientHeight),t=Wn(this.g.restrictions,this.m,t,n),n=this.i.getBandwidthEstimate(Hn(this)),this.m.length&&!t.length&&(t=[(t=Wn(null,this.m,1/0,1/0))[0]]);for(var r=t[0]||null,i=0;i<t.length;i++){for(var a=t[i],o=isNaN(this.u)?1:Math.abs(this.u),s=o*a.bandwidth/this.g.bandwidthDowngradeTarget,u={bandwidth:1/0},l=i+1;l<t.length;l++)if(a.bandwidth!=t[l].bandwidth){u=t[l];break}o=o*u.bandwidth/this.g.bandwidthUpgradeTarget,n>=s&&n<=o&&r.bandwidth!=a.bandwidth&&(r=a)}return this.s=Date.now(),r},i.enable=function(){this.o=!0},i.disable=function(){this.o=!1},i.segmentDownloaded=function(e,t){if(this.i.sample(e,t),null!=this.s&&this.o)e:{if(this.B){if(Date.now()-this.s<1e3*this.g.switchInterval)break e}else{if(!((e=this.i).g>=e.i))break e;this.B=!0}e=this.chooseVariant(),this.i.getBandwidthEstimate(Hn(this)),e&&this.l(e)}},i.getBandwidthEstimate=function(){return this.i.getBandwidthEstimate(Hn(this))},i.setVariants=function(e){this.m=e},i.playbackRateChanged=function(e){this.u=e},i.setMediaElement=function(t){var n=this;this.j=t,this.h&&(this.h.disconnect(),this.h=null),this.j&&"ResizeObserver"in e&&(this.h=new ResizeObserver((function(){n.D.N(Xn)})),this.h.observe(this.j))},i.configure=function(e){this.g=e,this.i&&this.g&&this.i.configure(this.g.advanced)},z("shaka.abr.SimpleAbrManager",Kn),Kn.prototype.configure=Kn.prototype.configure,Kn.prototype.setMediaElement=Kn.prototype.setMediaElement,Kn.prototype.playbackRateChanged=Kn.prototype.playbackRateChanged,Kn.prototype.setVariants=Kn.prototype.setVariants,Kn.prototype.getBandwidthEstimate=Kn.prototype.getBandwidthEstimate,Kn.prototype.segmentDownloaded=Kn.prototype.segmentDownloaded,Kn.prototype.disable=Kn.prototype.disable,Kn.prototype.enable=Kn.prototype.enable,Kn.prototype.chooseVariant=Kn.prototype.chooseVariant,Kn.prototype.init=Kn.prototype.init,Kn.prototype.stop=Kn.prototype.stop;var Xn=1;function qn(e,t){this.g=e,this.h=t}function Yn(e,t){var n=new qn(5,0),r=Jn,i=r.g,a=n.h-i.h;(0<(n.g-i.g||a)?r.i:r.h)(r.g,n,e,t)}function $n(e,t,n,r){X([n,"has been deprecated and will be removed in",t,". We are currently at version",e,". Additional information:",r].join(" "))}function Qn(e,t,n,r){W([n,"has been deprecated and has been removed in",t,". We are now at version",e,". Additional information:",r].join(""))}qn.prototype.toString=function(){return"v"+this.g+"."+this.h};var Jn=null;function Zn(e,t){for(this.h=e,this.g=new Set([e]),t=(e=c(t=t||[])).next();!t.done;t=e.next())this.add(t.value)}function er(e,t){var n;if(!(n=!!e.audio!=!!t.audio||!!e.video!=!!t.video||e.language!=t.language)&&(n=e.audio&&t.audio)){n=e.audio;var r=t.audio;n=!((!(!n.channelsCount||!r.channelsCount||2<n.channelsCount||2<r.channelsCount)||n.channelsCount==r.channelsCount)&&tr(n,r)&&nr(n.roles,r.roles))}return!n&&(n=e.video&&t.video)&&(n=!(tr(e=e.video,t=t.video)&&nr(e.roles,t.roles))),!n}function tr(e,t){if(e.mimeType!=t.mimeType)return!1;if(e=e.codecs.split(",").map((function(e){return Xt(e)[0]})),t=t.codecs.split(",").map((function(e){return Xt(e)[0]})),e.length!=t.length)return!1;e.sort(),t.sort();for(var n=0;n<e.length;n++)if(e[n]!=t[n])return!1;return!0}function nr(e,t){if(e=new Set(e),t=new Set(t),e.delete("main"),t.delete("main"),e.size!=t.size)return!1;for(var n=(e=c(e)).next();!n.done;n=e.next())if(!t.has(n.value))return!1;return!0}function rr(e){this.g=e,this.h=new ir(e.language,"",e.audio&&e.audio.channelsCount?e.audio.channelsCount:0,"")}function ir(e,t,n,r){this.i=e,this.j=t,this.g=n,this.h=void 0===r?"":r}function ar(){this.g=ur,this.h=(new Map).set(ur,2).set(sr,1)}function or(e,t,n){e.h.set(ur,n).set(sr,t)}z("shaka.config.AutoShowText",{NEVER:0,ALWAYS:1,IF_PREFERRED_TEXT_LANGUAGE:2,IF_SUBTITLES_MAY_BE_NEEDED:3}),Zn.prototype.add=function(e){return!!er(this.h,e)&&(this.g.add(e),!0)},Zn.prototype.values=function(){return this.g.values()},rr.prototype.create=function(e){var t=this,n=e.filter((function(e){return er(t.g,e)}));return n.length?new Zn(n[0],n):this.h.create(e)},ir.prototype.create=function(e){var t=[];t=function(e,t){t=an(t);var n=ln(t,e.map((function(e){return un(e)})));return n?e.filter((function(e){return n==un(e)})):[]}(e,this.i);var n=e.filter((function(e){return e.primary}));for(e=function(e,t){return e.filter((function(e){return!!e.audio&&(t?e.audio.roles.includes(t):0==e.audio.roles.length)}))}(t=t.length?t:n.length?n:e,this.j),e.length&&(t=e),this.g&&((e=Ln(t,this.g)).length&&(t=e)),this.h&&(e=function(e,t){return e.filter((function(e){return!!e.audio&&e.audio.label.toLowerCase()==t.toLowerCase()}))}(t,this.h),e.length&&(t=e)),e=new Zn(t[0]),n=(t=c(t)).next();!n.done;n=t.next())n=n.value,er(e.h,n)&&e.add(n);return e};var sr=0,ur=1;function lr(e,t){var n={maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:3e4,stallTimeout:5e3,connectionTimeout:1e4};this.l=null==e.maxAttempts?n.maxAttempts:e.maxAttempts,this.j=null==e.baseDelay?n.baseDelay:e.baseDelay,this.o=null==e.fuzzFactor?n.fuzzFactor:e.fuzzFactor,this.m=null==e.backoffFactor?n.backoffFactor:e.backoffFactor,this.g=0,this.h=this.j,(this.i=void 0!==t&&t)&&(this.g=1)}function cr(e){var t,n;return L((function(r){if(1==r.g){if(e.g>=e.l){if(!e.i)throw new Ne(2,7,1010);e.g=1,e.h=e.j}return t=e.g,e.g++,0==t?r.return():(n=e.h*(1+(2*Math.random()-1)*e.o),w(r,new Promise((function(e){new st(e).N(n/1e3)})),2))}e.h*=e.m,T(r)}))}function dr(e,t){this.promise=e,this.i=t,this.g=!1}function hr(e){return new dr(Promise.reject(e),(function(){return Promise.resolve()}))}function fr(){var e=Promise.reject(new Ne(2,7,7001));return e.catch((function(){})),new dr(e,(function(){return Promise.resolve()}))}function pr(e){return new dr(Promise.resolve(e),(function(){return Promise.resolve()}))}function gr(e){return new dr(e,(function(){return e.catch((function(){}))}))}function mr(e){return new dr(Promise.all(e.map((function(e){return e.promise}))),(function(){return Promise.all(e.map((function(e){return e.abort()})))}))}function vr(t,n){if(n)if(n instanceof Map)for(var r=c(n.keys()),i=r.next();!i.done;i=r.next())i=i.value,Object.defineProperty(this,i,{value:n.get(i),writable:!0,enumerable:!0});else for(r in n)Object.defineProperty(this,r,{value:n[r],writable:!0,enumerable:!0});this.defaultPrevented=this.cancelable=this.bubbles=!1,this.timeStamp=e.performance&&e.performance.now?e.performance.now():Date.now(),this.type=t,this.isTrusted=!1,this.target=this.currentTarget=null,this.g=!1}function yr(e){var t,n=new vr(e.type);for(t in e)Object.defineProperty(n,t,{value:e[t],writable:!0,enumerable:!0});return n}dr.prototype.abort=function(){return this.g=!0,this.i()},dr.prototype.finally=function(e){return this.promise.then((function(){return e(!0)}),(function(){return e(!1)})),this},dr.prototype.Y=function(e,t){function n(n){return function(s){if(i.g&&n)a.reject(o);else{var u=n?e:t;u?r=function(e,t,n){try{var r=e(t);return r&&r.promise&&r.abort?(n.resolve(r.promise),function(){return r.abort()}):(n.resolve(r),function(){return Promise.resolve(r).then((function(){}),(function(){}))})}catch(i){return n.reject(i),function(){return Promise.resolve()}}}(u,s,a):(n?a.resolve:a.reject)(s)}}}function r(){return a.reject(o),i.abort()}var i=this,a=new it,o=new Ne(2,7,7001);return this.promise.then(n(!0),n(!1)),new dr(a,(function(){return r()}))},z("shaka.util.AbortableOperation",dr),dr.prototype.chain=dr.prototype.Y,dr.prototype.finally=dr.prototype.finally,dr.all=mr,dr.prototype.abort=dr.prototype.abort,dr.notAbortable=gr,dr.completed=pr,dr.aborted=fr,dr.failed=hr,vr.prototype.preventDefault=function(){this.cancelable&&(this.defaultPrevented=!0)},vr.prototype.stopImmediatePropagation=function(){this.g=!0},vr.prototype.stopPropagation=function(){},z("shaka.util.FakeEvent",vr);var br={Ig:"abrstatuschanged",Jg:"adaptation",Kg:"buffering",Mg:"downloadfailed",Ng:"downloadheadersreceived",Og:"drmsessionupdate",Qg:"emsg",dh:"prft",Error:"error",Rg:"expirationupdated",Sg:"gapjumped",Vg:"loaded",Wg:"loading",Yg:"manifestparsed",Zg:"mediaqualitychanged",Metadata:"metadata",ah:"onstatechange",bh:"onstateidle",eh:"ratechange",gh:"segmentappended",hh:"sessiondata",ih:"stalldetected",jh:"streaming",kh:"textchanged",lh:"texttrackvisibility",mh:"timelineregionadded",nh:"timelineregionenter",oh:"timelineregionexit",ph:"trackschanged",rh:"unloading",sh:"variantchanged"};function xr(){this.ca=new dn,this.Wc=this}function wr(e){var t=new Set;return function e(n){switch(typeof n){case"undefined":case"boolean":case"number":case"string":case"symbol":case"function":return n;default:if(!n||n.buffer&&n.buffer.constructor==ArrayBuffer)return n;if(t.has(n))return null;var r=n.constructor==Array;if(n.constructor!=Object&&!r)return null;t.add(n);var i,a=r?[]:{};for(i in n)a[i]=e(n[i]);return r&&(a.length=n.length),a}}(e)}function Tr(e){var t,n={};for(t in e)n[t]=e[t];return n}function Ar(){this.g=[]}function Sr(e,t){e.g.push(t.finally((function(){ne(e.g,t)})))}function Er(e,t,n){xr.call(this),this.i=!1,this.m=new Ar,this.g=new Set,this.h=new Set,this.l=e||null,this.j=t||null,this.s=n||null,this.o=!1}function Ir(e,t,n,r){n=n||Nr;var i=Lr[e];(!i||n>=i.priority)&&(Lr[e]={priority:n,jg:t,kg:void 0!==r&&r})}function kr(e,t,n){return{uris:e,method:"GET",body:null,headers:{},allowCrossSiteCredentials:!1,retryParameters:t,licenseRequestType:null,sessionId:null,drmInfo:null,initData:null,initDataType:null,streamDataCallback:void 0===n?null:n}}function Cr(e,t,n,r,i,a,o){e.o&&(n.uris[i]=n.uris[i].replace("http://","https://"));var s=new De(n.uris[i]),u=s.Ea,l=!1;u||(Pe(s,u=(u=location.protocol).slice(0,-1)),n.uris[i]=s.toString()),u=u.toLowerCase();var c=(u=Lr[u])?u.jg:null;if(!c)return hr(new Ne(2,1,1e3,s));var d,h=u.kg,f=null,p=null,g=!1,m=!1;return gr(cr(r)).Y((function(){if(e.i)return fr();d=Date.now();var r=c(n.uris[i],n,t,(function(n,r,i){f&&f.stop(),p&&p.N(s/1e3),e.l&&t==Rr&&(e.l(n,r),l=!0,o.g=i)}),(function(r){e.j&&e.j(r,n,t),m=!0}));if(!h)return r;var a=n.retryParameters.connectionTimeout;a&&(f=new st((function(){g=!0,r.abort()}))).N(a/1e3);var s=n.retryParameters.stallTimeout;return s&&(p=new st((function(){g=!0,r.abort()}))),r})).Y((function(r){f&&f.stop(),p&&p.stop(),null==r.timeMs&&(r.timeMs=Date.now()-d);var i={response:r,Yf:l};return!m&&e.j&&e.j(r.headers,n,t),i}),(function(s){if(f&&f.stop(),p&&p.stop(),e.s){var u=null,l=0;s instanceof Ne&&(u=s,1001==s.code&&(l=s.data[1])),e.s(n,u,l,g)}if(e.i)return fr();if(g&&(s=new Ne(1,1,1003,n.uris[i],t)),s instanceof Ne){if(7001==s.code)throw s;if(1010==s.code)throw a;if(1==s.severity)return u=new vr("retry",u=(new Map).set("error",s)),e.dispatchEvent(u),i=(i+1)%n.uris.length,Cr(e,t,n,r,i,s,o)}throw s}))}function _r(){this.g=0}function Mr(e,t,n){dr.call(this,e,t),this.h=n}xr.prototype.addEventListener=function(e,t){this.ca&&this.ca.push(e,t)},xr.prototype.removeEventListener=function(e,t){this.ca&&this.ca.remove(e,t)},xr.prototype.dispatchEvent=function(e){if(!this.ca)return!0;var t=this.ca.get(e.type)||[],n=this.ca.get("All");for(n&&(t=t.concat(n)),n=(t=c(t)).next();!n.done;n=t.next()){n=n.value,e.target=this.Wc,e.currentTarget=this.Wc;try{n.handleEvent?n.handleEvent(e):n.call(this,e)}catch(r){}if(e.g)break}return e.defaultPrevented},xr.prototype.release=function(){this.ca=null},Ar.prototype.destroy=function(){for(var e=[],t=c(this.g),n=t.next();!n.done;n=t.next())(n=n.value).promise.catch((function(){})),e.push(n.abort());return this.g=[],Promise.all(e)},v(Er,xr),(i=Er.prototype).je=function(e){this.o=e},i.lg=function(e){this.g.add(e)},i.Bg=function(e){this.g.delete(e)},i.rf=function(){this.g.clear()},i.mg=function(e){this.h.add(e)},i.Cg=function(e){this.h.delete(e)},i.tf=function(){this.h.clear()},i.destroy=function(){return this.i=!0,this.g.clear(),this.h.clear(),xr.prototype.release.call(this),this.m.destroy()},i.request=function(e,t){var n=this,r=new _r;if(this.i){var i=Promise.reject(new Ne(2,7,7001));return i.catch((function(){})),new Mr(i,(function(){return Promise.resolve()}),r)}t.method=t.method||"GET",t.headers=t.headers||{},t.retryParameters=t.retryParameters?wr(t.retryParameters):{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:3e4,stallTimeout:5e3,connectionTimeout:1e4},t.uris=wr(t.uris),i=function(e,t,n){for(var r=pr(void 0),i={},a=(e=c(e.g)).next();!a.done;i={sd:i.sd},a=e.next())i.sd=a.value,r=r.Y(function(e){return function(){return n.body&&(n.body=Ce(n.body)),e.sd(t,n)}}(i));return r.Y(void 0,(function(e){if(e instanceof Ne&&7001==e.code)throw e;throw new Ne(2,1,1006,e)}))}(this,e,t);var a=i.Y((function(){return Cr(n,e,t,new lr(t.retryParameters,!1),0,null,r)})),o=a.Y((function(t){return function(e,t,n){for(var r=pr(void 0),i={},a=(e=c(e.h)).next();!a.done;i={td:i.td},a=e.next())i.td=a.value,r=r.Y(function(e){return function(){var r=n.response;return r.data&&(r.data=Ce(r.data)),e.td(t,r)}}(i));return r.Y((function(){return n}),(function(e){var t=2;if(e instanceof Ne){if(7001==e.code)throw e;t=e.severity}throw new Ne(t,1,1007,e)}))}(n,e,t)})),s=Date.now(),u=0;i.promise.then((function(){u=Date.now()-s}),(function(){}));var l=0;a.promise.then((function(){l=Date.now()}),(function(){}));var d=o.Y((function(t){var r=Date.now()-l,i=t.response;return i.timeMs+=u,i.timeMs+=r,t.Yf||!n.l||i.fromCache||e!=Rr||n.l(i.timeMs,i.data.byteLength),i}),(function(e){throw e&&(e.severity=2),e}));return i=new Mr(d.promise,(function(){return d.abort()}),r),Sr(this.m,i),i},z("shaka.net.NetworkingEngine",Er),Er.prototype.request=Er.prototype.request,Er.prototype.destroy=Er.prototype.destroy,Er.makeRequest=kr,Er.defaultRetryParameters=function(){return{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:3e4,stallTimeout:5e3,connectionTimeout:1e4}},Er.prototype.clearAllResponseFilters=Er.prototype.tf,Er.prototype.unregisterResponseFilter=Er.prototype.Cg,Er.prototype.registerResponseFilter=Er.prototype.mg,Er.prototype.clearAllRequestFilters=Er.prototype.rf,Er.prototype.unregisterRequestFilter=Er.prototype.Bg,Er.prototype.registerRequestFilter=Er.prototype.lg,Er.unregisterScheme=function(e){delete Lr[e]},Er.registerScheme=Ir,Er.prototype.setForceHTTPS=Er.prototype.je,Er.NumBytesRemainingClass=_r,v(Mr,dr),Er.PendingRequest=Mr;var Rr=1;Er.RequestType={MANIFEST:0,SEGMENT:Rr,LICENSE:2,APP:3,TIMING:4,SERVER_CERTIFICATE:5,KEY:6};var Nr=3;Er.PluginPriority={FALLBACK:1,PREFERRED:2,APPLICATION:Nr};var Lr={};function Dr(e){this.g=!1,this.h=new it,this.i=e}function Pr(e,t){if(e.g){if(t instanceof Ne&&7003==t.code)throw t;throw new Ne(2,7,7003,t)}}function Or(){this.g=new dn}function Ur(e,t,n,r){this.target=e,this.type=t,this.listener=n,this.g=function(e,t){if(null==t)return!1;if("boolean"==typeof t)return t;var n=new Set(["passive","capture"]);return Object.keys(t).filter((function(e){return!n.has(e)})),function(e){var t=Br;if(null==t){t=!1;try{var n={},r={get:function(){return t=!0,!1}};Object.defineProperty(n,"passive",r),Object.defineProperty(n,"capture",r),r=function(){},e.addEventListener("test",r,n),e.removeEventListener("test",r,n)}catch(i){t=!1}Br=t}return t||!1}(e)?t:t.capture||!1}(e,r),this.target.addEventListener(t,n,this.g)}Dr.prototype.destroy=function(){var e=this;return this.g?this.h:(this.g=!0,this.i().then((function(){e.h.resolve()}),(function(){e.h.resolve()})))},(i=Or.prototype).release=function(){this.nb(),this.g=null},i.C=function(e,t,n,r){this.g&&(e=new Ur(e,t,n,r),this.g.push(t,e))},i.ma=function(e,t,n,r){var i=this;this.C(e,t,(function r(a){i.zc(e,t,r),n(a)}),r)},i.zc=function(e,t,n){if(this.g)for(var r=this.g.get(t)||[],i=(r=c(r)).next();!i.done;i=r.next())(i=i.value).target!=e||n!=i.listener&&n||(i.zc(),this.g.remove(t,i))},i.nb=function(){if(this.g){var e,t=this.g,n=[];for(e in t.g)n.push.apply(n,d(t.g[e]));for(n=(t=c(n)).next();!n.done;n=t.next())n.value.zc();this.g.g={}}},z("shaka.util.EventManager",Or),Or.prototype.removeAll=Or.prototype.nb,Or.prototype.unlisten=Or.prototype.zc,Or.prototype.listenOnce=Or.prototype.ma,Or.prototype.listen=Or.prototype.C,Or.prototype.release=Or.prototype.release,Ur.prototype.zc=function(){this.target.removeEventListener(this.type,this.listener,this.g),this.listener=this.target=null,this.g=!1};var Br=void 0;function jr(e,t){for(var n=[],r=(e=c(e)).next();!r.done;r=e.next())n.push(t(r.value));return n}function Fr(e){for(var t=new Map,n=c(Object.keys(e)),r=n.next();!r.done;r=n.next())r=r.value,t.set(r,e[r]);return t}function zr(e){var t={};return e.forEach((function(e,n){t[n]=e})),t}function Gr(e,t){if(!e&&!t)return!0;if(e&&!t||t&&!e)return!1;if(e.size!=t.size)return!1;for(var n=(e=c(e)).next();!n.done;n=e.next()){var r=c(n.value);if(n=r.next().value,r=r.next().value,!t.has(n))return!1;if((n=t.get(n))!=r||null==n)return!1}return!0}function Vr(e,t){this.S=Me(e),this.h=t==Hr,this.g=0}function Kr(){return new Ne(2,3,3e3)}(i=Vr.prototype).ga=function(){return this.g<this.S.byteLength},i.Z=function(){return this.g},i.Gf=function(){return this.S.byteLength},i.Ra=function(){try{var e=this.S.getUint8(this.g);return this.g+=1,e}catch(t){throw Kr()}},i.$d=function(){try{var e=this.S.getUint16(this.g,this.h);return this.g+=2,e}catch(t){throw Kr()}},i.K=function(){try{var e=this.S.getUint32(this.g,this.h);return this.g+=4,e}catch(t){throw Kr()}},i.Pe=function(){try{var e=this.S.getInt32(this.g,this.h);return this.g+=4,e}catch(t){throw Kr()}},i.$a=function(){try{if(this.h)var e=this.S.getUint32(this.g,!0),t=this.S.getUint32(this.g+4,!0);else t=this.S.getUint32(this.g,!1),e=this.S.getUint32(this.g+4,!1)}catch(n){throw Kr()}if(2097151<t)throw new Ne(2,3,3001);return this.g+=8,t*Math.pow(2,32)+e},i.Za=function(e){if(this.g+e>this.S.byteLength)throw Kr();var t=_e(this.S,this.g,e);return this.g+=e,t},i.skip=function(e){if(this.g+e>this.S.byteLength)throw Kr();this.g+=e},i.sg=function(e){if(this.g<e)throw Kr();this.g-=e},i.seek=function(e){if(0>e||e>this.S.byteLength)throw Kr();this.g=e},i.sc=function(){for(var e=this.g;this.ga()&&0!=this.S.getUint8(this.g);)this.g+=1;return e=_e(this.S,e,this.g-e),this.g+=1,wt(e)},z("shaka.util.DataViewReader",Vr),Vr.prototype.readTerminatedString=Vr.prototype.sc,Vr.prototype.seek=Vr.prototype.seek,Vr.prototype.rewind=Vr.prototype.sg,Vr.prototype.skip=Vr.prototype.skip,Vr.prototype.readBytes=Vr.prototype.Za,Vr.prototype.readUint64=Vr.prototype.$a,Vr.prototype.readInt32=Vr.prototype.Pe,Vr.prototype.readUint32=Vr.prototype.K,Vr.prototype.readUint16=Vr.prototype.$d,Vr.prototype.readUint8=Vr.prototype.Ra,Vr.prototype.getLength=Vr.prototype.Gf,Vr.prototype.getPosition=Vr.prototype.Z,Vr.prototype.hasMoreData=Vr.prototype.ga;var Hr=1;function Wr(){this.i=[],this.h=[],this.g=!1}function Xr(e){for(var t=Zr(e);e.reader.ga()&&!e.parser.g;)e.parser.qc(e.start+t,e.reader,e.partialOkay)}function qr(e){for(var t=Zr(e),n=e.reader.K(),r=0;r<n&&(e.parser.qc(e.start+t,e.reader,e.partialOkay),!e.parser.g);r++);}function Yr(e){var t=Zr(e);for(e.reader.skip(78);e.reader.ga()&&!e.parser.g;)e.parser.qc(e.start+t,e.reader,e.partialOkay)}function $r(e){return function(t){e(t.reader.Za(t.reader.S.byteLength-t.reader.Z()))}}function Qr(e){for(var t=0,n=(e=c(e)).next();!n.done;n=e.next())t=t<<8|n.value.charCodeAt(0);return t}function Jr(e){return String.fromCharCode(e>>24&255,e>>16&255,e>>8&255,255&e)}function Zr(e){return 8+(e.has64BitSize?8:0)+(null!=e.flags?4:0)}Vr.Endianness={BIG_ENDIAN:0,LITTLE_ENDIAN:Hr},(i=Wr.prototype).box=function(e,t){return e=Qr(e),this.i[e]=ei,this.h[e]=t,this},i.P=function(e,t){return e=Qr(e),this.i[e]=ti,this.h[e]=t,this},i.stop=function(){this.g=!0},i.parse=function(e,t,n){for(e=new Vr(e,0),this.g=!1;e.ga()&&!this.g;)this.qc(0,e,t,n)},i.qc=function(e,t,n,r){var i=t.Z();if(r&&i+8>t.S.byteLength)this.g=!0;else{var a=t.K(),o=t.K(),s=Jr(o),u=!1;switch(a){case 0:a=t.S.byteLength-i;break;case 1:if(r&&t.Z()+8>t.S.byteLength)return void(this.g=!0);a=t.$a(),u=!0}var l=this.h[o];if(l){var c=null,d=null;if(this.i[o]==ti){if(r&&t.Z()+4>t.S.byteLength)return void(this.g=!0);c=(d=t.K())>>>24,d&=16777215}o=i+a,n&&o>t.S.byteLength&&(o=t.S.byteLength),r&&o>t.S.byteLength?this.g=!0:(r=o-t.Z(),l({name:s,parser:this,partialOkay:n||!1,version:c,flags:d,reader:t=new Vr(t=0<r?t.Za(r):new Uint8Array(0),0),size:a,start:i+e,has64BitSize:u}))}else t.skip(Math.min(i+a-t.Z(),t.S.byteLength-t.Z()))}},z("shaka.util.Mp4Parser",Wr),Wr.headerSize=Zr,Wr.typeToString=Jr,Wr.allData=$r,Wr.visualSampleEntry=Yr,Wr.sampleDescription=qr,Wr.children=Xr,Wr.prototype.parseNext=Wr.prototype.qc,Wr.prototype.parse=Wr.prototype.parse,Wr.prototype.stop=Wr.prototype.stop,Wr.prototype.fullBox=Wr.prototype.P,Wr.prototype.box=Wr.prototype.box;var ei=0,ti=1;function ni(e){var t=this;this.g=[],this.h=[],this.data=[],(new Wr).box("moov",Xr).box("moof",Xr).P("pssh",(function(e){if(!(1<e.version)){var n=_e(e.reader.S,-12,e.size);if(t.data.push(n),t.g.push(Nt(e.reader.Za(16))),0<e.version){n=e.reader.K();for(var r=0;r<n;r++){var i=Nt(e.reader.Za(16));t.h.push(i)}}}})).parse(e)}function ri(e,t,n,r){var i=e.length,a=t.length+16+i;0<r&&(a+=4+16*n.size);var o=new Uint8Array(a),s=Me(o),u=0;if(s.setUint32(u,a),u+=4,s.setUint32(u,1886614376),u+=4,1>r?s.setUint32(u,0):s.setUint32(u,16777216),u+=4,o.set(t,u),u+=t.length,0<r)for(s.setUint32(u,n.size),u+=4,n=(t=c(n)).next();!n.done;n=t.next())n=Rt(n.value),o.set(n,u),u+=n.length;return s.setUint32(u,i),o.set(e,u+4),o}function ii(e,t){return 1!=(e=oi(e,t)).length?null:e[0]}function ai(e,t,n){return 1!=(e=si(e,t,n)).length?null:e[0]}function oi(e,t){for(var n=[],r=(e=c(e.childNodes)).next();!r.done;r=e.next())(r=r.value)instanceof Element&&r.tagName==t&&n.push(r);return n}function si(e,t,n){for(var r=[],i=(e=c(e.childNodes)).next();!i.done;i=e.next())(i=i.value)instanceof Element&&i.localName==n&&i.namespaceURI==t&&r.push(i);return r}function ui(e,t,n){return e.hasAttributeNS(t,n)?e.getAttributeNS(t,n):null}function li(e,t,n){for(var r=(t=c(t)).next();!r.done;r=t.next())if(r=r.value,e.hasAttributeNS(r,n))return e.getAttributeNS(r,n);return null}function ci(e){return Array.from(e.childNodes).every(di)?e.textContent.trim():null}function di(e){return e.nodeType==Node.TEXT_NODE||e.nodeType==Node.CDATA_SECTION_NODE}function hi(e,t,n,r){r=void 0===r?null:r;var i=null;return null!=(e=e.getAttribute(t))&&(i=n(e)),null==i?r:i}function fi(e){return e?(/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(e)&&(e+="Z"),e=Date.parse(e),isNaN(e)?null:e/1e3):null}function pi(e){return e&&(e=RegExp("^P(?:([0-9]*)Y)?(?:([0-9]*)M)?(?:([0-9]*)D)?(?:T(?:([0-9]*)H)?(?:([0-9]*)M)?(?:([0-9.]*)S)?)?$").exec(e))?(e=31536e3*Number(e[1]||null)+2592e3*Number(e[2]||null)+86400*Number(e[3]||null)+3600*Number(e[4]||null)+60*Number(e[5]||null)+Number(e[6]||null),isFinite(e)?e:null):null}function gi(e){var t=/([0-9]+)-([0-9]+)/.exec(e);return t?(e=Number(t[1]),isFinite(e)?(t=Number(t[2]),isFinite(t)?{start:e,end:t}:null):null):null}function mi(e){return 0==(e=Number(e))%1?e:null}function vi(e){return 0==(e=Number(e))%1&&0<e?e:null}function yi(e){return 0==(e=Number(e))%1&&0<=e?e:null}function bi(e){return e=Number(e),isNaN(e)?null:e}function xi(e){var t,n=(t=e.match(/^(\d+)\/(\d+)$/))?Number(t[1])/Number(t[2]):Number(e);return isNaN(n)?null:n}function wi(e,t){var n=new DOMParser,r=Ai.value()(e);e=null;try{e=n.parseFromString(r,"text/xml")}catch(i){return null}if(!(n=e.documentElement)||n.getElementsByTagName("parsererror").length||n.tagName!=t)return null;for(t=document.createNodeIterator(e,NodeFilter.SHOW_ALL);e=t.nextNode();)if(e instanceof HTMLElement||e instanceof SVGElement)return null;return n}function Ti(e,t){try{return wi(wt(e),t)}catch(n){return null}}var Ai=new at((function(){if("undefined"!=typeof trustedTypes){var e=trustedTypes.createPolicy("shaka-player#xml",{createHTML:function(e){return e}});return function(t){return e.createHTML(t)}}return function(e){return e}}));function Si(e,t){var n=this;t=void 0===t?1:t,this.D=e,this.G=new Set,this.l=this.u=null,this.da=this.W=!1,this.H=0,this.g=null,this.s=new Or,this.i=new Map,this.B=[],this.o=new it,this.h=null,this.m=function(t){n.o.reject(t),e.onError(t)},this.ia=new Map,this.ba=new Map,this.O=new st((function(){return function(e){var t=e.ia,n=e.ba;n.clear(),t.forEach((function(e,t){return n.set(t,e)})),t=Array.from(n.values()),t.length&&t.every((function(e){return"expired"==e}))&&e.m(new Ne(2,6,6014)),e.D.cd(zr(n))}(n)})),this.L=!1,this.J=[],this.M=!1,this.ca=new st((function(){!function(e){e.i.forEach((function(t,n){var r=t.Vd,i=n.expiration;isNaN(i)&&(i=1/0),i!=r&&(e.D.onExpirationUpdated(n.sessionId,i),t.Vd=i)}))}(n)})).Ca(t),this.o.catch((function(){})),this.j=new Dr((function(){return function(e){return L((function(t){switch(t.g){case 1:return e.s.release(),e.s=null,e.o.reject(),e.ca.stop(),e.ca=null,e.O.stop(),e.O=null,w(t,Ui(e),2);case 2:if(!e.l){t.A(3);break}return A(t,4),w(t,e.l.setMediaKeys(null),6);case 6:E(t,5);break;case 4:I(t);case 5:e.l=null;case 3:e.g=null,e.G.clear(),e.u=null,e.B=[],e.h=null,e.m=function(){},e.D=null,e.V=!1,e.F=null,T(t)}}))}(n)})),this.V=!1,this.F=null}function Ei(e,t,n){return e.B=n,e.L=0<n.length,Ii(e,t)}function Ii(t,n){var r,i,a,o,s,u,l,d,h,f,p,g;return L((function(m){if(1==m.g){if(r=function(t){if(t=Fr(t.h.clearKeys),0==t.size)return null;var n=[],r=[];t.forEach((function(e,t){var i=t;22!=i.length&&(i=_t(Rt(t),!1)),22!=(t=e).length&&(t=_t(Rt(e),!1)),e={kty:"oct",kid:i,k:t},n.push(e),r.push(e.kid)})),t=JSON.stringify({keys:n});var i=JSON.stringify({kids:r});return i=[{initData:_e(St(i)),initDataType:"keyids"}],{keySystem:"org.w3.clearkey",licenseServerUri:"data:application/json;base64,"+e.btoa(t),distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,serverCertificateUri:"",sessionType:"",initData:i,keyIds:new Set(r)}}(t))for(i=c(n),a=i.next();!a.done;a=i.next())(o=a.value).video&&(o.video.drmInfos=[r]),o.audio&&(o.audio.drmInfos=[r]);for((s=n.some((function(e){return!!(e.video&&e.video.drmInfos.length||e.audio&&e.audio.drmInfos.length)})))||(u=Fr(t.h.servers),function(e,t){var n=[];for(t.forEach((function(e,t){n.push({keySystem:t,licenseServerUri:e,distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,serverCertificateUri:"",initData:[],keyIds:new Set})})),e=c(e),t=e.next();!t.done;t=e.next())(t=t.value).video&&(t.video.drmInfos=n),t.audio&&(t.audio.drmInfos=n)}(n,u)),l=c(n),a=l.next();!a.done;a=l.next())for(d=a.value,h=ji(d),f=c(h),p=f.next();!p.done;p=f.next())Gi(p.value,Fr(t.h.servers),Fr(t.h.advanced||{}),t.h.keySystemsMapping);return w(m,bn(n,t.L,t.V),2)}return s||Object.keys(t.h.servers).length?(g=Li(t,void 0,n),m.return(s?g:g.catch((function(){})))):(t.W=!0,m.return(Promise.resolve()))}))}function ki(e){var t;return L((function(n){switch(n.g){case 1:if(e.l.mediaKeys)return n.return();if(!e.F){n.A(2);break}return w(n,e.F,3);case 3:return Pr(e.j),n.return();case 2:return A(n,4),e.F=e.l.setMediaKeys(e.u),w(n,e.F,6);case 6:E(n,5);break;case 4:t=I(n),e.m(new Ne(2,6,6003,t.message));case 5:Pr(e.j),T(n)}}))}function Ci(e){var t,n;return L((function(r){switch(r.g){case 1:if(!e.u||!e.g)return r.return();if(!e.g.serverCertificateUri||e.g.serverCertificate&&e.g.serverCertificate.length){r.A(2);break}return t=kr([e.g.serverCertificateUri],e.h.retryParameters),A(r,3),w(r,e.D.kb.request(5,t).promise,5);case 5:n=r.h,e.g.serverCertificate=_e(n.data),E(r,4);break;case 3:throw new Ne(2,6,6017,I(r));case 4:if(e.j.g)return r.return();case 2:return e.g.serverCertificate&&e.g.serverCertificate.length?(A(r,6),w(r,e.u.setServerCertificate(e.g.serverCertificate),8)):r.return();case 8:E(r,0);break;case 6:throw new Ne(2,6,6004,I(r).message)}}))}function _i(e){for(var t=(e.g?e.g.initData:[])||[],n=c(t),r=n.next();!r.done;r=n.next())Mi(e,(r=r.value).initDataType,r.initData);for(r=(n=c(e.B)).next();!r.done;r=n.next())Di(e,r.value);return t.length||e.B.length||e.o.resolve(),e.o}function Mi(e,t,n){if(n.length){for(var r=e.i.values(),i=(r=c(r)).next();!i.done;i=r.next())if(Ie(n,i.value.initData)&&!mt("Tizen 2"))return;0<e.i.size&&Fi(e)&&(e.o.resolve(),e.o=new it,e.o.catch((function(){}))),function(e,t,n,r){try{var i=e.u.createSession(r)}catch(a){return void e.m(new Ne(2,6,6005,a.message))}e.s.C(i,"message",(function(t){e.l&&e.h.delayLicenseRequestUntilPlayed&&e.l.paused&&!e.M?e.J.push(t):Pi(e,t)})),e.s.C(i,"keystatuseschange",(function(t){return Oi(e,t)})),e.i.set(i,{initData:n,initDataType:t,loaded:!1,Vd:1/0,Ja:null,type:r});try{n=e.h.initDataTransform(n,t,e.g)}catch(a){return t=a,a instanceof Ne||(t=new Ne(2,6,6016,a)),void e.m(t)}e.h.logLicenseExchange&&_t(n),i.generateRequest(t,n).catch((function(t){if(!e.j.g){e.i.delete(i);var n=t.errorCode;if(n&&n.systemCode){var r=n.systemCode;0>r&&(r+=Math.pow(2,32)),r="0x"+r.toString(16)}e.m(new Ne(2,6,6006,t.message,t,r))}}))}(e,t,n,e.g.sessionType)}}function Ri(e){return!!e&&!!e.match(/^com\.(microsoft|chromecast)\.playready/)}function Ni(e){return e=jr(e=e.i.keys(),(function(e){return e.sessionId})),Array.from(e)}function Li(e,t,n){var r,i,a,o,s,u,l,d,h,f,p,g,m;return L((function(v){switch(v.g){case 1:if(r=new Map,n.length){i=function(e,t,n){for(var r=c(t),i=r.next();!i.done;i=r.next()){var a=c(ji(i.value));for(i=a.next();!i.done;i=a.next())i=i.value,n.has(i.keySystem)||n.set(i.keySystem,[]),n.get(i.keySystem).push(i)}if(1==n.size&&n.has(""))throw new Ne(2,6,6e3);for(r={},e=c(e.h.preferredKeySystems),i=e.next();!i.done;r={qd:r.qd},i=e.next())for(r.qd=i.value,a=c(t),i=a.next();!i.done;i=a.next())if(i=i.value.decodingInfos.find(function(e){return function(t){return t.supported&&null!=t.keySystemAccess&&t.keySystemAccess.keySystem==e.qd}}(r)))return i.keySystemAccess;for(e=c([!0,!1]),i=e.next();!i.done;i=e.next())for(r=i.value,a=c(t),i=a.next();!i.done;i=a.next()){var o=c(i.value.decodingInfos);for(i=o.next();!i.done;i=o.next()){var s=i.value;if(s.supported&&s.keySystemAccess){var u=c(i=n.get(s.keySystemAccess.keySystem));for(i=u.next();!i.done;i=u.next())if(!!i.value.licenseServerUri==r)return s.keySystemAccess}}}return null}(e,n,r),v.A(2);break}return w(v,function(e,t){var n,r,i,a,o,s,u,l,d,h,f,p,g,m,v;return L((function(y){switch(y.g){case 1:if(1==t.size&&t.has(""))throw new Ne(2,6,6e3);for(r=c(t.values()),i=r.next();!i.done;i=r.next())0==(a=i.value).audioCapabilities.length&&delete a.audioCapabilities,0==a.videoCapabilities.length&&delete a.videoCapabilities;o=c(e.h.preferredKeySystems),s=o.next();case 2:if(s.done){y.A(4);break}if(u=s.value,!t.has(u)){y.A(3);break}return l=t.get(u),A(y,6),w(y,navigator.requestMediaKeySystemAccess(u,[l]),8);case 8:return n=y.h,y.return(n);case 6:I(y);case 7:Pr(e.j);case 3:s=o.next(),y.A(2);break;case 4:d=c([!0,!1]),h=d.next();case 9:if(h.done){y.A(11);break}f=h.value,p=c(t.keys()),s=p.next();case 12:if(s.done){h=d.next(),y.A(9);break}if(g=s.value,m=t.get(g),v=m.drmInfos.some((function(e){return!!e.licenseServerUri})),v!=f){y.A(13);break}return A(y,15),w(y,navigator.requestMediaKeySystemAccess(g,[m]),17);case 17:return n=y.h,y.return(n);case 15:I(y);case 16:Pr(e.j);case 13:s=p.next(),y.A(12);break;case 11:return y.return(n)}}))}(e,t),3);case 3:i=v.h;case 2:if(!(a=i))throw new Ne(2,6,6001);for(Pr(e.j),A(v,4),e.G.clear(),o=a.getConfiguration(),s=o.audioCapabilities||[],u=o.videoCapabilities||[],l=c(s),d=l.next();!d.done;d=l.next())h=d.value,e.G.add(h.contentType.toLowerCase());for(f=c(u),d=f.next();!d.done;d=f.next())p=d.value,e.G.add(p.contentType.toLowerCase());if(n.length){var y=a.keySystem,b=r.get(a.keySystem),x=[],T=[],S=[],k=[],C=new Set;zi(b,x,S,T,k,C);var _=e.L?"persistent-license":"temporary";for(y={keySystem:y,licenseServerUri:x[0],distinctiveIdentifierRequired:b[0].distinctiveIdentifierRequired,persistentStateRequired:b[0].persistentStateRequired,sessionType:b[0].sessionType||_,audioRobustness:b[0].audioRobustness||"",videoRobustness:b[0].videoRobustness||"",serverCertificate:S[0],serverCertificateUri:T[0],initData:k,keyIds:C},x=(b=c(b)).next();!x.done;x=b.next())(x=x.value).distinctiveIdentifierRequired&&(y.distinctiveIdentifierRequired=x.distinctiveIdentifierRequired),x.persistentStateRequired&&(y.persistentStateRequired=x.persistentStateRequired);b=y}else b=a.keySystem,y=t.get(a.keySystem),x=[],T=[],S=[],k=[],C=new Set,zi(y.drmInfos,x,S,T,k,C),b={keySystem:b,licenseServerUri:x[0],distinctiveIdentifierRequired:"required"==y.distinctiveIdentifier,persistentStateRequired:"required"==y.persistentState,sessionType:y.sessionTypes[0]||"temporary",audioRobustness:(y.audioCapabilities?y.audioCapabilities[0].robustness:"")||"",videoRobustness:(y.videoCapabilities?y.videoCapabilities[0].robustness:"")||"",serverCertificate:S[0],serverCertificateUri:T[0],initData:k,keyIds:C};if(e.g=b,!e.g.licenseServerUri)throw new Ne(2,6,6012,e.g.keySystem);return w(v,a.createMediaKeys(),6);case 6:return g=v.h,Pr(e.j),e.u=g,e.W=!0,w(v,Ci(e),7);case 7:Pr(e.j),E(v,0);break;case 4:if(m=I(v),Pr(e.j,m),e.g=null,e.G.clear(),m instanceof Ne)throw m;throw new Ne(2,6,6002,m.message)}}))}function Di(e,t){var n,i,a,o,s;return L((function(u){switch(u.g){case 1:try{n=e.u.createSession("persistent-license")}catch(r){return i=new Ne(2,6,6005,r.message),e.m(i),u.return(Promise.reject(i))}return e.s.C(n,"message",(function(t){e.l&&e.h.delayLicenseRequestUntilPlayed&&e.l.paused&&!e.M?e.J.push(t):Pi(e,t)})),e.s.C(n,"keystatuseschange",(function(t){return Oi(e,t)})),a={initData:null,initDataType:null,loaded:!1,Vd:1/0,Ja:null,type:"persistent-license"},e.i.set(n,a),A(u,2),w(u,n.load(t),4);case 4:return o=u.h,Pr(e.j),o?(a.loaded=!0,Fi(e)&&e.o.resolve(),u.return(n)):(e.i.delete(n),e.m(new Ne(2,6,6013)),u.return(Promise.resolve()));case 2:s=I(u),Pr(e.j,s),e.i.delete(n),e.m(new Ne(2,6,6005,s.message));case 3:return u.return(Promise.resolve())}}))}function Pi(e,t){var n,r,i,a,o,s,u,l,d,h,f,p;L((function(g){switch(g.g){case 1:return n=t.target,e.h.logLicenseExchange&&_t(t.message),r=e.i.get(n),i=e.g.licenseServerUri,a=e.h.advanced[e.g.keySystem],"individualization-request"==t.messageType&&a&&a.individualizationServer&&(i=a.individualizationServer),(o=kr([i],e.h.retryParameters)).body=t.message,o.method="POST",o.licenseRequestType=t.messageType,o.sessionId=n.sessionId,o.drmInfo=e.g,r&&(o.initData=r.initData,o.initDataType=r.initDataType),Ri(e.g.keySystem)&&function(e){var t=Tt(e.body,!0,!0);if(t.includes("PlayReadyKeyMessage")){for(var n=c((t=wi(t,"PlayReadyKeyMessage")).getElementsByTagName("HttpHeader")),r=n.next();!r.done;r=n.next())r=r.value,e.headers[r.getElementsByTagName("name")[0].textContent]=r.getElementsByTagName("value")[0].textContent;e.body=Mt(t.getElementsByTagName("Challenge")[0].textContent)}else e.headers["Content-Type"]="text/xml; charset=utf-8"}(o),s=Date.now(),A(g,2),w(g,e.D.kb.request(2,o).promise,4);case 4:u=g.h,E(g,3);break;case 2:return l=I(g),d=new Ne(2,6,6007,l),e.m(d),r&&r.Ja&&r.Ja.reject(d),g.return();case 3:return e.j.g?g.return():(e.H+=(Date.now()-s)/1e3,e.h.logLicenseExchange&&_t(u.data),A(g,5),w(g,n.update(u.data),7));case 7:E(g,6);break;case 5:return h=I(g),f=new Ne(2,6,6008,h.message),e.m(f),r&&r.Ja&&r.Ja.reject(f),g.return();case 6:if(e.j.g)return g.return();p=new vr("drmsessionupdate"),e.D.onEvent(p),r&&(r.Ja&&r.Ja.resolve(),new st((function(){r.loaded=!0,Fi(e)&&e.o.resolve()})).N(Ki)),T(g)}}))}function Oi(e,t){t=t.target;var n=e.i.get(t),r=!1;t.keyStatuses.forEach((function(t,i){if("string"==typeof i){var a=i;i=t,t=a}if(Ri(e.g.keySystem)&&16==i.byteLength&&(navigator.userAgent.match(/Edge?\//)||pt())){var o=(a=Me(i)).getUint32(0,!0),s=a.getUint16(4,!0),u=a.getUint16(6,!0);a.setUint32(0,o,!1),a.setUint16(4,s,!1),a.setUint16(6,u,!1)}"status-pending"!=t&&(n.loaded=!0),"expired"==t&&(r=!0),i=Nt(i).slice(0,32),e.ia.set(i,t)}));var i=t.expiration-Date.now();(0>i||r&&1e3>i)&&n&&!n.Ja&&(e.i.delete(t),t.close().catch((function(){}))),Fi(e)&&(e.o.resolve(),e.O.N(Hi))}function Ui(e){var t;return L((function(n){return t=Array.from(e.i.entries()),e.i.clear(),w(n,Promise.all(t.map((function(t){var n=(t=c(t)).next().value,r=t.next().value;return L((function(t){return 1==t.g?(A(t,2),e.da||e.B.includes(n.sessionId)||"persistent-license"!==r.type?w(t,function(e){var t;return L((function(n){return 1==n.g?(t=new Promise((function(e,t){new st(t).N(Vi)})),A(n,2),w(n,Promise.race([Promise.all([e.close(),e.closed]),t]),4)):2!=n.g?E(n,0):(I(n),void T(n))}))}(n),5):w(t,n.remove(),5)):2!=t.g?E(t,0):(I(t),void T(t))}))}))),0)}))}function Bi(e,t){if(!e.length)return t;if(!t.length)return e;for(var n=[],r=(e=c(e)).next();!r.done;r=e.next()){r=r.value;for(var i={},a=c(t),o=a.next();!o.done;i={Da:i.Da},o=a.next())if(o=o.value,r.keySystem==o.keySystem){i.Da=[],i.Da=i.Da.concat(r.initData||[]),i.Da=i.Da.concat(o.initData||[]),i.Da=i.Da.filter(function(e){return function(t,n){return void 0===t.keyId||n===e.Da.findIndex((function(e){return e.keyId===t.keyId}))}}(i)),a=r.keyIds&&o.keyIds?new Set([].concat(d(r.keyIds),d(o.keyIds))):r.keyIds||o.keyIds,n.push({keySystem:r.keySystem,licenseServerUri:r.licenseServerUri||o.licenseServerUri,distinctiveIdentifierRequired:r.distinctiveIdentifierRequired||o.distinctiveIdentifierRequired,persistentStateRequired:r.persistentStateRequired||o.persistentStateRequired,videoRobustness:r.videoRobustness||o.videoRobustness,audioRobustness:r.audioRobustness||o.audioRobustness,serverCertificate:r.serverCertificate||o.serverCertificate,serverCertificateUri:r.serverCertificateUri||o.serverCertificateUri,initData:i.Da,keyIds:a});break}}return n}function ji(e){return(e.video?e.video.drmInfos:[]).concat(e.audio?e.audio.drmInfos:[])}function Fi(e){return function(e,t){for(var n=(e=c(e)).next();!n.done;n=e.next())if(!t(n.value))return!1;return!0}(e=e.i.values(),(function(e){return e.loaded}))}function zi(e,t,n,r,i,a){for(var o={},s=(e=c(e)).next();!s.done;o={oa:o.oa},s=e.next()){if(o.oa=s.value,t.includes(o.oa.licenseServerUri)||t.push(o.oa.licenseServerUri),r.includes(o.oa.serverCertificateUri)||r.push(o.oa.serverCertificateUri),o.oa.serverCertificate&&(n.some(function(e){return function(t){return Ie(t,e.oa.serverCertificate)}}(o))||n.push(o.oa.serverCertificate)),o.oa.initData){s={};for(var u=c(o.oa.initData),l=u.next();!l.done;s={Dc:s.Dc},l=u.next())s.Dc=l.value,i.some(function(e){return function(t){var n=e.Dc;return!(!t.keyId||t.keyId!=n.keyId)||t.initDataType==n.initDataType&&Ie(t.initData,n.initData)}}(s))||i.push(s.Dc)}if(o.oa.keyIds)for(u=(s=c(o.oa.keyIds)).next();!u.done;u=s.next())a.add(u.value)}}function Gi(t,n,r,i){var a=t.keySystem;!a||"org.w3.clearkey"==a&&t.licenseServerUri||(n.size&&(n=n.get(a)||"",t.licenseServerUri=n),t.keyIds||(t.keyIds=new Set),(r=r.get(a))&&(t.distinctiveIdentifierRequired||(t.distinctiveIdentifierRequired=r.distinctiveIdentifierRequired),t.persistentStateRequired||(t.persistentStateRequired=r.persistentStateRequired),t.videoRobustness||(t.videoRobustness=r.videoRobustness),t.audioRobustness||(t.audioRobustness=r.audioRobustness),t.serverCertificate||(t.serverCertificate=r.serverCertificate),r.sessionType&&(t.sessionType=r.sessionType),t.serverCertificateUri||(t.serverCertificateUri=r.serverCertificateUri)),i[a]&&(t.keySystem=i[a]),e.cast&&e.cast.__platform__&&"com.microsoft.playready"==a&&(t.keySystem="com.chromecast.playready"))}(i=Si.prototype).destroy=function(){return this.j.destroy()},i.configure=function(e){this.h=e},i.Yb=function(e){var t,n=this;return L((function(r){if(1==r.g)return n.u?(n.l=e,n.s.ma(n.l,"play",(function(){for(var e=c(n.J),t=e.next();!t.done;t=e.next())Pi(n,t.value);n.M=!0,n.J=[]})),"webkitCurrentPlaybackTargetIsWireless"in n.l&&n.s.C(n.l,"webkitcurrentplaybacktargetiswirelesschanged",(function(){return Ui(n)})),(t=n.g.initData.find((function(e){return 0<e.initData.length})))||"com.apple.fps"!==n.g.keySystem||n.B.length?w(r,ki(n),2):r.A(2)):(n.s.ma(e,"encrypted",(function(){n.m(new Ne(2,6,6010))})),r.return());_i(n),t||n.B.length||n.h.parseInbandPsshEnabled||n.s.C(n.l,"encrypted",(function(e){return function(e,t){return L((function(n){if(1==n.g)return w(n,ki(e),2);Mi(e,t.initDataType,_e(t.initData)),T(n)}))}(n,e)})),T(r)}))},i.ic=function(){for(var e=1/0,t=this.i.keys(),n=(t=c(t)).next();!n.done;n=t.next())n=n.value,isNaN(n.expiration)||(e=Math.min(e,n.expiration));return e},i.Qc=function(){return zr(this.ba)};var Vi=1,Ki=5,Hi=.5,Wi=new at((function(){return Ce(new Uint8Array([0]))}));function Xi(){}function qi(e,t,n,r){var i,a,o,s;return L((function(u){if(1==u.g)return r&&(i=Qi[r.toLowerCase()])?u.return(i):(a=$i(e))&&(o=Ji[a])?u.return(o):r?u.A(2):w(u,Yi(e,t,n),3);if(2!=u.g&&(r=u.h)&&(s=Qi[r]))return u.return(s);throw new Ne(2,4,4e3,e)}))}function Yi(e,t,n){var r,i,a;return L((function(o){return 1==o.g?((r=kr([e],n)).method="HEAD",w(o,t.request(0,r).promise,2)):(i=o.h,a=i.headers["content-type"],o.return(a?a.toLowerCase().split(";").shift():""))}))}function $i(e){return 1==(e=new De(e).qa.split("/").pop().split(".")).length?"":e.pop().toLowerCase()}z("shaka.media.ManifestParser",Xi),Xi.unregisterParserByMime=function(e){delete Qi[e]},Xi.registerParserByMime=function(e,t){Qi[e]=t},Xi.registerParserByExtension=function(e,t){Ji[e]=t};var Qi={},Ji={};function Zi(e,t,n,r,i){var a=ta.value(),o=e.subarray(n.start,n.start+n.size),s=Me(o),u=new Uint8Array(n.size+a.byteLength);for(u.set(o,0),(o=Me(u)).setUint32(4,i),u.set(a,n.size),i=s.getUint32(4),o.setUint32(n.size+16,i),ea(u,0,u.byteLength),i=new Uint8Array(e.byteLength+u.byteLength),n=ct()?n.start:n.start+n.size,a=e.subarray(n),i.set(e.subarray(0,n)),i.set(u,n),i.set(a,n+u.byteLength),r=(e=c(r)).next();!r.done;r=e.next())ea(i,(r=r.value).start,r.size+u.byteLength);return u=Me(i,t.start),t=Zr(t),e=u.getUint32(t),u.setUint32(t,e+1),i}function ea(e,t,n){0!=(t=(e=Me(e,t)).getUint32(0))&&(1==t?(e.setUint32(8,n>>32),e.setUint32(12,4294967295&n)):e.setUint32(0,n))}var ta=new at((function(){return new Uint8Array([0,0,0,80,115,105,110,102,0,0,0,12,102,114,109,97,0,0,0,0,0,0,0,20,115,99,104,109,0,0,0,0,99,101,110,99,0,1,0,0,0,0,0,40,115,99,104,105,0,0,0,32,116,101,110,99,0,0,0,0,0,0,1,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0])}));function na(e,t,n,r,i){if(r>=i)return null;for(var a=-1,o=-1,s=0;s<n.length;s++)if(n[s].some((function(e){return null!=e&&""!=e.g.trim()}))){a=s;break}for(s=n.length-1;0<=s;s--)if(n[s].some((function(e){return null!=e&&""!=e.g.trim()}))){o=s;break}if(-1===a||-1===o)return null;for(var u=s=!1,l="white",c="black",d=ra(r,i,s,u,l,c);a<=o;a++){for(var h=n[a],f=-1,p=-1,g=0;g<h.length;g++)if(null!=h[g]&&""!==h[g].g.trim()){f=g;break}for(g=h.length-1;0<=g;g--)if(null!=h[g]&&""!==h[g].g.trim()){p=g;break}if(-1===f||-1===p)h=ia(r,i),e.nestedCues.push(h);else{for(;f<=p;f++)if(g=h[f]){var m=g.l,v=g.i,y=g.j,b=g.h;m==s&&v==u&&y==l&&b==c||(d.payload&&e.nestedCues.push(d),d=ra(r,i,m,v,y,b),s=m,u=v,l=y,c=b),d.payload+=g.g}else d.payload+=" ";d.payload&&e.nestedCues.push(d),a!==o&&(d=ia(r,i),e.nestedCues.push(d)),d=ra(r,i,s,u,l,c)}}return e.nestedCues.length?{cue:e,stream:t}:null}function ra(e,t,n,r,i,a){return e=new ae(e,t,""),n&&e.textDecoration.push("underline"),r&&(e.fontStyle="italic"),e.color=i,e.backgroundColor=a,e}function ia(e,t){return(e=new ae(e,t,"")).lineBreak=!0,e}function aa(e,t,n,r,i){this.g=e,this.l=t,this.i=n,this.h=r,this.j=i}function oa(e,t){this.i=[],this.g=1,this.h=0,this.u=e,this.s=t,this.j=this.m=!1,this.l="white",this.o="black",ua(this)}function sa(e,t,n){return na(new ae(t,n,""),"CC"+(e.u<<1|e.s+1),e.i,t,n)}function ua(e){da(e,0,15),e.g=1}function la(e,t,n){if(!(32>n||127<n)){var r="";switch(t){case ha:r=ma.has(n)?ma.get(n):String.fromCharCode(n);break;case fa:r=va.get(n);break;case pa:e.i[e.g].pop(),r=ya.get(n);break;case ga:e.i[e.g].pop(),r=ba.get(n)}r&&e.i[e.g].push(new aa(r,e.m,e.j,e.o,e.l))}}function ca(e,t,n,r){if(!(0>n||0>t))if(t>=n)for(--r;0<=r;r--)e.i[t+r]=e.i[n+r].map((function(e){return e}));else for(var i=0;i<r;i++)e.i[t+i]=e.i[n+i].map((function(e){return e}))}function da(e,t,n){for(var r=0;r<=n;r++)e.i[t+r]=[]}var ha=0,fa=1,pa=2,ga=3,ma=new Map([[39,""],[42,""],[92,""],[92,""],[94,""],[95,""],[96,""],[123,""],[124,""],[125,""],[126,""],[127,""]]),va=new Map([[48,""],[49,""],[50,""],[51,""],[52,""],[53,""],[54,""],[55,""],[56,""],[57,""],[58,""],[59,""],[60,""],[61,""],[62,""],[63,""]]),ya=new Map([[32,""],[33,""],[34,""],[35,""],[36,""],[37,""],[38,""],[39,""],[40,"*"],[41,"'"],[42,""],[43,""],[44,""],[45,""],[46,""],[47,""],[48,""],[49,""],[50,""],[51,""],[52,""],[53,""],[54,""],[55,""],[56,""],[57,""],[58,""],[59,""],[60,""],[61,""],[62,""],[63,""]]),ba=new Map([[32,""],[33,""],[34,""],[35,""],[36,""],[37,""],[38,""],[39,""],[40,""],[41,"{"],[42,"}"],[43,"\\"],[44,"^"],[45,"_"],[46,"|"],[47,"~"],[48,""],[49,""],[50,""],[51,""],[52,""],[53,""],[54,""],[55,""],[56,""],[57,""],[58,""],[59,""],[60,""],[61,""],[62,""],[63,""]]);function xa(e,t){this.h=Sa,this.o=new oa(e,t),this.i=new oa(e,t),this.l=new oa(e,t),this.g=this.i,this.j=0,this.m=null}function wa(e,t,n){e.g=e.i;var r=e.g,i=null;return e.h!==Ia&&e.h!==ka&&(i=sa(r,e.j,n),(n=e.i).g=0<n.h?n.h:0,da(n,0,15),(n=e.l).g=0<n.h?n.h:0,da(n,0,15),r.g=15),e.h=Ia,r.h=t,i}function Ta(e){e.h=Ea,e.g=e.l,e.g.h=0}function Aa(e){q("Cea608DataChannel","CEA-608 text mode entered, but is unsupported"),e.g=e.o,e.h=ka}var Sa=0,Ea=1,Ia=3,ka=4,Ca="black green blue cyan red yellow magenta black".split(" "),_a="white green blue cyan red yellow magenta white_italics".split(" ");function Ma(){this.l=!1,this.B=this.F=0,this.D=Ba,this.i=[],this.g=this.h=this.j=0,this.u=this.o=!1,this.s="white",this.m="black",Ra(this)}function Ra(e){e.i=[];for(var t=0;16>t;t++)e.i.push(Na())}function Na(){for(var e=[],t=0;42>t;t++)e.push(null);return e}function La(e,t){Da(e)&&(e.i[e.h][e.g]=new aa(t,e.u,e.o,e.m,e.s),e.g++)}function Da(e){var t=e.g<e.B&&0<=e.g;return e.h<e.F&&0<=e.h&&t}function Pa(e,t,n){var r=new ae(e.j,t,"");return r.textAlign=e.D===Oa?"left":e.D===Ua?"right":ue,(n=na(r,"svc"+n,e.i,e.j,t))&&(e.j=t),n}Ma.prototype.isVisible=function(){return this.l};var Oa=0,Ua=1,Ba=2;function ja(){this.i=[],this.h=null,this.g=0}function Fa(e,t){3===t.type?(e.g=2*(63&t.value)-1,e.h=[]):e.h&&(0<e.g&&(e.h.push(t),e.g--),0===e.g&&(e.i.push(new za(e.h)),e.h=null,e.g=0))}function za(e){this.g=0,this.h=e}function Ga(e){if(!e.ga())throw new Ne(2,2,3e3);return e.h[e.g++]}function Va(e){this.i=e,this.h=[null,null,null,null,null,null,null,null],this.g=null}function Ka(e,t,n,r){if(128<=n&&135>=n)r=7&n,e.h[r]&&(e.g=e.h[r]);else{if(136===n){n=Ga(t).value,t=null;for(var i=(n=c(Ha(e,n))).next();!i.done;i=n.next())(i=e.h[i.value]).isVisible()&&(t=Pa(i,r,e.i)),Ra(i);return t}if(137===n)for(n=(t=c(Ha(e,t=Ga(t).value))).next();!n.done;n=t.next())(n=e.h[n.value]).isVisible()||(n.j=r),n.l=!0;else{if(138===n){for(n=Ga(t).value,t=null,i=(n=c(Ha(e,n))).next();!i.done;i=n.next())(i=e.h[i.value]).isVisible()&&(t=Pa(i,r,e.i)),i.l=!1;return t}if(139===n){for(n=Ga(t).value,t=null,i=(n=c(Ha(e,n))).next();!i.done;i=n.next())(i=e.h[i.value]).isVisible()?t=Pa(i,r,e.i):i.j=r,i.l=!i.l;return t}if(140===n)return Wa(e,t=Ga(t).value,r);if(143===n)return r=Wa(e,255,r),Xa(e),r;if(144===n)t.skip(1),r=Ga(t).value,e.g&&(e.g.o=0<(128&r),e.g.u=0<(64&r));else if(145===n)r=Ga(t).value,n=Ga(t).value,t.skip(1),e.g&&(t=qa((48&n)>>4,(12&n)>>2,3&n),e.g.s=qa((48&r)>>4,(12&r)>>2,3&r),e.g.m=t);else if(146===n)r=Ga(t).value,t=Ga(t).value,e.g&&((e=e.g).h=15&r,e.g=63&t);else if(151===n)t.skip(1),t.skip(1),r=Ga(t).value,t.skip(1),e.g&&(e.g.D=3&r);else if(152<=n&&159>=n){if(n=(15&n)-8,!(i=null!==e.h[n])){var a=new Ma;a.j=r,e.h[n]=a}r=Ga(t).value,Ga(t),Ga(t),a=Ga(t).value;var o=Ga(t).value;t=Ga(t).value,i&&!(7&t)||((t=e.h[n]).h=0,t.g=0,t.u=!1,t.o=!1,t.s="white",t.m="black"),(t=e.h[n]).l=0<(32&r),t.F=1+(15&a),t.B=1+(63&o),e.g=e.h[n]}}}return null}function Ha(e,t){for(var n=[],r=0;8>r;r++)!(1&~t)&&e.h[r]&&n.push(r),t>>=1;return n}function Wa(e,t,n){for(var r=null,i=(t=c(Ha(e,t))).next();!i.done;i=t.next()){i=i.value;var a=e.h[i];a.isVisible()&&(r=Pa(a,n,e.i)),e.h[i]=null}return r}function Xa(e){e.g=null,e.h=[null,null,null,null,null,null,null,null]}function qa(e,t,n){var r={0:0,1:0,2:1,3:1};return $a[(e=r[e])<<2|(t=r[t])<<1|(n=r[n])]}za.prototype.ga=function(){return this.g<this.h.length},za.prototype.Z=function(){return this.g},za.prototype.skip=function(e){if(this.g+e>this.h.length)throw new Ne(2,2,3e3);this.g+=e};var Ya=new Map([[32," "],[33,""],[37,""],[42,""],[44,""],[48,""],[49,""],[50,""],[51,""],[52,""],[53,""],[57,""],[58,""],[60,""],[61,""],[63,""],[118,""],[119,""],[120,""],[121,""],[122,""],[123,""],[124,""],[125,""],[126,""],[127,""]]),$a="black blue green cyan red magenta yellow white".split(" ");function Qa(){this.h=[],this.g=[],this.i=new ja,this.l=0,this.s=new Map([["CC1",new xa(0,0)],["CC2",new xa(0,1)],["CC3",new xa(1,0)],["CC4",new xa(1,1)]]),this.o=this.m=0,this.j=new Map,Ja(this)}function Ja(e){e.m=0,e.o=0;for(var t=(e=c(e.s.values())).next();!t.done;t=e.next())(t=t.value).h=2,t.g=t.i,t.m=null,ua(t.i),ua(t.l),ua(t.o)}function Za(e,t){var n=t.type;if(16==(112&t.xa)){var r=t.xa>>3&1;0===n?e.m=r:e.o=r}if(n=e.s.get("CC"+(n<<1|(n?e.o:e.m)+1)),255===t.xa&&255===t.La||!t.xa&&!t.La||!to(t.xa)||!to(t.La))return 45<=++e.l&&Ja(e),null;if(e.l=0,t.xa&=127,t.La&=127,!t.xa&&!t.La)return null;if(e=null,16==(112&t.xa))e:{if(r=t.xa,e=t.La,n.m===(r<<8|e))n.m=null;else if(n.m=r<<8|e,16==(240&r)&&64==(192&e)){t=[11,11,1,2,3,4,12,13,14,15,5,6,7,8,9,10][(7&r)<<1|e>>5&1];var i=(30&e)>>1;r="white";var a=!1;if(7>i?r=_a[i]:7===i&&(a=!0),e=!(1&~e),n.h!==ka){if(i=n.g,n.h===Ia&&t!==i.g){var o=1+t-i.h;ca(i,o,1+i.g-i.h,i.h),da(i,0,o-1),da(i,t+1,15-t)}i.g=t,n.g.m=e,n.g.j=a,n.g.l=r,n.g.o="black"}}else if(17==(247&r)&&32==(240&e))n.g.m=!1,n.g.j=!1,n.g.l="white",la(n.g,ha,32),r=!1,"white_italics"===(t=_a[(14&e)>>1])&&(t="white",r=!0),n.g.m=!(1&~e),n.g.j=r,n.g.l=t;else if(16==(247&r)&&32==(240&e)||23==(247&r)&&45==(255&e))t="black",!(7&r)&&(t=Ca[(14&e)>>1]),n.g.o=t;else if(17==(247&r)&&48==(240&e))la(n.g,fa,e);else if(18==(246&r)&&32==(224&e))la(n.g,1&r?ga:pa,e);else if(20==(246&r)&&32==(240&e)){switch(e=t.pts,r=null,t.La){case 32:Ta(n);break;case 33:(n=n.g).i[n.g].pop();break;case 37:r=wa(n,2,e);break;case 38:r=wa(n,3,e);break;case 39:r=wa(n,4,e);break;case 40:la(n.g,ha,32);break;case 41:n.h=2,n.g=n.i,n.g.h=0,n.j=e;break;case 42:ua(n.o),Aa(n);break;case 43:Aa(n);break;case 44:t=n.i,r=null,n.h!==ka&&(r=sa(t,n.j,e)),da(t,0,15);break;case 45:t=n.g,n.h!==Ia?r=null:(r=sa(t,n.j,e),ca(t,(a=t.g-t.h+1)-1,a,t.h),da(t,0,a-1),da(t,t.g,15-t.g),n.j=e);break;case 46:da(n.l,0,15);break;case 47:t=null,n.h!==ka&&(t=sa(n.i,n.j,e)),r=n.l,n.l=n.i,n.i=r,Ta(n),n.j=e,r=t}e=r;break e}e=null}else r=t.La,la(n.g,ha,t.xa),la(n.g,ha,r);return e}function eo(e,t){var n=[];try{for(;t.ga();){var r=Ga(t).value,i=(224&r)>>5,a=31&r;if(7===i&&0!=a&&(i=63&Ga(t).value),0!=i){e.j.has(i)||e.j.set(i,new Va(i));for(var o=e.j.get(i),s=t.Z();t.Z()-s<a;){var u=Ga(i=t),l=u.value,c=u.pts;if(16===l)l=l<<16|Ga(i).value;if(0<=l&&31>=l){var d=c;if(o.g){var h=o.g;switch(i=null,l){case 8:!Da(h)||0>=h.g&&0>=h.h||(0>=h.g?(h.g=h.B-1,h.h--):h.g--,h.i[h.h][h.g]=null);break;case 13:if(h.isVisible()&&(i=Pa(h,d,o.i)),h.h+1>=h.F){d=h;for(var f=0,p=1;16>p;p++,f++)d.i[f]=d.i[p];for(p=0;1>p;p++,f++)d.i[f]=Na()}else h.h++;h.g=0;break;case 14:h.isVisible()&&(i=Pa(h,d,o.i)),h.i[h.h]=Na(),h.g=0;break;case 12:h.isVisible()&&(i=Pa(h,d,o.i)),Ra(h),(d=h).h=0,d.g=0}var g=i}else g=null}else if(128<=l&&159>=l)g=Ka(o,i,l,c);else{if(4096<=l&&4127>=l)8<=(d=255&l)&&15>=d?i.skip(1):16<=d&&23>=d?i.skip(2):24<=d&&31>=d&&i.skip(3);else if(4224<=l&&4255>=l)128<=(d=255&l)&&135>=d?i.skip(4):136<=d&&143>=d&&i.skip(5);else if(32<=l&&127>=l)i=l,o.g&&La(o.g,127===i?"":String.fromCharCode(i));else if(160<=l&&255>=l)o.g&&La(o.g,String.fromCharCode(l));else if(4128<=l&&4223>=l){if(i=255&l,o.g)if(Ya.has(i)){var m=Ya.get(i);La(o.g,m)}else La(o.g,"_")}else 4256<=l&&4351>=l&&o.g&&La(o.g,160!=(255&l)?"_":"[CC]");g=null}(i=g)&&n.push(i)}}}}catch(v){if(!(v instanceof Ne&&3e3===v.code))throw v;q("CEA708_INVALID_DATA","Buffer read out of bounds / invalid CEA-708 Data.")}return n}function to(e){for(var t=0;e;)t^=1&e,e>>=1;return 1===t}function no(){}function ro(e,t){var n=null,r=null,i=null,a=e.K();return 1&t&&(i=e.$a()),2&t&&e.skip(4),8&t&&(n=e.K()),16&t&&(r=e.K()),{trackId:a,Ce:n,xf:r,th:i}}function io(e,t){return{we:1==t?e.$a():e.K()}}function ao(e,t){return 1==t?(e.skip(8),e.skip(8)):(e.skip(4),e.skip(4)),{timescale:e.K()}}function oo(e,t,n){var r=e.K(),i=[],a=null;1&n&&(a=e.K()),4&n&&e.skip(4);for(var o=0;o<r;o++){var s={ee:null,sampleSize:null,ed:null};256&n&&(s.ee=e.K()),512&n&&(s.sampleSize=e.K()),1024&n&&e.skip(4),2048&n&&(s.ed=0==t?e.K():e.Pe()),i.push(s)}return{yh:r,Re:i,wf:a}}function so(){this.j=new Map,this.i=this.h=0,this.g=uo}no.prototype.init=function(){},no.prototype.parse=function(){return[]},so.prototype.init=function(e){function t(e){(e=e.name)in ho&&(n.g=ho[e])}var n=this,r=[],i=[];if((new Wr).box("moov",Xr).box("mvex",Xr).P("trex",(function(e){var t=e.reader;t.skip(4),t.skip(4),e=t.K(),t=t.K(),n.h=e,n.i=t})).box("trak",Xr).P("tkhd",(function(e){var t=e.reader;1==e.version?(t.skip(8),t.skip(8)):(t.skip(4),t.skip(4)),e=t.K(),r.push(e)})).box("mdia",Xr).P("mdhd",(function(e){e=ao(e.reader,e.version),i.push(e.timescale)})).box("minf",Xr).box("stbl",Xr).P("stsd",qr).box("avc1",t).box("avc3",t).box("hev1",t).box("hvc1",t).box("dvh1",t).box("dvhe",t).box("encv",Yr).box("sinf",Xr).box("frma",(function(e){(e=Jr(e=e.reader.K()))in ho&&(n.g=ho[e])})).parse(e,!0),!r.length||!i.length||r.length!=i.length)throw new Ne(2,2,2010);this.g==uo&&X("Unable to determine bitstream format for CEA parsing!"),r.forEach((function(e,t){n.j.set(e,i[t])}))},so.prototype.parse=function(e){var t=this;if(this.g==uo)return[];var n=[],r=this.h,i=this.i,a=[],o=null,s=null,u=null,l=9e4;return(new Wr).box("moof",(function(e){o=e.start,Xr(e)})).box("traf",Xr).P("trun",(function(e){e=oo(e.reader,e.version,e.flags),a=e.Re,s=e.wf})).P("tfhd",(function(e){e=ro(e.reader,e.flags),r=e.Ce||t.h,i=e.xf||t.i,e=e.trackId,t.j.has(e)&&(l=t.j.get(e))})).P("tfdt",(function(e){u=io(e.reader,e.version).we})).box("mdat",(function(e){if(null===u)throw new Ne(2,2,2010);e:{var h=e.reader,f=u,p=l,g=r,m=i,v=a,y=0,b=m;for(v.length&&(b=v[0].sampleSize||m),h.skip((o||0)+(s||0)-e.start-8);h.ga();){e=h.K();var x=h.Ra();switch(t.g){case lo:x=6==(x&=31);break;case co:x=39==(x=x>>1&63)||40==x;break;default:break e}if(x){x=0,v.length>y&&(x=v[y].ed||0),x=(f+x)/p;for(var w,T=[],A=h.Za(e-1),S=w=0;S<A.length;)2==w&&3==A[S]?(w=0,(A=[].concat(d(A))).splice(S,1),A=new Uint8Array(A)):0==A[S]?w++:w=0,S++;for(w=A,S=0;S<w.length;){for(A=0;255==w[S];)A+=255,S++;A+=w[S++];for(var E=0;255==w[S];)E+=255,S++;E+=w[S++],4==A&&T.push(w.subarray(S,S+E)),S+=E}for(w=(T=c(T)).next();!w.done;w=T.next())n.push({ig:w.value,pts:x})}else try{h.skip(e-1)}catch(I){break}0==(b-=e+4)&&(f=v.length>y?f+(v[y].ee||g):f+g,y++,b=v.length>y&&v[y].sampleSize||m)}}})).parse(e,!1),n};var uo=0,lo=1,co=2,ho={avc1:lo,avc3:lo,hev1:co,hvc1:co,dvh1:co,dvhe:co};function fo(e){this.h=new no,e.includes("video/mp4")&&(this.h=new so),this.g=new Qa}function po(e,t){for(var n=(t=c(t=e.h.parse(t))).next();!n.done;n=t.next()){var r=n.value,i=_e(r.ig);if(0<i.length&&(n=e.g,r=r.pts,181===(i=new Vr(i,0)).Ra()&&49===i.$d()&&1195456820===i.K()&&3===i.Ra())){var a=i.Ra();if(64&a){a&=31,i.skip(1);for(var o=0;o<a;o++){var s=i.Ra(),u=(4&s)>>2,l=i.Ra(),h=i.Ra();u&&(0===(s&=3)||1===s?n.h.push({pts:r,type:s,xa:l,La:h,order:n.h.length}):(n.g.push({pts:r,type:s,value:l,order:n.g.length}),n.g.push({pts:r,type:2,value:h,order:n.g.length})))}}}}return function(e){function t(e,t){return e.pts-t.pts||e.order-t.order}var n=[];e.h.sort(t),e.g.sort(t);for(var r=c(e.h),i=r.next();!i.done;i=r.next())(i=Za(e,i.value))&&n.push(i);for(i=(r=c(e.g)).next();!i.done;i=r.next())Fa(e.i,i.value);for(i=(r=c(e.i.i)).next();!i.done;i=r.next())i=eo(e,i.value),n.push.apply(n,d(i));return e.i.i=[],e.h=[],e.g=[],n}(e.g)}function go(e,t,n,r,i){this.ya=e,this.Ba=t,this.ka=n,this.Od=void 0===r?null:r,this.timescale=i}function mo(e,t,n,r,i,a,o,s,u,l,c,d,h,f,p){l=void 0===l?[]:l,f=void 0===f?vo:f,this.startTime=e,this.j=this.endTime=t,this.u=n,this.Ba=r,this.ka=i,this.h=a,this.timestampOffset=o,this.appendWindowStart=s,this.appendWindowEnd=u,this.i=l,this.tilesLayout=void 0===c?"":c,this.s=void 0===d?null:d,this.g=void 0===h?null:h,this.status=f,this.l=void 0===p?null:p,this.o=null,this.m=0}fo.prototype.init=function(e){this.h.init(e)},go.prototype.lc=function(){return this.Ba},go.prototype.hc=function(){return this.ka},z("shaka.media.InitSegmentReference",go),go.prototype.getEndByte=go.prototype.hc,go.prototype.getStartByte=go.prototype.lc,(i=mo.prototype).ya=function(){return this.u()},i.getStartTime=function(){return this.startTime},i.Ef=function(){return this.endTime},i.lc=function(){return this.Ba},i.hc=function(){return this.ka},i.Vf=function(){return this.tilesLayout},i.Uf=function(){return this.s},i.Eb=function(){return this.status},i.bg=function(){this.status=yo},i.Ye=function(e){this.o=e},i.Sf=function(){return this.o},i.offset=function(e){this.startTime+=e,this.endTime+=e,this.j+=e;for(var t=c(this.i),n=t.next();!n.done;n=t.next())(n=n.value).startTime+=e,n.endTime+=e,n.j+=e},i.oe=function(e){null==this.g?W("Sync attempted without sync time!"):(e=this.g-e-this.startTime,.001<=Math.abs(e)&&this.offset(e))},z("shaka.media.SegmentReference",mo),mo.prototype.syncAgainst=mo.prototype.oe,mo.prototype.offset=mo.prototype.offset,mo.prototype.getThumbnailSprite=mo.prototype.Sf,mo.prototype.setThumbnailSprite=mo.prototype.Ye,mo.prototype.markAsUnavailable=mo.prototype.bg,mo.prototype.getStatus=mo.prototype.Eb,mo.prototype.getTileDuration=mo.prototype.Uf,mo.prototype.getTilesLayout=mo.prototype.Vf,mo.prototype.getEndByte=mo.prototype.hc,mo.prototype.getStartByte=mo.prototype.lc,mo.prototype.getEndTime=mo.prototype.Ef,mo.prototype.getStartTime=mo.prototype.getStartTime,mo.prototype.getUris=mo.prototype.ya;var vo=0,yo=1;function bo(e){return!e||1==e.length&&1e-6>e.end(0)-e.start(0)?null:1==e.length&&0>e.start(0)?0:e.length?e.start(0):null}function xo(e){return!e||1==e.length&&1e-6>e.end(0)-e.start(0)?null:e.length?e.end(e.length-1):null}function wo(e,t){return!(!e||!e.length||1==e.length&&1e-6>e.end(0)-e.start(0)||t>e.end(e.length-1))&&t>=e.start(0)}function To(e,t){if(!e||!e.length||1==e.length&&1e-6>e.end(0)-e.start(0))return 0;for(var n=0,r=(e=c(Ao(e))).next();!r.done;r=e.next()){var i=r.value;r=i.start,(i=i.end)>t&&(n+=i-Math.max(r,t))}return n}function Ao(e){if(!e)return[];for(var t=[],n=0;n<e.length;n++)t.push({start:e.start(n),end:e.end(n)});return t}function So(){}function Eo(e,t){var n=(127&e[t])<<21;return n|=(127&e[t+1])<<14,(n|=(127&e[t+2])<<7)|127&e[t+3]}function Io(e){var t={key:e.type,description:"",data:""};if("TXXX"===e.type){if(2>e.size||3!==e.data[0])return null;var n=e.data.subarray(1).indexOf(0);if(-1===n)return null;var r=wt(_e(e.data,1,n));return e=wt(_e(e.data,2+n)).replace(/\0*$/,""),t.description=r,t.data=e,t}return"WXXX"===e.type?2>e.size||3!==e.data[0]||-1===(n=e.data.subarray(1).indexOf(0))?null:(r=wt(_e(e.data,1,n)),e=wt(_e(e.data,2+n)).replace(/\0*$/,""),t.description=r,t.data=e,t):"PRIV"===e.type?2>e.size||-1===(r=e.data.indexOf(0))?null:(r=wt(_e(e.data,0,r)),e=Ce(e.data.subarray(r.length+1)),t.description=r,t.data=e,t):"T"===e.type[0]?2>e.size||3!==e.data[0]?null:(e=wt(e.data.subarray(1)).replace(/\0*$/,""),t.data=e,t):"W"===e.type[0]?(e=wt(e.data).replace(/\0*$/,""),t.data=e,t):e.data?(t.data=Ce(e.data),t):null}function ko(e){for(var t=0,n=[];t+10<=e.length&&73===e[t]&&68===e[t+1]&&51===e[t+2]&&255>e[t+3]&&255>e[t+4]&&128>e[t+6]&&128>e[t+7]&&128>e[t+8]&&128>e[t+9];){var r=Eo(e,t+6);for(e[t+5]>>6&1&&(t+=10),r=(t+=10)+r;t+10<r;){var i=e.subarray(t),a=Eo(i,4);(a=Io(i={type:String.fromCharCode(i[0],i[1],i[2],i[3]),size:a,data:i.subarray(10,10+a)}))&&n.push(a),t+=i.size+10}t+10<=e.length&&51===e[t]&&68===e[t+1]&&73===e[t+2]&&255>e[t+3]&&255>e[t+4]&&128>e[t+6]&&128>e[t+7]&&128>e[t+8]&&128>e[t+9]&&(t+=10)}return n}function Co(){this.o=null,this.s=!1,this.l=this.m=null,this.B=[],this.g=this.h=null,this.u=[],this.j=null,this.i=[]}function _o(e){if(1!=(e[0]<<16|e[1]<<8|e[2]))return null;var t={data:new Uint8Array(0),xh:6+(e[4]<<8|e[5]),pts:null,dts:null},n=e[7];return 192&n&&(t.pts=536870912*(14&e[9])+4194304*(255&e[10])+16384*(254&e[11])+128*(255&e[12])+(254&e[13])/2,t.dts=t.pts,64&n&&(t.dts=536870912*(14&e[14])+4194304*(255&e[15])+16384*(254&e[16])+128*(255&e[17])+(254&e[18])/2)),t.data=e.subarray(9+e[8]),t}function Mo(e){for(var t=Math.min(1e3,e.length-564),n=0;n<t;){if(71===e[n]&&71===e[n+188]&&71===e[n+376])return n;n++}return-1}function Ro(e,t,n){this.g=null,this.i=-1,this.j=e,this.h=t,this.l=n,"undefined"==typeof libDPIModule&&X("Could not Find LCEVC Library dependencies on this page"),"undefined"==typeof LcevcDil?X("Could not Find LCEVC Library on this page"):LcevcDil.SupportObject.SupportStatus||X(LcevcDil.SupportObject.SupportError),"undefined"!=typeof LcevcDil&&"undefined"!=typeof libDPIModule&&this.h instanceof HTMLCanvasElement&&LcevcDil.SupportObject.SupportStatus&&!this.g&&LcevcDil.SupportObject.webGLSupport(this.h)&&(this.h.classList.remove("shaka-hidden"),this.g=new LcevcDil.LcevcDil(this.j,this.h,this.l))}function No(e,t){var n=Lo;switch(t.mimeType){case"video/webm":n=Do;break;case"video/mp4":n=Po}e.g&&(e.i=t.id,e.g.setLevelSwitching(t.id,!0),e.g.setContainerFormat(n))}mo.Status={Hg:vo,qh:yo,Xg:2},z("shaka.util.Id3Utils",So),So.getID3Frames=ko,Co.prototype.parse=function(e){if(564>e.length)return this;for(var t=Math.max(0,Mo(e)),n=e.length-(e.length+t)%188,r=!1,i=t;i<n;i+=188)if(71===e[i]){var a=!!(64&e[i+1]),o=((31&e[i+1])<<8)+e[i+2];if(1<(48&e[i+3])>>4){var s=i+5+e[i+4];if(s===i+188)continue}else s=i+4;switch(o){case 0:a&&(s+=e[s]+1),this.o=(31&e[s+10])<<8|e[s+11];break;case 17:case 8191:break;case this.o:a&&(s+=e[s]+1),o={audio:-1,video:-1,Ed:-1,audioCodec:"",videoCodec:""};var u=s+3+((15&(a=e)[s+1])<<8|a[s+2])-4;for(s+=12+((15&a[s+10])<<8|a[s+11]);s<u;){var l=(31&a[s+1])<<8|a[s+2];switch(a[s]){case 15:-1===o.audio&&(o.audio=l,o.audioCodec="aac");break;case 21:-1===o.Ed&&(o.Ed=l);break;case 27:-1===o.video&&(o.video=l,o.videoCodec="avc");break;case 3:case 4:-1===o.audio&&(o.audio=l,o.audioCodec="mp3");break;case 36:-1===o.video&&(o.video=l,o.videoCodec="hvc")}s+=5+((15&a[s+3])<<8|a[s+4])}a=o,null==this.l&&(this.l=a.video),null==this.g&&(this.g=a.audio),null==this.j&&(this.j=a.Ed),r&&!this.s&&(r=!1,i=t-188),this.s=!0;break;case this.l:a=e.subarray(s,i+188),null==this.m&&(s=_o(a))&&null!=s.pts&&(this.m=s.pts/9e4),this.B.push(a);break;case this.g:a=e.subarray(s,i+188),null==this.h&&(s=_o(a))&&null!=s.pts&&(this.h=s.pts/9e4),this.u.push(a);break;case this.j:this.i.push(e.subarray(s,i+188));break;default:r=!0}}return this},Co.prototype.getStartTime=function(){return{audio:this.h,video:this.m}},z("shaka.util.TsParser",Co),Ro.prototype.release=function(){this.g&&(this.g.close(),this.g=null)},z("shaka.lcevc.Dil",Ro),Ro.prototype.release=Ro.prototype.release;var Lo=0,Do=1,Po=2;function Oo(e,t,n,r){var i=this;this.j=e,this.F=null,this.m=t,this.h={},this.L={},this.O={},this.g=null,this.H=!1,this.V=n||function(){},this.D=r||null,this.i={},this.u=new Or,this.o={},this.s=null,this.J=new it,this.l=function(e,t){var n=new MediaSource;return e.u.ma(n,"sourceopen",(function(){URL.revokeObjectURL(e.M),t.resolve()})),e.M=Zo(n),e.j.src=e.M,n}(this,this.J),this.G=new Dr((function(){return function(e){var t,n,r,i,a,o,s;return L((function(u){if(1==u.g){for(n in t=[],e.i)for(r=e.i[n],i=r[0],e.i[n]=r.slice(0,1),i&&t.push(i.p.catch(Ye)),a=c(r.slice(1)),o=a.next();!o.done;o=a.next())o.value.p.reject(new Ne(2,7,7003,void 0));for(s in e.g&&t.push(e.g.destroy()),e.m&&t.push(e.m.destroy()),e.o)t.push(e.o[s].destroy());return w(u,Promise.all(t),2)}e.u&&(e.u.release(),e.u=null),e.j&&(e.j.removeAttribute("src"),e.j.load(),e.j=null),e.F=null,e.l=null,e.g=null,e.m=null,e.h={},e.o={},e.s=null,e.i={},e.D=null,T(u)}))}(i)})),this.M="",this.B=!1,this.W=new it}function Uo(e,t,n){e.g||(e.g=new qt(e.m));var r=e.g;e=e.H,"application/cea-608"!=t&&"application/cea-708"!=t&&(r.j=(0,Zt[t])(),r.j.setSequenceMode?r.j.setSequenceMode(n):X('Text parsers should have a "setSequenceMode" method!'),r.u=e)}function Bo(e){return!e.l||"ended"==e.l.readyState}function jo(e,t){return t==tt?e.g.g:bo(zo(e,t))}function Fo(e,t){return t==tt?e.g.h:xo(zo(e,t))}function zo(e,t){try{return e.h[t].buffered}catch(n){return null}}function Go(e,t,n,r,i,a,o){var s,u,l,d,h,f,p,g,m,v,y,b,x,A,S,E,I,k,C,_,M,R;return a=void 0!==a&&a,o=void 0!==o&&o,L((function(N){switch(N.g){case 1:if(t!=(s=nt).X){N.A(2);break}if(!e.B){N.A(3);break}return w(N,e.W,4);case 4:u=N.h,e.g.s=u;case 3:return w(N,function(e,t,n,r){var i,a,o,s;return L((function(u){return 1==u.g?w(u,Promise.resolve(),2):e.j&&e.i?null==n||null==r?(e.j.parseInit(_e(t)),u.return()):(i=e.u?n:e.s,a={periodStart:e.s,segmentStart:n,segmentEnd:r,vttOffset:i},o=e.j.parseMedia(_e(t),a),s=o.filter((function(t){return t.startTime>=e.l&&t.startTime<e.m})),e.i.append(s),null==e.g&&(e.g=Math.max(n,e.l)),e.h=Math.min(r,e.m),void T(u)):u.return()}))}(e.g,n,r?r.startTime:null,r?r.endTime:null),5);case 5:return N.return();case 2:if(l=_e(n),d=e.L[t],e.o[t]&&(d=e.o[t].o),0>Mo(l)?ts.includes(d)&&((g=ko(l)).length&&r&&(m={cueTime:r.startTime,data:l,frames:g,dts:r.startTime,pts:r.startTime},e.V([m],0,r.endTime))):(h=(new Co).parse(l),f=r.startTime-(h.getStartTime()[t]||0),p=function(e){for(var t=[],n=new Uint8Array(0),r=e.i.length-1;0<=r;r--){var i=_o(n=Lt(e.i[r],n));i&&(t.unshift({cueTime:i.pts?i.pts/9e4:null,data:i.data,frames:ko(i.data),dts:i.dts,pts:i.pts}),n=new Uint8Array(0))}return t}(h),p.length&&e.V(p,f,r?r.endTime:null)),!e.o[t]){i&&t==s.va&&(e.g||Uo(e,"text/vtt",e.B),e.s||(e.s=new fo(d)),r?(v=po(e.s,n)).length&&(y=e.h[s.va].timestampOffset,Jt(e.g,v,r.startTime,r.endTime,y)):e.s.init(n)),N.A(6);break}return a&&e.o[t].g.resetCaptions(),w(N,function(e,t){return e.j=!0,e.h=new it,e.l=[],e.i=[],t=_e(t),e.g.push(t),e.g.flush(),e.j&&e.h.reject(new Ne(2,3,3018)),e.h}(e.o[t],n),7);case 7:b=N.h,e.g||Uo(e,"text/vtt",e.B),b.captions&&b.captions.length&&(x=e.h[s.va].timestampOffset,A=function(e){for(var t=[],n=(e=c(e)).next();!n.done;n=e.next())n=n.value,t.push({stream:n.stream,cue:new ae(n.startTime,n.endTime,n.text)});return t}(b.captions),Jt(e.g,A,r?r.startTime:null,r?r.endTime:null,x)),n=b.data;case 6:if(n=function(e,t,n,r){var i=e.O[r];return null==n&&i&&(dt()||ct())&&"mp4"==e.L[r].split(";")[0].split("/")[1]&&(t=function(e){function t(){i=!0}function n(e){a.push(e),Xr(e)}e=_e(e);var r,i=!1,a=[],o=[];if((new Wr).box("moov",n).box("trak",n).box("mdia",n).box("minf",n).box("stbl",n).P("stsd",(function(e){r=e,a.push(e),qr(e)})).P("encv",t).P("enca",t).P("hev1",(function(e){o.push({box:e,lb:1701733238})})).P("hvc1",(function(e){o.push({box:e,lb:1701733238})})).P("avc1",(function(e){o.push({box:e,lb:1701733238})})).P("avc3",(function(e){o.push({box:e,lb:1701733238})})).P("ac-3",(function(e){o.push({box:e,lb:1701733217})})).P("ec-3",(function(e){o.push({box:e,lb:1701733217})})).P("mp4a",(function(e){o.push({box:e,lb:1701733217})})).parse(e),i)return e;if(0==o.length||!r)throw Nt(e),new Ne(2,3,3019);o.reverse();for(var s=c(o),u=s.next();!u.done;u=s.next())u=u.value,e=Zi(e,r,u.box,a,u.lb);return e}(t)),t}(e,n,r?r.startTime:null,t),S=e.h[t],E=es,!e.B||S.mode==E||!r){N.A(8);break}if(I=e.l.duration,!(t==s.va||!(s.va in e.h))){N.A(9);break}return k=[S.appendWindowStart,S.appendWindowEnd],S.appendWindowStart=0,S.appendWindowEnd=1/0,C=S.timestampOffset,S.timestampOffset=0,w(N,Yo(e,t,(function(){return Ko(e,t,n)})),10);case 10:return w(N,Yo(e,t,(function(){return Wo(e,t)})),11);case 11:return S.timestampOffset=C,S.appendWindowStart=k[0],S.appendWindowEnd=k[1],_=bo(zo(e,t)),M=(r.startTime||0)-(_||0),e.W.resolve(M),w(N,Yo(e,t,(function(){return Ho(e,t,0,I)})),12);case 12:if(t!=s.va){N.A(9);break}return w(N,Yo(e,t,(function(){e.j.currentTime-=.001,qo(e,t)})),9);case 9:return S.mode=E,w(N,e.Aa(I),8);case 8:return r&&e.B&&t!=s.X&&(a||o)&&(R=r.startTime,Yo(e,t,(function(){return Wo(e,t)})),Yo(e,t,(function(){return Xo(e,t,R)}))),w(N,Yo(e,t,(function(){Ko(e,t,n)})),16);case 16:T(N)}}))}function Vo(e,t){return L((function(n){return t==nt.X?e.g?w(n,e.g.remove(0,1/0),0):n.return():w(n,Yo(e,t,(function(){return Ho(e,t,0,e.l.duration)})),0)}))}function Ko(e,t,n){if("video"==t&&e.D){var r=e.D;r.g&&r.g.appendBuffer(n,"video",r.i)}e.h[t].appendBuffer(n)}function Ho(e,t,n,r){r<=n?qo(e,t):e.h[t].remove(n,r)}function Wo(e,t){var n=e.h[t].appendWindowStart,r=e.h[t].appendWindowEnd;e.h[t].abort(),e.h[t].appendWindowStart=n,e.h[t].appendWindowEnd=r,qo(e,t)}function Xo(e,t,n){0>n&&(n+=.001),e.h[t].timestampOffset=n,qo(e,t)}function qo(e,t){var n=e.i[t][0];n&&(n.p.resolve(),Qo(e,t))}function Yo(e,t,n){return Pr(e.G),n={start:n,p:new it},e.i[t].push(n),1==e.i[t].length&&Jo(e,t),n.p}function $o(e,t){var n,r,i,a,o;return L((function(s){switch(s.g){case 1:for(i in Pr(e.G),n=[],r={},e.h)r.Ub=new it,a={start:function(e){return function(){return e.Ub.resolve()}}(r),p:r.Ub},e.i[i].push(a),n.push(r.Ub),1==e.i[i].length&&a.start(),r={Ub:r.Ub};return A(s,2),w(s,Promise.all(n),4);case 4:E(s,3);break;case 2:throw I(s);case 3:try{t()}catch(u){throw new Ne(2,3,3015,u)}finally{for(o in e.h)Qo(e,o)}T(s)}}))}function Qo(e,t){e.i[t].shift(),Jo(e,t)}function Jo(e,t){var n=e.i[t][0];if(n)try{n.start()}catch(r){"QuotaExceededError"==r.name?n.p.reject(new Ne(2,3,3017,t)):n.p.reject(new Ne(2,3,3015,r)),Qo(e,t)}}(i=Oo.prototype).destroy=function(){return this.G.destroy()},i.init=function(e,t,n){n=void 0!==n&&n;var r,i,a,o,s,u,l,d,h=this;return L((function(f){if(1==f.g)return r=nt,w(f,h.J,2);for(h.B=n,i={},a=c(e.keys()),o=a.next();!o.done;i={na:i.na},o=a.next())i.na=o.value,s=e.get(i.na),u=Vt(s.mimeType,s.codecs),i.na==r.X?Uo(h,u,n):(!t&&Z(u)||!Bt(u,i.na)||(h.o[i.na]=new Ut(u),u=Ft(i.na,u)),l=u+h.F.sourceBufferExtraFeatures,d=h.l.addSourceBuffer(l),h.u.C(d,"error",function(e){return function(){h.i[e.na][0].p.reject(new Ne(2,3,3014,h.j.error?h.j.error.code:0))}}(i)),h.u.C(d,"updateend",function(e){return function(){return qo(h,e.na)}}(i)),h.h[i.na]=d,h.L[i.na]=u,h.i[i.na]=[],h.O[i.na]=!!s.drmInfos.length);T(f)}))},i.configure=function(e){this.F=e},i.Na=function(){var e={total:Ao(this.j.buffered),audio:Ao(zo(this,"audio")),video:Ao(zo(this,"video")),text:[]};if(this.g){var t=this.g.g,n=this.g.h;null!=t&&null!=n&&e.text.push({start:t,end:n})}return e},i.remove=function(e,t,n){var r=this;return L((function(i){return e==nt.X?w(i,r.g.remove(t,n),0):w(i,Yo(r,e,(function(){return Ho(r,e,t,n)})),0)}))},i.flush=function(e){var t=this;return L((function(n){return e==nt.X?n.return():w(n,Yo(t,e,(function(){t.j.currentTime-=.001,qo(t,e)})),0)}))},i.endOfStream=function(e){var t=this;return L((function(n){return w(n,$o(t,(function(){Bo(t)||(e?t.l.endOfStream(e):t.l.endOfStream())})),0)}))},i.Aa=function(e){var t=this;return L((function(n){return w(n,$o(t,(function(){if(e<t.l.duration)for(var n in t.h){var r={start:function(){},p:new it};t.i[n].unshift(r)}t.l.duration=e})),0)}))},i.getDuration=function(){return this.l.duration};var Zo=e.URL.createObjectURL,es="sequence",ts=["audio/aac","audio/ac3","audio/ec3","audio/mpeg"];function ns(e,t,n){this.i=e,this.m=t,this.o=this.j=1/0,this.g=1,this.h=this.l=null,this.s=0,this.u=!0,this.B=0,this.D=void 0===n||n,this.F=0,this.G=!1}function rs(e,t,n){this.l=n,this.j=e,this.s=as(e),this.g=e.g.currentTime,this.m=Date.now()/1e3,this.h=!1,this.o=0,this.u=t,this.i=function(){}}function is(e){this.g=e}function as(e){if(e.g.paused||0==e.g.playbackRate||0==e.g.buffered.length)var t=!1;else e:{t=e.g.currentTime;for(var n=(e=c(Ao(e.g.buffered))).next();!n.done;n=e.next())if(!(t<(n=n.value).start-.1||t>n.end-.5)){t=!0;break e}t=!1}return t}function os(e,t,n,r,i){var a=this;this.o=i,this.g=e,this.s=t,this.D=n,this.i=new Or,this.m=!1,this.B=e.readyState,this.u=0,this.h=r,this.l=!1,this.i.C(e,"waiting",(function(){return ss(a)})),this.j=new st((function(){ss(a)})).Ca(.25)}function ss(e){if(0!=e.g.readyState){if(e.g.seeking){if(!e.m)return}else e.m=!1;if(!e.g.paused||0==e.g.currentTime&&(e.g.autoplay||0!=e.g.currentTime)){var t;if(e.g.readyState!=e.B&&(e.B=e.g.readyState),!(t=!e.h)){var n=(t=e.h).j,r=as(n),i=n.g.currentTime,a=Date.now()/1e3;t.g==i&&t.s==r||(t.m=a,t.g=i,t.s=r,t.h=!1),(r=(i=a-t.m)>=t.u&&r&&!t.h)&&(t.i(t.g,i),t.h=!0,t.g=n.g.currentTime,t.o++,t.l(new vr("stalldetected"))),t=!r}t&&(t=e.g.currentTime,r=function(e,t,n){return!e||!e.length||1==e.length&&1e-6>e.end(0)-e.start(0)?null:0<=(e=Ao(e).findIndex((function(e,r,i){return e.start>t&&(0==r||i[r-1].end-t<=n)})))?e:null}(n=e.g.buffered,t,e.D.gapDetectionThreshold),null==r||0==r&&!e.l||((i=n.start(r))>=e.s.Oa()||.001>i-t||(0!=r&&n.end(r-1),e.g.currentTime=i,e.u++,e.o(new vr("gapjumped")))))}}}function us(e,t,n,r){t==HTMLMediaElement.HAVE_NOTHING||e.readyState>=t?r():(t=ls.value().get(t),n.ma(e,t,r))}(i=ns.prototype).getDuration=function(){return this.j},i.Kf=function(){return this.g},i.Xe=function(e){this.i=e},i.Aa=function(e){this.j=e},i.Pf=function(){return this.i},i.Ve=function(e){this.s=e},i.yc=function(e){this.u=e},i.me=function(e){this.o=e},i.We=function(e){this.m=e},i.Df=function(){return this.m},i.Ib=function(e){if(0!=e.length){for(var t=e[0].startTime,n=e[0].endTime,r=(e=c(e)).next();!r.done;r=e.next())r=r.value,t=Math.min(t,r.startTime),n=Math.max(n,r.endTime),this.g=Math.max(this.g,r.endTime-r.startTime);this.Td(t),this.h=Math.max(this.h,n),null!=this.i&&this.D&&!this.G&&(this.i=(Date.now()+this.s)/1e3-this.h-this.g)}},i.Md=function(){this.G=!0},i.Td=function(e){this.l=null==this.l?e:Math.min(this.l,e)},i.Sd=function(e){this.g=Math.max(this.g,e)},i.offset=function(e){null!=this.l&&(this.l+=e),null!=this.h&&(this.h+=e)},i.U=function(){return 1/0==this.j&&!this.u},i.jb=function(){return 1/0!=this.j&&!this.u},i.Pa=function(){return Math.max(this.B,this.gb()-this.o)},i.Ze=function(e){this.B=e},i.gb=function(){return this.U()||this.jb()?Math.min(Math.max(0,(Date.now()+this.s)/1e3-this.g-this.i)+this.F,this.j):this.h?Math.min(this.h,this.j):this.j},i.kc=function(e){var t=Math.max(this.l,this.B);return 1/0==this.o?Math.ceil(1e3*t)/1e3:Math.max(t,Math.min(this.gb()-this.o+e,this.Oa()))},i.Db=function(){return this.kc(0)},i.Oa=function(){return Math.max(0,this.gb()-(this.U()||this.jb()?this.m:0))},i.df=function(){return!(null==this.i||null!=this.h&&this.D)},i.Ue=function(e){this.F=e},z("shaka.media.PresentationTimeline",ns),ns.prototype.setAvailabilityTimeOffset=ns.prototype.Ue,ns.prototype.usingPresentationStartTime=ns.prototype.df,ns.prototype.getSeekRangeEnd=ns.prototype.Oa,ns.prototype.getSeekRangeStart=ns.prototype.Db,ns.prototype.getSafeSeekRangeStart=ns.prototype.kc,ns.prototype.getSegmentAvailabilityEnd=ns.prototype.gb,ns.prototype.setUserSeekStart=ns.prototype.Ze,ns.prototype.getSegmentAvailabilityStart=ns.prototype.Pa,ns.prototype.isInProgress=ns.prototype.jb,ns.prototype.isLive=ns.prototype.U,ns.prototype.offset=ns.prototype.offset,ns.prototype.notifyMaxSegmentDuration=ns.prototype.Sd,ns.prototype.notifyMinSegmentStartTime=ns.prototype.Td,ns.prototype.lockStartTime=ns.prototype.Md,ns.prototype.notifySegments=ns.prototype.Ib,ns.prototype.getDelay=ns.prototype.Df,ns.prototype.setDelay=ns.prototype.We,ns.prototype.setSegmentAvailabilityDuration=ns.prototype.me,ns.prototype.setStatic=ns.prototype.yc,ns.prototype.setClockOffset=ns.prototype.Ve,ns.prototype.getPresentationStartTime=ns.prototype.Pf,ns.prototype.setDuration=ns.prototype.Aa,ns.prototype.setPresentationStartTime=ns.prototype.Xe,ns.prototype.getMaxSegmentDuration=ns.prototype.Kf,ns.prototype.getDuration=ns.prototype.getDuration,rs.prototype.release=function(){this.l=this.j=null,this.i=function(){}},os.prototype.release=function(){this.i&&(this.i.release(),this.i=null),null!=this.j&&(this.j.stop(),this.j=null),this.h&&(this.h.release(),this.h=null),this.g=this.s=this.o=null},os.prototype.Wd=function(){this.l=!0,ss(this)};var ls=new at((function(){return new Map([[HTMLMediaElement.HAVE_METADATA,"loadedmetadata"],[HTMLMediaElement.HAVE_CURRENT_DATA,"loadeddata"],[HTMLMediaElement.HAVE_FUTURE_DATA,"canplay"],[HTMLMediaElement.HAVE_ENOUGH_DATA,"canplaythrough"]])}));function cs(e,t,n){var r=this;this.g=e,this.l=t,this.j=n,this.m=!1,this.h=new Or,this.i=new gs(e),us(this.g,HTMLMediaElement.HAVE_METADATA,this.h,(function(){fs(r,r.j)}))}function ds(e){return e.m?e.g.currentTime:e.j}function hs(e,t){0<e.g.readyState?ms(e.i,t):us(e.g,HTMLMediaElement.HAVE_METADATA,e.h,(function(){fs(e,e.j)}))}function fs(e,t){.001>Math.abs(e.g.currentTime-t)?ps(e):(e.h.ma(e.g,"seeking",(function(){ps(e)})),ms(e.i,0==e.g.currentTime?t:e.g.currentTime))}function ps(e){e.m=!0,e.h.C(e.g,"seeking",(function(){return e.l()}))}function gs(e){var t=this;this.h=e,this.m=10,this.l=this.j=this.i=0,this.g=new st((function(){0>=t.i||t.h.currentTime!=t.j?t.g.stop():(t.h.currentTime=t.l,t.i--)}))}function ms(e,t){e.j=e.h.currentTime,e.l=t,e.i=e.m,e.h.currentTime=t,e.g.Ca(.1)}function vs(e){this.g=e,this.j=!1,this.h=null,this.i=new Or}function ys(e,t,n,r,i,a){var o=this;this.i=e,this.g=t.presentationTimeline,this.B=t.minBufferTime||0,this.l=n,this.u=i,this.s=null,this.o=function(e,t,n){if(!t.stallEnabled)return null;var r=t.stallSkip;return t=new rs(new is(e),t.stallThreshold,n),function(e,t){e.i=t}(t,(function(){r?e.currentTime+=r:(e.pause(),e.play())})),t}(e,n,a),this.j=new os(e,t.presentationTimeline,n,this.o,a),this.h=new cs(e,(function(){var e=o.j;e.m=!0,e.l=!1;var t=ds(o.h);return e=xs(o,t),.001<Math.abs(e-t)&&(t=Date.now()/1e3,!o.s||o.s<t-1)?(o.s=t,hs(o.h,e),e=void 0):(o.u(),e=void 0),e}),function(e,t){return null==t?t=1/0>e.g.getDuration()?e.g.Db():e.g.Oa():0>t&&(t=e.g.Oa()+t),bs(e,ws(e,t))}(this,r)),this.m=new st((function(){if(0!=o.i.readyState&&!o.i.paused){var e=ds(o.h),t=o.g.Db(),n=o.g.Oa();3>n-t&&(t=n-3),e<t&&(e=xs(o,e),o.i.currentTime=e)}}))}function bs(e,t){var n=e.g.getDuration();return t>=n?n-e.l.durationBackoff:t}function xs(e,t){var n=Math.max(e.B,e.l.rebufferingGoal),r=e.l.safeSeekOffset,i=e.g.Db(),a=e.g.Oa(),o=e.g.getDuration();3>a-i&&(i=a-3);var s=e.g.kc(n),u=e.g.kc(r);return n=e.g.kc(n+r),t>=o?bs(e,t):t>a?a:t<i?wo(e.i.buffered,u)?u:n:t>=s||wo(e.i.buffered,t)?t:n}function ws(e,t){var n=e.g.Db();return t<n?n:t>(e=e.g.Oa())?e:t}function Ts(e){this.g=e,this.h=null,this.i=0,this.j=!1}function As(e,t){for(var n=(e=c(e.g)).next();!n.done;n=e.next())t(n.value)}function Ss(e,t,n){return new Ts([new mo(e,e+t,(function(){return n}),0,null,null,e,e,e+t)])}function Es(e,t,n){this.i=e,this.g=t,this.h=n}function Is(){Ts.call(this,[]),this.l=[]}function ks(e){var t=this;this.g=e,this.j=!1,this.i=this.g.Tc(),this.h=new st((function(){t.g.Me(.25*t.i)}))}function Cs(e){e.h.stop();var t=e.j?0:e.i;if(0<=t)try{return void(e.g.Tc()!=t&&e.g.le(t))}catch(n){}e.h.Ca(.25),0!=e.g.Tc()&&e.g.le(0)}function _s(e){var t=this;this.h=e,this.g=new Set,this.i=new st((function(){Ms(t,!1)})).Ca(.25)}function Ms(e,t){for(var n=c(e.g),r=n.next();!r.done;r=n.next())r.value.j(e.h.currentTime,t)}function Rs(e){xr.call(this),this.g=new Map,this.h=e}function Ns(e){xr.call(this);var t=this;this.g=new Set,this.i=e,this.h=new st((function(){for(var e=t.i(),n=c(t.g),r=n.next();!r.done;r=n.next())(r=r.value).endTime<e.start&&(t.g.delete(r),r=new vr("regionremove",new Map([["region",r]])),t.dispatchEvent(r))})).Ca(2)}function Ls(e){xr.call(this);var t=this;this.i=e,this.g=new Map,this.l=[{rb:null,qb:Os,ib:function(e,n){return Ds(t,"enter",e,n)}},{rb:Ps,qb:Os,ib:function(e,n){return Ds(t,"enter",e,n)}},{rb:Us,qb:Os,ib:function(e,n){return Ds(t,"enter",e,n)}},{rb:Os,qb:Ps,ib:function(e,n){return Ds(t,"exit",e,n)}},{rb:Os,qb:Us,ib:function(e,n){return Ds(t,"exit",e,n)}},{rb:Ps,qb:Us,ib:function(e,n){return Ds(t,"skip",e,n)}},{rb:Us,qb:Ps,ib:function(e,n){return Ds(t,"skip",e,n)}}],this.h=new Or,this.h.C(this.i,"regionremove",(function(e){t.g.delete(e.region)}))}function Ds(e,t,n,r){t=new vr(t,new Map([["region",n],["seeking",r]])),e.dispatchEvent(t)}cs.prototype.release=function(){this.h&&(this.h.release(),this.h=null),null!=this.i&&(this.i.release(),this.i=null),this.l=function(){},this.g=null},gs.prototype.release=function(){this.g&&(this.g.stop(),this.g=null),this.h=null},(i=vs.prototype).yd=function(){var e=this;us(this.g,HTMLMediaElement.HAVE_CURRENT_DATA,this.i,(function(){null==e.h||0==e.h?e.j=!0:(e.i.ma(e.g,"seeking",(function(){e.j=!0})),e.g.currentTime=Math.max(0,e.g.currentTime+e.h))}))},i.release=function(){this.i&&(this.i.release(),this.i=null),this.g=null},i.zd=function(e){this.h=this.j?this.h:e},i.Ic=function(){return(this.j?this.g.currentTime:this.h)||0},i.ue=function(){return 0},i.te=function(){return 0},i.Ne=function(){},(i=ys.prototype).yd=function(){this.m.Ca(.25)},i.release=function(){this.h&&(this.h.release(),this.h=null),this.j&&(this.j.release(),this.j=null),this.m&&(this.m.stop(),this.m=null),this.i=this.h=this.g=this.l=null,this.u=function(){}},i.zd=function(e){hs(this.h,e)},i.Ic=function(){var e=ds(this.h);return 0<this.i.readyState&&!this.i.paused?ws(this,e):e},i.ue=function(){return this.o?this.o.o:0},i.te=function(){return this.j.u},i.Ne=function(){this.j.Wd()},(i=Ts.prototype).release=function(){this.j||(this.g=[],this.h&&this.h.stop(),this.h=null)},i.cg=function(){this.j=!0},i.find=function(e){for(var t=this.g.length-1,n=t;0<=n;--n){var r=this.g[n],i=n<t?this.g[n+1].startTime:r.endTime;if(e>=r.startTime&&e<i)return n+this.i}return this.g.length&&e<this.g[0].startTime?this.i:null},i.get=function(e){return 0==this.g.length||0>(e-=this.i)||e>=this.g.length?null:this.g[e]},i.offset=function(e){if(!this.j)for(var t=c(this.g),n=t.next();!n.done;n=t.next())n.value.offset(e)},i.pc=function(e){if(!this.j&&e.length){var t=Math.round(1e3*e[0].startTime)/1e3;this.g=this.g.filter((function(e){return Math.round(1e3*e.startTime)/1e3<t})),this.g.push.apply(this.g,d(e))}},i.Hb=function(e,t){var n=this;e=e.filter((function(e){return e.endTime>t&&(0==n.g.length||e.endTime>n.g[0].startTime)})),this.pc(e),this.eb(t)},i.eb=function(e){if(!this.j){var t=this.g.length;this.g=this.g.filter((function(t){return t.endTime>e})),this.i+=t-this.g.length}},i.Wa=function(e,t,n){if(n=void 0!==n&&n,!this.j){for(;this.g.length&&this.g[this.g.length-1].startTime>=t;)this.g.pop();for(;this.g.length&&this.g[0].endTime<=e;)this.g.shift(),n||this.i++;0!=this.g.length&&(e=this.g[this.g.length-1],this.g[this.g.length-1]=new mo(e.startTime,t,e.u,e.Ba,e.ka,e.h,e.timestampOffset,e.appendWindowStart,e.appendWindowEnd,e.i,e.tilesLayout,e.s,e.g,e.status,e.l))}},i.fd=function(e,t){var n=this;this.j||(this.h&&this.h.stop(),this.h=new st((function(){var e=t();e?n.g.push.apply(n.g,d(e)):(n.h.stop(),n.h=null)})),this.h.Ca(e))},Ts.prototype[Symbol.iterator]=function(){return this.Cb(0)},Ts.prototype.Cb=function(e){var t=this.find(e);if(null==t)return null;t--;var n=this.get(t+1),r=-1;if(n&&0<n.i.length)for(var i=n.i.length-1;0<=i;--i){var a=n.i[i];if(e>=a.startTime&&e<a.endTime){t++,r=i-1;break}}return new Es(this,t,r)},z("shaka.media.SegmentIndex",Ts),Ts.forSingleSegment=Ss,Ts.prototype.getIteratorForTime=Ts.prototype.Cb,Ts.prototype.updateEvery=Ts.prototype.fd,Ts.prototype.fit=Ts.prototype.Wa,Ts.prototype.evict=Ts.prototype.eb,Ts.prototype.mergeAndEvict=Ts.prototype.Hb,Ts.prototype.offset=Ts.prototype.offset,Ts.prototype.get=Ts.prototype.get,Ts.prototype.find=Ts.prototype.find,Ts.prototype.markImmutable=Ts.prototype.cg,Ts.prototype.release=Ts.prototype.release,Es.prototype.vf=function(){return this.g},Es.prototype.current=function(){var e=this.i.get(this.g);return e&&0<e.i.length&&e.ya().length&&this.h>=e.i.length&&(this.g++,this.h=0,e=this.i.get(this.g)),e&&0<e.i.length?e.i[this.h]:e},Es.prototype.next=function(){var e=this.i.get(this.g);return e&&0<e.i.length?(this.h++,e.ya().length&&this.h==e.i.length&&(this.g++,this.h=0)):(this.g++,this.h=0),{value:e=this.current(),done:!e}},z("shaka.media.SegmentIterator",Es),Es.prototype.next=Es.prototype.next,Es.prototype.current=Es.prototype.current,Es.prototype.currentPosition=Es.prototype.vf,v(Is,Ts),(i=Is.prototype).clone=function(){var e=new Is;return e.l=this.l.slice(),e},i.release=function(){for(var e=c(this.l),t=e.next();!t.done;t=e.next())t.value.release();this.l=[]},i.find=function(e){for(var t=0,n=c(this.l),r=n.next();!r.done;r=n.next()){var i=(r=r.value).find(e);if(null!=i)return i+t;t+=r.i+r.g.length}return null},i.get=function(e){for(var t=0,n=c(this.l),r=n.next();!r.done;r=n.next()){var i=(r=r.value).get(e-t);if(i)return i;t+=r.i+r.g.length}return null},i.offset=function(){},i.pc=function(){},i.eb=function(){},i.Hb=function(){},i.Wa=function(){},i.fd=function(){},z("shaka.media.MetaSegmentIndex",Is),Is.prototype.updateEvery=Is.prototype.fd,Is.prototype.fit=Is.prototype.Wa,Is.prototype.mergeAndEvict=Is.prototype.Hb,Is.prototype.evict=Is.prototype.eb,Is.prototype.merge=Is.prototype.pc,Is.prototype.offset=Is.prototype.offset,Is.prototype.get=Is.prototype.get,Is.prototype.find=Is.prototype.find,Is.prototype.release=Is.prototype.release,ks.prototype.release=function(){this.h&&(this.h.stop(),this.h=null),this.g=null},ks.prototype.set=function(e){this.i=e,Cs(this)},ks.prototype.Pc=function(){return this.g.Pc()},_s.prototype.release=function(){this.i.stop();for(var e=c(this.g),t=e.next();!t.done;t=e.next())t.value.release();this.g.clear()},v(Rs,xr),Rs.prototype.release=function(){this.g.clear(),xr.prototype.release.call(this)},Rs.prototype.j=function(e){for(var t=c(this.g.values()),n=t.next();!n.done;n=t.next()){e:{for(var r=(n=n.value).rc,i=r.length-1;0<=i;i--){var a=r[i];if(a.position<=e){r=a.Od;break e}}r=null}if((i=r)&&(i=!((i=n.Ae)===r||i&&r&&i.bandwidth==r.bandwidth&&i.audioSamplingRate==r.audioSamplingRate&&i.codecs==r.codecs&&i.contentType==r.contentType&&i.frameRate==r.frameRate&&i.height==r.height&&i.mimeType==r.mimeType&&i.channelsCount==r.channelsCount&&i.pixelAspectRatio==r.pixelAspectRatio&&i.width==r.width)),i)e:{if(i=e,a=r.contentType,(a=this.h()[a])&&0<a.length){var o=a[a.length-1].end;if(i>=a[0].start&&i<o){i=!0;break e}}i=!1}i&&(n.Ae=r,JSON.stringify(r),n=new vr("qualitychange",new Map([["quality",r],["position",e]])),this.dispatchEvent(n))}},v(Ns,xr),Ns.prototype.release=function(){this.g.clear(),this.h.stop(),xr.prototype.release.call(this)},v(Ls,xr),Ls.prototype.release=function(){this.i=null,this.g.clear(),this.h.release(),this.h=null,xr.prototype.release.call(this)},Ls.prototype.j=function(e,t){for(var n=c(this.i.g),r=n.next();!r.done;r=n.next()){r=r.value;var i=this.g.get(r),a=e<r.startTime?Ps:e>r.endTime?Us:Os;this.g.set(r,a);for(var o=c(this.l),s=o.next();!s.done;s=o.next())(s=s.value).rb==i&&s.qb==a&&s.ib(r,t)}};var Ps=1,Os=2,Us=3;function Bs(e,t,n,r,i){return e=kr(e,r,i),0==t&&null==n||(e.headers.Range=n?"bytes="+t+"-"+n:"bytes="+t+"-"),e}function js(e,t){var n=this;this.g=t,this.m=e,this.i=null,this.u=1,this.o=this.l=null,this.D=!1,this.j=new Map,this.B=!1,this.F=null,this.s=!1,this.h=new Dr((function(){return function(e){var t,n,r,i;return L((function(a){if(1==a.g){for(t=[],n=c(e.j.values()),r=n.next();!r.done;r=n.next())Js(i=r.value),t.push(Zs(i));return w(a,Promise.all(t),2)}e.j.clear(),e.g=null,e.m=null,e.i=null,T(a)}))}(n)}))}function Fs(e,t){var n=e.j.get("video");if(n){var r=n.stream;r&&(t?(t=r.trickModeVideo)&&!n.ob&&(Vs(e,t,!1,0,!1),n.ob=r):(r=n.ob)&&(n.ob=null,Vs(e,r,!0,0,!1)))}}function zs(e,t,n,r,i,a){n=void 0!==n&&n,r=void 0===r?0:r,i=void 0!==i&&i,a=void 0!==a&&a,e.l=t,e.B&&(t.video&&Vs(e,t.video,n,r,i,a),t.audio&&Vs(e,t.audio,n,r,i,a))}function Gs(e,t){e.o=t,e.B&&Vs(e,t,!0,0,!1)}function Vs(e,t,n,r,i,a){var o=e.j.get(t.type);o||t.type!=tt?o&&(o.ob&&(t.trickModeVideo?(o.ob=t,t=t.trickModeVideo):o.ob=null),o.stream!=t||i)&&(t.type==tt&&Uo(e.g.R,Vt(t.mimeType,t.codecs),e.m.sequenceMode),o.stream.closeSegmentIndex&&o.stream.closeSegmentIndex(),o.stream=t,o.aa=null,o.ve=!!a,n&&(o.ac?o.hd=!0:o.ra?(o.bb=!0,o.Nc=r,o.hd=!0):(Js(o),$s(e,o,!0,r).catch((function(t){e.g&&e.g.onError(t)})))),function(e,t){var n,r;return L((function(i){if(1==i.g)return t.ta?(n=t.stream,r=t.ta,n.segmentIndex?i.A(2):w(i,n.createSegmentIndex(),2)):i.return();if(t.ta!=r||t.stream!=n)return i.return();var a=e.g.Sc(),o=Fo(e.g.R,t.type),s=t.stream.segmentIndex.find(t.pa?t.pa.endTime:a),u=null==s?null:t.stream.segmentIndex.get(s);s=u&&u.ka?u.ka-u.Ba:null,u&&!s&&(s=(u.endTime-u.getStartTime())*(t.stream.bandwidth||0)/8),s?((u=u.h)&&(s+=(u.ka?u.ka-u.Ba:null)||0),a=8*s/(u=e.g.getBandwidthEstimate())<(o||0)-a-Math.max(e.m.minBufferTime||0,e.i.rebufferingGoal)||t.ta.h.g>s):a=!1,a&&t.ta.abort(),T(i)}))}(e,o).catch((function(t){e.g&&e.g.onError(t)}))):function(e,t){var n,r,i,a;L((function(o){switch(o.g){case 1:return n=nt,A(o,2),w(o,Vo(e.g.R,n.X),4);case 4:E(o,3);break;case 2:r=I(o),e.g&&e.g.onError(r);case 3:i=Vt(t.mimeType,t.codecs),Uo(e.g.R,i,e.m.sequenceMode),(e.g.R.m.isTextVisible()||e.i.alwaysStreamText)&&(a=Hs(t),e.j.set(n.X,a),Qs(e,a,0)),T(o)}}))}(e,t)}function Ks(e,t){t.ac||t.bb||(t.ra?(t.bb=!0,t.Nc=0):null==jo(e.g.R,t.type)?null==t.Ka&&Qs(e,t,0):(Js(t),$s(e,t,!1,0).catch((function(t){e.g&&e.g.onError(t)}))))}function Hs(e){return{stream:e,type:e.type,aa:null,pa:null,Zc:null,Kd:null,Jd:null,Id:null,ob:null,endOfStream:!1,ra:!1,Ka:null,bb:!1,Nc:0,hd:!1,ac:!1,vc:!0,Rd:!1,be:!1,nc:!1,ta:null}}function Ws(t,n){var r,i,a,o,s;return L((function(u){switch(u.g){case 1:if(Pr(t.h),n.ra||null==n.Ka||n.ac)return u.return();if(n.Ka=null,!n.bb){u.A(2);break}return w(u,$s(t,n,n.hd,n.Nc),3);case 3:return u.return();case 2:if(n.stream.segmentIndex){u.A(4);break}return r=n.stream,w(u,n.stream.createSegmentIndex(),5);case 5:if(r!=n.stream)return r.closeSegmentIndex&&r.closeSegmentIndex(),n.ra||n.Ka||Qs(t,n,0),u.return();case 4:A(u,6),i=function(t,n){if(qs(n))return function(e,t){var n=Fo(e,"video")||0;$t(e.g,t,n)}(t.g.R,n.stream.originalId||""),null;n.type==tt&&function(e){e.g&&$t(e.g,"",0)}(t.g.R);var r=t.g.Sc(),i=n.pa?n.pa.endTime:r,a=function(e,t,n){return t==tt?null==(e=e.g).h||e.h<n?0:e.h-Math.max(n,e.g):To(e=zo(e,t),n)}(t.g.R,n.type,r),o=Math.max(t.m.minBufferTime||0,t.i.rebufferingGoal,t.i.bufferingGoal)*t.u,s=t.m.presentationTimeline.getDuration()-i,u=Fo(t.g.R,n.type);if(1e-6>s&&u)return n.endOfStream=!0,"video"==n.type&&(t=t.j.get(tt))&&qs(t)&&(t.endOfStream=!0),null;if(n.endOfStream=!1,a>=o)return t.i.updateIntervalSeconds/2;if(a=function(e,t,n,r){if(t.aa)return t.aa.current();if(t.pa||r)return n=t.pa?t.pa.endTime:r,t.Rd=!0,t.aa=t.stream.segmentIndex.Cb(n),t.aa&&t.aa.next().value;e=e.i.inaccurateManifestTolerance,r=Math.max(n-e,0);var i=null;return e&&(t.aa=t.stream.segmentIndex.Cb(r),i=t.aa&&t.aa.next().value),i||(t.aa=t.stream.segmentIndex.Cb(n),i=t.aa&&t.aa.next().value),i}(t,n,r,u),!a)return t.i.updateIntervalSeconds;for(o=1/0,s=c(s=Array.from(t.j.values())),u=s.next();!u.done;u=s.next())qs(u=u.value)||u.aa&&!u.aa.current()||(o=Math.min(o,u.pa?u.pa.endTime:r));return i>=o+t.m.presentationTimeline.g?t.i.updateIntervalSeconds:(function(t,n,r,i){var a,o,s,u,l,c,d,h,f,p,g,m,v,y;return L((function(b){switch(b.g){case 1:if(a=nt,o=n.stream,s=n.aa,n.ra=!0,A(b,2),2==i.Eb())throw new Ne(1,1,1011);return w(b,function(e,t,n){var r,i,a,o,s,u,l,c;return L((function(d){return r=[],i=Math.max(0,n.appendWindowStart-.1),a=n.appendWindowEnd+.01,(o=n.timestampOffset)==t.Kd&&i==t.Jd&&a==t.Id||(s=function(){var n;return L((function(r){if(1==r.g)return A(r,2),t.Jd=i,t.Id=a,t.Kd=o,w(r,function(e,t,n,r,i,a){return L((function(o){return t==nt.X?(a||(e.g.s=n),function(e,t,n){e.l=t,e.m=n}(e.g,r,i),o.return()):w(o,Promise.all([Yo(e,t,(function(){return Wo(e,t)})),a?Promise.resolve():Yo(e,t,(function(){return Xo(e,t,n)})),Yo(e,t,(function(){e.h[t].appendWindowStart=0,e.h[t].appendWindowEnd=i,e.h[t].appendWindowStart=r,qo(e,t)}))]),0)}))}(e.g.R,t.type,o,i,a,e.m.sequenceMode),4);if(2!=r.g)return E(r,0);throw n=I(r),t.Jd=null,t.Id=null,t.Kd=null,n}))},r.push(s())),!function(e,t){return e&&t?e.lc()==t.lc()&&e.hc()==t.hc()&&ie(e.ya(),t.ya()):e==t}(n.h,t.Zc)&&(t.Zc=n.h)&&(u=Ys(e,t,n.h),l=function(){var r,i,a;return L((function(o){switch(o.g){case 1:return A(o,2),w(o,u,4);case 4:return r=o.h,Pr(e.h),(new Wr).box("moov",Xr).box("trak",Xr).box("mdia",Xr).P("mdhd",(function(e){e=ao(e.reader||0,e.version||0),n.h.timescale=e.timescale})).parse(r),i=t.stream.closedCaptions&&0<t.stream.closedCaptions.size,w(o,e.g.xe(t.type,r),5);case 5:return w(o,Go(e.g.R,t.type,r,null,i),6);case 6:E(o,0);break;case 2:throw a=I(o),t.Zc=null,a}}))},e.g.fg(n.startTime,n.h),r.push(l())),e.m.sequenceMode&&(c=t.pa?t.pa.m:null,n.m!=c||t.Rd)&&(t.Rd=!1,r.push(function(e,t,n){return L((function(r){return t==nt.X?r.return():(Yo(e,t,(function(){return Wo(e,t)})),w(r,Yo(e,t,(function(){return Xo(e,t,n)})),0))}))}(e.g.R,t.type,n.startTime))),w(d,Promise.all(r),0)}))}(t,n,i),4);case 4:return Pr(t.h),t.s?b.return():(u="video/mp4"==o.mimeType||"audio/mp4"==o.mimeType,l=e.ReadableStream,t.i.lowLatencyMode&&l&&u&&!i.l?(d=new Uint8Array(0),f=h=!1,p=function(e){var a,s,u;return L((function(l){return h?l.return():(f=!0,Pr(t.h),t.s?l.return():(d=function(e,t){var n=new Uint8Array(e.length+t.length);return n.set(e),n.set(t,e.length),n}(d,e),a=!1,s=0,(new Wr).box("mdat",(function(e){s=e.size+e.start,a=!0})).parse(d,!1,!0),a?(u=d.subarray(0,s),d=d.subarray(s),w(l,Xs(t,n,r,o,i,u),0)):l.A(0)))}))},w(b,Ys(t,n,i,p),11)):w(b,Ys(t,n,i),7));case 7:if(c=b.h,Pr(t.h),t.s)return b.return();if(!i.l){b.A(8);break}return w(b,function(t,n,r){var i,a,o,s;return L((function(u){if(1==u.g)return(i=n.l).cryptoKey?u.A(2):w(u,i.fetchKey(),3);if(!(a=i.iv))for(a=_e(new ArrayBuffer(16)),o=i.firstMediaSequenceNumber+r.g,s=a.byteLength-1;0<=s;s--)a[s]=255&o,o>>=8;return u.return(e.crypto.subtle.decrypt({name:"AES-CBC",iv:a},i.cryptoKey,t))}))}(c,i,s),9);case 9:c=b.h;case 8:return Pr(t.h),n.bb?(n.ra=!1,Qs(t,n,0),b.return()):w(b,Xs(t,n,r,o,i,c),6);case 11:if(g=b.h,f){b.A(6);break}return h=!0,Pr(t.h),t.s?b.return():n.bb?(n.ra=!1,Qs(t,n,0),b.return()):w(b,Xs(t,n,r,o,i,g),6);case 6:if(Pr(t.h),t.s)return b.return();n.pa=i,s.next(),n.ra=!1,n.be=!1,m=t.g.R.Na(),v=m[n.type],JSON.stringify(v),n.bb||t.g.Wd(i.startTime,i.endTime,n.type),Qs(t,n,0),E(b,0);break;case 2:if(y=I(b),Pr(t.h,y),t.s)return b.return();if(n.ra=!1,7001==y.code)n.ra=!1,Js(n),Qs(t,n,0),b.A(0);else if(n.type==a.X&&t.i.ignoreTextStreamFailures)t.j.delete(a.X),b.A(0);else{if(3017!=y.code)return n.nc=!0,y.severity=2,w(b,eu(t,y),0);(function(e,t,n){if(!Array.from(e.j.values()).some((function(e){return e!=t&&e.be}))){var r=Math.round(100*e.u);if(20<r)e.u-=.2;else{if(!(4<r))return t.nc=!0,e.s=!0,void e.g.onError(n);e.u-=.04}t.be=!0}Qs(e,t,4)})(t,n,y),b.A(0)}}}))}(t,n,r,a).catch((function(){})),null)}(t,n),null!=i&&(Qs(t,n,i),n.nc=!1),E(u,7);break;case 6:return a=I(u),w(u,eu(t,a),8);case 8:return u.return();case 7:if(o=Array.from(t.j.values()),!t.B||!o.every((function(e){return e.endOfStream}))){u.A(0);break}return w(u,t.g.R.endOfStream(),10);case 10:Pr(t.h),0!=(s=t.g.R.getDuration())&&s<t.m.presentationTimeline.getDuration()&&t.m.presentationTimeline.Aa(s),T(u)}}))}function Xs(e,t,n,r,i,a){var o,s,u,l,c,d;return L((function(h){switch(h.g){case 1:return o=r.closedCaptions&&0<r.closedCaptions.size,u=null!=r.emsgSchemeIdUris&&0<r.emsgSchemeIdUris.length||e.i.dispatchAllEmsgBoxes,l=e.i.parsePrftBox&&!e.D,(u||l)&&(s=new Wr),u&&s.P("emsg",(function(t){var n=r.emsgSchemeIdUris;if(0===t.version)var a=t.reader.sc(),o=t.reader.sc(),s=t.reader.K(),u=t.reader.K(),l=t.reader.K(),c=t.reader.K(),d=i.startTime+u/s;else s=t.reader.K(),u=(d=t.reader.$a()/s+i.timestampOffset)-i.startTime,l=t.reader.K(),c=t.reader.K(),a=t.reader.sc(),o=t.reader.sc();t=t.reader.Za(t.reader.S.byteLength-t.reader.Z()),(n&&n.includes(a)||e.i.dispatchAllEmsgBoxes)&&("urn:mpeg:dash:event:2012"==a?e.g.gg():"https://aomedia.org/emsg/ID3"==a?(n=ko(t)).length&&i&&e.g.hg([{cueTime:i.startTime,data:t,frames:n,dts:i.startTime,pts:i.startTime}],0,i.endTime):(n=new vr("emsg",n=(new Map).set("detail",{startTime:d,endTime:d+l/s,schemeIdUri:a,value:o,timescale:s,presentationTimeDelta:u,eventDuration:l,id:c,messageData:t})),e.g.onEvent(n)))})),l&&s.P("prft",(function(t){e:{if(!e.D&&i.h.timescale){t.reader.K();var n=t.reader.K();if(n=1e3*n+t.reader.K()/Math.pow(2,32)*1e3,0===t.version)var r=t.reader.K();else try{r=t.reader.$a()}catch(a){e.D=!0,r=void 0;break e}t=new Date(new Date(Date.UTC(1900,0,1,0,0,0)).getTime()+n).getTime(),r=new vr("prft",r=(new Map).set("detail",{wallClockTime:t,programStartDate:new Date(t-r/i.h.timescale*1e3)})),e.g.onEvent(r),e.D=!0}r=void 0}return r})),(u||l)&&s.parse(a),w(h,function(e,t,n){var r,i,a;return L((function(o){if(1==o.g)return r=Math.max(e.i.bufferBehind,e.m.presentationTimeline.g),null==(i=jo(e.g.R,t.type))||.01>=(a=n-i-r)?o.return():w(o,e.g.R.remove(t.type,i,i+a),2);Pr(e.h),T(o)}))}(e,t,n),2);case 2:return Pr(e.h),c=t.vc,t.vc=!1,d=t.ve,t.ve=!1,w(h,e.g.xe(t.type,a),3);case 3:return w(h,Go(e.g.R,t.type,a,i,o,c,d),4);case 4:Pr(e.h),T(h)}}))}function qs(e){return e&&e.type==tt&&("application/cea-608"==e.stream.mimeType||"application/cea-708"==e.stream.mimeType)}function Ys(e,t,n,r){var i,a,o,s,u;return L((function(l){return 1==l.g?(i=Rr,a=Bs(n.ya(),n.Ba,n.ka,e.i.retryParameters,r),o=t.stream,e.g.modifySegmentRequest(a,{type:o.type,init:n instanceof go,duration:n.endTime-n.startTime,mimeType:o.mimeType,codecs:o.codecs,bandwidth:o.bandwidth}),s=e.g.kb.request(i,a),t.ta=s,w(l,s.promise,2)):(u=l.h,t.ta=null,l.return(u.data))}))}function $s(e,t,n,r){var i,a;return L((function(o){return 1==o.g?(t.bb=!1,t.hd=!1,t.Nc=0,t.ac=!0,t.pa=null,t.Zc=null,t.aa=null,r?(i=e.g.Sc(),a=e.g.R.getDuration(),w(o,e.g.R.remove(t.type,i+r,a),3)):w(o,Vo(e.g.R,t.type),4)):3!=o.g?(Pr(e.h),n?w(o,e.g.R.flush(t.type),3):o.A(3)):(Pr(e.h),t.ac=!1,t.endOfStream=!1,t.ra||t.Ka||Qs(e,t,0),void T(o))}))}function Qs(e,t,n){var r=t.type;(r!=tt||e.j.has(r))&&(t.Ka=new ot((function(){var n;return L((function(r){return 1==r.g?(A(r,2),w(r,Ws(e,t),4)):2!=r.g?E(r,0):(n=I(r),e.g&&e.g.onError(n),void T(r))}))})).N(n))}function Js(e){null!=e.Ka&&(e.Ka.stop(),e.Ka=null)}function Zs(e){return L((function(t){return e.ta?w(t,e.ta.abort(),0):t.A(0)}))}function eu(e,t){return L((function(n){if(1==n.g)return w(n,cr(e.F),2);Pr(e.h),e.g.onError(t),t.handled||e.i.failureCallback(t),T(n)}))}function tu(e,t){var n=Gl(),r=this;this.j=t,this.i=e,this.l=n,this.o=null,this.m=[],this.h=this.g=null,this.u=Promise.resolve().then((function(){return function(e){return L((function(t){if(e.s.g)t=t.A(0);else{if(0==e.m.length||e.g&&!e.g.hb)var n=!1;else{e.g&&(e.g.Ia.mb(),e.g=null);var r=(n=e.m.shift()).create(e.l);r?(n.Ia.Jb(),e.g={node:r.node,payload:r.payload,hb:r.hb,Ia:n.Ia}):n.Ia.dd(),n=!0}n?n=Promise.resolve():e.g?n=function(e){var t,n;return L((function(r){switch(r.g){case 1:return e.i=e.j.Mf(e.i,e.l,e.g.node,e.g.payload),A(r,2),e.h=e.j.yf(e.i,e.l,e.g.payload),w(r,e.h.promise,4);case 4:e.h=null,e.i==e.g.node&&(e.g.Ia.bd(),e.g=null),E(r,0);break;case 2:return 7001==(t=I(r)).code?e.g.Ia.mb():e.g.Ia.onError(t),e.g=null,e.h=null,n=e,w(r,e.j.handleError(e.l,t),5);case 5:n.i=r.h,T(r)}}))}(e):(e.j.eg(e.i),e.o=new it,n=e.o),t=w(t,n,1)}return t}))}(r)})),this.s=new Dr((function(){return function(e){var t,n;return L((function(r){if(1==r.g)return e.h&&e.h.abort(),ru(e),w(r,e.u,2);for(e.g&&e.g.Ia.mb(),t=c(e.m),n=t.next();!n.done;n=t.next())n.value.Ia.mb();e.g=null,e.m=[],e.j=null,T(r)}))}(r)}))}function nu(e,t){var n={Jb:function(){},bd:function(){},mb:function(){},onError:function(){},dd:function(){},wh:function(){}};return e.m.push({create:t,Ia:n}),e.h&&e.h.abort(),ru(e),n}function ru(e){e.o&&(e.o.resolve(),e.o=null)}function iu(e){var t=[],n=700<=e.fontWeight,r="italic"==e.fontStyle,i=e.textDecoration.includes("underline");return n&&t.push("b"),r&&t.push("i"),i&&t.push("u"),n=t.reduce((function(e,t){return e+"<"+t+">"}),""),t=t.reduceRight((function(e,t){return e+"</"+t+">"}),""),e.lineBreak?"\n":e.nestedCues.length?e.nestedCues.map(iu).join(""):n+e.payload+t}function au(e,t){for(var n=(e=c(e)).next();!n.done;n=e.next())if((n=n.value).isContainer)au(n.nestedCues,t);else{var r=n.clone();r.nestedCues=[],r.payload=iu(n),t.push(r)}return t}function ou(e){this.g=null;for(var t=c(Array.from(e.textTracks)),n=t.next();!n.done;n=t.next())(n=n.value).mode="disabled","Shaka Player TextTrack"==n.label&&(this.g=n);this.g||(this.g=e.addTextTrack("subtitles","Shaka Player TextTrack")),this.g.mode="hidden"}function su(e){if(e.startTime>=e.endTime)return null;var t=new VTTCue(e.startTime,e.endTime,e.payload);t.lineAlign=e.lineAlign,t.positionAlign=e.positionAlign,e.size&&(t.size=e.size);try{t.align=e.textAlign}catch(n){}return"center"==e.textAlign&&"center"!=t.align&&(t.align="middle"),"vertical-lr"==e.writingMode?t.vertical="lr":"vertical-rl"==e.writingMode&&(t.vertical="rl"),1==e.lineInterpretation&&(t.snapToLines=!1),null!=e.line&&(t.line=e.line),null!=e.position&&(t.position=e.position),t}function uu(e,t){var n=e.mode;e.mode="showing"==n?"showing":"hidden";for(var r=c(Array.from(e.cues)),i=r.next();!i.done;i=r.next())(i=i.value)&&t(i)&&e.removeCue(i);e.mode=n}function lu(){}function cu(e){for(;e.firstChild;)e.removeChild(e.firstChild)}function du(t,n){var r=this;this.j=!1,this.i=[],this.B=t,this.m=n,this.g=document.createElement("div"),this.g.classList.add("shaka-text-container"),this.g.style.textAlign="center",this.g.style.display="flex",this.g.style.flexDirection="column",this.g.style.alignItems="center",this.g.style.justifyContent="flex-end",this.m.appendChild(this.g),this.u=new st((function(){pu(r)})).Ca(.25),this.h=new Map,this.s=new Or,this.s.C(document,"fullscreenchange",(function(){pu(r,!0)})),this.l=null,"ResizeObserver"in e&&(this.l=new ResizeObserver((function(){pu(r,!0)})),this.l.observe(this.g)),this.o=new Map}function hu(e,t){for(;null!=t;){if(t==e.g)return!0;t=t.parentElement}return!1}function fu(e,t,n,r,i){for(var a=!1,o=[],s=[],u=(t=c(t)).next();!u.done;u=t.next()){u=u.value,i.push(u);var l=e.h.get(u),d=u.startTime<=r&&u.endTime>r,h=l?l.ef:null;l&&(o.push(l.Bd),l.tc&&o.push(l.tc),d||(a=!0,e.h.delete(u),l=null)),d&&(s.push(u),l?hu(e,h)||(a=!0):(gu(e,u,i),h=(l=e.h.get(u)).ef,a=!0)),0<u.nestedCues.length&&h&&fu(e,u.nestedCues,h,r,i),i.pop()}if(a){for(i=(r=c(o)).next();!i.done;i=r.next())(i=i.value).parentElement&&i.parentElement.removeChild(i);for(s.sort((function(e,t){return e.startTime!=t.startTime?e.startTime-t.startTime:e.endTime-t.endTime})),u=(s=c(s)).next();!u.done;u=s.next())(r=e.h.get(u.value)).tc?(n.appendChild(r.tc),r.tc.appendChild(r.Bd)):n.appendChild(r.Bd)}}function pu(e,t){if(e.g){var n=e.B.currentTime;if(!e.j||void 0!==t&&t){for(var r=(t=c(e.o.values())).next();!r.done;r=t.next())cu(r.value);cu(e.g),e.h.clear(),e.o.clear()}if(e.j){t=new Map;for(var i=(r=c(e.h.keys())).next();!i.done;i=r.next())i=i.value,t.set(i,e.h.get(i));fu(e,e.i,e.g,n,[])}}}function gu(e,t,n){var r=1<n.length,i=r?"span":"div";t.lineBreak&&(i="br"),r=!r&&0<t.nestedCues.length;var a=document.createElement(i);if("br"!=i&&function(e,t,n,r,i){var a=t.style,o=0==n.nestedCues.length,s=1<r.length;a.whiteSpace="pre-wrap";var u=n.payload.replace(/\s+$/g,(function(e){return"".repeat(e.length)}));if(a.webkitTextStrokeColor=n.textStrokeColor,a.webkitTextStrokeWidth=n.textStrokeWidth,a.color=n.color,a.direction=n.direction,a.opacity=n.opacity,a.paddingLeft=mu(n.linePadding,n,e.m),a.paddingRight=mu(n.linePadding,n,e.m),a.textShadow=n.textShadow,n.backgroundImage)a.backgroundImage="url('"+n.backgroundImage+"')",a.backgroundRepeat="no-repeat",a.backgroundSize="contain",a.backgroundPosition="center",a.width="100%",a.height="100%";else{if(n.nestedCues.length)var l=t;else l=document.createElement("span"),t.appendChild(l);n.border&&(l.style.border=n.border),i||((t=function(e,t){for(var n=e.length-1;0<=n;n--){var r=t(e[n]);if(r||0===r)return r}return null}(r,(function(e){return e.backgroundColor})))?l.style.backgroundColor=t:u&&(l.style.backgroundColor="rgba(0, 0, 0, 0.8)")),u&&(l.textContent=u)}s&&!r[r.length-1].isContainer?a.display="inline":(a.display="flex",a.flexDirection="column",a.alignItems="center",a.justifyContent="before"==n.displayAlign?"flex-start":"center"==n.displayAlign?"center":"flex-end"),o||(a.margin="0"),a.fontFamily=n.fontFamily,a.fontWeight=n.fontWeight.toString(),a.fontStyle=n.fontStyle,a.letterSpacing=n.letterSpacing,a.fontSize=mu(n.fontSize,n,e.m),null!=n.line&&1==n.lineInterpretation&&(a.position="absolute",n.writingMode==fe?(a.width="100%",n.lineAlign==ge?a.top=n.line+"%":"end"==n.lineAlign&&(a.bottom=100-n.line+"%")):"vertical-lr"==n.writingMode?(a.height="100%",n.lineAlign==ge?a.left=n.line+"%":"end"==n.lineAlign&&(a.right=100-n.line+"%")):(a.height="100%",n.lineAlign==ge?a.right=n.line+"%":"end"==n.lineAlign&&(a.left=100-n.line+"%"))),a.lineHeight=n.lineHeight,null!=n.position&&(n.writingMode==fe?a.paddingLeft=n.position:a.paddingTop=n.position),"line-left"==n.positionAlign?a.cssFloat="left":"line-right"==n.positionAlign&&(a.cssFloat="right"),a.textAlign=n.textAlign,a.textDecoration=n.textDecoration.join(" "),a.writingMode=n.writingMode,"writingMode"in document.documentElement.style&&a.writingMode==n.writingMode||(a.webkitWritingMode=n.writingMode),n.size&&(n.writingMode==fe?a.width=n.size+"%":a.height=n.size+"%")}(e,a,t,n,r),n=null,t.region&&t.region.id)if(i=(n=t.region).id+"_"+n.width+"x"+n.height+(n.heightUnits==Ae?"%":"px")+"-"+n.viewportAnchorX+"x"+n.viewportAnchorY+(n.viewportAnchorUnits==Ae?"%":"px"),e.o.has(i))n=e.o.get(i);else{var o=document.createElement("span"),s=n.heightUnits==Ae?"%":"px",u=n.widthUnits==Ae?"%":"px",l=n.viewportAnchorUnits==Ae?"%":"px";o.id="shaka-text-region---"+i,o.classList.add("shaka-text-region"),o.style.height=n.height+s,o.style.width=n.width+u,o.style.position="absolute",o.style.top=n.viewportAnchorY+l,o.style.left=n.viewportAnchorX+l,o.style.display="flex",o.style.flexDirection="column",o.style.alignItems="center",o.style.justifyContent="before"==t.displayAlign?"flex-start":"center"==t.displayAlign?"center":"flex-end",e.o.set(i,o),n=o}i=a,r&&((i=document.createElement("span")).classList.add("shaka-text-wrapper"),i.style.backgroundColor=t.backgroundColor,a.appendChild(i)),e.h.set(t,{Bd:a,ef:i,tc:n})}function mu(e,t,n){var r=(r=new RegExp(/(\d*\.?\d+)([a-z]+|%+)/).exec(e))?{value:Number(r[1]),unit:r[2]}:null;if(!r)return e;var i=r.value;switch(r.unit){case"%":return i/100*n.clientHeight/t.cellResolution.rows+"px";case"c":return n.clientHeight*i/t.cellResolution.rows+"px";default:return e}}function vu(e,t){this.h=e,this.g=t,this.j="",this.o=void 0,this.i=!1,this.m=!0,this.l=!1}function yu(e,t,n){try{if(e.g.enabled){var r={d:1e3*n.duration,st:e.h.U()?Ru:Mu};r.ot=function(e){var t=e.type;if(e.init)return ku;if("video"==t)return e.codecs.includes(",")?Iu:Eu;if("audio"==t)return Su;if("text"==t)return"application/mp4"===e.mimeType?_u:Cu}(n);var i=r.ot===Eu||r.ot===Su||r.ot===Iu||r.ot===_u;i&&(r.bl=function(e,t){if(t=e.h.Na()[t],!t.length)return NaN;var n=e.h.getCurrentTime();return(e=t.find((function(e){return e.start<=n&&e.end>=n})))?1e3*(e.end-n):NaN}(e,n.type)),n.bandwidth&&(r.br=n.bandwidth/1e3),i&&r.ot!==_u&&(r.tb=function(e,t){var n=e.h.Xa();if(!n.length)return NaN;e=n[0];for(var r=(n=c(n)).next();!r.done;r=n.next())"variant"===(r=r.value).type&&r.bandwidth>e.bandwidth&&(e=r);switch(t){case Eu:return e.videoBandwidth||NaN;case Su:return e.audioBandwidth||NaN;default:return e.bandwidth}}(e,r.ot)/1e3),xu(e,t,r)}}catch(a){q("CMCD_SEGMENT_ERROR","Could not generate segment CMCD data.",a)}}function bu(t){return t.j||(t.j=t.g.sessionId||e.crypto.randomUUID()),{v:1,sf:t.o,sid:t.j,cid:t.g.contentId,mtp:t.h.getBandwidthEstimate()/1e3}}function xu(e,t,n){n=void 0===n?{}:n;var r=void 0===r?e.g.useHeaders:r;if(e.g.enabled){Object.assign(n,bu(e)),n.pr=e.h.Rc();var i=n.ot===Eu||n.ot===Iu;if(e.l&&i&&(n.bs=!0,n.su=!0,e.l=!1),null==n.su&&(n.su=e.m),r)e=function(e){for(var t=Object.keys(e),n={},r=["Object","Request","Session","Status"],i=[{},{},{},{}],a={br:0,d:0,ot:0,tb:0,bl:1,dl:1,mtp:1,nor:1,nrr:1,su:1,cid:2,pr:2,sf:2,sid:2,st:2,v:2,bs:3,rtp:3},o=(t=c(t)).next();!o.done;o=t.next())o=o.value,i[null!=a[o]?a[o]:1][o]=e[o];for(e=0;e<i.length;e++)(a=wu(i[e]))&&(n["CMCD-"+r[e]]=a);return n}(n),Object.keys(e).length&&Object.assign(t.headers,e);else{var a=wu(n);a&&(t.uris=t.uris.map((function(e){return Tu(e,a)})))}}}function wu(e){function t(e){return 100*n(e/100)}function n(e){return Math.round(e)}for(var r,i=[],a={br:n,d:n,bl:t,dl:t,mtp:t,nor:function(e){return encodeURIComponent(e)},rtp:t,tb:n},o=Object.keys(e||{}).sort(),s=(o=c(o)).next();!s.done;s=o.next()){var u=e[s=s.value];if(!(r=u,Number.isNaN(r)||null==r||""===r||!1===r||"v"===s&&1===u||"pr"==s&&1===u)){var l=a[s];l&&(u=l(u));var d;d="string"===(l=typeof u)&&"ot"!==s&&"sf"!==s&&"st"!==s?s+"="+JSON.stringify(u):"boolean"===l?s:"symbol"===l?s+"="+u.description:s+"="+u,i.push(d)}}return i.join(",")}function Tu(e,t){return!t||e.includes("offline:")?e:((e=new De(e)).g.set("CMCD",t),e.toString())}(i=js.prototype).destroy=function(){return this.h.destroy()},i.configure=function(e){this.i=e,this.F=new lr({maxAttempts:Math.max(e.retryParameters.maxAttempts,2),baseDelay:e.retryParameters.baseDelay,backoffFactor:e.retryParameters.backoffFactor,fuzzFactor:e.retryParameters.fuzzFactor,timeout:0,stallTimeout:0,connectionTimeout:0},!0)},i.start=function(){var e=this;return L((function(t){if(1==t.g)return w(t,function(e){var t,n,r,i,a,o,s,u,l,d;return L((function(h){if(1==h.g){if(t=nt,!e.l)throw new Ne(2,5,5006);return n=new Map,r=new Set,e.l.audio&&(n.set(t.Hc,e.l.audio),r.add(e.l.audio)),e.l.video&&(n.set(t.va,e.l.video),r.add(e.l.video)),e.o&&(n.set(t.X,e.o),r.add(e.o)),i=e.g.R,a=e.i.forceTransmux,w(h,i.init(n,a,e.m.sequenceMode),2)}for(Pr(e.h),e.updateDuration(),o=c(n.keys()),s=o.next();!s.done;s=o.next())u=s.value,l=n.get(u),e.j.has(u)||(d=Hs(l),e.j.set(u,d),Qs(e,d,0));T(h)}))}(e),2);Pr(e.h),e.B=!0,T(t)}))},i.vc=function(){if(this.g)for(var e=this.g.Sc(),t=c(this.j.keys()),n=t.next();!n.done;n=t.next()){var r=n.value;(n=this.j.get(r)).aa=null;var i=this.g.R;if(r==tt?i=null!=(i=i.g).g&&null!=i.h&&(e>=i.g&&e<i.h):i=wo(i=zo(i,r),e),!i){if((null!=Fo(this.g.R,r)||n.ra)&&Ks(this,n),n.ta&&(n.ta.abort(),n.ta=null),r===tt&&(r=this.g.R).s)for((r=r.s.g).l=0,r.h=[],r.g=[],(i=r.i).i=[],i.h=[],i.g=0,Ja(r),i=(r=c(r.j.values())).next();!i.done;i=r.next())Xa(i.value);n.vc=!0}}},i.updateDuration=function(){var e=this.m.presentationTimeline.getDuration();1/0>e?this.g.R.Aa(e):this.g.R.Aa(Math.pow(2,32))},tu.prototype.destroy=function(){return this.s.destroy()},(i=ou.prototype).remove=function(e,t){return!!this.g&&(uu(this.g,(function(n){return n.startTime<t&&n.endTime>e})),!0)},i.append=function(e){var t=au(e,[]),n=[];e=this.g.cues?Array.from(this.g.cues):[];for(var r={},i=(t=c(t)).next();!i.done;r={sb:r.sb},i=t.next())r.sb=i.value,e.some(function(e){return function(t){return t.startTime==e.sb.startTime&&t.endTime==e.sb.endTime&&t.text==e.sb.payload}}(r))||(i=su(r.sb))&&n.push(i);for(r=(e=c(e=n.slice().sort((function(e,t){return e.startTime!=t.startTime?e.startTime-t.startTime:e.endTime!=t.endTime?e.endTime-t.startTime:"line"in VTTCue.prototype?n.indexOf(t)-n.indexOf(e):n.indexOf(e)-n.indexOf(t)})))).next();!r.done;r=e.next())this.g.addCue(r.value)},i.destroy=function(){return this.g&&(uu(this.g,(function(){return!0})),this.g.mode="disabled"),this.g=null,Promise.resolve()},i.isTextVisible=function(){return"showing"==this.g.mode},i.setTextVisibility=function(e){this.g.mode=e?"showing":"hidden"},z("shaka.text.SimpleTextDisplayer",ou),ou.prototype.setTextVisibility=ou.prototype.setTextVisibility,ou.prototype.isTextVisible=ou.prototype.isTextVisible,ou.prototype.destroy=ou.prototype.destroy,ou.prototype.append=ou.prototype.append,ou.prototype.remove=ou.prototype.remove,z("shaka.util.Dom",lu),lu.removeAllChildren=cu,(i=du.prototype).append=function(e){for(var t=[].concat(d(this.i)),n={},r=(e=c(e)).next();!r.done;n={Cc:n.Cc},r=e.next())n.Cc=r.value,t.some(function(e){return function(t){return oe(t,e.Cc)}}(n))||this.i.push(n.Cc);pu(this)},i.destroy=function(){this.m.removeChild(this.g),this.g=null,this.j=!1,this.i=[],this.u&&this.u.stop(),this.h.clear(),this.s&&(this.s.release(),this.s=null),this.l&&(this.l.disconnect(),this.l=null)},i.remove=function(e,t){if(!this.g)return!1;var n=this.i.length;return this.i=this.i.filter((function(n){return n.startTime<e||n.endTime>=t})),pu(this,n>this.i.length),!0},i.isTextVisible=function(){return this.j},i.setTextVisibility=function(e){this.j=e},z("shaka.text.UITextDisplayer",du),du.prototype.setTextVisibility=du.prototype.setTextVisibility,du.prototype.isTextVisible=du.prototype.isTextVisible,du.prototype.remove=du.prototype.remove,du.prototype.destroy=du.prototype.destroy,du.prototype.append=du.prototype.append,z("shaka.text.WebVttGenerator",(function(){}));var Au="m",Su="a",Eu="v",Iu="av",ku="i",Cu="c",_u="tt",Mu="v",Ru="l";function Nu(){}function Lu(e,t,n,r,i){var a,o=i in r,s=!0;for(a in t){var u=i+"."+a,l=o?r[i]:n[a];o||a in n?void 0===t[a]?void 0===l||o?delete e[a]:e[a]=wr(l):l.constructor==Object&&t[a]&&t[a].constructor==Object?(e[a]||(e[a]=wr(l)),u=Lu(e[a],t[a],l,r,u),s=s&&u):typeof t[a]!=typeof l||null==t[a]||"function"!=typeof t[a]&&t[a].constructor!=l.constructor?(W("Invalid config, wrong type for "+u),s=!1):("function"==typeof n[a]&&n[a].length!=t[a].length&&X("Unexpected number of arguments for "+u),e[a]=t[a]):(W("Invalid config, unrecognized key "+u),s=!1)}return s}function Du(e,t){for(var n={},r=n,i=0,a=0;!(0>(i=e.indexOf(".",i)));)0!=i&&"\\"==e[i-1]||(r[a=e.substring(a,i).replace(/\\\./g,".")]={},r=r[a],a=i+1),i+=1;return r[e.substring(a).replace(/\\\./g,".")]=t,n}function Pu(e,t){return e&&t}function Ou(){}function Uu(e){return new De(e=At(e)).Ha}function Bu(e,t,n){function r(e){Me(a).setUint32(o,e.byteLength,!0),o+=4,a.set(_e(e),o),o+=e.byteLength}if(!n||!n.byteLength)throw new Ne(2,6,6015);var i;i="string"==typeof t?Et(t,!0):t,e=Et(e=At(e),!0);var a=new Uint8Array(12+e.byteLength+i.byteLength+n.byteLength),o=0;return r(e),r(i),r(n),a}function ju(){}function Fu(){var e=1/0;navigator.connection&&navigator.connection.saveData&&(e=360);var t={retryParameters:{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:3e4,stallTimeout:5e3,connectionTimeout:1e4},servers:{},clearKeys:{},advanced:{},delayLicenseRequestUntilPlayed:!1,initDataTransform:function(e,t,n){return"com.apple.fps.1_0"==n.keySystem&&"skd"==t&&(t=n.serverCertificate,e=Bu(e,n=Uu(e),t)),e},logLicenseExchange:!1,updateExpirationTime:1,preferredKeySystems:[],keySystemsMapping:{},parseInbandPsshEnabled:ct()},n={retryParameters:{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:3e4,stallTimeout:5e3,connectionTimeout:1e4},availabilityWindowOverride:NaN,disableAudio:!1,disableVideo:!1,disableText:!1,disableThumbnails:!1,defaultPresentationDelay:0,segmentRelativeVttTiming:!1,dash:{clockSyncUri:"",ignoreDrmInfo:!1,disableXlinkProcessing:!1,xlinkFailGracefully:!1,ignoreMinBufferTime:!1,autoCorrectDrift:!0,initialSegmentLimit:1e3,ignoreSuggestedPresentationDelay:!1,ignoreEmptyAdaptationSet:!1,ignoreMaxSegmentDuration:!1,keySystemsByURI:{"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:e2719d58-a985-b3c9-781a-b030af78d30e":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:79f0049a-4098-8642-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb":"com.adobe.primetime"},manifestPreprocessor:function(e){return Pu([e],e)},sequenceMode:!1},hls:{ignoreTextStreamFailures:!1,ignoreImageStreamFailures:!1,defaultAudioCodec:"mp4a.40.2",defaultVideoCodec:"avc1.42E01E",ignoreManifestProgramDateTime:!1,mediaPlaylistFullMimeType:'video/mp2t; codecs="avc1.42E01E, mp4a.40.2"',useSafariBehaviorForLive:!0,liveSegmentsDelay:3}},r={retryParameters:{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:3e4,stallTimeout:5e3,connectionTimeout:1e4},failureCallback:function(e){return Pu([e])},rebufferingGoal:2,bufferingGoal:10,bufferBehind:30,ignoreTextStreamFailures:!1,alwaysStreamText:!1,startAtSegmentBoundary:!1,gapDetectionThreshold:.5,durationBackoff:1,forceTransmux:!1,safeSeekOffset:5,stallEnabled:!0,stallThreshold:1,stallSkip:.1,useNativeHlsOnSafari:!0,inaccurateManifestTolerance:2,lowLatencyMode:!1,autoLowLatencyMode:!1,forceHTTPS:!1,preferNativeHls:!1,updateIntervalSeconds:1,dispatchAllEmsgBoxes:!1,observeQualityChanges:!1,maxDisabledTime:30,parsePrftBox:!1};(mt("Web0S")||dt()||mt("CrKey"))&&(r.stallSkip=0);var i={trackSelectionCallback:function(e){return L((function(t){return t.return(e)}))},downloadSizeCallback:function(e){var t;return L((function(n){return 1==n.g?navigator.storage&&navigator.storage.estimate?w(n,navigator.storage.estimate(),3):n.return(!0):(t=n.h,n.return(t.usage+e<.95*t.quota))}))},progressCallback:function(e,t){return Pu([e,t])},usePersistentLicense:!0,numberOfParallelDownloads:5},a={drm:t,manifest:n,streaming:r,mediaSource:{sourceBufferExtraFeatures:""},offline:i,abrFactory:function(){return new Kn},abr:{enabled:!0,useNetworkInformation:!0,defaultBandwidthEstimate:1e6,switchInterval:8,bandwidthUpgradeTarget:.85,bandwidthDowngradeTarget:.95,restrictions:{minWidth:0,maxWidth:1/0,minHeight:0,maxHeight:e,minPixels:0,maxPixels:1/0,minFrameRate:0,maxFrameRate:1/0,minBandwidth:0,maxBandwidth:1/0},advanced:{minTotalBytes:128e3,minBytes:16e3,fastHalfLife:2,slowHalfLife:5},restrictToElementSize:!1,restrictToScreenSize:!1,ignoreDevicePixelRatio:!1},autoShowText:3,preferredAudioLanguage:"",preferredTextLanguage:"",preferredVariantRole:"",preferredTextRole:"",preferredAudioChannelCount:2,preferredVideoCodecs:[],preferredAudioCodecs:[],preferForcedSubs:!1,preferredDecodingAttributes:[],restrictions:{minWidth:0,maxWidth:1/0,minHeight:0,maxHeight:1/0,minPixels:0,maxPixels:1/0,minFrameRate:0,maxFrameRate:1/0,minBandwidth:0,maxBandwidth:1/0},playRangeStart:0,playRangeEnd:1/0,textDisplayFactory:function(){return null},cmcd:{enabled:!1,sessionId:"",contentId:"",useHeaders:!1},lcevc:{enabled:!1,dynamicPerformanceScaling:!0,logLevel:0,drawLogo:!1}};return i.trackSelectionCallback=function(e){return L((function(t){return t.return(function(e,t){var n=e.filter((function(e){return"variant"==e.type})),r=[],i=ln(t,n.map((function(e){return e.language})));i&&(r=n.filter((function(e){return an(e.language)==i}))),0==r.length&&(r=n.filter((function(e){return e.primary}))),0==r.length&&(n.map((function(e){return e.language})),r=n);var a=r.filter((function(e){return e.height&&480>=e.height}));for(a.length&&(a.sort((function(e,t){return t.height-e.height})),r=a.filter((function(e){return e.height==a[0].height}))),t=[],r.length&&(n=Math.floor(r.length/2),r.sort((function(e,t){return e.bandwidth-t.bandwidth})),t.push(r[n])),e=c(e),r=e.next();!r.done;r=e.next())(r=r.value).type!=tt&&"image"!=r.type||t.push(r);return t}(e,a.preferredAudioLanguage))}))},a}function zu(e,t,n){var r={".drm.keySystemsMapping":"",".drm.servers":"",".drm.clearKeys":"",".drm.advanced":{distinctiveIdentifierRequired:!1,persistentStateRequired:!1,videoRobustness:"",audioRobustness:"",sessionType:"",serverCertificate:new Uint8Array(0),serverCertificateUri:"",individualizationServer:""}};return Lu(e,t,n||Fu(),r,"")}function Gu(){this.g=null,this.h=[]}function Vu(e,t){if(null==e.g)e.g={timestamp:Date.now()/1e3,state:t,duration:0};else{var n=Date.now()/1e3;e.g.duration=n-e.g.timestamp,e.g.state!=t&&(e.h.push(e.g),e.g={timestamp:n,state:t,duration:0})}}function Ku(e,t){var n=0;e.g&&e.g.state==t&&(n+=e.g.duration);for(var r=(e=c(e.h)).next();!r.done;r=e.next())n+=(r=r.value).state==t?r.duration:0;return n}function Hu(){this.i=this.h=null,this.g=[]}function Wu(e,t,n){e.i!=t&&(e.i=t,e.g.push({timestamp:Date.now()/1e3,id:t.id,type:"text",fromAdaptation:n,bandwidth:null}))}function Xu(){this.u=this.B=this.G=this.D=this.s=this.j=this.F=this.m=this.i=this.M=this.O=this.H=this.J=this.L=this.l=this.o=NaN,this.g=new Gu,this.h=new Hu}function qu(t,n){xr.call(this);var i=this;this.l=Hl,this.Uc=this.g=null,this.ia=!1,this.Xc=new Or,this.Xb=new Or,this.s=new Or,this.Nb=this.i=this.Yc=this.J=this.j=this.ua=this.L=this.cf=this.V=this.Fa=this.M=this.Vc=this.H=this.xb=this.B=this.G=this.m=this.D=null,this.dc=!1,this.Nd=this.u=null,this.Yd=1e9,this.h=dl(this),this.ec={width:1/0,height:1/0},this.o=null,this.ub=new ir(this.h.preferredAudioLanguage,this.h.preferredVariantRole,this.h.preferredAudioChannelCount),this.vb=this.h.preferredTextLanguage,this.cc=this.h.preferredTextRole,this.$b=this.h.preferForcedSubs,this.Zb=[],this.fc=null,n&&n(this),this.D=function(e){return new Er((function(t,n){e.u&&e.u.segmentDownloaded(t,n)}),(function(t,n,r){t=(new Map).set("headers",t).set("request",n).set("requestType",r),e.dispatchEvent($u("downloadheadersreceived",t))}),(function(t,n,r,i){t=(new Map).set("request",t).set("error",n).set("httpResponseCode",r).set("aborted",i),e.dispatchEvent($u("downloadfailed",t))}))}(this),this.D.je(this.h.streaming.forceHTTPS),this.F=null,Ql&&(this.F=Ql()),this.Xc.C(e,"online",(function(){i.ce()})),this.O={name:"detach"},this.W={name:"attach"},this.da={name:"unload"},this.Zd={name:"manifest-parser"},this.Xd={name:"manifest"},this.wb={name:"media-source"},this.Qd={name:"drm-engine"},this.ba={name:"load"},this.de={name:"src-equals-drm-engine"},this.yb={name:"src-equals"};var a=new Map;a.set(this.W,(function(e,t){return gr(function(e,t,n){return null==t.mediaElement&&(t.mediaElement=n.mediaElement,e.Xb.C(t.mediaElement,"error",(function(){var t=Rl(e);t&&_l(e,t)}))),e.g=t.mediaElement,Promise.resolve()}(i,e,t))})),a.set(this.O,(function(e){return e.mediaElement&&(i.Xb.nb(),e.mediaElement=null),i.F&&i.F.release(),i.g=null,gr(e=Promise.resolve())})),a.set(this.da,(function(e){return gr(Qu(i,e))})),a.set(this.wb,(function(e){return e=function(e,t){var n,r,i,a,o;return L((function(s){if(1==s.g)return n=e.h.textDisplayFactory,r=n(),e.Ud=n,i=function(e,t,n,r){return new Oo(e,t,n,r)}(t.mediaElement,r,(function(t,n,r){Ju(e,t,n,r)}),e.L),i.configure(e.h.mediaSource),a=e.h.manifest,o=a.segmentRelativeVttTiming,i.H=o,w(s,i.J,2);e.G=i,T(s)}))}(i,e),gr(e)})),a.set(this.Zd,(function(e,t){return e=function(e,t,n){var r,i,a,o;return L((function(s){if(1==s.g)return t.mimeType=n.mimeType,t.uri=n.uri,r=t.uri,i=e.D,e.Nb=r,a=e,w(s,qi(r,i,e.h.manifest.retryParameters,t.mimeType),2);a.Yc=s.h,e.J=e.Yc(),o=wr(e.h.manifest),n.mediaElement&&"AUDIO"===n.mediaElement.nodeName&&(o.disableVideo=!0),e.J.configure(o),T(s)}))}(i,e,t),gr(e)})),a.set(this.Xd,(function(e){return function(e,t){var n=t.uri;t=e.D,e.Fa=new Ns((function(){return e.uc()})),e.Fa.addEventListener("regionadd",(function(t){t=t.region,Ml(e,"timelineregionadded",t),e.F&&e.F.onDashTimedMetadata(t)})),e.ua=null,e.h.streaming.observeQualityChanges&&(e.ua=new Rs((function(){return e.Na()})),e.ua.addEventListener("qualitychange",(function(t){var n=t.quality;t=t.position,n=(new Map).set("mediaQuality",{bandwidth:n.bandwidth,audioSamplingRate:n.audioSamplingRate,codecs:n.codecs,contentType:n.contentType,frameRate:n.frameRate,height:n.height,mimeType:n.mimeType,channelsCount:n.channelsCount,pixelAspectRatio:n.pixelAspectRatio,width:n.width}).set("position",t),e.dispatchEvent($u("mediaqualitychanged",n))})));var i={networkingEngine:t,modifyManifestRequest:function(t,n){var i=e.V;try{i.g.enabled&&(i.o=n.format,xu(i,t,{ot:Au,su:!i.i}))}catch(r){q("CMCD_MANIFEST_ERROR","Could not generate manifest CMCD data.",r)}},modifySegmentRequest:function(t,n){yu(e.V,t,n)},filter:function(t){return hl(e,t)},makeTextStreamsForClosedCaptions:function(t){return function(e,t){for(var n=new Set,r=c(t.textStreams),i=r.next();!i.done;i=r.next())"application/cea-608"!=(i=i.value).mimeType&&"application/cea-708"!=i.mimeType||n.add(i.originalId);for(r=c(t.variants),i=r.next();!i.done;i=r.next())if((i=i.value.video)&&i.closedCaptions)for(var a=c(i.closedCaptions.keys()),o=a.next();!o.done;o=a.next())if(o=o.value,!n.has(o)){var s=o.startsWith("CC")?"application/cea-608":"application/cea-708",u=new Is;s={id:e.Yd++,originalId:o,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:u,mimeType:s,codecs:"",kind:"caption",encrypted:!1,drmInfos:[],keyIds:new Set,language:i.closedCaptions.get(o),label:null,type:tt,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:i.roles,forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null},t.textStreams.push(s),n.add(o)}}(e,t)},onTimelineRegionAdded:function(t){var n=e.Fa;e:{for(var r=c(n.g),i=r.next();!i.done;i=r.next())if((i=i.value).schemeIdUri==t.schemeIdUri&&i.id==t.id&&i.startTime==t.startTime&&i.endTime==t.endTime){r=i;break e}r=null}null==r&&(n.g.add(t),t=new vr("regionadd",new Map([["region",t]])),n.dispatchEvent(t))},onEvent:function(t){return e.dispatchEvent(t)},onError:function(t){return _l(e,t)},isLowLatencyMode:function(){return e.h.streaming.lowLatencyMode},isAutoLowLatencyMode:function(){return e.h.streaming.autoLowLatencyMode},enableLowLatencyMode:function(){e.configure("streaming.lowLatencyMode",!0)},updateDuration:function(){e.j&&e.j.updateDuration()},newDrmInfo:function(t){var n=e.m?e.m.g:null;n&&e.m.u&&pl(e,n.keySystem,t)}},a=Date.now()/1e3;return new dr(function(){var t,r,o,s;return L((function(u){if(1==u.g)return t=e,w(u,e.J.start(n,i),2);if(t.i=u.h,r=$u("manifestparsed"),e.dispatchEvent(r),0==e.i.variants.length)throw new Ne(2,4,4036);!function(e){function t(e){return e.video&&e.audio||e.video&&e.video.codecs.includes(",")}e.variants.some(t)&&(e.variants=e.variants.filter(t))}(e.i),o=Date.now()/1e3,s=o-a,e.o.F=s,T(u)}))}(),(function(){return e.J.stop()}))}(i,e)})),a.set(this.Qd,(function(e){return e=function(e,t){var n,r;return L((function(i){return 1==i.g?(n=Date.now()/1e3,r=!0,e.m=tl(e,{kb:e.D,onError:function(t){_l(e,t)},cd:function(t){Nl(e,t)},onExpirationUpdated:function(t,n){Ll(e,t,n)},onEvent:function(t){e.dispatchEvent(t),"drmsessionupdate"==t.type&&r&&(r=!1,e.o.j=Date.now()/1e3-n,e.L&&((t=e.L).g&&t.h.classList.add("shaka-hidden")))}}),e.m.configure(e.h.drm),w(i,Ei(e.m,e.i.variants,e.i.offlineSessionIds),2)):3!=i.g?w(i,e.m.Yb(t.mediaElement),3):w(i,hl(e,e.i),0)}))}(i,e),gr(e)})),a.set(this.ba,(function(e,t){return gr(function(e,t,n){var r,i,a,o,s,u,l,d,h,f,p,g,m,v,y,b;return L((function(x){switch(x.g){case 1:for(t.startTime=n.startTime,null!=e.fc&&(t.startTime=e.fc,e.fc=null),r=t.mediaElement,i=t.uri,e.Nb=i,e.H=new ks({Tc:function(){return r.playbackRate},Pc:function(){return r.defaultPlaybackRate},le:function(e){r.playbackRate=e},Me:function(e){r.currentTime+=e}}),a=function(){return vl(e)},o=function(){return ml(e)},e.s.C(r,"playing",a),e.s.C(r,"pause",a),e.s.C(r,"ended",a),e.s.C(r,"ratechange",o),function(e,t){if(t.lcevc.enabled){var n=e.Xa();n&&n[0]&&n[0].videoMimeType==Jl.ts&&(navigator.userAgent.match(/Edge?\//)||navigator.userAgent.match(/Edge\//))&&(t.streaming.forceTransmux||X("LCEVC Warning: For MPEG-2 TS decoding the config.streaming.forceTransmux must be enabled.")),Yu(e),null==e.L&&(e.L=new Ro(e.g,e.cf,t.lcevc),e.G&&(e.G.D=e.L))}else Yu(e)}(e,e.h),s=e.h.abrFactory,e.u&&e.Nd==s||(e.Nd=s,e.u=s(),"function"!=typeof e.u.setMediaElement&&(Yn("AbrManager","Please use an AbrManager with setMediaElement function."),e.u.setMediaElement=function(){}),e.u.configure(e.h.abr)),e.ub=new ir(e.h.preferredAudioLanguage,e.h.preferredVariantRole,e.h.preferredAudioChannelCount),e.vb=e.h.preferredTextLanguage,e.cc=e.h.preferredTextRole,e.$b=e.h.preferForcedSubs,Dl(e.i.presentationTimeline,e.h.playRangeStart,e.h.playRangeEnd),e.u.init((function(t,n,r){e.j&&t!=e.j.l&&wl(e,t,!0,void 0!==n&&n,void 0===r?0:r)})),e.u.setMediaElement(r),hn(e.i,e.h.preferredVideoCodecs,e.h.preferredAudioCodecs,e.h.preferredAudioChannelCount,e.h.preferredDecodingAttributes),e.j=function(e){return new js(e.i,{Sc:function(){return e.B?e.B.Ic():0},getBandwidthEstimate:function(){return e.u.getBandwidthEstimate()},modifySegmentRequest:function(t,n){yu(e.V,t,n)},R:e.G,kb:e.D,onError:function(t){return _l(e,t)},onEvent:function(t){return e.dispatchEvent(t)},gg:function(){e.J&&e.J.update&&e.J.update()},Wd:function(t,n,r){e.B&&e.B.Ne(),rl(e),t=(new Map).set("start",t).set("end",n).set("contentType",r),e.dispatchEvent($u("segmentappended",t))},fg:function(t,n){(n=n.Od)&&e.ua&&function(e,t,n){var r=function(e,t){var n=e.g.get(t);return n||(n={rc:[],Ae:null,contentType:t},e.g.set(t,n)),n}(e,t.contentType);!function(e,t){if((e=e.h()[t.contentType])&&0<e.length){var n=e[0].start,r=e[e.length-1].end,i=t.rc;t.rc=i.filter((function(e,t){return!(e.position<=n&&t+1<i.length&&i[t+1].position<=n||e.position>=r)}))}else t.rc=[]}(e,r),e={Od:t,position:n},0<=(t=(r=r.rc).findIndex((function(e){return e.position>=n})))?r.splice(t,r[t].position==n?1:0,e):r.push(e)}(e.ua,n,t)},xe:function(t,n){var r=e.m;if(r.h.parseInbandPsshEnabled&&["audio","video"].includes(t)){var i=0,a=c((n=new ni(_e(n))).data);for(t=a.next();!t.done;t=a.next())i+=t.value.length;if(0==i)r=Promise.resolve();else{for(i=new Uint8Array(i),a=0,t=(n=c(n.data)).next();!t.done;t=n.next())t=t.value,i.set(t,a),a+=t.length;Mi(r,"cenc",i),r=r.o}}else r=Promise.resolve();return r},hg:function(t,n,r){Ju(e,t,n,r)}})}(e),e.j.configure(e.h.streaming),e.l=Wl,r.textTracks&&e.s.C(r.textTracks,"addtrack",(function(t){if(t.track&&"chapters"===(t=t.track).kind)el(e,t)})),e.dispatchEvent($u("streaming")),u=null,(l=e.j.l)||(u=bl(e)),d=[],f=c([(h=l||u).video,h.audio]),p=f.next();!p.done;p=f.next())(g=p.value)&&!g.segmentIndex&&d.push(g.createSegmentIndex());if(!(0<d.length)){x.A(2);break}return w(x,Promise.all(d),2);case 2:if(e.B=function(e,t){return new ys(e.g,e.i,e.h.streaming,t,(function(){e.xb&&Ms(e.xb,!0),e.j&&e.j.vc(),e.M&&rl(e)}),(function(t){return e.dispatchEvent(t)}))}(e,t.startTime),e.xb=function(e){var t=new Ls(e.Fa);t.addEventListener("enter",(function(t){Ml(e,"timelineregionenter",t.region)})),t.addEventListener("exit",(function(t){Ml(e,"timelineregionexit",t.region)})),t.addEventListener("skip",(function(t){var n=t.region;t.seeking||(Ml(e,"timelineregionenter",n),Ml(e,"timelineregionexit",n))}));var n=new _s(e.g);return n.g.add(t),e.ua&&n.g.add(e.ua),n}(e),m=Math.max(e.i.minBufferTime,e.h.streaming.rebufferingGoal),nl(e,m),l){x.A(4);break}if(wl(e,u,!0,!1,0),!e.h.streaming.startAtSegmentBoundary){x.A(5);break}return v=e.B.Ic(),w(x,function(e,t){var n,r,i,a,o;return L((function(s){return 1==s.g?(n=e.audio,r=e.video,i=function(e,t){var n,r,i;return L((function(a){return 1==a.g?e?w(a,e.createSegmentIndex(),2):a.return(null):(r=(n=e.segmentIndex.Cb(t))?n.next().value:null)?(i=r.startTime,a.return(i)):a.return(null)}))},w(s,i(n,t),2)):3!=s.g?(a=s.h,w(s,i(r,t),3)):null!=(o=s.h)&&null!=a?s.return(Math.max(o,a)):null!=o?s.return(o):null!=a?s.return(a):s.return(t)}))}(u,v),6);case 6:y=x.h,e.B.zd(y);case 5:Al(e,null,En(u));case 4:return e.B.yd(),e.Fb().find((function(e){return e.active}))||((b=Dn(e.i.textStreams,e.vb,e.cc,e.$b)[0]||null)&&Wu(e.o.h,b,!0),u&&(b?(u.audio&&function(e,t,n){if(0==e.h.autoShowText)return!1;if(1==e.h.autoShowText)return!0;var r=an(e.h.preferredTextLanguage);return n=an(n.language),2==e.h.autoShowText?tn(n,r):3==e.h.autoShowText?(e=an(t.language),tn(n,r)&&!tn(e,n)):(X("Invalid autoShowText setting!"),!1)}(e,u.audio,b)&&(e.ia=!0),e.ia&&e.G.m.setTextVisibility(!0),kl(e)):e.ia=!1),b&&(e.h.streaming.alwaysStreamText||e.Hd())&&Gs(e.j,b)),w(x,e.j.start(),7);case 7:e.h.abr.enabled&&(e.u.enable(),Cl(e)),An(e.j?e.j.l:null,e.i),Ol(e.i),Sl(e),yl(e),e.i.variants.some((function(e){return e.primary})),e.dc=!0,e.s.ma(r,"loadedmetadata",(function(){e.o.m=Date.now()/1e3-n.ne})),T(x)}}))}(i,e,t))})),a.set(this.de,(function(e,t){return e=function(e,t,n){var r,i,a,o,s,u,l;return L((function(c){return 1==c.g?(r=nt,i=Date.now()/1e3,a=!0,e.m=tl(e,{kb:e.D,onError:function(t){_l(e,t)},cd:function(t){Nl(e,t)},onExpirationUpdated:function(t,n){Ll(e,t,n)},onEvent:function(t){e.dispatchEvent(t),"drmsessionupdate"==t.type&&a&&(a=!1,e.o.j=Date.now()/1e3-i)}}),e.m.configure(e.h.drm),o=n.uri||"",s=$i(o),"application/x-mpegurl"==(u=Jl[s])&&ft()&&(u="application/vnd.apple.mpegurl"),u||(u="video/mp4"),l={id:0,language:"und",disabledUntilTime:0,primary:!1,audio:null,video:{id:0,originalId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:null,mimeType:n.mimeType?n.mimeType.split(";")[0]:u,codecs:n.mimeType?Wt(n.mimeType):"",encrypted:!0,drmInfos:[],keyIds:new Set,language:"und",label:null,type:r.va,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null},bandwidth:100,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]},e.m.V=!0,w(c,Ei(e.m,[l],[]),2)):w(c,e.m.Yb(t.mediaElement),0)}))}(i,e,t),gr(e)})),a.set(this.yb,(function(e,t){return function(e,t,n){function r(){return vl(e)}t.uri=n.uri,t.startTime=n.startTime,e.Nb=t.uri;var i=t.mediaElement;e.B=new vs(i);var a=!1;e.Zb.push((function(){a=!0})),null!=t.startTime&&e.B.zd(t.startTime),e.H=new ks({Tc:function(){return i.playbackRate},Pc:function(){return i.defaultPlaybackRate},le:function(e){i.playbackRate=e},Me:function(e){i.currentTime+=e}}),nl(e,e.h.streaming.rebufferingGoal),e.s.C(i,"playing",r),e.s.C(i,"pause",r),e.s.C(i,"ended",r),e.s.C(i,"ratechange",(function(){return ml(e)})),"none"!=i.preload&&e.s.ma(i,"loadedmetadata",(function(){e.o.m=Date.now()/1e3-n.ne})),i.audioTracks&&(e.s.C(i.audioTracks,"addtrack",(function(){return Sl(e)})),e.s.C(i.audioTracks,"removetrack",(function(){return Sl(e)})),e.s.C(i.audioTracks,"change",(function(){return Sl(e)}))),i.textTracks&&(e.s.C(i.textTracks,"addtrack",(function(t){if(t.track)switch(t=t.track,t.kind){case"metadata":!function(e,t){if("metadata"==t.kind){t.mode="hidden",e.s.C(t,"cuechange",(function(){if(t.activeCues)for(var n=c(t.activeCues),r=n.next();!r.done;r=n.next())r=r.value,Zu(e,r.startTime,r.endTime,r.type,r.value),e.F&&e.F.onCueMetadataChange(r.value)}));var n=new st((function(){for(var t=function(e){return Array.from(e.g.textTracks).filter((function(e){return"metadata"==e.kind}))}(e),n=(t=c(t)).next();!n.done;n=t.next())n.value.mode="hidden"})).Mb().N(.5);e.Zb.push((function(){n.stop()}))}}(e,t);break;case"chapters":el(e,t);break;default:Sl(e)}})),e.s.C(i.textTracks,"removetrack",(function(){return Sl(e)})),e.s.C(i.textTracks,"change",(function(){return Sl(e)})));var o=$i(t.uri);i.src=function(e,t,n){try{if(!e.g.enabled)return t;var r=bu(e);e:{switch(n){case"video/webm":case"video/mp4":var i=Iu;break e;case"application/x-mpegurl":i=Au;break e}i=void 0}return r.ot=i,r.su=!0,Tu(t,wu(r))}catch(o){return q("CMCD_SRC_ERROR","Could not generate src CMCD data.",o),t}}(e.V,t.uri,Jl[o]),(dt()||mt("Web0S"))&&i.load(),e.l=Xl,e.dispatchEvent($u("streaming"));var s=new it;return us(i,HTMLMediaElement.HAVE_METADATA,e.s,(function(){e.B.yd(),s.resolve()})),us(i,HTMLMediaElement.HAVE_CURRENT_DATA,e.s,(function(){return L((function(t){return 1==t.g?(function(e){var t=e.h.preferredAudioLanguage;if(""!=t){e.ge(t);var n=e.h.preferredVariantRole;""!=n&&e.ge(t,n)}}(e),al(e).find((function(e){return"disabled"!=e.mode}))?t.A(2):w(t,new Promise((function(t){e.s.ma(i.textTracks,"change",t),new st(t).N(1)})),2)):a?t.return():(function(e){var t=e.h.preferredTextLanguage,n=e.h.preferForcedSubs;if(""!=t){e.he(t,"",n);var r=e.h.preferredTextRole;""!=r&&e.he(t,r,n)}}(e),void T(t))}))})),i.error?s.reject(Rl(e)):"none"==i.preload&&(X('With <video preload="none">, the browser will not load anything until play() is called. We are unable to measure load latency in a meaningful way, and we cannot provide track info yet. Please do not use preload="none" with Shaka Player.'),s.resolve()),e.s.ma(i,"error",(function(){s.reject(Rl(e))})),new dr(s,(function(){return s.reject(new Ne(2,7,7001)),Promise.resolve()})).Y((function(){e.dc=!0}))}(i,e,t)})),this.Ga=new tu(this.O,{Mf:function(e,t,n,r){var a=null;return e==i.O&&(a=n==i.O?i.O:i.W),e==i.W&&(a=n==i.O||t.mediaElement!=r.mediaElement?i.O:n==i.W?i.W:n==i.wb||n==i.ba?i.wb:n==i.yb?i.de:null),e==i.wb&&(a=n==i.ba&&t.mediaElement==r.mediaElement?i.Zd:i.da),e==i.Zd&&(a=zl(i.ba,i.Xd,i.da,n,t,r)),e==i.Xd&&(a=zl(i.ba,i.Qd,i.da,n,t,r)),e==i.Qd&&(a=zl(i.ba,i.ba,i.da,n,t,r)),e==i.de&&(a=n==i.yb&&t.mediaElement==r.mediaElement?i.yb:i.da),e!=i.ba&&e!=i.yb||(a=i.da),e==i.da&&(a=r.mediaElement&&t.mediaElement==r.mediaElement?i.W:i.O),a},yf:function(e,t,n){return i.dispatchEvent($u("onstatechange",(new Map).set("state",e.name))),a.get(e)(t,n)},handleError:function(e){return L((function(t){return 1==t.g?w(t,Qu(i,e),2):t.return(e.mediaElement?i.W:i.O)}))},eg:function(e){i.dispatchEvent($u("onstateidle",(new Map).set("state",e.name)))}}),this.af=new st((function(){mn(i.i.variants,i.h.restrictions,i.ec)&&bl(i)})),t&&this.Yb(t,!0)}function Yu(e){null!=e.L&&(e.L.release(),e.L=null)}function $u(e,t){return new vr(e,t)}function Qu(e,t){var n,r,i,a,o,s,u,l,d;return L((function(h){switch(h.g){case 1:return e.l!=Kl&&(e.l=Hl),n=e.Zb.map((function(e){return e()})),e.Zb=[],w(h,Promise.all(n),2);case 2:if(e.dispatchEvent($u("unloading")),t.mimeType=null,t.startTime=null,t.uri=null,e.Fa&&(e.Fa.release(),e.Fa=null),t.mediaElement&&e.s.nb(),e.af.stop(),e.xb&&(e.xb.release(),e.xb=null),e.Vc&&(e.Vc.stop(),e.Vc=null),!e.J){h.A(3);break}return w(h,e.J.stop(),4);case 4:e.J=null,e.Yc=null;case 3:if(!e.u){h.A(5);break}return w(h,e.u.stop(),5);case 5:if(!e.j){h.A(7);break}return w(h,e.j.destroy(),8);case 8:e.j=null;case 7:if(e.H&&(e.H.release(),e.H=null),e.B&&(e.B.release(),e.B=null),!e.G){h.A(9);break}return w(h,e.G.destroy(),10);case 10:e.G=null;case 9:if(e.F&&e.F.onAssetUnload(),!t.mediaElement||!t.mediaElement.src){h.A(11);break}return w(h,new Promise((function(e){return new st(e).N(.1)})),12);case 12:for(t.mediaElement.removeAttribute("src"),t.mediaElement.load();t.mediaElement.lastChild;)t.mediaElement.removeChild(t.mediaElement.firstChild);case 11:if(!e.m){h.A(13);break}return w(h,e.m.destroy(),14);case 14:e.m=null;case 13:if(e.Nb=null,e.M=null,e.i){for(r=c(e.i.variants),i=r.next();!i.done;i=r.next())for(a=i.value,o=c([a.audio,a.video]),s=o.next();!s.done;s=o.next())(u=s.value)&&u.segmentIndex&&u.segmentIndex.release();for(l=c(e.i.textStreams),s=l.next();!s.done;s=l.next())(d=s.value).segmentIndex&&d.segmentIndex.release()}e.i=null,e.o=new Xu,e.Ud=null,gl(e),T(h)}}))}function Ju(e,t,n,r){for(var i=(t=c(t)).next();!i.done;i=t.next())if((i=i.value).data&&i.cueTime&&i.frames){var a=i.cueTime+n,o=r;o&&a>o&&(o=a);for(var s=c(i.frames),u=s.next();!u.done;u=s.next())Zu(e,a,o,"org.id3",u.value);e.F&&e.F.onHlsTimedMetadata(i,a)}}function Zu(e,t,n,r,i){t=(new Map).set("startTime",t).set("endTime",n).set("metadataType",r).set("payload",i),e.dispatchEvent($u("metadata",t))}function el(e,t){if(t&&"chapters"==t.kind){t.mode="hidden";var n=new st((function(){t.mode="hidden"})).Mb().N(.5);e.Zb.push((function(){n.stop()}))}}function tl(e,t){return new Si(t,e.h.drm.updateExpirationTime)}function nl(e,t){e.M=new ar,e.M.g=sr,or(e.M,t,Math.min(.5,t/2)),gl(e),e.Vc=new st((function(){rl(e)})).Ca(.25)}function rl(e){switch(e.l){case Xl:if(e.g.ended)var t=!0;else{var n=xo(e.g.buffered);t=null!=n&&n>=e.g.duration-1}break;case Wl:e:if(e.g.ended||Bo(e.G))t=!0;else{if(e.i.presentationTimeline.U()){n=e.i.presentationTimeline.gb();var r=xo(e.g.buffered);if(null!=r&&r>=n){t=!0;break e}}t=!1}break;default:t=!1}r=To(e.g.buffered,e.g.currentTime);var i=t,a=(n=e.M).h.get(n.g);t=n.g,r=i||r>=a?ur:sr,n.g=r,t!=r&&gl(e)}function il(e){if(e.J){var t=wr(e.h.manifest);e.g&&"AUDIO"===e.g.nodeName&&(t.disableVideo=!0),e.J.configure(t)}if(e.m&&e.m.configure(e.h.drm),e.j){e.j.configure(e.h.streaming);try{fl(e,e.i)}catch(a){_l(e,a)}e.u&&yl(e),!(t=e.j.l)||t.allowedByApplication&&t.allowedByKeySystem||xl(e)}if(e.D&&e.D.je(e.h.streaming.forceHTTPS),e.G&&(e.G.configure(e.h.mediaSource),e.G.H=e.h.manifest.segmentRelativeVttTiming,t=e.h.textDisplayFactory,e.Ud!=t)){var n=t(),r=e.G,i=r.m;r.m=n,i&&(n.setTextVisibility(i.isTextVisible()),i.destroy()),r.g&&(r.g.i=n),e.Ud=t,e.j&&((n=(t=e.j).j.get(tt))&&Vs(t,n.stream,!0,0,!0))}e.u&&(e.u.configure(e.h.abr),e.h.abr.enabled?e.u.enable():e.u.disable(),Cl(e)),e.M&&(t=e.h.streaming.rebufferingGoal,e.i&&(t=Math.max(t,e.i.minBufferTime)),or(e.M,t,Math.min(.5,t/2))),e.i&&Dl(e.i.presentationTimeline,e.h.playRangeStart,e.h.playRangeEnd)}function al(e){return Array.from(e.g.textTracks).filter((function(e){return"metadata"!=e.kind&&"chapters"!=e.kind&&"Shaka Player TextTrack"!=e.label}))}function ol(e){return Array.from(e.g.textTracks).filter((function(e){return"chapters"==e.kind}))}function sl(e,t){var n,r;return L((function(i){switch(i.g){case 1:return n=$i(t),(r=Zl[n])?i.return(r):(A(i,2),w(i,Yi(t,e.D,e.h.streaming.retryParameters),4));case 4:r=i.h,E(i,3);break;case 2:I(i);case 3:if(r)return i.return(r);throw new Ne(1,2,2011,n)}}))}function ul(e,t,n,r,i,a,o){var s,u,l,c;return L((function(d){if(1==d.g)return"text/vtt"!=i||o.length?w(d,ll(e,t,e.D,e.h.streaming.retryParameters),3):d.A(2);2!=d.g&&(s=d.h,u=cl(e,s,i,o),l=new Blob([u],{type:"text/vtt"}),t=Zo(l),i="text/vtt"),c=document.createElement("track");var h=e.V,f=t;try{if(h.g.enabled){var p=bu(h);p.ot=Cu,p.su=!0;var g=Tu(f,wu(p))}else g=f}catch(m){q("CMCD_TEXT_TRACK_ERROR","Could not generate text track CMCD data.",m),g=f}return c.src=g,c.label=a,c.kind=r,c.srclang=n,e.g.getAttribute("crossorigin")||e.g.setAttribute("crossorigin","anonymous"),e.g.appendChild(c),d.return(c)}))}function ll(e,t,n,r){var i,a,o;return L((function(s){if(1==s.g){i=Rr,(a=kr([t],r)).method="GET";var u=e.V;try{u.g.enabled&&xu(u,a,{ot:Cu,su:!0})}catch(l){q("CMCD_TEXT_ERROR","Could not generate text CMCD data.",l)}return w(s,n.request(i,a).promise,2)}return o=s.h,s.return(o.data)}))}function cl(e,t,n,r){var i=Zt[n];if(i)return n=i(),e={periodStart:0,segmentStart:0,segmentEnd:e.g.duration,vttOffset:0},t=_e(t),function(e,t){function n(e){for(var n=e,r=c(t),i=r.next();!i.done;i=r.next())(i=i.value).end&&i.start<e&&(n+=i.end-i.start);return(10>(e=Math.floor(n/3600))?"0":"")+e+":"+(10>(r=Math.floor(n/60%60))?"0":"")+r+":"+(10>(i=Math.floor(n%60))?"0":"")+i+"."+(100>(n=Math.floor(1e3*n%1e3))?10>n?"00":"0":"")+n}var r=au(e,[]);e="WEBVTT\n\n";for(var i=(r=c(r)).next();!i.done;i=r.next())e+=n((i=i.value).startTime)+" --\x3e "+n(i.endTime)+function(e){var t=[];switch(e.textAlign){case"left":t.push("align:left");break;case"right":t.push("align:right");break;case ue:t.push("align:middle");break;case"start":t.push("align:start");break;case"end":t.push("align:end")}switch(e.writingMode){case"vertical-lr":t.push("vertical:lr");break;case"vertical-rl":t.push("vertical:rl")}return t.length?" "+t.join(" "):""}(i)+"\n",e+=i.payload+"\n\n";return e}(t=n.parseMedia(t,e),r);throw new Ne(2,2,2014,n)}function dl(e){var t=Fu();return t.streaming.failureCallback=function(t){if(e.U()){var n=null;1001==t.code||1002==t.code?n=1:1003==t.code&&(n=.1),null!=n&&(t.severity=1,e.ce(n))}},t.textDisplayFactory=function(){return e.Uc?new du(e.g,e.Uc):new ou(e.g)},t}function hl(e,t){return L((function(n){if(1==n.g)return w(n,function(e,t){return L((function(n){if(1==n.g)return w(n,vn(e.j?e.j.l:null,t),2);Ol(t),T(n)}))}(e,t),2);fl(e,t),T(n)}))}function fl(e,t){if(e.l!=Kl){mn(t.variants,e.h.restrictions,e.ec)&&e.j&&Sl(e);var n=e.m?e.m.g:null;if(n&&e.m.u)for(var r=c(t.variants),i=r.next();!i.done;i=r.next())i=i.value,pl(e,n.keySystem,i.video),pl(e,n.keySystem,i.audio);Pl(e,t)}}function pl(e,t,n){if(n)for(var r=(n=c(n.drmInfos)).next();!r.done;r=n.next())if((r=r.value).keySystem==t)for(var i=(r=c(r.initData||[])).next();!i.done;i=r.next())i=i.value,Mi(e.m,i.initDataType,i.initData)}function gl(e){var t=e.Fd();if(e.o&&e.M&&e.B){var n=e.H;n.j=t,Cs(n),e.V&&(n=e.V,t||n.i||(n.i=!0),n.i&&t&&(n.l=!0),n.m=t),vl(e)}t=(new Map).set("buffering",t),e.dispatchEvent($u("buffering",t))}function ml(e){var t=e.g.playbackRate;0!=t&&(e.H&&e.H.set(t),t=$u("ratechange"),e.dispatchEvent(t))}function vl(e){if(e.o&&e.M){var t=e.o.g;e.M.g==sr?Vu(t,"buffering"):e.g.paused?Vu(t,"paused"):e.g.ended?Vu(t,"ended"):Vu(t,"playing")}}function yl(e){try{Pl(e,e.i)}catch(n){return _l(e,n),!1}var t=e.i.variants.filter((function(e){return Nn(e)}));return t=e.ub.create(t),e.u.setVariants(Array.from(t.values())),!0}function bl(e){return yl(e)?e.u.chooseVariant():null}function xl(e){var t=bl(e);t&&wl(e,t,!0,!0,0)}function wl(e,t,n,r,i){var a=e.j.l;if(t==a)r&&zs(e.j,t,r,i,!0);else{var o=e.o.h;o.h!=t&&(o.h=t,o.g.push({timestamp:Date.now()/1e3,id:t.id,type:"variant",fromAdaptation:n,bandwidth:t.bandwidth})),zs(e.j,t,r,i,void 0,n),r=null,a&&(r=En(a)),t=En(t),n?Al(e,r,t):El(e,r,t)}}function Tl(e,t){var n=Array.from(e.g.audioTracks).find((function(e){return e.enabled}));t.enabled=!0,t.id!==n.id&&(n.enabled=!1),El(e,n=Mn(n),t=Mn(t))}function Al(e,t,n){t=(new Map).set("oldTrack",t).set("newTrack",n),e.L&&No(e.L,n),Ul(e,n=$u("adaptation",t))}function Sl(e){Ul(e,$u("trackschanged"))}function El(e,t,n){t=(new Map).set("oldTrack",t).set("newTrack",n),e.L&&No(e.L,n),Ul(e,n=$u("variantchanged",t))}function Il(e){Ul(e,$u("textchanged"))}function kl(e){Ul(e,$u("texttrackvisibility"))}function Cl(e){Ul(e,$u("abrstatuschanged",(new Map).set("newStatus",e.h.abr.enabled)))}function _l(e,t){if(e.l!=Kl)if(function(e,t){if(1002!=t.code&&1011!=t.code||1!=t.category||!navigator.onLine)return!1;var n=e.h.streaming.maxDisabledTime;if(0==n){if(1011!=t.code)return!1;n=1}t=e.Xa().find((function(e){return e.active}));for(var r=e.i,i=c(r.variants),a=i.next();!a.done;a=i.next())(a=a.value).id===t.id&&(a.disabledUntilTime=Date.now()/1e3+n);return mn(r.variants,e.h.restrictions,e.ec),!!(t=bl(e))&&(r=e.Na().video.reduce((function(e,t){return e+t.end-t.start}),0),wl(e,t,!1,!0,r),e.af.N(n),!0)}(e,t))t.handled=!0;else{var n=$u("error",(new Map).set("detail",t));e.dispatchEvent(n),n.defaultPrevented&&(t.handled=!0)}}function Ml(e,t,n){n=(new Map).set("detail",{schemeIdUri:n.schemeIdUri,value:n.value,startTime:n.startTime,endTime:n.endTime,id:n.id,eventElement:n.eventElement}),e.dispatchEvent($u(t,n))}function Rl(e){if(!e.g.error)return null;var t=e.g.error.code;if(1==t)return null;var n=e.g.error.msExtendedCode;return n&&(0>n&&(n+=Math.pow(2,32)),n=n.toString(16)),new Ne(2,3,3016,t,n,e.g.error.message)}function Nl(e,t){if(e.j){var n=Object.keys(t),r=1==n.length&&"00"==n[0],i=!1;if(n.length)for(var a=(n=c(e.i.variants)).next();!a.done;a=n.next()){var o=[];(a=a.value).audio&&o.push(a.audio),a.video&&o.push(a.video);for(var s=(o=c(o)).next();!s.done;s=o.next()){var u=s.value;if(s=a.allowedByKeySystem,u.keyIds.size){a.allowedByKeySystem=!0;for(var l=(u=c(u.keyIds)).next();!l.done;l=u.next())l=l.value,l=t[r?"00":l],a.allowedByKeySystem=a.allowedByKeySystem&&!!l&&!Yl.includes(l)}s!=a.allowedByKeySystem&&(i=!0)}}i&&!yl(e)||((t=e.j.l)&&!t.allowedByKeySystem&&xl(e),i&&Sl(e))}}function Ll(e,t,n){e.J&&e.J.onExpirationUpdated&&e.J.onExpirationUpdated(t,n),t=$u("expirationupdated"),e.dispatchEvent(t)}function Dl(e,t,n){0<t&&(e.U()||e.Ze(t)),n<(t=e.getDuration())&&(e.U()||e.Aa(n))}function Pl(e,t){e=e.m?e.m.Qc():{};var n=Object.keys(e);n=n.length&&"00"==n[0];for(var r=!1,i=!1,a=new Set,o=new Set,s=(t=c(t.variants)).next();!s.done;s=t.next()){var u=[];(s=s.value).audio&&u.push(s.audio),s.video&&u.push(s.video);for(var l=(u=c(u)).next();!l.done;l=u.next())if((l=l.value).keyIds.size)for(var d=(l=c(l.keyIds)).next();!d.done;d=l.next()){d=d.value;var h=e[n?"00":d];h?Yl.includes(h)&&o.add(h):a.add(d)}s.allowedByApplication?s.allowedByKeySystem&&(r=!0):i=!0}if(!r)throw new Ne(2,4,4012,e={hasAppRestrictions:i,missingKeys:Array.from(a),restrictedKeyStatuses:Array.from(o)})}function Ol(e){if(!e.variants.some(Nn))throw new Ne(2,4,4032)}function Ul(e,t){L((function(n){if(1==n.g)return w(n,Promise.resolve(),2);e.l!=Kl&&e.dispatchEvent(t),T(n)}))}function Bl(e){for(var t=new Set,n=(e=c(e)).next();!n.done;n=e.next())(n=n.value).language?t.add(an(n.language)):t.add("und");return t}function jl(e){for(var t=new Map,n=new Map,r=(e=c(e)).next();!r.done;r=e.next()){var i="und",a=[];(r=r.value).language&&(i=an(r.language)),(a="variant"==r.type?r.audioRoles:r.roles)&&a.length||(a=[""]),t.has(i)||t.set(i,new Set);for(var o=(a=c(a)).next();!o.done;o=a.next())o=o.value,t.get(i).add(o),r.label&&(n.has(i)||n.set(i,new Map),n.get(i).set(o,r.label))}var s=[];return t.forEach((function(e,t){for(var r=(e=c(e)).next();!r.done;r=e.next()){r=r.value;var i=null;n.has(t)&&n.get(t).has(r)&&(i=n.get(t).get(r)),s.push({language:t,role:r,label:i})}})),s}function Fl(){return new Ne(2,7,7e3)}function zl(e,t,n,r,i,a){return r==e&&i.mediaElement==a.mediaElement&&i.uri==a.uri&&i.mimeType==a.mimeType?t:n}function Gl(){return{mediaElement:null,mimeType:null,startTime:null,ne:NaN,uri:null}}function Vl(e){return new Promise((function(t,n){e.mb=function(){return n(Fl())},e.bd=function(){return t()},e.onError=function(e){return n(e)},e.dd=function(){return n(Fl())}}))}z("shaka.util.CmcdManager.StreamingFormat",{Lg:"d",Tg:"h",fh:"s",$g:"o"}),z("shaka.util.ConfigUtils",Nu),Nu.convertToConfigObject=Du,Nu.mergeConfigObjects=Lu,z("shaka.util.FairPlayUtils",Ou),Ou.commonFairPlayResponse=function(e,t){if(2===e){try{var n=wt(t.data)}catch(i){return}e=!1,"<ckc>"===(n=n.trim()).substr(0,5)&&"</ckc>"===n.substr(-6)&&(n=n.slice(5,-6),e=!0);try{var r=JSON.parse(n);r.ckc&&(n=r.ckc,e=!0),r.CkcMessage&&(n=r.CkcMessage,e=!0),r.License&&(n=r.License,e=!0)}catch(i){}e&&(t.data=Ce(Mt(n)))}},Ou.conaxFairPlayRequest=function(e,t){2===e&&(t.headers["Content-Type"]="application/octet-stream")},Ou.ezdrmFairPlayRequest=function(e,t){2===e&&(t.headers["Content-Type"]="application/octet-stream")},Ou.verimatrixFairPlayRequest=function(e,t){2===e&&(e=_t(e=_e(t.body)),t.headers["Content-Type"]="application/x-www-form-urlencoded",t.body=St("spc="+e))},Ou.conaxInitDataTransform=function(t,n,r){if("skd"!==n)return t;n=r.serverCertificate,r=At(t).split("skd://").pop().split("?").shift(),r=e.atob(r);var i=new ArrayBuffer(2*r.length);i=new Uint16Array(i);for(var a=0,o=r.length;a<o;a++)i[a]=r.charCodeAt(a);return Bu(t,i,n)},Ou.ezdrmInitDataTransform=function(e,t,n){return"skd"!==t?e:(t=n.serverCertificate,Bu(e,n=At(e).split(";").pop(),t))},Ou.verimatrixInitDataTransform=function(e,t,n){return"skd"!==t?e:(t=n.serverCertificate,Bu(e,n=At(e).split("skd://").pop(),t))},Ou.initDataTransform=Bu,Ou.defaultGetContentId=Uu,Ou.isFairPlaySupported=function(){var e;return L((function(t){return 1==t.g?(e={initDataTypes:["cenc","sinf","skd"],videoCapabilities:[{contentType:'video/mp4; codecs="avc1.42E01E"'}]},A(t,2),w(t,navigator.requestMediaKeySystemAccess("com.apple.fps",[e]),4)):2!=t.g?t.return(!0):(I(t),t.return(!1))}))},z("shaka.util.PlayerConfiguration",ju),ju.mergeConfigObjects=zu,ju.createDefault=Fu,v(qu,xr),(i=qu.prototype).destroy=function(){var e,t=this;return L((function(n){switch(n.g){case 1:return t.l==Kl?n.return():(Yu(t),t.l=Kl,e=nu(t.Ga,(function(){return{node:t.O,payload:Gl(),hb:!1}})),w(n,new Promise((function(t){e.Jb=function(){},e.bd=function(){t()},e.mb=function(){t()},e.onError=function(){t()},e.dd=function(){t()}})),2));case 2:return w(n,t.Ga.destroy(),3);case 3:if(t.Xc&&(t.Xc.release(),t.Xc=null),t.Xb&&(t.Xb.release(),t.Xb=null),t.s&&(t.s.release(),t.s=null),t.Nd=null,t.u=null,t.h=null,t.o=null,t.Uc=null,t.V=null,!t.D){n.A(4);break}return w(n,t.D.destroy(),5);case 5:t.D=null;case 4:xr.prototype.release.call(t),T(n)}}))},i.Yb=function(e,t){if(t=void 0===t||t,this.l==Kl)return Promise.reject(Fl());var n=Gl();n.mediaElement=e,ut()||(t=!1);var r=t?this.wb:this.W;return(e=nu(this.Ga,(function(){return{node:r,payload:n,hb:!1}}))).Jb=function(){},Vl(e)},i.lf=function(e){this.cf=e},i.detach=function(){var e=this;if(this.l==Kl)return Promise.reject(Fl());var t=nu(this.Ga,(function(){return{node:e.O,payload:Gl(),hb:!1}}));return t.Jb=function(){},Vl(t)},i.re=function(e){var t=this;if(e=void 0===e||e,this.l==Kl)return Promise.reject(Fl());this.dc=!1,ut()||(e=!1),Yu(this);var n=Gl(),r=nu(this.Ga,(function(r){var i=r.mediaElement&&e?t.wb:r.mediaElement?t.W:t.O;return n.mediaElement=r.mediaElement,{node:i,payload:n,hb:!1}}));return r.Jb=function(){},Vl(r)},i.Fg=function(e){this.fc=e},i.load=function(e,t,n){var r=this;if(this.fc=null,this.dc=!1,this.l==Kl)return Promise.reject(Fl());this.dispatchEvent($u("loading"));var i=Gl();i.uri=e,i.ne=Date.now()/1e3,n&&(i.mimeType=n),void 0!==t&&(i.startTime=t);var a=function(e,t){if(!ut())return!0;var n=t.mimeType,r=t.uri||"";if(n||(n=$i(r),n=Jl[n]),n){if(""==(t.mediaElement||vt()).canPlayType(n))return!1;if(!ut()||!(n in Qi)&&!($i(r)in Ji)||e.h.streaming.preferNativeHls)return!0;if(ft())return e.h.streaming.useNativeHlsOnSafari}return!1}(this,i)?this.yb:this.ba,o=nu(this.Ga,(function(e){return null==e.mediaElement?null:(i.mediaElement=e.mediaElement,{node:a,payload:i,hb:!0})}));return this.o=new Xu,this.V=function(e){return new vu({getBandwidthEstimate:function(){return e.u?e.u.getBandwidthEstimate():NaN},Na:function(){return e.Na()},getCurrentTime:function(){return e.g?e.g.currentTime:0},Xa:function(){return e.Xa()},Rc:function(){return e.Rc()},U:function(){return e.U()}},e.h.cmcd)}(this),o.Jb=function(){},new Promise((function(e,t){o.dd=function(){return t(new Ne(2,7,7002))},o.bd=function(){e(),r.dispatchEvent($u("loaded"))},o.mb=function(){return t(Fl())},o.onError=function(e){return t(e)}}))},i.configure=function(e,t){2==arguments.length&&"string"==typeof e&&(e=Du(e,t)),e.streaming&&"forceTransmuxTS"in e.streaming&&(Yn("streaming.forceTransmuxTS configuration","Please Use streaming.forceTransmux instead."),e.streaming.forceTransmux=e.streaming.forceTransmuxTS,delete e.streaming.forceTransmuxTS),e.streaming&&e.streaming.lowLatencyMode&&(null==e.streaming.inaccurateManifestTolerance&&(e.streaming.inaccurateManifestTolerance=0),null==e.streaming.rebufferingGoal&&(e.streaming.rebufferingGoal=.01));var n=zu(this.h,e,dl(this));return il(this),n},i.getConfiguration=function(){var e=dl(this);return zu(e,this.h,dl(this)),e},i.Bf=function(){if(this.g){var e=this.g.buffered.length;e=e?this.g.buffered.end(e-1):0;var t=this.getConfiguration().streaming.bufferingGoal;if(e>=(t=Math.min(this.g.currentTime+t,this.uc().end)))return 1;if(!(e<=this.g.currentTime)&&e<t)return(e-this.g.currentTime)/(t-this.g.currentTime)}return 0},i.rg=function(){for(var e in this.h)delete this.h[e];zu(this.h,dl(this),dl(this)),il(this)},i.Hf=function(){return this.l},i.Lf=function(){return this.g},i.jc=function(){return this.D},i.Dd=function(){return this.Nb},i.Ge=function(){return this.F?this.F:null},i.U=function(){return this.i?this.i.presentationTimeline.U():!(!this.g||!this.g.src)&&1/0==this.g.duration},i.jb=function(){return!!this.i&&this.i.presentationTimeline.jb()},i.Zf=function(){if(this.i){var e=this.i.variants;return!!e.length&&!e[0].video}return!(!this.g||!this.g.src)&&(this.g.videoTracks?0==this.g.videoTracks.length:0==this.g.videoHeight)},i.uc=function(){if(!this.dc)return{start:0,end:0};if(this.i){var e=this.i.presentationTimeline;return{start:e.Db(),end:e.Oa()}}return this.g&&this.g.src&&(e=this.g.seekable).length?{start:e.start(0),end:e.end(e.length-1)}:{start:0,end:0}},i.Xf=function(){this.U()&&(this.g.currentTime=this.uc().end)},i.keySystem=function(){var e=this.drmInfo();return e?e.keySystem:""},i.drmInfo=function(){return this.m?this.m.g:null},i.ic=function(){return this.m?this.m.ic():1/0},i.Qc=function(){return this.m?this.m.Qc():{}},i.Fd=function(){return!!this.M&&this.M.g==sr},i.Rc=function(){return this.g?this.H?this.H.i:1:0},i.Ag=function(e){0==e?X("A trick play rate of 0 is unsupported!"):(this.g.paused&&this.g.play(),this.H.set(e),this.l==Wl&&(this.u.playbackRateChanged(e),Fs(this.j,1<Math.abs(e))))},i.pf=function(){var e=this.H.Pc();this.l==Xl&&this.H.set(e),this.l==Wl&&(this.H.set(e),this.u.playbackRateChanged(e),Fs(this.j,!1))},i.Xa=function(){if(this.i){for(var e=this.j?this.j.l:null,t=[],n=0,r=c(this.i.variants),i=r.next();!i.done;i=r.next())if(Nn(i=i.value)){var a=En(i);a.active=i==e,a.active||1==n||null==e||i.video!=e.video||i.audio!=e.audio||(a.active=!0),a.active&&n++,t.push(a)}return t}return this.g&&this.g.audioTracks?Array.from(this.g.audioTracks).map((function(e){return Mn(e)})):[]},i.Fb=function(){if(this.i){for(var e=this.j?this.j.o:null,t=[],n=c(this.i.textStreams),r=n.next();!r.done;r=n.next()){var i=In(r=r.value);i.active=r==e,t.push(i)}return t}return this.g&&this.g.src&&this.g.textTracks?al(this).map((function(e){return _n(e)})):[]},i.Ff=function(){return this.i?this.i.imageStreams.map((function(e){return kn(e)})):[]},i.Tf=function(e,t){var n,r,i,a,o,s,u,l,c,d,h,f,p,g,m,v,y,b,x,T,A=this;return L((function(S){return 1==S.g?A.i?(n=A.i.imageStreams.find((function(t){return t.id==e})))?n.segmentIndex?S.A(3):w(S,n.createSegmentIndex(),3):S.return(null):S.A(2):2!=S.g?null==(r=n.segmentIndex.find(t))?S.return(null):(i=n.segmentIndex.get(r),a=i.tilesLayout||n.tilesLayout,(o=/(\d+)x(\d+)/.exec(a))?(s=n.width||0,u=n.height||0,l=parseInt(o[1],10),c=parseInt(o[2],10),d=s/l,h=u/c,f=l*c,p=i.j-i.startTime,g=i.s||p/f,m=i.startTime,y=v=0,1<f&&(b=Math.floor((t-i.startTime)/g),m=i.startTime+b*g,v=b%l*d,y=Math.floor(b/l)*h),x=!1,(T=i.o)&&(x=!0,h=T.height,v=T.positionX,y=T.positionY,d=T.width),S.return({imageHeight:u,imageWidth:s,height:h,positionX:v,positionY:y,startTime:m,duration:g,uris:i.ya(),width:d,sprite:x})):S.return(null)):S.return(null)}))},i.Se=function(e){if(this.i&&this.j){var t=this.i.textStreams.find((function(t){return t.id==e.id}));t&&t!=this.j.o&&(Wu(this.o.h,t,!1),Gs(this.j,t),Il(this),this.vb=t.language)}else if(this.g&&this.g.src&&this.g.textTracks){for(var n=(t=c(t=al(this))).next();!n.done;n=t.next())Cn(n=n.value)==e.id?n.mode=this.ia?"showing":"hidden":n.mode="disabled";Il(this)}},i.Te=function(e,t,n){if(t=void 0!==t&&t,n=void 0===n?0:n,this.i&&this.j){this.h.abr.enabled&&X("Changing tracks while abr manager is enabled will likely result in the selected track being overriden. Consider disabling abr before calling selectVariantTrack().");var r=this.i.variants.find((function(t){return t.id==e.id}));r&&Nn(r)&&(wl(this,r,!1,t,n),this.ub=new rr(r),yl(this))}else if(this.g&&this.g.audioTracks)for(n=(t=c(t=Array.from(this.g.audioTracks))).next();!n.done;n=t.next())if(Cn(n=n.value)==e.id){Tl(this,n);break}},i.Af=function(){return jl(this.Xa())},i.Rf=function(){return jl(this.Fb())},i.zf=function(){return Array.from(Bl(this.Xa()))},i.Qf=function(){return Array.from(Bl(this.Fb()))},i.ge=function(e,t,n){if(n=void 0===n?0:n,this.i&&this.B){this.ub=new ir(e,t||"",n,""),t=function(e,t){return e.video||t.video?e.video&&t.video?Math.abs((e.video.height||0)-(t.video.height||0))+Math.abs((e.video.width||0)-(t.video.width||0)):1/0:0},e=this.j.l;var r=this.ub.create(this.i.variants);n=null;for(var i=(r=c(r.values())).next();!i.done;i=r.next())i=i.value,(!n||t(n,e)>t(i,e))&&(n=i);n?(t=En(n),this.Te(t,!0)):xl(this)}else if(this.g&&this.g.audioTracks){i=Array.from(this.g.audioTracks),e=an(e),r=n=null;for(var a=(i=c(i)).next();!a.done;a=i.next()){var o=Mn(a=a.value);an(o.language)==e&&(n=a,t?o.roles.includes(t)&&(r=a):0==o.roles.length&&(r=a))}r?Tl(this,r):n&&Tl(this,n)}},i.he=function(e,t,n){if(n=void 0!==n&&n,this.i&&this.B)this.vb=e,this.cc=t||"",this.$b=n,(e=Dn(this.i.textStreams,this.vb,this.cc,this.$b)[0]||null)&&e!=this.j.o&&(Wu(this.o.h,e,!1),this.h.streaming.alwaysStreamText||this.Hd())&&(Gs(this.j,e),Il(this));else{var r=an(e);(e=this.Fb().find((function(e){return an(e.language)==r&&(!t||e.roles.includes(t))&&e.forced==n})))&&this.Se(e)}},i.tg=function(e){if(this.i&&this.B){for(var t=null,n=c(this.i.variants),r=n.next();!r.done;r=n.next())if((r=r.value).audio.label==e){t=r;break}null!=t&&(this.ub=new ir(t.language,"",0,e),xl(this))}},i.Hd=function(){var e=this.ia;return this.G?this.G.m.isTextVisible():this.g&&this.g.src&&this.g.textTracks?al(this).some((function(e){return"showing"==e.mode})):e},i.He=function(){return this.g&&this.g.src&&this.g.textTracks?ol(this).map((function(e){return _n(e)})):[]},i.Cf=function(e){var t=an(e),n=ol(this).filter((function(e){return an(e.language)==t}));if(!n||!n.length)return[];e=[];for(var r=new Set,i=(n=c(n)).next();!i.done;i=n.next())if((i=i.value)&&i.cues)for(var a=(i=c(i.cues)).next();!a.done;a=i.next()){var o=a.value;(a=o.id)&&""!=a||(a=o.startTime+"-"+o.endTime+"-"+o.text),o={id:a,title:o.text,startTime:o.startTime,endTime:o.endTime},r.has(a)||(e.push(o),r.add(a))}return e},i.yg=function(e){if(e=!!e,this.ia!=e){if(this.ia=e,this.l==Wl)this.G.m.setTextVisibility(e),this.h.streaming.alwaysStreamText||(e?this.j.o||0<(e=Dn(this.i.textStreams,this.vb,this.cc,this.$b)).length&&(Gs(this.j,e[0]),Il(this)):function(e){var t=e.j.get(tt);t&&(Js(t),Zs(t).catch((function(){})),e.j.delete(tt)),e.o=null}(this.j));else if(this.g&&this.g.src&&this.g.textTracks)for(var t=al(this),n=(t=c(t)).next();!n.done;n=t.next())"disabled"!=(n=n.value).mode&&(n.mode=e?"showing":"hidden");kl(this)}},i.Of=function(){if(!this.U())return null;var e=this.Ga.l,t=0;if(this.B)t=this.B.Ic();else if(e){if(null==e.startTime)return new Date;t=e.startTime}return this.i?new Date(1e3*(this.i.presentationTimeline.i+t)):this.g&&this.g.getStartDate?(e=this.g.getStartDate(),isNaN(e.getTime())?null:new Date(e.getTime()+1e3*t)):null},i.Ie=function(){if(!this.U())return null;if(this.i)return new Date(1e3*this.i.presentationTimeline.i);if(this.g&&this.g.getStartDate){var e=this.g.getStartDate();return isNaN(e.getTime())?null:e}return null},i.Na=function(){if(this.l==Wl)return this.G.Na();var e={total:[],audio:[],video:[],text:[]};return this.l==Xl&&(e.total=Ao(this.g.buffered)),e},i.getStats=function(){if(this.l!=Wl&&this.l!=Xl)return{width:NaN,height:NaN,streamBandwidth:NaN,decodedFrames:NaN,droppedFrames:NaN,corruptedFrames:NaN,stallsDetected:NaN,gapsJumped:NaN,estimatedBandwidth:NaN,completionPercent:NaN,loadLatency:NaN,manifestTimeSeconds:NaN,drmTimeSeconds:NaN,playTime:NaN,pauseTime:NaN,bufferingTime:NaN,licenseTime:NaN,liveLatency:NaN,maxSegmentDuration:NaN,switchHistory:[],stateHistory:[]};vl(this);var e=this.g,t=e.currentTime/e.duration;if(!isNaN(t)){var n=this.o;t=Math.round(100*t),n.i=isNaN(n.i)?t:Math.max(n.i,t)}if(this.B&&(this.o.M=this.B.te(),this.o.O=this.B.ue()),e.getVideoPlaybackQuality){n=e.getVideoPlaybackQuality(),t=this.o;var r=Number(n.totalVideoFrames);t.L=Number(n.droppedVideoFrames),t.J=r,this.o.H=Number(n.corruptedVideoFrames)}this.m?n=(n=this.m).H?n.H:NaN:n=NaN,this.o.s=n,this.l==Wl&&((n=this.j.l)&&(this.o.B=(this.H?this.H.i:1)*n.bandwidth),n&&n.video&&(t=this.o,r=n.video.height||NaN,t.o=n.video.width||NaN,t.l=r),this.U()&&(n=this.Ie().valueOf()+1e3*this.uc().end,this.o.D=(Date.now()-n)/1e3),this.i&&this.i.presentationTimeline&&(this.o.G=this.i.presentationTimeline.g),n=this.u.getBandwidthEstimate(),this.o.u=n),this.l==Xl&&(n=this.o,t=e.videoHeight||NaN,n.o=e.videoWidth||NaN,n.l=t);var i=this.o;e=i.o,n=i.l,t=i.B,r=i.J;for(var a=i.L,o=i.H,s=i.O,u=i.M,l=i.u,d=i.i,h=i.m,f=i.F,p=i.j,g=Ku(i.g,"playing"),m=Ku(i.g,"paused"),v=Ku(i.g,"buffering"),y=i.s,b=i.D,x=i.G,w=function(e){function t(e){return{timestamp:e.timestamp,state:e.state,duration:e.duration}}for(var n=[],r=c(e.h),i=r.next();!i.done;i=r.next())n.push(t(i.value));return e.g&&n.push(t(e.g)),n}(i.g),T=[],A=(i=c(i.h.g)).next();!A.done;A=i.next())A=A.value,T.push({timestamp:A.timestamp,id:A.id,type:A.type,fromAdaptation:A.fromAdaptation,bandwidth:A.bandwidth});return{width:e,height:n,streamBandwidth:t,decodedFrames:r,droppedFrames:a,corruptedFrames:o,stallsDetected:s,gapsJumped:u,estimatedBandwidth:l,completionPercent:d,loadLatency:h,manifestTimeSeconds:f,drmTimeSeconds:p,playTime:g,pauseTime:m,bufferingTime:v,licenseTime:y,liveLatency:b,maxSegmentDuration:x,stateHistory:w,switchHistory:T}},i.hf=function(e,t,n,r,i,a,o){o=void 0!==o&&o;var s,u,l,c,d,h,f,p,g,m,v=this;return L((function(y){switch(y.g){case 1:if(v.l!=Wl&&v.l!=Xl)throw new Ne(1,7,7004);if(r){y.A(2);break}return w(y,sl(v,e),3);case 3:r=y.h;case 2:if(s=[],v.F)try{s=v.F.getServerSideCuePoints()}catch(b){}if(v.l!=Xl){y.A(4);break}return o&&(n="forced"),w(y,ul(v,e,t,n,r,a||"",s),5);case 5:if(u=v.Fb(),l=u.find((function(e){return e.language==t&&e.label==(a||"")&&e.kind==n})))return Sl(v),y.return(l);throw new Ne(1,2,2012);case 4:if(c=nt,1/0==(d=v.i.presentationTimeline.getDuration()))throw new Ne(1,4,4033);if(!s.length){y.A(6);break}return w(y,ll(v,e,v.D,v.h.streaming.retryParameters),7);case 7:h=y.h,f=cl(v,h,r,s),p=new Blob([f],{type:"text/vtt"}),e=Zo(p),r="text/vtt";case 6:if(g={id:v.Yd++,originalId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:Ss(0,d,[e]),mimeType:r||"",codecs:i||"",kind:n,encrypted:!1,drmInfos:[],keyIds:new Set,language:t,label:a||null,type:c.X,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],forced:!!o,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null},m=Vt(g.mimeType,g.codecs),!Yt(m))throw new Ne(2,2,2014,r);return v.i.textStreams.push(g),Sl(v),y.return(In(g))}}))},i.jf=function(e,t){var n,r,i,a,o,s,u,l,d,h,f,p,g,m,v,y,b=this;return L((function(x){switch(x.g){case 1:if(b.l!=Wl&&b.l!=Xl)throw new Ne(1,7,7004);if(b.l==Xl)throw new Ne(1,2,2016);if(t){x.A(2);break}return w(x,sl(b,e),3);case 3:t=x.h;case 2:if("text/vtt"!=t)throw new Ne(1,2,2017,e);if(n=nt,1/0==(r=b.i.presentationTimeline.getDuration()))throw new Ne(1,4,4045);return w(x,ll(b,e,b.D,b.h.streaming.retryParameters),4);case 4:if(i=x.h,!(a=Zt[t]))throw new Ne(2,2,2014,t);for(o=a(),s={periodStart:0,segmentStart:0,segmentEnd:r,vttOffset:0},u=_e(i),l=o.parseMedia(u,s),d=[],h={},f=c(l),p=f.next();!p.done;h={Rb:h.Rb},p=f.next())g=p.value,h.Rb=Qe([e],[g.payload])[0],m=new mo(g.startTime,g.endTime,function(e){return function(){return[e.Rb]}}(h),0,null,null,0,0,1/0),h.Rb.includes("#xywh")&&(4===(v=h.Rb.split("#xywh=")[1].split(",")).length&&m.Ye({height:parseInt(v[3],10),positionX:parseInt(v[0],10),positionY:parseInt(v[1],10),width:parseInt(v[2],10)})),d.push(m);return y={id:b.Yd++,originalId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new Ts(d),mimeType:t||"",codecs:"",kind:"",encrypted:!1,drmInfos:[],keyIds:new Set,language:"und",label:null,type:n.Wb,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,tilesLayout:"1x1"},b.i.imageStreams.push(y),Sl(b),x.return(kn(y))}}))},i.gf=function(e,t,n){var r,i,a,o,s=this;return L((function(u){switch(u.g){case 1:if(s.l!=Wl&&s.l!=Xl)throw new Ne(1,7,7004);if(n){u.A(2);break}return w(u,sl(s,e),3);case 3:n=u.h;case 2:if(r=[],s.F)try{r=s.F.getServerSideCuePoints()}catch(l){}return w(u,ul(s,e,t,"chapters",n,"",r),4);case 4:if(i=u.h,a=s.He(),!(o=a.find((function(e){return e.language==t})))){u.A(5);break}return w(u,new Promise((function(e,t){s.s.ma(i,"load",e),s.s.ma(i,"error",(function(){t(new Ne(1,2,2015))}))})),6);case 6:return u.return(o);case 5:throw new Ne(1,2,2012)}}))},i.ke=function(e,t){this.ec.width=e,this.ec.height=t},i.ce=function(e){if(this.l==Wl){var t=this.j;if(e=void 0===e?.1:e,t.h.g)t=!1;else if(t.s)t=!1;else{for(var n=c(t.j.values()),r=n.next();!r.done;r=n.next())!(r=r.value).nc||r.ra||r.Ka||(r.nc=!1,Qs(t,r,e));t=!0}}else t=!1;return t},i.If=function(){return X("Shaka Player's internal Manifest structure is NOT covered by semantic versioning compatibility guarantees.  It may change at any time!  Please consider filing a feature request for whatever you use getManifest() for."),this.i},i.Jf=function(){return this.Yc},i.$e=function(e){this.Uc=e},z("shaka.Player",qu),qu.prototype.setVideoContainer=qu.prototype.$e,qu.prototype.getManifestParserFactory=qu.prototype.Jf,qu.prototype.getManifest=qu.prototype.If,qu.prototype.retryStreaming=qu.prototype.ce,qu.prototype.setMaxHardwareResolution=qu.prototype.ke,qu.prototype.addChaptersTrack=qu.prototype.gf,qu.prototype.addThumbnailsTrack=qu.prototype.jf,qu.prototype.addTextTrackAsync=qu.prototype.hf,qu.prototype.getStats=qu.prototype.getStats,qu.prototype.getBufferedInfo=qu.prototype.Na,qu.prototype.getPresentationStartTimeAsDate=qu.prototype.Ie,qu.prototype.getPlayheadTimeAsDate=qu.prototype.Of,qu.prototype.setTextTrackVisibility=qu.prototype.yg,qu.prototype.getChapters=qu.prototype.Cf,qu.prototype.getChaptersTracks=qu.prototype.He,qu.prototype.isTextTrackVisible=qu.prototype.Hd,qu.prototype.selectVariantsByLabel=qu.prototype.tg,qu.prototype.selectTextLanguage=qu.prototype.he,qu.prototype.selectAudioLanguage=qu.prototype.ge,qu.prototype.getTextLanguages=qu.prototype.Qf,qu.prototype.getAudioLanguages=qu.prototype.zf,qu.prototype.getTextLanguagesAndRoles=qu.prototype.Rf,qu.prototype.getAudioLanguagesAndRoles=qu.prototype.Af,qu.prototype.selectVariantTrack=qu.prototype.Te,qu.prototype.selectTextTrack=qu.prototype.Se,qu.prototype.getThumbnails=qu.prototype.Tf,qu.prototype.getImageTracks=qu.prototype.Ff,qu.prototype.getTextTracks=qu.prototype.Fb,qu.prototype.getVariantTracks=qu.prototype.Xa,qu.prototype.cancelTrickPlay=qu.prototype.pf,qu.prototype.trickPlay=qu.prototype.Ag,qu.prototype.getPlaybackRate=qu.prototype.Rc,qu.prototype.isBuffering=qu.prototype.Fd,qu.prototype.getKeyStatuses=qu.prototype.Qc,qu.prototype.getExpiration=qu.prototype.ic,qu.prototype.drmInfo=qu.prototype.drmInfo,qu.prototype.keySystem=qu.prototype.keySystem,qu.prototype.goToLive=qu.prototype.Xf,qu.prototype.seekRange=qu.prototype.uc,qu.prototype.isAudioOnly=qu.prototype.Zf,qu.prototype.isInProgress=qu.prototype.jb,qu.prototype.isLive=qu.prototype.U,qu.prototype.getAdManager=qu.prototype.Ge,qu.prototype.getAssetUri=qu.prototype.Dd,qu.prototype.getNetworkingEngine=qu.prototype.jc,qu.prototype.getMediaElement=qu.prototype.Lf,qu.prototype.getLoadMode=qu.prototype.Hf,qu.prototype.resetConfiguration=qu.prototype.rg,qu.prototype.getBufferFullness=qu.prototype.Bf,qu.prototype.getConfiguration=qu.prototype.getConfiguration,qu.prototype.configure=qu.prototype.configure,qu.prototype.load=qu.prototype.load,qu.prototype.updateStartTime=qu.prototype.Fg,qu.prototype.unload=qu.prototype.re,qu.prototype.detach=qu.prototype.detach,qu.prototype.attachCanvas=qu.prototype.lf,qu.prototype.attach=qu.prototype.Yb,qu.probeSupport=function(e){var t,n,r,i,a;return e=void 0===e||e,L((function(o){if(1==o.g)return t={},e?w(o,function(){var e,t,n,r,i,a;return L((function(o){return 1==o.g?(e="org.w3.clearkey com.widevine.alpha com.microsoft.playready com.microsoft.playready.recommendation com.apple.fps.1_0 com.apple.fps com.adobe.primetime".split(" "),n=[{videoCapabilities:t=[{contentType:'video/mp4; codecs="avc1.42E01E"'},{contentType:'video/webm; codecs="vp8"'}],persistentState:"required",sessionTypes:["persistent-license"]},{initDataTypes:["cenc"],videoCapabilities:t}],r=new Map,i=function(e){var t,i,a;return L((function(o){switch(o.g){case 1:if(A(o,2),"org.w3.clearkey"===e&&gt())throw Error("Unsupported keySystem");return w(o,navigator.requestMediaKeySystemAccess(e,n),4);case 4:return t=o.h,a=!!(i=t.getConfiguration().sessionTypes)&&i.includes("persistent-license"),mt("Tizen 3")&&(a=!1),r.set(e,{persistentState:a}),w(o,t.createMediaKeys(),5);case 5:E(o,0);break;case 2:I(o),r.set(e,null),T(o)}}))},a=e.map((function(e){return i(e)})),w(o,Promise.all(a),2)):o.return(zr(r))}))}(),3):o.A(2);2!=o.g&&(t=o.h);var s={};if(ut()){for(var u in Qi)s[u]=!0;for(var l in Ji)s[l]=!0}u={mpd:"application/dash+xml",m3u8:"application/x-mpegurl",ism:"application/vnd.ms-sstr+xml"};for(var h=(l=c(["application/dash+xml","application/x-mpegurl","application/vnd.apple.mpegurl","application/vnd.ms-sstr+xml"])).next();!h.done;h=l.next())s[h=h.value]=ut()?!!Qi[h]:lt(h);for(var f in u)s[f]=ut()?!!Ji[f]:lt(u[f]);for(n=s,s={},u=(f=c(f='video/mp4; codecs="avc1.42E01E",video/mp4; codecs="avc3.42E01E",video/mp4; codecs="hev1.1.6.L93.90",video/mp4; codecs="hvc1.1.6.L93.90",video/mp4; codecs="hev1.2.4.L153.B0"; eotf="smpte2084",video/mp4; codecs="hvc1.2.4.L153.B0"; eotf="smpte2084",video/mp4; codecs="vp9",video/mp4; codecs="vp09.00.10.08",video/mp4; codecs="av01.0.01M.08",audio/mp4; codecs="mp4a.40.2",audio/mp4; codecs="ac-3",audio/mp4; codecs="ec-3",audio/mp4; codecs="opus",audio/mp4; codecs="flac",video/webm; codecs="vp8",video/webm; codecs="vp9",video/webm; codecs="vp09.00.10.08",audio/webm; codecs="vorbis",audio/webm; codecs="opus",video/mp2t; codecs="avc1.42E01E",video/mp2t; codecs="avc3.42E01E",video/mp2t; codecs="hvc1.1.6.L93.90",video/mp2t; codecs="mp4a.40.2",video/mp2t; codecs="ac-3",video/mp2t; codecs="ec-3",text/vtt,application/mp4; codecs="wvtt",application/ttml+xml,application/mp4; codecs="stpp"'.split(",").concat(d(ts)))).next();!u.done;u=f.next())s[u=u.value]=ut()?!!Yt(u)||(Z(u)||Bt(u)):lt(u),s[l=u.split(";")[0]]=s[l]||s[u];for(a in r={manifest:n,media:s,drm:t},i=$l)r[a]=i[a]();return o.return(r)}))},qu.isBrowserSupported=function(){if(e.Promise||X("A Promise implementation or polyfill is required"),!(e.Promise&&e.Uint8Array&&Array.prototype.forEach)||mt("Trident/"))return!1;var t=gt();return!(t&&13>t||!(e.MediaKeys&&e.navigator&&e.navigator.requestMediaKeySystemAccess&&e.MediaKeySystemAccess&&e.MediaKeySystemAccess.prototype.getConfiguration))&&(!!ut()||lt("application/x-mpegurl"))},qu.setAdManagerFactory=function(e){Ql=e},qu.registerSupportPlugin=function(e,t){$l[e]=t},qu.prototype.destroy=qu.prototype.destroy;var Kl=0,Hl=1,Wl=2,Xl=3;qu.LoadMode={DESTROYED:Kl,NOT_LOADED:Hl,MEDIA_SOURCE:Wl,SRC_EQUALS:Xl},qu.version="v4.3.4";var ql=["4","3"];Jn=new function(e){this.g=e,this.i=$n,this.h=Qn}(new qn(Number(ql[0]),Number(ql[1])));var Yl=["output-restricted","internal-error"],$l={},Ql=null,Jl={mp4:"video/mp4",m4v:"video/mp4",m4a:"audio/mp4",webm:"video/webm",weba:"audio/webm",mkv:"video/webm",ts:"video/mp2t",ogv:"video/ogg",ogg:"audio/ogg",mpg:"video/mpeg",mpeg:"video/mpeg",m3u8:"application/x-mpegurl",mpd:"application/dash+xml",mp3:"audio/mpeg",aac:"audio/aac",flac:"audio/flac",wav:"audio/wav"},Zl={sbv:"text/x-subviewer",srt:"text/srt",vtt:"text/vtt",webvtt:"text/vtt",ttml:"application/ttml+xml",lrc:"application/x-subtitle-lrc",ssa:"text/x-ssa",ass:"text/x-ssa"};function ec(){this.h=[],this.j=this.i=this.g=0}function tc(e,t,n){var r=this;this.h=e,this.g=t,this.m=n,this.i=!1,this.l=this.g.getVolume(),this.j=new Or,this.j.C(this.g,google.ima.AdEvent.Type.PAUSED,(function(){r.i=!0})),this.j.C(this.g,google.ima.AdEvent.Type.RESUMED,(function(){r.i=!1}))}function nc(t,n,r,i){var a=this;this.o=t,this.i=n,this.s=null,this.u=NaN,this.l=i,this.j=null,this.h=new Or,google.ima.settings.setLocale(r),(t=new google.ima.AdDisplayContainer(this.o,this.i)).initialize(),this.m=new google.ima.AdsLoader(t),this.m.getSettings().setPlayerType("shaka-player"),this.m.getSettings().setPlayerVersion("v4.3.4"),this.g=null,this.h.ma(this.m,google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,(function(t){!function(t,n){t.l(new vr("ads-loaded",(new Map).set("loadTime",Date.now()/1e3-t.u))),t.g=n.getAdsManager(t.i),t.l(new vr("ima-ad-manager-loaded",(new Map).set("imaAdManager",t.g)));var r=t.g.getCuePoints();if(r.length){n=[];for(var i=(r=c(r)).next();!i.done;i=r.next())n.push({start:i.value,end:null});t.l(new vr("ad-cue-points-changed",(new Map).set("cuepoints",n)))}!function(e){function t(t,n){t=(new Map).set("originalEvent",t),e.l(new vr(n,t))}e.h.C(e.g,google.ima.AdErrorEvent.Type.AD_ERROR,(function(t){rc(e,t)})),e.h.C(e.g,google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,(function(t){ac(e,t)})),e.h.C(e.g,google.ima.AdEvent.Type.STARTED,(function(t){ac(e,t)})),e.h.C(e.g,google.ima.AdEvent.Type.FIRST_QUARTILE,(function(e){t(e,"ad-first-quartile")})),e.h.C(e.g,google.ima.AdEvent.Type.MIDPOINT,(function(e){t(e,"ad-midpoint")})),e.h.C(e.g,google.ima.AdEvent.Type.THIRD_QUARTILE,(function(e){t(e,"ad-third-quartile")})),e.h.C(e.g,google.ima.AdEvent.Type.COMPLETE,(function(e){t(e,"ad-complete")})),e.h.C(e.g,google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,(function(t){oc(e,t)})),e.h.C(e.g,google.ima.AdEvent.Type.ALL_ADS_COMPLETED,(function(t){oc(e,t)})),e.h.C(e.g,google.ima.AdEvent.Type.SKIPPED,(function(e){t(e,"ad-skipped")})),e.h.C(e.g,google.ima.AdEvent.Type.VOLUME_CHANGED,(function(e){t(e,"ad-volume-changed")})),e.h.C(e.g,google.ima.AdEvent.Type.VOLUME_MUTED,(function(e){t(e,"ad-muted")})),e.h.C(e.g,google.ima.AdEvent.Type.PAUSED,(function(n){e.j&&(e.j.i=!0,t(n,"ad-paused"))})),e.h.C(e.g,google.ima.AdEvent.Type.RESUMED,(function(n){e.j&&(e.j.i=!1,t(n,"ad-resumed"))})),e.h.C(e.g,google.ima.AdEvent.Type.SKIPPABLE_STATE_CHANGED,(function(n){e.j&&t(n,"ad-skip-state-changed")})),e.h.C(e.g,google.ima.AdEvent.Type.CLICK,(function(e){t(e,"ad-clicked")})),e.h.C(e.g,google.ima.AdEvent.Type.AD_PROGRESS,(function(e){t(e,"ad-progress")})),e.h.C(e.g,google.ima.AdEvent.Type.AD_BUFFERING,(function(e){t(e,"ad-buffering")})),e.h.C(e.g,google.ima.AdEvent.Type.IMPRESSION,(function(e){t(e,"ad-impression")})),e.h.C(e.g,google.ima.AdEvent.Type.DURATION_CHANGE,(function(e){t(e,"ad-duration-changed")})),e.h.C(e.g,google.ima.AdEvent.Type.USER_CLOSE,(function(e){t(e,"ad-closed")})),e.h.C(e.g,google.ima.AdEvent.Type.LOADED,(function(e){t(e,"ad-loaded")})),e.h.C(e.g,google.ima.AdEvent.Type.ALL_ADS_COMPLETED,(function(e){t(e,"all-ads-completed")})),e.h.C(e.g,google.ima.AdEvent.Type.LINEAR_CHANGED,(function(e){t(e,"ad-linear-changed")})),e.h.C(e.g,google.ima.AdEvent.Type.AD_METADATA,(function(e){t(e,"ad-metadata")})),e.h.C(e.g,google.ima.AdEvent.Type.LOG,(function(e){t(e,"ad-recoverable-error")})),e.h.C(e.g,google.ima.AdEvent.Type.AD_BREAK_READY,(function(e){t(e,"ad-break-ready")})),e.h.C(e.g,google.ima.AdEvent.Type.INTERACTION,(function(e){t(e,"ad-interaction")}))}(t);try{t.g.init(t.i.offsetWidth,t.i.offsetHeight,ic(t)?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL),t.h.C(t.i,"loadeddata",(function(){t.g.resize(t.i.offsetWidth,t.i.offsetHeight,ic(t)?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)})),"ResizeObserver"in e?(t.s=new ResizeObserver((function(){t.g.resize(t.i.offsetWidth,t.i.offsetHeight,ic(t)?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)})),t.s.observe(t.i)):t.h.C(document,"fullscreenchange",(function(){t.g.resize(t.i.offsetWidth,t.i.offsetHeight,ic(t)?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)})),t.i.addEventListener("play",(function(){t.g.start()}),{once:!0})}catch(a){oc(t,null)}}(a,t)})),this.h.C(this.m,google.ima.AdErrorEvent.Type.AD_ERROR,(function(e){rc(a,e)})),this.i.onended=function(){a.m.contentComplete()}}function rc(e,t){t.getError(),oc(e,null),e.l(new vr("ad-cue-points-changed",(new Map).set("cuepoints",[])))}function ic(e){return document.fullscreenEnabled?!!document.fullscreenElement:!!(e=e.i).webkitSupportsFullscreen&&e.webkitDisplayingFullscreen}function ac(e,t){var n=t.getAd();n?(e.j=new tc(n,e.g,e.i),t=(new Map).set("ad",e.j).set("sdkAdObject",n).set("originalEvent",t),e.l(new vr("ad-started",t)),e.j.isLinear()&&(e.o.setAttribute("ad-active","true"),e.i.pause())):X("The IMA SDK fired a "+t.type+" event with no associated ad. Unable to play ad!")}function oc(e,t){e.l(new vr("ad-stopped",(new Map).set("originalEvent",t))),e.j&&e.j.isLinear()&&(e.o.removeAttribute("ad-active"),e.i.play())}function sc(e,t){this.i=e,this.h=null,this.g=t}function uc(e,t,n,r){var i=this;this.s=e,this.l=t,this.j=null,this.G=NaN,this.i=r,this.F=!1,this.u=this.m=this.o=null,this.B="",this.D=[],this.h=new Or,(e=new google.ima.dai.api.UiSettings).setLocale(n),this.g=new google.ima.dai.api.StreamManager(this.l,this.s,e),this.i(new vr("ima-stream-manager-loaded",(new Map).set("imaStreamManager",this.g))),this.h.C(this.g,google.ima.dai.api.StreamEvent.Type.LOADED,(function(e){!function(e,t){e.i(new vr("ads-loaded",(new Map).set("loadTime",Date.now()/1e3-e.G))),t=t.getStreamData().url,e.j.resolve(t),e.j=null,e.F||e.h.C(e.l,"seeked",(function(){var t=e.l.currentTime;if(0!=t){e.g.streamTimeForContentTime(t);var n=e.g.previousCuePointForStreamTime(t);n&&!n.played&&(e.o=t,e.l.currentTime=n.start)}}))}(i,e)})),this.h.C(this.g,google.ima.dai.api.StreamEvent.Type.ERROR,(function(){i.B.length?i.j.resolve(i.B):i.j.reject("IMA Stream request returned an error and there was no backup asset uri provided."),i.j=null})),this.h.C(this.g,google.ima.dai.api.StreamEvent.Type.AD_BREAK_STARTED,(function(){})),this.h.C(this.g,google.ima.dai.api.StreamEvent.Type.STARTED,(function(e){e=e.getAd(),i.m=new sc(e,i.l),i.u&&(i.m.h=i.u),i.i(new vr("ad-started",(new Map).set("ad",i.m))),i.s.setAttribute("ad-active","true")})),this.h.C(this.g,google.ima.dai.api.StreamEvent.Type.AD_BREAK_ENDED,(function(){i.s.removeAttribute("ad-active");var e=i.l.currentTime;i.o&&i.o>e&&(i.l.currentTime=i.o,i.o=null)})),this.h.C(this.g,google.ima.dai.api.StreamEvent.Type.AD_PROGRESS,(function(e){i.u=e.getStreamData().adProgressData,i.m&&(i.m.h=i.u)})),this.h.C(this.g,google.ima.dai.api.StreamEvent.Type.FIRST_QUARTILE,(function(){i.i(new vr("ad-first-quartile"))})),this.h.C(this.g,google.ima.dai.api.StreamEvent.Type.MIDPOINT,(function(){i.i(new vr("ad-midpoint"))})),this.h.C(this.g,google.ima.dai.api.StreamEvent.Type.THIRD_QUARTILE,(function(){i.i(new vr("ad-third-quartile"))})),this.h.C(this.g,google.ima.dai.api.StreamEvent.Type.COMPLETE,(function(){i.i(new vr("ad-complete")),i.i(new vr("ad-stopped")),i.s.removeAttribute("ad-active"),i.m=null})),this.h.C(this.g,google.ima.dai.api.StreamEvent.Type.SKIPPED,(function(){i.i(new vr("ad-skipped")),i.i(new vr("ad-stopped"))})),this.h.C(this.g,google.ima.dai.api.StreamEvent.Type.CUEPOINTS_CHANGED,(function(e){var t=e.getStreamData();e=[];for(var n=(t=c(t.cuepoints)).next();!n.done;n=t.next())n=n.value,e.push({start:n.start,end:n.end});i.D=e,i.i(new vr("ad-cue-points-changed",(new Map).set("cuepoints",e)))}))}function lc(){xr.call(this),this.g=this.i=null,this.h=new ec,this.j=navigator.language}function cc(e){return JSON.stringify(e,(function(e,t){if("function"!=typeof t){if(t instanceof Event||t instanceof vr){var n={};for(r in t)(e=t[r])&&"object"==typeof e?"detail"==r&&(n[r]=e):r in Event||(n[r]=e);return n}if(t instanceof Error){var r=new Set(["name","message","stack"]);for(n in t)r.add(n);for(n=(e=c(Object.getOwnPropertyNames(t))).next();!n.done;n=e.next())r.add(n.value);for(e={},n=(r=c(r)).next();!n.done;n=r.next())e[n=n.value]=t[n];t={__type__:"Error",contents:e}}else if(t instanceof TimeRanges){for(r={__type__:"TimeRanges",length:t.length,start:[],end:[]},n=(t=c(Ao(t))).next();!n.done;n=t.next())e=(n=n.value).end,r.start.push(n.start),r.end.push(e);t=r}else t=t instanceof Uint8Array?{__type__:"Uint8Array",entries:Array.from(t)}:"number"==typeof t?isNaN(t)?"NaN":isFinite(t)?t:0>t?"-Infinity":"Infinity":t;return t}}))}function dc(e){return JSON.parse(e,(function(e,t){if("NaN"==t)var n=NaN;else if("-Infinity"==t)n=-1/0;else if("Infinity"==t)n=1/0;else if(t&&"object"==typeof t&&"TimeRanges"==t.__type__)n=function(e){return{length:e.length,start:function(t){return e.start[t]},end:function(t){return e.end[t]}}}(t);else if(t&&"object"==typeof t&&"Uint8Array"==t.__type__)n=new Uint8Array(t.entries);else if(t&&"object"==typeof t&&"Error"==t.__type__){for(n in e=t.contents,t=Error(e.message),e)t[n]=e[n];n=t}else n=t;return n}))}(i=tc.prototype).getDuration=function(){return this.h.getDuration()},i.getMinSuggestedDuration=function(){return this.h.getMinSuggestedDuration()},i.getRemainingTime=function(){return this.g.getRemainingTime()},i.isPaused=function(){return this.i},i.isSkippable=function(){return 0<=this.h.getSkipTimeOffset()},i.getTimeUntilSkippable=function(){var e=this.h.getSkipTimeOffset();return e=this.getRemainingTime()-e,Math.max(e,0)},i.canSkipNow=function(){return this.g.getAdSkippableState()},i.skip=function(){return this.g.skip()},i.pause=function(){return this.g.pause()},i.play=function(){return this.g.resume()},i.getVolume=function(){return this.g.getVolume()},i.setVolume=function(e){return this.g.setVolume(e)},i.isMuted=function(){return 0==this.g.getVolume()},i.isLinear=function(){return this.h.isLinear()},i.resize=function(e,t){var n=!1,r=this.m;document.fullscreenEnabled?n=!!document.fullscreenElement:r.webkitSupportsFullscreen&&(n=r.webkitDisplayingFullscreen),this.g.resize(e,t,n?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)},i.setMuted=function(e){e?(this.l=this.getVolume(),this.setVolume(0)):this.setVolume(this.l)},i.getSequenceLength=function(){var e=this.h.getAdPodInfo();return null==e?1:e.getTotalAds()},i.getPositionInSequence=function(){var e=this.h.getAdPodInfo();return null==e?1:e.getAdPosition()},i.getTitle=function(){return this.h.getTitle()},i.getDescription=function(){return this.h.getDescription()},i.release=function(){this.g=this.h=null},z("shaka.ads.ClientSideAd",tc),tc.prototype.release=tc.prototype.release,tc.prototype.getDescription=tc.prototype.getDescription,tc.prototype.getTitle=tc.prototype.getTitle,tc.prototype.getPositionInSequence=tc.prototype.getPositionInSequence,tc.prototype.getSequenceLength=tc.prototype.getSequenceLength,tc.prototype.setMuted=tc.prototype.setMuted,tc.prototype.resize=tc.prototype.resize,tc.prototype.isLinear=tc.prototype.isLinear,tc.prototype.isMuted=tc.prototype.isMuted,tc.prototype.setVolume=tc.prototype.setVolume,tc.prototype.getVolume=tc.prototype.getVolume,tc.prototype.play=tc.prototype.play,tc.prototype.pause=tc.prototype.pause,tc.prototype.skip=tc.prototype.skip,tc.prototype.canSkipNow=tc.prototype.canSkipNow,tc.prototype.getTimeUntilSkippable=tc.prototype.getTimeUntilSkippable,tc.prototype.isSkippable=tc.prototype.isSkippable,tc.prototype.isPaused=tc.prototype.isPaused,tc.prototype.getRemainingTime=tc.prototype.getRemainingTime,tc.prototype.getMinSuggestedDuration=tc.prototype.getMinSuggestedDuration,tc.prototype.getDuration=tc.prototype.getDuration,nc.prototype.stop=function(){this.g&&this.g.stop(),this.o&&cu(this.o)},nc.prototype.release=function(){this.stop(),this.s&&this.s.disconnect(),this.h&&this.h.release(),this.g&&this.g.destroy(),this.m.destroy()},(i=sc.prototype).getDuration=function(){return this.h?this.h.duration:-1},i.getMinSuggestedDuration=function(){return this.getDuration()},i.getRemainingTime=function(){return this.h?this.h.duration-this.h.currentTime:-1},i.isPaused=function(){return this.g.paused},i.isSkippable=function(){return this.i.isSkippable()},i.getTimeUntilSkippable=function(){var e=this.i.getSkipTimeOffset();return e=this.getRemainingTime()-e,Math.max(e,0)},i.canSkipNow=function(){return 0==this.getTimeUntilSkippable()},i.skip=function(){this.g.currentTime+=this.getRemainingTime()},i.pause=function(){return this.g.pause()},i.play=function(){return this.g.play()},i.getVolume=function(){return this.g.volume},i.setVolume=function(e){this.g.volume=e},i.isMuted=function(){return this.g.muted},i.isLinear=function(){return!0},i.resize=function(){},i.setMuted=function(e){this.g.muted=e},i.getSequenceLength=function(){var e=this.i.getAdPodInfo();return null==e?1:e.getTotalAds()},i.getPositionInSequence=function(){var e=this.i.getAdPodInfo();return null==e?1:e.getAdPosition()},i.getTitle=function(){return this.i.getTitle()},i.getDescription=function(){return this.i.getDescription()},i.release=function(){this.g=this.h=this.i=null},z("shaka.ads.ServerSideAd",sc),sc.prototype.release=sc.prototype.release,sc.prototype.getDescription=sc.prototype.getDescription,sc.prototype.getTitle=sc.prototype.getTitle,sc.prototype.getPositionInSequence=sc.prototype.getPositionInSequence,sc.prototype.getSequenceLength=sc.prototype.getSequenceLength,sc.prototype.setMuted=sc.prototype.setMuted,sc.prototype.resize=sc.prototype.resize,sc.prototype.isLinear=sc.prototype.isLinear,sc.prototype.isMuted=sc.prototype.isMuted,sc.prototype.setVolume=sc.prototype.setVolume,sc.prototype.getVolume=sc.prototype.getVolume,sc.prototype.play=sc.prototype.play,sc.prototype.pause=sc.prototype.pause,sc.prototype.skip=sc.prototype.skip,sc.prototype.canSkipNow=sc.prototype.canSkipNow,sc.prototype.getTimeUntilSkippable=sc.prototype.getTimeUntilSkippable,sc.prototype.isSkippable=sc.prototype.isSkippable,sc.prototype.isPaused=sc.prototype.isPaused,sc.prototype.getRemainingTime=sc.prototype.getRemainingTime,sc.prototype.getMinSuggestedDuration=sc.prototype.getMinSuggestedDuration,sc.prototype.getDuration=sc.prototype.getDuration,uc.prototype.stop=function(){this.B="",this.o=null,this.D=[]},uc.prototype.release=function(){this.stop(),this.h&&this.h.release()},uc.prototype.onCueMetadataChange=function(e){if(e.key&&e.data){var t={};t[e.key]=e.data,this.g.onTimedMetadata(t)}},v(lc,xr),(i=lc.prototype).setLocale=function(e){this.j=e},i.initClientSide=function(t,n){var r=this;if(!e.google||!google.ima||!google.ima.AdsLoader)throw new Ne(2,10,1e4);this.i&&this.i.release(),this.i=new nc(t,n,this.j,(function(e){if(e&&e.type)switch(e.type){case"ads-loaded":r.h.h.push(e.loadTime);break;case"ad-started":r.h.g++;break;case"ad-complete":r.h.i++;break;case"ad-skipped":r.h.j++}r.dispatchEvent(e)}))},i.release=function(){this.i&&(this.i.release(),this.i=null),this.g&&(this.g.release(),this.g=null),xr.prototype.release.call(this)},i.onAssetUnload=function(){this.i&&this.i.stop(),this.g&&this.g.stop(),this.dispatchEvent(new vr("ad-stopped")),this.h=new ec},i.requestClientSideAds=function(e){if(!this.i)throw new Ne(1,10,10001);var t=this.i;t.u=Date.now()/1e3,t.m.requestAds(e)},i.initServerSide=function(t,n){var r=this;if(!e.google||!google.ima||!google.ima.dai)throw new Ne(2,10,10002);this.g&&this.g.release(),this.g=new uc(t,n,this.j,(function(e){if(e&&e.type)switch(e.type){case"ads-loaded":r.h.h.push(e.loadTime);break;case"ad-started":r.h.g++;break;case"ad-complete":r.h.i++;break;case"ad-skipped":r.h.j++}r.dispatchEvent(e)}))},i.requestServerSideStream=function(e,t){if(t=void 0===t?"":t,!this.g)throw new Ne(1,10,10003);e.adTagParameters||(e.adTagParameters={});var n=e.adTagParameters;return(n.mpt||n.mpv)&&X('You have attempted to set "mpt" and/or "mpv" parameters of the ad tag. Please note that those parameters are used for Shaka adoption tracking and will be overriden.'),e.adTagParameters.mpt="shaka-player",e.adTagParameters.mpv="v4.3.4",(n=this.g).j?e=Promise.reject(new Ne(1,10,10004)):(e instanceof google.ima.dai.api.LiveStreamRequest&&(n.F=!0),n.j=new it,n.g.requestStream(e),n.B=t||"",n.G=Date.now()/1e3,e=n.j),e},i.replaceServerSideAdTagParameters=function(e){if(!this.g)throw new Ne(1,10,10003);(e.mpt||e.mpv)&&X('You have attempted to set "mpt" and/or "mpv" parameters of the ad tag. Please note that those parameters are used for Shaka adoption tracking and will be overriden.'),e.mpt="Shaka Player",e.mpv="v4.3.4",this.g.g.replaceAdTagParameters(e)},i.getServerSideCuePoints=function(){if(!this.g)throw new Ne(1,10,10003);return this.g.D},i.getStats=function(){var e=this.h;return{loadTimes:e.h,started:e.g,playedCompletely:e.i,skipped:e.j}},i.onDashTimedMetadata=function(e){if(this.g&&"urn:google:dai:2018"==e.schemeIdUri){var t=e.schemeIdUri,n=e.eventElement?e.eventElement.getAttribute("messageData"):null;this.g.g.processMetadata(t,n,e.startTime)}},i.onHlsTimedMetadata=function(e,t){this.g&&this.g.g.processMetadata("ID3",e.data,t)},i.onCueMetadataChange=function(e){this.g&&this.g.onCueMetadataChange(e)},z("shaka.ads.AdManager",lc),lc.prototype.onCueMetadataChange=lc.prototype.onCueMetadataChange,lc.prototype.onHlsTimedMetadata=lc.prototype.onHlsTimedMetadata,lc.prototype.onDashTimedMetadata=lc.prototype.onDashTimedMetadata,lc.prototype.getStats=lc.prototype.getStats,lc.prototype.getServerSideCuePoints=lc.prototype.getServerSideCuePoints,lc.prototype.replaceServerSideAdTagParameters=lc.prototype.replaceServerSideAdTagParameters,lc.prototype.requestServerSideStream=lc.prototype.requestServerSideStream,lc.prototype.initServerSide=lc.prototype.initServerSide,lc.prototype.requestClientSideAds=lc.prototype.requestClientSideAds,lc.prototype.onAssetUnload=lc.prototype.onAssetUnload,lc.prototype.release=lc.prototype.release,lc.prototype.initClientSide=lc.prototype.initClientSide,lc.prototype.setLocale=lc.prototype.setLocale,lc.ADS_LOADED="ads-loaded",lc.AD_STARTED="ad-started",lc.AD_FIRST_QUARTILE="ad-first-quartile",lc.AD_MIDPOINT="ad-midpoint",lc.AD_THIRD_QUARTILE="ad-third-quartile",lc.AD_COMPLETE="ad-complete",lc.AD_STOPPED="ad-stopped",lc.AD_SKIPPED="ad-skipped",lc.AD_VOLUME_CHANGED="ad-volume-changed",lc.AD_MUTED="ad-muted",lc.AD_PAUSED="ad-paused",lc.AD_RESUMED="ad-resumed",lc.AD_SKIP_STATE_CHANGED="ad-skip-state-changed",lc.CUEPOINTS_CHANGED="ad-cue-points-changed",lc.IMA_AD_MANAGER_LOADED="ima-ad-manager-loaded",lc.IMA_STREAM_MANAGER_LOADED="ima-stream-manager-loaded",lc.AD_CLICKED="ad-clicked",lc.AD_PROGRESS="ad-progress",lc.AD_BUFFERING="ad-buffering",lc.AD_IMPRESSION="ad-impression",lc.AD_DURATION_CHANGED="ad-duration-changed",lc.AD_CLOSED="ad-closed",lc.AD_LOADED="ad-loaded",lc.ALL_ADS_COMPLETED="all-ads-completed",lc.AD_LINEAR_CHANGED="ad-linear-changed",lc.AD_METADATA="ad-metadata",lc.AD_RECOVERABLE_ERROR="ad-recoverable-error",lc.AD_BREAK_READY="ad-break-ready",lc.AD_INTERACTION="ad-interaction",Ql=function(){return new lc};var hc="ended play playing pause pausing ratechange seeked seeking timeupdate volumechange".split(" "),fc="buffered currentTime duration ended loop muted paused playbackRate seeking videoHeight videoWidth volume".split(" "),pc=["loop","playbackRate"],gc=["pause","play"],mc={getAssetUri:2,getAudioLanguages:4,getAudioLanguagesAndRoles:4,getBufferFullness:1,getBufferedInfo:2,getExpiration:2,getKeyStatuses:2,getPlaybackRate:2,getTextLanguages:4,getTextLanguagesAndRoles:4,getImageTracks:2,getThumbnails:2,isAudioOnly:10,isBuffering:1,isInProgress:1,isLive:10,isTextTrackVisible:1,keySystem:10,seekRange:1,getLoadMode:10},vc={getConfiguration:4,getStats:5,getTextTracks:2,getVariantTracks:2},yc={getPlayheadTimeAsDate:1,getPresentationStartTimeAsDate:20},bc=[["getConfiguration","configure"]],xc=[["isTextTrackVisible","setTextTrackVisibility"]],wc="addChaptersTrack addTextTrackAsync addThumbnailsTrack cancelTrickPlay configure getChapters getChaptersTracks resetConfiguration retryStreaming selectAudioLanguage selectTextLanguage selectTextTrack selectVariantTrack selectVariantsByLabel setTextTrackVisibility trickPlay updateStartTime goToLive".split(" "),Tc=["attach","attachCanvas","detach","load","unload"];function Ac(e,t,n,r,i,a,o){var s=this;this.G=e,this.M=o,this.j=new st(t),this.O=n,this.u=!1,this.s=r,this.F=i,this.J=a,this.h=this.m=!1,this.L="",this.o=null,this.B=function(){return Cc(s)},this.D=function(e,t){switch((e=dc(t)).type){case"event":var n=e.targetName,r=yr(e.event);s.s(n,r);break;case"update":for(r in n=e.update)for(var i in e=s.g[r]||{},n[r])e[i]=n[r][i];s.u&&(s.O(),s.u=!1);break;case"asyncComplete":if(r=e.id,i=e.error,e=s.i[r],delete s.i[r],e)if(i){for(n in r=new Ne(i.severity,i.category,i.code),i)r[n]=i[n];e.reject(r)}else e.resolve()}},this.g={video:{},player:{}},this.H=0,this.i={},this.l=null,Pc.add(this)}function Sc(e,t,n){Lc=n,n.addUpdateListener(e.B),n.addMessageListener("urn:x-cast:com.google.shaka.v2",e.D),Cc(e),Mc(e,{type:"init",initState:t,appData:e.o}),e.l.resolve()}function Ec(e,t){var n=8003;switch(t.code){case"cancel":n=8004;break;case"timeout":n=8005;break;case"receiver_unavailable":n=8006}e.l.reject(new Ne(2,8,n,t))}function Ic(e,t){var n=e.J();e.l=new it,e.u=!0,Sc(e,n,t)}function kc(e){var t=Lc;t.removeUpdateListener(e.B),t.removeMessageListener("urn:x-cast:com.google.shaka.v2",e.D)}function Cc(e){var t=!!Lc&&"connected"==Lc.status;if(e.h&&!t){for(var n in e.F(),e.g)e.g[n]={};_c(e)}e.h=t,e.L=t?Lc.receiver.friendlyName:"",e.j.Mb()}function _c(e){for(var t in e.i){var n=e.i[t];delete e.i[t],n.reject(new Ne(1,7,7e3))}}function Mc(e,t){t=cc(t);var n=Lc;try{n.sendMessage("urn:x-cast:com.google.shaka.v2",t,(function(){}),Y)}catch(r){throw t=new Ne(2,8,8005,r),n=new vr("error",(new Map).set("detail",t)),e.s("player",n),e.Ab(),t}}(i=Ac.prototype).destroy=function(){return Pc.delete(this),_c(this),Lc&&kc(this),this.j&&(this.j.stop(),this.j=null),this.F=this.s=null,this.h=this.m=!1,this.D=this.B=this.l=this.i=this.g=this.o=null,Promise.resolve()},i.sa=function(){return this.h},i.ae=function(){return this.L},i.init=function(){if(this.G.length)if(e.chrome&&chrome.cast&&chrome.cast.isAvailable){this.m=!0,this.j.Mb();var t=new chrome.cast.SessionRequest(this.G,[],null,this.M,null);t=new chrome.cast.ApiConfig(t,(function(e){for(var t=c(Pc),n=t.next();!n.done;n=t.next())Ic(n.value,e)}),(function(e){for(var t=c(Pc),n=t.next();!n.done;n=t.next())n=n.value,Nc="available"==e,n.j.Mb()}),"origin_scoped"),chrome.cast.initialize(t,(function(){}),(function(){})),Nc&&this.j.N(Rc),(t=Lc)&&t.status!=chrome.cast.SessionStatus.STOPPED?Ic(this,t):Lc=null}else e.__onGCastApiAvailable!==Oc&&(Dc=e.__onGCastApiAvailable||null,e.__onGCastApiAvailable=Oc)},i.ie=function(e){this.o=e,this.h&&Mc(this,{type:"appData",appData:this.o})},i.cast=function(e){var t=this;return L((function(n){if(!t.m)throw new Ne(1,8,8e3);if(!Nc)throw new Ne(1,8,8001);if(t.h)throw new Ne(1,8,8002);return t.l=new it,chrome.cast.requestSession((function(n){return Sc(t,e,n)}),(function(e){return Ec(t,e)})),w(n,t.l,0)}))},i.Ab=function(){if(this.h){if(_c(this),Lc){kc(this);try{Lc.stop((function(){}),(function(){}))}catch(Vv){}Lc=null}Cc(this)}},i.get=function(e,t){var n=this;if("video"==e){if(gc.includes(t))return function(){return n.Qe.apply(n,[e,t].concat(d(D.apply(0,arguments))))}}else if("player"==e){if(yc[t]&&!this.get("player","isLive")())return function(){};if(wc.includes(t))return function(){return n.Qe.apply(n,[e,t].concat(d(D.apply(0,arguments))))};if(Tc.includes(t))return function(){return n.og.apply(n,[e,t].concat(d(D.apply(0,arguments))))};if(mc[t]||vc[t])return function(){return n.g[e][t]}}return this.g[e][t]},i.set=function(e,t,n){this.g[e][t]=n,Mc(this,{type:"set",targetName:e,property:t,value:n})},i.Qe=function(e,t){Mc(this,{type:"call",targetName:e,methodName:t,args:D.apply(2,arguments)})},i.og=function(e,t){var n=D.apply(2,arguments),r=new it,i=this.H.toString();this.H++,this.i[i]=r;try{Mc(this,{type:"asyncCall",targetName:e,methodName:t,args:n,id:i})}catch(a){r.reject(a)}return r};var Rc=.02,Nc=!1,Lc=null,Dc=null,Pc=new Set;function Oc(t){if(Dc?e.__onGCastApiAvailable=Dc:delete e.__onGCastApiAvailable,Dc=null,t)for(var n=c(Pc),r=n.next();!r.done;r=n.next())r.value.init();"function"==typeof e.__onGCastApiAvailable&&e.__onGCastApiAvailable(t)}function Uc(e,t,n,r){r=void 0!==r&&r,xr.call(this);var i=this;this.i=e,this.h=t,this.m=this.o=this.j=this.s=this.l=null,this.D=n,this.B=r,this.u=new Map,this.g=new Ac(n,(function(){return Fc(i)}),(function(){return zc(i)}),(function(e,t){return Kc(i,e,t)}),(function(){return Gc(i)}),(function(){return jc(i)}),r),function(e){e.g.init(),e.m=new Or;for(var t=c(hc),n=t.next();!n.done;n=t.next())e.m.C(e.i,n.value,(function(t){e.g.sa()||(t=yr(t),e.j.dispatchEvent(t))}));for(var r in br)e.m.C(e.h,br[r],(function(t){e.g.sa()||e.o.dispatchEvent(t)}));for(var i in e.l={},t={},e.i)t.Sb=i,Object.defineProperty(e.l,t.Sb,{configurable:!1,enumerable:!0,get:function(t){return function(){return Vc(e,t.Sb)}}(t),set:function(t){return function(n){var r=t.Sb;e.g.sa()?e.g.set("video",r,n):e.i[r]=n}}(t)}),t={Sb:t.Sb};e.s={},Bc(e,(function(t){Object.defineProperty(e.s,t,{configurable:!1,enumerable:!0,get:function(){return function(e,t){if(e.u.has(t)&&(t=e.u.get(t)),"addEventListener"==t)return function(t,n,r){return e.o.addEventListener(t,n,r)};if("removeEventListener"==t)return function(t,n,r){return e.o.removeEventListener(t,n,r)};if("getMediaElement"==t)return function(){return e.l};if("getSharedConfiguration"==t)return e.g.get("player","getConfiguration");if("getNetworkingEngine"==t)return function(){return e.h.jc()};if("getDrmEngine"==t)return function(){return e.h.m};if("getAdManager"==t)return function(){return e.h.Ge()};if("setVideoContainer"==t)return function(t){return e.h.$e(t)};if(e.g.sa()){if("getManifest"==t||"drmInfo"==t)return function(){return X(t+"() does not work while casting!"),null};if("attach"==t||"detach"==t)return function(){return X(t+"() does not work while casting!"),Promise.resolve()}}return e.g.sa()&&0==Object.keys(e.g.g.video).length&&(mc[t]||vc[t])||!e.g.sa()?e.h[t].bind(e.h):e.g.get("player",t)}(e,t)}})})),function(e){var t=new Map;Bc(e,(function(n,r){t.has(r)?(r=t.get(r),n.length<r.length?e.u.set(n,r):e.u.set(r,n)):t.set(r,n)}))}(e),e.j=new xr,e.j.Wc=e.l,e.o=new xr,e.o.Wc=e.s}(this)}function Bc(e,t){function n(e){return"constructor"!=e&&"function"==typeof i[e]&&!a.has(e)}var r,i=e.h,a=new Set;for(r in i)n(r)&&(a.add(r),t(r,i[r]));for(e=Object.getPrototypeOf(i),r=Object.getPrototypeOf({});e&&e!=r;){for(var o=c(Object.getOwnPropertyNames(e)),s=o.next();!s.done;s=o.next())n(s=s.value)&&(a.add(s),t(s,i[s]));e=Object.getPrototypeOf(e)}}function jc(e){var t={video:{},player:{},playerAfterLoad:{},manifest:e.h.Dd(),startTime:null};e.i.pause();for(var n=c(pc),r=n.next();!r.done;r=n.next())r=r.value,t.video[r]=e.i[r];for(e.i.ended||(t.startTime=e.i.currentTime),r=(n=c(bc)).next();!r.done;r=n.next()){var i=r.value;r=i[1],i=e.h[i[0]](),t.player[r]=i}for(r=(n=c(xc)).next();!r.done;r=n.next())r=(i=r.value)[1],i=e.h[i[0]](),t.playerAfterLoad[r]=i;return t}function Fc(e){var t=new vr("caststatuschanged");e.dispatchEvent(t)}function zc(e){var t=new vr(e.l.paused?"pause":"play");e.j.dispatchEvent(t)}function Gc(e){for(var t=c(bc),n=t.next();!n.done;n=t.next()){var r=n.value;n=r[1],r=e.g.get("player",r[0])(),e.h[n](r)}var i=e.g.get("player","getAssetUri")();n=e.g.get("video","ended"),t=Promise.resolve();var a=e.i.autoplay;r=null,n||(r=e.g.get("video","currentTime")),i&&(e.i.autoplay=!1,t=e.h.load(i,r));var o={};for(r=(n=c(pc)).next();!r.done;r=n.next())r=r.value,o[r]=e.g.get("video",r);t.then((function(){if(e.i){for(var t=c(pc),n=t.next();!n.done;n=t.next())n=n.value,e.i[n]=o[n];for(n=(t=c(xc)).next();!n.done;n=t.next()){var r=n.value;n=r[1],r=e.g.get("player",r[0])(),e.h[n](r)}e.i.autoplay=a,i&&e.i.play()}}),(function(t){t=new vr("error",t=(new Map).set("detail",t)),e.h.dispatchEvent(t)}))}function Vc(e,t){if("addEventListener"==t)return function(t,n,r){return e.j.addEventListener(t,n,r)};if("removeEventListener"==t)return function(t,n,r){return e.j.removeEventListener(t,n,r)};if(e.g.sa()&&0==Object.keys(e.g.g.video).length){var n=e.i[t];if("function"!=typeof n)return n}return e.g.sa()?e.g.get("video",t):("function"==typeof(t=e.i[t])&&(t=t.bind(e.i)),t)}function Kc(e,t,n){e.g.sa()&&("video"==t?e.j.dispatchEvent(n):"player"==t&&e.o.dispatchEvent(n))}function Hc(e,t,n,r){xr.call(this);var i=this;this.g=e,this.h=t,this.j=new Or,this.H={video:e,player:t},this.D=n||function(){},this.J=r||function(e){return e},this.i=null,this.F=!1,this.o=!0,this.m=0,this.B=!1,this.u=!0,this.s=this.l=null,this.G=new st((function(){Yc(i)})),function(e){var t=cast.receiver.CastReceiverManager.getInstance();t.onSenderConnected=function(){return Wc(e)},t.onSenderDisconnected=function(){return Wc(e)},t.onSystemVolumeChanged=function(){var t=cast.receiver.CastReceiverManager.getInstance().getSystemVolume();t&&Zc(e,{type:"update",update:{video:{volume:t.level,muted:t.muted}}},e.l),Zc(e,{type:"event",targetName:"video",event:{type:"volumechange"}},e.l)},e.s=t.getCastMessageBus("urn:x-cast:com.google.cast.media"),e.s.onMessage=function(t){return function(e,t){var n=dc(t.data);switch(n.type){case"PLAY":e.g.play(),ed(e);break;case"PAUSE":e.g.pause(),ed(e);break;case"SEEK":t=n.currentTime;var r=n.resumeState;null!=t&&(e.g.currentTime=Number(t)),r&&"PLAYBACK_START"==r?(e.g.play(),ed(e)):r&&"PLAYBACK_PAUSE"==r&&(e.g.pause(),ed(e));break;case"STOP":e.h.re().then((function(){e.h&&ed(e)}));break;case"GET_STATUS":Qc(e,Number(n.requestId));break;case"VOLUME":t=(r=n.volume).level,r=r.muted;var i=e.g.volume,a=e.g.muted;null!=t&&(e.g.volume=Number(t)),null!=r&&(e.g.muted=r),i==e.g.volume&&a==e.g.muted||ed(e);break;case"LOAD":e.m=0,e.B=!1,e.u=!1,t=n.media,r=n.currentTime,i=e.J(t.contentId),a=n.autoplay||!0,e.D(t.customData),a&&(e.g.autoplay=!0),e.h.load(i,r).then((function(){e.h&&Qc(e)})).catch((function(t){var r="LOAD_FAILED";7==t.category&&7e3==t.code&&(r="LOAD_CANCELLED"),Zc(e,{requestId:Number(n.requestId),type:r},e.s)}));break;default:Zc(e,{requestId:Number(n.requestId),type:"INVALID_REQUEST",reason:"INVALID_COMMAND"},e.s)}}(e,t)},e.l=t.getCastMessageBus("urn:x-cast:com.google.shaka.v2"),e.l.onMessage=function(t){return function(e,t){var n=dc(t.data);switch(n.type){case"init":e.m=0,e.B=!1,e.u=!0,function(e,t,n){var r,i,a,o,s,u,l,c,d,h;L((function(f){switch(f.g){case 1:for(r in t.player)i=t.player[r],e.h[r](i);return e.D(n),a=e.g.autoplay,t.manifest?(e.g.autoplay=!1,A(f,5),w(f,e.h.load(t.manifest,t.startTime),7)):w(f,Promise.resolve(),3);case 7:E(f,3);break;case 5:return o=I(f),s=(new Map).set("detail",o),u=new vr("error",s),e.h&&e.h.dispatchEvent(u),f.return();case 3:if(!e.h)return f.return();for(l in t.video)c=t.video[l],e.g[l]=c;for(d in t.playerAfterLoad)h=t.playerAfterLoad[d],e.h[d](h);e.g.autoplay=a,t.manifest&&(e.g.play(),ed(e)),T(f)}}))}(e,n.initState,n.appData),Yc(e);break;case"appData":e.D(n.appData);break;case"set":var r=n.targetName,i=n.property;if(n=n.value,"video"==r){if(t=cast.receiver.CastReceiverManager.getInstance(),"volume"==i){t.setSystemVolumeLevel(n);break}if("muted"==i){t.setSystemVolumeMuted(n);break}}e.H[r][i]=n;break;case"call":(r=e.H[n.targetName])[n.methodName].apply(r,n.args);break;case"asyncCall":r=n.targetName,i=n.methodName,"player"==r&&"load"==i&&(e.m=0,e.B=!1);var a=n.id,o=t.senderId;n=(t=e.H[r])[i].apply(t,n.args),"player"==r&&"load"==i&&(n=n.then((function(){e.u=!0}))),n.then((function(){return Jc(e,o,a,null)}),(function(t){return Jc(e,o,a,t)}))}}(e,t)},t.start();for(var n=(t=c(hc)).next();!n.done;n=t.next())e.j.C(e.g,n.value,(function(t){return qc(e,"video",t)}));for(var r in br)e.j.C(e.h,br[r],(function(t){return qc(e,"player",t)}));cast.__platform__&&cast.__platform__.canDisplayType('video/mp4; codecs="avc1.640028"; width=3840; height=2160')?e.h.ke(3840,2160):e.h.ke(1920,1080),e.j.C(e.g,"loadeddata",(function(){e.B=!0})),e.j.C(e.h,"loading",(function(){e.o=!1,Xc(e)})),e.j.C(e.g,"playing",(function(){e.o=!1,Xc(e)})),e.j.C(e.g,"pause",(function(){Xc(e)})),e.j.C(e.h,"unloading",(function(){e.o=!0,Xc(e)})),e.j.C(e.g,"ended",(function(){new st((function(){e.g&&e.g.ended&&(e.o=!0,Xc(e))})).N(nd)}))}(this)}function Wc(e){e.m=0,e.u=!0,e.F=0!=cast.receiver.CastReceiverManager.getInstance().getSenders().length,Xc(e)}function Xc(e){var t;L((function(n){return 1==n.g?w(n,Promise.resolve(),2):e.h?(t=new vr("caststatuschanged"),e.dispatchEvent(t),$c(e)||ed(e),void T(n)):n.return()}))}function qc(e,t,n){e.h&&(Yc(e),Zc(e,{type:"event",targetName:t,event:n},e.l))}function Yc(e){e.G.N(td);for(var t={video:{},player:{}},n=c(fc),r=n.next();!r.done;r=n.next())r=r.value,t.video[r]=e.g[r];if(e.h.U())for(var i in yc)0==e.m%yc[i]&&(t.player[i]=e.h[i]());for(var a in mc)0==e.m%mc[a]&&(t.player[a]=e.h[a]());for(var o in(n=cast.receiver.CastReceiverManager.getInstance().getSystemVolume())&&(t.video.volume=n.level,t.video.muted=n.muted),Zc(e,{type:"update",update:t},e.l),vc)0==e.m%vc[o]&&((t={player:{}}).player[o]=e.h[o](),Zc(e,{type:"update",update:t},e.l));e.B&&(e.m+=1),$c(e)}function $c(e){return!(!e.u||!e.g.duration&&!e.h.U())&&(Qc(e),e.u=!1,!0)}function Qc(e,t){var n={contentId:e.h.Dd(),streamType:e.h.U()?"LIVE":"BUFFERED",contentType:""};e.h.U()||(n.duration=e.g.duration),e.i&&(n.metadata=e.i),ed(e,void 0===t?0:t,n)}function Jc(e,t,n,r){e.h&&Zc(e,{type:"asyncComplete",id:n,error:r},e.l,t)}function Zc(e,t,n,r){e.F&&(e=cc(t),r?n.getCastChannel(r).send(e):n.broadcast(e))}function ed(e,t,n){n=void 0===n?null:n;var r={mediaSessionId:0,playbackRate:e.g.playbackRate,playerState:e.o?rd:e.h.Fd()?ad:e.g.paused?od:id,currentTime:e.g.currentTime,supportedMediaCommands:63,volume:{level:e.g.volume,muted:e.g.muted}};n&&(r.media=n),Zc(e,{requestId:void 0===t?0:t,type:"MEDIA_STATUS",status:[r]},e.s)}v(Uc,xr),(i=Uc.prototype).destroy=function(e){return e&&this.g.Ab(),this.m&&(this.m.release(),this.m=null),e=[],this.h&&(e.push(this.h.destroy()),this.h=null),this.g&&(e.push(this.g.destroy()),this.g=null),this.s=this.l=this.i=null,xr.prototype.release.call(this),Promise.all(e)},i.Wf=function(){return this.l},i.Nf=function(){return this.s},i.nf=function(){return this.g.m&&Nc},i.sa=function(){return this.g.sa()},i.ae=function(){return this.g.ae()},i.cast=function(){var e,t=this;return L((function(n){return 1==n.g?(e=jc(t),w(n,t.g.cast(e),2)):t.h?w(n,t.h.re(),0):n.return()}))},i.ie=function(e){this.g.ie(e)},i.zg=function(){!function(e){if(e.h){var t=e.J();chrome.cast.requestSession((function(n){return Sc(e,t,n)}),(function(t){return Ec(e,t)}))}}(this.g)},i.Ab=function(){this.g.Ab()},i.qf=function(e,t){t=void 0!==t&&t;var n=this;return L((function(r){if(1==r.g)return e==n.D&&t==n.B?r.return():(n.D=e,n.B=t,n.g.Ab(),w(r,n.g.destroy(),2));n.g=null,n.g=new Ac(e,(function(){return Fc(n)}),(function(){return zc(n)}),(function(e,t){return Kc(n,e,t)}),(function(){return Gc(n)}),(function(){return jc(n)}),t),n.g.init(),T(r)}))},z("shaka.cast.CastProxy",Uc),Uc.prototype.changeReceiverId=Uc.prototype.qf,Uc.prototype.forceDisconnect=Uc.prototype.Ab,Uc.prototype.suggestDisconnect=Uc.prototype.zg,Uc.prototype.setAppData=Uc.prototype.ie,Uc.prototype.cast=Uc.prototype.cast,Uc.prototype.receiverName=Uc.prototype.ae,Uc.prototype.isCasting=Uc.prototype.sa,Uc.prototype.canCast=Uc.prototype.nf,Uc.prototype.getPlayer=Uc.prototype.Nf,Uc.prototype.getVideo=Uc.prototype.Wf,Uc.prototype.destroy=Uc.prototype.destroy,v(Hc,xr),(i=Hc.prototype).isConnected=function(){return this.F},i.$f=function(){return this.o},i.wg=function(e){this.i=e},i.uf=function(){this.i=null},i.xg=function(e){this.i||(this.i={metadataType:cast.receiver.media.MetadataType.GENERIC}),this.i.title=e},i.vg=function(e){this.i||(this.i={metadataType:cast.receiver.media.MetadataType.GENERIC}),this.i.images=[{url:e}]},i.ug=function(e){this.i||(this.i={}),this.i.artist=e,this.i.metadataType=cast.receiver.media.MetadataType.MUSIC_TRACK},i.destroy=function(){var e,t=this;return L((function(n){if(1==n.g)return t.j&&(t.j.release(),t.j=null),e=[],t.h&&(e.push(t.h.destroy()),t.h=null),t.G&&(t.G.stop(),t.G=null),t.g=null,t.H=null,t.D=null,t.F=!1,t.o=!0,t.l=null,t.s=null,xr.prototype.release.call(t),w(n,Promise.all(e),2);cast.receiver.CastReceiverManager.getInstance().stop(),T(n)}))},z("shaka.cast.CastReceiver",Hc),Hc.prototype.destroy=Hc.prototype.destroy,Hc.prototype.setContentArtist=Hc.prototype.ug,Hc.prototype.setContentImage=Hc.prototype.vg,Hc.prototype.setContentTitle=Hc.prototype.xg,Hc.prototype.clearContentMetadata=Hc.prototype.uf,Hc.prototype.setContentMetadata=Hc.prototype.wg,Hc.prototype.isIdle=Hc.prototype.$f,Hc.prototype.isConnected=Hc.prototype.isConnected;var td=.5,nd=5,rd="IDLE",id="PLAYING",ad="BUFFERING",od="PAUSED";function sd(e,t,n){var r=function(e){for(var t=[],n=(e=c(e)).next();!n.done;n=e.next())(n=ld(n.value))&&t.push(n);return t}(e),i=null;e=[];var a=[],o=new Set(r.map((function(e){return e.keyId})));if(o.delete(null),1<o.size)throw new Ne(2,4,4010);if(t||(a=r.filter((function(e){return"urn:mpeg:dash:mp4protection:2011"!=e.fe||(i=e.init||i,!1)}))).length&&(e=function(e,t,n,r){for(var i=[],a=(t=c(t)).next();!a.done;a=t.next()){var o=n[(a=a.value).fe];if(o){var s;if(s=ai(a.node,"urn:microsoft:playready","pro")){s=Mt(s.textContent);var u=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]);s=[{initData:ri(s,u,new Set,0),initDataType:"cenc",keyId:a.keyId}]}else s=null;if(u=null,"urn:uuid:e2719d58-a985-b3c9-781a-b030af78d30e"===a.fe)if(0==(u=r).size)u=null;else{var l=new Uint8Array([16,119,239,236,192,178,77,2,172,227,60,30,82,226,251,75]);u=[{initData:ri(new Uint8Array([]),l,u,1),initDataType:"cenc",keyId:a.keyId}]}s=Je(o,a.init||e||s||u),(o=dd.get(o))&&(s.licenseServerUri=o(a)),i.push(s)}}return i}(i,a,n,o),0==e.length&&(e=[Je("",i)])),r.length&&(t||!a.length))for(e=[],n=(t=c(Object.values(n))).next();!n.done;n=t.next())"org.w3.clearkey"!=(n=n.value)&&e.push(Je(n,i));if(o=Array.from(o)[0]||null)for(n=(t=c(e)).next();!n.done;n=t.next())for(r=(n=c(n.value.initData)).next();!r.done;r=n.next())r.value.keyId=o;return{Be:o,uh:i,drmInfos:e,Fe:!0}}function ud(e){return(e=ai(e.node,"urn:microsoft:playready","pro"))&&(e=function(e){var t=0,n=Me(e),r=n.getUint32(t,!0);if(r!=e.byteLength)return[];e:{for(e=t+6,t=[];e<n.byteLength-1;){r=n.getUint16(e,!0),e+=2;var i=n.getUint16(e,!0);if(e+=2,1&i||i+e>n.byteLength){n=[];break e}var a=_e(n,e,i);t.push({type:r,value:a}),e+=i}n=t}return n}(e=Mt(e.textContent)).filter((function(e){return e.type===cd}))[0])&&(e=wi(e=Tt(e.value,!0),"WRMHEADER"))?function(e){for(var t=(e=c(e.getElementsByTagName("DATA"))).next();!t.done;t=e.next())for(var n=(t=c(t.value.childNodes)).next();!n.done;n=t.next())if((n=n.value)instanceof Element&&"LA_URL"==n.tagName)return n.textContent;return""}(e):""}function ld(e){var t=e.getAttribute("schemeIdUri"),n=ui(e,"urn:mpeg:cenc:2013","default_KID"),r=si(e,"urn:mpeg:cenc:2013","pssh").map(ci);if(!t)return null;if(t=t.toLowerCase(),n&&(n=n.replace(/-/g,"").toLowerCase()).includes(" "))throw new Ne(2,4,4009);var i=[];try{i=r.map((function(e){return{initDataType:"cenc",initData:Mt(e),keyId:null}}))}catch(a){throw new Ne(2,4,4007)}return{node:e,fe:t,keyId:n,init:0<i.length?i:null}}var cd=1,dd=(new Map).set("com.widevine.alpha",(function(e){return(e=ai(e.node,"urn:microsoft","laurl"))&&e.getAttribute("licenseUrl")||""})).set("com.microsoft.playready",ud).set("com.microsoft.playready.recommendation",ud).set("com.microsoft.playready.software",ud).set("com.microsoft.playready.hardware",ud).set("org.w3.clearkey",(function(e){return(e=ai(e.node,"http://dashif.org/guidelines/clearKey","Laurl"))&&"EME-1.0"===e.getAttribute("Lic_type")&&e.textContent?e.textContent:""}));function hd(t,n,r,i,a){var o={RepresentationID:n,Number:r,Bandwidth:i,Time:a};return t.replace(/\$(RepresentationID|Number|Bandwidth|Time)?(?:%0([0-9]+)([diouxX]))?\$/g,(function(t,n,r,i){if("$$"==t)return"$";var a=o[n];if(null==a)return t;switch("RepresentationID"==n&&r&&(r=void 0),"Time"==n&&(a=Math.round(a)),i){case void 0:case"d":case"i":case"u":t=a.toString();break;case"o":t=a.toString(8);break;case"x":t=a.toString(16);break;case"X":t=a.toString(16).toUpperCase();break;default:t=a.toString()}return r=e.parseInt(r,10)||1,Array(Math.max(0,r-t.length)+1).join("0")+t}))}function fd(e,t){var n=pd(e,t,"timescale"),r=1;n&&(r=vi(n)||1);var i=pd(e,t,"duration");n=vi(i||""),"image"==e.I.contentType&&(n=bi(i||"")),n&&(n/=r);var a=pd(e,t,"startNumber");i=Number(pd(e,t,"presentationTimeOffset"))||0;var o=yi(a||"");if(null!=a&&null!=o||(o=1),a=gd(e,t,"SegmentTimeline"),t=null,a){t=r,e=e.T.duration||1/0,a=oi(a,"S");for(var s=[],u=-i,l=0;l<a.length;++l){var c=a[l],d=a[l+1],h=hi(c,"t",yi),f=hi(c,"d",yi);if(c=hi(c,"r",mi),null!=h&&(h-=i),!f)break;if(h=null!=h?h:u,0>(c=c||0))if(d){if(null==(d=hi(d,"t",yi)))break;if(h>=d)break;c=Math.ceil((d-h)/f)-1}else{if(1/0==e)break;if(h/t>=e)break;c=Math.ceil((e*t-h)/f)-1}for(0<s.length&&h!=u&&(s[s.length-1].end=h/t),d=0;d<=c;++d)u=h+f,s.push({start:h/t,end:u/t,Dg:h}),h=u}t=s}return{timescale:r,ha:n,Lb:o,Sa:i/r||0,se:i,timeline:t}}function pd(e,t,n){return[t(e.I),t(e.ea),t(e.$)].filter($e).map((function(e){return e.getAttribute(n)})).reduce((function(e,t){return e||t}))}function gd(e,t,n){return[t(e.I),t(e.ea),t(e.$)].filter($e).map((function(e){return ii(e,n)})).reduce((function(e,t){return e||t}))}function md(e,t,n,r,i,a){if(a=void 0===a?0:a,ui(e,"http://www.w3.org/1999/xlink","href")){var o=function(e,t,n,r,i,a){for(var o=ui(e,"http://www.w3.org/1999/xlink","href"),s=ui(e,"http://www.w3.org/1999/xlink","actuate")||"onRequest",u=c(Array.from(e.attributes)),l=u.next();!l.done;l=u.next())"http://www.w3.org/1999/xlink"==(l=l.value).namespaceURI&&e.removeAttributeNS(l.namespaceURI,l.localName);if(5<=a)return hr(new Ne(2,4,4028));if("onLoad"!=s)return hr(new Ne(2,4,4027));var d=Qe([r],[o]);return i.request(0,kr(d,t)).Y((function(r){if(!(r=Ti(r.data,e.tagName)))return hr(new Ne(2,4,4001,o));for(;e.childNodes.length;)e.removeChild(e.childNodes[0]);for(;r.childNodes.length;){var s=r.childNodes[0];r.removeChild(s),e.appendChild(s)}for(s=(r=c(Array.from(r.attributes))).next();!s.done;s=r.next())e.setAttributeNode(s.value.cloneNode(!1));return md(e,t,n,d[0],i,a+1)}))}(e,t,n,r,i,a);return n&&(o=o.Y(void 0,(function(){return md(e,t,n,r,i,a)}))),o}o=[];for(var s=c(Array.from(e.childNodes)),u=s.next();!u.done;u=s.next())(u=u.value)instanceof Element&&("urn:mpeg:dash:resolve-to-zero:2013"==ui(u,"http://www.w3.org/1999/xlink","href")?e.removeChild(u):"SegmentTimeline"!=u.tagName&&o.push(md(u,t,n,r,i,a)));return mr(o).Y((function(){return e}))}function vd(e,t,n,r,i,a,o){var s,u=(new Wr).P("sidx",(function(e){s=function(e,t,n,r,i,a,o){var s=[];o.reader.skip(4);var u=o.reader.K();if(0==u)throw new Ne(2,3,3005);if(0==o.version)var l=o.reader.K(),c=o.reader.K();else l=o.reader.$a(),c=o.reader.$a();o.reader.skip(2);var d=o.reader.$d();for(e=e+o.size+c,c=0;c<d;c++){var h=o.reader.K(),f=(2147483648&h)>>>31;h&=2147483647;var p=o.reader.K();if(o.reader.skip(4),1==f)throw new Ne(2,3,3006);s.push(new mo(l/u+n,(l+p)/u+n,(function(){return a}),e,e+h-1,t,n,r,i)),l+=p,e+=h}return o.parser.stop(),s}(t,r,i,a,o,n,e)}));if(e&&u.parse(e),s)return s;throw new Ne(2,3,3004)}function yd(e){this.h=Me(e),this.g=new Vr(this.h,0)}function bd(e){var t=xd(e);if(7<t.length)throw new Ne(2,3,3002);for(var n=0,r=(t=c(t)).next();!r.done;r=t.next())n=256*n+r.value;t=xd(e);e:{for(var i=(r=c(wd)).next();!i.done;i=r.next())if(Ie(t,new Uint8Array(i.value))){r=!0;break e}r=!1}if(r)t=e.h.byteLength-e.g.Z();else{if(8==t.length&&224&t[1])throw new Ne(2,3,3001);for(i=r=0;i<t.length;i++){var a=t[i];r=0==i?a&(1<<8-t.length)-1:256*r+a}t=r}return t=e.g.Z()+t<=e.h.byteLength?t:e.h.byteLength-e.g.Z(),r=Me(e.h,e.g.Z(),t),e.g.skip(t),new Td(n,r)}function xd(e){var t=e.g.Z(),n=e.g.Ra();if(0==n)throw new Ne(2,3,3002);return n=8-Math.floor(Math.log2(n)),e.g.skip(n-1),_e(e.h,t,n)}yd.prototype.ga=function(){return this.g.ga()};var wd=[[255],[127,255],[63,255,255],[31,255,255,255],[15,255,255,255,255],[7,255,255,255,255,255],[3,255,255,255,255,255,255],[1,255,255,255,255,255,255,255]];function Td(e,t){this.id=e,this.g=t}function Ad(e){if(8<e.g.byteLength)throw new Ne(2,3,3002);if(8==e.g.byteLength&&224&e.g.getUint8(0))throw new Ne(2,3,3001);for(var t=0,n=0;n<e.g.byteLength;n++){t=256*t+e.g.getUint8(n)}return t}function Sd(e){var t=new yd(e.g);if(179!=(e=bd(t)).id)throw new Ne(2,3,3013);if(e=Ad(e),183!=(t=bd(t)).id)throw new Ne(2,3,3012);t=new yd(t.g);for(var n=0;t.ga();){var r=bd(t);if(241==r.id){n=Ad(r);break}}return{Eg:e,ng:n}}function Ed(e,t){if(!(t=gd(e,t,"Initialization")))return null;var n=e.I.wa,r=t.getAttribute("sourceURL");r&&(n=Qe(e.I.wa,[r])),r=0;var i=null;return(t=hi(t,"range",gi))&&(r=t.start,i=t.end),new go((function(){return n}),r,i,Rd(e))}function Id(e,t){var n=Number(pd(e,Cd,"presentationTimeOffset"))||0,r=pd(e,Cd,"timescale"),i=1;r&&(i=vi(r)||1);var a=n/i||0,o=Ed(e,Cd);!function(e,t){if(Md(e,t),!_d(e))throw new Ne(2,4,4002)}(e,o);var s=Tr(e);return{Bb:function(){var e=gd(s,Cd,"RepresentationIndex"),n=s.I.wa;return e&&(e=e.getAttribute("sourceURL"))&&(n=Qe(s.I.wa,[e])),e=_d(s),kd(s,t,o,n,e.start,e.end,a)}}}function kd(e,t,n,r,i,a,o){var s,u,l,c,d,h,f,p,g,m,v,y,b,x,T;return L((function(A){if(1==A.g)return s=e.presentationTimeline,u=!e.Ma||!e.T.Gd,l=e.T.start,c=e.T.duration,d=e.I.mimeType.split("/")[1],f=null,p=[(h=t)(r,i,a),"webm"==d?h(n.ya(),n.Ba,n.ka):null],h=null,w(A,Promise.all(p),2);if(g=A.h,m=g[0],v=g[1]||null,null,b=l-o,x=l,T=c?l+c:1/0,"mp4"==d)var S=vd(m,i,r,n,b,x,T);else{if(440786851!=bd(S=new yd(v)).id)throw new Ne(2,3,3008);var E=bd(S);if(408125543!=E.id)throw new Ne(2,3,3009);S=E.g.byteOffset,E=new yd(E.g);for(var I=null;E.ga();){var k=bd(E);if(357149030==k.id){I=k;break}}if(!I)throw new Ne(2,3,3010);for(I=new yd(I.g),k=1e6,E=null;I.ga();){var C=bd(I);if(2807729==C.id)k=Ad(C);else if(17545==C.id)if(4==C.g.byteLength)E=C.g.getFloat32(0);else{if(8!=C.g.byteLength)throw new Ne(2,3,3003);E=C.g.getFloat64(0)}}if(null==E)throw new Ne(2,3,3011);if(E*=I=k/1e9,475249515!=(k=bd(new yd(m))).id)throw new Ne(2,3,3007);S=function(e,t,n,r,i,a,o,s,u){function l(){return i}var c=[];e=new yd(e.g);for(var d=null,h=null;e.ga();){var f=bd(e);if(187==f.id){var p=Sd(f);p&&(f=n*p.Eg,p=t+p.ng,null!=d&&c.push(new mo(d+o,f+o,l,h,p-1,a,o,s,u)),d=f,h=p)}}return null!=d&&c.push(new mo(d+o,r+o,l,h,null,a,o,s,u)),c}(k,S,I,E,r,n,b,x,T)}return y=S,s.Ib(y),f=new Ts(y),u&&f.Wa(x,T,!0),A.return(f)}))}function Cd(e){return e.wc}function _d(e){var t=gd(e,Cd,"RepresentationIndex");return e=gi((e=pd(e,Cd,"indexRange"))||""),t&&(e=hi(t,"range",gi,e)),e}function Md(e,t){var n=e.I.mimeType.split("/")[1];if(e.I.contentType!=tt&&"mp4"!=n&&"webm"!=n)throw new Ne(2,4,4006);if("webm"==n&&!t)throw new Ne(2,4,4005)}function Rd(e){var t=e.I;return{bandwidth:e.bandwidth,audioSamplingRate:t.audioSamplingRate,codecs:t.codecs,contentType:t.contentType,frameRate:t.frameRate||null,height:t.height||null,mimeType:t.mimeType,channelsCount:t.ad,pixelAspectRatio:t.pixelAspectRatio||null,width:t.width||null}}function Nd(e,t){var n=Ed(e,Ld),r=function(e){var t=function(e){return[e.I.ab,e.ea.ab,e.$.ab].filter($e).map((function(e){return oi(e,"SegmentURL")})).reduce((function(e,t){return 0<e.length?e:t})).map((function(t){return t.getAttribute("indexRange")&&!e.Ke&&(e.Ke=!0),{dg:t.getAttribute("media"),start:(t=hi(t,"mediaRange",gi,{start:0,end:null})).start,end:t.end}}))}(e);e=fd(e,Ld);var n=e.Lb;0==n&&(n=1);var r=0;return e.ha?r=e.ha*(n-1):e.timeline&&0<e.timeline.length&&(r=e.timeline[0].start),{ha:e.ha,startTime:r,Lb:n,Sa:e.Sa,timeline:e.timeline,Gb:t}}(e);if(!r.ha&&!r.timeline&&1<r.Gb.length)throw new Ne(2,4,4002);if(!r.ha&&!e.T.duration&&!r.timeline&&1==r.Gb.length)throw new Ne(2,4,4002);if(r.timeline&&0==r.timeline.length)throw new Ne(2,4,4002);var i=null,a=null;e.$.id&&e.I.id&&(a=t[e.$.id+","+e.I.id])&&(i=a.segmentIndex);var o=function(e,t,n,r,i){var a=r.Gb.length;r.timeline&&r.timeline.length!=r.Gb.length&&(a=Math.min(r.timeline.length,r.Gb.length));for(var o=e-r.Sa,s=t?e+t:1/0,u=[],l=r.startTime,c={},d=0;d<a;c={od:c.od},d++){var h=r.Gb[d];c.od=Qe(n,[h.dg]);var f=void 0;f=null!=r.ha?l+r.ha:r.timeline?r.timeline[d].end:l+t,u.push(new mo(e+l,e+f,function(e){return function(){return e.od}}(c),h.start,h.end,i,o,e,s)),l=f}return u}(e.T.start,e.T.duration,e.I.wa,r,n);return t=!i,i?i.Hb(o,e.presentationTimeline.Pa()):i=new Ts(o),e.presentationTimeline.Ib(o),e.Ma&&e.T.Gd||i.Wa(e.T.start,e.T.duration?e.T.start+e.T.duration:1/0,t),a&&(a.segmentIndex=i),{Bb:function(){return i&&0!=i.g.length||i.pc(o),Promise.resolve(i)}}}function Ld(e){return e.ab}function Dd(e,t,n,r,i,a){var o=function(e){var t=pd(e,Pd,"initialization");if(!t)return null;var n=e.I.id,r=e.bandwidth||null,i=e.I.wa;return new go((function(){var e=hd(t,n,null,r,null);return Qe(i,[e])}),0,null,Rd(e))}(e),s=function(e){var t=fd(e,Pd),n=pd(e,Pd,"media");return e=pd(e,Pd,"index"),{ha:t.ha,timescale:t.timescale,Lb:t.Lb,Sa:t.Sa,se:t.se,timeline:t.timeline,Pd:n,oc:e}}(e);!function(e){var t=e.oc?1:0;if(t+=e.timeline?1:0,t+=e.ha?1:0,0==t)throw new Ne(2,4,4002);if(1!=t&&(e.oc&&(e.timeline=null),e.ha=null),!e.oc&&!e.Pd)throw new Ne(2,4,4002)}(s);var u=Tr(e);if(s.oc)return Md(e,o),{Bb:function(){var e=hd(s.oc,u.I.id,null,u.bandwidth||null,null);return e=Qe(u.I.wa,[e]),kd(u,t,o,e,0,null,s.Sa)}};if(s.ha)return r||"image"===e.ea.contentType||(e.presentationTimeline.Sd(s.ha),e.presentationTimeline.Td(e.T.start)),{Bb:function(){return function(e,t,n,r,i){function a(e){var n=(e-p)*f,i=n+t.Sa,a=n+l;return n=a+f,(a=new mo(a,Math.min(n,s()),(function(){var t=hd(m,y,e,v,i*g);return Qe(b,[t])}),0,null,r,x,l,s())).j=n,a}function o(){var e=[Math.max(u.Pa(),l),Math.min(u.gb(),s())].map((function(e){return e-l}));return[Math.ceil(e[0]/f),Math.ceil(e[1]/f)-1].map((function(e){return e+p}))}function s(){var e=null!=d&&i[d]||h;return e?l+e:1/0}var u=e.presentationTimeline,l=e.T.start,d=e.$.id,h=e.T.duration,f=t.ha,p=t.Lb,g=t.timescale,m=t.Pd,v=e.bandwidth||null,y=e.I.id,b=e.I.wa,x=l-t.Sa,w=o();e=e.Ma?Math.max(w[0],w[1]-n+1):w[0],w=w[1],n=[];for(var T=e;T<=w;++T){var A=a(T);n.push(A)}var S=new Ts(n);if(n=u.gb()<s(),T=u.U(),n||T){var E=Math.max(e,w+1);S.fd(f,(function(){var e=u.Pa();S.eb(e);var t=c(o());t.next(),t=t.next().value;for(var n=[];E<=t;){var r=a(E);n.push(r),E++}return e>s()&&!n.length?null:n}))}return Promise.resolve(S)}(u,s,i,o,a)}};var l=null;r=r=null,e.$.id&&e.I.id&&(r=n[r=e.$.id+","+e.I.id])&&(l=r.segmentIndex);var d=function(e,t,n){var r=e.T.start,i=e.T.duration,a=r-t.Sa;i=i?r+i:1/0;for(var o=[],s={},u=0;u<t.timeline.length;s={nd:s.nd,rd:s.rd,ud:s.ud,kd:s.kd,wd:s.wd,ld:s.ld},u++){var l=t.timeline[u],c=l.start,d=l.Dg;l=l.end,s.ud=u+t.Lb,s.wd=d+t.se,s.rd=e.I.id,s.kd=e.bandwidth||null,s.nd=t.Pd,s.ld=e.I.wa,o.push(new mo(r+c,r+l,function(e){return function(){var t=hd(e.nd,e.rd,e.ud,e.kd||null,e.wd);return Qe(e.ld,[t]).map((function(e){return e.toString()}))}}(s),0,null,n,a,r,i))}return o}(u,s,o);n=e.T.start;var h=e.T.duration?e.T.start+e.T.duration:1/0,f=!(e.Ma&&e.T.Gd);return l?(f&&new Ts(d).Wa(n,h,!0),l.Hb(d,e.presentationTimeline.Pa())):l=new Ts(d),e.presentationTimeline.Ib(d),f&&l.Wa(n,h),r&&e.Ma&&(r.segmentIndex=l),{Bb:function(){return l&&0!=l.g.length||l.pc(d),Promise.resolve(l)}}}function Pd(e){return e.xc}function Od(){this.l=[],this.g=[],this.h=[],this.j=[],this.i=[],this.m=new Set}function Ud(e,t,n){var r,i,a,o,s,u,l,d,h,f,p,g,m,v,y,b,x,A,S,E,I,k,C,_,M,R,N,D;return L((function(L){switch(L.g){case 1:if(r=nt,function(e){for(var t=(e=c(e)).next();!t.done;t=e.next()){for(var n=[],r=c((t=t.value).Kc),i=r.next();!i.done;i=r.next()){i=i.value;for(var a=!1,o=c(n),s=o.next();!s.done;s=o.next())s=s.value,i.id!=s.id&&i.channelsCount==s.channelsCount&&i.language==s.language&&i.bandwidth==s.bandwidth&&i.label==s.label&&i.codecs==s.codecs&&i.mimeType==s.mimeType&&re(i.roles,s.roles)&&i.audioSamplingRate==s.audioSamplingRate&&i.primary==s.primary&&(a=!0);a||n.push(i)}t.Kc=n}}(t),function(e){for(var t=(e=c(e)).next();!t.done;t=e.next()){for(var n=[],r=c((t=t.value).gd),i=r.next();!i.done;i=r.next()){i=i.value;for(var a=!1,o=c(n),s=o.next();!s.done;s=o.next())s=s.value,i.id!=s.id&&i.width==s.width&&i.frameRate==s.frameRate&&i.codecs==s.codecs&&i.mimeType==s.mimeType&&i.label==s.label&&re(i.roles,s.roles)&&Gr(i.closedCaptions,s.closedCaptions)&&i.bandwidth==s.bandwidth&&(a=!0);a||n.push(i)}t.gd=n}}(t),function(e){for(var t=(e=c(e)).next();!t.done;t=e.next()){for(var n=[],r=c((t=t.value).textStreams),i=r.next();!i.done;i=r.next()){i=i.value;for(var a=!1,o=c(n),s=o.next();!s.done;s=o.next())s=s.value,i.id!=s.id&&i.language==s.language&&i.label==s.label&&i.codecs==s.codecs&&i.mimeType==s.mimeType&&i.bandwidth==s.bandwidth&&re(i.roles,s.roles)&&(a=!0);a||n.push(i)}t.textStreams=n}}(t),function(e){for(var t=(e=c(e)).next();!t.done;t=e.next()){for(var n=[],r=c((t=t.value).imageStreams),i=r.next();!i.done;i=r.next()){i=i.value;for(var a=!1,o=c(n),s=o.next();!s.done;s=o.next())s=s.value,i.id!=s.id&&i.width==s.width&&i.codecs==s.codecs&&i.mimeType==s.mimeType&&(a=!0);a||n.push(i)}t.imageStreams=n}}(t),!n&&1==t.length){i=t[0],e.g=i.Kc,e.h=i.gd,e.j=i.textStreams,e.i=i.imageStreams,L.A(2);break}for(a=-1,o=0;o<t.length;o++)s=t[o],e.m.has(s.id)||(e.m.add(s.id),-1==a&&(a=o));if(-1==a)return L.return();for(u=t.map((function(e){return e.Kc})),l=t.map((function(e){return e.gd})),d=t.map((function(e){return e.textStreams})),h=t.map((function(e){return e.imageStreams})),f=c(d),p=f.next();!p.done;p=f.next())p.value.push(nh(r.X));for(g=c(h),m=g.next();!m.done;m=g.next())m.value.push(nh(r.Wb));return w(L,jd(e.g,u,a,Vd,Hd),3);case 3:return w(L,jd(e.h,l,a,Vd,Hd),4);case 4:return w(L,jd(e.j,d,a,Vd,Hd),5);case 5:return w(L,jd(e.i,h,a,Vd,Hd),2);case 2:if(v=0,y=[],e.h.length&&e.g.length)for(I=c(e.g),k=I.next();!k.done;k=I.next())for(C=k.value,_=c(e.h),M=_.next();!M.done;M=_.next())R=M.value,N=Bi(C.drmInfos,R.drmInfos),C.drmInfos.length&&R.drmInfos.length&&!N.length||(D=v++,y.push({id:D,language:C.language,primary:C.primary,audio:C,video:R,bandwidth:(C.bandwidth||0)+(R.bandwidth||0),drmInfos:N,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]}));else for(b=e.h.concat(e.g),x=c(b),A=x.next();!A.done;A=x.next())S=A.value,E=v++,y.push({id:E,language:S.language,primary:S.primary,audio:S.type==r.Hc?S:null,video:S.type==r.va?S:null,bandwidth:S.bandwidth||0,drmInfos:S.drmInfos,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]});e.l=y,T(L)}}))}function Bd(e){var t,n,r,i,a,o,s,u,l,d,h,f,p,g,m,v,y,b,x,T,A,S,E,I;return L((function(k){switch(k.g){case 1:if(t=nt,1==e.length)return k.return(e[0]);for(n=e.map((function(e){return e.filter((function(e){return e.type==t.Hc}))})),r=e.map((function(e){return e.filter((function(e){return e.type==t.va}))})),i=e.map((function(e){return e.filter((function(e){return e.type==t.X}))})),a=e.map((function(e){return e.filter((function(e){return e.type==t.Wb}))})),o=c(i),s=o.next();!s.done;s=o.next())s.value.push(th(t.X));for(u=c(a),l=u.next();!l.done;l=u.next())l.value.push(th(t.Wb));return w(k,jd([],n,0,Kd,Wd),2);case 2:return d=k.h,w(k,jd([],r,0,Kd,Wd),3);case 3:return h=k.h,w(k,jd([],i,0,Kd,Wd),4);case 4:return f=k.h,w(k,jd([],a,0,Kd,Wd),5);case 5:if(p=k.h,g=0,h.length&&d.length)for(b=c(d),x=b.next();!x.done;x=b.next())for(T=x.value,A=c(h),S=A.next();!S.done;S=A.next())E=S.value,I=g++,E.variantIds.push(I),T.variantIds.push(I);else for(m=h.concat(d),v=c(m),y=v.next();!y.done;y=v.next())y.value.variantIds=[g++];return k.return(h.concat(d).concat(f).concat(p))}}))}function jd(e,t,n,r,i){var a,o,s,u,l,d,h,f,p,g,m,v,y,b,x,T,A,S;return L((function(E){switch(E.g){case 1:for(a=nt,o=[],s=0;s<t.length;s++)s>=n?o.push(new Set(t[s])):o.push(new Set);u=c(e),l=u.next();case 2:if(l.done){E.A(4);break}return w(E,function(e,t,n,r,i){return L((function(a){return 1==a.g?(Xd(t,e),e.matchedStreams?e.segmentIndex?w(a,Fd(e,n),2):a.A(2):a.return(!1)):(Gd(e,n,r,i),a.return(!0))}))}(l.value,t,n,i,o),5);case 5:if(!E.h)throw new Ne(2,4,4037);l=u.next(),E.A(2);break;case 4:for(d=c(o),h=d.next();!h.done;h=d.next())for(f=h.value,p=c(f),g=p.next();!g.done;g=p.next())m=g.value,(v=zd(m,t,r,i,o))&&e.push(v);for(y=c(o),h=y.next();!h.done;h=y.next())for(b=h.value,x={},T=c(b),g=T.next();!g.done;x={Va:x.Va},g=T.next())if(x.Va=g.value,A=x.Va.type==a.X&&!x.Va.language,S=x.Va.type==a.Wb&&!x.Va.tilesLayout,!A&&!S&&e.some(function(e){return function(t){return t.mimeType==e.Va.mimeType&&Ht(t.codecs)==Ht(e.Va.codecs)}}(x)))throw new Ne(2,4,4037);return E.return(e)}}))}function Fd(e,t){var n,r,i,a,o,s,u;return L((function(l){if(1==l.g){for(n=[],r=e.matchedStreams,i=c(r),a=i.next();!a.done;a=i.next())o=a.value,n.push(o.createSegmentIndex()),o.trickModeVideo&&!o.trickModeVideo.segmentIndex&&n.push(o.trickModeVideo.createSegmentIndex());return w(l,Promise.all(n),2)}if(e.segmentIndex instanceof Is)for(s=0;s<r.length;s++)(u=r[s]).segmentIndex&&s>=t&&e.segmentIndex.l.push(u.segmentIndex);T(l)}))}function zd(e,t,n,r,i){var a=n(e);return Xd(t,a),a.createSegmentIndex&&(a.createSegmentIndex=function(){return L((function(e){return a.segmentIndex?e.A(0):(a.segmentIndex=new Is,w(e,Fd(a,0),0))}))}),a.matchedStreams?(Gd(a,0,r,i),a):null}function Gd(e,t,n,r){for(var i=e.matchedStreams,a=0;a<i.length;a++)if(a>=t){var o=i[a];n(e,o);var s=!0;"audio"==e.type&&0==on(e.language,o.language)&&(s=!1),s&&r[a].delete(o)}}function Vd(e){var t=Object.assign({},e);return t.originalId=null,t.createSegmentIndex=function(){return Promise.resolve()},t.closeSegmentIndex=function(){if(t.segmentIndex&&(t.segmentIndex.release(),t.segmentIndex=null),t.matchedStreams)for(var e=c(t.matchedStreams),n=e.next();!n.done;n=e.next())(n=n.value).segmentIndex&&(n.segmentIndex.release(),n.segmentIndex=null)},t.segmentIndex=null,t.emsgSchemeIdUris=[],t.keyIds=new Set,t.closedCaptions=null,t.trickModeVideo=null,t}function Kd(e){return(e=Object.assign({},e)).keyIds=new Set,e.segments=[],e.variantIds=[],e.closedCaptions=null,e}function Hd(e,t){var n,r;e.roles=Array.from(new Set(e.roles.concat(t.roles))),t.emsgSchemeIdUris&&(e.emsgSchemeIdUris=Array.from(new Set(e.emsgSchemeIdUris.concat(t.emsgSchemeIdUris)))),e.keyIds=(n=e.keyIds,r=t.keyIds,new Set([].concat(d(n),d(r)))),null==e.originalId?e.originalId=t.originalId:e.originalId+=","+(t.originalId||"");var i=Bi(e.drmInfos,t.drmInfos);if(t.drmInfos.length&&e.drmInfos.length&&!i.length)throw new Ne(2,4,4038);if(e.drmInfos=i,e.encrypted=e.encrypted||t.encrypted,t.closedCaptions){e.closedCaptions||(e.closedCaptions=new Map);for(var a=(i=c(t.closedCaptions)).next();!a.done;a=i.next()){var o=c(a.value);a=o.next().value,o=o.next().value,e.closedCaptions.set(a,o)}}t.trickModeVideo?(e.trickModeVideo||(e.trickModeVideo=Vd(t.trickModeVideo),e.trickModeVideo.createSegmentIndex=function(){return e.trickModeVideo.segmentIndex=e.segmentIndex.clone(),Promise.resolve()}),Hd(e.trickModeVideo,t.trickModeVideo)):e.trickModeVideo&&Hd(e.trickModeVideo,t)}function Wd(e,t){e.roles=Array.from(new Set(e.roles.concat(t.roles)));var n=t.keyIds;if(n=new Set([].concat(d(e.keyIds),d(n))),e.keyIds=n,e.encrypted=e.encrypted&&t.encrypted,e.segments.push.apply(e.segments,d(t.segments)),t.closedCaptions)for(e.closedCaptions||(e.closedCaptions=new Map),n=(t=c(t.closedCaptions)).next();!n.done;n=t.next()){var r=c(n.value);n=r.next().value,r=r.next().value,e.closedCaptions.set(n,r)}}function Xd(e,t){for(var n=[],r=(e=c(e)).next();!r.done;r=e.next()){for(var i=t,a={audio:qd,video:qd,text:Yd,image:$d}[i.type],o={audio:Qd,video:Jd,text:Zd,image:eh}[i.type],s=null,u=(r=c(r.value)).next();!u.done;u=r.next())!a(i,u=u.value)||s&&!o(i,s,u)||(s=u);if(!(i=s))return;n.push(i)}t.matchedStreams=n}function qd(e,t){var n;return!(n=t.mimeType!=e.mimeType||Ht(t.codecs)!=Ht(e.codecs))&&(n=e.drmInfos)&&(e=e.drmInfos,t=t.drmInfos,n=!(!e.length||!t.length||0<Bi(e,t).length)),!n}function Yd(e,t){return!!e.language&&(!t.language||0!=on(e.language,t.language)&&t.kind==e.kind)}function $d(e){return!!e.tilesLayout}function Qd(e,t,n){if(e.id==n.id)return!0;var r=on(e.language,t.language),i=on(e.language,n.language);return i>r||!(i<r)&&(e.roles.length?(r=t.roles.filter((function(t){return e.roles.includes(t)})),(i=n.roles.filter((function(t){return e.roles.includes(t)}))).length>r.length||!(i.length<r.length)&&n.roles.length<t.roles.length):!(n.roles.length||!t.roles.length)||!(n.roles.length&&!t.roles.length)&&(!(t.primary||!n.primary)||!(t.primary&&!n.primary)&&((r=rh(e.channelsCount,t.channelsCount,n.channelsCount))==ah||r!=sh&&((r=rh(e.audioSamplingRate,t.audioSamplingRate,n.audioSamplingRate))==ah||r!=sh&&!(!e.bandwidth||ih(e.bandwidth,t.bandwidth,n.bandwidth)!=ah)))))}function Jd(e,t,n){if(e.id==n.id)return!0;var r=rh(e.width*e.height,t.width*t.height,n.width*n.height);if(r==ah)return!0;if(r==sh)return!1;if(e.frameRate){if((r=rh(e.frameRate,t.frameRate,n.frameRate))==ah)return!0;if(r==sh)return!1}return!(!e.bandwidth||ih(e.bandwidth,t.bandwidth,n.bandwidth)!=ah)}function Zd(e,t,n){if(e.id==n.id)return!0;var r=on(e.language,t.language),i=on(e.language,n.language);if(i>r)return!0;if(i<r)return!1;if(!t.primary&&n.primary)return!0;if(t.primary&&!n.primary)return!1;if(e.roles.length){if(r=t.roles.filter((function(t){return e.roles.includes(t)})),(i=n.roles.filter((function(t){return e.roles.includes(t)}))).length>r.length)return!0;if(i.length<r.length)return!1}else{if(!n.roles.length&&t.roles.length)return!0;if(n.roles.length&&!t.roles.length)return!1}return n.mimeType==e.mimeType&&n.codecs==e.codecs&&(t.mimeType!=e.mimeType||t.codecs!=e.codecs)}function eh(e,t,n){return e.id==n.id||rh(e.width*e.height,t.width*t.height,n.width*n.height)==ah}function th(e){return{id:0,originalId:"",primary:!1,type:e,mimeType:"",codecs:"",language:"",label:null,width:null,height:null,encrypted:!1,keyIds:new Set,segments:[],variantIds:[],roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null}}function nh(e){return{id:0,originalId:"",createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new Ts([]),mimeType:"",codecs:"",encrypted:!1,drmInfos:[],keyIds:new Set,language:"",label:null,type:e,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null}}function rh(e,t,n){if(t==e&&e!=n)return sh;if(n==e&&e!=t)return ah;if(t>e){if(n<=e||n-e<t-e)return ah;if(n-e>t-e)return sh}else{if(n>e)return sh;if(e-n<e-t)return ah;if(e-n>e-t)return sh}return oh}function ih(e,t,n){return t=Math.abs(e-t),(e=Math.abs(e-n))<t?ah:t<e?sh:oh}Od.prototype.release=function(){for(var e=c(this.g.concat(this.h,this.j,this.i)),t=e.next();!t.done;t=e.next())(t=t.value).segmentIndex&&t.segmentIndex.release();this.g=[],this.h=[],this.j=[],this.i=[],this.l=[]};var ah=1,oh=0,sh=-1;function uh(){var e=this;this.h=this.g=null,this.m=[],this.i=null,this.G=1,this.l={},this.L={},this.j=new Od,this.F=0,this.H=new G(5),this.D=new st((function(){!function(e){var t,n;L((function(r){switch(r.g){case 1:return t=0,A(r,2),w(r,lh(e),4);case 4:t=r.h,E(r,3);break;case 2:n=I(r),e.h&&(n.severity=1,e.h.onError(n));case 3:if(!e.h)return r.return();fh(e,t),T(r)}}))}(e)})),this.o=new Ar,this.s=null,this.J=[],this.u=1/0,this.B=!1}function lh(e){var t,n,r,i,a,o,s;return L((function(u){return 1==u.g?(t=kr(e.m,e.g.retryParameters),n=e.h.networkingEngine,e.h.modifyManifestRequest(t,{format:"d"}),r=Date.now(),i=n.request(0,t),Sr(e.o,i),w(u,i.promise,2)):3!=u.g?(a=u.h,e.h?(a.uri&&!e.m.includes(a.uri)&&e.m.unshift(a.uri),w(u,function(e,t,n){var r,i,a,o;return L((function(s){if(1==s.g){if(!(r=Ti(t,"MPD")))throw new Ne(2,4,4001,n);return e.g.dash.disableXlinkProcessing?s.return(ch(e,r,n)):(i=e.g.dash.xlinkFailGracefully,a=md(r,e.g.retryParameters,i,n,e.h.networkingEngine),Sr(e.o,a),w(s,a.promise,2))}return o=s.h,s.return(ch(e,o,n))}))}(e,a.data,a.uri),3)):u.return(0)):(o=Date.now(),s=(o-r)/1e3,e.H.sample(1,s),u.return(s))}))}function ch(e,t,n){var r,i,a,o,s,u,l,d,h,f,p,g,m,v,y,b,x,S,k,C,_,M,R,N,D,P,O,U,B;return L((function(j){switch(j.g){case 1:if((r=e.g.dash.manifestPreprocessor)&&r(t),i=[n],0<(a=oi(t,"Location").map(ci).filter($e)).length&&(o=Qe(i,a),i=e.m=o),s=oi(t,"BaseURL"),u=s.map(ci),l=Qe(i,u),d=0,s&&s.length&&(d=hi(s[0],"availabilityTimeOffset",bi)||0),h=e.g.dash.ignoreMinBufferTime,f=0,h||(f=hi(t,"minBufferTime",pi)||0),e.F=hi(t,"minimumUpdatePeriod",pi,-1),p=hi(t,"availabilityStartTime",fi),g=hi(t,"timeShiftBufferDepth",pi),m=e.g.dash.ignoreSuggestedPresentationDelay,v=null,m||(v=hi(t,"suggestedPresentationDelay",pi)),y=e.g.dash.ignoreMaxSegmentDuration,b=null,y||(b=hi(t,"maxSegmentDuration",pi)),x=t.getAttribute("type")||"static",e.i)for(S=e.i.presentationTimeline,k=c(Object.values(e.l)),C=k.next();!C.done;C=k.next())(_=C.value).segmentIndex&&_.segmentIndex.eb(S.Pa());else M=e.g.defaultPresentationDelay||1.5*f,S=new ns(p,null!=v?v:M,e.g.dash.autoCorrectDrift);return S.yc("static"==x),S.U()&&!isNaN(e.g.availabilityWindowOverride)&&(g=e.g.availabilityWindowOverride),null==g&&(g=1/0),S.me(g),R=t.getAttribute("profiles")||"",N={Ma:"static"!=x,presentationTimeline:S,$:null,T:null,ea:null,I:null,bandwidth:0,Ke:!1,zb:d,profiles:R.split(",")},D=function(e,t,n,r){var i=hi(r,"mediaPresentationDuration",pi),a=[],o=0;r=oi(r,"Period");for(var s=0;s<r.length;s++){var u=r[s],l=r[s+1],c=hi(u,"start",pi,o),d=u.id,h=hi(u,"duration",pi),f=null;if(l){var p=hi(l,"start",pi);null!=p&&(f=p-c)}else null!=i&&(f=i-c);if(null==f&&(f=h),!(null!==e.s&&null!==d&&null!==c&&c<e.s)||e.J.includes(d)||s+1==r.length){if(null!==c&&(null===e.s||c>e.s)&&(e.s=c),o=dh(e,t,n,{start:c,duration:f,node:u,Gd:null==f||!l}),a.push(o),t.$.id&&f&&(e.L[t.$.id]=f),null==f){o=null;break}o=c+f}}return e.J=a.map((function(e){return e.id})),null!=i?{periods:a,duration:i,De:!1}:{periods:a,duration:o,De:!0}}(e,N,l,t),P=D.duration,O=D.periods,"static"!=x&&D.De||S.Aa(P||1/0),e.u&&!e.B&&e.h.isAutoLowLatencyMode()&&(e.h.enableLowLatencyMode(),e.B=e.h.isLowLatencyMode()),e.B?S.Ue(e.u):e.u&&X("Low-latency DASH live stream detected, but low-latency streaming mode is not enabled in Shaka Player. Set streaming.lowLatencyMode configuration to true, and see https://bit.ly/3clctcj for details."),S.Sd(b||1),w(j,Ud(e.j,O,N.Ma),2);case 2:if(e.i){e.i.variants=e.j.l,e.i.textStreams=e.j.j.slice(),e.i.imageStreams=e.j.i,e.h.filter(e.i),j.A(3);break}if(e.i={presentationTimeline:S,variants:e.j.l,textStreams:e.j.j.slice(),imageStreams:e.j.i,offlineSessionIds:[],minBufferTime:f||0,sequenceMode:e.g.dash.sequenceMode},!S.df()){j.A(4);break}return U=oi(t,"UTCTiming"),w(j,function(e,t,n){var r,i,a,o,s,u,l,d;return L((function(h){switch(h.g){case 1:r=n.map((function(e){return{scheme:e.getAttribute("schemeIdUri"),value:e.getAttribute("value")}})),i=e.g.dash.clockSyncUri,!r.length&&i&&r.push({scheme:"urn:mpeg:dash:utc:http-head:2014",value:i}),a=c(r),o=a.next();case 2:if(o.done){h.A(4);break}switch(s=o.value,A(h,5),u=s.scheme,l=s.value,u){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":return h.A(7);case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":return h.A(8);case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":return d=Date.parse(l),h.return(isNaN(d)?0:d-Date.now());case"urn:mpeg:dash:utc:http-ntp:2014":case"urn:mpeg:dash:utc:ntp:2014":case"urn:mpeg:dash:utc:sntp:2014":X("NTP UTCTiming scheme is not supported");break;default:X("Unrecognized scheme in UTCTiming element",u)}h.A(9);break;case 7:return w(h,gh(e,t,l,"HEAD"),10);case 10:return h.return(h.h);case 8:return w(h,gh(e,t,l,"GET"),11);case 11:return h.return(h.h);case 9:E(h,3);break;case 5:I(h);case 3:o=a.next(),h.A(2);break;case 4:return X("A UTCTiming element should always be given in live manifests! This content may not play on clients with bad clocks!"),h.return(0)}}))}(e,l,U),5);case 5:if(B=j.h,!e.h)return j.return();S.Ve(B);case 4:S.Md();case 3:e.h.makeTextStreamsForClosedCaptions(e.i),T(j)}}))}function dh(e,t,n,r){t.$=ph(r.node,null,n),t.T=r,t.$.zb=t.zb,t.$.id||(t.$.id="__shaka_period_"+r.start);var i=oi(r.node,"EventStream");n=t.presentationTimeline.Pa();for(var a=(i=c(i)).next();!a.done;a=i.next())mh(e,r.start,r.duration,a.value,n);if(n=oi(r.node,"AdaptationSet").map((function(n){return function(e,t,n){function r(e){switch(e){case 1:case 6:case 13:case 14:case 15:return"SDR";case 16:return"PQ";case 18:return"HLG"}}t.ea=ph(n,t.$,null);var i,a=!1,o=oi(n,"Role"),s=o.map((function(e){return e.getAttribute("value")})).filter($e),u=void 0,l=t.ea.contentType==tt;l&&(u="subtitle");for(var h=(o=c(o)).next();!h.done;h=o.next()){var f=(h=h.value).getAttribute("schemeIdUri");if(null==f||"urn:mpeg:dash:role:2011"==f)switch(h=h.getAttribute("value"),h){case"main":a=!0;break;case"caption":case"subtitle":u=h}}f=oi(n,"EssentialProperty"),o=null,h=!1;for(var p=(f=c(f)).next();!p.done;p=f.next()){var g=(p=p.value).getAttribute("schemeIdUri");"http://dashif.org/guidelines/trickmode"==g?o=p.getAttribute("value"):"urn:mpeg:mpegB:cicp:TransferCharacteristics"==g?i=r(parseInt(p.getAttribute("value"),10)):h=!0}for(f=c(f=oi(n,"SupplementalProperty")),p=f.next();!p.done;p=f.next())"urn:mpeg:mpegB:cicp:TransferCharacteristics"==(p=p.value).getAttribute("schemeIdUri")&&(i=r(parseInt(p.getAttribute("value"),10)));f=oi(n,"Accessibility");var m=new Map;for(f=c(f),p=f.next();!p.done;p=f.next())if(g=p.value,p=g.getAttribute("schemeIdUri"),g=g.getAttribute("value"),"urn:scte:dash:cc:cea-608:2015"==p)if(p=1,null!=g)for(var v=c(g=g.split(";")),y=v.next();!y.done;y=v.next()){var b=y.value,x=y=void 0;b.includes("=")?(y=(b=b.split("="))[0].startsWith("CC")?b[0]:"CC"+b[0],x=b[1]||"und"):(y="CC"+p,2==g.length?p+=2:p++,x=b),m.set(y,an(x))}else m.set("CC1","und");else if("urn:scte:dash:cc:cea-708:2015"==p)if(p=1,null!=g)for(y=(g=c(g.split(";"))).next();!y.done;y=g.next())b=v=void 0,(y=y.value).includes("=")?(v="svc"+(y=y.split("="))[0],b=y[1].split(",")[0].split(":").pop()):(v="svc"+p,p++,b=y),m.set(v,an(b));else m.set("svc1","und");else"urn:mpeg:dash:role:2011"==p&&null!=g&&(s.push(g),"captions"==g&&(u="caption"));if(h)return null;h=oi(n,"ContentProtection");var A=sd(h,e.g.dash.ignoreDrmInfo,e.g.dash.keySystemsByURI),S=an(n.getAttribute("lang")||"und"),E=n.getAttribute("label");if((h=oi(n,"Label"))&&h.length&&(h=h[0],h.textContent&&(E=h.textContent)),h=oi(n,"Representation"),n=h.map((function(n){return(n=function(e,t,n,r,i,a,o,s,u,l){if(t.I=ph(l,t.ea,null),e.u=Math.min(e.u,t.I.zb),!function(e){var t=e.wc?1:0;return t+=e.ab?1:0,t+=e.xc?1:0,0==t?e.contentType==tt||"application"==e.contentType:(1!=t&&(e.wc&&(e.ab=null),e.xc=null),!0)}(t.I))return null;var c=t.T.start;t.bandwidth=hi(l,"bandwidth",vi)||0;var d=t.I.contentType,h=d==tt||"application"==d;d="image"==d;try{var f=function(t,n,r){return function(e,t,n,r){var i,a,o,s,u;return L((function(l){return 1==l.g?(i=Rr,a=Bs(t,n,r,e.g.retryParameters),o=e.h.networkingEngine,s=o.request(i,a),Sr(e.o,s),w(l,s.promise,2)):(u=l.h,l.return(u.data))}))}(e,t,n,r)};if(t.I.wc)var p=Id(t,f);else if(t.I.ab)p=Nd(t,e.l);else if(t.I.xc)p=Dd(t,f,e.l,!!e.i,e.g.dash.initialSegmentLimit,e.L);else{var g=t.I.wa,m=t.T.duration||0;p={Bb:function(){return Promise.resolve(Ss(c,m,g))}}}}catch(E){if((h||d)&&4002==E.code)return null;throw E}f=oi(l,"ContentProtection"),f=function(e,t,n,r){var i=sd(e,n,r);if(t.Fe)e=1==t.drmInfos.length&&!t.drmInfos[0].keySystem,n=0==i.drmInfos.length,(0==t.drmInfos.length||e&&!n)&&(t.drmInfos=i.drmInfos),t.Fe=!1;else if(0<i.drmInfos.length&&(t.drmInfos=t.drmInfos.filter((function(e){return i.drmInfos.some((function(t){return t.keySystem==e.keySystem}))})),0==t.drmInfos.length))throw new Ne(2,4,4008);return i.Be||t.Be}(f,n,e.g.dash.ignoreDrmInfo,e.g.dash.keySystemsByURI),f=new Set(f?[f]:[]);var v=!1;oi(l,"SupplementalProperty").some((function(e){return"tag:dolby.com,2018:dash:EC3_ExtensionType:2018"==e.getAttribute("schemeIdUri")&&"JOC"==e.getAttribute("value")}))&&(v=!0);var y,b,x=!1;if(h&&(x=s.includes("forced_subtitle")||s.includes("forced-subtitle")),d&&((l=oi(l,"EssentialProperty").find((function(e){return["http://dashif.org/thumbnail_tile","http://dashif.org/guidelines/thumbnail_tile"].includes(e.getAttribute("schemeIdUri"))})))&&(y=l.getAttribute("value")),!y))return null;l=t.I.codecs,t.profiles.includes("http://dashif.org/guidelines/dash-if-uhd#hevc-hdr-pq10")&&(l.includes("hvc1.2.4.L153.B0")||l.includes("hev1.2.4.L153.B0"))&&(b="PQ");var A=t.I.id?t.$.id+","+t.I.id:"",S={id:e.G++,originalId:t.I.id,createSegmentIndex:function(){var n,r;return L((function(i){if(1==i.g)return(n=A&&t.Ma&&e.l[A]?e.l[A]:S).segmentIndex?i.A(0):(r=n,w(i,p.Bb(),3));r.segmentIndex=i.h,T(i)}))},closeSegmentIndex:function(){S.segmentIndex&&(S.segmentIndex.release(),S.segmentIndex=null)},segmentIndex:null,mimeType:t.I.mimeType,codecs:t.I.codecs,frameRate:t.I.frameRate,pixelAspectRatio:t.I.pixelAspectRatio,bandwidth:t.bandwidth,width:t.I.width,height:t.I.height,kind:r,encrypted:0<n.drmInfos.length,drmInfos:n.drmInfos,keyIds:f,language:i,label:a,type:t.ea.contentType,primary:o,trickModeVideo:null,emsgSchemeIdUris:t.I.emsgSchemeIdUris,roles:s,forced:x,channelsCount:t.I.ad,audioSamplingRate:t.I.audioSamplingRate,spatialAudio:v,closedCaptions:u,hdr:b,tilesLayout:y,matchedStreams:[]};return A&&t.Ma&&!e.l[A]&&(e.l[A]=S),S}(e,t,A,u,S,E,a,s,m,n))&&(n.hdr=n.hdr||i),n})).filter((function(e){return!!e})),0==n.length){if(o="image"==t.ea.contentType,e.g.dash.ignoreEmptyAdaptationSet||l||o)return null;throw new Ne(2,4,4003)}if(!t.ea.contentType||"application"==t.ea.contentType)for(t.ea.contentType=vh(n[0].mimeType,n[0].codecs),l=c(n),f=l.next();!f.done;f=l.next())f.value.type=t.ea.contentType;for(l=c(n),f=l.next();!f.done;f=l.next())for(f=f.value,p=c(A.drmInfos),g=p.next();!g.done;g=p.next())(g=g.value).keyIds=g.keyIds&&f.keyIds?new Set([].concat(d(g.keyIds),d(f.keyIds))):g.keyIds||f.keyIds;return l=h.map((function(e){return e.getAttribute("id")})).filter($e),{id:t.ea.id||"__fake__"+e.G++,contentType:t.ea.contentType,language:S,vh:a,streams:n,drmInfos:A.drmInfos,qe:o,qg:l}}(e,t,n)})).filter($e),t.Ma){for(r=[],a=(i=c(n)).next();!a.done;a=i.next())for(var o=(a=c(a.value.qg)).next();!o.done;o=a.next())r.push(o.value);if(r.length!=new Set(r).size)throw new Ne(2,4,4018)}for(r=n.filter((function(e){return!e.qe})),i=(n=c(n=n.filter((function(e){return e.qe})))).next();!i.done;i=n.next()){a=(i=i.value).qe.split(" ");for(var s=(o=c(r)).next();!s.done;s=o.next()){var u=s.value;if(a.includes(u.id)){s={};for(var l=(u=c(u.streams)).next();!l.done;s={Gc:s.Gc},l=u.next())s.Gc=l.value,s.Gc.trickModeVideo=i.streams.find(function(e){return function(t){return Ht(e.Gc.codecs)==Ht(t.codecs)}}(s))}}}if(i=e.g.disableAudio?[]:hh(r,"audio"),o=e.g.disableVideo?[]:hh(r,"video"),a=e.g.disableText?[]:hh(r,tt),n=e.g.disableThumbnails?[]:hh(r,"image"),!o.length&&!i.length)throw new Ne(2,4,4004);for(r=[],s=(i=c(i)).next();!s.done;s=i.next())r.push.apply(r,d(s.value.streams));for(i=[],s=(o=c(o)).next();!s.done;s=o.next())i.push.apply(i,d(s.value.streams));for(o=[],s=(a=c(a)).next();!s.done;s=a.next())o.push.apply(o,d(s.value.streams));for(a=[],s=(n=c(n)).next();!s.done;s=n.next())a.push.apply(a,d(s.value.streams));return{id:t.$.id,Kc:r,gd:i,textStreams:o,imageStreams:a}}function hh(e,t){return e.filter((function(e){return e.contentType==t}))}function fh(e,t){0>e.F||e.D.N(Math.max(3,e.F-t,V(e.H)))}function ph(e,t,n){t=t||{contentType:"",mimeType:"",codecs:"",emsgSchemeIdUris:[],frameRate:void 0,pixelAspectRatio:void 0,ad:null,audioSamplingRate:null,zb:0},n=n||t.wa;for(var r=oi(e,"BaseURL"),i=r.map(ci),a=e.getAttribute("contentType")||t.contentType,o=e.getAttribute("mimeType")||t.mimeType,s=e.getAttribute("codecs")||t.codecs,u=hi(e,"frameRate",xi)||t.frameRate,l=e.getAttribute("sar")||t.pixelAspectRatio,d=oi(e,"InbandEventStream"),h=t.emsgSchemeIdUris.slice(),f=(d=c(d)).next();!f.done;f=d.next())f=f.value.getAttribute("schemeIdUri"),h.includes(f)||h.push(f);d=function(e){for(var t=(e=c(e)).next();!t.done;t=e.next()){var n=t.value;if((t=n.getAttribute("schemeIdUri"))&&(n=n.getAttribute("value")))switch(t){case"urn:mpeg:dash:outputChannelPositionList:2012":return n.trim().split(/ +/).length;case"urn:mpeg:dash:23003:3:audio_channel_configuration:2011":case"urn:dts:dash:audio_channel_configuration:2012":if(!(t=parseInt(n,10)))continue;return t;case"tag:dolby.com,2014:dash:audio_channel_configuration:2011":case"urn:dolby:dash:audio_channel_configuration:2011":if(!(t=parseInt(n,16)))continue;for(e=0;t;)1&t&&++e,t>>=1;return e;case"urn:mpeg:mpegB:cicp:ChannelConfiguration":if(t=[0,1,2,3,4,5,6,8,2,3,4,7,8,24,8,12,10,12,14,12,14],(n=parseInt(n,10))&&0<n&&n<t.length)return t[n]}}return null}(d=oi(e,"AudioChannelConfiguration"))||t.ad,f=hi(e,"audioSamplingRate",yi)||t.audioSamplingRate,a||(a=vh(o,s));var p=ii(e,"SegmentBase"),g=ii(e,"SegmentTemplate"),m=p&&hi(p,"availabilityTimeOffset",bi)||0,v=g&&hi(g,"availabilityTimeOffset",bi)||0;return r=r&&r.length&&hi(r[0],"availabilityTimeOffset",bi)||0,r=t.zb+r+m+v,{wa:Qe(n,i),wc:p||t.wc,ab:ii(e,"SegmentList")||t.ab,xc:g||t.xc,width:hi(e,"width",yi)||t.width,height:hi(e,"height",yi)||t.height,contentType:a,mimeType:o,codecs:s,frameRate:u,pixelAspectRatio:l,emsgSchemeIdUris:h,id:e.getAttribute("id"),ad:d,audioSamplingRate:f,zb:r}}function gh(e,t,n,r){var i,a,o,s,u,l;return L((function(c){if(1==c.g)return i=Qe(t,[n]),(a=kr(i,e.g.retryParameters)).method=r,o=e.h.networkingEngine.request(4,a),Sr(e.o,o),w(c,o.promise,2);if(s=c.h,"HEAD"==r){if(!s.headers||!s.headers.date)return c.return(0);u=s.headers.date}else u=wt(s.data);return l=Date.parse(u),isNaN(l)?c.return(0):c.return(l-Date.now())}))}function mh(e,t,n,r,i){for(var a=r.getAttribute("schemeIdUri")||"",o=r.getAttribute("value")||"",s=hi(r,"timescale",yi)||1,u=(r=c(oi(r,"Event"))).next();!u.done;u=r.next()){var l=hi(u=u.value,"presentationTime",yi)||0,d=hi(u,"duration",yi)||0;d=(l=l/s+t)+d/s,null!=n&&(l=Math.min(l,t+n),d=Math.min(d,t+n)),d<i||(u={schemeIdUri:a,value:o,startTime:l,endTime:d,id:u.getAttribute("id")||"",eventElement:u},e.h.onTimelineRegionAdded(u))}}function vh(e,t){return Yt(Vt(e,t))?tt:e.split("/")[0]}function yh(e,t,n,r){this.h=e,this.type=t,this.g=n,this.segments=r||null}function bh(e,t,n,r){this.id=e,this.name=t,this.g=n,this.value=void 0===r?null:r}function xh(e,t,n){return(e=e.getAttribute(t))?e.value:n||null}function wh(e,t){if(!(e=e.getAttribute(t)))throw new Ne(2,4,4023,t);return e.value}function Th(e,t,n){n=void 0===n?[]:n,this.g=t,this.i=e,this.h=n}function Ah(e,t){this.name=e,this.value=t}function Sh(e,t){return e.filter((function(e){return e.name==t}))}function Eh(e,t){return e.filter((function(e){return wh(e,"TYPE")==t}))}function Ih(e,t){return(e=Sh(e,t)).length?e[0]:null}function kh(e,t){var n=0;return n=void 0===n?0:n,(e=Ih(e,t))?Number(e.value):n}function Ch(e,t){return Qe([e],[t])[0]}function _h(e){this.h=e,this.g=0}function Mh(e){Rh(e,/[ \t]+/gm)}function Rh(e,t){return t.lastIndex=e.g,t=null==(t=t.exec(e.h))?null:{position:t.index,length:t[0].length,results:t},e.g==e.h.length||null==t||t.position!=e.g?null:(e.g+=t.length,t.results)}function Nh(e){return e.g==e.h.length?null:(e=Rh(e,/[^ \t\n]*/gm))?e[0]:null}function Lh(){this.g=0}function Dh(e,t,n){var r=(t=(t=wt(t)).replace(/\r\n|\r(?=[^\n]|$)/gm,"\n").trim()).split(/\n+/m);if(!/^#EXTM3U($|[ \t\n])/m.test(r[0]))throw new Ne(2,4,4015);t=0;for(var i=!0,a=c(r),o=a.next();!o.done;o=a.next())if(o=o.value,/^#(?!EXT)/m.test(o)||i)i=!1;else{if(o=Ph(e,o),--e.g,Oh.includes(o.name)){t=1;break}"EXT-X-STREAM-INF"==o.name&&(i=!0)}for(a=[],i=!0,o=0;o<r.length;o++){var s=r[o],u=r[o+1];if(/^#(?!EXT)/m.test(s)||i)i=!1;else{if(s=Ph(e,s),Uh.includes(s.name)){if(1!=t)throw new Ne(2,4,4017);var l=r.splice(o,r.length-o);r=n,i=[],o=[],u=[],s=null;for(var d=(l=c(l)).next();!d.done;d=l.next())d=d.value,/^(#EXT)/.test(d)?(d=Ph(e,d),Oh.includes(d.name)?a.push(d):"EXT-X-MAP"==d.name?s=d:"EXT-X-PART"==d.name?u.push(d):"EXT-X-PRELOAD-HINT"==d.name?"PART"==xh(d,"TYPE")?u.push(d):"MAP"==xh(d,"TYPE")&&(d.name="EXT-X-MAP",s=d):o.push(d)):/^#(?!EXT)/m.test(d)||(d=Ch(r,d.trim()),s&&o.push(s),i.push(new Th(d,o,u)),o=[],u=[]);return u.length&&(s&&o.push(s),i.push(new Th("",o,u))),new yh(n,t,a,i)}a.push(s),"EXT-X-STREAM-INF"==s.name&&(s.g.push(new Ah("URI",u)),i=!0)}}return new yh(n,t,a)}function Ph(e,t){e=e.g++;var n=t.match(/^#(EXT[^:]*)(?::(.*))?$/);if(!n)throw new Ne(2,4,4016,t);t=n[1];var r,i=n[2];if(n=[],i){var a;(a=Rh(i=new _h(i),/^([^,=]+)(?:,|$)/g))&&(r=a[1]);for(var o=/([^=]+)=(?:"([^"]*)"|([^",]*))(?:,|$)/g;a=Rh(i,o);)n.push(new Ah(a[1],a[2]||a[3])),Mh(i)}return new bh(e,t,n,r)}(i=uh.prototype).configure=function(e){this.g=e},i.start=function(e,t){var n,r=this;return L((function(i){if(1==i.g)return r.B=t.isLowLatencyMode(),r.m=[e],r.h=t,w(i,lh(r),2);if(n=i.h,r.h&&fh(r,n),!r.h)throw new Ne(2,7,7001);return i.return(r.i)}))},i.stop=function(){for(var e=c(Object.values(this.l)),t=e.next();!t.done;t=e.next())(t=t.value).segmentIndex&&t.segmentIndex.release();return this.j&&this.j.release(),this.g=this.h=null,this.m=[],this.i=null,this.l={},this.j=null,null!=this.D&&(this.D.stop(),this.D=null),this.o.destroy()},i.update=function(){var e,t=this;return L((function(n){return 1==n.g?(A(n,2),w(n,lh(t),4)):2!=n.g?E(n,0):(e=I(n),t.h&&e?(t.h.onError(e),void T(n)):n.return())}))},i.onExpirationUpdated=function(){},z("shaka.dash.DashParser",uh),Ji.mpd=function(){return new uh},Qi["application/dash+xml"]=function(){return new uh},Qi["video/vnd.mpeg.dash.mpd"]=function(){return new uh},bh.prototype.toString=function(){var e="#"+this.name,t=this.g?this.g.map((function(e){return e.name+"="+(isNaN(Number(e.value))?'"'+e.value+'"':e.value)})):[];return this.value&&t.unshift(this.value),0<t.length&&(e+=":"+t.join(",")),e},bh.prototype.getAttribute=function(e){var t=this.g.filter((function(t){return t.name==e}));return t.length?t[0]:null};var Oh="EXT-X-TARGETDURATION EXT-X-MEDIA-SEQUENCE EXT-X-DISCONTINUITY-SEQUENCE EXT-X-PLAYLIST-TYPE EXT-X-I-FRAMES-ONLY EXT-X-ENDLIST EXT-X-SERVER-CONTROL EXT-X-SKIP".split(" "),Uh="EXTINF EXT-X-BYTERANGE EXT-X-DISCONTINUITY EXT-X-PROGRAM-DATE-TIME EXT-X-KEY EXT-X-DATERANGE EXT-X-MAP".split(" ");function Bh(){}function jh(e){try{var t=Fh(e);return pr({uri:e,Oe:e,data:t.data,headers:{"content-type":t.contentType}})}catch(n){return hr(n)}}function Fh(t){var n=t.split(":");if(2>n.length||"data"!=n[0])throw new Ne(2,1,1004,t);if(2>(n=n.slice(1).join(":").split(",")).length)throw new Ne(2,1,1004,t);var r=n[0];t=e.decodeURIComponent(n.slice(1).join(",")),n=r.split(";"),r=n[0];var i=!1;return 1<n.length&&"base64"==n[n.length-1]&&(i=!0,n.pop()),{data:i?Mt(t):St(t),contentType:r}}function zh(){var e=this;this.g=this.i=null,this.Fa=1,this.o=new Map,this.u=new Map,this.F=new Map,this.F.set("video",new Map),this.F.set("audio",new Map),this.F.set(tt,new Map),this.F.set("image",new Map),this.ua=new Set,this.h=new Map,this.j=null,this.M="",this.W=new Lh,this.O=0,this.B=-1,this.H=1/0,this.Ga=!1,this.m=new st((function(){!function(e){var t,n;L((function(r){return 1==r.g?e.i?(A(r,2),w(r,e.update(),4)):r.return():2!=r.g?(gf(e)&&(t=e.O,e.m.N(t)),E(r,0)):(n=I(r),e.i?(n.severity=1,e.i.onError(n),e.m.N(.1),void T(r)):r.return())}))}(e)})),this.ia=Af,this.D=null,this.ca=0,this.J=1/0,this.V=this.da=0,this.G=new Ar,this.L=new Map,this.s=new Map,this.ba=new Map,this.l=!1}function Gh(e,t){return gf(e)?e.F.get(t.type):t.$c}function Vh(e,t){var n,r,i,a,o,s,u,l,c,h,f,p,g,m,v;return L((function(y){if(1==y.g)return n=t.Jc,r=new De(n),e.l&&t.Mc&&Ue(r,new We("_HLS_skip=YES")),w(y,pf(e,r.toString()),2);if(i=y.h,!t.stream.segmentIndex)return y.return();if(1!=(a=Dh(e.W,i.data,i.uri)).type)throw new Ne(2,4,4017);o=Sh(a.g,"EXT-X-DEFINE"),s=Wh(e,o),u=t.stream,l=Gh(e,t),c=nf(a,u.mimeType),h=c.keyIds,f=c.drmInfos,function(e,t){return e.size===t.size&&[].concat(d(e)).every((function(e){return t.has(e)}))}(u.keyIds,h)||(u.keyIds=h,u.drmInfos=f,e.i.newDrmInfo(u)),p=cf(e,a,u.type,l,s),u.segmentIndex.Hb(p,e.j.Pa()),p.length&&(g=kh(a.g,"EXT-X-MEDIA-SEQUENCE"),m=l.get(g),u.segmentIndex.eb(m)),v=p[p.length-1],Ih(a.g,"EXT-X-ENDLIST")&&(t.mc=!0,t.Ya=v.endTime),T(y)}))}function Kh(e,t,n){t.Ya+=n;for(var r=(t=c(e=Gh(e,t))).next();!r.done;r=t.next()){var i=c(r.value);r=i.next().value,i=i.next().value,e.set(r,i+n)}}function Hh(e){if(gf(e)){if(e.O=e.J,e.ia==Ef){var t=Qh(e);e.g.hls.useSafariBehaviorForLive&&(t=e.j.m),isNaN(e.g.availabilityWindowOverride)||(t=e.g.availabilityWindowOverride),e.j.me(t)}}else e.j.Aa(Qh(e));e.j.Md()}function Wh(e,t){for(var n=new Map,r=(t=c(t)).next();!r.done;r=t.next()){var i=r.value;r=xh(i,"NAME");var a=xh(i,"VALUE");i=xh(i,"IMPORT"),r&&a&&n.set(r,a),i&&(r=e.o.get(i))&&n.set(i,r)}return n}function Xh(e,t){var n=[];e.g.disableVideo||n.push(e.g.hls.defaultVideoCodec),e.g.disableAudio||n.push(e.g.hls.defaultAudioCodec),n=xh(t,"CODECS",n.join(",")).split(/\s*,\s*/),e=new Set,t=[];for(var r=(n=c(n)).next();!r.done;r=n.next()){var i=Xt(r=r.value)[0];e.has(i)||(t.push(r),e.add(i))}return t}function qh(e){return an(e=xh(e,"LANGUAGE")||"und")}function Yh(e,t){var n=wh(t,"GROUP-ID"),r="",i=wh(t,"TYPE").toLowerCase();"subtitles"==i&&(i=tt);var a=i;if(a!=tt&&n&&e.s.has(n)&&(r=e.s.get(n)),i=df(wh(t,"URI"),e.o),e.h.has(i))return e.h.get(i);var o=qh(t),s=xh(t,"NAME"),u="YES"==xh(t,"DEFAULT"),l="audio"==a&&(l=xh(t,"CHANNELS"))?parseInt(l.split("/")[0],10):null,c="audio"==a&&(!!(c=xh(t,"CHANNELS"))&&c.includes("/JOC"));return r=$h(e,i,r,a,o,u,s,l,null,xh(t,"CHARACTERISTICS"),t="YES"==xh(t,"FORCED"),c),e.u.has(n)?e.u.get(n).push(r):e.u.set(n,[r]),e.h.has(i)?e.h.get(i):(e.h.set(i,r),r)}function $h(e,t,n,r,i,a,o,s,u,l,d,h){function f(f){var p,v,y,b,x,A,S,E,I,k,C,_,M;return L((function(R){if(1==R.g)return w(R,pf(e,m.Jc),2);if(3!=R.g)return p=R.h,f.aborted?R.return():(v=p.uri,y=Dh(e.W,p.data,v),b=gf(e),w(R,ef(e,y,t,v,n,r,i,a,o,s,u,l,d,h),3));if(x=R.h,f.aborted)return R.return();if(A=x.stream,gf(e)&&!b&&of(e),m.Jc=v,m.Ya=x.Ya,m.Mc=x.Mc,m.mc=x.mc,m.$c=x.$c,m.Ld=!0,g.segmentIndex=A.segmentIndex,g.encrypted=A.encrypted,g.drmInfos=A.drmInfos,g.keyIds=A.keyIds,g.mimeType=A.mimeType,ts.includes(g.mimeType)&&(g.codecs=""),g.drmInfos.length&&e.i.newDrmInfo(g),r==(S=nt).va||r==S.Hc)for(E=c(e.h.values()),I=E.next();!I.done;I=E.next())(k=I.value).Ld||k.type!=r||(k.stream.mimeType=A.mimeType,ts.includes(k.stream.mimeType)&&(k.stream.codecs=""));(function(e){if(!e.D)return!1;for(var t=[],n=[],r=(e=c(e.D.variants)).next();!r.done;r=e.next())(r=r.value).video&&t.push(r.video),r.audio&&n.push(r.audio);return!(0<t.length&&!t.some((function(e){return e.segmentIndex}))||0<n.length&&!n.some((function(e){return e.segmentIndex})))})(e)&&(e.Ga?Zh(e,[m]):(e.Ga=!0,C=Array.from(e.h.values()),_=C.filter((function(e){return e.stream.segmentIndex})),Zh(e,_),Hh(e),0<(M=e.O)&&e.m.N(M))),T(R)}))}var p=Ch(e.M,t),g=tf(e,n,r,i,a,o,s,u,l,d,h);ts.includes(g.mimeType)&&(g.codecs="");var m={stream:g,type:r,Ac:t,Jc:p,Ya:0,$c:new Map,Mc:!1,mc:!1,Cd:-1,Ld:!1},v=null,y=new AbortController;return g.createSegmentIndex=function(){return v||(y=new AbortController,v=new Promise((function(e){e(f(y.signal))})))},g.closeSegmentIndex=function(){v&&!g.segmentIndex&&y.abort(),g.segmentIndex&&(g.segmentIndex.release(),g.segmentIndex=null),v=null},m}function Qh(e){for(var t=1/0,n=(e=c(e.h.values())).next();!n.done;n=e.next())(n=n.value).stream.segmentIndex&&"text"!=n.stream.type&&(t=Math.min(t,n.Ya));return t}function Jh(e,t){for(var n=[],r=(t=c(t)).next();!r.done;r=t.next())(r=r.value).segmentIndex&&As(r.segmentIndex,(function(e){n.push(e)}));e.j.Ib(n)}function Zh(e,t){if(!gf(e))for(var n=Qh(e),r=c(t),i=r.next();!i.done;i=r.next())i.value.stream.segmentIndex.Wa(0,n);for(i=(n=c(t)).next();!i.done;i=n.next())i=i.value.stream,ts.includes(i.mimeType)&&(i.codecs="");Jh(e,t.map((function(e){return e.stream}))),e.g.hls.ignoreManifestProgramDateTime?function(e,t){for(var n=-1==e.B,r=c(t),i=r.next();!i.done;i=r.next()){var a=(i=i.value).stream.segmentIndex,o=Gh(e,i);if(a=a.g[0]||null)for(var s=(o=c(o)).next();!s.done;s=o.next()){var u=(s=c(s.value)).next().value;if(s.next().value==a.startTime){n&&(e.B=Math.max(e.B,u)),i.Cd=u;break}}}if(!(0>e.B))for(i=(t=c(t)).next();!i.done;i=t.next())(r=(n=i.value).stream.segmentIndex)&&(r.g.splice(0,e.B-n.Cd),(r=r.g[0]||null)&&(r=-r.startTime,n.stream.segmentIndex.offset(r),Kh(e,n,r)))}(e,t):function(e,t){if(1/0==e.H)for(var n=(t=c(t)).next();!n.done;n=t.next()){var r=n.value.stream.segmentIndex.g[0]||null;null!=r&&null!=r.g&&(e.H=Math.min(e.H,r.g))}if(1/0!=(t=e.H))for(n=(r=c(e.h.values())).next();!n.done;n=r.next()){var i=(n=n.value).stream.segmentIndex;if(null!=i){var a=i.g[0]||null;if(null==a.g)W("Missing EXT-X-PROGRAM-DATE-TIME for stream",n.Ac,"Expect AV sync issues!");else for(Kh(e,n,a.g-t-a.startTime),i=(n=c(i)).next();!i.done;i=n.next())i.value.oe(t)}}}(e,t)}function ef(e,t,n,r,i,a,o,s,u,l,c,d,h,f,p){var g,m,v,y,b,x,T,A,S,E,I,k,C,_,M;return L((function(R){if(1==R.g){if(1!=t.type)throw new Ne(2,4,4017);return g=Sh(t.g,"EXT-X-DEFINE"),m=Wh(e,g),af(e,t),p?R.A(2):w(R,function(e,t,n,r,i){var a,o,s,u,l,c,d,h,f,p;return L((function(g){return 1==g.g?(a=Rr,o=Math.trunc((r.segments.length-1)/2),s=df(r.segments[o].i,i),u=new De(s),l=u.qa.split(".").pop(),c=wf[t],(d=c[l])||(d=yf[l])||(d=hf(t,n))?g.return(d):((h=kr([s],e.g.retryParameters)).method="HEAD",w(g,vf(e,h,a),2))):(f=g.h,(p=f.headers["content-type"])?g.return(p.split(";")[0]):g.return(ff(t)))}))}(e,a,i,t,m),3)}if(2!=R.g&&(p=R.h),v=nf(t,p),y=v.drmInfos,b=v.keyIds,x=v.encrypted,T=v.kf,x&&!y.length&&!T)throw new Ne(2,4,4026);return A=gf(e)?e.F.get(a):new Map,S=e.l,E=cf(e,t,a,A,m),S!=e.l&&af(e,t),I=E[E.length-1].endTime,k=new Ts(E),_=!!(C=Ih(t.g,"EXT-X-SERVER-CONTROL"))&&null!=C.getAttribute("CAN-SKIP-UNTIL"),(M=tf(e,i,a,o,s,u,l,c,d,h,f)).segmentIndex=k,M.encrypted=x,M.drmInfos=y,M.keyIds=b,M.mimeType=p,R.return({stream:M,type:a,Ac:n,Jc:r,Ya:I,Mc:_,mc:!1,Cd:-1,$c:A,Ld:!1})}))}function tf(e,t,n,r,i,a,o,s,u,l,c){var d=hf(n,t)||ff(n);return{id:e.Fa++,originalId:a,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:null,mimeType:d,codecs:t,kind:n==tt?"subtitle":void 0,encrypted:!1,drmInfos:[],keyIds:new Set,language:r,label:a,type:n,primary:i,trickModeVideo:null,emsgSchemeIdUris:null,frameRate:void 0,pixelAspectRatio:void 0,width:void 0,height:void 0,bandwidth:void 0,roles:u?u.split(","):[],forced:l,channelsCount:o,audioSamplingRate:null,spatialAudio:c,closedCaptions:s,hdr:void 0,tilesLayout:void 0}}function nf(e,t){var n=[];if(e.segments)for(var r=(e=c(e.segments)).next();!r.done;r=e.next())r=Sh(r.value.g,"EXT-X-KEY"),n.push.apply(n,d(r));r=e=!1;for(var i=[],a=new Set,o=(n=c(n)).next();!o.done;o=n.next()){var s=wh(o=o.value,"METHOD");if("NONE"!=s)if(e=!0,"AES-128"==s)r=!0;else if(s=xh(o,"KEYFORMAT")||"identity",o=(s=Tf[s])?s(o,t):null){if(o.keyIds)for(var u=(s=c(o.keyIds)).next();!u.done;u=s.next())a.add(u.value);i.push(o)}}return{drmInfos:i,keyIds:a,encrypted:e,kf:r}}function rf(t,n,r){if(!e.crypto||!e.crypto.subtle)throw X("Web Crypto API is not available to decrypt AES-128. (Web Crypto only exists in secure origins like https)"),new Ne(2,4,4042);var i=0,a=xh(n,"IV","");if(a){var o=Rt(a.substr(2));if(16!=o.byteLength)throw new Ne(2,4,4043)}else i=kh(r.g,"EXT-X-MEDIA-SEQUENCE");var s=kr([n=Ch(r.h,wh(n,"URI"))],t.g.retryParameters),u={method:"AES-128",iv:o,firstMediaSequenceNumber:i,fetchKey:function(){var n,r,i;return L((function(a){if(1==a.g)return w(a,vf(t,s,6),2);if(3!=a.g){if(!(n=a.h).data||16!=n.data.byteLength)throw new Ne(2,4,4044);return r={name:"AES-CBC"},i=u,w(a,e.crypto.subtle.importKey("raw",n.data,r,!0,["decrypt"]),3)}i.cryptoKey=a.h,u.fetchKey=void 0,T(a)}))}};return u}function af(e,t){var n=Ih(t.g,"EXT-X-PLAYLIST-TYPE"),r=Ih(t.g,"EXT-X-ENDLIST");if(r=n&&"VOD"==n.value||r,n=n&&"EVENT"==n.value&&!r,n=!r&&!n,r)mf(e,Af);else{if(mf(e,n?Ef:Sf),!(r=Ih(t.g,"EXT-X-TARGETDURATION")))throw new Ne(2,4,4024,"EXT-X-TARGETDURATION");r=Number(r.value),n=Ih(t.g,"EXT-X-PART-INF"),e.l&&n?(e.da=Number(wh(n,"PART-TARGET")),e.J=Math.min(e.da,e.J),t=Ih(t.g,"EXT-X-SERVER-CONTROL"),e.V=t?Number(wh(t,"PART-HOLD-BACK")):0):e.J=Math.min(r,e.J),e.ca=Math.max(r,e.ca)}}function of(e){var t=e.g.defaultPresentationDelay?e.g.defaultPresentationDelay:e.V?e.V:e.ca*e.g.hls.liveSegmentsDelay;e.j.Xe(0),e.j.We(t),e.j.yc(!1)}function sf(e,t,n,r){return(n=Ih(n,"EXT-X-MAP"))?(t=[r=df(Ch(t,wh(n,"URI")),r),xh(n,"BYTERANGE","")].join("-"),e.ba.has(t)||(n=function(e,t){var n=0,r=null;(t=xh(t,"BYTERANGE"))&&(n=t.split("@"),r=Number(n[0]),n=Number(n[1]),r=n+r-1);return new go((function(){return[e]}),n,r)}(r,n),e.ba.set(t,n)),e.ba.get(t)):null}function uf(e,t,n,r,i,a,o,s,u){var l=r.g,d=df(r.i,a),h=Ih(l,"EXTINF"),f=a=0,p=null;r.h.length&&!e.l&&X("Low-latency HLS live stream detected, but low-latency streaming mode is not enabled in Shaka Player. Set streaming.lowLatencyMode configuration to true, and see https://bit.ly/3clctcj for details.");var g=null;if(!e.g.hls.ignoreManifestProgramDateTime){var m=Ih(l,"EXT-X-PROGRAM-DATE-TIME");m&&m.value&&(g=fi(m.value))}if(m=vo,Ih(l,"EXT-X-GAP")&&(m=2),!h){if(0==r.h.length)throw new Ne(2,4,4024,"EXTINF");if(!e.l)return null}var v=[];if(e.l)for(var y={},b=0;b<r.h.length;y={pd:y.pd},b++){var x=r.h[b],w=0==b?n:v[v.length-1],T=0==b?i:w.endTime,A=Number(xh(x,"DURATION"))||e.da;if(A){A=T+A;var S=0,E=null;"EXT-X-PRELOAD-HINT"==x.name?S=(S=xh(x,"BYTERANGE-START"))?Number(S):0:(S=(E=c(lf(w,S=xh(x,"BYTERANGE")))).next().value,E=E.next().value),(w=xh(x,"URI"))&&(y.pd=Ch(o,w),w=vo,"YES"==xh(x,"GAP")&&(w=2),v.push(new mo(T,A,function(e){return function(){return[e.pd]}}(y),S,E,t,0,0,1/0,[],"",null,null,w)))}}return a=h?i+Number(h.value.split(",")[0]):v[v.length-1].endTime,(e=Ih(l,"EXT-X-BYTERANGE"))?(f=(p=c(lf(n,e.value))).next().value,p=p.next().value):v.length&&(f=v[0].Ba,p=v[v.length-1].ka),n="",e=null,"image"==s&&(n="1x1",s=Ih(l,"EXT-X-TILES"))&&(n=wh(s,"LAYOUT"),(s=xh(s,"DURATION"))&&(e=Number(s))),new mo(i,a,(function(){return d.length?[d]:[]}),f,p,t,0,0,1/0,v,n,e,g,m,u)}function lf(e,t){var n=0,r=null;return t&&(n=t.split("@"),t=Number(n[0]),r=(n=n[1]?Number(n[1]):e.ka+1)+t-1),[n,r]}function cf(e,t,n,r,i){var a=t.segments,o=void 0,s=kh(t.g,"EXT-X-DISCONTINUITY-SEQUENCE"),u=kh(t.g,"EXT-X-MEDIA-SEQUENCE"),l=Ih(t.g,"EXT-X-SKIP"),d=u+(l=l?Number(xh(l,"SKIPPED-SEGMENTS")):0),h=0;gf(e)&&r.has(d)&&(h=r.get(d));for(var f=[],p=null,g=0;g<a.length;g++){var m=a[g],v=0==g?h:p.endTime;d=u+l+g,Ih(m.g,"EXT-X-DISCONTINUITY")&&s++;for(var y=c(m.g),b=y.next();!b.done;b=y.next())"EXT-X-KEY"==(b=b.value).name&&(o="AES-128"==wh(b,"METHOD")?rf(e,b,t):void 0);r.set(d,v),y=sf(e,t.h,m.g,i),!e.l&&e.i.isAutoLowLatencyMode()&&(e.i.enableLowLatencyMode(),e.l=e.i.isLowLatencyMode()),(p=m=uf(e,y,p,m,v,i,t.h,n,o))&&(m.m=s,e.g.hls.ignoreManifestProgramDateTime&&null!=e.B&&d<e.B||f.push(m))}if(t=f.some((function(e){return null!=e.g})))for(n={},r=0;r<f.length;n={Qb:n.Qb,Pb:n.Pb,Bc:n.Bc,Ta:n.Ta,Ob:n.Ob},r++)if(n.Ta=f[r],null==n.Ta.g)for(n.Pb=0,n.Qb=r,i=function(e){return function(){var t=f[e.Qb];if(t){if(null!=t.g)return t.g+e.Pb;e.Pb-=t.endTime-t.startTime,e.Qb+=1}return null}}(n),n.Ob=0,n.Bc=r,a=function(e){return function(){var t=f[e.Bc];if(t){if(t!=e.Ta&&(e.Ob+=t.endTime-t.startTime),null!=t.g)return t.g+e.Ob;--e.Bc}return null}}(n);null==n.Ta.g;)n.Ta.g=a(),null==n.Ta.g&&(n.Ta.g=i());if(t)for(r=(n=c(f)).next();!r.done;r=n.next())for(r=(i=r.value).g,a=(i=c(i.i)).next();!a.done;a=i.next())(a=a.value).g=r,r+=a.endTime-a.startTime;if(e=e.H,t&&1/0!=e)for(r=(t=c(f)).next();!r.done;r=t.next())r.value.oe(e);return f}function df(e,t){var n=(e=String(e).replace(/%7B/g,"{").replace(/%7D/g,"}")).match(/{\$\w*}/g);if(n)for(var r=(n=c(n)).next();!r.done;r=n.next()){var i=(r=r.value).slice(2,r.length-1),a=t.get(i);if(!a)throw new Ne(2,4,4039,i);e=e.replace(r,a)}return e}function hf(e,t){if(e==tt){if("vtt"==t||"wvtt"==t)return"text/vtt";if(t&&""!==t)return"application/mp4"}return"image"!=e||t&&"jpeg"!=t?"audio"==e&&"mp4a.40.34"==t?"audio/mpeg":null:"image/jpeg"}function ff(e){return e==tt?"text/vtt":wf[e].mp4}function pf(e,t){return t=kr([t],e.g.retryParameters),e.i.modifyManifestRequest(t,{format:"h"}),vf(e,t,0)}function gf(e){return e.ia!=Af}function mf(e,t){e.ia=t,e.j&&e.j.yc(!gf(e)),gf(e)||e.m.stop()}function vf(e,t,n){if(!e.G)throw new Ne(2,7,7001);return t=e.i.networkingEngine.request(n,t),Sr(e.G,t),t.promise}z("shaka.net.DataUriPlugin",Bh),Bh.parse=jh,Ir("data",jh),(i=zh.prototype).configure=function(e){this.g=e},i.start=function(e,t){var n,r=this;return L((function(i){return 1==i.g?(r.i=t,r.l=t.isLowLatencyMode(),w(i,pf(r,e),2)):3!=i.g?(n=i.h,r.M=n.uri,w(i,function(e,t,n){var r,i,a,o,s,u,l,d,h,f,p,g,m,v,y,b,x,S,E,k,C,_,M,R,N,D,P,O,U,B,j;return L((function(F){switch(F.g){case 1:r=Dh(e.W,t,e.M);for(var z=c(Sh(r.g,"EXT-X-DEFINE")),G=z.next();!G.done;G=z.next()){var V=G.value;G=xh(V,"NAME"),V=xh(V,"VALUE"),G&&V&&(e.o.has(G)||e.o.set(G,V))}if(i=[],a=[],o=[],1==r.type)return E=e.g.hls.mediaPlaylistFullMimeType,r.segments.length&&(k=new De(r.segments[0].i),C=k.qa.split(".").pop(),(_=yf[C])?E=_:"ts"!==C&&"mp4"!==C&&(bf[C]?(_=bf[C],M=e.g.hls.defaultAudioCodec,E=_+'; codecs="'+M+'"'):xf[C]&&(_=xf[C],R=e.g.hls.defaultVideoCodec,E=_+'; codecs="'+R+'"'))),N=E.split(";")[0],D=N.split("/")[0],P=Wt(E),O=new Map,w(F,ef(e,r,n,n,P,D,"",!0,"Media Playlist",null,O,null,!1,!1,N),5);for(s=Sh(r.g,"EXT-X-MEDIA"),u=Sh(r.g,"EXT-X-STREAM-INF"),l=Sh(r.g,"EXT-X-IMAGE-STREAM-INF"),d=Sh(r.g,"EXT-X-SESSION-KEY"),G=(z=c(u)).next();!G.done;G=z.next()){var K=G.value;V=xh(K,"AUDIO"),G=xh(K,"VIDEO");var H=xh(K,"SUBTITLES");if(K=Xh(e,K),H){var W=et(tt,K);e.s.set(H,W),ne(K,W)}V&&((H=et("audio",K))||(H=e.g.hls.defaultAudioCodec),e.s.set(V,H)),G&&((V=et("video",K))||(V=e.g.hls.defaultVideoCodec),e.s.set(G,V))}for(h=Sh(r.g,"EXT-X-SESSION-DATA"),f=c(h),p=f.next();!p.done;p=f.next())g=p.value,m=xh(g,"DATA-ID"),v=xh(g,"URI"),y=xh(g,"LANGUAGE"),b=xh(g,"VALUE"),x=(new Map).set("id",m),v&&x.set("uri",Ch(e.M,v)),y&&x.set("language",y),b&&x.set("value",b),S=new vr("sessiondata",x),e.i&&e.i.onEvent(S);for(function(e,t){t=t.filter((function(e){var t=xh(e,"URI")||"";return"SUBTITLES"!=xh(e,"TYPE")&&""!=t}));for(var n=(t=c(t)).next();!n.done;n=t.next())Yh(e,n.value)}(e,s),G=(z=c(z=Eh(s,"CLOSED-CAPTIONS"))).next();!G.done;G=z.next())G=qh(H=G.value),V=wh(H,"GROUP-ID"),H=wh(H,"INSTREAM-ID"),e.L.get(V)||e.L.set(V,new Map),e.L.get(V).set(H,G);return i=function(e,t,n){var r=[],i=new Set;if(0<n.length)for(var a=(n=c(n)).next();!a.done;a=n.next()){var o=wh(a=a.value,"METHOD");if("NONE"!=o&&"AES-128"!=o&&(o=xh(a,"KEYFORMAT")||"identity",a=(o=Tf[o])?o(a,""):null)){if(a.keyIds)for(var s=(o=c(a.keyIds)).next();!s.done;s=o.next())i.add(s.value);r.push(a)}}return t=t.map((function(t){var n=xh(t,"FRAME-RATE"),a=Number(xh(t,"AVERAGE-BANDWIDTH"))||Number(wh(t,"BANDWIDTH")),o=xh(t,"RESOLUTION"),s=(o=c(o?o.split("x"):[null,null])).next().value,u=o.next().value,l=xh(t,"VIDEO-RANGE");t=function(e,t){var n=Xh(e,t),r=xh(t,"AUDIO"),i=xh(t,"VIDEO"),a=r||i;a=a&&e.u.has(a)?e.u.get(a):[],r={audio:r?a:[],video:i?a:[]},i=!1;var o=wh(t,"URI"),s=r.audio.find((function(e){return e&&e.Ac==o})),u=et("video",n),l=et("audio",n);return l&&!u?a="audio":!a.length&&l&&u?(a="video",n=[[u,l].join()]):r.audio.length&&s?(a="audio",i=!0):a=r.video.length&&!r.audio.length?"audio":"video",i||(e=function(e,t,n,r){var i=df(wh(t,"URI"),e.o);return e.h.has(i)?e.h.get(i):(t=xh(t,"CLOSED-CAPTIONS"),t="video"==r&&t&&"NONE"!=t?e.L.get(t):null,n=Ze(r,n),r=$h(e,i,n,r,"und",!1,null,null,t,null,!1,!1),e.h.has(i)?e.h.get(i):(e.h.set(i,r),r))}(e,t,n,a),r[e.stream.type]=[e]),r}(e,t),o=t.audio;for(var d=c(t=t.video),h=d.next();!h.done;h=d.next())(h=h.value.stream)&&(h.width=Number(s)||void 0,h.height=Number(u)||void 0,h.frameRate=Number(n)||void 0,h.hdr=l||void 0);for(n=e.g.disableAudio,o.length&&!n||(o=[null]),n=e.g.disableVideo,t.length&&!n||(t=[null]),n=[],s=(o=c(o)).next();!s.done;s=o.next())for(s=s.value,l=(u=c(t)).next();!l.done;l=u.next()){var f=l.value;(l=s?s.stream:null)&&(l.drmInfos=r,l.keyIds=i),(d=f?f.stream:null)&&(d.drmInfos=r,d.keyIds=i),h=s?s.stream.drmInfos:null;var p=f?f.stream.drmInfos:null;f=(f?f.Ac:"")+" - "+(s?s.Ac:""),l&&d&&h.length&&p.length&&!(0<Bi(h,p).length)||e.ua.has(f)||(l={id:e.Fa++,language:l?l.language:"und",primary:!!l&&l.primary||!!d&&d.primary,audio:l,video:d,bandwidth:a,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]},n.push(l),e.ua.add(f))}return n})).reduce(qe,[]),t=t.filter((function(e){return null!=e}))}(e,u,d),a=function(e,t){var n=Eh(t,"SUBTITLES");t=n.map((function(t){if(e.g.disableText)return null;try{return Yh(e,t).stream}catch(o){if(e.g.hls.ignoreTextStreamFailures)return null;throw o}}));for(var r=(n=c(n)).next();!r.done;r=n.next()){var i=wh(r.value,"GROUP-ID");if((r=e.s.get(i))&&(i=e.u.get(i)))for(var a=(i=c(i)).next();!a.done;a=i.next())(a=a.value).stream.codecs=r,a.stream.mimeType=hf(tt,r)||ff(tt)}return t.filter((function(e){return e}))}(e,s),w(F,function(e,t){var n,r;return L((function(i){return 1==i.g?(n=t.map((function(t){var n,r;return L((function(i){if(1==i.g)return e.g.disableThumbnails?i.return(null):(A(i,2),w(i,function(e,t){var n,r,i,a,o,s,u,l,c,d;return L((function(h){return 1==h.g?(n=df(wh(t,"URI"),e.o),r=xh(t,"CODECS","jpeg")||"",e.h.has(n)?h.return(e.h.get(n)):(i=qh(t),a=xh(t,"NAME"),o=xh(t,"CHARACTERISTICS"),s=$h(e,n,r,"image",i,!1,a,null,null,o,!1,!1),e.h.has(n)?h.return(e.h.get(n)):(u=xh(t,"RESOLUTION"))?w(h,s.stream.createSegmentIndex(),3):h.A(2))):(2!=h.g&&(l=s.stream.segmentIndex.get(0),c=l.tilesLayout)&&(s.stream.width=Number(u.split("x")[0])*Number(c.split("x")[0]),s.stream.height=Number(u.split("x")[1])*Number(c.split("x")[1])),(d=xh(t,"BANDWIDTH"))&&(s.stream.bandwidth=Number(d)),e.h.set(n,s),h.return(s))}))}(e,t),4));if(2!=i.g)return n=i.h,i.return(n.stream);if(r=I(i),e.g.hls.ignoreImageStreamFailures)return i.return(null);throw r}))})),w(i,Promise.all(n),2)):(r=i.h,i.return(r.filter((function(e){return e}))))}))}(e,l),4);case 4:o=F.h,F.A(3);break;case 5:U=F.h,e.h.set(n,U),i.push({id:0,language:"und",disabledUntilTime:0,primary:!0,audio:"audio"==D?U.stream:null,video:"video"==D?U.stream:null,bandwidth:0,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]});case 3:if(!e.i)throw new Ne(2,7,7001);e.j=new ns(null,0),e.j.yc(!0),1==r.type&&(gf(e)&&(of(e),B=e.O,e.m.N(B)),j=Array.from(e.h.values()),Zh(e,j),Hh(e)),e.D={presentationTimeline:e.j,variants:i,textStreams:a,imageStreams:o,offlineSessionIds:[],minBufferTime:0,sequenceMode:!0},e.i.makeTextStreamsForClosedCaptions(e.D),T(F)}}))}(r,n.data,e),3)):i.return(r.D)}))},i.stop=function(){this.m&&(this.m.stop(),this.m=null);var e=[];return this.G&&(e.push(this.G.destroy()),this.G=null),this.g=this.i=null,this.ua.clear(),this.D=null,this.h.clear(),this.u.clear(),this.s.clear(),this.o.clear(),Promise.all(e)},i.update=function(){var e,t,n,r,i,a,o,s,u=this;return L((function(l){if(1==l.g){if(!gf(u))return l.return();for(e=[],t=Array.from(u.h.values()),n=t.filter((function(e){return e.stream.segmentIndex})),r=c(n),i=r.next();!i.done;i=r.next())a=i.value,e.push(Vh(u,a));return w(l,Promise.all(e),2)}Jh(u,n.map((function(e){return e.stream}))),o=n.some((function(e){return 0==e.mc})),n.length&&!o&&(mf(u,If.ff),s=t.map((function(e){return e.Ya})),u.j.Aa(Math.min.apply(Math,d(s))),u.i.updateDuration()),T(l)}))},i.onExpirationUpdated=function(){},z("shaka.hls.HlsParser",zh);var yf={aac:"audio/aac",ac3:"audio/ac3",ec3:"audio/ec3",mp3:"audio/mpeg"},bf={mp4:"audio/mp4",mp4a:"audio/mp4",m4s:"audio/mp4",m4i:"audio/mp4",m4a:"audio/mp4",m4f:"audio/mp4",cmfa:"audio/mp4",ts:"video/mp2t"},xf={mp4:"video/mp4",mp4v:"video/mp4",m4s:"video/mp4",m4i:"video/mp4",m4v:"video/mp4",m4f:"video/mp4",cmfv:"video/mp4",ts:"video/mp2t"},wf={audio:bf,video:xf,text:{mp4:"application/mp4",m4s:"application/mp4",m4i:"application/mp4",m4f:"application/mp4",cmft:"application/mp4",vtt:"text/vtt",webvtt:"text/vtt",ttml:"application/ttml+xml"},image:{jpg:"image/jpeg",png:"image/png",svg:"image/svg+xml",webp:"image/webp",avif:"image/avif"}},Tf={"com.apple.streamingkeydelivery":function(t,n){if("video/mp2t"==n)throw new Ne(2,4,4040);if(e.shakaMediaKeysPolyfill)throw new Ne(2,4,4041);return Je("com.apple.fps",[{initDataType:"sinf",initData:new Uint8Array(0),keyId:null}])},"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":function(e){var t=wh(e,"METHOD");return["SAMPLE-AES","SAMPLE-AES-CTR"].includes(t)?(t=Je("com.widevine.alpha",[{initDataType:"cenc",initData:t=_e((t=Fh(t=wh(e,"URI"))).data)}]),(e=xh(e,"KEYID"))&&(t.keyIds=new Set([e.toLowerCase().substr(2)])),t):null},"com.microsoft.playready":function(e){var t=wh(e,"METHOD");return["SAMPLE-AES","SAMPLE-AES-CTR"].includes(t)?Je("com.microsoft.playready",[{initDataType:"cenc",initData:e=ri(e=_e((e=Fh(e=wh(e,"URI"))).data),t=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]),new Set,0)}]):null},identity:function(e){return e=wh(e,"METHOD"),["SAMPLE-AES","SAMPLE-AES-CTR"].includes(e)?Je("org.w3.clearkey",null):null}},Af="VOD",Sf="EVENT",Ef="LIVE",If={ff:Af,Pg:Sf,Ug:Ef};function kf(e,t,n,r,i,a){if(200<=n&&299>=n&&202!=n)return{uri:i||r,Oe:r,data:t,status:n,headers:e,fromCache:!!e["x-shaka-from-cache"]};i=null;try{i=At(t)}catch(o){}throw new Ne(401==n||403==n?2:1,1,1001,r,n,i,e,a)}function Cf(){}function _f(e,t,n,r,i){var a=new Pf;Fr(t.headers).forEach((function(e,t){a.append(t,e)}));var o=new Lf,s={ye:!1,bf:!1};if(e=function(e,t,n,r,i,a,o){var s,u,l,c,d,h,f,p,g,m,v,y;return L((function(b){switch(b.g){case 1:return s=Nf,u=Df,h=d=0,f=Date.now(),A(b,2),w(b,s(e,n),4);case 4:return l=b.h,a(Mf(l.headers)),p=l.clone().body.getReader(),m=(g=l.headers.get("Content-Length"))?parseInt(g,10):0,new u({start:function(e){function t(){var n,r;return L((function(a){switch(a.g){case 1:return A(a,2),w(a,p.read(),4);case 4:n=a.h,E(a,3);break;case 2:return I(a),a.return();case 3:if(n.done){a.A(5);break}if(d+=n.value.byteLength,!o){a.A(5);break}return w(a,o(n.value),5);case 5:(100<(r=Date.now())-f||n.done)&&(i(r-f,d-h,m-d),h=d,f=r),n.done?e.close():(e.enqueue(n.value),t()),T(a)}}))}t()}}),w(b,l.arrayBuffer(),5);case 5:c=b.h,E(b,3);break;case 2:if(v=I(b),r.ye)throw new Ne(1,1,7001,e,t);if(r.bf)throw new Ne(1,1,1003,e,t);throw new Ne(1,1,1002,e,v,t);case 3:return y=Mf(l.headers),b.return(kf(y,c,l.status,e,l.url,t))}}))}(e,n,{body:t.body||void 0,headers:a,method:t.method,signal:o.signal,credentials:t.allowCrossSiteCredentials?"include":void 0},s,r,i,t.streamDataCallback),e=new dr(e,(function(){return s.ye=!0,o.abort(),Promise.resolve()})),t=t.retryParameters.timeout){var u=new st((function(){s.bf=!0,o.abort()}));u.N(t/1e3),e.finally((function(){u.stop()}))}return e}function Mf(e){var t={};return e.forEach((function(e,n){t[n.trim()]=e})),t}function Rf(){if(!e.ReadableStream)return!1;try{new ReadableStream({})}catch(Vv){return!1}return!(!e.fetch||!e.AbortController)}mt("Tizen 3")||mt("Tizen 2")||ht()||(Ji.m3u8=function(){return new zh},Qi["application/x-mpegurl"]=function(){return new zh},Qi["application/vnd.apple.mpegurl"]=function(){return new zh}),z("shaka.net.HttpFetchPlugin",Cf),Cf.isSupported=Rf,Cf.parse=_f;var Nf=e.fetch,Lf=e.AbortController,Df=e.ReadableStream,Pf=e.Headers;function Of(){}function Uf(e,t,n,r,i){var a=new jf,o=Date.now(),s=0;return new dr(new Promise((function(u,l){a.open(t.method,e,!0),a.responseType="arraybuffer",a.timeout=t.retryParameters.timeout,a.withCredentials=t.allowCrossSiteCredentials,a.onabort=function(){l(new Ne(1,1,7001,e,n))};var c=!1;for(var d in a.onreadystatechange=function(){if(2==a.readyState&&!c){var e=Bf(a);i(e),c=!0}},a.onload=function(){var t=Bf(a),r=a.response;try{var i=kf(t,r,a.status,e,a.responseURL,n);u(i)}catch(o){l(o)}},a.onerror=function(t){l(new Ne(1,1,1002,e,t,n))},a.ontimeout=function(){l(new Ne(1,1,1003,e,n))},a.onprogress=function(e){var t=Date.now();(100<t-o||e.lengthComputable&&e.loaded==e.total)&&(r(t-o,e.loaded-s,e.total-e.loaded),s=e.loaded,o=t)},t.headers)a.setRequestHeader(d.toLowerCase(),t.headers[d]);a.send(t.body)})),(function(){return a.abort(),Promise.resolve()}))}function Bf(e){var t=e.getAllResponseHeaders().trim().split("\r\n");e={};for(var n=(t=c(t)).next();!n.done;n=t.next())e[(n=n.value.split(": "))[0].toLowerCase()]=n.slice(1).join(": ");return e}Rf()&&(Ir("http",_f,2,!0),Ir("https",_f,2,!0),Ir("blob",_f,2,!0)),z("shaka.net.HttpXHRPlugin",Of),Of.parse=Uf;var jf=e.XMLHttpRequest;function Ff(e,t,n,r){this.g=e,this.i=t,this.groupId=n,this.h=r}function zf(e){return e.ya().map((function(e){return"{"+encodeURI(e)+"}"})).join("")+":"+e.Ba+":"+e.ka}function Gf(e,t){return Bs(e.g.ya(),e.g.Ba,e.g.ka,t.streaming.retryParameters)}function Vf(){this.h=this.j=this.i=0,this.g=new Map,this.l=0}function Kf(e,t){e.i+=t;var n=e.l;return e.l++,e.g.set(n,t),n}function Hf(e){var t=this;this.o=e,this.j=new Map,this.i=new Dr((function(){return Wf(t).catch((function(){}))})),this.h=[],this.m=function(){},this.l=function(){},this.g=new Vf}function Wf(e){var t=e.h.map((function(e){return e()}));return e.h=[],Promise.all(t)}function Xf(e,t,n,r,i,a){Pr(e.i);var o=(e.j.get(t)||Promise.resolve()).then((function(){var t,o,s,u,l,c,d;return L((function(h){if(1==h.g)return w(h,function(e,t){var n,r,i,a;return L((function(o){return 1==o.g?(n=Rr,r=e.o.request(n,t),i=function(){return r.abort()},e.h.push(i),w(o,r.promise,2)):(a=o.h,ne(e.h,i),o.return(a.data))}))}(e,n),2);if(t=h.h,e.i.g)throw new Ne(2,9,7001);if(i)for(u in o=_e(t),(s=new ni(o)).data)l=Number(u),c=s.data[l],d=s.g[l],e.l(c,d);e.g.close(r,t.byteLength);var f=e.g;return e.m(0==f.i?0:f.j/f.i,e.g.h),h.return(a(t))}))}));e.j.set(t,o)}function qf(e,t){var n=this;this.i=e,this.h=e.objectStore(t),this.g=new it,e.onabort=function(e){e.preventDefault(),n.g.reject()},e.onerror=function(e){e.preventDefault(),n.g.reject()},e.oncomplete=function(){n.g.resolve()}}function Yf(e,t){return new Promise((function(n,r){var i=e.h.openCursor();i.onerror=r,i.onsuccess=function(){var e;return L((function(r){if(1==r.g)return null==i.result?(n(),r.return()):(e=i.result,w(r,t(e.key,e.value,e),2));e.continue(),T(r)}))}}))}function $f(e){this.h=e,this.g=[]}function Qf(e,t){return Jf(e,t,"readwrite")}function Jf(e,t,n){var r=new qf(n=e.h.transaction([t],n),t);return e.g.push(r),r.promise().then((function(){ne(e.g,r)}),(function(){ne(e.g,r)})),r}function Zf(e,t,n){this.h=new $f(e),this.i=t,this.g=n}function ep(e){return Promise.reject(new Ne(2,9,9011,"Cannot add new value to "+e))}function tp(e,t,n,r){t=(e=Qf(e.h,t)).store();for(var i={},a=(n=c(n)).next();!a.done;i={Ec:i.Ec},a=n.next())i.Ec=a.value,t.delete(i.Ec).onsuccess=function(e){return function(){return r(e.Ec)}}(i);return e.promise()}function np(e,t,n){var r,i,a,o,s,u,l;return L((function(d){if(1==d.g){for(r=Jf(e.h,t,"readonly"),i=r.store(),a={},o=[],s={},u=c(n),l=u.next();!l.done;s={Vb:s.Vb,Tb:s.Tb},l=u.next())s.Tb=l.value,s.Vb=i.get(s.Tb),s.Vb.onsuccess=function(e){return function(){null==e.Vb.result&&o.push(e.Tb),a[e.Tb]=e.Vb.result}}(s);return w(d,r.promise(),2)}if(o.length)throw new Ne(2,9,9012,"Could not find values for "+o);return d.return(n.map((function(e){return a[e]})))}))}function rp(e){this.g=new $f(e)}function ip(){this.g=new Map}function ap(e){var t=null;if(e.g.forEach((function(e,n){e.getCells().forEach((function(e,r){e.hasFixedKeySpace()||t||(t={path:{za:n,ja:r},ja:e})}))})),t)return t;throw new Ne(2,9,9013,"Could not find a cell that supports add-operations")}function op(e,t,n){if(!(e=e.g.get(t)))throw new Ne(2,9,9013,"Could not find mechanism with name "+t);if(!(t=e.getCells().get(n)))throw new Ne(2,9,9013,"Could not find cell with name "+n);return t}function sp(e,t){up.set(e,t)}Ir("http",Uf,1,!0),Ir("https",Uf,1,!0),Ir("blob",Uf,1,!0),Vf.prototype.close=function(e,t){if(this.g.has(e)){var n=this.g.get(e);this.g.delete(e),this.j+=n,this.h+=t}},Hf.prototype.destroy=function(){return this.i.destroy()},qf.prototype.abort=function(){var e=this;return L((function(t){if(1==t.g){try{e.i.abort()}catch(n){}return A(t,2),w(t,e.g,4)}if(2!=t.g)return E(t,0);I(t),T(t)}))},qf.prototype.store=function(){return this.h},qf.prototype.promise=function(){return this.g},$f.prototype.destroy=function(){return Promise.all(this.g.map((function(e){return e.abort()})))},(i=Zf.prototype).destroy=function(){return this.h.destroy()},i.hasFixedKeySpace=function(){return!0},i.addSegments=function(){return ep(this.i)},i.removeSegments=function(e,t){return tp(this,this.i,e,t)},i.getSegments=function(e){var t,n=this;return L((function(r){return 1==r.g?w(r,np(n,n.i,e),2):(t=r.h,r.return(t.map((function(e){return n.ze(e)}))))}))},i.addManifests=function(){return ep(this.g)},i.updateManifest=function(){return Promise.reject(new Ne(2,9,9016,"Cannot modify values in "+this.g))},i.updateManifestExpiration=function(e,t){var n=Qf(this.h,this.g),r=n.store();return r.get(e).onsuccess=function(n){(n=n.target.result)&&(n.expiration=t,r.put(n,e))},n.promise()},i.removeManifests=function(e,t){return tp(this,this.g,e,t)},i.getManifests=function(e){var t,n=this;return L((function(r){return 1==r.g?w(r,np(n,n.g,e),2):(t=r.h,r.return(Promise.all(t.map((function(e){return n.bc(e)})))))}))},i.getAllManifests=function(){var e,t,n=this;return L((function(r){return 1==r.g?(e=Jf(n.h,n.g,"readonly"),t=new Map,w(r,Yf(e,(function(e,r){var i;return L((function(a){if(1==a.g)return w(a,n.bc(r),2);i=a.h,t.set(e,i),T(a)}))})),2)):3!=r.g?w(r,e.promise(),3):r.return(t)}))},i.ze=function(e){return e},i.bc=function(e){return Promise.resolve(e)},i.add=function(e,t){var n,r,i,a,o,s,u,l=this;return L((function(d){if(1==d.g){for(n=Qf(l.h,e),r=n.store(),i=[],a={},o=c(t),s=o.next();!s.done;a={Fc:a.Fc},s=o.next())u=s.value,a.Fc=r.add(u),a.Fc.onsuccess=function(e){return function(){i.push(e.Fc.result)}}(a);return w(d,n.promise(),2)}return d.return(i)}))},rp.prototype.destroy=function(){return this.g.destroy()},rp.prototype.getAll=function(){var e,t,n=this;return L((function(r){return 1==r.g?(e=Jf(n.g,"session-ids","readonly"),t=[],w(r,Yf(e,(function(e,n){t.push(n)})),2)):3!=r.g?w(r,e.promise(),3):r.return(t)}))},rp.prototype.add=function(e){for(var t=Qf(this.g,"session-ids"),n=t.store(),r=(e=c(e)).next();!r.done;r=e.next())n.add(r.value);return t.promise()},rp.prototype.remove=function(e){var t,n=this;return L((function(r){return 1==r.g?w(r,Yf(t=Qf(n.g,"session-ids"),(function(t,n,r){e.includes(n.sessionId)&&r.delete()})),2):w(r,t.promise(),0)}))},ip.prototype.destroy=function(){for(var e=[],t=c(this.g.values()),n=t.next();!n.done;n=t.next())e.push(n.value.destroy());return this.g.clear(),Promise.all(e)},ip.prototype.init=function(){var e=this;up.forEach((function(t,n){(t=t())&&e.g.set(n,t)}));for(var t=[],n=c(this.g.values()),r=n.next();!r.done;r=n.next())t.push(r.value.init());return Promise.all(t)},z("shaka.offline.StorageMuxer",ip),ip.unregister=function(e){up.delete(e)},ip.register=sp,ip.prototype.destroy=ip.prototype.destroy;var up=new Map;function lp(){Zf.apply(this,arguments)}function cp(e,t){!function(e){var t=e.streams.filter((function(e){return"audio"==e.contentType}));if(e=e.streams.filter((function(e){return"video"==e.contentType})),!t.every((function(e){return e.variantIds}))||!e.every((function(e){return e.variantIds}))){for(var n=c(t),r=n.next();!r.done;r=n.next())r.value.variantIds=[];for(r=(n=c(e)).next();!r.done;r=n.next())r.value.variantIds=[];if(n=0,e.length&&!t.length){var i=n++,a=c(e);for(r=a.next();!r.done;r=a.next())r.value.variantIds.push(i)}if(!e.length&&t.length)for(i=n++,r=(a=c(t)).next();!r.done;r=a.next())r.value.variantIds.push(i);if(e.length&&t.length)for(r=(t=c(t)).next();!r.done;r=t.next())for(r=r.value,a=(i=c(e)).next();!a.done;a=i.next()){a=a.value;var o=n++;r.variantIds.push(o),a.variantIds.push(o)}}}(e);for(var n=c(e.streams),r=n.next();!r.done;r=n.next());return e.streams.map((function(n){return function(e,t,n){var r=e.initSegmentUri?dp(e.initSegmentUri):null,i=t+e.presentationTimeOffset,a=t+n;return{id:e.id,originalId:null,primary:e.primary,type:e.contentType,mimeType:e.mimeType,codecs:e.codecs,frameRate:e.frameRate,pixelAspectRatio:void 0,hdr:void 0,kind:e.kind,language:e.language,label:e.label,width:e.width,height:e.height,initSegmentKey:r,encrypted:e.encrypted,keyIds:new Set([e.keyId]),segments:e.segments.map((function(e){var n=dp(e.uri);return{startTime:t+e.startTime,endTime:t+e.endTime,dataKey:n,initSegmentKey:r,appendWindowStart:t,appendWindowEnd:a,timestampOffset:i,tilesLayout:""}})),variantIds:e.variantIds,roles:[],forced:!1,audioSamplingRate:null,channelsCount:null,spatialAudio:!1,closedCaptions:null,tilesLayout:void 0}}(n,e.startTime,t)}))}function dp(e){var t;if((t=/^offline:[0-9]+\/[0-9]+\/([0-9]+)$/.exec(e))||(t=/^offline:segment\/([0-9]+)$/.exec(e)))return Number(t[1]);throw new Ne(2,9,9004,"Could not parse uri "+e)}function hp(){Zf.apply(this,arguments)}function fp(e,t,n){return{id:e.id,originalId:e.originalId,primary:e.primary,type:e.contentType,mimeType:e.mimeType,codecs:e.codecs,frameRate:e.frameRate,pixelAspectRatio:e.pixelAspectRatio,hdr:void 0,kind:e.kind,language:e.language,label:e.label,width:e.width,height:e.height,encrypted:e.encrypted,keyIds:new Set([e.keyId]),segments:e.segments.map((function(r){return{startTime:t+r.startTime,endTime:t+r.endTime,initSegmentKey:e.initSegmentKey,appendWindowStart:t,appendWindowEnd:n,timestampOffset:t-e.presentationTimeOffset,dataKey:r.dataKey,tilesLayout:""}})),variantIds:e.variantIds,roles:[],forced:!1,audioSamplingRate:null,channelsCount:null,spatialAudio:!1,closedCaptions:null,tilesLayout:void 0}}function pp(){Zf.apply(this,arguments)}function gp(){this.m=this.j=this.i=this.h=this.g=this.l=null}function mp(e,t,n,r){this.g=e,this.i=t,this.h=n,this.l=r,this.j=["offline:",e,"/",t,"/",n,"/",r].join("")}function vp(e){if(null==(e=/^offline:([a-z]+)\/([^/]+)\/([^/]+)\/([0-9]+)$/.exec(e)))return null;var t=e[1];if("manifest"!=t&&"segment"!=t)return null;var n=e[2];if(!n)return null;var r=e[3];return r&&null!=t?new mp(t,n,r,Number(e[4])):null}function yp(e,t){this.h=e,this.g=t}function bp(e,t){var n=new ns(null,0);n.Aa(t.duration);var r=t.streams.filter((function(e){return"audio"==e.type})),i=t.streams.filter((function(e){return"video"==e.type}));r=function(e,t,n,r){for(var i=new Set,a=c(t),o=a.next();!o.done;o=a.next()){var s=c(o.value.variantIds);for(o=s.next();!o.done;o=s.next())i.add(o.value)}for(a=c(n),o=a.next();!o.done;o=a.next())for(s=c(o.value.variantIds),o=s.next();!o.done;o=s.next())i.add(o.value);for(a=new Map,i=c(i),o=i.next();!o.done;o=i.next())o=o.value,a.set(o,{id:o,language:"",disabledUntilTime:0,primary:!1,audio:null,video:null,bandwidth:0,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]});for(t=c(t),i=t.next();!i.done;i=t.next())for(i=i.value,o=xp(e,i,r),s=c(i.variantIds),i=s.next();!i.done;i=s.next())(i=a.get(i.value)).language=o.language,i.primary=i.primary||o.primary,i.audio=o;for(n=c(n),t=n.next();!t.done;t=n.next())for(i=t.value,t=xp(e,i,r),o=c(i.variantIds),i=o.next();!i.done;i=o.next())(i=a.get(i.value)).primary=i.primary||t.primary,i.video=t;return a}(e,r,i,n),i=t.streams.filter((function(e){return e.type==tt})).map((function(t){return xp(e,t,n)}));var a=t.streams.filter((function(e){return"image"==e.type})).map((function(t){return xp(e,t,n)})),o=t.drmInfo?[t.drmInfo]:[];if(t.drmInfo)for(var s=c(r.values()),u=s.next();!u.done;u=s.next())(u=u.value).audio&&u.audio.encrypted&&(u.audio.drmInfos=o),u.video&&u.video.encrypted&&(u.video.drmInfos=o);return{presentationTimeline:n,minBufferTime:2,offlineSessionIds:t.sessionIds,variants:Array.from(r.values()),textStreams:i,imageStreams:a,sequenceMode:t.sequenceMode||!1}}function xp(e,t,n){var r=t.segments.map((function(t){return function(e,t){var n=new mp("segment",e.h,e.g,t.dataKey);return new mo(t.startTime,t.endTime,(function(){return[n.toString()]}),0,null,null!=t.initSegmentKey?function(e,t){var n=new mp("segment",e.h,e.g,t);return new go((function(){return[n.toString()]}),0,null)}(e,t.initSegmentKey):null,t.timestampOffset,t.appendWindowStart,t.appendWindowEnd,[],t.tilesLayout||"")}(e,t)}));return n.Ib(r),{id:t.id,originalId:t.originalId,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new Ts(r),mimeType:t.mimeType,codecs:t.codecs,width:t.width||void 0,height:t.height||void 0,frameRate:t.frameRate,pixelAspectRatio:t.pixelAspectRatio,hdr:t.hdr,kind:t.kind,encrypted:t.encrypted,drmInfos:[],keyIds:t.keyIds,language:t.language,label:t.label,type:t.type,primary:t.primary,trickModeVideo:null,emsgSchemeIdUris:null,roles:t.roles,forced:t.forced,channelsCount:t.channelsCount,audioSamplingRate:t.audioSamplingRate,spatialAudio:t.spatialAudio,closedCaptions:t.closedCaptions,tilesLayout:t.tilesLayout}}function wp(){this.g=null}function Tp(){}function Ap(e){var t=vp(e);return t&&"manifest"==t.g?e=pr(e={uri:e,Oe:e,data:new ArrayBuffer(0),headers:{"content-type":"application/x-offline-manifest"}}):e=t&&"segment"==t.g?function(e,t){var n=new ip;return pr(void 0).Y((function(){return n.init()})).Y((function(){return op(n,t.za(),t.ja())})).Y((function(e){return e.getSegments([t.key()])})).Y((function(e){return{uri:t,data:e[0].data,headers:{}}})).finally((function(){return n.destroy()}))}(t.key(),t):hr(new Ne(2,1,9004,e)),e}function Sp(e,t,n){var r,i,a,o,s,u;return L((function(l){switch(l.g){case 1:r=[];for(var d=[],h=c(n),f=h.next();!f.done;f=h.next()){f=f.value;for(var p=!1,g=c(d),m=g.next();!m.done;m=g.next())if(Ep((m=m.value).info,f)){m.sessionIds.push(f.sessionId),p=!0;break}p||d.push({info:f,sessionIds:[f.sessionId]})}i=c(d),a=i.next();case 2:if(a.done){l.A(4);break}return o=a.value,s=function(e,t,n){var r,i;return L((function(a){switch(a.g){case 1:return r=new Si({kb:t,onError:function(){},cd:function(){},onExpirationUpdated:function(){},onEvent:function(){}}),A(a,2),r.configure(e),w(a,function(e,t,n,r,i,a){var o=new Map;return(i={audioCapabilities:i,videoCapabilities:a,distinctiveIdentifier:"optional",persistentState:"required",sessionTypes:["persistent-license"],label:t}).drmInfos=[{keySystem:t,licenseServerUri:n,distinctiveIdentifierRequired:!1,persistentStateRequired:!0,audioRobustness:"",videoRobustness:"",serverCertificate:r,serverCertificateUri:"",initData:null,keyIds:null}],o.set(t,i),Li(e,o,[])}(r,n.info.keySystem,n.info.licenseUri,n.info.serverCertificate,n.info.audioCapabilities,n.info.videoCapabilities),4);case 4:E(a,3);break;case 2:return I(a),w(a,r.destroy(),5);case 5:case 9:return a.return([]);case 3:return A(a,6),w(a,Ci(r),8);case 8:E(a,7);break;case 6:return I(a),w(a,r.destroy(),9);case 7:return i=[],w(a,Promise.all(n.sessionIds.map((function(e){return L((function(t){return 1==t.g?(A(t,2),w(t,function(e,t){var n,r,i;return L((function(a){return 1==a.g?w(a,Di(e,t),2):3!=a.g?(n=a.h)?(r=[],(i=e.i.get(n))&&(i.Ja=new it,r.push(i.Ja)),r.push(n.remove()),w(a,Promise.all(r),3)):a.return():(e.i.delete(n),void T(a))}))}(r,e),4)):2!=t.g?(i.push(e),E(t,0)):(I(t),void T(t))}))}))),10);case 10:return w(a,r.destroy(),11);case 11:return a.return(i)}}))}(e,t,o),w(l,s,5);case 5:u=l.h,r=r.concat(u),a=i.next(),l.A(2);break;case 4:return l.return(r)}}))}function Ep(e,t){function n(e,t){return e.robustness==t.robustness&&e.contentType==t.contentType}return e.keySystem==t.keySystem&&e.licenseUri==t.licenseUri&&re(e.audioCapabilities,t.audioCapabilities,n)&&re(e.videoCapabilities,t.videoCapabilities,n)}function Ip(e,t){var n=bp(new yp(e.za(),e.ja()),t),r=t.appMetadata||{};return n=kp(n),{offlineUri:e.toString(),originalManifestUri:t.originalManifestUri,duration:t.duration,size:t.size,expiration:t.expiration,tracks:n,appMetadata:r,isIncomplete:t.isIncomplete||!1}}function kp(e){for(var t=[],n=function(e){return e.filter((function(e){return Nn(e)}))}(e.variants),r=(n=c(n)).next();!r.done;r=n.next())t.push(En(r.value));for(n=(e=c(e.textStreams)).next();!n.done;n=e.next())t.push(In(n.value));return t}function Cp(){this.g={}}function _p(e,t){var n=t.audio,r=t.video;if(n&&!r&&(e.g[n.id]=n.bandwidth||t.bandwidth),!n&&r&&(e.g[r.id]=r.bandwidth||t.bandwidth),n&&r){var i=n.bandwidth||393216,a=r.bandwidth||t.bandwidth-i;0>=a&&(a=t.bandwidth),e.g[n.id]=i,e.g[r.id]=a}}function Mp(e,t){e.g[t.id]=t.bandwidth||2048}function Rp(e,t){return null==(e=e.g[t])&&(e=0),e}function Np(e){var t=this;if(e&&e.constructor!=qu)throw new Ne(2,9,9008);this.g=this.h=null,e?(this.h=e.h,this.g=e.jc()):(this.h=Fu(),this.g=new Er),this.i=[],this.j=[];var n=!e;this.l=new Dr((function(){var e,r,i,a,o;return L((function(s){switch(s.g){case 1:return w(s,Promise.all(t.j.map((function(e){return Wf(e)}))),2);case 2:for(e=function(){},r=[],i=c(t.i),a=i.next();!a.done;a=i.next())o=a.value,r.push(o.then(e,e));return w(s,Promise.all(r),3);case 3:if(!n){s.A(4);break}return w(s,t.g.destroy(),4);case 4:t.h=null,t.g=null,T(s)}}))}))}function Lp(){if(ut())e:{for(var e=c(up.values()),t=e.next();!t.done;t=e.next())if(t=(t=t.value)()){t.destroy(),e=!0;break e}e=!1}else e=!1;return e}function Dp(e){var t,n,r;return L((function(i){switch(i.g){case 1:return w(i,(t=new ip).init(),2);case 2:return w(i,ap(t),3);case 3:return n=i.h,r=new mp("manifest",n.path.za,n.path.ja,e),w(i,t.destroy(),4);case 4:return w(i,(new Np).remove(r.toString()),0)}}))}function Pp(e,t,n,r,i,a){var o,s,u,l,d,h,f,p,g,m,v;return L((function(y){switch(y.g){case 1:for(o=!1,A(y,2),s=!0,u=c(n.streams),l=u.next();!l.done;l=u.next())for(d=l.value,h=c(d.segments),f=h.next();!f.done;f=h.next())p=f.value,null!=(g=p.pendingSegmentRefId?r[p.pendingSegmentRefId]:null)&&(p.dataKey=g,p.pendingSegmentRefId=void 0),null!=(g=p.pendingInitSegmentRefId?r[p.pendingInitSegmentRefId]:null)&&(p.initSegmentKey=g,p.pendingInitSegmentRefId=void 0),p.pendingSegmentRefId&&(s=!1),p.pendingInitSegmentRefId&&(s=!1);return n.size+=i,s&&(n.isIncomplete=!1),w(y,e.updateManifest(t,n),4);case 4:o=!0,a(),E(y,0);break;case 2:return m=I(y),w(y,Dp(t),5);case 5:if(o){y.A(6);break}return v=Object.values(r),w(y,e.removeSegments(v,(function(){})),6);case 6:throw m}}))}function Op(e){return e.variants.some((function(e){var t=e.audio&&e.audio.encrypted;return e.video&&e.video.encrypted||t}))}function Up(e){return e.variants.some((function(e){return(e.video?e.video.drmInfos:[]).concat(e.audio?e.audio.drmInfos:[]).some((function(e){return e.initData&&e.initData.length}))}))}function Bp(e,t){for(var n=[],r=c(e.streams),i=r.next();!i.done;i=r.next())i=i.value,t&&"video"==i.type?n.push({contentType:Vt(i.mimeType,i.codecs),robustness:e.drmInfo.videoRobustness}):t||"audio"!=i.type||n.push({contentType:Vt(i.mimeType,i.codecs),robustness:e.drmInfo.audioRobustness});return n}function jp(e,t,n){return L((function(r){return w(r,function(e,t,n,r){var i,a,o;return L((function(s){return 1==s.g?r.drmInfo?(i=function(e){var t=Array.from(e.g.keys());if(!t.length)throw new Ne(2,9,9e3,"No supported storage mechanisms found");return e.g.get(t[0]).getEmeSessionCell()}(n),a=r.sessionIds.map((function(e){return{sessionId:e,keySystem:r.drmInfo.keySystem,licenseUri:r.drmInfo.licenseServerUri,serverCertificate:r.drmInfo.serverCertificate,audioCapabilities:Bp(r,!1),videoCapabilities:Bp(r,!0)}})),w(s,Sp(t,e,a),2)):s.return():3!=s.g?(o=s.h,w(s,i.remove(o),3)):w(s,i.add(a.filter((function(e){return!o.includes(e.sessionId)}))),0)}))}(e.g,e.h.drm,n,t),0)}))}function Fp(e,t,n){function r(){}var i=function(e){for(var t=new Set,n=(e=c(e.streams)).next();!n.done;n=e.next())for(var r=(n=c(n.value.segments)).next();!r.done;r=n.next())null!=(r=r.value).initSegmentKey&&t.add(r.initSegmentKey),t.add(r.dataKey);return Array.from(t)}(n);return Ip(t,n),Promise.all([e.removeSegments(i,r),e.removeManifests([t.key()],r)])}function zp(e,t,n,r,i,a){var o={id:r.id,originalId:r.originalId,primary:r.primary,type:r.type,mimeType:r.mimeType,codecs:r.codecs,frameRate:r.frameRate,pixelAspectRatio:r.pixelAspectRatio,hdr:r.hdr,kind:r.kind,language:r.language,label:r.label,width:r.width||null,height:r.height||null,encrypted:r.encrypted,keyIds:r.keyIds,segments:[],variantIds:[],roles:r.roles,forced:r.forced,channelsCount:r.channelsCount,audioSamplingRate:r.audioSamplingRate,spatialAudio:r.spatialAudio,closedCaptions:r.closedCaptions,tilesLayout:r.tilesLayout},s=i.offline.numberOfParallelDownloads,u=0;return function(e,t,n){if(t=e.segmentIndex.find(t),null!=t)for(var r=e.segmentIndex.get(t);r;)n(r),r=e.segmentIndex.get(++t)}(r,n.presentationTimeline.Pa(),(function(n){var i=zf(n),l=void 0;if(!a.has(i)){var c=n.endTime-n.startTime;c=Rp(t,r.id)*c,c=Kf(e.g,c),a.set(i,new Ff(n,c,u,!1))}n.h&&(l=zf(n.h),a.has(l)||(c=.5*Rp(t,r.id),c=Kf(e.g,c),a.set(l,new Ff(n.h,c,u,!0)))),o.segments.push({pendingInitSegmentRefId:l,initSegmentKey:l?0:null,startTime:n.startTime,endTime:n.endTime,appendWindowStart:n.appendWindowStart,appendWindowEnd:n.appendWindowEnd,timestampOffset:n.timestampOffset,tilesLayout:n.tilesLayout,pendingSegmentRefId:i,dataKey:0}),u=(u+1)%s})),o}function Gp(e){if(e.l.g)throw new Ne(2,9,7001)}function Vp(){if(!Lp())throw new Ne(2,9,9e3)}function Kp(e,t){return L((function(n){return 1==n.g?(e.i.push(t),S(n),w(n,t,4)):2!=n.g?n.return(n.h):(k(n),ne(e.i,t),C(n,0))}))}function Hp(e){for(var t=new Set,n=c(e.textStreams),r=n.next();!r.done;r=n.next())t.add(r.value);for(r=(n=c(e.imageStreams)).next();!r.done;r=n.next())t.add(r.value);for(n=(e=c(e.variants)).next();!n.done;n=e.next())(n=n.value).audio&&t.add(n.audio),n.video&&t.add(n.video);return t}v(lp,Zf),lp.prototype.updateManifestExpiration=function(e,t){var n,r,i,a=this;return L((function(o){return n=Qf(a.h,a.g),r=n.store(),i=new it,r.get(e).onsuccess=function(n){(n=n.target.result)?(n.expiration=t,r.put(n),i.resolve()):i.reject(new Ne(2,9,9012,"Could not find values for "+e))},w(o,Promise.all([n.promise(),i]),0)}))},lp.prototype.bc=function(e){var t,n,r,i,a,o;return L((function(s){if(1==s.g){for(t=[],n=0;n<e.periods.length;++n)r=n==e.periods.length-1?e.duration:e.periods[n+1].startTime,i=r-e.periods[n].startTime,a=cp(e.periods[n],i),t.push(a);return w(s,Bd(t),2)}return o=s.h,s.return({creationTime:0,originalManifestUri:e.originalManifestUri,duration:e.duration,size:e.size,expiration:null==e.expiration?1/0:e.expiration,streams:o,sessionIds:e.sessionIds,drmInfo:e.drmInfo,appMetadata:e.appMetadata,sequenceMode:!1})}))},lp.prototype.ze=function(e){return{data:e.data}},v(hp,Zf),hp.prototype.bc=function(e){var t,n,r,i,a,o;return L((function(s){if(1==s.g){for(t=[],n=0;n<e.periods.length;++n){r=n==e.periods.length-1?e.duration:e.periods[n+1].startTime,i=r-e.periods[n].startTime;for(var u=e.periods[n],l=[],d=c(u.streams),h=d.next();!h.done;h=d.next())0!=(h=h.value).variantIds.length&&l.push(fp(h,u.startTime,u.startTime+i));a=l,t.push(a)}return w(s,Bd(t),2)}return o=s.h,s.return({appMetadata:e.appMetadata,creationTime:0,drmInfo:e.drmInfo,duration:e.duration,expiration:null==e.expiration?1/0:e.expiration,originalManifestUri:e.originalManifestUri,sessionIds:e.sessionIds,size:e.size,streams:o,sequenceMode:!1})}))},v(pp,Zf),(i=pp.prototype).hasFixedKeySpace=function(){return!1},i.addSegments=function(e){return this.add(this.i,e)},i.addManifests=function(e){return this.add(this.g,e)},i.updateManifest=function(e,t){return function(e,t,n){var r=(e=Qf(e.h,e.g)).store();return r.get(t).onsuccess=function(){r.put(n,t)},e.promise()}(this,e,t)},i.bc=function(e){return null==e.expiration&&(e.expiration=1/0),Promise.resolve(e)},(i=gp.prototype).init=function(){var t=this,n=new it,r=!1,i=new st((function(){r=!0,n.reject(new Ne(2,9,9017))}));i.N(2);var a=e.indexedDB.open("shaka_offline_db",5);return a.onsuccess=function(){if(!r){var e=a.result;t.l=e;var o=e.objectStoreNames;o=o.contains("manifest")&&o.contains("segment")?new lp(e,"segment","manifest"):null,t.g=o,o=(o=e.objectStoreNames).contains("manifest-v2")&&o.contains("segment-v2")?new hp(e,"segment-v2","manifest-v2"):null,t.h=o,o=(o=e.objectStoreNames).contains("manifest-v3")&&o.contains("segment-v3")?new hp(e,"segment-v3","manifest-v3"):null,t.i=o,o=(o=e.objectStoreNames).contains("manifest-v5")&&o.contains("segment-v5")?new pp(e,"segment-v5","manifest-v5"):null,t.j=o,e=e.objectStoreNames.contains("session-ids")?new rp(e):null,t.m=e,i.stop(),n.resolve()}},a.onupgradeneeded=function(){for(var e=a.result,t=c(["segment-v5","manifest-v5","session-ids"]),n=t.next();!n.done;n=t.next())n=n.value,e.objectStoreNames.contains(n)||e.createObjectStore(n,{autoIncrement:!0})},a.onerror=function(e){r||(n.reject(new Ne(2,9,9001,a.error)),i.stop(),e.preventDefault())},n},i.destroy=function(){var e=this;return L((function(t){switch(t.g){case 1:if(!e.g){t.A(2);break}return w(t,e.g.destroy(),2);case 2:if(!e.h){t.A(4);break}return w(t,e.h.destroy(),4);case 4:if(!e.i){t.A(6);break}return w(t,e.i.destroy(),6);case 6:if(!e.j){t.A(8);break}return w(t,e.j.destroy(),8);case 8:if(!e.m){t.A(10);break}return w(t,e.m.destroy(),10);case 10:e.l&&e.l.close(),T(t)}}))},i.getCells=function(){var e=new Map;return this.g&&e.set("v1",this.g),this.h&&e.set("v2",this.h),this.i&&e.set("v3",this.i),this.j&&e.set("v5",this.j),e},i.getEmeSessionCell=function(){return this.m},i.erase=function(){var t=this;return L((function(n){switch(n.g){case 1:if(!t.g){n.A(2);break}return w(n,t.g.destroy(),2);case 2:if(!t.h){n.A(4);break}return w(n,t.h.destroy(),4);case 4:if(!t.i){n.A(6);break}return w(n,t.i.destroy(),6);case 6:if(!t.j){n.A(8);break}return w(n,t.j.destroy(),8);case 8:return t.l&&t.l.close(),w(n,function(){var t=new it,n=e.indexedDB.deleteDatabase("shaka_offline_db");return n.onblocked=function(){},n.onsuccess=function(){t.resolve()},n.onerror=function(e){t.reject(new Ne(2,9,9001,n.error)),e.preventDefault()},t}(),10);case 10:return t.l=null,t.g=null,t.h=null,t.i=null,t.j=null,w(n,t.init(),0)}}))},sp("idb",(function(){return mt("CrKey")||ct()||!e.indexedDB?null:new gp})),mp.prototype.za=function(){return this.i},mp.prototype.ja=function(){return this.h},mp.prototype.key=function(){return this.l},mp.prototype.toString=function(){return this.j},(i=wp.prototype).configure=function(){},i.start=function(e,t){var n,r,i,a,o,s,u=this;return L((function(l){switch(l.g){case 1:if(n=vp(e),u.g=n,null==n||"manifest"!=n.g)throw new Ne(2,1,9004,e);return r=new ip,S(l),w(l,r.init(),4);case 4:return w(l,op(r,n.za(),n.ja()),5);case 5:return w(l,l.h.getManifests([n.key()]),6);case 6:return i=l.h,a=i[0],o=new yp(n.za(),n.ja()),s=bp(o,a),t.makeTextStreamsForClosedCaptions(s),l.return(s);case 2:return k(l),w(l,r.destroy(),7);case 7:C(l,0)}}))},i.stop=function(){return Promise.resolve()},i.update=function(){},i.onExpirationUpdated=function(e,t){var n,r,i,a,o,s,u,l=this;return L((function(c){switch(c.g){case 1:return n=l.g,r=new ip,A(c,2,3),w(c,r.init(),5);case 5:return w(c,op(r,n.za(),n.ja()),6);case 6:return w(c,(i=c.h).getManifests([n.key()]),7);case 7:if(a=c.h,o=a[0],s=o.sessionIds.includes(e),u=null==o.expiration||o.expiration>t,!s||!u){c.A(3);break}return w(c,i.updateManifestExpiration(n.key(),t),3);case 3:return k(c),w(c,r.destroy(),10);case 10:C(c,0);break;case 2:I(c),c.A(3)}}))},Qi["application/x-offline-manifest"]=function(){return new wp},z("shaka.offline.OfflineScheme",Tp),Tp.plugin=Ap,Ir("offline",Ap),(i=Np.prototype).destroy=function(){return this.l.destroy()},i.configure=function(e,t){return 2==arguments.length&&"string"==typeof e&&(e=Du(e,t)),zu(this.h,e)},i.getConfiguration=function(){var e=Fu();return zu(e,this.h,Fu()),e},i.jc=function(){return this.g},i.store=function(e,t,n){var r=this,i=this.getConfiguration(),a=new Hf(this.g);return this.j.push(a),t=function(e,t,n,r,i,a){var o,s,u,l,d,h,f,p,g,m,v,y,b;return L((function(x){switch(x.g){case 1:return Vp(),s=o=null,u=new ip,h=d=l=null,A(x,2,3),w(x,r(),5);case 5:return o=x.h,w(x,function(e,t,n,r){var i,a,o,s,u;return L((function(l){if(1==l.g)return i=null,a=e.g,o={networkingEngine:a,modifyManifestRequest:function(){},modifySegmentRequest:function(){},filter:function(){return Promise.resolve()},makeTextStreamsForClosedCaptions:function(){},onTimelineRegionAdded:function(){},onEvent:function(){},onError:function(e){i=e},isLowLatencyMode:function(){return!1},isAutoLowLatencyMode:function(){return!1},enableLowLatencyMode:function(){},updateDuration:function(){},newDrmInfo:function(){}},n.configure(r.manifest),Gp(e),w(l,n.start(t,o),2);if(3!=l.g)return s=l.h,Gp(e),u=Hp(s),w(l,Promise.all(jr(u,(function(e){return e.createSegmentIndex()}))),3);if(Gp(e),i)throw i;return l.return(s)}))}(e,t,o,i),6);case 6:if(f=x.h,Gp(e),!(!f.presentationTimeline.U()&&!f.presentationTimeline.jb()))throw new Ne(2,9,9005,t);return w(x,function(e,t,n,r){var i;return L((function(a){switch(a.g){case 1:return(i=new Si({kb:e.g,onError:n,cd:function(){},onExpirationUpdated:function(){},onEvent:function(){}})).configure(r.drm),w(a,function(e,t,n){return e.da=!0,e.B=[],e.L=n,Ii(e,t)}(i,t.variants,r.offline.usePersistentLicense),2);case 2:return w(a,Ci(i),3);case 3:return w(a,_i(i),4);case 4:return a.return(i)}}))}(e,f,(function(e){h=h||e}),i),7);case 7:if(s=x.h,Gp(e),h)throw h;return w(x,function(e,t){var n,r,i,a,o,s,u,l,d,h,f,p,g,m,v,y,b,x,S,k,C,_,M,R,N,D,P,O;return L((function(L){switch(L.g){case 1:return n={width:1/0,height:1/0},function(e,t,n){e.variants=e.variants.filter((function(e){return gn(e,t,n)}))}(e,t.restrictions,n),w(L,yn(e,t.offline.usePersistentLicense),2);case 2:for(r=[],i=t.preferredAudioChannelCount,a=t.preferredDecodingAttributes,o=t.preferredVideoCodecs,s=t.preferredAudioCodecs,hn(e,o,s,i,a),u=c(e.variants),l=u.next();!l.done;l=u.next())d=l.value,r.push(En(d));for(h=c(e.textStreams),f=h.next();!f.done;f=h.next())p=f.value,r.push(In(p));for(g=c(e.imageStreams),m=g.next();!m.done;m=g.next())v=m.value,r.push(kn(v));return w(L,t.offline.trackSelectionCallback(r),3);case 3:for(y=L.h,b=e.presentationTimeline.getDuration(),x=0,S=c(y),k=S.next();!k.done;k=S.next())C=k.value,_=C.bandwidth*b/8,x+=_;return A(L,4),w(L,t.offline.downloadSizeCallback(x),6);case 6:if(!L.h)throw new Ne(2,9,9014);E(L,5);break;case 4:if((M=I(L))instanceof Ne)throw M;throw new Ne(2,9,9015);case 5:for(R=new Set,N=new Set,D=new Set,P=c(y),k=P.next();!k.done;k=P.next())"variant"==(O=k.value).type&&R.add(O.id),"text"==O.type&&N.add(O.id),"image"==O.type&&D.add(O.id);e.variants=e.variants.filter((function(e){return R.has(e.id)})),e.textStreams=e.textStreams.filter((function(e){return N.has(e.id)})),e.imageStreams=e.imageStreams.filter((function(e){return D.has(e.id)})),function(e){e.variants.map((function(e){return e.video}));var t=new Set(e.variants.map((function(e){return e.audio})));e=e.textStreams;for(var n=c(t),r=n.next();!r.done;r=n.next())for(var i=(r=c(t)).next();!i.done;i=r.next());for(t=c(e),n=t.next();!n.done;n=t.next())for(n=c(e),r=n.next();!r.done;r=n.next());}(e),T(L)}}))}(f,i),8);case 8:return w(x,u.init(),9);case 9:return Gp(e),w(x,ap(u),10);case 10:return l=x.h,Gp(e),p=function(e,t,n,r,i,a){var o=function(e,t,n){return{offlineUri:null,originalManifestUri:e,duration:t.presentationTimeline.getDuration(),size:0,expiration:1/0,tracks:t=kp(t),appMetadata:n,isIncomplete:!1}}(n,t,r),s=i.offline.progressCallback;!function(e,t,n){e.m=t,e.l=n}(a,(function(e,t){o.size=t,s(o,e)}),(function(t,n){u&&i.offline.usePersistentLicense&&l==n&&Mi(e,"cenc",t)}));var u=Op(t)&&!Up(t),l=null;u&&(l=Wp.get(e.g.keySystem));for(var d=new Cp,h=c(t.textStreams),f=h.next();!f.done;f=h.next())d.g[f.value.id]=52;for(h=c(t.imageStreams),f=h.next();!f.done;f=h.next())Mp(d,f.value);for(f=c(t.variants),h=f.next();!h.done;h=f.next())_p(d,h.value);return d=function(e,t,n,r){for(var i=new Map,a=Hp(n),o=new Map,s=(a=c(a)).next();!s.done;s=a.next()){var u=zp(e,t,n,s=s.value,r,i);o.set(s.id,u)}for(e=c(n.variants),t=e.next();!t.done;t=e.next())(t=t.value).audio&&o.get(t.audio.id).variantIds.push(t.id),t.video&&o.get(t.video.id).variantIds.push(t.id);return{streams:Array.from(o.values()),pe:Array.from(i.values())}}(a,d,t,i),a=d.streams,d=d.pe,f=e.g,h=i.offline.usePersistentLicense,f&&h&&(f.initData=[]),{ag:{creationTime:Date.now(),originalManifestUri:n,duration:t.presentationTimeline.getDuration(),size:0,expiration:e.ic(),streams:a,sessionIds:h?Ni(e):[],drmInfo:f,appMetadata:r,isIncomplete:!0,sequenceMode:t.sequenceMode},pe:d}}(s,f,t,n,i,a),g=p.ag,m=p.pe,w(x,l.ja.addManifests([g]),11);case 11:if(v=x.h,Gp(e),d=v[0],Gp(e),h)throw h;return w(x,function(e,t,n,r,i,a,o,s,u){var l,d,h,f,p,g,m,v,y,b;return L((function(x){switch(x.g){case 1:if(l={},d=0,h=function(t,h){var f,p,g,m,v,y,b;return L((function(x){if(1==x.g){for(f={},p=c(t),g=p.next();!g.done;f={cb:f.cb},g=p.next())f.cb=g.value,m=Gf(f.cb,a),v=f.cb.i,y=f.cb.h,b=function(t){return function(n){var r,i,a;return L((function(s){if(1==s.g)return w(s,o.addSegments([{data:n}]),2);r=s.h,Gp(e),i=t.cb.g,a=zf(i),l[a]=r[0],d+=n.byteLength,T(s)}))}}(f),Xf(i,f.cb.groupId,m,v,y,b);return w(x,function(e){return L((function(t){return 1==t.g?w(t,Promise.all(e.j.values()),2):t.return(e.g.h)}))}(i),2)}return h?(Gp(e),function(e,t,n,r){if(t.expiration=n.ic(),n=Ni(n),t.sessionIds=r.offline.usePersistentLicense?n:[],Op(e)&&r.offline.usePersistentLicense&&!n.length)throw new Ne(2,9,9007)}(s,r,u,a),w(x,o.updateManifest(n,r),0)):x.A(0)}))},f=!1,A(x,2),!Op(s)||!f||Up(s)){x.A(4);break}return w(x,h(t.filter((function(e){return e.h})),!0),5);case 5:return Gp(e),t=t.filter((function(e){return!e.h})),p=l,g=d,l={},d=0,w(x,Pp(o,n,r,p,g,(function(){return Gp(e)})),6);case 6:Gp(e);case 4:if(f){x.A(7);break}return w(x,h(t,!1),8);case 8:return Gp(e),m=l,v=d,l={},d=0,w(x,Pp(o,n,r,m,v,(function(){return Gp(e)})),9);case 9:Gp(e);case 7:E(x,0);break;case 2:return y=I(x),b=Object.values(l),w(x,o.removeSegments(b,(function(){})),10);case 10:throw y}}))}(e,m,d,g,a,i,l.ja,f,s),12);case 12:return Gp(e),y=new mp("manifest",l.path.za,l.path.ja,d),x.return(Ip(y,g));case 3:return k(x),w(x,u.destroy(),13);case 13:if(!o){x.A(14);break}return w(x,o.stop(),14);case 14:if(!s){x.A(16);break}return w(x,s.destroy(),16);case 16:C(x,0);break;case 2:if(b=I(x),null==d){x.A(18);break}return w(x,Dp(d),18);case 18:throw h||b}}))}(this,e,t||{},(function(){var t;return L((function(a){return 1==a.g?w(a,qi(e,r.g,i.manifest.retryParameters,n||null),2):(t=a.h,a.return(t()))}))}),i,a),(t=new dr(t,(function(){return Wf(a)}))).finally((function(){ne(r.j,a)})),function(e,t){var n=t.promise;return e.i.push(n),t.finally((function(){ne(e.i,n)}))}(this,t)},i.remove=function(e){return Kp(this,function(e,t){var n,r,i,a,o,s;return L((function(u){switch(u.g){case 1:if(Vp(),null==(n=vp(t))||"manifest"!=n.g)throw new Ne(2,9,9004,t);return r=n,i=new ip,S(u),w(u,i.init(),4);case 4:return w(u,op(i,r.za(),r.ja()),5);case 5:return w(u,(a=u.h).getManifests([r.key()]),6);case 6:return o=u.h,s=o[0],w(u,Promise.all([jp(e,s,i),Fp(a,r,s)]),2);case 2:return k(u),w(u,i.destroy(),8);case 8:C(u,0)}}))}(this,e))},i.pg=function(){return Kp(this,function(e){var t,n,r,i,a,o,s,u,l,d;return L((function(h){switch(h.g){case 1:return Vp(),t=e.g,n=e.h.drm,r=new ip,i=!1,S(h),w(h,r.init(),4);case 4:a=[],function(e,t){e.g.forEach((function(e){t(e.getEmeSessionCell())}))}(r,(function(e){return a.push(e)})),o=c(a),s=o.next();case 5:if(s.done){h.A(2);break}return w(h,(u=s.value).getAll(),8);case 8:return l=h.h,w(h,Sp(n,t,l),9);case 9:return d=h.h,w(h,u.remove(d),10);case 10:d.length!=l.length&&(i=!0),s=o.next(),h.A(5);break;case 2:return k(h),w(h,r.destroy(),11);case 11:C(h,3);break;case 3:return h.return(!i)}}))}(this))},i.list=function(){return Kp(this,L((function(r){switch(r.g){case 1:return Vp(),e=[],t=new ip,S(r),w(r,t.init(),4);case 4:return n=Promise.resolve(),function(e,t){e.g.forEach((function(e,n){e.getCells().forEach((function(e,r){t({za:n,ja:r},e)}))}))}(t,(function(t,r){n=n.then((function(){return L((function(n){if(1==n.g)return w(n,r.getAllManifests(),2);n.h.forEach((function(n,r){n=Ip(new mp("manifest",t.za,t.ja,r),n),e.push(n)})),T(n)}))}))})),w(r,n,2);case 2:return k(r),w(r,t.destroy(),6);case 6:C(r,3);break;case 3:return r.return(e)}})));var e,t,n},z("shaka.offline.Storage",Np),Np.deleteAll=function(){var e;return L((function(t){return 1==t.g?(e=new ip,S(t),w(t,function(e){var t,n;return L((function(r){return 1==r.g?(t=Array.from(e.g.values()),(n=0<t.length)||up.forEach((function(e){(e=e())&&t.push(e)})),w(r,Promise.all(t.map((function(e){return e.erase()}))),2)):n?r.A(0):w(r,Promise.all(t.map((function(e){return e.destroy()}))),0)}))}(e),2)):5!=t.g?(k(t),w(t,e.destroy(),5)):C(t,0)}))},Np.prototype.list=Np.prototype.list,Np.prototype.removeEmeSessions=Np.prototype.pg,Np.prototype.remove=Np.prototype.remove,Np.prototype.store=Np.prototype.store,Np.prototype.getNetworkingEngine=Np.prototype.jc,Np.prototype.getConfiguration=Np.prototype.getConfiguration,Np.prototype.configure=Np.prototype.configure,Np.prototype.destroy=Np.prototype.destroy,Np.support=Lp;var Wp=(new Map).set("org.w3.clearkey","1077efecc0b24d02ace33c1e52e2fb4b").set("com.widevine.alpha","edef8ba979d64acea3c827dcd51d21ed").set("com.microsoft.playready","9a04f07998404286ab92e65be0885f95").set("com.microsoft.playready.recommendation","9a04f07998404286ab92e65be0885f95").set("com.microsoft.playready.software","9a04f07998404286ab92e65be0885f95").set("com.microsoft.playready.hardware","9a04f07998404286ab92e65be0885f95").set("com.adobe.primetime","f239e769efa348509c16a903c6932efb");function Xp(){}function qp(e,t){for(e={priority:t||0,mf:e},t=0;t<Yp.length;t++)if(Yp[t].priority<e.priority)return void Yp.splice(t,0,e);Yp.push(e)}$l.offline=Lp,z("shaka.polyfill",Xp),Xp.register=qp,Xp.installAll=function(){for(var e=c(Yp),t=e.next();!t.done;t=e.next()){t=t.value;try{t.mf()}catch(n){X("Error installing polyfill!",n)}}};var Yp=[];function $p(){this.g=new Jp}function Qp(){e.AbortController||(e.AbortController=$p,e.AbortSignal=Jp)}function Jp(){xr.call(this),this.h=!1,this.g=void 0,this.onabort=null}function Zp(){}function eg(){if(!Object.getOwnPropertyDescriptor(Element.prototype,"ariaHidden"))for(var e=c(["ariaHidden","ariaLabel","ariaPressed","ariaSelected"]),t=e.next();!t.done;t=e.next())tg(t.value)}function tg(e){var t="aria-"+e.toLowerCase().replace(/^aria/,"");Object.defineProperty(Element.prototype,e,{get:function(){return this.getAttribute(t)},set:function(e){null==e||null==e?this.removeAttribute(t):this.setAttribute(t,e)}})}function ng(){}function rg(){Gv()}function ig(){}function ag(){if(e.Document){var t=Element.prototype;t.requestFullscreen=t.requestFullscreen||t.mozRequestFullScreen||t.msRequestFullscreen||t.webkitRequestFullscreen,(t=Document.prototype).exitFullscreen=t.exitFullscreen||t.mozCancelFullScreen||t.msExitFullscreen||t.webkitCancelFullScreen,"fullscreenElement"in document||(Object.defineProperty(document,"fullscreenElement",{get:function(){return document.mozFullScreenElement||document.msFullscreenElement||document.webkitCurrentFullScreenElement||document.webkitFullscreenElement}}),Object.defineProperty(document,"fullscreenEnabled",{get:function(){return document.mozFullScreenEnabled||document.msFullscreenEnabled||document.webkitFullscreenEnabled}})),document.addEventListener("webkitfullscreenchange",og),document.addEventListener("webkitfullscreenerror",og),document.addEventListener("mozfullscreenchange",og),document.addEventListener("mozfullscreenerror",og),document.addEventListener("MSFullscreenChange",og),document.addEventListener("MSFullscreenError",og)}}function og(e){var t=e.type.replace(/^(webkit|moz|MS)/,"").toLowerCase(),n=document.createEvent("Event");n.initEvent(t,e.bubbles,e.cancelable),e.target.dispatchEvent(n)}function sg(){}function ug(){var e=!0;(ft()||mt("PlayStation 5")||pt()||mt("Web0S")||dt()||mt("CrKey")||mt("PC=EOS")||mt("Hisense")||mt("VIDAA"))&&(e=!1),e&&navigator.mediaCapabilities||(navigator.mediaCapabilities||(navigator.mediaCapabilities={}),mg=navigator.mediaCapabilities,navigator.mediaCapabilities.decodingInfo=lg)}function lg(t){var n,r,i,a,o,s,u,l,c,d,h,f,p;return L((function(g){switch(g.g){case 1:if(n={supported:!1,powerEfficient:!0,smooth:!0,keySystemAccess:null,configuration:t},!t)return g.return(n);if(r=t.video,i=t.audio,"media-source"==t.type){if(!ut())return g.return(n);if(r){if(mt("CrKey")){if(!e.cast)throw new Ne(2,8,8e3);if(cast.__platform__&&cast.__platform__.canDisplayType){var m=r.contentType;r.width&&r.height&&(m+="; width="+r.width+"; height="+r.height),r.framerate&&(m+="; framerate="+r.framerate),"pq"===r.transferFunction&&(m+="; eotf=smpte2084"),m=cast.__platform__.canDisplayType(m)}else m=Z(r.contentType)}else m=Z(r.contentType);if(!m)return g.return(n)}if(i&&(a=i.contentType,!Z(a)))return g.return(n)}else{if("file"!=t.type)return g.return(n);if(r&&(o=r.contentType,!lt(o))||i&&(s=i.contentType,!lt(s)))return g.return(n)}return t.keySystemConfiguration?(u=t.keySystemConfiguration,l=[],c=[],u.audio&&(d={robustness:u.audio.robustness||"",contentType:t.audio.contentType},l.push(d)),u.video&&(h={robustness:u.video.robustness||"",contentType:t.video.contentType},c.push(h)),f={initDataTypes:[u.initDataType],distinctiveIdentifier:u.distinctiveIdentifier,persistentState:u.persistentState,sessionTypes:u.sessionTypes},l.length&&(f.audioCapabilities=l),c.length&&(f.videoCapabilities=c),A(g,3),w(g,navigator.requestMediaKeySystemAccess(u.keySystem,[f]),5)):(n.supported=!0,g.return(Promise.resolve(n)));case 5:p=g.h,E(g,4);break;case 3:I(g);case 4:p&&(n.supported=!0,n.keySystemAccess=p);case 2:return g.return(n)}}))}$p.prototype.abort=function(e){var t=this.g;t.h||(t.h=!0,t.g=e,void 0===t.g&&(t.g=new DOMException("signal is aborted without reason","AbortError")),e=new vr("abort"),t.onabort&&t.onabort(e),t.dispatchEvent(e))},s.Object.defineProperties($p.prototype,{signal:{configurable:!0,enumerable:!0,get:function(){return this.g}}}),Xp.AbortController=$p,$p.install=Qp,v(Jp,xr),s.Object.defineProperties(Jp.prototype,{aborted:{configurable:!0,enumerable:!0,get:function(){return this.h}},reason:{configurable:!0,enumerable:!0,get:function(){return this.g}}}),qp(Qp),Xp.Aria=Zp,Zp.install=eg,qp(eg),Xp.EncryptionScheme=ng,ng.install=rg,qp(rg,-2),Xp.Fullscreen=ig,ig.install=ag,qp(ag),Xp.MediaCapabilities=sg,sg.install=ug;var cg,dg,hg,fg,pg,gg,mg=null;function vg(){}function yg(){var t=gt();e.MediaSource&&(e.cast&&cast.__platform__&&cast.__platform__.canDisplayType?function(){var e=MediaSource.isTypeSupported;MediaSource.isTypeSupported=function(t){var n=t.split(/ *; */);return n.shift(),n.some((function(e){return e.startsWith("codecs=")}))?cast.__platform__.canDisplayType(t):e(t)}}():t?12>=t?(bg(),function(){var e=SourceBuffer.prototype.remove;SourceBuffer.prototype.remove=function(t,n){return e.call(this,t,n-.001)}}()):bg():(mt("Tizen 2")||mt("Tizen 3")||mt("Tizen 4"))&&function(){var e=MediaSource.isTypeSupported;MediaSource.isTypeSupported=function(t){return"opus"!=Xt(t)[0]&&e(t)}}()),e.MediaSource&&MediaSource.isTypeSupported('video/webm; codecs="vp9"')&&!MediaSource.isTypeSupported('video/webm; codecs="vp09.00.10.08"')&&function(){var e=MediaSource.isTypeSupported;mt("Web0S")||(MediaSource.isTypeSupported=function(t){var n=t.split(/ *; */),r=n.findIndex((function(e){return e.startsWith("codecs=")}));if(0>r)return e(t);var i=n[r].replace("codecs=","").replace(/"/g,"").split(/\s*,\s*/),a=i.findIndex((function(e){return e.startsWith("vp09")}));return 0<=a&&(i[a]="vp9",n[r]='codecs="'+i.join(",")+'"',t=n.join("; ")),e(t)})}()}function bg(){var e=MediaSource.prototype.addSourceBuffer;MediaSource.prototype.addSourceBuffer=function(){var t=e.apply(this,D.apply(0,arguments));return t.abort=function(){},t}}function xg(){}function wg(){screen.orientation||null!=e.orientation&&function(){function t(){switch(e.orientation){case-90:n.type="landscape-secondary",n.angle=270;break;case 0:n.type="portrait-primary",n.angle=0;break;case 90:n.type="landscape-primary",n.angle=90;break;case 180:n.type="portrait-secondary",n.angle=180}}var n=new Tg;screen.orientation=n,t(),e.addEventListener("orientationchange",(function(){t();var e=new vr("change");n.dispatchEvent(e)}))}()}function Tg(){xr.call(this),this.type="",this.angle=0}function Ag(){}function Sg(e,t){try{var n=new kg(e,t);return Promise.resolve(n)}catch(r){return Promise.reject(r)}}function Eg(e){var t=this.mediaKeys;return t&&t!=e&&_g(t,null),delete this.mediaKeys,(this.mediaKeys=e)?_g(e,this):Promise.resolve()}function Ig(e){if(Me(e=_e(e.initData)).getUint32(0,!0)+4!=e.byteLength)throw new RangeError("Malformed FairPlay init data");e=St(e=Tt(e.subarray(4),!0));var t=new Event("encrypted");t.initDataType="skd",t.initData=Ce(e),this.dispatchEvent(t)}function kg(e,t){if(this.keySystem=e,e.startsWith("com.apple.fps"))for(t=(e=c(t)).next();!t.done;t=e.next()){var n=t.value;if("required"==n.persistentState)t=null;else{t={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:n.initDataTypes,sessionTypes:["temporary"],label:n.label};var r=!1,i=!1;if(n.audioCapabilities)for(var a=c(n.audioCapabilities),o=a.next();!o.done;o=a.next())(o=o.value).contentType&&(r=!0,WebKitMediaKeys.isTypeSupported(this.keySystem,o.contentType.split(";")[0])&&(t.audioCapabilities.push(o),i=!0));if(n.videoCapabilities)for(o=(n=c(n.videoCapabilities)).next();!o.done;o=n.next())(a=o.value).contentType&&(r=!0,WebKitMediaKeys.isTypeSupported(this.keySystem,a.contentType.split(";")[0])&&(t.videoCapabilities.push(a),i=!0));r||(i=WebKitMediaKeys.isTypeSupported(this.keySystem,"video/mp4")),t=i?t:null}if(t)return void(this.g=t)}throw(e=Error("Unsupported keySystem")).name="NotSupportedError",e.code=DOMException.NOT_SUPPORTED_ERR,e}function Cg(e){this.h=new WebKitMediaKeys(e),this.g=new Or}function _g(e,t){if(e.g.nb(),!t)return Promise.resolve();e.g.C(t,"webkitneedkey",Ig);try{return us(t,HTMLMediaElement.HAVE_METADATA,e.g,(function(){t.webkitSetMediaKeys(e.h)})),Promise.resolve()}catch(n){return Promise.reject(n)}}function Mg(e){xr.call(this),this.i=null,this.l=e,this.g=this.h=null,this.j=new Or,this.sessionId="",this.expiration=NaN,this.closed=new it,this.keyStatuses=new Ng}function Rg(e,t){var n=e.keyStatuses;n.size=null==t?0:1,n.g=t,t=new vr("keystatuseschange"),e.dispatchEvent(t)}function Ng(){this.size=0,this.g=void 0}function Lg(){}function Dg(){!e.HTMLVideoElement||navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration||(navigator.requestMediaKeySystemAccess=Pg,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=Og,e.MediaKeys=Ug,e.MediaKeySystemAccess=Bg,e.shakaMediaKeysPolyfill=!0)}function Pg(){return Promise.reject(Error("The key system specified is not supported."))}function Og(e){return null==e?Promise.resolve():Promise.reject(Error("MediaKeys not supported."))}function Ug(){throw new TypeError("Illegal constructor.")}function Bg(){throw this.keySystem="",new TypeError("Illegal constructor.")}function jg(){}function Fg(){if(!(!e.HTMLVideoElement||navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration)){if(HTMLMediaElement.prototype.webkitGenerateKeyRequest)Zg="webkit";else if(!HTMLMediaElement.prototype.generateKeyRequest)return;navigator.requestMediaKeySystemAccess=Gg,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=Vg,e.MediaKeys=Hg,e.MediaKeySystemAccess=Kg,e.shakaMediaKeysPolyfill=!0}}function zg(e){return Zg?Zg+e.charAt(0).toUpperCase()+e.slice(1):e}function Gg(e,t){try{var n=new Kg(e,t);return Promise.resolve(n)}catch(r){return Promise.reject(r)}}function Vg(e){var t=this.mediaKeys;return t&&t!=e&&Wg(t,null),delete this.mediaKeys,(this.mediaKeys=e)&&Wg(e,this),Promise.resolve()}function Kg(e,t){this.g=this.keySystem=e;var n=!1;"org.w3.clearkey"==e&&(this.g="webkit-org.w3.clearkey",n=!1);var r=!1,i=document.getElementsByTagName("video");i=i.length?i[0]:document.createElement("video");for(var a=(t=c(t)).next();!a.done;a=t.next()){var o={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:(a=a.value).initDataTypes,sessionTypes:["temporary"],label:a.label},s=!1;if(a.audioCapabilities)for(var u=c(a.audioCapabilities),l=u.next();!l.done;l=u.next())(l=l.value).contentType&&(s=!0,i.canPlayType(l.contentType.split(";")[0],this.g)&&(o.audioCapabilities.push(l),r=!0));if(a.videoCapabilities)for(l=(u=c(a.videoCapabilities)).next();!l.done;l=u.next())(l=l.value).contentType&&(s=!0,i.canPlayType(l.contentType,this.g)&&(o.videoCapabilities.push(l),r=!0));if(s||(r=i.canPlayType("video/mp4",this.g)||i.canPlayType("video/webm",this.g)),"required"==a.persistentState&&(n?(o.persistentState="required",o.sessionTypes=["persistent-license"]):r=!1),r)return void(this.h=o)}throw n="Unsupported keySystem","org.w3.clearkey"!=e&&"com.widevine.alpha"!=e||(n="None of the requested configurations were supported."),(e=Error(n)).name="NotSupportedError",e.code=DOMException.NOT_SUPPORTED_ERR,e}function Hg(e){this.l=e,this.h=null,this.g=new Or,this.i=[],this.j=new Map}function Wg(e,t){e.h=t,e.g.nb();var n=Zg;t&&(e.g.C(t,n+"needkey",(function(t){var n=new CustomEvent("encrypted");n.initDataType="cenc",n.initData=Ce(t.initData),e.h.dispatchEvent(n)})),e.g.C(t,n+"keymessage",(function(t){var n=Xg(e,t.sessionId);n&&(t=new vr("message",t=(new Map).set("messageType",null==n.keyStatuses.Eb()?"licenserequest":"licenserenewal").set("message",t.message)),n.h&&(n.h.resolve(),n.h=null),n.dispatchEvent(t))})),e.g.C(t,n+"keyadded",(function(t){(t=Xg(e,t.sessionId))&&(Qg(t,"usable"),t.g&&t.g.resolve(),t.g=null)})),e.g.C(t,n+"keyerror",(function(t){var n=Xg(e,t.sessionId);n&&n.handleError(t)})))}function Xg(e,t){var n=e.j.get(t);return n||((n=e.i.shift())?(n.sessionId=t,e.j.set(t,n),n):null)}function qg(e,t,n){xr.call(this),this.j=e,this.m=!1,this.g=this.h=null,this.i=t,this.l=n,this.sessionId="",this.expiration=NaN,this.closed=new it,this.keyStatuses=new Jg}function Yg(e,t,n){if(e.m)return Promise.reject(Error("The session is already initialized."));e.m=!0;try{if("persistent-license"==e.l)if(n)var r=_e(St("LOAD_SESSION|"+n));else{var i=St("PERSISTENT|");r=Lt(i,t)}else r=_e(t)}catch(o){return Promise.reject(o)}e.h=new it;var a=zg("generateKeyRequest");try{e.j[a](e.i,r)}catch(o){if("InvalidStateError"!=o.name)return e.h=null,Promise.reject(o);new st((function(){try{e.j[a](e.i,r)}catch(t){e.h.reject(t),e.h=null}})).N(.01)}return e.h}function $g(e,t,n){if(e.g)e.g.then((function(){return $g(e,t,n)})).catch((function(){return $g(e,t,n)}));else{if(e.g=t,"webkit-org.w3.clearkey"==e.i){var r=wt(n),i=JSON.parse(r);"oct"!=i.keys[0].kty&&(e.g.reject(Error("Response is not a valid JSON Web Key Set.")),e.g=null),r=Mt(i.keys[0].k),i=Mt(i.keys[0].kid)}else r=_e(n),i=null;var a=zg("addKey");try{e.j[a](e.i,r,i,e.sessionId)}catch(o){e.g.reject(o),e.g=null}}}function Qg(e,t){var n=e.keyStatuses;n.size=null==t?0:1,n.g=t,t=new vr("keystatuseschange"),e.dispatchEvent(t)}function Jg(){this.size=0,this.g=void 0}sg.originalMcap=mg,qp(ug,-1),Xp.MediaSource=vg,vg.install=yg,qp(yg),Xp.Orientation=xg,xg.install=wg,v(Tg,xr),Tg.prototype.lock=function(e){function t(e){return screen.lockOrientation?screen.lockOrientation(e):screen.mozLockOrientation?screen.mozLockOrientation(e):!!screen.msLockOrientation&&screen.msLockOrientation(e)}var n=!1;switch(e){case"natural":n=t("default");break;case"any":n=!0,this.unlock();break;default:n=t(e)}return n?Promise.resolve():((e=Error("screen.orientation.lock() is not available on this device")).name="NotSupportedError",e.code=DOMException.NOT_SUPPORTED_ERR,Promise.reject(e))},Tg.prototype.unlock=function(){screen.unlockOrientation?screen.unlockOrientation():screen.mozUnlockOrientation?screen.mozUnlockOrientation():screen.msUnlockOrientation&&screen.msUnlockOrientation()},qp(wg),Xp.PatchedMediaKeysApple=Ag,Ag.uninstall=function(){cg&&(cg=!1,Object.defineProperty(HTMLMediaElement.prototype,"mediaKeys",dg),HTMLMediaElement.prototype.setMediaKeys=hg,e.MediaKeys=fg,e.MediaKeySystemAccess=pg,navigator.requestMediaKeySystemAccess=gg,dg=gg=hg=pg=fg=null,e.shakaMediaKeysPolyfill=!1)},Ag.install=function(t){e.HTMLVideoElement&&e.WebKitMediaKeys&&(void 0!==t&&t&&(cg=!0,dg=Object.getOwnPropertyDescriptor(HTMLMediaElement.prototype,"mediaKeys"),hg=HTMLMediaElement.prototype.setMediaKeys,fg=e.MediaKeys,pg=e.MediaKeySystemAccess,gg=navigator.requestMediaKeySystemAccess),delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=Eg,e.MediaKeys=Cg,e.MediaKeySystemAccess=kg,navigator.requestMediaKeySystemAccess=Sg,e.shakaMediaKeysPolyfill=!0)},kg.prototype.createMediaKeys=function(){var e=new Cg(this.keySystem);return Promise.resolve(e)},kg.prototype.getConfiguration=function(){return this.g},Cg.prototype.createSession=function(e){if("temporary"!=(e=e||"temporary"))throw new TypeError("Session type "+e+" is unsupported on this platform.");return new Mg(this.h)},Cg.prototype.setServerCertificate=function(){return Promise.resolve(!1)},v(Mg,xr),(i=Mg.prototype).generateRequest=function(e,t){var n=this;this.h=new it;try{var r=this.l.createSession("video/mp4",_e(t));this.i=r,this.sessionId=r.sessionId||"",this.j.C(this.i,"webkitkeymessage",(function(e){n.h&&(n.h.resolve(),n.h=null),e=new vr("message",e=(new Map).set("messageType",null==n.keyStatuses.Eb()?"license-request":"license-renewal").set("message",Ce(e.message))),n.dispatchEvent(e)})),this.j.C(r,"webkitkeyadded",(function(){n.g&&(Rg(n,"usable"),n.g.resolve(),n.g=null)})),this.j.C(r,"webkitkeyerror",(function(){var e=Error("EME PatchedMediaKeysApple key error");if(e.errorCode=n.i.error,null!=n.h)n.h.reject(e),n.h=null;else if(null!=n.g)n.g.reject(e),n.g=null;else switch(n.i.error.code){case WebKitMediaKeyError.MEDIA_KEYERR_OUTPUT:case WebKitMediaKeyError.MEDIA_KEYERR_HARDWARECHANGE:Rg(n,"output-not-allowed");break;default:Rg(n,"internal-error")}})),Rg(this,"status-pending")}catch(i){this.h.reject(i)}return this.h},i.load=function(){return Promise.reject(Error("MediaKeySession.load not yet supported"))},i.update=function(e){this.g=new it;try{this.i.update(_e(e))}catch(t){this.g.reject(t)}return this.g},i.close=function(){try{this.i.close(),this.closed.resolve(),this.j.nb()}catch(Vv){this.closed.reject(Vv)}return this.closed},i.remove=function(){return Promise.reject(Error("MediaKeySession.remove is only applicable for persistent licenses, which are not supported on this platform"))},(i=Ng.prototype).Eb=function(){return this.g},i.forEach=function(e){this.g&&e(this.g,Wi.value())},i.get=function(e){if(this.has(e))return this.g},i.has=function(e){var t=Wi.value();return!(!this.g||!Ie(e,t))},i.entries=function(){},i.keys=function(){},i.values=function(){},Xp.PatchedMediaKeysNop=Lg,Lg.install=Dg,Ug.prototype.createSession=function(){},Ug.prototype.setServerCertificate=function(){},Bg.prototype.getConfiguration=function(){},Bg.prototype.createMediaKeys=function(){},qp(Dg,-10),Xp.PatchedMediaKeysWebkit=jg,jg.install=Fg,Kg.prototype.createMediaKeys=function(){var e=new Hg(this.g);return Promise.resolve(e)},Kg.prototype.getConfiguration=function(){return this.h},Hg.prototype.createSession=function(e){if("temporary"!=(e=e||"temporary")&&"persistent-license"!=e)throw new TypeError("Session type "+e+" is unsupported on this platform.");var t=this.h||document.createElement("video");return t.src||(t.src="about:blank"),e=new qg(t,this.l,e),this.i.push(e),e},Hg.prototype.setServerCertificate=function(){return Promise.resolve(!1)},v(qg,xr),(i=qg.prototype).handleError=function(e){var t=Error("EME v0.1b key error"),n=e.errorCode;n.systemCode=e.systemCode,t.errorCode=n,!e.sessionId&&this.h?(45==e.systemCode&&(t.message="Unsupported session type."),this.h.reject(t),this.h=null):e.sessionId&&this.g?(this.g.reject(t),this.g=null):(t=e.systemCode,e.errorCode.code==MediaKeyError.MEDIA_KEYERR_OUTPUT?Qg(this,"output-restricted"):Qg(this,1==t?"expired":"internal-error"))},i.generateRequest=function(e,t){return Yg(this,t,null)},i.load=function(e){return"persistent-license"==this.l?Yg(this,null,e):Promise.reject(Error("Not a persistent session."))},i.update=function(e){var t=new it;return $g(this,t,e),t},i.close=function(){if("persistent-license"!=this.l){if(!this.sessionId)return this.closed.reject(Error("The session is not callable.")),this.closed;var e=zg("cancelKeyRequest");try{this.j[e](this.i,this.sessionId)}catch(t){}}return this.closed.resolve(),this.closed},i.remove=function(){return"persistent-license"!=this.l?Promise.reject(Error("Not a persistent session.")):this.close()},(i=Jg.prototype).Eb=function(){return this.g},i.forEach=function(e){this.g&&e(this.g,Wi.value())},i.get=function(e){if(this.has(e))return this.g},i.has=function(e){var t=Wi.value();return!(!this.g||!Ie(e,t))},i.entries=function(){},i.keys=function(){},i.values=function(){};var Zg="";function em(){}function tm(){if(e.HTMLVideoElement){var t=HTMLVideoElement.prototype;t.requestPictureInPicture&&document.exitPictureInPicture||!t.webkitSupportsPresentationMode||(document.pictureInPictureEnabled=!0,document.pictureInPictureElement=null,t.requestPictureInPicture=rm,Object.defineProperty(t,"disablePictureInPicture",{get:am,set:om,enumerable:!0,configurable:!0}),document.exitPictureInPicture=im,document.addEventListener("webkitpresentationmodechanged",nm,!0))}}function nm(e){if("picture-in-picture"==(e=e.target).webkitPresentationMode){document.pictureInPictureElement=e;var t=new Event("enterpictureinpicture");e.dispatchEvent(t)}else document.pictureInPictureElement==e&&(document.pictureInPictureElement=null),t=new Event("leavepictureinpicture"),e.dispatchEvent(t)}function rm(){return this.webkitSupportsPresentationMode("picture-in-picture")?(this.webkitSetPresentationMode("picture-in-picture"),document.pictureInPictureElement=this,Promise.resolve()):Promise.reject(Error("PiP not allowed by video element"))}function im(){var e=document.pictureInPictureElement;return e?(e.webkitSetPresentationMode("inline"),document.pictureInPictureElement=null,Promise.resolve()):Promise.reject(Error("No picture in picture element found"))}function am(){return!!this.hasAttribute("disablePictureInPicture")||!this.webkitSupportsPresentationMode("picture-in-picture")}function om(e){e?this.setAttribute("disablePictureInPicture",""):this.removeAttribute("disablePictureInPicture")}function sm(){}function um(){e.crypto&&("randomUUID"in e.crypto||(e.crypto.randomUUID=lm))}function lm(){var e=URL.createObjectURL(new Blob),t=e.toString();return URL.revokeObjectURL(e),t.substr(t.lastIndexOf("/")+1)}function cm(){}function dm(){navigator.storage&&navigator.storage.estimate||!navigator.webkitTemporaryStorage||!navigator.webkitTemporaryStorage.queryUsageAndQuota||("storage"in navigator||(navigator.storage={}),navigator.storage.estimate=hm)}function hm(){return new Promise((function(e,t){navigator.webkitTemporaryStorage.queryUsageAndQuota((function(t,n){e({usage:t,quota:n})}),t)}))}function fm(){}function pm(){var e=Symbol.prototype;"description"in e||Object.defineProperty(e,"description",{get:gm})}function gm(){var e=/\((.*)\)/.exec(this.toString());return e?e[1]:void 0}function mm(){}function vm(){if(e.HTMLMediaElement){var t=HTMLMediaElement.prototype.play;HTMLMediaElement.prototype.play=function(){var e=t.apply(this);return e&&e.catch((function(){})),e}}}function ym(){}function bm(){if(e.HTMLVideoElement){var t=HTMLVideoElement.prototype;!t.getVideoPlaybackQuality&&("webkitDroppedFrameCount"in t||ht())&&(t.getVideoPlaybackQuality=xm)}}function xm(){return{droppedVideoFrames:this.webkitDroppedFrameCount,totalVideoFrames:this.webkitDecodedFrameCount,corruptedVideoFrames:0,creationTime:NaN,totalFrameDelay:0}}function wm(){}function Tm(){if(!e.VTTCue&&e.TextTrackCue){var t=null,n=TextTrackCue.length;if(3==n)t=Am;else if(6==n)t=Sm;else{try{var r=!!Am(1,2,"")}catch(i){r=!1}r&&(t=Am)}t&&(e.VTTCue=function(e,n,r){return t(e,n,r)})}}function Am(t,n,r){return new e.TextTrackCue(t,n,r)}function Sm(t,n,r){return new e.TextTrackCue(t+"-"+n+"-"+r,t,n,r)}function Em(){}qp(Fg),Xp.PiPWebkit=em,em.install=tm,qp(tm),Xp.RandomUUID=sm,sm.install=um,qp(um),Xp.StorageEstimate=cm,cm.install=dm,qp(dm),Xp.Symbol=fm,fm.install=pm,qp(pm),Xp.VideoPlayPromise=mm,mm.install=vm,qp(vm),Xp.VideoPlaybackQuality=ym,ym.install=bm,qp(bm),Xp.VTTCue=wm,wm.install=Tm,qp(Tm),Em.prototype.parseInit=function(){},Em.prototype.setSequenceMode=function(){},Em.prototype.parseMedia=function(e,t){for(var n=null,r=[],i=(e=c(e=wt(e).split(/\r?\n/))).next();!i.done;i=e.next())if((i=i.value)&&!/^\s+$/.test(i)&&(i=Im.exec(i))){var a=km.exec(i[1]);i=new ae(a=60*parseInt(a[1],10)+parseFloat(a[2].replace(",",".")),t.segmentEnd?t.segmentEnd:a+2,i[2]),n&&(n.endTime=a,r.push(n)),n=i}return n&&r.push(n),r},z("shaka.text.LrcTextParser",Em),Em.prototype.parseMedia=Em.prototype.parseMedia,Em.prototype.setSequenceMode=Em.prototype.setSequenceMode,Em.prototype.parseInit=Em.prototype.parseInit;var Im=/^\[(\d{1,2}:\d{1,2}(?:[.,]\d{1,3})?)\](.*)/,km=/^(\d+):(\d{1,2}(?:[.,]\d{1,3})?)$/;function Cm(){}function _m(e,t,n,r,i,a,o,s,u,l,d){var h=e.parentNode;if(e.nodeType==Node.COMMENT_NODE)return null;if(e.nodeType==Node.TEXT_NODE){if(!d)return null;var f=document.createElement("span");f.textContent=e.textContent}else f=e;for(var p=null,g=c(tv),m=g.next();!m.done&&!(p=Pm(f,"backgroundImage",r,"#",m.value)[0]);m=g.next());if(g=d,("p"==e.nodeName||p)&&(d=!0),s="default"==(f.getAttribute("xml:space")||(s?"default":"preserve")),e=[],!(m=Array.from(f.childNodes).every((function(e){return e.nodeType==Node.TEXT_NODE}))))for(var v=c(f.childNodes),y=v.next();!y.done;y=v.next())(y=_m(y.value,t,n,r,i,a,o,s,u,f,d))&&e.push(y);r=null!=l,v=/\S/.test(f.textContent);var b=f.hasAttribute("begin")||f.hasAttribute("end")||f.hasAttribute("dur");if(!(b||v||"br"==f.tagName||0!=e.length||r&&!s))return null;for(v=(y=Um(f,n)).start,y=y.end;h&&h.nodeType==Node.ELEMENT_NODE&&"tt"!=h.tagName;)v=(y=Om(h,n,v,y)).start,y=y.end,h=h.parentNode;if(null==v&&(v=0),v+=t.periodStart,y=null==y?1/0:y+t.periodStart,v=Math.max(v,t.segmentStart),y=Math.min(y,t.segmentEnd),!b&&0<e.length)for(v=1/0,y=0,n=(t=c(e)).next();!n.done;n=t.next())n=n.value,v=Math.min(v,n.startTime),y=Math.max(y,n.endTime);if("br"==f.tagName)return(i=new ae(v,y,"")).lineBreak=!0,i;if(t="",m&&(t=f.textContent,s&&(t=(t=t.trim()).replace(/\s+/g," "))),(t=new ae(v,y,t)).nestedCues=e,d||(t.isContainer=!0),u&&(t.cellResolution=u),u=Pm(f,"region",a,"")[0],f.hasAttribute("region")&&u&&u.getAttribute("xml:id")){var x=u.getAttribute("xml:id");t.region=o.filter((function(e){return e.id==x}))[0]}return o=u,l&&r&&!f.getAttribute("region")&&!f.getAttribute("style")&&(o=Pm(l,"region",a,"")[0]),function(e,t,n,r,i,a,o){a=a||o,"rtl"==Rm(t,n,i,"direction",a)&&(e.direction="rtl"),o=Rm(t,n,i,"writingMode",a),"tb"==o||"tblr"==o?e.writingMode="vertical-lr":"tbrl"==o?e.writingMode="vertical-rl":"rltb"==o||"rl"==o?e.direction="rtl":o&&(e.direction=he),(o=Rm(t,n,i,"textAlign",!0))?(e.positionAlign=Jm[o],e.lineAlign=Qm[o],e.textAlign=le[o.toUpperCase()]):e.textAlign=ue,(o=Rm(t,n,i,"displayAlign",!0))&&(e.displayAlign=de[o.toUpperCase()]);(o=Rm(t,n,i,"color",a))&&(e.color=o);(o=Rm(t,n,i,"backgroundColor",a))&&(e.backgroundColor=o);(o=Rm(t,n,i,"border",a))&&(e.border=o);if(o=Rm(t,n,i,"fontFamily",a))switch(o){case"monospaceSerif":e.fontFamily="Courier New,Liberation Mono,Courier,monospace";break;case"proportionalSansSerif":e.fontFamily="Arial,Helvetica,Liberation Sans,sans-serif";break;case"sansSerif":e.fontFamily="sans-serif";break;case"monospaceSansSerif":e.fontFamily="Consolas,monospace";break;case"proportionalSerif":e.fontFamily="serif";break;default:e.fontFamily=o}(o=Rm(t,n,i,"fontWeight",a))&&"bold"==o&&(e.fontWeight=700),o=Rm(t,n,i,"wrapOption",a),e.wrapLine=!o||"noWrap"!=o,(o=Rm(t,n,i,"lineHeight",a))&&o.match(Vm)&&(e.lineHeight=o),(o=Rm(t,n,i,"fontSize",a))&&(o.match(Vm)||o.match(Gm))&&(e.fontSize=o),(o=Rm(t,n,i,"fontStyle",a))&&(e.fontStyle=we[o.toUpperCase()]);if(r){o=r.getAttribute("imageType")||r.getAttribute("imagetype");var s=r.getAttribute("encoding");r=r.textContent.trim(),"PNG"==o&&"Base64"==s&&r&&(e.backgroundImage="data:image/png;base64,"+r)}(r=Rm(t,n,i,"textOutline",a))&&(r=r.split(" "),r[0].match(Vm)?e.textStrokeColor=e.color:(e.textStrokeColor=r[0],r.shift()),r[0]&&r[0].match(Vm)?e.textStrokeWidth=r[0]:e.textStrokeColor="");(r=Rm(t,n,i,"letterSpacing",a))&&r.match(Vm)&&(e.letterSpacing=r),(r=Rm(t,n,i,"linePadding",a))&&r.match(Vm)&&(e.linePadding=r),(a=Rm(t,n,i,"opacity",a))&&(e.opacity=parseFloat(a));(n=Nm(n,i,"textDecoration"))&&Mm(e,n),(t=Lm(t,i,"textDecoration"))&&Mm(e,t)}(t,f,o,p,i,g,0==e.length),t}function Mm(e,t){for(var n=(t=c(t.split(" "))).next();!n.done;n=t.next())switch(n.value){case"underline":e.textDecoration.includes("underline")||e.textDecoration.push("underline");break;case"noUnderline":e.textDecoration.includes("underline")&&ne(e.textDecoration,"underline");break;case"lineThrough":e.textDecoration.includes("lineThrough")||e.textDecoration.push("lineThrough");break;case"noLineThrough":e.textDecoration.includes("lineThrough")&&ne(e.textDecoration,"lineThrough");break;case"overline":e.textDecoration.includes("overline")||e.textDecoration.push("overline");break;case"noOverline":e.textDecoration.includes("overline")&&ne(e.textDecoration,"overline")}}function Rm(e,t,n,r,i){return i=void 0===i||i,(e=Lm(e,n,r))?e:i?Nm(t,n,r):null}function Nm(e,t,n){if(!e)return null;var r=li(e,ev,n);return r||Dm(e,t,n)}function Lm(e,t,n){var r=li(e,ev,n);return r||Dm(e,t,n)}function Dm(e,t,n){e=Pm(e,"style",t,"");for(var r=null,i=0;i<e.length;i++){var a=ui(e[i],"urn:ebu:tt:style",n);a||(a=li(e[i],ev,n)),a||(a=Lm(e[i],t,n)),a&&(r=a)}return r}function Pm(e,t,n,r,i){var a=[];if(!e||1>n.length)return a;var o=e;for(e=null;o&&!(e=i?ui(o,i,t):o.getAttribute(t))&&(o=o.parentNode)instanceof Element;);if(t=e)for(i=(t=c(t.split(" "))).next();!i.done;i=t.next())for(i=i.value,o=(e=c(n)).next();!o.done;o=e.next())if(r+(o=o.value).getAttribute("xml:id")==i){a.push(o);break}return a}function Om(e,t,n,r){return e=Um(e,t),null==n?n=e.start:null!=e.start&&(n+=e.start),null==r?r=e.end:null!=e.start&&(r+=e.start),{start:n,end:r}}function Um(e,t){var n=Bm(e.getAttribute("begin"),t),r=Bm(e.getAttribute("end"),t);return e=Bm(e.getAttribute("dur"),t),null==r&&null!=e&&(r=n+e),{start:n,end:r}}function Bm(e,t){var n=null;if(Hm.test(e)){e=Hm.exec(e),n=Number(e[1]);var r=Number(e[2]),i=Number(e[3]),a=Number(e[4]);n=(i+=(a+=(Number(e[5])||0)/t.h)/t.frameRate)+60*r+3600*n}else if(Wm.test(e))n=jm(Wm,e);else if(Xm.test(e))n=jm(Xm,e);else if(qm.test(e))e=qm.exec(e),n=Number(e[1])/t.frameRate;else if(Ym.test(e))e=Ym.exec(e),n=Number(e[1])/t.g;else if($m.test(e))n=jm($m,e);else if(e)throw new Ne(2,2,2001,"Could not parse cue time range in TTML");return n}function jm(e,t){return null==(e=e.exec(t))||""==e[0]?null:(Number(e[4])||0)/1e3+(Number(e[3])||0)+60*(Number(e[2])||0)+3600*(Number(e[1])||0)}function Fm(e,t,n,r){this.frameRate=Number(e)||30,this.h=Number(t)||1,this.g=Number(r),0==this.g&&(this.g=e?this.frameRate*this.h:1),n&&(e=/^(\d+) (\d+)$/g.exec(n))&&(this.frameRate*=Number(e[1])/Number(e[2]))}Zt["application/x-subtitle-lrc"]=function(){return new Em},Cm.prototype.parseInit=function(){},Cm.prototype.setSequenceMode=function(){},Cm.prototype.parseMedia=function(e,t){var n=wt(e);if(e=[],""==n)return e;var r=wi(n,"tt");if(!r)throw new Ne(2,2,2005,"Failed to parse TTML.");if(!(n=r.getElementsByTagName("body")[0]))return[];var i=li(r,Zm,"frameRate"),a=li(r,Zm,"subFrameRate"),o=li(r,Zm,"frameRateMultiplier"),s=li(r,Zm,"tickRate"),u=li(r,Zm,"cellResolution"),l=r.getAttribute("xml:space")||"default",d=li(r,ev,"extent");if("default"!=l&&"preserve"!=l)throw new Ne(2,2,2005,"Invalid xml:space value: "+l);l="default"==l,i=new Fm(i,a,o,s),u=u&&(u=/^(\d+) (\d+)$/.exec(u))?{columns:parseInt(u[1],10),rows:parseInt(u[2],10)}:null,a=(a=r.getElementsByTagName("metadata")[0])?function(e){return Array.from(e.childNodes).filter((function(e){return e instanceof Element}))}(a):[],o=Array.from(r.getElementsByTagName("style")),s=[];for(var h=c(r=Array.from(r.getElementsByTagName("region"))),f=h.next();!f.done;f=h.next()){var p=f.value;f=new Te;var g=p.getAttribute("xml:id");if(g){f.id=g;var m,v,y=null;d&&(y=zm.exec(d)||Km.exec(d)),g=y?Number(y[1]):null,y=y?Number(y[2]):null,(m=Nm(p,o,"extent"))&&(null!=(m=(v=zm.exec(m))||Km.exec(m))&&(f.width=Number(m[1]),f.height=Number(m[2]),v||(null!=g&&(f.width=100*f.width/g),null!=y&&(f.height=100*f.height/y)),f.widthUnits=v||null!=g?Ae:0,f.heightUnits=v||null!=y?Ae:0)),(p=Nm(p,o,"origin"))&&(null!=(m=(v=zm.exec(p))||Km.exec(p))&&(f.viewportAnchorX=Number(m[1]),f.viewportAnchorY=Number(m[2]),v||(null!=y&&(f.viewportAnchorY=100*f.viewportAnchorY/y),null!=g&&(f.viewportAnchorX=100*f.viewportAnchorX/g)),f.viewportAnchorUnits=v||null!=g?Ae:0))}else f=null;f&&s.push(f)}if(oi(n,"p").length)throw new Ne(2,2,2001,"<p> can only be inside <div> in TTML");for(h=(d=c(oi(n,"div"))).next();!h.done;h=d.next())if(oi(h.value,"span").length)throw new Ne(2,2,2001,"<span> can only be inside <p> in TTML");return(t=_m(n,t,i,a,o,r,s,l,u,null,!1))&&(t.backgroundColor||(t.backgroundColor="transparent"),e.push(t)),e},z("shaka.text.TtmlTextParser",Cm),Cm.prototype.parseMedia=Cm.prototype.parseMedia,Cm.prototype.setSequenceMode=Cm.prototype.setSequenceMode,Cm.prototype.parseInit=Cm.prototype.parseInit;var zm=/^(\d{1,2}(?:\.\d+)?|100(?:\.0+)?)% (\d{1,2}(?:\.\d+)?|100(?:\.0+)?)%$/,Gm=/^(\d{1,2}(?:\.\d+)?|100)%$/,Vm=/^(\d+px|\d+em|\d*\.?\d+c)$/,Km=/^(\d+)px (\d+)px$/,Hm=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,Wm=/^(?:(\d{2,}):)?(\d{2}):(\d{2})$/,Xm=/^(?:(\d{2,}):)?(\d{2}):(\d{2}\.\d{2,})$/,qm=/^(\d*(?:\.\d*)?)f$/,Ym=/^(\d*(?:\.\d*)?)t$/,$m=RegExp("^(?:(\\d*(?:\\.\\d*)?)h)?(?:(\\d*(?:\\.\\d*)?)m)?(?:(\\d*(?:\\.\\d*)?)s)?(?:(\\d*(?:\\.\\d*)?)ms)?$"),Qm={left:ge,center:"center",right:"end",start:ge,end:"end"},Jm={left:"line-left",center:"center",right:"line-right"},Zm=["http://www.w3.org/ns/ttml#parameter","http://www.w3.org/2006/10/ttaf1#parameter"],ev=["http://www.w3.org/ns/ttml#styling","http://www.w3.org/2006/10/ttaf1#styling"],tv=["http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt","http://www.smpte-ra.org/schemas/2052-1/2013/smpte-tt"];function nv(){this.g=new Cm}function rv(){this.g=!1}function iv(e){for(var t=c(Object.entries(ve)),n=t.next();!n.done;n=t.next()){var r=c(n.value);n=r.next().value,r=r.next().value;var i=new ae(0,0,"");i.color=r,e.set("."+n,i)}for(n=(t=c(Object.entries(ye))).next();!n.done;n=t.next())n=(r=c(n.value)).next().value,r=r.next().value,(i=new ae(0,0,"")).backgroundColor=r,e.set("."+n,i)}function av(e,t,n){0===n.size&&iv(n);e:{var r=e;e=[];for(var i=-1,a="",o=0;o<r.length;o++)if("/"===r[o]&&0<o&&"<"===r[o-1]){var s=r.indexOf(">",o);if(s<=o){e=r;break e}if((s=r.substring(o+1,s))&&"c"===s){var u=e.pop();u?u===s?(a+="/"+s+">",o+=s.length+1):u.startsWith("c.")?(o+=s.length+1,a+="/"+u+">"):a+=r[o]:a+=r[o]}else a+=r[o]}else"<"===r[o]?"c"!=r[i=o+1]&&(i=-1):">"===r[o]&&0<i&&(e.push(r.substr(i,o-i)),i=-1),a+=r[o];e=a}for(r=[],a=-1,i=0;i<e.length;i++)"<"===e[i]?a=i+1:">"===e[i]&&0<a&&((a=e.substr(a,i-a)).match(dv)&&r.push(a),a=-1);for(i=(r=c(r)).next();!i.done;i=r.next())i=i.value,e=e.replace("<"+i+">",'<div time="'+i+'">'),e+="</div>";e:{for(i=e,a=[],o=-1,r="",e=!1,s=0;s<i.length;s++)if("/"===i[s]){if(-1===(u=i.indexOf(">",s))){e=i;break e}if((u=i.substring(s+1,u))&&"v"==u){e=!0;var l=null;if(a.length&&(l=a[a.length-1]),l){if(l===u)r+="/"+u+">";else{if(!l.startsWith("v")){r+=i[s];continue}r+="/"+l+">"}s+=u.length+1}else r+=i[s]}else r+=i[s]}else"<"===i[s]?"v"!=i[o=s+1]&&(o=-1):">"===i[s]&&0<o&&(a.push(i.substr(o,s-o)),o=-1),r+=i[s];for(a=(i=c(a)).next();!a.done;a=i.next())o=(a=a.value).replace(" ",".voice-"),r=(r=r.replace("<"+a+">","<"+o+">")).replace("</"+a+">","</"+o+">"),e||(r+="</"+o+">");e=r}if(i=wi("<span>"+e+"</span>","span")){if(r=[],1==(i=i.childNodes).length&&((a=i[0]).nodeType==Node.TEXT_NODE||a.nodeType==Node.CDATA_SECTION_NODE))return void(t.payload=e);for(i=(e=c(i)).next();!i.done;i=e.next())sv(i.value,t,r,n);t.nestedCues=r}else t.payload=e}function ov(e,t){return e&&0<e.length?e:t}function sv(e,t,n,r){var i=t.clone();if(e.nodeType===Node.ELEMENT_NODE&&e.nodeName)for(var a=c(e.nodeName.split(/(?=[ .])+/g)),o=a.next();!o.done;o=a.next()){var s=o=o.value;if(s.startsWith(".voice-")){var u=s.split("-").pop();s='v[voice="'+u+'"]',r.has(s)||(s="v[voice="+u+"]")}switch(r.has(s)&&(s=r.get(s))&&(i.backgroundColor=ov(s.backgroundColor,i.backgroundColor),i.color=ov(s.color,i.color),i.fontFamily=ov(s.fontFamily,i.fontFamily),i.fontSize=ov(s.fontSize,i.fontSize),i.fontWeight=s.fontWeight,i.fontStyle=s.fontStyle,i.opacity=s.opacity,i.wrapLine=s.wrapLine),o){case"br":(o=t.clone()).lineBreak=!0,n.push(o);break;case"b":i.fontWeight=700;break;case"i":i.fontStyle="italic";break;case"u":i.textDecoration.push("underline");break;case"div":(o=e.getAttribute("time"))&&(o=lv(new _h(o)))&&(i.startTime=o)}}if(di(e))for(a=!0,r=c(e.textContent.split("\n")),e=r.next();!e.done;e=r.next())e=e.value,a||((a=t.clone()).lineBreak=!0,n.push(a)),0<e.length&&((a=i.clone()).payload=e,n.push(a)),a=!1;else for(e=(t=c(e.childNodes)).next();!e.done;e=t.next())sv(e.value,i,n,r)}function uv(e,t,n){var r;(r=/^align:(start|middle|center|end|left|right)$/.exec(t))?(t=r[1],e.textAlign="middle"==t?ue:le[t.toUpperCase()]):(r=/^vertical:(lr|rl)$/.exec(t))?e.writingMode="lr"==r[1]?"vertical-lr":"vertical-rl":(r=/^size:([\d.]+)%$/.exec(t))?e.size=Number(r[1]):(r=/^position:([\d.]+)%(?:,(line-left|line-right|center|start|end))?$/.exec(t))?(e.position=Number(r[1]),r[2]&&(t=r[2],e.positionAlign="line-left"==t||"start"==t?"line-left":"line-right"==t||"end"==t?"line-right":"center")):(r=/^region:(.*)$/.exec(t))?(t=function(e,t){return e=e.filter((function(e){return e.id==t})),e.length?e[0]:null}(n,r[1]))&&(e.region=t):(n=/^line:([\d.]+)%(?:,(start|end|center))?$/.exec(t))?(e.lineInterpretation=1,e.line=Number(n[1]),n[2]&&(e.lineAlign=me[n[2].toUpperCase()])):(n=/^line:(-?\d+)(?:,(start|end|center))?$/.exec(t))&&(e.lineInterpretation=pe,e.line=Number(n[1]),n[2]&&(e.lineAlign=me[n[2].toUpperCase()]))}function lv(e){if(null==(e=Rh(e,dv)))return null;var t=Number(e[2]),n=Number(e[3]);return 59<t||59<n?null:Number(e[4])/1e3+n+60*t+3600*(Number(e[1])||0)}function cv(e){var t={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&nbsp;":"","&lrm;":"","&rlm;":""},n=/&(?:amp|lt|gt|quot|#(0+)?39|nbsp|lrm|rlm);/g,r=RegExp(n.source);return e&&r.test(e)?e.replace(n,(function(e){return t[e]||"'"})):e||""}Zt["application/ttml+xml"]=function(){return new Cm},nv.prototype.parseInit=function(e){var t=!1;if((new Wr).box("moov",Xr).box("trak",Xr).box("mdia",Xr).box("minf",Xr).box("stbl",Xr).P("stsd",qr).box("stpp",(function(e){t=!0,e.parser.stop()})).parse(e),!t)throw new Ne(2,2,2007)},nv.prototype.setSequenceMode=function(){},nv.prototype.parseMedia=function(e,t){var n=this,r=!1,i=[];if((new Wr).box("mdat",$r((function(e){r=!0,i=i.concat(n.g.parseMedia(e,t))}))).parse(e,!1),!r)throw new Ne(2,2,2007);return i},z("shaka.text.Mp4TtmlParser",nv),nv.prototype.parseMedia=nv.prototype.parseMedia,nv.prototype.setSequenceMode=nv.prototype.setSequenceMode,nv.prototype.parseInit=nv.prototype.parseInit,Zt['application/mp4; codecs="stpp"']=function(){return new nv},Zt['application/mp4; codecs="stpp.ttml"']=function(){return new nv},Zt['application/mp4; codecs="stpp.ttml.im1t"']=function(){return new nv},Zt['application/mp4; codecs="stpp.TTML.im1t"']=function(){return new nv},rv.prototype.parseInit=function(){},rv.prototype.setSequenceMode=function(e){this.g=e},rv.prototype.parseMedia=function(e,t){var n=(e=(e=wt(e)).replace(/\r\n|\r(?=[^\n]|$)/gm,"\n")).split(/\n{2,}/m);if(!/^WEBVTT($|[ \t\n])/m.test(n[0]))throw new Ne(2,2,2e3);if(e=t.vttOffset,n[0].includes("X-TIMESTAMP-MAP")&&this.g){var r=n[0].match(/LOCAL:((?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{3}))/m),i=n[0].match(/MPEGTS:(\d+)/m);if(r&&i){if(null==(e=lv(new _h(r[1]))))throw new Ne(2,2,2e3);for(i=Number(i[1]),r=t.segmentStart-t.periodStart;95443.7176888889<=r;)r-=95443.7176888889,i+=8589934592;e=t.periodStart+i/9e4-e}}for(t=[],r=(i=c(n[0].split("\n"))).next();!r.done;r=i.next())if(r=r.value,/^Region:/.test(r)){r=new _h(r);var a=new Te;Nh(r),Mh(r);for(var o=Nh(r);o;){var s=a,u=o;(o=/^id=(.*)$/.exec(u))?s.id=o[1]:(o=/^width=(\d{1,2}|100)%$/.exec(u))?s.width=Number(o[1]):(o=/^lines=(\d+)$/.exec(u))?(s.height=Number(o[1]),s.heightUnits=2):(o=/^regionanchor=(\d{1,2}|100)%,(\d{1,2}|100)%$/.exec(u))?(s.regionAnchorX=Number(o[1]),s.regionAnchorY=Number(o[2])):(o=/^viewportanchor=(\d{1,2}|100)%,(\d{1,2}|100)%$/.exec(u))?(s.viewportAnchorX=Number(o[1]),s.viewportAnchorY=Number(o[2])):/^scroll=up$/.exec(u)&&(s.scroll="up"),Mh(r),o=Nh(r)}t.push(a)}for(iv(i=new Map),r=[],a=(n=c(n.slice(1))).next();!a.done;a=n.next()){if((1!=(a=a.value.split("\n")).length||a[0])&&!/^NOTE($|[ \t])/.test(a[0])&&"STYLE"==a[0]){for(s=[],o=-1,u=1;u<a.length;u++)a[u].includes("::cue")&&(s.push([]),o=s.length-1),-1!=o&&(s[o].push(a[u]),a[u].includes("}")&&(o=-1));for(o=(s=c(s)).next();!o.done;o=s.next()){var l=o.value;o="global",(u=l[0].match(/\((.*)\)/))&&(o=u.pop()),u=l.slice(1,-1),l[0].includes("}")&&(l=/\{(.*?)\}/.exec(l[0]))&&(u=l[1].split(";")),(l=i.get(o))||(l=new ae(0,0,""));for(var d=!1,h=0;h<u.length;h++){var f=/^\s*([^:]+):\s*(.*)/.exec(u[h]);if(f){var p=f[2].trim().replace(";","");switch(f[1].trim()){case"background-color":case"background":d=!0,l.backgroundColor=p;break;case"color":d=!0,l.color=p;break;case"font-family":d=!0,l.fontFamily=p;break;case"font-size":d=!0,l.fontSize=p;break;case"font-weight":(700<=parseInt(p,10)||"bold"==p)&&(d=!0,l.fontWeight=700);break;case"font-style":switch(p){case"normal":d=!0,l.fontStyle=xe;break;case"italic":d=!0,l.fontStyle="italic";break;case"oblique":d=!0,l.fontStyle="oblique"}break;case"opacity":d=!0,l.opacity=parseFloat(p);break;case"text-shadow":d=!0,l.textShadow=p;break;case"white-space":d=!0,l.wrapLine="noWrap"!=p}}}d&&i.set(o,l)}}if(d=e,1==a.length&&!a[0]||/^NOTE($|[ \t])/.test(a[0])||"STYLE"==a[0]||"REGION"==a[0])a=null;else{if(s=null,a[0].includes("--\x3e")||(s=a[0],a.splice(0,1)),u=lv(o=new _h(a[0])),h=Rh(o,/[ \t]+--\x3e[ \t]+/g),l=lv(o),null==u||null==h||null==l)throw new Ne(2,2,2001,"Could not parse cue time range in WebVTT");for(u+=d,l+=d,d=cv(a.slice(1).join("\n").trim()),i.has("global")?((a=i.get("global").clone()).startTime=u,a.endTime=l,a.payload=""):a=new ae(u,l,""),av(d,a,i),Mh(o),u=Nh(o);u;)uv(a,u,t),Mh(o),u=Nh(o);null!=s&&(a.id=s)}a&&r.push(a)}return r},z("shaka.text.VttTextParser",rv),rv.prototype.parseMedia=rv.prototype.parseMedia,rv.prototype.setSequenceMode=rv.prototype.setSequenceMode,rv.prototype.parseInit=rv.prototype.parseInit;var dv=/(?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{2,3})/g;function hv(){this.g=null}function fv(e,t,n){var r,i,a;return(new Wr).box("payl",$r((function(e){r=wt(e)}))).box("iden",$r((function(e){i=wt(e)}))).box("sttg",$r((function(e){a=wt(e)}))).parse(e),r?function(e,t,n,r,i){if(r=new ae(r,i,""),av(e,r,new Map),t&&(r.id=t),n)for(e=new _h(n),t=Nh(e);t;)uv(r,t,[]),Mh(e),t=Nh(e);return r}(r,i,a,t,n):null}function pv(){}function gv(e){if(null==(e=Rh(e,/(?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{2,3})/g)))return null;var t=Number(e[2]),n=Number(e[3]);return 59<t||59<n?null:Number(e[4])/1e3+n+60*t+3600*(Number(e[1])||0)}function mv(){this.g=new rv}function vv(e){var t="WEBVTT\n\n";if(""==e)return t;for(var n=(e=c((e=(e=e.replace(/\r+/g,"")).trim()).split("\n\n"))).next();!n.done;n=e.next())(n=n.value.split(/\n/))[0].match(/\d+/)&&n.shift(),n[0]=n[0].replace(/,/g,"."),t+=n.join("\n")+"\n\n";return t}function yv(){}function bv(e,t){var n=t.Fontname;if(n&&(e.fontFamily=n),(n=t.Fontsize)&&(e.fontSize=n+"px"),(n=t.PrimaryColour)&&(n=xv(n))&&(e.color=n),(n=t.BackColour)&&(n=xv(n))&&(e.backgroundColor=n),t.Bold&&(e.fontWeight=700),t.Italic&&(e.fontStyle="italic"),t.Underline&&e.textDecoration.push("underline"),(n=t.Spacing)&&(e.letterSpacing=n+"px"),n=t.Alignment)switch(parseInt(n,10)){case 1:e.displayAlign=ce,e.textAlign="start";break;case 2:e.displayAlign=ce,e.textAlign=ue;break;case 3:e.displayAlign=ce,e.textAlign="end";break;case 5:e.displayAlign="before",e.textAlign="start";break;case 6:e.displayAlign="before",e.textAlign=ue;break;case 7:e.displayAlign="before",e.textAlign="end";break;case 9:e.displayAlign="center",e.textAlign="start";break;case 10:e.displayAlign="center",e.textAlign=ue;break;case 11:e.displayAlign="center",e.textAlign="end"}(t=t.AlphaLevel)&&(e.opacity=parseFloat(t))}function xv(e){return 0<=(e=parseInt(e.replace("&H",""),16))?"rgba("+(255&e)+","+(e>>8&255)+","+(e>>16&255)+","+(e>>24&255^255)/255+")":null}function wv(e){return 3600*((e=kv.exec(e))[1]?parseInt(e[1].replace(":",""),10):0)+60*parseInt(e[2],10)+parseFloat(e[3])}Zt["text/vtt"]=function(){return new rv},Zt['text/vtt; codecs="vtt"']=function(){return new rv},Zt['text/vtt; codecs="wvtt"']=function(){return new rv},hv.prototype.parseInit=function(e){var t=this,n=!1;if((new Wr).box("moov",Xr).box("trak",Xr).box("mdia",Xr).P("mdhd",(function(e){e=ao(e.reader,e.version),t.g=e.timescale})).box("minf",Xr).box("stbl",Xr).P("stsd",qr).box("wvtt",(function(){n=!0})).parse(e),!this.g)throw new Ne(2,2,2008);if(!n)throw new Ne(2,2,2008)},hv.prototype.setSequenceMode=function(){},hv.prototype.parseMedia=function(e,t){if(!this.g)throw new Ne(2,2,2008);var n,r=0,i=[],a=[],o=!1,s=!1,u=!1,l=null;if((new Wr).box("moof",Xr).box("traf",Xr).P("tfdt",(function(e){o=!0,r=io(e.reader,e.version).we})).P("tfhd",(function(e){l=ro(e.reader,e.flags).Ce})).P("trun",(function(e){s=!0,i=oo(e.reader,e.version,e.flags).Re})).box("mdat",$r((function(e){u=!0,n=e}))).parse(e,!1),!u&&!o&&!s)throw new Ne(2,2,2008);e=r;for(var d=new Vr(n,0),h=c(i),f=h.next();!f.done;f=h.next()){var p=(f=f.value).ee||l,g=f.ed?r+f.ed:e;e=g+(p||0);var m=0;do{var v=d.K();m+=v;var y=null;"vttc"==Jr(d.K())?8<v&&(y=d.Za(v-8)):d.skip(v-8),p&&y&&(v=fv(y,t.periodStart+g/this.g,t.periodStart+e/this.g),a.push(v))}while(f.sampleSize&&m<f.sampleSize)}return a.filter($e)},z("shaka.text.Mp4VttParser",hv),hv.prototype.parseMedia=hv.prototype.parseMedia,hv.prototype.setSequenceMode=hv.prototype.setSequenceMode,hv.prototype.parseInit=hv.prototype.parseInit,Zt['application/mp4; codecs="wvtt"']=function(){return new hv},pv.prototype.parseInit=function(){},pv.prototype.setSequenceMode=function(){},pv.prototype.parseMedia=function(e){var t=wt(e).replace(/\r+/g,"");if(e=[],""==(t=t.trim()))return e;for(var n=(t=c(t.split("\n\n"))).next();!n.done;n=t.next()){var r=new _h((n=n.value.split("\n"))[0]),i=gv(r),a=Rh(r,/,/g);if(r=gv(r),null==i||null==a||null==r)throw new Ne(2,2,2001,"Could not parse cue time range in SubViewer");e.push(new ae(i,r,n.slice(1).join("\n").trim()))}return e},z("shaka.text.SbvTextParser",pv),pv.prototype.parseMedia=pv.prototype.parseMedia,pv.prototype.setSequenceMode=pv.prototype.setSequenceMode,pv.prototype.parseInit=pv.prototype.parseInit,Zt["text/x-subviewer"]=function(){return new pv},mv.prototype.parseInit=function(){},mv.prototype.setSequenceMode=function(){},mv.prototype.parseMedia=function(e,t){return e=_e(St(e=vv(e=wt(e)))),this.g.parseMedia(e,t)},z("shaka.text.SrtTextParser",mv),mv.srt2webvtt=vv,mv.prototype.parseMedia=mv.prototype.parseMedia,mv.prototype.setSequenceMode=mv.prototype.setSequenceMode,mv.prototype.parseInit=mv.prototype.parseInit,Zt["text/srt"]=function(){return new mv},yv.prototype.parseInit=function(){},yv.prototype.setSequenceMode=function(){},yv.prototype.parseMedia=function(e){for(var t="",n="",r=(e=c(e=wt(e).split(/\r?\n\s*\r?\n/))).next();!r.done;r=e.next()){var i=Sv.exec(r.value);i&&(r=i[1],i=i[2],"V4 Styles"==r||"V4+ Styles"==r?t=i:"Events"==r&&(n=i))}e=[],r=null;for(var a=(t=c(t.split(/\r?\n/))).next();!a.done;a=t.next())if(i=a.value,!/^\s*;/.test(i)&&(a=Ev.exec(i)))if(i=a[1].trim(),a=a[2].trim(),"Format"==i)r=a.split(Iv);else if("Style"==i){i=a.split(Iv),a={};for(var o=0;o<r.length&&o<i.length;o++)a[r[o]]=i[o];e.push(a)}for(r=[],t=null,i={},a=(n=c(n.split(/\r?\n/))).next();!a.done;i={vd:i.vd},a=n.next())if(a=a.value,!/^\s*;/.test(a)&&(o=Ev.exec(a)))if(a=o[1].trim(),o=o[2].trim(),"Format"==a)t=o.split(Iv);else if("Dialogue"==a){o=o.split(Iv),a={};for(var s=0;s<t.length&&s<o.length;s++)a[t[s]]=o[s];o=new ae(s=wv(a.Start),wv(a.End),o.slice(t.length-1).join(",").replace(/\\N/g,"\n").replace(/\{[^}]+\}/g,"")),i.vd=a.Style,(a=e.find(function(e){return function(t){return t.Name==e.vd}}(i)))&&bv(o,a),r.push(o)}return r},z("shaka.text.SsaTextParser",yv),yv.prototype.parseMedia=yv.prototype.parseMedia,yv.prototype.setSequenceMode=yv.prototype.setSequenceMode,yv.prototype.parseInit=yv.prototype.parseInit;var Tv,Av,Sv=/^\s*\[([^\]]+)\]\r?\n([\s\S]*)/,Ev=/^\s*([^:]+):\s*(.*)/,Iv=/\s*,\s*/,kv=/^(\d+:)?(\d{1,2}):(\d{1,2}(?:[.]\d{1,3})?)?$/;
/*
            	 @license
            	 EME Encryption Scheme Polyfill
            	 Copyright 2019 Google LLC
            	 SPDX-License-Identifier: Apache-2.0
            	*/
function Cv(){}function _v(){Tv?console.debug("EmeEncryptionSchemePolyfill: Already installed."):navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration?(Tv=navigator.requestMediaKeySystemAccess,console.debug("EmeEncryptionSchemePolyfill: Waiting to detect encryptionScheme support."),navigator.requestMediaKeySystemAccess=Mv):console.debug("EmeEncryptionSchemePolyfill: EME not found")}function Mv(e,t){var n,r=this;return L((function(i){return 1==i.g?(console.assert(r==navigator,'bad "this" for requestMediaKeySystemAccess'),w(i,Tv.call(r,e,t),2)):Fv(n=i.h)?(console.debug("EmeEncryptionSchemePolyfill: Native encryptionScheme support found."),navigator.requestMediaKeySystemAccess=Tv,i.return(n)):(console.debug("EmeEncryptionSchemePolyfill: No native encryptionScheme support found. Patching encryptionScheme support."),navigator.requestMediaKeySystemAccess=Rv,i.return(Rv.call(r,e,t)))}))}function Rv(e,t){var n,r,i,a,o,s,u,l,d,h,f=this;return L((function(p){if(1==p.g){for(console.assert(f==navigator,'bad "this" for requestMediaKeySystemAccess'),n=jv(e),r=[],i=c(t),a=i.next();!a.done;a=i.next())o=a.value,s=Nv(o.videoCapabilities,n),u=Nv(o.audioCapabilities,n),o.videoCapabilities&&o.videoCapabilities.length&&!s.length||o.audioCapabilities&&o.audioCapabilities.length&&!u.length||((l=Object.assign({},o)).videoCapabilities=s,l.audioCapabilities=u,r.push(l));if(!r.length)throw(d=Error("Unsupported keySystem or supportedConfigurations.")).name="NotSupportedError",d.code=DOMException.NOT_SUPPORTED_ERR,d;return w(p,Tv.call(f,e,r),2)}return h=p.h,p.return(new Bv(h,n))}))}function Nv(e,t){return e?e.filter((function(e){return!e.encryptionScheme||e.encryptionScheme==t})):e}function Lv(){}function Dv(){Av?console.debug("McEncryptionSchemePolyfill: Already installed."):navigator.mediaCapabilities?(Av=navigator.mediaCapabilities.decodingInfo,console.debug("McEncryptionSchemePolyfill: Waiting to detect encryptionScheme support."),navigator.mediaCapabilities.decodingInfo=Pv):console.debug("McEncryptionSchemePolyfill: MediaCapabilities not found")}function Pv(e){var t,n,r,i=this;return L((function(a){switch(a.g){case 1:return console.assert(i==navigator.mediaCapabilities,'bad "this" for decodingInfo'),w(a,Av.call(i,e),2);case 2:if(t=a.h,!e.keySystemConfiguration)return a.return(t);if((n=t.keySystemAccess)&&Fv(n))return console.debug("McEncryptionSchemePolyfill: Native encryptionScheme support found."),navigator.mediaCapabilities.decodingInfo=Av,a.return(t);if(console.debug("McEncryptionSchemePolyfill: No native encryptionScheme support found. Patching encryptionScheme support."),navigator.mediaCapabilities.decodingInfo=Ov,n){a.A(3);break}return r=t,w(a,Uv(e),4);case 4:return r.keySystemAccess=a.h,a.return(t);case 3:return a.return(Ov.call(i,e))}}))}function Ov(e){var t,n,r,i,a,o,s,u,l=this;return L((function(c){switch(c.g){case 1:return console.assert(l==navigator.mediaCapabilities,'bad "this" for decodingInfo'),t=null,e.keySystemConfiguration&&(n=e.keySystemConfiguration,r=n.keySystem,i=n.audio&&n.audio.encryptionScheme,a=n.video&&n.video.encryptionScheme,t=jv(r),o={powerEfficient:!1,smooth:!1,supported:!1,keySystemAccess:null,configuration:e},i&&i!=t||a&&a!=t)?c.return(o):w(c,Av.call(l,e),2);case 2:if((s=c.h).keySystemAccess){s.keySystemAccess=new Bv(s.keySystemAccess,t),c.A(3);break}if(!e.keySystemConfiguration){c.A(3);break}return u=s,w(c,Uv(e),5);case 5:u.keySystemAccess=c.h;case 3:return c.return(s)}}))}function Uv(e){var t,n;return L((function(r){if(1==r.g){var i=e.keySystemConfiguration,a=[],o=[];return i.audio&&a.push({robustness:i.audio.robustness||"",contentType:e.audio.contentType}),i.video&&o.push({robustness:i.video.robustness||"",contentType:e.video.contentType}),i={initDataTypes:i.initDataType?[i.initDataType]:[],distinctiveIdentifier:i.distinctiveIdentifier,persistentState:i.persistentState,sessionTypes:i.sessionTypes},a.length&&(i.audioCapabilities=a),o.length&&(i.videoCapabilities=o),t=i,w(r,navigator.requestMediaKeySystemAccess(e.keySystemConfiguration.keySystem,[t]),2)}return n=r.h,r.return(n)}))}function Bv(e,t){this.h=e,this.g=t,this.keySystem=e.keySystem}function jv(e){return e.startsWith("com.widevine")||e.startsWith("com.microsoft")||e.startsWith("com.chromecast")||e.startsWith("com.adobe")||e.startsWith("org.w3")?"cenc":e.startsWith("com.apple")?"cbcs-1-9":(console.warn("EmeEncryptionSchemePolyfill: Unknown key system:",e,"Please contribute!"),null)}function Fv(e){var t=(e=e.getConfiguration()).audioCapabilities&&e.audioCapabilities[0];return!(!(e=e.videoCapabilities&&e.videoCapabilities[0]||t)||void 0===e.encryptionScheme)}function zv(){}function Gv(){_v(),Dv()}Zt["text/x-ssa"]=function(){return new yv},z("EmeEncryptionSchemePolyfill",Cv),Cv.install=_v,z("McEncryptionSchemePolyfill",Lv),Lv.install=Dv,Bv.prototype.getConfiguration=function(){var e=this.h.getConfiguration();if(e.videoCapabilities)for(var t=c(e.videoCapabilities),n=t.next();!n.done;n=t.next())n.value.encryptionScheme=this.g;if(e.audioCapabilities)for(n=(t=c(e.audioCapabilities)).next();!n.done;n=t.next())n.value.encryptionScheme=this.g;return e},Bv.prototype.createMediaKeys=function(){return this.h.createMediaKeys()},z("EncryptionSchemePolyfills",zv),zv.install=Gv,void 0!==n&&n.exports&&(n.exports=zv)}.call(n,t,t,void 0),n.shaka)e[r]=n.shaka[r]}()}($s);var Qs=fs($s),Js={};
/*
             @license
             Shaka Player
             Copyright 2016 Google LLC
             SPDX-License-Identifier: Apache-2.0
            */
!function(e){!function(){var t="undefined"!=typeof window?window:hs,n={};for(var r in function(e,t,n){
/*
            	 @license
            	 Shaka Player
            	 Copyright 2016 Google LLC
            	 SPDX-License-Identifier: Apache-2.0
            	*/
var i;function a(e){var t=0;return function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}}}var o="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e};var s=function(n){n=["object"==typeof globalThis&&globalThis,n,"object"==typeof e&&e,"object"==typeof self&&self,"object"==typeof t&&t];for(var r=0;r<n.length;++r){var i=n[r];if(i&&i.Math==Math)return i}throw Error("Cannot find global object")}(this);function u(e,t){if(t)e:{var n=s;e=e.split(".");for(var r=0;r<e.length-1;r++){var i=e[r];if(!(i in n))break e;n=n[i]}(t=t(r=n[e=e[e.length-1]]))!=r&&null!=t&&o(n,e,{configurable:!0,writable:!0,value:t})}}function l(e){return(e={next:e})[Symbol.iterator]=function(){return this},e}function c(e){var t="undefined"!=typeof Symbol&&Symbol.iterator&&e[Symbol.iterator];return t?t.call(e):{next:a(e)}}function d(e){if(!(e instanceof Array)){e=c(e);for(var t,n=[];!(t=e.next()).done;)n.push(t.value);e=n}return e}u("Symbol",(function(e){function t(e,t){this.g=e,o(this,"description",{configurable:!0,writable:!0,value:t})}if(e)return e;t.prototype.toString=function(){return this.g};var n="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",r=0;return function e(i){if(this instanceof e)throw new TypeError("Symbol is not a constructor");return new t(n+(i||"")+"_"+r++,i)}})),u("Symbol.iterator",(function(e){if(e)return e;e=Symbol("Symbol.iterator");for(var t="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),n=0;n<t.length;n++){var r=s[t[n]];"function"==typeof r&&"function"!=typeof r.prototype[e]&&o(r.prototype,e,{configurable:!0,writable:!0,value:function(){return l(a(this))}})}return e}));var h,f="function"==typeof Object.create?Object.create:function(e){function t(){}return t.prototype=e,new t};if("function"==typeof Object.setPrototypeOf)h=Object.setPrototypeOf;else{var p;e:{var g={};try{g.__proto__={a:!0},p=g.a;break e}catch(yx){}p=!1}h=p?function(e,t){if(e.__proto__=t,e.__proto__!==t)throw new TypeError(e+" is not extensible");return e}:null}var m=h;function v(e,t){if(e.prototype=f(t.prototype),e.prototype.constructor=e,m)m(e,t);else for(var n in t)if("prototype"!=n)if(Object.defineProperties){var r=Object.getOwnPropertyDescriptor(t,n);r&&Object.defineProperty(e,n,r)}else e[n]=t[n];e.xj=t.prototype}function y(){this.s=!1,this.l=null,this.h=void 0,this.g=1,this.j=this.m=0,this.C=this.i=null}function b(e){if(e.s)throw new TypeError("Generator is already running");e.s=!0}function x(e,t){e.i={Ef:t,Nf:!0},e.g=e.m||e.j}function w(e,t,n){return e.g=n,{value:t}}function T(e){e.g=0}function A(e,t,n){e.m=t,null!=n&&(e.j=n)}function S(e){e.m=0,e.j=2}function E(e,t,n){e.g=t,e.m=n||0}function I(e,t){return e.m=t||0,t=e.i.Ef,e.i=null,t}function k(e){e.C=[e.i],e.m=0,e.j=0}function C(e,t){var n=e.C.splice(0)[0];(n=e.i=e.i||n)?n.Nf?e.g=e.m||e.j:null!=n.D&&e.j<n.D?(e.g=n.D,e.i=null):e.g=e.j:e.g=t}function _(e){this.g=new y,this.h=e}function M(e,t,n,r){try{var i=t.call(e.g.l,n);if(!(i instanceof Object))throw new TypeError("Iterator result "+i+" is not an object");if(!i.done)return e.g.s=!1,i;var a=i.value}catch(o){return e.g.l=null,x(e.g,o),R(e)}return e.g.l=null,r.call(e.g,a),R(e)}function R(e){for(;e.g.g;)try{var t=e.h(e.g);if(t)return e.g.s=!1,{value:t.value,done:!1}}catch(n){e.g.h=void 0,x(e.g,n)}if(e.g.s=!1,e.g.i){if(t=e.g.i,e.g.i=null,t.Nf)throw t.Ef;return{value:t.return,done:!0}}return{value:void 0,done:!0}}function N(e){this.next=function(t){return b(e.g),e.g.l?t=M(e,e.g.l.next,t,e.g.B):(e.g.B(t),t=R(e)),t},this.throw=function(t){return b(e.g),e.g.l?t=M(e,e.g.l.throw,t,e.g.B):(x(e.g,t),t=R(e)),t},this.return=function(t){return function(e,t){b(e.g);var n=e.g.l;return n?M(e,"return"in n?n.return:function(e){return{value:e,done:!0}},t,e.g.return):(e.g.return(t),R(e))}(e,t)},this[Symbol.iterator]=function(){return this}}function L(e){return function(e){function t(t){return e.next(t)}function n(t){return e.throw(t)}return new Promise((function(r,i){!function e(a){a.done?r(a.value):Promise.resolve(a.value).then(t,n).then(e,i)}(e.next())}))}(new N(new _(e)))}function D(){for(var e=Number(this),t=[],n=e;n<arguments.length;n++)t[n-e]=arguments[n];return t}function P(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function O(e,t){e instanceof String&&(e+="");var n=0,r=!1,i={next:function(){if(!r&&n<e.length){var i=n++;return{value:t(i,e[i]),done:!1}}return r=!0,{done:!0,value:void 0}}};return i[Symbol.iterator]=function(){return i},i}function U(e,t,n){e instanceof String&&(e=String(e));for(var r=e.length,i=0;i<r;i++){var a=e[i];if(t.call(n,a,i,e))return{Lf:i,v:a}}return{Lf:-1,v:void 0}}function B(e,t,n){if(null==e)throw new TypeError("The 'this' value for String.prototype."+n+" must not be null or undefined");if(t instanceof RegExp)throw new TypeError("First argument to String.prototype."+n+" must not be a regular expression");return e+""}y.prototype.B=function(e){this.h=e},y.prototype.return=function(e){this.i={return:e},this.g=this.j},y.prototype.D=function(e){this.g=e},u("Promise",(function(e){function t(e){this.h=0,this.i=void 0,this.g=[],this.s=!1;var t=this.j();try{e(t.resolve,t.reject)}catch(r){t.reject(r)}}function n(){this.g=null}function i(e){return e instanceof t?e:new t((function(t){t(e)}))}if(e)return e;n.prototype.h=function(e){if(null==this.g){this.g=[];var t=this;this.i((function(){t.l()}))}this.g.push(e)};var a=s.setTimeout;n.prototype.i=function(e){a(e,0)},n.prototype.l=function(){for(;this.g&&this.g.length;){var e=this.g;this.g=[];for(var t=0;t<e.length;++t){var n=e[t];e[t]=null;try{n()}catch(r){this.j(r)}}}this.g=null},n.prototype.j=function(e){this.i((function(){throw e}))},t.prototype.j=function(){function e(e){return function(r){n||(n=!0,e.call(t,r))}}var t=this,n=!1;return{resolve:e(this.H),reject:e(this.l)}},t.prototype.H=function(e){if(e===this)this.l(new TypeError("A Promise cannot resolve to itself"));else if(e instanceof t)this.J(e);else{e:switch(typeof e){case"object":var n=null!=e;break e;case"function":n=!0;break e;default:n=!1}n?this.G(e):this.m(e)}},t.prototype.G=function(e){var t=void 0;try{t=e.then}catch(r){return void this.l(r)}"function"==typeof t?this.K(t,e):this.m(e)},t.prototype.l=function(e){this.B(2,e)},t.prototype.m=function(e){this.B(1,e)},t.prototype.B=function(e,t){if(0!=this.h)throw Error("Cannot settle("+e+", "+t+"): Promise already settled in state"+this.h);this.h=e,this.i=t,2===this.h&&this.I(),this.C()},t.prototype.I=function(){var e=this;a((function(){if(e.F()){var t=s.console;void 0!==t&&t.error(e.i)}}),1)},t.prototype.F=function(){if(this.s)return!1;var e=s.CustomEvent,t=s.Event,n=s.dispatchEvent;return void 0===n||("function"==typeof e?e=new e("unhandledrejection",{cancelable:!0}):"function"==typeof t?e=new t("unhandledrejection",{cancelable:!0}):(e=s.document.createEvent("CustomEvent")).initCustomEvent("unhandledrejection",!1,!0,e),e.promise=this,e.reason=this.i,n(e))},t.prototype.C=function(){if(null!=this.g){for(var e=0;e<this.g.length;++e)o.h(this.g[e]);this.g=null}};var o=new n;return t.prototype.J=function(e){var t=this.j();e.od(t.resolve,t.reject)},t.prototype.K=function(e,t){var n=this.j();try{e.call(t,n.resolve,n.reject)}catch(r){n.reject(r)}},t.prototype.then=function(e,n){function r(e,t){return"function"==typeof e?function(t){try{i(e(t))}catch(n){a(n)}}:t}var i,a,o=new t((function(e,t){i=e,a=t}));return this.od(r(e,i),r(n,a)),o},t.prototype.catch=function(e){return this.then(void 0,e)},t.prototype.od=function(e,t){function n(){switch(r.h){case 1:e(r.i);break;case 2:t(r.i);break;default:throw Error("Unexpected state: "+r.h)}}var r=this;null==this.g?o.h(n):this.g.push(n),this.s=!0},t.resolve=i,t.reject=function(e){return new t((function(t,n){n(e)}))},t.race=function(e){return new t((function(t,n){for(var r=c(e),a=r.next();!a.done;a=r.next())i(a.value).od(t,n)}))},t.all=function(e){var n=c(e),r=n.next();return r.done?i([]):new t((function(e,t){function a(t){return function(n){o[t]=n,0==--s&&e(o)}}var o=[],s=0;do{o.push(void 0),s++,i(r.value).od(a(o.length-1),t),r=n.next()}while(!r.done)}))},t})),u("WeakMap",(function(e){function t(e){if(this.g=(u+=Math.random()+1).toString(),e){e=c(e);for(var t;!(t=e.next()).done;)t=t.value,this.set(t[0],t[1])}}function n(){}function r(e){var t=typeof e;return"object"===t&&null!==e||"function"===t}function i(e){if(!P(e,s)){var t=new n;o(e,s,{value:t})}}function a(e){var t=Object[e];t&&(Object[e]=function(e){return e instanceof n?e:(Object.isExtensible(e)&&i(e),t(e))})}if(function(){if(!e||!Object.seal)return!1;try{var t=Object.seal({}),n=Object.seal({}),r=new e([[t,2],[n,3]]);return 2==r.get(t)&&3==r.get(n)&&(r.delete(t),r.set(n,4),!r.has(t)&&4==r.get(n))}catch(i){return!1}}())return e;var s="$jscomp_hidden_"+Math.random();a("freeze"),a("preventExtensions"),a("seal");var u=0;return t.prototype.set=function(e,t){if(!r(e))throw Error("Invalid WeakMap key");if(i(e),!P(e,s))throw Error("WeakMap key fail: "+e);return e[s][this.g]=t,this},t.prototype.get=function(e){return r(e)&&P(e,s)?e[s][this.g]:void 0},t.prototype.has=function(e){return r(e)&&P(e,s)&&P(e[s],this.g)},t.prototype.delete=function(e){return!!(r(e)&&P(e,s)&&P(e[s],this.g))&&delete e[s][this.g]},t})),u("Map",(function(e){function t(){var e={};return e.ob=e.next=e.head=e}function n(e,t){var n=e.g;return l((function(){if(n){for(;n.head!=e.g;)n=n.ob;for(;n.next!=n.head;)return n=n.next,{done:!1,value:t(n)};n=null}return{done:!0,value:void 0}}))}function r(e,t){var n=t&&typeof t;"object"==n||"function"==n?a.has(t)?n=a.get(t):(n=""+ ++o,a.set(t,n)):n="p_"+t;var r=e.h[n];if(r&&P(e.h,n))for(e=0;e<r.length;e++){var i=r[e];if(t!=t&&i.key!=i.key||t===i.key)return{id:n,list:r,index:e,wa:i}}return{id:n,list:r,index:-1,wa:void 0}}function i(e){if(this.h={},this.g=t(),this.size=0,e){e=c(e);for(var n;!(n=e.next()).done;)n=n.value,this.set(n[0],n[1])}}if(function(){if(!e||"function"!=typeof e||!e.prototype.entries||"function"!=typeof Object.seal)return!1;try{var t=Object.seal({x:4}),n=new e(c([[t,"s"]]));if("s"!=n.get(t)||1!=n.size||n.get({x:4})||n.set({x:4},"t")!=n||2!=n.size)return!1;var r=n.entries(),i=r.next();return!i.done&&i.value[0]==t&&"s"==i.value[1]&&!((i=r.next()).done||4!=i.value[0].x||"t"!=i.value[1]||!r.next().done)}catch(a){return!1}}())return e;var a=new WeakMap;i.prototype.set=function(e,t){var n=r(this,e=0===e?0:e);return n.list||(n.list=this.h[n.id]=[]),n.wa?n.wa.value=t:(n.wa={next:this.g,ob:this.g.ob,head:this.g,key:e,value:t},n.list.push(n.wa),this.g.ob.next=n.wa,this.g.ob=n.wa,this.size++),this},i.prototype.delete=function(e){return!(!(e=r(this,e)).wa||!e.list)&&(e.list.splice(e.index,1),e.list.length||delete this.h[e.id],e.wa.ob.next=e.wa.next,e.wa.next.ob=e.wa.ob,e.wa.head=null,this.size--,!0)},i.prototype.clear=function(){this.h={},this.g=this.g.ob=t(),this.size=0},i.prototype.has=function(e){return!!r(this,e).wa},i.prototype.get=function(e){return(e=r(this,e).wa)&&e.value},i.prototype.entries=function(){return n(this,(function(e){return[e.key,e.value]}))},i.prototype.keys=function(){return n(this,(function(e){return e.key}))},i.prototype.values=function(){return n(this,(function(e){return e.value}))},i.prototype.forEach=function(e,t){for(var n,r=this.entries();!(n=r.next()).done;)n=n.value,e.call(t,n[1],n[0],this)},i.prototype[Symbol.iterator]=i.prototype.entries;var o=0;return i})),u("Array.prototype.keys",(function(e){return e||function(){return O(this,(function(e){return e}))}})),u("Set",(function(e){function t(e){if(this.g=new Map,e){e=c(e);for(var t;!(t=e.next()).done;)this.add(t.value)}this.size=this.g.size}return function(){if(!e||"function"!=typeof e||!e.prototype.entries||"function"!=typeof Object.seal)return!1;try{var t=Object.seal({x:4}),n=new e(c([t]));if(!n.has(t)||1!=n.size||n.add(t)!=n||1!=n.size||n.add({x:4})!=n||2!=n.size)return!1;var r=n.entries(),i=r.next();return!i.done&&i.value[0]==t&&i.value[1]==t&&(!(i=r.next()).done&&i.value[0]!=t&&4==i.value[0].x&&i.value[1]==i.value[0]&&r.next().done)}catch(a){return!1}}()?e:(t.prototype.add=function(e){return e=0===e?0:e,this.g.set(e,e),this.size=this.g.size,this},t.prototype.delete=function(e){return e=this.g.delete(e),this.size=this.g.size,e},t.prototype.clear=function(){this.g.clear(),this.size=0},t.prototype.has=function(e){return this.g.has(e)},t.prototype.entries=function(){return this.g.entries()},t.prototype.values=function(){return this.g.values()},t.prototype.keys=t.prototype.values,t.prototype[Symbol.iterator]=t.prototype.values,t.prototype.forEach=function(e,t){var n=this;this.g.forEach((function(r){return e.call(t,r,r,n)}))},t)})),u("Array.from",(function(e){return e||function(e,t,n){t=null!=t?t:function(e){return e};var r=[],i="undefined"!=typeof Symbol&&Symbol.iterator&&e[Symbol.iterator];if("function"==typeof i){e=i.call(e);for(var a=0;!(i=e.next()).done;)r.push(t.call(n,i.value,a++))}else for(i=e.length,a=0;a<i;a++)r.push(t.call(n,e[a],a));return r}})),u("Array.prototype.findIndex",(function(e){return e||function(e,t){return U(this,e,t).Lf}})),u("Object.is",(function(e){return e||function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}})),u("Array.prototype.includes",(function(e){return e||function(e,t){var n=this;n instanceof String&&(n=String(n));var r=n.length;for(0>(t=t||0)&&(t=Math.max(t+r,0));t<r;t++){var i=n[t];if(i===e||Object.is(i,e))return!0}return!1}})),u("String.prototype.includes",(function(e){return e||function(e,t){return-1!==B(this,e,"includes").indexOf(e,t||0)}})),u("Array.prototype.find",(function(e){return e||function(e,t){return U(this,e,t).v}})),u("String.prototype.startsWith",(function(e){return e||function(e,t){var n=B(this,e,"startsWith"),r=n.length,i=e.length;t=Math.max(0,Math.min(0|t,n.length));for(var a=0;a<i&&t<r;)if(n[t++]!=e[a++])return!1;return a>=i}}));var j="function"==typeof Object.assign?Object.assign:function(e,t){for(var n=1;n<arguments.length;n++){var r=arguments[n];if(r)for(var i in r)P(r,i)&&(e[i]=r[i])}return e};u("Object.assign",(function(e){return e||j})),u("Array.prototype.values",(function(e){return e||function(){return O(this,(function(e,t){return t}))}})),u("Promise.prototype.finally",(function(e){return e||function(e){return this.then((function(t){return Promise.resolve(e()).then((function(){return t}))}),(function(t){return Promise.resolve(e()).then((function(){throw t}))}))}})),u("Array.prototype.entries",(function(e){return e||function(){return O(this,(function(e,t){return[e,t]}))}})),u("String.prototype.repeat",(function(e){return e||function(e){var t=B(this,null,"repeat");if(0>e||1342177279<e)throw new RangeError("Invalid count value");e|=0;for(var n="";e;)1&e&&(n+=t),(e>>>=1)&&(t+=t);return n}})),u("Number.isNaN",(function(e){return e||function(e){return"number"==typeof e&&isNaN(e)}})),u("Object.values",(function(e){return e||function(e){var t,n=[];for(t in e)P(e,t)&&n.push(e[t]);return n}})),u("Math.log2",(function(e){return e||function(e){return Math.log(e)/Math.LN2}})),u("Math.trunc",(function(e){return e||function(e){if(e=Number(e),isNaN(e)||1/0===e||-1/0===e||0===e)return e;var t=Math.floor(Math.abs(e));return 0>e?-t:t}})),u("Object.entries",(function(e){return e||function(e){var t,n=[];for(t in e)P(e,t)&&n.push([t,e[t]]);return n}}));var F=this||self;function z(e,t){e=e.split(".");var n,r=F;e[0]in r||void 0===r.execScript||r.execScript("var "+e[0]);for(;e.length&&(n=e.shift());)e.length||void 0===t?r=r[n]&&r[n]!==Object.prototype[n]?r[n]:r[n]={}:r[n]=t}function G(t,n){if(n)if(n instanceof Map)for(var r=c(n.keys()),i=r.next();!i.done;i=r.next())i=i.value,Object.defineProperty(this,i,{value:n.get(i),writable:!0,enumerable:!0});else for(r in n)Object.defineProperty(this,r,{value:n[r],writable:!0,enumerable:!0});this.defaultPrevented=this.cancelable=this.bubbles=!1,this.timeStamp=e.performance&&e.performance.now?e.performance.now():Date.now(),this.type=t,this.isTrusted=!1,this.target=this.currentTarget=null,this.g=!1}function V(e){var t,n=new G(e.type);for(t in e)Object.defineProperty(n,t,{value:e[t],writable:!0,enumerable:!0});return n}G.prototype.preventDefault=function(){this.cancelable&&(this.defaultPrevented=!0)},G.prototype.stopImmediatePropagation=function(){this.g=!0},G.prototype.stopPropagation=function(){},z("shaka.util.FakeEvent",G);var K={Wh:"abrstatuschanged",Xh:"adaptation",Yh:"buffering",bi:"downloadfailed",ci:"downloadheadersreceived",di:"drmsessionupdate",mi:"emsg",Qi:"prft",Error:"error",ni:"expirationupdated",ri:"gapjumped",xi:"loaded",zi:"loading",Ei:"manifestparsed",Fi:"mediaqualitychanged",Metadata:"metadata",Ki:"onstatechange",Li:"onstateidle",Vi:"ratechange",aj:"segmentappended",bj:"sessiondata",cj:"stalldetected",dj:"streaming",ej:"textchanged",fj:"texttrackvisibility",gj:"timelineregionadded",hj:"timelineregionenter",ij:"timelineregionexit",jj:"trackschanged",oj:"unloading",qj:"variantchanged"};function H(){}function W(){}function X(){}function q(e){var t=D.apply(1,arguments);$.has(e)||($.add(e),X.apply(H,d(t)))}function Y(){}var $=new Set;if(e.console&&e.console.log.bind){var Q={},J=(Q[1]=console.error.bind(console),Q[2]=console.warn.bind(console),Q[3]=console.info.bind(console),Q[4]=console.log.bind(console),Q[5]=console.debug.bind(console),Q[6]=console.debug.bind(console),Q);X=J[2],W=J[1]}function Z(){this.g={}}function ee(){this.ra=new Z,this.Hd=this}function te(e,t){for(var n=[],r=(e=c(e)).next();!r.done;r=e.next())n.push(t(r.value));return n}function ne(e,t){for(var n=(e=c(e)).next();!n.done;n=e.next())if(t(n.value))return!0;return!1}function re(e,t){for(var n=[],r=(e=c(e)).next();!r.done;r=e.next())t(r=r.value)&&n.push(r);return n}(i=Z.prototype).push=function(e,t){this.g.hasOwnProperty(e)?this.g[e].push(t):this.g[e]=[t]},i.get=function(e){return(e=this.g[e])?e.slice():null},i.remove=function(e,t){e in this.g&&(this.g[e]=this.g[e].filter((function(e){return e!=t})),0==this.g[e].length&&delete this.g[e])},i.forEach=function(e){for(var t in this.g)e(t,this.g[t])},i.size=function(){return Object.keys(this.g).length},i.keys=function(){return Object.keys(this.g)},ee.prototype.addEventListener=function(e,t){this.ra&&this.ra.push(e,t)},ee.prototype.removeEventListener=function(e,t){this.ra&&this.ra.remove(e,t)},ee.prototype.dispatchEvent=function(e){if(!this.ra)return!0;var t=this.ra.get(e.type)||[],n=this.ra.get("All");for(n&&(t=t.concat(n)),n=(t=c(t)).next();!n.done;n=t.next()){n=n.value,e.target=this.Hd,e.currentTarget=this.Hd;try{n.handleEvent?n.handleEvent(e):n.call(this,e)}catch(r){}if(e.g)break}return e.defaultPrevented},ee.prototype.release=function(){this.ra=null};var ie=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#(.*))?$");
/*
            	 @license
            	 Copyright 2006 The Closure Library Authors
            	 SPDX-License-Identifier: Apache-2.0
            	*/function ae(e){var t;e instanceof ae?(oe(this,e.Wa),this.Tb=e.Tb,this.ab=e.ab,se(this,e.nc),this.Ha=e.Ha,ue(this,e.g.clone()),this.Hb=e.Hb):e&&(t=String(e).match(ie))?(oe(this,t[1]||"",!0),this.Tb=le(t[2]||""),this.ab=le(t[3]||"",!0),se(this,t[4]),this.Ha=le(t[5]||"",!0),ue(this,t[6]||"",!0),this.Hb=le(t[7]||"")):this.g=new ve(null)}function oe(e,t,n){e.Wa=n?le(t,!0):t,e.Wa&&(e.Wa=e.Wa.replace(/:$/,""))}function se(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.nc=t}else e.nc=null}function ue(e,t,n){t instanceof ve?e.g=t:(n||(t=ce(t,ge)),e.g=new ve(t))}function le(e,t){return e?t?decodeURI(e):decodeURIComponent(e):""}function ce(e,t,n){return null!=e?(e=encodeURI(e).replace(t,de),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function de(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}(i=ae.prototype).Wa="",i.Tb="",i.ab="",i.nc=null,i.Ha="",i.Hb="",i.toString=function(){var e=[],t=this.Wa;if(t&&e.push(ce(t,he,!0),":"),t=this.ab){e.push("//");var n=this.Tb;n&&e.push(ce(n,he,!0),"@"),e.push(encodeURIComponent(t).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.nc)&&e.push(":",String(t))}return(t=this.Ha)&&(this.ab&&"/"!=t.charAt(0)&&e.push("/"),e.push(ce(t,"/"==t.charAt(0)?pe:fe,!0))),(t=this.g.toString())&&e.push("?",t),(t=this.Hb)&&e.push("#",ce(t,me)),e.join("")},i.resolve=function(e){var t=this.clone();"data"===t.Wa&&(t=new ae);var n=!!e.Wa;n?oe(t,e.Wa):n=!!e.Tb,n?t.Tb=e.Tb:n=!!e.ab,n?t.ab=e.ab:n=null!=e.nc;var r=e.Ha;if(n)se(t,e.nc);else if(n=!!e.Ha){if("/"!=r.charAt(0))if(this.ab&&!this.Ha)r="/"+r;else{var i=t.Ha.lastIndexOf("/");-1!=i&&(r=t.Ha.substr(0,i+1)+r)}if(".."==r||"."==r)r="";else if(-1!=r.indexOf("./")||-1!=r.indexOf("/.")){i=0==r.lastIndexOf("/",0),r=r.split("/");for(var a=[],o=0;o<r.length;){var s=r[o++];"."==s?i&&o==r.length&&a.push(""):".."==s?((1<a.length||1==a.length&&""!=a[0])&&a.pop(),i&&o==r.length&&a.push("")):(a.push(s),i=!0)}r=a.join("/")}}return n?t.Ha=r:n=""!==e.g.toString(),n?ue(t,e.g.clone()):n=!!e.Hb,n&&(t.Hb=e.Hb),t},i.clone=function(){return new ae(this)};var he=/[#\/\?@]/g,fe=/[#\?:]/g,pe=/[#\?]/g,ge=/[#\?@]/g,me=/#/g;function ve(e){this.g=e||null}function ye(e){if(!e.Ca&&(e.Ca={},e.rd=0,e.g))for(var t=e.g.split("&"),n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var a=t[n].substring(0,r);i=t[n].substring(r+1)}else a=t[n];a=decodeURIComponent(a.replace(/\+/g," ")),i=i||"",e.add(a,decodeURIComponent(i.replace(/\+/g," ")))}}function be(e,t,n){var r=D.apply(3,arguments);this.severity=e,this.category=t,this.code=n,this.data=r,this.handled=!1}function xe(e,t){return e.concat(t)}function we(){}function Te(e){return null!=e}function Ae(e,t){if(0==t.length)return e;var n=t.map((function(e){return new ae(e)}));return e.map((function(e){return new ae(e)})).map((function(e){return n.map((function(t){return e.resolve(t)}))})).reduce(xe,[]).map((function(e){return e.toString()}))}function Se(e,t){return{keySystem:e,licenseServerUri:"",distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,serverCertificateUri:"",sessionType:"",initData:t||[],keyIds:new Set}}function Ee(e,t){if(1==t.length)return t[0];if(null!=(e=Ie(e,t)))return e;throw new be(2,4,4025,t)}function Ie(e,t){for(var n=c(_e[e]),r=n.next();!r.done;r=n.next()){r=r.value;for(var i=c(t),a=i.next();!a.done;a=i.next())if(a=a.value,r.test(a.trim()))return a.trim()}return e==ke?"":null}(i=ve.prototype).Ca=null,i.rd=null,i.add=function(e,t){ye(this),this.g=null;var n=this.Ca.hasOwnProperty(e)?this.Ca[e]:null;return n||(this.Ca[e]=n=[]),n.push(t),this.rd++,this},i.set=function(e,t){return ye(this),this.g=null,this.Ca.hasOwnProperty(e)?this.Ca[e]=[t]:this.add(e,t),this},i.toString=function(){if(this.g)return this.g;if(!this.Ca)return"";var e,t=[];for(e in this.Ca)for(var n=encodeURIComponent(e),r=this.Ca[e],i=0;i<r.length;i++){var a=n;""!==r[i]&&(a+="="+encodeURIComponent(r[i])),t.push(a)}return this.g=t.join("&")},i.clone=function(){var e=new ve;if(e.g=this.g,this.Ca){var t,n={};for(t in this.Ca)n[t]=this.Ca[t].concat();e.Ca=n,e.rd=this.rd}return e},be.prototype.toString=function(){return"shaka.util.Error "+JSON.stringify(this,null,"  ")},z("shaka.util.Error",be),be.Severity={RECOVERABLE:1,CRITICAL:2},be.Category={NETWORK:1,TEXT:2,MEDIA:3,MANIFEST:4,STREAMING:5,DRM:6,PLAYER:7,CAST:8,STORAGE:9,ADS:10},be.Code={UNSUPPORTED_SCHEME:1e3,BAD_HTTP_STATUS:1001,HTTP_ERROR:1002,TIMEOUT:1003,MALFORMED_DATA_URI:1004,REQUEST_FILTER_ERROR:1006,RESPONSE_FILTER_ERROR:1007,MALFORMED_TEST_URI:1008,UNEXPECTED_TEST_REQUEST:1009,ATTEMPTS_EXHAUSTED:1010,SEGMENT_MISSING:1011,INVALID_TEXT_HEADER:2e3,INVALID_TEXT_CUE:2001,UNABLE_TO_DETECT_ENCODING:2003,BAD_ENCODING:2004,INVALID_XML:2005,INVALID_MP4_TTML:2007,INVALID_MP4_VTT:2008,UNABLE_TO_EXTRACT_CUE_START_TIME:2009,INVALID_MP4_CEA:2010,TEXT_COULD_NOT_GUESS_MIME_TYPE:2011,CANNOT_ADD_EXTERNAL_TEXT_TO_SRC_EQUALS:2012,TEXT_ONLY_WEBVTT_SRC_EQUALS:2013,MISSING_TEXT_PLUGIN:2014,CHAPTERS_TRACK_FAILED:2015,CANNOT_ADD_EXTERNAL_THUMBNAILS_TO_SRC_EQUALS:2016,UNSUPPORTED_EXTERNAL_THUMBNAILS_URI:2017,BUFFER_READ_OUT_OF_BOUNDS:3e3,JS_INTEGER_OVERFLOW:3001,EBML_OVERFLOW:3002,EBML_BAD_FLOATING_POINT_SIZE:3003,MP4_SIDX_WRONG_BOX_TYPE:3004,MP4_SIDX_INVALID_TIMESCALE:3005,MP4_SIDX_TYPE_NOT_SUPPORTED:3006,WEBM_CUES_ELEMENT_MISSING:3007,WEBM_EBML_HEADER_ELEMENT_MISSING:3008,WEBM_SEGMENT_ELEMENT_MISSING:3009,WEBM_INFO_ELEMENT_MISSING:3010,WEBM_DURATION_ELEMENT_MISSING:3011,WEBM_CUE_TRACK_POSITIONS_ELEMENT_MISSING:3012,WEBM_CUE_TIME_ELEMENT_MISSING:3013,MEDIA_SOURCE_OPERATION_FAILED:3014,MEDIA_SOURCE_OPERATION_THREW:3015,VIDEO_ERROR:3016,QUOTA_EXCEEDED_ERROR:3017,TRANSMUXING_FAILED:3018,CONTENT_TRANSFORMATION_FAILED:3019,UNABLE_TO_GUESS_MANIFEST_TYPE:4e3,DASH_INVALID_XML:4001,DASH_NO_SEGMENT_INFO:4002,DASH_EMPTY_ADAPTATION_SET:4003,DASH_EMPTY_PERIOD:4004,DASH_WEBM_MISSING_INIT:4005,DASH_UNSUPPORTED_CONTAINER:4006,DASH_PSSH_BAD_ENCODING:4007,DASH_NO_COMMON_KEY_SYSTEM:4008,DASH_MULTIPLE_KEY_IDS_NOT_SUPPORTED:4009,DASH_CONFLICTING_KEY_IDS:4010,RESTRICTIONS_CANNOT_BE_MET:4012,HLS_PLAYLIST_HEADER_MISSING:4015,INVALID_HLS_TAG:4016,HLS_INVALID_PLAYLIST_HIERARCHY:4017,DASH_DUPLICATE_REPRESENTATION_ID:4018,HLS_MULTIPLE_MEDIA_INIT_SECTIONS_FOUND:4020,HLS_REQUIRED_ATTRIBUTE_MISSING:4023,HLS_REQUIRED_TAG_MISSING:4024,HLS_COULD_NOT_GUESS_CODECS:4025,HLS_KEYFORMATS_NOT_SUPPORTED:4026,DASH_UNSUPPORTED_XLINK_ACTUATE:4027,DASH_XLINK_DEPTH_LIMIT:4028,CONTENT_UNSUPPORTED_BY_BROWSER:4032,CANNOT_ADD_EXTERNAL_TEXT_TO_LIVE_STREAM:4033,NO_VARIANTS:4036,PERIOD_FLATTENING_FAILED:4037,INCONSISTENT_DRM_ACROSS_PERIODS:4038,HLS_VARIABLE_NOT_FOUND:4039,HLS_MSE_ENCRYPTED_MP2T_NOT_SUPPORTED:4040,HLS_MSE_ENCRYPTED_LEGACY_APPLE_MEDIA_KEYS_NOT_SUPPORTED:4041,NO_WEB_CRYPTO_API:4042,HLS_AES_128_INVALID_IV_LENGTH:4043,HLS_AES_128_INVALID_KEY_LENGTH:4044,CANNOT_ADD_EXTERNAL_THUMBNAILS_TO_LIVE_STREAM:4045,STREAMING_ENGINE_STARTUP_INVALID_STATE:5006,NO_RECOGNIZED_KEY_SYSTEMS:6e3,REQUESTED_KEY_SYSTEM_CONFIG_UNAVAILABLE:6001,FAILED_TO_CREATE_CDM:6002,FAILED_TO_ATTACH_TO_VIDEO:6003,INVALID_SERVER_CERTIFICATE:6004,FAILED_TO_CREATE_SESSION:6005,FAILED_TO_GENERATE_LICENSE_REQUEST:6006,LICENSE_REQUEST_FAILED:6007,LICENSE_RESPONSE_REJECTED:6008,ENCRYPTED_CONTENT_WITHOUT_DRM_INFO:6010,NO_LICENSE_SERVER_GIVEN:6012,OFFLINE_SESSION_REMOVED:6013,EXPIRED:6014,SERVER_CERTIFICATE_REQUIRED:6015,INIT_DATA_TRANSFORM_ERROR:6016,SERVER_CERTIFICATE_REQUEST_FAILED:6017,LOAD_INTERRUPTED:7e3,OPERATION_ABORTED:7001,NO_VIDEO_ELEMENT:7002,OBJECT_DESTROYED:7003,CONTENT_NOT_LOADED:7004,CAST_API_UNAVAILABLE:8e3,NO_CAST_RECEIVERS:8001,ALREADY_CASTING:8002,UNEXPECTED_CAST_ERROR:8003,CAST_CANCELED_BY_USER:8004,CAST_CONNECTION_TIMED_OUT:8005,CAST_RECEIVER_APP_UNAVAILABLE:8006,STORAGE_NOT_SUPPORTED:9e3,INDEXED_DB_ERROR:9001,DEPRECATED_OPERATION_ABORTED:9002,REQUESTED_ITEM_NOT_FOUND:9003,MALFORMED_OFFLINE_URI:9004,CANNOT_STORE_LIVE_OFFLINE:9005,NO_INIT_DATA_FOR_OFFLINE:9007,LOCAL_PLAYER_INSTANCE_REQUIRED:9008,NEW_KEY_OPERATION_NOT_SUPPORTED:9011,KEY_NOT_FOUND:9012,MISSING_STORAGE_CELL:9013,STORAGE_LIMIT_REACHED:9014,DOWNLOAD_SIZE_CALLBACK_ERROR:9015,MODIFY_OPERATION_NOT_SUPPORTED:9016,INDEXED_DB_INIT_TIMED_OUT:9017,CS_IMA_SDK_MISSING:1e4,CS_AD_MANAGER_NOT_INITIALIZED:10001,SS_IMA_SDK_MISSING:10002,SS_AD_MANAGER_NOT_INITIALIZED:10003,CURRENT_DAI_REQUEST_NOT_FINISHED:10004};var ke="text",Ce={Ma:"video",jd:"audio",ha:ke,Ac:"image",Th:"application"},_e={audio:[/^vorbis$/,/^opus$/,/^flac$/,/^mp4a/,/^[ae]c-3$/,/^ac-4$/,/^dts[cx]$/,/^[du]dts$/],video:[/^avc/,/^hev/,/^hvc/,/^vp0?[89]/,/^av01/,/^dvhe/],text:[/^vtt$/,/^wvtt/,/^stpp/]};function Me(){}function Re(e,t){return e=De(e),t=De(t),e.split("-")[0]==t.split("-")[0]}function Ne(e,t){return e=De(e),t=De(t),e=e.split("-"),t=t.split("-"),e[0]==t[0]&&1==e.length&&2==t.length}function Le(e,t){return e=De(e),t=De(t),e=e.split("-"),t=t.split("-"),2==e.length&&2==t.length&&e[0]==t[0]}function De(e){var t=e.split("-");return e=t[0]||"",t=t[1]||"",e=e.toLowerCase(),e=Fe.get(e)||e,(t=t.toUpperCase())?e+"-"+t:e}function Pe(e,t){var n=Ue(e),r=Ue(t);return e!=n&&t!=r&&n==r}function Oe(e,t){return e=De(e),(t=De(t))==e?4:Ne(t,e)?3:Le(t,e)?2:Ne(e,t)?1:0}function Ue(e){var t=e.indexOf("-");return e=(e=0<=t?e.substring(0,t):e).toLowerCase(),Fe.get(e)||e}function Be(e){return e.language?De(e.language):e.audio&&e.audio.language?De(e.audio.language):e.video&&e.video.language?De(e.video.language):"und"}function je(e,t){e=De(e);var n=new Set,r=c(t);for(t=r.next();!t.done;t=r.next())n.add(De(t.value));for(t=(r=c(n)).next();!t.done;t=r.next())if((t=t.value)==e)return t;for(t=(r=c(n)).next();!t.done;t=r.next())if(Ne(t=t.value,e))return t;for(t=(r=c(n)).next();!t.done;t=r.next())if(Le(t=t.value,e))return t;for(t=(n=c(n)).next();!t.done;t=n.next())if(Ne(e,t=t.value))return t;return null}z("shaka.util.LanguageUtils",Me),Me.findClosestLocale=je,Me.getLocaleForVariant=Be,Me.getLocaleForText=function(e){return De(e.language||"und")},Me.getBase=Ue,Me.relatedness=Oe,Me.areSiblings=Pe,Me.normalize=De,Me.isSiblingOf=Le,Me.isParentOf=Ne,Me.areLanguageCompatible=Re,Me.areLocaleCompatible=function(e,t){return(e=De(e))==(t=De(t))};var Fe=new Map([["aar","aa"],["abk","ab"],["afr","af"],["aka","ak"],["alb","sq"],["amh","am"],["ara","ar"],["arg","an"],["arm","hy"],["asm","as"],["ava","av"],["ave","ae"],["aym","ay"],["aze","az"],["bak","ba"],["bam","bm"],["baq","eu"],["bel","be"],["ben","bn"],["bih","bh"],["bis","bi"],["bod","bo"],["bos","bs"],["bre","br"],["bul","bg"],["bur","my"],["cat","ca"],["ces","cs"],["cha","ch"],["che","ce"],["chi","zh"],["chu","cu"],["chv","cv"],["cor","kw"],["cos","co"],["cre","cr"],["cym","cy"],["cze","cs"],["dan","da"],["deu","de"],["div","dv"],["dut","nl"],["dzo","dz"],["ell","el"],["eng","en"],["epo","eo"],["est","et"],["eus","eu"],["ewe","ee"],["fao","fo"],["fas","fa"],["fij","fj"],["fin","fi"],["fra","fr"],["fre","fr"],["fry","fy"],["ful","ff"],["geo","ka"],["ger","de"],["gla","gd"],["gle","ga"],["glg","gl"],["glv","gv"],["gre","el"],["grn","gn"],["guj","gu"],["hat","ht"],["hau","ha"],["heb","he"],["her","hz"],["hin","hi"],["hmo","ho"],["hrv","hr"],["hun","hu"],["hye","hy"],["ibo","ig"],["ice","is"],["ido","io"],["iii","ii"],["iku","iu"],["ile","ie"],["ina","ia"],["ind","id"],["ipk","ik"],["isl","is"],["ita","it"],["jav","jv"],["jpn","ja"],["kal","kl"],["kan","kn"],["kas","ks"],["kat","ka"],["kau","kr"],["kaz","kk"],["khm","km"],["kik","ki"],["kin","rw"],["kir","ky"],["kom","kv"],["kon","kg"],["kor","ko"],["kua","kj"],["kur","ku"],["lao","lo"],["lat","la"],["lav","lv"],["lim","li"],["lin","ln"],["lit","lt"],["ltz","lb"],["lub","lu"],["lug","lg"],["mac","mk"],["mah","mh"],["mal","ml"],["mao","mi"],["mar","mr"],["may","ms"],["mkd","mk"],["mlg","mg"],["mlt","mt"],["mon","mn"],["mri","mi"],["msa","ms"],["mya","my"],["nau","na"],["nav","nv"],["nbl","nr"],["nde","nd"],["ndo","ng"],["nep","ne"],["nld","nl"],["nno","nn"],["nob","nb"],["nor","no"],["nya","ny"],["oci","oc"],["oji","oj"],["ori","or"],["orm","om"],["oss","os"],["pan","pa"],["per","fa"],["pli","pi"],["pol","pl"],["por","pt"],["pus","ps"],["que","qu"],["roh","rm"],["ron","ro"],["rum","ro"],["run","rn"],["rus","ru"],["sag","sg"],["san","sa"],["sin","si"],["slk","sk"],["slo","sk"],["slv","sl"],["sme","se"],["smo","sm"],["sna","sn"],["snd","sd"],["som","so"],["sot","st"],["spa","es"],["sqi","sq"],["srd","sc"],["srp","sr"],["ssw","ss"],["sun","su"],["swa","sw"],["swe","sv"],["tah","ty"],["tam","ta"],["tat","tt"],["tel","te"],["tgk","tg"],["tgl","tl"],["tha","th"],["tib","bo"],["tir","ti"],["ton","to"],["tsn","tn"],["tso","ts"],["tuk","tk"],["tur","tr"],["twi","tw"],["uig","ug"],["ukr","uk"],["urd","ur"],["uzb","uz"],["ven","ve"],["vie","vi"],["vol","vo"],["wel","cy"],["wln","wa"],["wol","wo"],["xho","xh"],["yid","yi"],["yor","yo"],["zha","za"],["zho","zh"],["zul","zu"]]);function ze(e){ee.call(this),this.j=De(e),this.i=new Map,this.g=new Set,this.h=new Map}function Ge(e){for(var t=e.h,n=e.j,r=e.g,i=new Set,a={},o=c(r),s=o.next();!s.done;a={Xb:a.Xb},s=o.next()){a.Xb=s.value,i.add(a.Xb),i.add(Ue(a.Xb)),(s=re(t.keys(),function(e){return function(t){return Pe(t,e.Xb)}}(a))).sort();var u=c(s);for(s=u.next();!s.done;s=u.next())i.add(s.value);for((s=re(t.keys(),function(e){return function(t){return Ue(t)==e.Xb}}(a))).sort(),s=(u=c(s)).next();!s.done;s=u.next())i.add(s.value)}for(i.add(n),n=[],s=(i=c(i)).next();!s.done;s=i.next())(s=t.get(s.value))&&n.push(s);for(n.reverse(),e.i.clear(),s=(t=c(n)).next();!s.done;s=t.next())s.value.forEach((function(t,n){e.i.set(n,t)}));for(t=e.i.keys(),i=new Set,s=(n=c(e.g)).next();!s.done;s=n.next())Ve(s=e.h.get(s.value)||new Map,t,i);0<i.size&&(r=(new Map).set("locales",Array.from(r)).set("missing",Array.from(i)),e.dispatchEvent(new G("missing-localizations",r)))}function Ve(e,t,n){for(var r=(t=c(t)).next();!r.done;r=t.next())r=r.value,e.get(r)||n.add(r)}v(ze,ee),(i=ze.prototype).release=function(){ee.prototype.release.call(this)},i.xf=function(e){var t=this;this.g.clear();for(var n=(e=c(e)).next();!n.done;n=e.next())this.g.add(De(n.value));Ge(this),(e=re(this.g,(function(e){return!t.h.has(e)}))).length&&this.dispatchEvent(new G("unknown-locales",(new Map).set("locales",e))),e=re(this.g,(function(e){return t.h.has(e)})),e=(new Map).set("locales",e.length?e:[this.j]),this.dispatchEvent(new G("locale-changed",e))},i.ba=function(e,t,n){e=De(e),void 0===n&&(n=Ke);var r=this.h.get(e)||new Map;return t.forEach((function(e,t){r.has(t)&&n!=Ke||r.set(t,e)})),this.h.set(e,r),Ge(this),this.dispatchEvent(new G("locale-updated")),this},i.Dh=function(e){for(var t=c(e.keys()),n=t.next();!n.done;n=t.next())n=n.value,e.set(n,this.resolve(n))},i.resolve=function(e){var t=this.i.get(e);return t||(e=(new Map).set("locales",Array.from(this.g)).set("missing",e),this.dispatchEvent(new G("unknown-localization",e)),"")},z("shaka.ui.Localization",ze),ze.prototype.resolve=ze.prototype.resolve,ze.prototype.resolveDictionary=ze.prototype.Dh,ze.prototype.insert=ze.prototype.ba,ze.prototype.changeLocale=ze.prototype.xf,ze.prototype.release=ze.prototype.release;var Ke=1;ze.ConflictResolution={USE_OLD:0,USE_NEW:Ke},ze.UNKNOWN_LOCALES="unknown-locales",ze.UNKNOWN_LOCALIZATION="unknown-localization",ze.MISSING_LOCALIZATIONS="missing-localizations",ze.LOCALE_CHANGED="locale-changed",ze.LOCALE_UPDATED="locale-updated";var He={Uh:"AUTO_QUALITY",nj:"UNRECOGNIZED_LANGUAGE",pj:"VOLUME",$i:"STATISTICS",wi:"LOOP",Gi:"NOT_APPLICABLE",lj:"UNDETERMINED_LANGUAGE",Zh:"CAPTIONS",Di:"MUTE",li:"EXIT_PICTURE_IN_PICTURE",Wi:"SEEK",$h:"CAST",Mi:"PAUSE",oi:"FAST_FORWARD",ti:"LANGUAGE",ig:"SUBTITLE_FORCED",pi:"FULL_SCREEN",Rh:"AD_TIME",Hi:"OFF",Qh:"AD_DURATION",ei:"ENTER_LOOP_MODE",Si:"REPLAY",AD_PROGRESS:"AD_PROGRESS",Xi:"SKIP_AD",Sh:"AIRPLAY",Bi:"MORE_SETTINGS",Ci:"MULTIPLE_LANGUAGES",Ri:"QUALITY",Ni:"PICTURE_IN_PICTURE",Oi:"PLAY",BACK:"BACK",Yi:"SKIP_TO_LIVE",Ui:"REWIND",mj:"UNMUTE",Pi:"PLAYBACK_RATE",hg:"LIVE",Ti:"RESOLUTION",ji:"EXIT_FULL_SCREEN",gi:"ENTER_PICTURE_IN_PICTURE",Ii:"ON",ki:"EXIT_LOOP_MODE"};function We(e){this.g=Math.exp(Math.log(.5)/e),this.i=this.h=0}function Xe(e){return e.h/(1-Math.pow(e.g,e.i))}function qe(){this.h=new We(2),this.j=new We(5),this.g=0,this.i=128e3,this.l=16e3}function Ye(e){if($e.has(e))return $e.get(e);var t=MediaSource.isTypeSupported(e);return $e.set(e,t),t}We.prototype.sample=function(e,t){var n=Math.pow(this.g,e);t=t*(1-n)+n*this.h,isNaN(t)||(this.h=t,this.i+=e)},qe.prototype.configure=function(e){this.i=e.minTotalBytes,this.l=e.minBytes,this.h.g=Math.exp(Math.log(.5)/e.fastHalfLife),this.j.g=Math.exp(Math.log(.5)/e.slowHalfLife)},qe.prototype.sample=function(e,t){if(!(t<this.l)){var n=8e3*t/e;e/=1e3,this.g+=t,this.h.sample(e,n),this.j.sample(e,n)}},qe.prototype.getBandwidthEstimate=function(e){return this.g<this.i?e:Math.min(Xe(this.h),Xe(this.j))};var $e=new Map;function Qe(e,t){return!("number"!=typeof e||"number"!=typeof t||!isNaN(e)||!isNaN(t))||e===t}function Je(e,t){-1<(t=e.indexOf(t))&&e.splice(t,1)}function Ze(e,t,n){if(n||(n=Qe),e.length!=t.length)return!1;t=t.slice();for(var r={},i=(e=c(e)).next();!i.done;r={Td:r.Td},i=e.next()){if(r.Td=i.value,-1==(i=t.findIndex(function(e){return function(t){return n(e.Td,t)}}(r))))return!1;t[i]=t[t.length-1],t.pop()}return 0==t.length}function et(e,t,n){if(n||(n=Qe),e.length!=t.length)return!1;for(var r=0;r<e.length;r++)if(!n(e[r],t[r]))return!1;return!0}function tt(e,t,n){this.startTime=e,this.direction=ut,this.endTime=t,this.payload=n,this.region=new yt,this.position=null,this.positionAlign=rt,this.size=0,this.textAlign=it,this.writingMode=lt,this.lineInterpretation=ct,this.line=null,this.lineHeight="",this.lineAlign=dt,this.displayAlign=ot,this.fontSize=this.textStrokeWidth=this.textStrokeColor=this.textShadow=this.border=this.backgroundImage=this.backgroundColor=this.color="",this.fontWeight=gt,this.fontStyle=mt,this.linePadding=this.letterSpacing=this.fontFamily="",this.opacity=1,this.textDecoration=[],this.wrapLine=!0,this.id="",this.nestedCues=[],this.lineBreak=this.isContainer=!1,this.cellResolution={columns:32,rows:15}}function nt(e,t){if(e.startTime!=t.startTime||e.endTime!=t.endTime||e.payload!=t.payload)return!1;for(var n in e)if("startTime"!=n&&"endTime"!=n&&"payload"!=n)if("nestedCues"==n){if(!et(e.nestedCues,t.nestedCues,nt))return!1}else if("region"==n||"cellResolution"==n){for(var r in e[n])if(e[n][r]!=t[n][r])return!1}else if(Array.isArray(e[n])){if(!et(e[n],t[n]))return!1}else if(e[n]!=t[n])return!1;return!0}tt.prototype.clone=function(){var e,t=new tt(0,0,"");for(e in this)t[e]=this[e],t[e]&&t[e].constructor==Array&&(t[e]=t[e].slice());return t},z("shaka.text.Cue",tt);var rt="auto";tt.positionAlign={LEFT:"line-left",RIGHT:"line-right",CENTER:"center",AUTO:rt};var it="center",at={LEFT:"left",RIGHT:"right",CENTER:it,START:"start",END:"end"};tt.textAlign=at;var ot="after",st={BEFORE:"before",CENTER:"center",AFTER:ot};tt.displayAlign=st;var ut="ltr";tt.direction={HORIZONTAL_LEFT_TO_RIGHT:ut,HORIZONTAL_RIGHT_TO_LEFT:"rtl"};var lt="horizontal-tb";tt.writingMode={HORIZONTAL_TOP_TO_BOTTOM:lt,VERTICAL_LEFT_TO_RIGHT:"vertical-lr",VERTICAL_RIGHT_TO_LEFT:"vertical-rl"};var ct=0;tt.lineInterpretation={LINE_NUMBER:ct,PERCENTAGE:1};var dt="start",ht={CENTER:"center",START:dt,END:"end"};tt.lineAlign=ht;var ft={white:"#FFF",lime:"#0F0",cyan:"#0FF",red:"#F00",yellow:"#FF0",magenta:"#F0F",blue:"#00F",black:"#000"};tt.defaultTextColor=ft;var pt={bg_white:"#FFF",bg_lime:"#0F0",bg_cyan:"#0FF",bg_red:"#F00",bg_yellow:"#FF0",bg_magenta:"#F0F",bg_blue:"#00F",bg_black:"#000"};tt.defaultTextBackgroundColor=pt;var gt=400;tt.fontWeight={NORMAL:gt,BOLD:700};var mt="normal",vt={NORMAL:mt,ITALIC:"italic",OBLIQUE:"oblique"};function yt(){this.id="",this.regionAnchorY=this.regionAnchorX=this.viewportAnchorY=this.viewportAnchorX=0,this.height=this.width=100,this.viewportAnchorUnits=this.widthUnits=this.heightUnits=bt,this.scroll=xt}tt.fontStyle=vt,tt.textDecoration={UNDERLINE:"underline",LINE_THROUGH:"lineThrough",OVERLINE:"overline"},z("shaka.text.CueRegion",yt);var bt=1;yt.units={PX:0,PERCENTAGE:bt,LINES:2};var xt="";function wt(){}function Tt(e,t){if(!e&&!t)return!0;if(!e||!t||e.byteLength!=t.byteLength)return!1;if(At(e)==At(t)&&(e.byteOffset||0)==(t.byteOffset||0))return!0;var n=Et(e);t=Et(t);for(var r=0;r<e.byteLength;r++)if(n[r]!=t[r])return!1;return!0}function At(e){return e instanceof ArrayBuffer?e:e.buffer}function St(e){return e instanceof ArrayBuffer?e:0==e.byteOffset&&e.byteLength==e.buffer.byteLength?e.buffer:new Uint8Array(e).buffer}function Et(e,t,n){return kt(e,void 0===t?0:t,n=void 0===n?1/0:n,Uint8Array)}function It(e,t,n){return kt(e,void 0===t?0:t,n=void 0===n?1/0:n,DataView)}function kt(e,t,n,r){var i=(e.byteOffset||0)+e.byteLength;return t=Math.max(0,Math.min((e.byteOffset||0)+t,i)),new r(At(e),t,Math.min(t+Math.max(n,0),i)-t)}function Ct(){var e,t,n=new Promise((function(n,r){e=n,t=r}));return n.resolve=e,n.reject=t,n}function _t(e){this.h=e,this.g=void 0}function Mt(e){this.h=e,this.g=null}function Rt(e){this.h=e,this.g=null}function Nt(){return!(!e.MediaSource||!MediaSource.isTypeSupported)}function Lt(e){return""!=zt().canPlayType(e)}function Dt(){return Ft("Xbox One")}function Pt(){return Ft("Tizen")}function Ot(){return Ft("Web0S")&&Ft("Chrome/38.0.2125.122 Safari/537.36")}function Ut(){return!!navigator.vendor&&navigator.vendor.includes("Apple")&&!Pt()&&!Ft("PC=EOS")&&!Ft("VirginMedia")&&!Bt()&&!Ft("AFT")}function Bt(){return Ft("PlayStation 4")}function jt(){if(!Ut())return null;var e=navigator.userAgent.match(/Version\/(\d+)/);return e||(e=navigator.userAgent.match(/OS (\d+)(?:_\d+)?/))?parseInt(e[1],10):null}function Ft(e){return(navigator.userAgent||"").includes(e)}function zt(){return Vt||(Gt||(Gt=new Rt((function(){Vt=null}))),(Vt=document.getElementsByTagName("video")[0]||document.getElementsByTagName("audio")[0])||(Vt=document.createElement("video")),Gt.R(1),Vt)}yt.scrollMode={NONE:xt,UP:"up"},z("shaka.util.BufferUtils",wt),wt.toDataView=It,wt.toUint8=Et,wt.toArrayBuffer=St,wt.equal=Tt,Ct.prototype.resolve=function(){},Ct.prototype.reject=function(){},_t.prototype.value=function(){return null==this.g&&(this.g=this.h()),this.g},Mt.prototype.R=function(t){var n=this;this.stop();var r=!0,i=null;return this.g=function(){e.clearTimeout(i),r=!1},i=e.setTimeout((function(){r&&n.h()}),1e3*t),this},Mt.prototype.stop=function(){this.g&&(this.g(),this.g=null)},Rt.prototype.za=function(){return this.stop(),this.h(),this},Rt.prototype.R=function(e){var t=this;return this.stop(),this.g=new Mt((function(){t.h()})).R(e),this},Rt.prototype.ea=function(e){var t=this;return this.stop(),this.g=new Mt((function(){t.g.R(e),t.h()})).R(e),this},Rt.prototype.stop=function(){this.g&&(this.g.stop(),this.g=null)},z("shaka.util.Timer",Rt),Rt.prototype.stop=Rt.prototype.stop,Rt.prototype.tickEvery=Rt.prototype.ea,Rt.prototype.tickAfter=Rt.prototype.R,Rt.prototype.tickNow=Rt.prototype.za;var Gt=null,Vt=null;function Kt(){}function Ht(t){if(!t)return"";if(239==(t=Et(t))[0]&&187==t[1]&&191==t[2]&&(t=t.subarray(3)),e.TextDecoder&&!Bt())return(t=(new TextDecoder).decode(t)).includes("")&&W('Decoded string contains an "unknown character" codepoint.  That probably means the UTF8 encoding was incorrect!'),t;for(var n="",r=0;r<t.length;++r){var i=65533;if(128&t[r]?t.length>=r+2&&192==(224&t[r])&&128==(192&t[r+1])?(i=(31&t[r])<<6|63&t[r+1],r+=1):t.length>=r+3&&224==(240&t[r])&&128==(192&t[r+1])&&128==(192&t[r+2])?(i=(15&t[r])<<12|(63&t[r+1])<<6|63&t[r+2],r+=2):t.length>=r+4&&240==(241&t[r])&&128==(192&t[r+1])&&128==(192&t[r+2])&&128==(192&t[r+3])&&(i=(7&t[r])<<18|(63&t[r+1])<<12|(63&t[r+2])<<6|63&t[r+3],r+=3):i=t[r],65535>=i)n+=String.fromCharCode(i);else{var a=1023&(i-=65536);n+=String.fromCharCode(55296+(i>>10)),n+=String.fromCharCode(56320+a)}}return n}function Wt(e,t,n){if(!e)return"";if(!n&&0!=e.byteLength%2)throw new be(2,2,2004);n=Math.floor(e.byteLength/2);var r=new Uint16Array(n);e=It(e);for(var i=0;i<n;i++)r[i]=e.getUint16(2*i,t);return $t.value()(r)}function Xt(e){function t(e){return n.byteLength<=e||32<=n[e]&&126>=n[e]}if(!e)return"";var n=Et(e);if(239==n[0]&&187==n[1]&&191==n[2])return Ht(n);if(254==n[0]&&255==n[1])return Wt(n.subarray(2),!1);if(255==n[0]&&254==n[1])return Wt(n.subarray(2),!0);if(0==n[0]&&0==n[2])return Wt(e,!1);if(0==n[1]&&0==n[3])return Wt(e,!0);if(t(0)&&t(1)&&t(2)&&t(3))return Ht(e);throw new be(2,2,2003)}function qt(t){if(e.TextEncoder&&!Bt()){var n=new TextEncoder;return St(n.encode(t))}t=encodeURIComponent(t),t=unescape(t),n=new Uint8Array(t.length);for(var r=0;r<t.length;r++)n[r]=t[r].charCodeAt(0);return St(n)}function Yt(e,t){for(var n=new ArrayBuffer(2*e.length),r=new DataView(n),i=0;i<e.length;++i)r.setUint16(2*i,e.charCodeAt(i),t);return n}z("shaka.util.StringUtils",Kt),Kt.resetFromCharCode=function(){$t.g=void 0},Kt.toUTF16=Yt,Kt.toUTF8=qt,Kt.fromBytesAutoDetect=Xt,Kt.fromUTF16=Wt,Kt.fromUTF8=Ht;var $t=new _t((function(){function e(e){try{var t=new Uint8Array(e);return 0<String.fromCharCode.apply(null,t).length}catch(n){return!1}}for(var t={sb:65536};0<t.sb;(t={sb:t.sb}).sb/=2)if(e(t.sb))return function(e){return function(t){for(var n="",r=0;r<t.length;r+=e.sb)n+=String.fromCharCode.apply(null,t.subarray(r,r+e.sb));return n}}(t);return null}));function Qt(){}function Jt(e){return e=Et(e),e=$t.value()(e),btoa(e)}function Zt(e,t){return t=null==t||t,e=Jt(e).replace(/\+/g,"-").replace(/\//g,"_"),t?e:e.replace(/[=]*$/,"")}function en(t){t=e.atob(t.replace(/-/g,"+").replace(/_/g,"/"));for(var n=new Uint8Array(t.length),r=0;r<t.length;++r)n[r]=t.charCodeAt(r);return n}function tn(t){for(var n=t.length/2,r=new Uint8Array(n),i=0;i<n;i++)r[i]=e.parseInt(t.substr(2*i,2),16);return r}function nn(e){var t=Et(e);e="";for(var n=(t=c(t)).next();!n.done;n=t.next())1==(n=(n=n.value).toString(16)).length&&(n="0"+n),e+=n;return e}function rn(){for(var e=D.apply(0,arguments),t=0,n=c(e),r=n.next();!r.done;r=n.next())t+=r.value.byteLength;for(t=new Uint8Array(t),n=0,r=(e=c(e)).next();!r.done;r=e.next())r=r.value,t.set(Et(r),n),n+=r.byteLength;return t}function an(){}z("shaka.util.Uint8ArrayUtils",Qt),Qt.concat=rn,Qt.toHex=nn,Qt.fromHex=tn,Qt.fromBase64=en,Qt.toBase64=Zt,Qt.toStandardBase64=Jt,z("shaka.dependencies",an),an.has=function(e){return sn.has(e)},an.add=function(e,t){if(!on[e])throw Error(e+" is not supported");sn.set(e,(function(){return t}))};var on={muxjs:"muxjs"};an.Allowed=on;var sn=new Map([["muxjs",function(){return e.muxjs}]]);function un(e){var t=this;this.s=e,this.m=sn.get("muxjs")(),this.g=new this.m.mp4.Transmuxer({keepOriginalTimestamps:!0}),this.h=null,this.l=[],this.i=[],this.j=!1,this.g.on("data",(function(e){t.i=e.captions,t.l.push(rn(e.initSegment,e.data))})),this.g.on("done",(function(){var e={data:rn.apply(Qt,d(t.l)),captions:t.i};t.h.resolve(e),t.j=!1}))}function ln(e,t){var n=cn(e),r="audio/aac"==e.toLowerCase().split(";")[0];return!(!sn.get("muxjs")()||!n&&!r)&&(r?Ye('audio/mp4; codecs="mp4a.40.2"'):t?Ye(hn(t,e)):(t=hn("audio",e),e=hn("video",e),Ye(t)||Ye(e)))}function cn(e){return"mp2t"==e.toLowerCase().split(";")[0].split("/")[1]}function dn(e,t){return"audio/aac"==t.toLowerCase().split(";")[0]?'audio/mp4; codecs="mp4a.40.2"':cn(t)?hn(e,t):t}function hn(e,t){if(t=t.replace(/mp2t/i,"mp4"),"audio"==e&&(t=t.replace("video","audio")),e=/avc1\.(66|77|100)\.(\d+)/.exec(t)){var n="avc1.",r=e[1],i=Number(e[2]);n=("66"==r?n+"4200":"77"==r?n+"4d00":n+"6400")+(i>>4).toString(16),n+=(15&i).toString(16),t=t.replace(e[0],n)}return t}function fn(){}function pn(e,t){return t&&(e+='; codecs="'+t+'"'),e}function gn(e,t,n){return ln(e=pn(e,t),n)?dn(n,e):"audio"==n?e.replace("video","audio"):e}function mn(e){var t=yn(e);switch(e=t[0],t=t[1].toLowerCase(),!0){case"mp4a"===e&&"69"===t:case"mp4a"===e&&"6b"===t:return"mp3";case"mp4a"===e&&"66"===t:case"mp4a"===e&&"67"===t:case"mp4a"===e&&"68"===t:case"mp4a"===e&&"40.2"===t:case"mp4a"===e&&"40.02"===t:case"mp4a"===e&&"40.5"===t:case"mp4a"===e&&"40.05"===t:case"mp4a"===e&&"40.29"===t:case"mp4a"===e&&"40.42"===t:return"aac";case"mp4a"===e&&"a5"===t:return"ac-3";case"mp4a"===e&&"a6"===t:return"ec-3";case"mp4a"===e&&"b2"===t:return"dtsx";case"mp4a"===e&&"a9"===t:return"dtsc";case"avc1"===e:case"avc3"===e:return"avc";case"hvc1"===e:case"hev1"===e:return"hevc";case"dvh1"===e:case"dvhe"===e:return"dovi"}return e}function vn(e){return(e=e.split(/ *; */)).shift(),(e=e.find((function(e){return e.startsWith("codecs=")})))?e.split("=")[1].replace(/^"|"$/g,""):""}function yn(e){var t=(e=e.split("."))[0];return e.shift(),[t,e.join(".")]}function bn(e){this.j=null,this.i=e,this.C=!1,this.l=this.B=0,this.m=1/0,this.h=this.g=null,this.F="",this.s=new Map}function xn(e){return!(!Sn[e]&&"application/cea-608"!=e&&"application/cea-708"!=e)}function wn(e,t,n){if(e.F=t,t=e.s.get(t))for(var r=c(t.keys()),i=r.next();!i.done;i=r.next())(i=t.get(i.value).filter((function(e){return e.endTime<=n})))&&e.i.append(i)}function Tn(e,t,n){t.startTime+=n,t.endTime+=n;for(var r=(t=c(t.nestedCues)).next();!r.done;r=t.next())Tn(e,r.value,n)}function An(e,t,n,r,i){for(var a=n+" "+r,o=new Map,s=(t=c(t)).next();!s.done;s=t.next()){var u=s.value;s=u.stream,u=u.cue,o.has(s)||o.set(s,new Map),o.get(s).has(a)||o.get(s).set(a,[]),Tn(e,u,i),u.startTime>=e.l&&u.startTime<e.m&&(o.get(s).get(a).push(u),s==e.F&&e.i.append([u]))}for(a=(i=c(o.keys())).next();!a.done;a=i.next())for(a=a.value,e.s.has(a)||e.s.set(a,new Map),s=(t=c(o.get(a).keys())).next();!s.done;s=t.next())s=s.value,u=o.get(a).get(s),e.s.get(a).set(s,u);e.g=null==e.g?Math.max(n,e.l):Math.min(e.g,Math.max(n,e.l)),e.h=Math.max(e.h,Math.min(r,e.m))}un.prototype.destroy=function(){return this.g.dispose(),this.g=null,Promise.resolve()},z("shaka.util.MimeUtils",fn),fn.getFullType=pn,(new Map).set("codecs","codecs").set("frameRate","framerate").set("bandwidth","bitrate").set("width","width").set("height","height").set("channelsCount","channels"),bn.prototype.destroy=function(){return this.i=this.j=null,this.s.clear(),Promise.resolve()},bn.prototype.remove=function(e,t){var n=this;return L((function(r){if(1==r.g)return w(r,Promise.resolve(),2);!n.i||!n.i.remove(e,t)||null==n.g||t<=n.g||e>=n.h||(e<=n.g&&t>=n.h?n.g=n.h=null:e<=n.g&&t<n.h?n.g=t:e>n.g&&t>=n.h&&(n.h=e)),T(r)}))},z("shaka.text.TextEngine",bn),bn.prototype.destroy=bn.prototype.destroy,bn.findParser=function(e){return Sn[e]},bn.unregisterParser=function(e){delete Sn[e]},bn.registerParser=function(e,t){Sn[e]=t};var Sn={};function En(e,t,n,r,i){var a=e.variants;(t.length||n.length)&&(a=function(e,t,n){for(var r={},i=(t=c(t)).next();!i.done;r={ee:r.ee},i=t.next())if(r.ee=i.value,i=e.filter(function(e){return function(t){return t.video&&t.video.codecs.startsWith(e.ee)}}(r)),i.length){e=i;break}for(r={},n=c(n),t=n.next();!t.done;r={Qd:r.Qd},t=n.next())if(r.Qd=t.value,t=e.filter(function(e){return function(t){return t.audio&&t.audio.codecs.startsWith(e.Qd)}}(r)),t.length){e=t;break}return e}(a,t,n)),t=function(e){for(var t=new Z,n=(e=c(e)).next();!n.done;n=e.next()){var r=kn(n=n.value);t.push(r,n)}return t}(a=Wn(a,r)),t=function(e){var t=0,n=new Map,r=e.size();return e.forEach((function(e,i){for(var a=(i=c(i)).next();!a.done;a=i.next()){var o=(a=a.value).video;if(o&&o.width&&o.height){o=o.width*o.height*(o.frameRate||1),n.has(o)||n.set(o,new Z);var s=n.get(o);s.push(e,a),s.size()===r&&(t=Math.max(t,o))}}})),t?n.get(t):e}(t);var o=function(e,t){for(var n=(t=c(t)).next();!n.done;n=t.next())if((n=n.value)==Jn||n==Zn){if(1==(e=In(e,n)).size())return e.keys()[0]}else if(n==er)break;return function(e){var t="",n=1/0;return e.forEach((function(e,r){for(var i=0,a=0,o=(r=c(r)).next();!o.done;o=r.next())i+=o.value.bandwidth||0,++a;(i/=a)<n&&(t=e,n=i)})),t}(e)}(t,i);e.variants=e.variants.filter((function(e){return kn(e)==o}))}function In(e,t){var n=0,r=new Z;return e.forEach((function(e,i){for(var a=0,o=0,s=c(i),u=s.next();!u.done;u=s.next())(u=u.value).decodingInfos.length&&(a+=u.decodingInfos[0][t]?1:0,o++);(a/=o)>n?(r.g={},r.push(e,i),n=a):a==n&&r.push(e,i)})),r}function kn(e){var t="";e.video&&(t=mn(e.video.codecs));var n="";return e.audio&&(n=mn(e.audio.codecs)),t+"-"+n}function Cn(e,t,n){function r(e,t,n){return e>=t&&e<=n}var i=e.video;if(0!=e.disabledUntilTime){if(e.disabledUntilTime>Date.now()/1e3)return!1;e.disabledUntilTime=0}return!(i&&i.width&&i.height&&(!r(i.width,t.minWidth,Math.min(t.maxWidth,n.width))||!r(i.height,t.minHeight,Math.min(t.maxHeight,n.height))||!r(i.width*i.height,t.minPixels,t.maxPixels))||e&&e.video&&e.video.frameRate&&!r(e.video.frameRate,t.minFrameRate,t.maxFrameRate)||!r(e.bandwidth,t.minBandwidth,t.maxBandwidth))}function _n(e,t,n){for(var r=!1,i=(e=c(e)).next();!i.done;i=e.next()){var a=(i=i.value).allowedByApplication;i.allowedByApplication=Cn(i,t,n),a!=i.allowedByApplication&&(r=!0)}return r}function Mn(e,t){return L((function(n){return 1==n.g?w(n,Rn(t,0<t.offlineSessionIds.length),2):(On(e,t),function(e){e.textStreams=e.textStreams.filter((function(e){return xn(pn(e.mimeType,e.codecs))}))}(t),w(n,function(e){var t,n,r,i,a,o,s;return L((function(u){switch(u.g){case 1:t=[],n=c(e.imageStreams),r=n.next();case 2:if(r.done){u.D(4);break}if(i=r.value,a=i.mimeType,tr.has(a)){u.D(5);break}if(!(o=nr.get(a))){tr.set(a,!1),u.D(5);break}return w(u,function(e){return new Promise((function(t){var n=new Image;n.src=e,"decode"in n?n.decode().then((function(){t(!0)})).catch((function(){t(!1)})):n.onload=n.onerror=function(){t(2===n.height)}}))}(o),7);case 7:s=u.h,tr.set(a,s);case 5:tr.get(a)&&t.push(i),r=n.next(),u.D(2);break;case 4:e.imageStreams=t,T(u)}}))}(t),0))}))}function Rn(e,t){return L((function(n){if(1==n.g)return w(n,Nn(e.variants,t,!1),2);e.variants=e.variants.filter((function(e){var t=e.video;if(t){var n=Pn(t.codecs);if(t.codecs.includes(",")){var r=t.codecs.split(",");n=Pn(n=Ee("video",r)),r=Dn(r=Ee("audio",r));var i=gn(t.mimeType,r,"audio");if(!Ye(i))return!1;n=[n,r].join()}if(!Ye(r=gn(t.mimeType,n,"video")))return!1;t.codecs=n}if(n=e.audio){if(r=Dn(n.codecs),!Ye(i=gn(n.mimeType,r,"audio")))return!1;n.codecs=r}return Dt()&&t&&(t.width&&1920<t.width||t.height&&1080<t.height)&&(t.codecs.includes("avc1.")||t.codecs.includes("avc3."))?(Yn(e),!1):((t=e.decodingInfos.some((function(e){return e.supported})))||Yn(e),t)})),T(n)}))}function Nn(e,t,n){var r,i,a,o,s,u,l,d,h,f;return L((function(p){if(e.some((function(e){return e.decodingInfos.length})))return p.return();for(r=navigator.mediaCapabilities,i=[],a=function(e,t){var n;return L((function(i){return 1==i.g?(A(i,2),w(i,r.decodingInfo(t),4)):2!=i.g?(n=i.h,e.decodingInfos.push(n),E(i,0)):(I(i),JSON.stringify(t),void T(i))}))},o=c(e),s=o.next();!s.done;s=o.next())for(u=s.value,l=Ln(u,t,n),d=c(l),h=d.next();!h.done;h=d.next())f=h.value,i.push(a(u,f));return w(p,Promise.all(i),0)}))}function Ln(e,t,n){var r=e.audio,i=e.video;if(n={type:n?"file":"media-source"},i){var a=i.codecs;if(i.codecs.includes(",")){var o=i.codecs.split(",");a=Pn(a=Ee("video",o)),o=Ee("audio",o),o=gn(i.mimeType,o,"audio"),n.audio={contentType:o,channels:2,bitrate:e.bandwidth||1,samplerate:1,spatialRendering:!1}}if(a=Pn(a),a=gn(i.mimeType,a,"video"),n.video={contentType:a,width:i.width||64,height:i.height||64,bitrate:i.bandwidth||e.bandwidth||1,framerate:i.frameRate||1},i.hdr)switch(i.hdr){case"SDR":n.video.transferFunction="srgb";break;case"PQ":n.video.transferFunction="pq";break;case"HLG":n.video.transferFunction="hlg"}}if(r&&(a=Dn(r.codecs),a=gn(r.mimeType,a,"audio"),n.audio={contentType:a,channels:r.channelsCount||2,bitrate:r.bandwidth||e.bandwidth||1,samplerate:r.audioSamplingRate||1,spatialRendering:r.spatialAudio}),!(o=(e.video?e.video.drmInfos:[]).concat(e.audio?e.audio.drmInfos:[])).length)return[n];e=[],a=new Map;for(var s=(o=c(o)).next();!s.done;s=o.next()){var u=s.value;a.get(u.keySystem)||a.set(u.keySystem,[]),a.get(u.keySystem).push(u)}o=t?"required":"optional",t=t?["persistent-license"]:["temporary"];for(var l=(u=c(a.keys())).next();!l.done;l=u.next()){var d=l.value;l=Object.assign({},n);var h=a.get(d);for(d={keySystem:d,initDataType:"cenc",persistentState:o,distinctiveIdentifier:"optional",sessionTypes:t},s=(h=c(h)).next();!s.done;s=h.next()){if((s=s.value).initData&&s.initData.length){for(var f=new Set,p=c(s.initData),g=p.next();!g.done;g=p.next())f.add(g.value.initDataType);d.initDataType=s.initData[0].initDataType}s.distinctiveIdentifierRequired&&(d.distinctiveIdentifier="required"),s.persistentStateRequired&&(d.persistentState="required"),s.sessionType&&(d.sessionTypes=[s.sessionType]),r&&(d.audio?d.audio.robustness=d.audio.robustness||s.audioRobustness:d.audio={robustness:s.audioRobustness}),i&&(d.video?d.video.robustness=d.video.robustness||s.videoRobustness:d.video={robustness:s.videoRobustness})}l.keySystemConfiguration=d,e.push(l)}return e}function Dn(e){return Pt()&&"ac-3"==e.toLowerCase()?"ec-3":e}function Pn(e){if(e.includes("avc1")){var t=e.split(".");if(3==t.length)return e=t.shift()+".",(e+=parseInt(t.shift(),10).toString(16))+("000"+parseInt(t.shift(),10).toString(16)).slice(-4)}else if("vp9"==e)return"vp09.00.41.08";return e}function On(e,t){t.variants=t.variants.filter((function(t){var n=t.audio;return t=t.video,!(n&&e&&e.audio&&!Un(n,e.audio)||t&&e&&e.video&&!Un(t,e.video))}))}function Un(e,t){return e.mimeType==t.mimeType&&e.codecs.split(".")[0]==t.codecs.split(".")[0]}function Bn(e){var t=e.audio,n=e.video,r=t?t.mimeType:null,i=n?n.mimeType:null,a=t?t.codecs:null,o=n?n.codecs:null,s=[];o&&s.push(o),a&&s.push(a);var u=[];n&&u.push(n.mimeType),t&&u.push(t.mimeType),u=u[0]||null;var l=[];t&&l.push(t.kind),n&&l.push(n.kind),l=l[0]||null;var d=new Set;if(t)for(var h=c(t.roles),f=h.next();!f.done;f=h.next())d.add(f.value);if(n)for(f=(h=c(n.roles)).next();!f.done;f=h.next())d.add(f.value);return e={id:e.id,active:!1,type:"variant",bandwidth:e.bandwidth,language:e.language,label:null,kind:l,width:null,height:null,frameRate:null,pixelAspectRatio:null,hdr:null,mimeType:u,audioMimeType:r,videoMimeType:i,codecs:s.join(", "),audioCodec:a,videoCodec:o,primary:e.primary,roles:Array.from(d),audioRoles:null,forced:!1,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null,originalImageId:null},n&&(e.videoId=n.id,e.originalVideoId=n.originalId,e.width=n.width||null,e.height=n.height||null,e.frameRate=n.frameRate||null,e.pixelAspectRatio=n.pixelAspectRatio||null,e.videoBandwidth=n.bandwidth||null),t&&(e.audioId=t.id,e.originalAudioId=t.originalId,e.channelsCount=t.channelsCount,e.audioSamplingRate=t.audioSamplingRate,e.audioBandwidth=t.bandwidth||null,e.spatialAudio=t.spatialAudio,e.label=t.label,e.audioRoles=t.roles),e}function jn(e){return{id:e.id,active:!1,type:ke,bandwidth:0,language:e.language,label:e.label,kind:e.kind||null,width:null,height:null,frameRate:null,pixelAspectRatio:null,hdr:null,mimeType:e.mimeType,audioMimeType:null,videoMimeType:null,codecs:e.codecs||null,audioCodec:null,videoCodec:null,primary:e.primary,roles:e.roles,audioRoles:null,forced:e.forced,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:e.originalId,originalImageId:null}}function Fn(e){var t=e.width||null,n=e.height||null,r=null;e.segmentIndex&&(r=e.segmentIndex.get(0));var i=e.tilesLayout;return r&&(i=r.tilesLayout||i),i&&null!=t&&(t/=Number(i.split("x")[0])),i&&null!=n&&(n/=Number(i.split("x")[1])),{id:e.id,active:!1,type:"image",bandwidth:e.bandwidth||0,language:"",label:null,kind:null,width:t,height:n,frameRate:null,pixelAspectRatio:null,hdr:null,mimeType:e.mimeType,audioMimeType:null,videoMimeType:null,codecs:null,audioCodec:null,videoCodec:null,primary:!1,roles:[],audioRoles:null,forced:!1,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:i||null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null,originalImageId:e.originalId}}function zn(e){return e.__shaka_id||(e.__shaka_id=Qn++),e.__shaka_id}function Gn(e){var t=Kn(e);return t.active="disabled"!=e.mode,t.type="text",t.originalTextId=e.id,"captions"==e.kind&&(t.mimeType="application/cea-608"),e.kind&&(t.roles=[e.kind]),"forced"==e.kind&&(t.forced=!0),t}function Vn(e){var t=Kn(e);return t.active=e.enabled,t.type="variant",t.originalAudioId=e.id,"main"==e.kind&&(t.primary=!0),e.kind&&(t.roles=[e.kind],t.audioRoles=[e.kind],t.label=e.label),t}function Kn(e){return{id:zn(e),active:!1,type:"",bandwidth:0,language:De(e.language),label:e.label,kind:e.kind,width:null,height:null,frameRate:null,pixelAspectRatio:null,hdr:null,mimeType:null,audioMimeType:null,videoMimeType:null,codecs:null,audioCodec:null,videoCodec:null,primary:!1,roles:[],forced:!1,audioRoles:null,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null,originalImageId:null}}function Hn(e){return e.allowedByApplication&&e.allowedByKeySystem}function Wn(e,t){for(var n=e.filter((function(e){return e.audio&&e.audio.channelsCount})),r=new Map,i=(n=c(n)).next();!i.done;i=n.next()){var a=(i=i.value).audio.channelsCount;r.has(a)||r.set(a,[]),r.get(a).push(i)}return 0==(n=Array.from(r.keys())).length?e:(e=n.filter((function(e){return e<=t}))).length?r.get(Math.max.apply(Math,d(e))):r.get(Math.min.apply(Math,d(n)))}function Xn(e,t,n,r){var i=e,a=e.filter((function(e){return e.primary}));a.length&&(i=a);var o=i.length?i[0].language:"";if(i=i.filter((function(e){return e.language==o})),t){var s=je(De(t),e.map((function(e){return e.language})));s&&(i=e.filter((function(e){return De(e.language)==s})))}if(i=i.filter((function(e){return e.forced==r})),n){if((e=qn(i,n)).length)return e}else if(e=i.filter((function(e){return 0==e.roles.length})),e.length)return e;return e=i.map((function(e){return e.roles})).reduce(xe,[]),e.length?qn(i,e[0]):i}function qn(e,t){return e.filter((function(e){return e.roles.includes(t)}))}function Yn(e){var t=[];return e.audio&&t.push($n(e.audio)),e.video&&t.push($n(e.video)),t.join(", ")}function $n(e){return"audio"==e.type?"type=audio codecs="+e.codecs+" bandwidth="+e.bandwidth+" channelsCount="+e.channelsCount+" audioSamplingRate="+e.audioSamplingRate:"video"==e.type?"type=video codecs="+e.codecs+" bandwidth="+e.bandwidth+" frameRate="+e.frameRate+" width="+e.width+" height="+e.height:"unexpected stream type"}var Qn=0,Jn="smooth",Zn="powerEfficient",er="bandwidth",tr=(new Map).set("image/svg+xml",!0).set("image/png",!0).set("image/jpeg",!0).set("image/jpg",!0),nr=(new Map).set("image/webp","data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA").set("image/avif","data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A=");function rr(){var e=this;this.m=null,this.l=!1,this.i=new qe,navigator.connection&&navigator.connection.addEventListener("change",(function(){if(e.g.useNetworkInformation&&e.l){e.i=new qe,e.g&&e.i.configure(e.g.advanced);var t=e.chooseVariant();t&&e.m(t)}})),this.s=[],this.C=1,this.F=!1,this.h=this.j=this.g=this.B=null,this.G=new Rt((function(){if(e.g.restrictToElementSize){var t=e.chooseVariant();t&&e.m(t)}}))}function ir(e){var t=e.g.defaultBandwidthEstimate;return navigator.connection&&navigator.connection.downlink&&e.g.useNetworkInformation&&(t=1e6*navigator.connection.downlink),t}function ar(e,t,n,r){return e&&(t=t.filter((function(t){return Cn(t,e,{width:r,height:n})}))),t.sort((function(e,t){return e.bandwidth-t.bandwidth}))}(i=rr.prototype).stop=function(){this.m=null,this.l=!1,this.s=[],this.C=1,this.j=this.B=null,this.h&&(this.h.disconnect(),this.h=null),this.G.stop()},i.init=function(e){this.m=e},i.chooseVariant=function(){var t=1/0,n=1/0;this.g.restrictToScreenSize&&(n=this.g.ignoreDevicePixelRatio?1:e.devicePixelRatio,t=e.screen.height*n,n*=e.screen.width),this.h&&this.g.restrictToElementSize&&(n=this.g.ignoreDevicePixelRatio?1:e.devicePixelRatio,t=this.j.clientWidth*n,n*=this.j.clientHeight),t=ar(this.g.restrictions,this.s,t,n),n=this.i.getBandwidthEstimate(ir(this)),this.s.length&&!t.length&&(t=[(t=ar(null,this.s,1/0,1/0))[0]]);for(var r=t[0]||null,i=0;i<t.length;i++){for(var a=t[i],o=isNaN(this.C)?1:Math.abs(this.C),s=o*a.bandwidth/this.g.bandwidthDowngradeTarget,u={bandwidth:1/0},l=i+1;l<t.length;l++)if(a.bandwidth!=t[l].bandwidth){u=t[l];break}o=o*u.bandwidth/this.g.bandwidthUpgradeTarget,n>=s&&n<=o&&r.bandwidth!=a.bandwidth&&(r=a)}return this.B=Date.now(),r},i.enable=function(){this.l=!0},i.disable=function(){this.l=!1},i.segmentDownloaded=function(e,t){if(this.i.sample(e,t),null!=this.B&&this.l)e:{if(this.F){if(Date.now()-this.B<1e3*this.g.switchInterval)break e}else{if(!((e=this.i).g>=e.i))break e;this.F=!0}e=this.chooseVariant(),this.i.getBandwidthEstimate(ir(this)),e&&this.m(e)}},i.getBandwidthEstimate=function(){return this.i.getBandwidthEstimate(ir(this))},i.setVariants=function(e){this.s=e},i.playbackRateChanged=function(e){this.C=e},i.setMediaElement=function(t){var n=this;this.j=t,this.h&&(this.h.disconnect(),this.h=null),this.j&&"ResizeObserver"in e&&(this.h=new ResizeObserver((function(){n.G.R(or)})),this.h.observe(this.j))},i.configure=function(e){this.g=e,this.i&&this.g&&this.i.configure(this.g.advanced)},z("shaka.abr.SimpleAbrManager",rr),rr.prototype.configure=rr.prototype.configure,rr.prototype.setMediaElement=rr.prototype.setMediaElement,rr.prototype.playbackRateChanged=rr.prototype.playbackRateChanged,rr.prototype.setVariants=rr.prototype.setVariants,rr.prototype.getBandwidthEstimate=rr.prototype.getBandwidthEstimate,rr.prototype.segmentDownloaded=rr.prototype.segmentDownloaded,rr.prototype.disable=rr.prototype.disable,rr.prototype.enable=rr.prototype.enable,rr.prototype.chooseVariant=rr.prototype.chooseVariant,rr.prototype.init=rr.prototype.init,rr.prototype.stop=rr.prototype.stop;var or=1;function sr(e,t){this.g=e,this.h=t}function ur(e,t){var n=new sr(5,0),r=dr,i=r.g,a=n.h-i.h;(0<(n.g-i.g||a)?r.i:r.h)(r.g,n,e,t)}function lr(e,t,n,r){X([n,"has been deprecated and will be removed in",t,". We are currently at version",e,". Additional information:",r].join(" "))}function cr(e,t,n,r){W([n,"has been deprecated and has been removed in",t,". We are now at version",e,". Additional information:",r].join(""))}sr.prototype.toString=function(){return"v"+this.g+"."+this.h};var dr=null;function hr(e,t){for(this.h=e,this.g=new Set([e]),t=(e=c(t=t||[])).next();!t.done;t=e.next())this.add(t.value)}function fr(e,t){var n;if(!(n=!!e.audio!=!!t.audio||!!e.video!=!!t.video||e.language!=t.language)&&(n=e.audio&&t.audio)){n=e.audio;var r=t.audio;n=!((!(!n.channelsCount||!r.channelsCount||2<n.channelsCount||2<r.channelsCount)||n.channelsCount==r.channelsCount)&&pr(n,r)&&gr(n.roles,r.roles))}return!n&&(n=e.video&&t.video)&&(n=!(pr(e=e.video,t=t.video)&&gr(e.roles,t.roles))),!n}function pr(e,t){if(e.mimeType!=t.mimeType)return!1;if(e=e.codecs.split(",").map((function(e){return yn(e)[0]})),t=t.codecs.split(",").map((function(e){return yn(e)[0]})),e.length!=t.length)return!1;e.sort(),t.sort();for(var n=0;n<e.length;n++)if(e[n]!=t[n])return!1;return!0}function gr(e,t){if(e=new Set(e),t=new Set(t),e.delete("main"),t.delete("main"),e.size!=t.size)return!1;for(var n=(e=c(e)).next();!n.done;n=e.next())if(!t.has(n.value))return!1;return!0}function mr(e){this.g=e,this.h=new vr(e.language,"",e.audio&&e.audio.channelsCount?e.audio.channelsCount:0,"")}function vr(e,t,n,r){this.i=e,this.j=t,this.g=n,this.h=void 0===r?"":r}function yr(){this.g=wr,this.h=(new Map).set(wr,2).set(xr,1)}function br(e,t,n){e.h.set(wr,n).set(xr,t)}z("shaka.config.AutoShowText",{NEVER:0,ALWAYS:1,IF_PREFERRED_TEXT_LANGUAGE:2,IF_SUBTITLES_MAY_BE_NEEDED:3}),hr.prototype.add=function(e){return!!fr(this.h,e)&&(this.g.add(e),!0)},hr.prototype.values=function(){return this.g.values()},mr.prototype.create=function(e){var t=this,n=e.filter((function(e){return fr(t.g,e)}));return n.length?new hr(n[0],n):this.h.create(e)},vr.prototype.create=function(e){var t=[];t=function(e,t){t=De(t);var n=je(t,e.map((function(e){return Be(e)})));return n?e.filter((function(e){return n==Be(e)})):[]}(e,this.i);var n=e.filter((function(e){return e.primary}));for(e=function(e,t){return e.filter((function(e){return!!e.audio&&(t?e.audio.roles.includes(t):0==e.audio.roles.length)}))}(t=t.length?t:n.length?n:e,this.j),e.length&&(t=e),this.g&&((e=Wn(t,this.g)).length&&(t=e)),this.h&&(e=function(e,t){return e.filter((function(e){return!!e.audio&&e.audio.label.toLowerCase()==t.toLowerCase()}))}(t,this.h),e.length&&(t=e)),e=new hr(t[0]),n=(t=c(t)).next();!n.done;n=t.next())n=n.value,fr(e.h,n)&&e.add(n);return e};var xr=0,wr=1;function Tr(e,t){var n={maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:3e4,stallTimeout:5e3,connectionTimeout:1e4};this.l=null==e.maxAttempts?n.maxAttempts:e.maxAttempts,this.j=null==e.baseDelay?n.baseDelay:e.baseDelay,this.s=null==e.fuzzFactor?n.fuzzFactor:e.fuzzFactor,this.m=null==e.backoffFactor?n.backoffFactor:e.backoffFactor,this.g=0,this.h=this.j,(this.i=void 0!==t&&t)&&(this.g=1)}function Ar(e){var t,n;return L((function(r){if(1==r.g){if(e.g>=e.l){if(!e.i)throw new be(2,7,1010);e.g=1,e.h=e.j}return t=e.g,e.g++,0==t?r.return():(n=e.h*(1+(2*Math.random()-1)*e.s),w(r,new Promise((function(e){new Rt(e).R(n/1e3)})),2))}e.h*=e.m,T(r)}))}function Sr(e,t){this.promise=e,this.i=t,this.g=!1}function Er(e){return new Sr(Promise.reject(e),(function(){return Promise.resolve()}))}function Ir(){var e=Promise.reject(new be(2,7,7001));return e.catch((function(){})),new Sr(e,(function(){return Promise.resolve()}))}function kr(e){return new Sr(Promise.resolve(e),(function(){return Promise.resolve()}))}function Cr(e){return new Sr(e,(function(){return e.catch((function(){}))}))}function _r(e){return new Sr(Promise.all(e.map((function(e){return e.promise}))),(function(){return Promise.all(e.map((function(e){return e.abort()})))}))}function Mr(e){var t=new Set;return function e(n){switch(typeof n){case"undefined":case"boolean":case"number":case"string":case"symbol":case"function":return n;default:if(!n||n.buffer&&n.buffer.constructor==ArrayBuffer)return n;if(t.has(n))return null;var r=n.constructor==Array;if(n.constructor!=Object&&!r)return null;t.add(n);var i,a=r?[]:{};for(i in n)a[i]=e(n[i]);return r&&(a.length=n.length),a}}(e)}function Rr(e){var t,n={};for(t in e)n[t]=e[t];return n}function Nr(){this.g=[]}function Lr(e,t){e.g.push(t.finally((function(){Je(e.g,t)})))}function Dr(e,t,n){ee.call(this),this.i=!1,this.m=new Nr,this.g=new Set,this.h=new Set,this.l=e||null,this.j=t||null,this.B=n||null,this.s=!1}function Pr(e,t,n,r){n=n||zr;var i=Gr[e];(!i||n>=i.priority)&&(Gr[e]={priority:n,sh:t,uh:void 0!==r&&r})}function Or(e,t,n){return{uris:e,method:"GET",body:null,headers:{},allowCrossSiteCredentials:!1,retryParameters:t,licenseRequestType:null,sessionId:null,drmInfo:null,initData:null,initDataType:null,streamDataCallback:void 0===n?null:n}}function Ur(e,t,n,r,i,a,o){e.s&&(n.uris[i]=n.uris[i].replace("http://","https://"));var s=new ae(n.uris[i]),u=s.Wa,l=!1;u||(oe(s,u=(u=location.protocol).slice(0,-1)),n.uris[i]=s.toString()),u=u.toLowerCase();var c=(u=Gr[u])?u.sh:null;if(!c)return Er(new be(2,1,1e3,s));var d,h=u.uh,f=null,p=null,g=!1,m=!1;return Cr(Ar(r)).ia((function(){if(e.i)return Ir();d=Date.now();var r=c(n.uris[i],n,t,(function(n,r,i){f&&f.stop(),p&&p.R(s/1e3),e.l&&t==Fr&&(e.l(n,r),l=!0,o.g=i)}),(function(r){e.j&&e.j(r,n,t),m=!0}));if(!h)return r;var a=n.retryParameters.connectionTimeout;a&&(f=new Rt((function(){g=!0,r.abort()}))).R(a/1e3);var s=n.retryParameters.stallTimeout;return s&&(p=new Rt((function(){g=!0,r.abort()}))),r})).ia((function(r){f&&f.stop(),p&&p.stop(),null==r.timeMs&&(r.timeMs=Date.now()-d);var i={response:r,eh:l};return!m&&e.j&&e.j(r.headers,n,t),i}),(function(s){if(f&&f.stop(),p&&p.stop(),e.B){var u=null,l=0;s instanceof be&&(u=s,1001==s.code&&(l=s.data[1])),e.B(n,u,l,g)}if(e.i)return Ir();if(g&&(s=new be(1,1,1003,n.uris[i],t)),s instanceof be){if(7001==s.code)throw s;if(1010==s.code)throw a;if(1==s.severity)return u=new G("retry",u=(new Map).set("error",s)),e.dispatchEvent(u),i=(i+1)%n.uris.length,Ur(e,t,n,r,i,s,o)}throw s}))}function Br(){this.g=0}function jr(e,t,n){Sr.call(this,e,t),this.h=n}Sr.prototype.abort=function(){return this.g=!0,this.i()},Sr.prototype.finally=function(e){return this.promise.then((function(){return e(!0)}),(function(){return e(!1)})),this},Sr.prototype.ia=function(e,t){function n(n){return function(s){if(i.g&&n)a.reject(o);else{var u=n?e:t;u?r=function(e,t,n){try{var r=e(t);return r&&r.promise&&r.abort?(n.resolve(r.promise),function(){return r.abort()}):(n.resolve(r),function(){return Promise.resolve(r).then((function(){}),(function(){}))})}catch(i){return n.reject(i),function(){return Promise.resolve()}}}(u,s,a):(n?a.resolve:a.reject)(s)}}}function r(){return a.reject(o),i.abort()}var i=this,a=new Ct,o=new be(2,7,7001);return this.promise.then(n(!0),n(!1)),new Sr(a,(function(){return r()}))},z("shaka.util.AbortableOperation",Sr),Sr.prototype.chain=Sr.prototype.ia,Sr.prototype.finally=Sr.prototype.finally,Sr.all=_r,Sr.prototype.abort=Sr.prototype.abort,Sr.notAbortable=Cr,Sr.completed=kr,Sr.aborted=Ir,Sr.failed=Er,Nr.prototype.destroy=function(){for(var e=[],t=c(this.g),n=t.next();!n.done;n=t.next())(n=n.value).promise.catch((function(){})),e.push(n.abort());return this.g=[],Promise.all(e)},v(Dr,ee),(i=Dr.prototype).Ne=function(e){this.s=e},i.vh=function(e){this.g.add(e)},i.Lh=function(e){this.g.delete(e)},i.qg=function(){this.g.clear()},i.wh=function(e){this.h.add(e)},i.Mh=function(e){this.h.delete(e)},i.rg=function(){this.h.clear()},i.destroy=function(){return this.i=!0,this.g.clear(),this.h.clear(),ee.prototype.release.call(this),this.m.destroy()},i.request=function(e,t){var n=this,r=new Br;if(this.i){var i=Promise.reject(new be(2,7,7001));return i.catch((function(){})),new jr(i,(function(){return Promise.resolve()}),r)}t.method=t.method||"GET",t.headers=t.headers||{},t.retryParameters=t.retryParameters?Mr(t.retryParameters):{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:3e4,stallTimeout:5e3,connectionTimeout:1e4},t.uris=Mr(t.uris),i=function(e,t,n){for(var r=kr(void 0),i={},a=(e=c(e.g)).next();!a.done;i={Zd:i.Zd},a=e.next())i.Zd=a.value,r=r.ia(function(e){return function(){return n.body&&(n.body=St(n.body)),e.Zd(t,n)}}(i));return r.ia(void 0,(function(e){if(e instanceof be&&7001==e.code)throw e;throw new be(2,1,1006,e)}))}(this,e,t);var a=i.ia((function(){return Ur(n,e,t,new Tr(t.retryParameters,!1),0,null,r)})),o=a.ia((function(t){return function(e,t,n){for(var r=kr(void 0),i={},a=(e=c(e.h)).next();!a.done;i={$d:i.$d},a=e.next())i.$d=a.value,r=r.ia(function(e){return function(){var r=n.response;return r.data&&(r.data=St(r.data)),e.$d(t,r)}}(i));return r.ia((function(){return n}),(function(e){var t=2;if(e instanceof be){if(7001==e.code)throw e;t=e.severity}throw new be(t,1,1007,e)}))}(n,e,t)})),s=Date.now(),u=0;i.promise.then((function(){u=Date.now()-s}),(function(){}));var l=0;a.promise.then((function(){l=Date.now()}),(function(){}));var d=o.ia((function(t){var r=Date.now()-l,i=t.response;return i.timeMs+=u,i.timeMs+=r,t.eh||!n.l||i.fromCache||e!=Fr||n.l(i.timeMs,i.data.byteLength),i}),(function(e){throw e&&(e.severity=2),e}));return i=new jr(d.promise,(function(){return d.abort()}),r),Lr(this.m,i),i},z("shaka.net.NetworkingEngine",Dr),Dr.prototype.request=Dr.prototype.request,Dr.prototype.destroy=Dr.prototype.destroy,Dr.makeRequest=Or,Dr.defaultRetryParameters=function(){return{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:3e4,stallTimeout:5e3,connectionTimeout:1e4}},Dr.prototype.clearAllResponseFilters=Dr.prototype.rg,Dr.prototype.unregisterResponseFilter=Dr.prototype.Mh,Dr.prototype.registerResponseFilter=Dr.prototype.wh,Dr.prototype.clearAllRequestFilters=Dr.prototype.qg,Dr.prototype.unregisterRequestFilter=Dr.prototype.Lh,Dr.prototype.registerRequestFilter=Dr.prototype.vh,Dr.unregisterScheme=function(e){delete Gr[e]},Dr.registerScheme=Pr,Dr.prototype.setForceHTTPS=Dr.prototype.Ne,Dr.NumBytesRemainingClass=Br,v(jr,Sr),Dr.PendingRequest=jr;var Fr=1;Dr.RequestType={MANIFEST:0,SEGMENT:Fr,LICENSE:2,APP:3,TIMING:4,SERVER_CERTIFICATE:5,KEY:6};var zr=3;Dr.PluginPriority={FALLBACK:1,PREFERRED:2,APPLICATION:zr};var Gr={};function Vr(e){this.g=!1,this.h=new Ct,this.i=e}function Kr(e,t){if(e.g){if(t instanceof be&&7003==t.code)throw t;throw new be(2,7,7003,t)}}function Hr(){this.g=new Z}function Wr(e,t,n,r){this.target=e,this.type=t,this.listener=n,this.g=function(e,t){if(null==t)return!1;if("boolean"==typeof t)return t;var n=new Set(["passive","capture"]);return Object.keys(t).filter((function(e){return!n.has(e)})),function(e){var t=Xr;if(null==t){t=!1;try{var n={},r={get:function(){return t=!0,!1}};Object.defineProperty(n,"passive",r),Object.defineProperty(n,"capture",r),r=function(){},e.addEventListener("test",r,n),e.removeEventListener("test",r,n)}catch(i){t=!1}Xr=t}return t||!1}(e)?t:t.capture||!1}(e,r),this.target.addEventListener(t,n,this.g)}Vr.prototype.destroy=function(){var e=this;return this.g?this.h:(this.g=!0,this.i().then((function(){e.h.resolve()}),(function(){e.h.resolve()})))},(i=Hr.prototype).release=function(){this.Rb(),this.g=null},i.o=function(e,t,n,r){this.g&&(e=new Wr(e,t,n,r),this.g.push(t,e))},i.Da=function(e,t,n,r){var i=this;this.o(e,t,(function r(a){i.qc(e,t,r),n(a)}),r)},i.qc=function(e,t,n){if(this.g)for(var r=this.g.get(t)||[],i=(r=c(r)).next();!i.done;i=r.next())(i=i.value).target!=e||n!=i.listener&&n||(i.qc(),this.g.remove(t,i))},i.Rb=function(){if(this.g){var e,t=this.g,n=[];for(e in t.g)n.push.apply(n,d(t.g[e]));for(n=(t=c(n)).next();!n.done;n=t.next())n.value.qc();this.g.g={}}},z("shaka.util.EventManager",Hr),Hr.prototype.removeAll=Hr.prototype.Rb,Hr.prototype.unlisten=Hr.prototype.qc,Hr.prototype.listenOnce=Hr.prototype.Da,Hr.prototype.listen=Hr.prototype.o,Hr.prototype.release=Hr.prototype.release,Wr.prototype.qc=function(){this.target.removeEventListener(this.type,this.listener,this.g),this.listener=this.target=null,this.g=!1};var Xr=void 0;function qr(e){for(var t=new Map,n=c(Object.keys(e)),r=n.next();!r.done;r=n.next())r=r.value,t.set(r,e[r]);return t}function Yr(e){var t={};return e.forEach((function(e,n){t[n]=e})),t}function $r(e,t){if(!e&&!t)return!0;if(e&&!t||t&&!e)return!1;if(e.size!=t.size)return!1;for(var n=(e=c(e)).next();!n.done;n=e.next()){var r=c(n.value);if(n=r.next().value,r=r.next().value,!t.has(n))return!1;if((n=t.get(n))!=r||null==n)return!1}return!0}function Qr(e,t){this.W=It(e),this.h=t==Zr,this.g=0}function Jr(){return new be(2,3,3e3)}(i=Qr.prototype).xa=function(){return this.g<this.W.byteLength},i.ma=function(){return this.g},i.Kg=function(){return this.W.byteLength},i.pb=function(){try{var e=this.W.getUint8(this.g);return this.g+=1,e}catch(t){throw Jr()}},i.De=function(){try{var e=this.W.getUint16(this.g,this.h);return this.g+=2,e}catch(t){throw Jr()}},i.N=function(){try{var e=this.W.getUint32(this.g,this.h);return this.g+=4,e}catch(t){throw Jr()}},i.Rf=function(){try{var e=this.W.getInt32(this.g,this.h);return this.g+=4,e}catch(t){throw Jr()}},i.Cb=function(){try{if(this.h)var e=this.W.getUint32(this.g,!0),t=this.W.getUint32(this.g+4,!0);else t=this.W.getUint32(this.g,!1),e=this.W.getUint32(this.g+4,!1)}catch(n){throw Jr()}if(2097151<t)throw new be(2,3,3001);return this.g+=8,t*Math.pow(2,32)+e},i.Bb=function(e){if(this.g+e>this.W.byteLength)throw Jr();var t=Et(this.W,this.g,e);return this.g+=e,t},i.skip=function(e){if(this.g+e>this.W.byteLength)throw Jr();this.g+=e},i.Eh=function(e){if(this.g<e)throw Jr();this.g-=e},i.seek=function(e){if(0>e||e>this.W.byteLength)throw Jr();this.g=e},i.Vc=function(){for(var e=this.g;this.xa()&&0!=this.W.getUint8(this.g);)this.g+=1;return e=Et(this.W,e,this.g-e),this.g+=1,Ht(e)},z("shaka.util.DataViewReader",Qr),Qr.prototype.readTerminatedString=Qr.prototype.Vc,Qr.prototype.seek=Qr.prototype.seek,Qr.prototype.rewind=Qr.prototype.Eh,Qr.prototype.skip=Qr.prototype.skip,Qr.prototype.readBytes=Qr.prototype.Bb,Qr.prototype.readUint64=Qr.prototype.Cb,Qr.prototype.readInt32=Qr.prototype.Rf,Qr.prototype.readUint32=Qr.prototype.N,Qr.prototype.readUint16=Qr.prototype.De,Qr.prototype.readUint8=Qr.prototype.pb,Qr.prototype.getLength=Qr.prototype.Kg,Qr.prototype.getPosition=Qr.prototype.ma,Qr.prototype.hasMoreData=Qr.prototype.xa;var Zr=1;function ei(){this.i=[],this.h=[],this.g=!1}function ti(e){for(var t=si(e);e.reader.xa()&&!e.parser.g;)e.parser.Tc(e.start+t,e.reader,e.partialOkay)}function ni(e){for(var t=si(e),n=e.reader.N(),r=0;r<n&&(e.parser.Tc(e.start+t,e.reader,e.partialOkay),!e.parser.g);r++);}function ri(e){var t=si(e);for(e.reader.skip(78);e.reader.xa()&&!e.parser.g;)e.parser.Tc(e.start+t,e.reader,e.partialOkay)}function ii(e){return function(t){e(t.reader.Bb(t.reader.W.byteLength-t.reader.ma()))}}function ai(e){for(var t=0,n=(e=c(e)).next();!n.done;n=e.next())t=t<<8|n.value.charCodeAt(0);return t}function oi(e){return String.fromCharCode(e>>24&255,e>>16&255,e>>8&255,255&e)}function si(e){return 8+(e.has64BitSize?8:0)+(null!=e.flags?4:0)}Qr.Endianness={BIG_ENDIAN:0,LITTLE_ENDIAN:Zr},(i=ei.prototype).box=function(e,t){return e=ai(e),this.i[e]=ui,this.h[e]=t,this},i.S=function(e,t){return e=ai(e),this.i[e]=li,this.h[e]=t,this},i.stop=function(){this.g=!0},i.parse=function(e,t,n){for(e=new Qr(e,0),this.g=!1;e.xa()&&!this.g;)this.Tc(0,e,t,n)},i.Tc=function(e,t,n,r){var i=t.ma();if(r&&i+8>t.W.byteLength)this.g=!0;else{var a=t.N(),o=t.N(),s=oi(o),u=!1;switch(a){case 0:a=t.W.byteLength-i;break;case 1:if(r&&t.ma()+8>t.W.byteLength)return void(this.g=!0);a=t.Cb(),u=!0}var l=this.h[o];if(l){var c=null,d=null;if(this.i[o]==li){if(r&&t.ma()+4>t.W.byteLength)return void(this.g=!0);c=(d=t.N())>>>24,d&=16777215}o=i+a,n&&o>t.W.byteLength&&(o=t.W.byteLength),r&&o>t.W.byteLength?this.g=!0:(r=o-t.ma(),l({name:s,parser:this,partialOkay:n||!1,version:c,flags:d,reader:t=new Qr(t=0<r?t.Bb(r):new Uint8Array(0),0),size:a,start:i+e,has64BitSize:u}))}else t.skip(Math.min(i+a-t.ma(),t.W.byteLength-t.ma()))}},z("shaka.util.Mp4Parser",ei),ei.headerSize=si,ei.typeToString=oi,ei.allData=ii,ei.visualSampleEntry=ri,ei.sampleDescription=ni,ei.children=ti,ei.prototype.parseNext=ei.prototype.Tc,ei.prototype.parse=ei.prototype.parse,ei.prototype.stop=ei.prototype.stop,ei.prototype.fullBox=ei.prototype.S,ei.prototype.box=ei.prototype.box;var ui=0,li=1;function ci(e){var t=this;this.g=[],this.h=[],this.data=[],(new ei).box("moov",ti).box("moof",ti).S("pssh",(function(e){if(!(1<e.version)){var n=Et(e.reader.W,-12,e.size);if(t.data.push(n),t.g.push(nn(e.reader.Bb(16))),0<e.version){n=e.reader.N();for(var r=0;r<n;r++){var i=nn(e.reader.Bb(16));t.h.push(i)}}}})).parse(e)}function di(e,t,n,r){var i=e.length,a=t.length+16+i;0<r&&(a+=4+16*n.size);var o=new Uint8Array(a),s=It(o),u=0;if(s.setUint32(u,a),u+=4,s.setUint32(u,1886614376),u+=4,1>r?s.setUint32(u,0):s.setUint32(u,16777216),u+=4,o.set(t,u),u+=t.length,0<r)for(s.setUint32(u,n.size),u+=4,n=(t=c(n)).next();!n.done;n=t.next())n=tn(n.value),o.set(n,u),u+=n.length;return s.setUint32(u,i),o.set(e,u+4),o}function hi(e,t){return 1!=(e=pi(e,t)).length?null:e[0]}function fi(e,t,n){return 1!=(e=gi(e,t,n)).length?null:e[0]}function pi(e,t){for(var n=[],r=(e=c(e.childNodes)).next();!r.done;r=e.next())(r=r.value)instanceof Element&&r.tagName==t&&n.push(r);return n}function gi(e,t,n){for(var r=[],i=(e=c(e.childNodes)).next();!i.done;i=e.next())(i=i.value)instanceof Element&&i.localName==n&&i.namespaceURI==t&&r.push(i);return r}function mi(e,t,n){return e.hasAttributeNS(t,n)?e.getAttributeNS(t,n):null}function vi(e,t,n){for(var r=(t=c(t)).next();!r.done;r=t.next())if(r=r.value,e.hasAttributeNS(r,n))return e.getAttributeNS(r,n);return null}function yi(e){return Array.from(e.childNodes).every(bi)?e.textContent.trim():null}function bi(e){return e.nodeType==Node.TEXT_NODE||e.nodeType==Node.CDATA_SECTION_NODE}function xi(e,t,n,r){r=void 0===r?null:r;var i=null;return null!=(e=e.getAttribute(t))&&(i=n(e)),null==i?r:i}function wi(e){return e?(/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(e)&&(e+="Z"),e=Date.parse(e),isNaN(e)?null:e/1e3):null}function Ti(e){return e&&(e=RegExp("^P(?:([0-9]*)Y)?(?:([0-9]*)M)?(?:([0-9]*)D)?(?:T(?:([0-9]*)H)?(?:([0-9]*)M)?(?:([0-9.]*)S)?)?$").exec(e))?(e=31536e3*Number(e[1]||null)+2592e3*Number(e[2]||null)+86400*Number(e[3]||null)+3600*Number(e[4]||null)+60*Number(e[5]||null)+Number(e[6]||null),isFinite(e)?e:null):null}function Ai(e){var t=/([0-9]+)-([0-9]+)/.exec(e);return t?(e=Number(t[1]),isFinite(e)?(t=Number(t[2]),isFinite(t)?{start:e,end:t}:null):null):null}function Si(e){return 0==(e=Number(e))%1?e:null}function Ei(e){return 0==(e=Number(e))%1&&0<e?e:null}function Ii(e){return 0==(e=Number(e))%1&&0<=e?e:null}function ki(e){return e=Number(e),isNaN(e)?null:e}function Ci(e){var t,n=(t=e.match(/^(\d+)\/(\d+)$/))?Number(t[1])/Number(t[2]):Number(e);return isNaN(n)?null:n}function _i(e,t){var n=new DOMParser,r=Ri.value()(e);e=null;try{e=n.parseFromString(r,"text/xml")}catch(i){return null}if(!(n=e.documentElement)||n.getElementsByTagName("parsererror").length||n.tagName!=t)return null;for(t=document.createNodeIterator(e,NodeFilter.SHOW_ALL);e=t.nextNode();)if(e instanceof HTMLElement||e instanceof SVGElement)return null;return n}function Mi(e,t){try{return _i(Ht(e),t)}catch(n){return null}}var Ri=new _t((function(){if("undefined"!=typeof trustedTypes){var e=trustedTypes.createPolicy("shaka-player#xml",{createHTML:function(e){return e}});return function(t){return e.createHTML(t)}}return function(e){return e}}));function Ni(e,t){var n=this;t=void 0===t?1:t,this.G=e,this.I=new Set,this.l=this.C=null,this.$=this.X=!1,this.J=0,this.g=null,this.B=new Hr,this.i=new Map,this.F=[],this.s=new Ct,this.h=null,this.m=function(t){n.s.reject(t),e.onError(t)},this.aa=new Map,this.Z=new Map,this.P=new Rt((function(){return function(e){var t=e.aa,n=e.Z;n.clear(),t.forEach((function(e,t){return n.set(t,e)})),t=Array.from(n.values()),t.length&&t.every((function(e){return"expired"==e}))&&e.m(new be(2,6,6014)),e.G.Fd(Yr(n))}(n)})),this.M=!1,this.K=[],this.O=!1,this.ra=new Rt((function(){!function(e){e.i.forEach((function(t,n){var r=t.Be,i=n.expiration;isNaN(i)&&(i=1/0),i!=r&&(e.G.onExpirationUpdated(n.sessionId,i),t.Be=i)}))}(n)})).ea(t),this.s.catch((function(){})),this.j=new Vr((function(){return function(e){return L((function(t){switch(t.g){case 1:return e.B.release(),e.B=null,e.s.reject(),e.ra.stop(),e.ra=null,e.P.stop(),e.P=null,w(t,Hi(e),2);case 2:if(!e.l){t.D(3);break}return A(t,4),w(t,e.l.setMediaKeys(null),6);case 6:E(t,5);break;case 4:I(t);case 5:e.l=null;case 3:e.g=null,e.I.clear(),e.C=null,e.F=[],e.h=null,e.m=function(){},e.G=null,e.V=!1,e.H=null,T(t)}}))}(n)})),this.V=!1,this.H=null}function Li(e,t,n){return e.F=n,e.M=0<n.length,Di(e,t)}function Di(t,n){var r,i,a,o,s,u,l,d,h,f,p,g;return L((function(m){if(1==m.g){if(r=function(t){if(t=qr(t.h.clearKeys),0==t.size)return null;var n=[],r=[];t.forEach((function(e,t){var i=t;22!=i.length&&(i=Zt(tn(t),!1)),22!=(t=e).length&&(t=Zt(tn(e),!1)),e={kty:"oct",kid:i,k:t},n.push(e),r.push(e.kid)})),t=JSON.stringify({keys:n});var i=JSON.stringify({kids:r});return i=[{initData:Et(qt(i)),initDataType:"keyids"}],{keySystem:"org.w3.clearkey",licenseServerUri:"data:application/json;base64,"+e.btoa(t),distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,serverCertificateUri:"",sessionType:"",initData:i,keyIds:new Set(r)}}(t))for(i=c(n),a=i.next();!a.done;a=i.next())(o=a.value).video&&(o.video.drmInfos=[r]),o.audio&&(o.audio.drmInfos=[r]);for((s=n.some((function(e){return!!(e.video&&e.video.drmInfos.length||e.audio&&e.audio.drmInfos.length)})))||(u=qr(t.h.servers),function(e,t){var n=[];for(t.forEach((function(e,t){n.push({keySystem:t,licenseServerUri:e,distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,serverCertificateUri:"",initData:[],keyIds:new Set})})),e=c(e),t=e.next();!t.done;t=e.next())(t=t.value).video&&(t.video.drmInfos=n),t.audio&&(t.audio.drmInfos=n)}(n,u)),l=c(n),a=l.next();!a.done;a=l.next())for(d=a.value,h=Xi(d),f=c(h),p=f.next();!p.done;p=f.next())$i(p.value,qr(t.h.servers),qr(t.h.advanced||{}),t.h.keySystemsMapping);return w(m,Nn(n,t.M,t.V),2)}return s||Object.keys(t.h.servers).length?(g=zi(t,void 0,n),m.return(s?g:g.catch((function(){})))):(t.X=!0,m.return(Promise.resolve()))}))}function Pi(e){var t;return L((function(n){switch(n.g){case 1:if(e.l.mediaKeys)return n.return();if(!e.H){n.D(2);break}return w(n,e.H,3);case 3:return Kr(e.j),n.return();case 2:return A(n,4),e.H=e.l.setMediaKeys(e.C),w(n,e.H,6);case 6:E(n,5);break;case 4:t=I(n),e.m(new be(2,6,6003,t.message));case 5:Kr(e.j),T(n)}}))}function Oi(e){var t,n;return L((function(r){switch(r.g){case 1:if(!e.C||!e.g)return r.return();if(!e.g.serverCertificateUri||e.g.serverCertificate&&e.g.serverCertificate.length){r.D(2);break}return t=Or([e.g.serverCertificateUri],e.h.retryParameters),A(r,3),w(r,e.G.Ob.request(5,t).promise,5);case 5:n=r.h,e.g.serverCertificate=Et(n.data),E(r,4);break;case 3:throw new be(2,6,6017,I(r));case 4:if(e.j.g)return r.return();case 2:return e.g.serverCertificate&&e.g.serverCertificate.length?(A(r,6),w(r,e.C.setServerCertificate(e.g.serverCertificate),8)):r.return();case 8:E(r,0);break;case 6:throw new be(2,6,6004,I(r).message)}}))}function Ui(e){for(var t=(e.g?e.g.initData:[])||[],n=c(t),r=n.next();!r.done;r=n.next())Bi(e,(r=r.value).initDataType,r.initData);for(r=(n=c(e.F)).next();!r.done;r=n.next())Gi(e,r.value);return t.length||e.F.length||e.s.resolve(),e.s}function Bi(e,t,n){if(n.length){for(var r=e.i.values(),i=(r=c(r)).next();!i.done;i=r.next())if(Tt(n,i.value.initData)&&!Ft("Tizen 2"))return;0<e.i.size&&qi(e)&&(e.s.resolve(),e.s=new Ct,e.s.catch((function(){}))),function(e,t,n,r){try{var i=e.C.createSession(r)}catch(a){return void e.m(new be(2,6,6005,a.message))}e.B.o(i,"message",(function(t){e.l&&e.h.delayLicenseRequestUntilPlayed&&e.l.paused&&!e.O?e.K.push(t):Vi(e,t)})),e.B.o(i,"keystatuseschange",(function(t){return Ki(e,t)})),e.i.set(i,{initData:n,initDataType:t,loaded:!1,Be:1/0,cb:null,type:r});try{n=e.h.initDataTransform(n,t,e.g)}catch(a){return t=a,a instanceof be||(t=new be(2,6,6016,a)),void e.m(t)}e.h.logLicenseExchange&&Zt(n),i.generateRequest(t,n).catch((function(t){if(!e.j.g){e.i.delete(i);var n=t.errorCode;if(n&&n.systemCode){var r=n.systemCode;0>r&&(r+=Math.pow(2,32)),r="0x"+r.toString(16)}e.m(new be(2,6,6006,t.message,t,r))}}))}(e,t,n,e.g.sessionType)}}function ji(e){return!!e&&!!e.match(/^com\.(microsoft|chromecast)\.playready/)}function Fi(e){return e=te(e=e.i.keys(),(function(e){return e.sessionId})),Array.from(e)}function zi(e,t,n){var r,i,a,o,s,u,l,d,h,f,p,g,m;return L((function(v){switch(v.g){case 1:if(r=new Map,n.length){i=function(e,t,n){for(var r=c(t),i=r.next();!i.done;i=r.next()){var a=c(Xi(i.value));for(i=a.next();!i.done;i=a.next())i=i.value,n.has(i.keySystem)||n.set(i.keySystem,[]),n.get(i.keySystem).push(i)}if(1==n.size&&n.has(""))throw new be(2,6,6e3);for(r={},e=c(e.h.preferredKeySystems),i=e.next();!i.done;r={Xd:r.Xd},i=e.next())for(r.Xd=i.value,a=c(t),i=a.next();!i.done;i=a.next())if(i=i.value.decodingInfos.find(function(e){return function(t){return t.supported&&null!=t.keySystemAccess&&t.keySystemAccess.keySystem==e.Xd}}(r)))return i.keySystemAccess;for(e=c([!0,!1]),i=e.next();!i.done;i=e.next())for(r=i.value,a=c(t),i=a.next();!i.done;i=a.next()){var o=c(i.value.decodingInfos);for(i=o.next();!i.done;i=o.next()){var s=i.value;if(s.supported&&s.keySystemAccess){var u=c(i=n.get(s.keySystemAccess.keySystem));for(i=u.next();!i.done;i=u.next())if(!!i.value.licenseServerUri==r)return s.keySystemAccess}}}return null}(e,n,r),v.D(2);break}return w(v,function(e,t){var n,r,i,a,o,s,u,l,d,h,f,p,g,m,v;return L((function(y){switch(y.g){case 1:if(1==t.size&&t.has(""))throw new be(2,6,6e3);for(r=c(t.values()),i=r.next();!i.done;i=r.next())0==(a=i.value).audioCapabilities.length&&delete a.audioCapabilities,0==a.videoCapabilities.length&&delete a.videoCapabilities;o=c(e.h.preferredKeySystems),s=o.next();case 2:if(s.done){y.D(4);break}if(u=s.value,!t.has(u)){y.D(3);break}return l=t.get(u),A(y,6),w(y,navigator.requestMediaKeySystemAccess(u,[l]),8);case 8:return n=y.h,y.return(n);case 6:I(y);case 7:Kr(e.j);case 3:s=o.next(),y.D(2);break;case 4:d=c([!0,!1]),h=d.next();case 9:if(h.done){y.D(11);break}f=h.value,p=c(t.keys()),s=p.next();case 12:if(s.done){h=d.next(),y.D(9);break}if(g=s.value,m=t.get(g),v=m.drmInfos.some((function(e){return!!e.licenseServerUri})),v!=f){y.D(13);break}return A(y,15),w(y,navigator.requestMediaKeySystemAccess(g,[m]),17);case 17:return n=y.h,y.return(n);case 15:I(y);case 16:Kr(e.j);case 13:s=p.next(),y.D(12);break;case 11:return y.return(n)}}))}(e,t),3);case 3:i=v.h;case 2:if(!(a=i))throw new be(2,6,6001);for(Kr(e.j),A(v,4),e.I.clear(),o=a.getConfiguration(),s=o.audioCapabilities||[],u=o.videoCapabilities||[],l=c(s),d=l.next();!d.done;d=l.next())h=d.value,e.I.add(h.contentType.toLowerCase());for(f=c(u),d=f.next();!d.done;d=f.next())p=d.value,e.I.add(p.contentType.toLowerCase());if(n.length){var y=a.keySystem,b=r.get(a.keySystem),x=[],T=[],S=[],k=[],C=new Set;Yi(b,x,S,T,k,C);var _=e.M?"persistent-license":"temporary";for(y={keySystem:y,licenseServerUri:x[0],distinctiveIdentifierRequired:b[0].distinctiveIdentifierRequired,persistentStateRequired:b[0].persistentStateRequired,sessionType:b[0].sessionType||_,audioRobustness:b[0].audioRobustness||"",videoRobustness:b[0].videoRobustness||"",serverCertificate:S[0],serverCertificateUri:T[0],initData:k,keyIds:C},x=(b=c(b)).next();!x.done;x=b.next())(x=x.value).distinctiveIdentifierRequired&&(y.distinctiveIdentifierRequired=x.distinctiveIdentifierRequired),x.persistentStateRequired&&(y.persistentStateRequired=x.persistentStateRequired);b=y}else b=a.keySystem,y=t.get(a.keySystem),x=[],T=[],S=[],k=[],C=new Set,Yi(y.drmInfos,x,S,T,k,C),b={keySystem:b,licenseServerUri:x[0],distinctiveIdentifierRequired:"required"==y.distinctiveIdentifier,persistentStateRequired:"required"==y.persistentState,sessionType:y.sessionTypes[0]||"temporary",audioRobustness:(y.audioCapabilities?y.audioCapabilities[0].robustness:"")||"",videoRobustness:(y.videoCapabilities?y.videoCapabilities[0].robustness:"")||"",serverCertificate:S[0],serverCertificateUri:T[0],initData:k,keyIds:C};if(e.g=b,!e.g.licenseServerUri)throw new be(2,6,6012,e.g.keySystem);return w(v,a.createMediaKeys(),6);case 6:return g=v.h,Kr(e.j),e.C=g,e.X=!0,w(v,Oi(e),7);case 7:Kr(e.j),E(v,0);break;case 4:if(m=I(v),Kr(e.j,m),e.g=null,e.I.clear(),m instanceof be)throw m;throw new be(2,6,6002,m.message)}}))}function Gi(e,t){var n,i,a,o,s;return L((function(u){switch(u.g){case 1:try{n=e.C.createSession("persistent-license")}catch(r){return i=new be(2,6,6005,r.message),e.m(i),u.return(Promise.reject(i))}return e.B.o(n,"message",(function(t){e.l&&e.h.delayLicenseRequestUntilPlayed&&e.l.paused&&!e.O?e.K.push(t):Vi(e,t)})),e.B.o(n,"keystatuseschange",(function(t){return Ki(e,t)})),a={initData:null,initDataType:null,loaded:!1,Be:1/0,cb:null,type:"persistent-license"},e.i.set(n,a),A(u,2),w(u,n.load(t),4);case 4:return o=u.h,Kr(e.j),o?(a.loaded=!0,qi(e)&&e.s.resolve(),u.return(n)):(e.i.delete(n),e.m(new be(2,6,6013)),u.return(Promise.resolve()));case 2:s=I(u),Kr(e.j,s),e.i.delete(n),e.m(new be(2,6,6005,s.message));case 3:return u.return(Promise.resolve())}}))}function Vi(e,t){var n,r,i,a,o,s,u,l,d,h,f,p;L((function(g){switch(g.g){case 1:return n=t.target,e.h.logLicenseExchange&&Zt(t.message),r=e.i.get(n),i=e.g.licenseServerUri,a=e.h.advanced[e.g.keySystem],"individualization-request"==t.messageType&&a&&a.individualizationServer&&(i=a.individualizationServer),(o=Or([i],e.h.retryParameters)).body=t.message,o.method="POST",o.licenseRequestType=t.messageType,o.sessionId=n.sessionId,o.drmInfo=e.g,r&&(o.initData=r.initData,o.initDataType=r.initDataType),ji(e.g.keySystem)&&function(e){var t=Wt(e.body,!0,!0);if(t.includes("PlayReadyKeyMessage")){for(var n=c((t=_i(t,"PlayReadyKeyMessage")).getElementsByTagName("HttpHeader")),r=n.next();!r.done;r=n.next())r=r.value,e.headers[r.getElementsByTagName("name")[0].textContent]=r.getElementsByTagName("value")[0].textContent;e.body=en(t.getElementsByTagName("Challenge")[0].textContent)}else e.headers["Content-Type"]="text/xml; charset=utf-8"}(o),s=Date.now(),A(g,2),w(g,e.G.Ob.request(2,o).promise,4);case 4:u=g.h,E(g,3);break;case 2:return l=I(g),d=new be(2,6,6007,l),e.m(d),r&&r.cb&&r.cb.reject(d),g.return();case 3:return e.j.g?g.return():(e.J+=(Date.now()-s)/1e3,e.h.logLicenseExchange&&Zt(u.data),A(g,5),w(g,n.update(u.data),7));case 7:E(g,6);break;case 5:return h=I(g),f=new be(2,6,6008,h.message),e.m(f),r&&r.cb&&r.cb.reject(f),g.return();case 6:if(e.j.g)return g.return();p=new G("drmsessionupdate"),e.G.onEvent(p),r&&(r.cb&&r.cb.resolve(),new Rt((function(){r.loaded=!0,qi(e)&&e.s.resolve()})).R(Ji)),T(g)}}))}function Ki(e,t){t=t.target;var n=e.i.get(t),r=!1;t.keyStatuses.forEach((function(t,i){if("string"==typeof i){var a=i;i=t,t=a}if(ji(e.g.keySystem)&&16==i.byteLength&&(navigator.userAgent.match(/Edge?\//)||Bt())){var o=(a=It(i)).getUint32(0,!0),s=a.getUint16(4,!0),u=a.getUint16(6,!0);a.setUint32(0,o,!1),a.setUint16(4,s,!1),a.setUint16(6,u,!1)}"status-pending"!=t&&(n.loaded=!0),"expired"==t&&(r=!0),i=nn(i).slice(0,32),e.aa.set(i,t)}));var i=t.expiration-Date.now();(0>i||r&&1e3>i)&&n&&!n.cb&&(e.i.delete(t),t.close().catch((function(){}))),qi(e)&&(e.s.resolve(),e.P.R(Zi))}function Hi(e){var t;return L((function(n){return t=Array.from(e.i.entries()),e.i.clear(),w(n,Promise.all(t.map((function(t){var n=(t=c(t)).next().value,r=t.next().value;return L((function(t){return 1==t.g?(A(t,2),e.$||e.F.includes(n.sessionId)||"persistent-license"!==r.type?w(t,function(e){var t;return L((function(n){return 1==n.g?(t=new Promise((function(e,t){new Rt(t).R(Qi)})),A(n,2),w(n,Promise.race([Promise.all([e.close(),e.closed]),t]),4)):2!=n.g?E(n,0):(I(n),void T(n))}))}(n),5):w(t,n.remove(),5)):2!=t.g?E(t,0):(I(t),void T(t))}))}))),0)}))}function Wi(e,t){if(!e.length)return t;if(!t.length)return e;for(var n=[],r=(e=c(e)).next();!r.done;r=e.next()){r=r.value;for(var i={},a=c(t),o=a.next();!o.done;i={Ua:i.Ua},o=a.next())if(o=o.value,r.keySystem==o.keySystem){i.Ua=[],i.Ua=i.Ua.concat(r.initData||[]),i.Ua=i.Ua.concat(o.initData||[]),i.Ua=i.Ua.filter(function(e){return function(t,n){return void 0===t.keyId||n===e.Ua.findIndex((function(e){return e.keyId===t.keyId}))}}(i)),a=r.keyIds&&o.keyIds?new Set([].concat(d(r.keyIds),d(o.keyIds))):r.keyIds||o.keyIds,n.push({keySystem:r.keySystem,licenseServerUri:r.licenseServerUri||o.licenseServerUri,distinctiveIdentifierRequired:r.distinctiveIdentifierRequired||o.distinctiveIdentifierRequired,persistentStateRequired:r.persistentStateRequired||o.persistentStateRequired,videoRobustness:r.videoRobustness||o.videoRobustness,audioRobustness:r.audioRobustness||o.audioRobustness,serverCertificate:r.serverCertificate||o.serverCertificate,serverCertificateUri:r.serverCertificateUri||o.serverCertificateUri,initData:i.Ua,keyIds:a});break}}return n}function Xi(e){return(e.video?e.video.drmInfos:[]).concat(e.audio?e.audio.drmInfos:[])}function qi(e){return function(e,t){for(var n=(e=c(e)).next();!n.done;n=e.next())if(!t(n.value))return!1;return!0}(e=e.i.values(),(function(e){return e.loaded}))}function Yi(e,t,n,r,i,a){for(var o={},s=(e=c(e)).next();!s.done;o={Fa:o.Fa},s=e.next()){if(o.Fa=s.value,t.includes(o.Fa.licenseServerUri)||t.push(o.Fa.licenseServerUri),r.includes(o.Fa.serverCertificateUri)||r.push(o.Fa.serverCertificateUri),o.Fa.serverCertificate&&(n.some(function(e){return function(t){return Tt(t,e.Fa.serverCertificate)}}(o))||n.push(o.Fa.serverCertificate)),o.Fa.initData){s={};for(var u=c(o.Fa.initData),l=u.next();!l.done;s={ed:s.ed},l=u.next())s.ed=l.value,i.some(function(e){return function(t){var n=e.ed;return!(!t.keyId||t.keyId!=n.keyId)||t.initDataType==n.initDataType&&Tt(t.initData,n.initData)}}(s))||i.push(s.ed)}if(o.Fa.keyIds)for(u=(s=c(o.Fa.keyIds)).next();!u.done;u=s.next())a.add(u.value)}}function $i(t,n,r,i){var a=t.keySystem;!a||"org.w3.clearkey"==a&&t.licenseServerUri||(n.size&&(n=n.get(a)||"",t.licenseServerUri=n),t.keyIds||(t.keyIds=new Set),(r=r.get(a))&&(t.distinctiveIdentifierRequired||(t.distinctiveIdentifierRequired=r.distinctiveIdentifierRequired),t.persistentStateRequired||(t.persistentStateRequired=r.persistentStateRequired),t.videoRobustness||(t.videoRobustness=r.videoRobustness),t.audioRobustness||(t.audioRobustness=r.audioRobustness),t.serverCertificate||(t.serverCertificate=r.serverCertificate),r.sessionType&&(t.sessionType=r.sessionType),t.serverCertificateUri||(t.serverCertificateUri=r.serverCertificateUri)),i[a]&&(t.keySystem=i[a]),e.cast&&e.cast.__platform__&&"com.microsoft.playready"==a&&(t.keySystem="com.chromecast.playready"))}(i=Ni.prototype).destroy=function(){return this.j.destroy()},i.configure=function(e){this.h=e},i.Bc=function(e){var t,n=this;return L((function(r){if(1==r.g)return n.C?(n.l=e,n.B.Da(n.l,"play",(function(){for(var e=c(n.K),t=e.next();!t.done;t=e.next())Vi(n,t.value);n.O=!0,n.K=[]})),"webkitCurrentPlaybackTargetIsWireless"in n.l&&n.B.o(n.l,"webkitcurrentplaybacktargetiswirelesschanged",(function(){return Hi(n)})),(t=n.g.initData.find((function(e){return 0<e.initData.length})))||"com.apple.fps"!==n.g.keySystem||n.F.length?w(r,Pi(n),2):r.D(2)):(n.B.Da(e,"encrypted",(function(){n.m(new be(2,6,6010))})),r.return());Ui(n),t||n.F.length||n.h.parseInbandPsshEnabled||n.B.o(n.l,"encrypted",(function(e){return function(e,t){return L((function(n){if(1==n.g)return w(n,Pi(e),2);Bi(e,t.initDataType,Et(t.initData)),T(n)}))}(n,e)})),T(r)}))},i.Gc=function(){for(var e=1/0,t=this.i.keys(),n=(t=c(t)).next();!n.done;n=t.next())n=n.value,isNaN(n.expiration)||(e=Math.min(e,n.expiration));return e},i.ud=function(){return Yr(this.Z)};var Qi=1,Ji=5,Zi=.5,ea=new _t((function(){return St(new Uint8Array([0]))}));function ta(){}function na(e,t,n,r){var i,a,o,s;return L((function(u){if(1==u.g)return r&&(i=aa[r.toLowerCase()])?u.return(i):(a=ia(e))&&(o=oa[a])?u.return(o):r?u.D(2):w(u,ra(e,t,n),3);if(2!=u.g&&(r=u.h)&&(s=aa[r]))return u.return(s);throw new be(2,4,4e3,e)}))}function ra(e,t,n){var r,i,a;return L((function(o){return 1==o.g?((r=Or([e],n)).method="HEAD",w(o,t.request(0,r).promise,2)):(i=o.h,a=i.headers["content-type"],o.return(a?a.toLowerCase().split(";").shift():""))}))}function ia(e){return 1==(e=new ae(e).Ha.split("/").pop().split(".")).length?"":e.pop().toLowerCase()}z("shaka.media.ManifestParser",ta),ta.unregisterParserByMime=function(e){delete aa[e]},ta.registerParserByMime=function(e,t){aa[e]=t},ta.registerParserByExtension=function(e,t){oa[e]=t};var aa={},oa={};function sa(e,t,n,r,i){var a=la.value(),o=e.subarray(n.start,n.start+n.size),s=It(o),u=new Uint8Array(n.size+a.byteLength);for(u.set(o,0),(o=It(u)).setUint32(4,i),u.set(a,n.size),i=s.getUint32(4),o.setUint32(n.size+16,i),ua(u,0,u.byteLength),i=new Uint8Array(e.byteLength+u.byteLength),n=Dt()?n.start:n.start+n.size,a=e.subarray(n),i.set(e.subarray(0,n)),i.set(u,n),i.set(a,n+u.byteLength),r=(e=c(r)).next();!r.done;r=e.next())ua(i,(r=r.value).start,r.size+u.byteLength);return u=It(i,t.start),t=si(t),e=u.getUint32(t),u.setUint32(t,e+1),i}function ua(e,t,n){0!=(t=(e=It(e,t)).getUint32(0))&&(1==t?(e.setUint32(8,n>>32),e.setUint32(12,4294967295&n)):e.setUint32(0,n))}var la=new _t((function(){return new Uint8Array([0,0,0,80,115,105,110,102,0,0,0,12,102,114,109,97,0,0,0,0,0,0,0,20,115,99,104,109,0,0,0,0,99,101,110,99,0,1,0,0,0,0,0,40,115,99,104,105,0,0,0,32,116,101,110,99,0,0,0,0,0,0,1,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0])}));function ca(e,t,n,r,i){if(r>=i)return null;for(var a=-1,o=-1,s=0;s<n.length;s++)if(n[s].some((function(e){return null!=e&&""!=e.g.trim()}))){a=s;break}for(s=n.length-1;0<=s;s--)if(n[s].some((function(e){return null!=e&&""!=e.g.trim()}))){o=s;break}if(-1===a||-1===o)return null;for(var u=s=!1,l="white",c="black",d=da(r,i,s,u,l,c);a<=o;a++){for(var h=n[a],f=-1,p=-1,g=0;g<h.length;g++)if(null!=h[g]&&""!==h[g].g.trim()){f=g;break}for(g=h.length-1;0<=g;g--)if(null!=h[g]&&""!==h[g].g.trim()){p=g;break}if(-1===f||-1===p)h=ha(r,i),e.nestedCues.push(h);else{for(;f<=p;f++)if(g=h[f]){var m=g.l,v=g.i,y=g.j,b=g.h;m==s&&v==u&&y==l&&b==c||(d.payload&&e.nestedCues.push(d),d=da(r,i,m,v,y,b),s=m,u=v,l=y,c=b),d.payload+=g.g}else d.payload+=" ";d.payload&&e.nestedCues.push(d),a!==o&&(d=ha(r,i),e.nestedCues.push(d)),d=da(r,i,s,u,l,c)}}return e.nestedCues.length?{cue:e,stream:t}:null}function da(e,t,n,r,i,a){return e=new tt(e,t,""),n&&e.textDecoration.push("underline"),r&&(e.fontStyle="italic"),e.color=i,e.backgroundColor=a,e}function ha(e,t){return(e=new tt(e,t,"")).lineBreak=!0,e}function fa(e,t,n,r,i){this.g=e,this.l=t,this.i=n,this.h=r,this.j=i}function pa(e,t){this.i=[],this.g=1,this.h=0,this.C=e,this.B=t,this.j=this.m=!1,this.l="white",this.s="black",ma(this)}function ga(e,t,n){return ca(new tt(t,n,""),"CC"+(e.C<<1|e.B+1),e.i,t,n)}function ma(e){ba(e,0,15),e.g=1}function va(e,t,n){if(!(32>n||127<n)){var r="";switch(t){case xa:r=Sa.has(n)?Sa.get(n):String.fromCharCode(n);break;case wa:r=Ea.get(n);break;case Ta:e.i[e.g].pop(),r=Ia.get(n);break;case Aa:e.i[e.g].pop(),r=ka.get(n)}r&&e.i[e.g].push(new fa(r,e.m,e.j,e.s,e.l))}}function ya(e,t,n,r){if(!(0>n||0>t))if(t>=n)for(--r;0<=r;r--)e.i[t+r]=e.i[n+r].map((function(e){return e}));else for(var i=0;i<r;i++)e.i[t+i]=e.i[n+i].map((function(e){return e}))}function ba(e,t,n){for(var r=0;r<=n;r++)e.i[t+r]=[]}var xa=0,wa=1,Ta=2,Aa=3,Sa=new Map([[39,""],[42,""],[92,""],[92,""],[94,""],[95,""],[96,""],[123,""],[124,""],[125,""],[126,""],[127,""]]),Ea=new Map([[48,""],[49,""],[50,""],[51,""],[52,""],[53,""],[54,""],[55,""],[56,""],[57,""],[58,""],[59,""],[60,""],[61,""],[62,""],[63,""]]),Ia=new Map([[32,""],[33,""],[34,""],[35,""],[36,""],[37,""],[38,""],[39,""],[40,"*"],[41,"'"],[42,""],[43,""],[44,""],[45,""],[46,""],[47,""],[48,""],[49,""],[50,""],[51,""],[52,""],[53,""],[54,""],[55,""],[56,""],[57,""],[58,""],[59,""],[60,""],[61,""],[62,""],[63,""]]),ka=new Map([[32,""],[33,""],[34,""],[35,""],[36,""],[37,""],[38,""],[39,""],[40,""],[41,"{"],[42,"}"],[43,"\\"],[44,"^"],[45,"_"],[46,"|"],[47,"~"],[48,""],[49,""],[50,""],[51,""],[52,""],[53,""],[54,""],[55,""],[56,""],[57,""],[58,""],[59,""],[60,""],[61,""],[62,""],[63,""]]);function Ca(e,t){this.h=Na,this.s=new pa(e,t),this.i=new pa(e,t),this.l=new pa(e,t),this.g=this.i,this.j=0,this.m=null}function _a(e,t,n){e.g=e.i;var r=e.g,i=null;return e.h!==Da&&e.h!==Pa&&(i=ga(r,e.j,n),(n=e.i).g=0<n.h?n.h:0,ba(n,0,15),(n=e.l).g=0<n.h?n.h:0,ba(n,0,15),r.g=15),e.h=Da,r.h=t,i}function Ma(e){e.h=La,e.g=e.l,e.g.h=0}function Ra(e){q("Cea608DataChannel","CEA-608 text mode entered, but is unsupported"),e.g=e.s,e.h=Pa}var Na=0,La=1,Da=3,Pa=4,Oa="black green blue cyan red yellow magenta black".split(" "),Ua="white green blue cyan red yellow magenta white_italics".split(" ");function Ba(){this.l=!1,this.F=this.H=0,this.G=Wa,this.i=[],this.g=this.h=this.j=0,this.C=this.s=!1,this.B="white",this.m="black",ja(this)}function ja(e){e.i=[];for(var t=0;16>t;t++)e.i.push(Fa())}function Fa(){for(var e=[],t=0;42>t;t++)e.push(null);return e}function za(e,t){Ga(e)&&(e.i[e.h][e.g]=new fa(t,e.C,e.s,e.m,e.B),e.g++)}function Ga(e){var t=e.g<e.F&&0<=e.g;return e.h<e.H&&0<=e.h&&t}function Va(e,t,n){var r=new tt(e.j,t,"");return r.textAlign=e.G===Ka?"left":e.G===Ha?"right":it,(n=ca(r,"svc"+n,e.i,e.j,t))&&(e.j=t),n}Ba.prototype.isVisible=function(){return this.l};var Ka=0,Ha=1,Wa=2;function Xa(){this.i=[],this.h=null,this.g=0}function qa(e,t){3===t.type?(e.g=2*(63&t.value)-1,e.h=[]):e.h&&(0<e.g&&(e.h.push(t),e.g--),0===e.g&&(e.i.push(new Ya(e.h)),e.h=null,e.g=0))}function Ya(e){this.g=0,this.h=e}function $a(e){if(!e.xa())throw new be(2,2,3e3);return e.h[e.g++]}function Qa(e){this.i=e,this.h=[null,null,null,null,null,null,null,null],this.g=null}function Ja(e,t,n,r){if(128<=n&&135>=n)r=7&n,e.h[r]&&(e.g=e.h[r]);else{if(136===n){n=$a(t).value,t=null;for(var i=(n=c(Za(e,n))).next();!i.done;i=n.next())(i=e.h[i.value]).isVisible()&&(t=Va(i,r,e.i)),ja(i);return t}if(137===n)for(n=(t=c(Za(e,t=$a(t).value))).next();!n.done;n=t.next())(n=e.h[n.value]).isVisible()||(n.j=r),n.l=!0;else{if(138===n){for(n=$a(t).value,t=null,i=(n=c(Za(e,n))).next();!i.done;i=n.next())(i=e.h[i.value]).isVisible()&&(t=Va(i,r,e.i)),i.l=!1;return t}if(139===n){for(n=$a(t).value,t=null,i=(n=c(Za(e,n))).next();!i.done;i=n.next())(i=e.h[i.value]).isVisible()?t=Va(i,r,e.i):i.j=r,i.l=!i.l;return t}if(140===n)return eo(e,t=$a(t).value,r);if(143===n)return r=eo(e,255,r),to(e),r;if(144===n)t.skip(1),r=$a(t).value,e.g&&(e.g.s=0<(128&r),e.g.C=0<(64&r));else if(145===n)r=$a(t).value,n=$a(t).value,t.skip(1),e.g&&(t=no((48&n)>>4,(12&n)>>2,3&n),e.g.B=no((48&r)>>4,(12&r)>>2,3&r),e.g.m=t);else if(146===n)r=$a(t).value,t=$a(t).value,e.g&&((e=e.g).h=15&r,e.g=63&t);else if(151===n)t.skip(1),t.skip(1),r=$a(t).value,t.skip(1),e.g&&(e.g.G=3&r);else if(152<=n&&159>=n){if(n=(15&n)-8,!(i=null!==e.h[n])){var a=new Ba;a.j=r,e.h[n]=a}r=$a(t).value,$a(t),$a(t),a=$a(t).value;var o=$a(t).value;t=$a(t).value,i&&!(7&t)||((t=e.h[n]).h=0,t.g=0,t.C=!1,t.s=!1,t.B="white",t.m="black"),(t=e.h[n]).l=0<(32&r),t.H=1+(15&a),t.F=1+(63&o),e.g=e.h[n]}}}return null}function Za(e,t){for(var n=[],r=0;8>r;r++)!(1&~t)&&e.h[r]&&n.push(r),t>>=1;return n}function eo(e,t,n){for(var r=null,i=(t=c(Za(e,t))).next();!i.done;i=t.next()){i=i.value;var a=e.h[i];a.isVisible()&&(r=Va(a,n,e.i)),e.h[i]=null}return r}function to(e){e.g=null,e.h=[null,null,null,null,null,null,null,null]}function no(e,t,n){var r={0:0,1:0,2:1,3:1};return io[(e=r[e])<<2|(t=r[t])<<1|(n=r[n])]}Ya.prototype.xa=function(){return this.g<this.h.length},Ya.prototype.ma=function(){return this.g},Ya.prototype.skip=function(e){if(this.g+e>this.h.length)throw new be(2,2,3e3);this.g+=e};var ro=new Map([[32," "],[33,""],[37,""],[42,""],[44,""],[48,""],[49,""],[50,""],[51,""],[52,""],[53,""],[57,""],[58,""],[60,""],[61,""],[63,""],[118,""],[119,""],[120,""],[121,""],[122,""],[123,""],[124,""],[125,""],[126,""],[127,""]]),io="black blue green cyan red magenta yellow white".split(" ");function ao(){this.h=[],this.g=[],this.i=new Xa,this.l=0,this.B=new Map([["CC1",new Ca(0,0)],["CC2",new Ca(0,1)],["CC3",new Ca(1,0)],["CC4",new Ca(1,1)]]),this.s=this.m=0,this.j=new Map,oo(this)}function oo(e){e.m=0,e.s=0;for(var t=(e=c(e.B.values())).next();!t.done;t=e.next())(t=t.value).h=2,t.g=t.i,t.m=null,ma(t.i),ma(t.l),ma(t.s)}function so(e,t){var n=t.type;if(16==(112&t.Oa)){var r=t.Oa>>3&1;0===n?e.m=r:e.s=r}if(n=e.B.get("CC"+(n<<1|(n?e.s:e.m)+1)),255===t.Oa&&255===t.hb||!t.Oa&&!t.hb||!lo(t.Oa)||!lo(t.hb))return 45<=++e.l&&oo(e),null;if(e.l=0,t.Oa&=127,t.hb&=127,!t.Oa&&!t.hb)return null;if(e=null,16==(112&t.Oa))e:{if(r=t.Oa,e=t.hb,n.m===(r<<8|e))n.m=null;else if(n.m=r<<8|e,16==(240&r)&&64==(192&e)){t=[11,11,1,2,3,4,12,13,14,15,5,6,7,8,9,10][(7&r)<<1|e>>5&1];var i=(30&e)>>1;r="white";var a=!1;if(7>i?r=Ua[i]:7===i&&(a=!0),e=!(1&~e),n.h!==Pa){if(i=n.g,n.h===Da&&t!==i.g){var o=1+t-i.h;ya(i,o,1+i.g-i.h,i.h),ba(i,0,o-1),ba(i,t+1,15-t)}i.g=t,n.g.m=e,n.g.j=a,n.g.l=r,n.g.s="black"}}else if(17==(247&r)&&32==(240&e))n.g.m=!1,n.g.j=!1,n.g.l="white",va(n.g,xa,32),r=!1,"white_italics"===(t=Ua[(14&e)>>1])&&(t="white",r=!0),n.g.m=!(1&~e),n.g.j=r,n.g.l=t;else if(16==(247&r)&&32==(240&e)||23==(247&r)&&45==(255&e))t="black",!(7&r)&&(t=Oa[(14&e)>>1]),n.g.s=t;else if(17==(247&r)&&48==(240&e))va(n.g,wa,e);else if(18==(246&r)&&32==(224&e))va(n.g,1&r?Aa:Ta,e);else if(20==(246&r)&&32==(240&e)){switch(e=t.pts,r=null,t.hb){case 32:Ma(n);break;case 33:(n=n.g).i[n.g].pop();break;case 37:r=_a(n,2,e);break;case 38:r=_a(n,3,e);break;case 39:r=_a(n,4,e);break;case 40:va(n.g,xa,32);break;case 41:n.h=2,n.g=n.i,n.g.h=0,n.j=e;break;case 42:ma(n.s),Ra(n);break;case 43:Ra(n);break;case 44:t=n.i,r=null,n.h!==Pa&&(r=ga(t,n.j,e)),ba(t,0,15);break;case 45:t=n.g,n.h!==Da?r=null:(r=ga(t,n.j,e),ya(t,(a=t.g-t.h+1)-1,a,t.h),ba(t,0,a-1),ba(t,t.g,15-t.g),n.j=e);break;case 46:ba(n.l,0,15);break;case 47:t=null,n.h!==Pa&&(t=ga(n.i,n.j,e)),r=n.l,n.l=n.i,n.i=r,Ma(n),n.j=e,r=t}e=r;break e}e=null}else r=t.hb,va(n.g,xa,t.Oa),va(n.g,xa,r);return e}function uo(e,t){var n=[];try{for(;t.xa();){var r=$a(t).value,i=(224&r)>>5,a=31&r;if(7===i&&0!=a&&(i=63&$a(t).value),0!=i){e.j.has(i)||e.j.set(i,new Qa(i));for(var o=e.j.get(i),s=t.ma();t.ma()-s<a;){var u=$a(i=t),l=u.value,c=u.pts;if(16===l)l=l<<16|$a(i).value;if(0<=l&&31>=l){var d=c;if(o.g){var h=o.g;switch(i=null,l){case 8:!Ga(h)||0>=h.g&&0>=h.h||(0>=h.g?(h.g=h.F-1,h.h--):h.g--,h.i[h.h][h.g]=null);break;case 13:if(h.isVisible()&&(i=Va(h,d,o.i)),h.h+1>=h.H){d=h;for(var f=0,p=1;16>p;p++,f++)d.i[f]=d.i[p];for(p=0;1>p;p++,f++)d.i[f]=Fa()}else h.h++;h.g=0;break;case 14:h.isVisible()&&(i=Va(h,d,o.i)),h.i[h.h]=Fa(),h.g=0;break;case 12:h.isVisible()&&(i=Va(h,d,o.i)),ja(h),(d=h).h=0,d.g=0}var g=i}else g=null}else if(128<=l&&159>=l)g=Ja(o,i,l,c);else{if(4096<=l&&4127>=l)8<=(d=255&l)&&15>=d?i.skip(1):16<=d&&23>=d?i.skip(2):24<=d&&31>=d&&i.skip(3);else if(4224<=l&&4255>=l)128<=(d=255&l)&&135>=d?i.skip(4):136<=d&&143>=d&&i.skip(5);else if(32<=l&&127>=l)i=l,o.g&&za(o.g,127===i?"":String.fromCharCode(i));else if(160<=l&&255>=l)o.g&&za(o.g,String.fromCharCode(l));else if(4128<=l&&4223>=l){if(i=255&l,o.g)if(ro.has(i)){var m=ro.get(i);za(o.g,m)}else za(o.g,"_")}else 4256<=l&&4351>=l&&o.g&&za(o.g,160!=(255&l)?"_":"[CC]");g=null}(i=g)&&n.push(i)}}}}catch(v){if(!(v instanceof be&&3e3===v.code))throw v;q("CEA708_INVALID_DATA","Buffer read out of bounds / invalid CEA-708 Data.")}return n}function lo(e){for(var t=0;e;)t^=1&e,e>>=1;return 1===t}function co(){}function ho(e,t){var n=null,r=null,i=null,a=e.N();return 1&t&&(i=e.Cb()),2&t&&e.skip(4),8&t&&(n=e.N()),16&t&&(r=e.N()),{trackId:a,Cf:n,wg:r,rj:i}}function fo(e,t){return{rf:1==t?e.Cb():e.N()}}function po(e,t){return 1==t?(e.skip(8),e.skip(8)):(e.skip(4),e.skip(4)),{timescale:e.N()}}function go(e,t,n){var r=e.N(),i=[],a=null;1&n&&(a=e.N()),4&n&&e.skip(4);for(var o=0;o<r;o++){var s={Ge:null,sampleSize:null,Ld:null};256&n&&(s.Ge=e.N()),512&n&&(s.sampleSize=e.N()),1024&n&&e.skip(4),2048&n&&(s.Ld=0==t?e.N():e.Rf()),i.push(s)}return{wj:r,Tf:i,vg:a}}function mo(){this.j=new Map,this.i=this.h=0,this.g=vo}co.prototype.init=function(){},co.prototype.parse=function(){return[]},mo.prototype.init=function(e){function t(e){(e=e.name)in xo&&(n.g=xo[e])}var n=this,r=[],i=[];if((new ei).box("moov",ti).box("mvex",ti).S("trex",(function(e){var t=e.reader;t.skip(4),t.skip(4),e=t.N(),t=t.N(),n.h=e,n.i=t})).box("trak",ti).S("tkhd",(function(e){var t=e.reader;1==e.version?(t.skip(8),t.skip(8)):(t.skip(4),t.skip(4)),e=t.N(),r.push(e)})).box("mdia",ti).S("mdhd",(function(e){e=po(e.reader,e.version),i.push(e.timescale)})).box("minf",ti).box("stbl",ti).S("stsd",ni).box("avc1",t).box("avc3",t).box("hev1",t).box("hvc1",t).box("dvh1",t).box("dvhe",t).box("encv",ri).box("sinf",ti).box("frma",(function(e){(e=oi(e=e.reader.N()))in xo&&(n.g=xo[e])})).parse(e,!0),!r.length||!i.length||r.length!=i.length)throw new be(2,2,2010);this.g==vo&&X("Unable to determine bitstream format for CEA parsing!"),r.forEach((function(e,t){n.j.set(e,i[t])}))},mo.prototype.parse=function(e){var t=this;if(this.g==vo)return[];var n=[],r=this.h,i=this.i,a=[],o=null,s=null,u=null,l=9e4;return(new ei).box("moof",(function(e){o=e.start,ti(e)})).box("traf",ti).S("trun",(function(e){e=go(e.reader,e.version,e.flags),a=e.Tf,s=e.vg})).S("tfhd",(function(e){e=ho(e.reader,e.flags),r=e.Cf||t.h,i=e.wg||t.i,e=e.trackId,t.j.has(e)&&(l=t.j.get(e))})).S("tfdt",(function(e){u=fo(e.reader,e.version).rf})).box("mdat",(function(e){if(null===u)throw new be(2,2,2010);e:{var h=e.reader,f=u,p=l,g=r,m=i,v=a,y=0,b=m;for(v.length&&(b=v[0].sampleSize||m),h.skip((o||0)+(s||0)-e.start-8);h.xa();){e=h.N();var x=h.pb();switch(t.g){case yo:x=6==(x&=31);break;case bo:x=39==(x=x>>1&63)||40==x;break;default:break e}if(x){x=0,v.length>y&&(x=v[y].Ld||0),x=(f+x)/p;for(var w,T=[],A=h.Bb(e-1),S=w=0;S<A.length;)2==w&&3==A[S]?(w=0,(A=[].concat(d(A))).splice(S,1),A=new Uint8Array(A)):0==A[S]?w++:w=0,S++;for(w=A,S=0;S<w.length;){for(A=0;255==w[S];)A+=255,S++;A+=w[S++];for(var E=0;255==w[S];)E+=255,S++;E+=w[S++],4==A&&T.push(w.subarray(S,S+E)),S+=E}for(w=(T=c(T)).next();!w.done;w=T.next())n.push({rh:w.value,pts:x})}else try{h.skip(e-1)}catch(I){break}0==(b-=e+4)&&(f=v.length>y?f+(v[y].Ge||g):f+g,y++,b=v.length>y&&v[y].sampleSize||m)}}})).parse(e,!1),n};var vo=0,yo=1,bo=2,xo={avc1:yo,avc3:yo,hev1:bo,hvc1:bo,dvh1:bo,dvhe:bo};function wo(e){this.h=new co,e.includes("video/mp4")&&(this.h=new mo),this.g=new ao}function To(e,t){for(var n=(t=c(t=e.h.parse(t))).next();!n.done;n=t.next()){var r=n.value,i=Et(r.rh);if(0<i.length&&(n=e.g,r=r.pts,181===(i=new Qr(i,0)).pb()&&49===i.De()&&1195456820===i.N()&&3===i.pb())){var a=i.pb();if(64&a){a&=31,i.skip(1);for(var o=0;o<a;o++){var s=i.pb(),u=(4&s)>>2,l=i.pb(),h=i.pb();u&&(0===(s&=3)||1===s?n.h.push({pts:r,type:s,Oa:l,hb:h,order:n.h.length}):(n.g.push({pts:r,type:s,value:l,order:n.g.length}),n.g.push({pts:r,type:2,value:h,order:n.g.length})))}}}}return function(e){function t(e,t){return e.pts-t.pts||e.order-t.order}var n=[];e.h.sort(t),e.g.sort(t);for(var r=c(e.h),i=r.next();!i.done;i=r.next())(i=so(e,i.value))&&n.push(i);for(i=(r=c(e.g)).next();!i.done;i=r.next())qa(e.i,i.value);for(i=(r=c(e.i.i)).next();!i.done;i=r.next())i=uo(e,i.value),n.push.apply(n,d(i));return e.i.i=[],e.h=[],e.g=[],n}(e.g)}function Ao(e,t,n,r,i){this.Pa=e,this.Ta=t,this.Ba=n,this.we=void 0===r?null:r,this.timescale=i}function So(e,t,n,r,i,a,o,s,u,l,c,d,h,f,p){l=void 0===l?[]:l,f=void 0===f?Eo:f,this.startTime=e,this.j=this.endTime=t,this.C=n,this.Ta=r,this.Ba=i,this.h=a,this.timestampOffset=o,this.appendWindowStart=s,this.appendWindowEnd=u,this.i=l,this.tilesLayout=void 0===c?"":c,this.B=void 0===d?null:d,this.g=void 0===h?null:h,this.status=f,this.l=void 0===p?null:p,this.s=null,this.m=0}wo.prototype.init=function(e){this.h.init(e)},Ao.prototype.Jc=function(){return this.Ta},Ao.prototype.Fc=function(){return this.Ba},z("shaka.media.InitSegmentReference",Ao),Ao.prototype.getEndByte=Ao.prototype.Fc,Ao.prototype.getStartByte=Ao.prototype.Jc,(i=So.prototype).Pa=function(){return this.C()},i.getStartTime=function(){return this.startTime},i.Ig=function(){return this.endTime},i.Jc=function(){return this.Ta},i.Fc=function(){return this.Ba},i.ah=function(){return this.tilesLayout},i.$g=function(){return this.B},i.ec=function(){return this.status},i.kh=function(){this.status=Io},i.$f=function(e){this.s=e},i.Yg=function(){return this.s},i.offset=function(e){this.startTime+=e,this.endTime+=e,this.j+=e;for(var t=c(this.i),n=t.next();!n.done;n=t.next())(n=n.value).startTime+=e,n.endTime+=e,n.j+=e},i.Ve=function(e){null==this.g?W("Sync attempted without sync time!"):(e=this.g-e-this.startTime,.001<=Math.abs(e)&&this.offset(e))},z("shaka.media.SegmentReference",So),So.prototype.syncAgainst=So.prototype.Ve,So.prototype.offset=So.prototype.offset,So.prototype.getThumbnailSprite=So.prototype.Yg,So.prototype.setThumbnailSprite=So.prototype.$f,So.prototype.markAsUnavailable=So.prototype.kh,So.prototype.getStatus=So.prototype.ec,So.prototype.getTileDuration=So.prototype.$g,So.prototype.getTilesLayout=So.prototype.ah,So.prototype.getEndByte=So.prototype.Fc,So.prototype.getStartByte=So.prototype.Jc,So.prototype.getEndTime=So.prototype.Ig,So.prototype.getStartTime=So.prototype.getStartTime,So.prototype.getUris=So.prototype.Pa;var Eo=0,Io=1;function ko(e){return!e||1==e.length&&1e-6>e.end(0)-e.start(0)?null:1==e.length&&0>e.start(0)?0:e.length?e.start(0):null}function Co(e){return!e||1==e.length&&1e-6>e.end(0)-e.start(0)?null:e.length?e.end(e.length-1):null}function _o(e,t){return!(!e||!e.length||1==e.length&&1e-6>e.end(0)-e.start(0)||t>e.end(e.length-1))&&t>=e.start(0)}function Mo(e,t){if(!e||!e.length||1==e.length&&1e-6>e.end(0)-e.start(0))return 0;for(var n=0,r=(e=c(Ro(e))).next();!r.done;r=e.next()){var i=r.value;r=i.start,(i=i.end)>t&&(n+=i-Math.max(r,t))}return n}function Ro(e){if(!e)return[];for(var t=[],n=0;n<e.length;n++)t.push({start:e.start(n),end:e.end(n)});return t}function No(){}function Lo(e,t){var n=(127&e[t])<<21;return n|=(127&e[t+1])<<14,(n|=(127&e[t+2])<<7)|127&e[t+3]}function Do(e){var t={key:e.type,description:"",data:""};if("TXXX"===e.type){if(2>e.size||3!==e.data[0])return null;var n=e.data.subarray(1).indexOf(0);if(-1===n)return null;var r=Ht(Et(e.data,1,n));return e=Ht(Et(e.data,2+n)).replace(/\0*$/,""),t.description=r,t.data=e,t}return"WXXX"===e.type?2>e.size||3!==e.data[0]||-1===(n=e.data.subarray(1).indexOf(0))?null:(r=Ht(Et(e.data,1,n)),e=Ht(Et(e.data,2+n)).replace(/\0*$/,""),t.description=r,t.data=e,t):"PRIV"===e.type?2>e.size||-1===(r=e.data.indexOf(0))?null:(r=Ht(Et(e.data,0,r)),e=St(e.data.subarray(r.length+1)),t.description=r,t.data=e,t):"T"===e.type[0]?2>e.size||3!==e.data[0]?null:(e=Ht(e.data.subarray(1)).replace(/\0*$/,""),t.data=e,t):"W"===e.type[0]?(e=Ht(e.data).replace(/\0*$/,""),t.data=e,t):e.data?(t.data=St(e.data),t):null}function Po(e){for(var t=0,n=[];t+10<=e.length&&73===e[t]&&68===e[t+1]&&51===e[t+2]&&255>e[t+3]&&255>e[t+4]&&128>e[t+6]&&128>e[t+7]&&128>e[t+8]&&128>e[t+9];){var r=Lo(e,t+6);for(e[t+5]>>6&1&&(t+=10),r=(t+=10)+r;t+10<r;){var i=e.subarray(t),a=Lo(i,4);(a=Do(i={type:String.fromCharCode(i[0],i[1],i[2],i[3]),size:a,data:i.subarray(10,10+a)}))&&n.push(a),t+=i.size+10}t+10<=e.length&&51===e[t]&&68===e[t+1]&&73===e[t+2]&&255>e[t+3]&&255>e[t+4]&&128>e[t+6]&&128>e[t+7]&&128>e[t+8]&&128>e[t+9]&&(t+=10)}return n}function Oo(){this.s=null,this.B=!1,this.l=this.m=null,this.F=[],this.g=this.h=null,this.C=[],this.j=null,this.i=[]}function Uo(e){if(1!=(e[0]<<16|e[1]<<8|e[2]))return null;var t={data:new Uint8Array(0),vj:6+(e[4]<<8|e[5]),pts:null,dts:null},n=e[7];return 192&n&&(t.pts=536870912*(14&e[9])+4194304*(255&e[10])+16384*(254&e[11])+128*(255&e[12])+(254&e[13])/2,t.dts=t.pts,64&n&&(t.dts=536870912*(14&e[14])+4194304*(255&e[15])+16384*(254&e[16])+128*(255&e[17])+(254&e[18])/2)),t.data=e.subarray(9+e[8]),t}function Bo(e){for(var t=Math.min(1e3,e.length-564),n=0;n<t;){if(71===e[n]&&71===e[n+188]&&71===e[n+376])return n;n++}return-1}function jo(e,t,n){this.g=null,this.i=-1,this.j=e,this.h=t,this.l=n,"undefined"==typeof libDPIModule&&X("Could not Find LCEVC Library dependencies on this page"),"undefined"==typeof LcevcDil?X("Could not Find LCEVC Library on this page"):LcevcDil.SupportObject.SupportStatus||X(LcevcDil.SupportObject.SupportError),"undefined"!=typeof LcevcDil&&"undefined"!=typeof libDPIModule&&this.h instanceof HTMLCanvasElement&&LcevcDil.SupportObject.SupportStatus&&!this.g&&LcevcDil.SupportObject.webGLSupport(this.h)&&(this.h.classList.remove("shaka-hidden"),this.g=new LcevcDil.LcevcDil(this.j,this.h,this.l))}function Fo(e,t){var n=zo;switch(t.mimeType){case"video/webm":n=Go;break;case"video/mp4":n=Vo}e.g&&(e.i=t.id,e.g.setLevelSwitching(t.id,!0),e.g.setContainerFormat(n))}So.Status={Vh:Eo,kj:Io,Ai:2},z("shaka.util.Id3Utils",No),No.getID3Frames=Po,Oo.prototype.parse=function(e){if(564>e.length)return this;for(var t=Math.max(0,Bo(e)),n=e.length-(e.length+t)%188,r=!1,i=t;i<n;i+=188)if(71===e[i]){var a=!!(64&e[i+1]),o=((31&e[i+1])<<8)+e[i+2];if(1<(48&e[i+3])>>4){var s=i+5+e[i+4];if(s===i+188)continue}else s=i+4;switch(o){case 0:a&&(s+=e[s]+1),this.s=(31&e[s+10])<<8|e[s+11];break;case 17:case 8191:break;case this.s:a&&(s+=e[s]+1),o={audio:-1,video:-1,me:-1,audioCodec:"",videoCodec:""};var u=s+3+((15&(a=e)[s+1])<<8|a[s+2])-4;for(s+=12+((15&a[s+10])<<8|a[s+11]);s<u;){var l=(31&a[s+1])<<8|a[s+2];switch(a[s]){case 15:-1===o.audio&&(o.audio=l,o.audioCodec="aac");break;case 21:-1===o.me&&(o.me=l);break;case 27:-1===o.video&&(o.video=l,o.videoCodec="avc");break;case 3:case 4:-1===o.audio&&(o.audio=l,o.audioCodec="mp3");break;case 36:-1===o.video&&(o.video=l,o.videoCodec="hvc")}s+=5+((15&a[s+3])<<8|a[s+4])}a=o,null==this.l&&(this.l=a.video),null==this.g&&(this.g=a.audio),null==this.j&&(this.j=a.me),r&&!this.B&&(r=!1,i=t-188),this.B=!0;break;case this.l:a=e.subarray(s,i+188),null==this.m&&(s=Uo(a))&&null!=s.pts&&(this.m=s.pts/9e4),this.F.push(a);break;case this.g:a=e.subarray(s,i+188),null==this.h&&(s=Uo(a))&&null!=s.pts&&(this.h=s.pts/9e4),this.C.push(a);break;case this.j:this.i.push(e.subarray(s,i+188));break;default:r=!0}}return this},Oo.prototype.getStartTime=function(){return{audio:this.h,video:this.m}},z("shaka.util.TsParser",Oo),jo.prototype.release=function(){this.g&&(this.g.close(),this.g=null)},z("shaka.lcevc.Dil",jo),jo.prototype.release=jo.prototype.release;var zo=0,Go=1,Vo=2;function Ko(e,t,n,r){var i=this;this.j=e,this.H=null,this.m=t,this.h={},this.M={},this.P={},this.g=null,this.J=!1,this.V=n||function(){},this.G=r||null,this.i={},this.C=new Hr,this.s={},this.B=null,this.K=new Ct,this.l=function(e,t){var n=new MediaSource;return e.C.Da(n,"sourceopen",(function(){URL.revokeObjectURL(e.O),t.resolve()})),e.O=ss(n),e.j.src=e.O,n}(this,this.K),this.I=new Vr((function(){return function(e){var t,n,r,i,a,o,s;return L((function(u){if(1==u.g){for(n in t=[],e.i)for(r=e.i[n],i=r[0],e.i[n]=r.slice(0,1),i&&t.push(i.p.catch(we)),a=c(r.slice(1)),o=a.next();!o.done;o=a.next())o.value.p.reject(new be(2,7,7003,void 0));for(s in e.g&&t.push(e.g.destroy()),e.m&&t.push(e.m.destroy()),e.s)t.push(e.s[s].destroy());return w(u,Promise.all(t),2)}e.C&&(e.C.release(),e.C=null),e.j&&(e.j.removeAttribute("src"),e.j.load(),e.j=null),e.H=null,e.l=null,e.g=null,e.m=null,e.h={},e.s={},e.B=null,e.i={},e.G=null,T(u)}))}(i)})),this.O="",this.F=!1,this.X=new Ct}function Ho(e,t,n){e.g||(e.g=new bn(e.m));var r=e.g;e=e.J,"application/cea-608"!=t&&"application/cea-708"!=t&&(r.j=(0,Sn[t])(),r.j.setSequenceMode?r.j.setSequenceMode(n):X('Text parsers should have a "setSequenceMode" method!'),r.C=e)}function Wo(e){return!e.l||"ended"==e.l.readyState}function Xo(e,t){return t==ke?e.g.g:ko(Yo(e,t))}function qo(e,t){return t==ke?e.g.h:Co(Yo(e,t))}function Yo(e,t){try{return e.h[t].buffered}catch(n){return null}}function $o(e,t,n,r,i,a,o){var s,u,l,d,h,f,p,g,m,v,y,b,x,A,S,E,I,k,C,_,M,R;return a=void 0!==a&&a,o=void 0!==o&&o,L((function(N){switch(N.g){case 1:if(t!=(s=Ce).ha){N.D(2);break}if(!e.F){N.D(3);break}return w(N,e.X,4);case 4:u=N.h,e.g.B=u;case 3:return w(N,function(e,t,n,r){var i,a,o,s;return L((function(u){return 1==u.g?w(u,Promise.resolve(),2):e.j&&e.i?null==n||null==r?(e.j.parseInit(Et(t)),u.return()):(i=e.C?n:e.B,a={periodStart:e.B,segmentStart:n,segmentEnd:r,vttOffset:i},o=e.j.parseMedia(Et(t),a),s=o.filter((function(t){return t.startTime>=e.l&&t.startTime<e.m})),e.i.append(s),null==e.g&&(e.g=Math.max(n,e.l)),e.h=Math.min(r,e.m),void T(u)):u.return()}))}(e.g,n,r?r.startTime:null,r?r.endTime:null),5);case 5:return N.return();case 2:if(l=Et(n),d=e.M[t],e.s[t]&&(d=e.s[t].s),0>Bo(l)?ls.includes(d)&&((g=Po(l)).length&&r&&(m={cueTime:r.startTime,data:l,frames:g,dts:r.startTime,pts:r.startTime},e.V([m],0,r.endTime))):(h=(new Oo).parse(l),f=r.startTime-(h.getStartTime()[t]||0),p=function(e){for(var t=[],n=new Uint8Array(0),r=e.i.length-1;0<=r;r--){var i=Uo(n=rn(e.i[r],n));i&&(t.unshift({cueTime:i.pts?i.pts/9e4:null,data:i.data,frames:Po(i.data),dts:i.dts,pts:i.pts}),n=new Uint8Array(0))}return t}(h),p.length&&e.V(p,f,r?r.endTime:null)),!e.s[t]){i&&t==s.Ma&&(e.g||Ho(e,"text/vtt",e.F),e.B||(e.B=new wo(d)),r?(v=To(e.B,n)).length&&(y=e.h[s.Ma].timestampOffset,An(e.g,v,r.startTime,r.endTime,y)):e.B.init(n)),N.D(6);break}return a&&e.s[t].g.resetCaptions(),w(N,function(e,t){return e.j=!0,e.h=new Ct,e.l=[],e.i=[],t=Et(t),e.g.push(t),e.g.flush(),e.j&&e.h.reject(new be(2,3,3018)),e.h}(e.s[t],n),7);case 7:b=N.h,e.g||Ho(e,"text/vtt",e.F),b.captions&&b.captions.length&&(x=e.h[s.Ma].timestampOffset,A=function(e){for(var t=[],n=(e=c(e)).next();!n.done;n=e.next())n=n.value,t.push({stream:n.stream,cue:new tt(n.startTime,n.endTime,n.text)});return t}(b.captions),An(e.g,A,r?r.startTime:null,r?r.endTime:null,x)),n=b.data;case 6:if(n=function(e,t,n,r){var i=e.P[r];return null==n&&i&&(Pt()||Dt())&&"mp4"==e.M[r].split(";")[0].split("/")[1]&&(t=function(e){function t(){i=!0}function n(e){a.push(e),ti(e)}e=Et(e);var r,i=!1,a=[],o=[];if((new ei).box("moov",n).box("trak",n).box("mdia",n).box("minf",n).box("stbl",n).S("stsd",(function(e){r=e,a.push(e),ni(e)})).S("encv",t).S("enca",t).S("hev1",(function(e){o.push({box:e,Pb:1701733238})})).S("hvc1",(function(e){o.push({box:e,Pb:1701733238})})).S("avc1",(function(e){o.push({box:e,Pb:1701733238})})).S("avc3",(function(e){o.push({box:e,Pb:1701733238})})).S("ac-3",(function(e){o.push({box:e,Pb:1701733217})})).S("ec-3",(function(e){o.push({box:e,Pb:1701733217})})).S("mp4a",(function(e){o.push({box:e,Pb:1701733217})})).parse(e),i)return e;if(0==o.length||!r)throw nn(e),new be(2,3,3019);o.reverse();for(var s=c(o),u=s.next();!u.done;u=s.next())u=u.value,e=sa(e,r,u.box,a,u.Pb);return e}(t)),t}(e,n,r?r.startTime:null,t),S=e.h[t],E=us,!e.F||S.mode==E||!r){N.D(8);break}if(I=e.l.duration,!(t==s.Ma||!(s.Ma in e.h))){N.D(9);break}return k=[S.appendWindowStart,S.appendWindowEnd],S.appendWindowStart=0,S.appendWindowEnd=1/0,C=S.timestampOffset,S.timestampOffset=0,w(N,rs(e,t,(function(){return Jo(e,t,n)})),10);case 10:return w(N,rs(e,t,(function(){return es(e,t)})),11);case 11:return S.timestampOffset=C,S.appendWindowStart=k[0],S.appendWindowEnd=k[1],_=ko(Yo(e,t)),M=(r.startTime||0)-(_||0),e.X.resolve(M),w(N,rs(e,t,(function(){return Zo(e,t,0,I)})),12);case 12:if(t!=s.Ma){N.D(9);break}return w(N,rs(e,t,(function(){e.j.currentTime-=.001,ns(e,t)})),9);case 9:return S.mode=E,w(N,e.Sa(I),8);case 8:return r&&e.F&&t!=s.ha&&(a||o)&&(R=r.startTime,rs(e,t,(function(){return es(e,t)})),rs(e,t,(function(){return ts(e,t,R)}))),w(N,rs(e,t,(function(){Jo(e,t,n)})),16);case 16:T(N)}}))}function Qo(e,t){return L((function(n){return t==Ce.ha?e.g?w(n,e.g.remove(0,1/0),0):n.return():w(n,rs(e,t,(function(){return Zo(e,t,0,e.l.duration)})),0)}))}function Jo(e,t,n){if("video"==t&&e.G){var r=e.G;r.g&&r.g.appendBuffer(n,"video",r.i)}e.h[t].appendBuffer(n)}function Zo(e,t,n,r){r<=n?ns(e,t):e.h[t].remove(n,r)}function es(e,t){var n=e.h[t].appendWindowStart,r=e.h[t].appendWindowEnd;e.h[t].abort(),e.h[t].appendWindowStart=n,e.h[t].appendWindowEnd=r,ns(e,t)}function ts(e,t,n){0>n&&(n+=.001),e.h[t].timestampOffset=n,ns(e,t)}function ns(e,t){var n=e.i[t][0];n&&(n.p.resolve(),as(e,t))}function rs(e,t,n){return Kr(e.I),n={start:n,p:new Ct},e.i[t].push(n),1==e.i[t].length&&os(e,t),n.p}function is(e,t){var n,r,i,a,o;return L((function(s){switch(s.g){case 1:for(i in Kr(e.I),n=[],r={},e.h)r.yc=new Ct,a={start:function(e){return function(){return e.yc.resolve()}}(r),p:r.yc},e.i[i].push(a),n.push(r.yc),1==e.i[i].length&&a.start(),r={yc:r.yc};return A(s,2),w(s,Promise.all(n),4);case 4:E(s,3);break;case 2:throw I(s);case 3:try{t()}catch(u){throw new be(2,3,3015,u)}finally{for(o in e.h)as(e,o)}T(s)}}))}function as(e,t){e.i[t].shift(),os(e,t)}function os(e,t){var n=e.i[t][0];if(n)try{n.start()}catch(r){"QuotaExceededError"==r.name?n.p.reject(new be(2,3,3017,t)):n.p.reject(new be(2,3,3015,r)),as(e,t)}}(i=Ko.prototype).destroy=function(){return this.I.destroy()},i.init=function(e,t,n){n=void 0!==n&&n;var r,i,a,o,s,u,l,d,h=this;return L((function(f){if(1==f.g)return r=Ce,w(f,h.K,2);for(h.F=n,i={},a=c(e.keys()),o=a.next();!o.done;i={Ea:i.Ea},o=a.next())i.Ea=o.value,s=e.get(i.Ea),u=pn(s.mimeType,s.codecs),i.Ea==r.ha?Ho(h,u,n):(!t&&Ye(u)||!ln(u,i.Ea)||(h.s[i.Ea]=new un(u),u=dn(i.Ea,u)),l=u+h.H.sourceBufferExtraFeatures,d=h.l.addSourceBuffer(l),h.C.o(d,"error",function(e){return function(){h.i[e.Ea][0].p.reject(new be(2,3,3014,h.j.error?h.j.error.code:0))}}(i)),h.C.o(d,"updateend",function(e){return function(){return ns(h,e.Ea)}}(i)),h.h[i.Ea]=d,h.M[i.Ea]=u,h.i[i.Ea]=[],h.P[i.Ea]=!!s.drmInfos.length);T(f)}))},i.configure=function(e){this.H=e},i.jb=function(){var e={total:Ro(this.j.buffered),audio:Ro(Yo(this,"audio")),video:Ro(Yo(this,"video")),text:[]};if(this.g){var t=this.g.g,n=this.g.h;null!=t&&null!=n&&e.text.push({start:t,end:n})}return e},i.remove=function(e,t,n){var r=this;return L((function(i){return e==Ce.ha?w(i,r.g.remove(t,n),0):w(i,rs(r,e,(function(){return Zo(r,e,t,n)})),0)}))},i.flush=function(e){var t=this;return L((function(n){return e==Ce.ha?n.return():w(n,rs(t,e,(function(){t.j.currentTime-=.001,ns(t,e)})),0)}))},i.endOfStream=function(e){var t=this;return L((function(n){return w(n,is(t,(function(){Wo(t)||(e?t.l.endOfStream(e):t.l.endOfStream())})),0)}))},i.Sa=function(e){var t=this;return L((function(n){return w(n,is(t,(function(){if(e<t.l.duration)for(var n in t.h){var r={start:function(){},p:new Ct};t.i[n].unshift(r)}t.l.duration=e})),0)}))},i.getDuration=function(){return this.l.duration};var ss=e.URL.createObjectURL,us="sequence",ls=["audio/aac","audio/ac3","audio/ec3","audio/mpeg"];function cs(e,t,n){this.i=e,this.m=t,this.s=this.j=1/0,this.g=1,this.h=this.l=null,this.B=0,this.C=!0,this.F=0,this.G=void 0===n||n,this.H=0,this.I=!1}function ds(e,t,n){this.l=n,this.j=e,this.B=fs(e),this.g=e.g.currentTime,this.m=Date.now()/1e3,this.h=!1,this.s=0,this.C=t,this.i=function(){}}function hs(e){this.g=e}function fs(e){if(e.g.paused||0==e.g.playbackRate||0==e.g.buffered.length)var t=!1;else e:{t=e.g.currentTime;for(var n=(e=c(Ro(e.g.buffered))).next();!n.done;n=e.next())if(!(t<(n=n.value).start-.1||t>n.end-.5)){t=!0;break e}t=!1}return t}function ps(e,t,n,r,i){var a=this;this.s=i,this.g=e,this.B=t,this.G=n,this.i=new Hr,this.m=!1,this.F=e.readyState,this.C=0,this.h=r,this.l=!1,this.i.o(e,"waiting",(function(){return gs(a)})),this.j=new Rt((function(){gs(a)})).ea(.25)}function gs(e){if(0!=e.g.readyState){if(e.g.seeking){if(!e.m)return}else e.m=!1;if(!e.g.paused||0==e.g.currentTime&&(e.g.autoplay||0!=e.g.currentTime)){var t;if(e.g.readyState!=e.F&&(e.F=e.g.readyState),!(t=!e.h)){var n=(t=e.h).j,r=fs(n),i=n.g.currentTime,a=Date.now()/1e3;t.g==i&&t.B==r||(t.m=a,t.g=i,t.B=r,t.h=!1),(r=(i=a-t.m)>=t.C&&r&&!t.h)&&(t.i(t.g,i),t.h=!0,t.g=n.g.currentTime,t.s++,t.l(new G("stalldetected"))),t=!r}t&&(t=e.g.currentTime,r=function(e,t,n){return!e||!e.length||1==e.length&&1e-6>e.end(0)-e.start(0)?null:0<=(e=Ro(e).findIndex((function(e,r,i){return e.start>t&&(0==r||i[r-1].end-t<=n)})))?e:null}(n=e.g.buffered,t,e.G.gapDetectionThreshold),null==r||0==r&&!e.l||((i=n.start(r))>=e.B.kb()||.001>i-t||(0!=r&&n.end(r-1),e.g.currentTime=i,e.C++,e.s(new G("gapjumped")))))}}}function ms(e,t,n,r){t==HTMLMediaElement.HAVE_NOTHING||e.readyState>=t?r():(t=vs.value().get(t),n.Da(e,t,r))}(i=cs.prototype).getDuration=function(){return this.j},i.Qg=function(){return this.g},i.Zf=function(e){this.i=e},i.Sa=function(e){this.j=e},i.Ug=function(){return this.i},i.Vf=function(e){this.B=e},i.$c=function(e){this.C=e},i.Re=function(e){this.s=e},i.Wf=function(e){this.m=e},i.Hg=function(){return this.m},i.lc=function(e){if(0!=e.length){for(var t=e[0].startTime,n=e[0].endTime,r=(e=c(e)).next();!r.done;r=e.next())r=r.value,t=Math.min(t,r.startTime),n=Math.max(n,r.endTime),this.g=Math.max(this.g,r.endTime-r.startTime);this.Ae(t),this.h=Math.max(this.h,n),null!=this.i&&this.G&&!this.I&&(this.i=(Date.now()+this.B)/1e3-this.h-this.g)}},i.ve=function(){this.I=!0},i.Ae=function(e){this.l=null==this.l?e:Math.min(this.l,e)},i.ze=function(e){this.g=Math.max(this.g,e)},i.offset=function(e){null!=this.l&&(this.l+=e),null!=this.h&&(this.h+=e)},i.T=function(){return 1/0==this.j&&!this.C},i.Lb=function(){return 1/0!=this.j&&!this.C},i.mb=function(){return Math.max(this.F,this.Ib()-this.s)},i.ag=function(e){this.F=e},i.Ib=function(){return this.T()||this.Lb()?Math.min(Math.max(0,(Date.now()+this.B)/1e3-this.g-this.i)+this.H,this.j):this.h?Math.min(this.h,this.j):this.j},i.Ic=function(e){var t=Math.max(this.l,this.F);return 1/0==this.s?Math.ceil(1e3*t)/1e3:Math.max(t,Math.min(this.Ib()-this.s+e,this.kb()))},i.dc=function(){return this.Ic(0)},i.kb=function(){return Math.max(0,this.Ib()-(this.T()||this.Lb()?this.m:0))},i.fg=function(){return!(null==this.i||null!=this.h&&this.G)},i.Uf=function(e){this.H=e},z("shaka.media.PresentationTimeline",cs),cs.prototype.setAvailabilityTimeOffset=cs.prototype.Uf,cs.prototype.usingPresentationStartTime=cs.prototype.fg,cs.prototype.getSeekRangeEnd=cs.prototype.kb,cs.prototype.getSeekRangeStart=cs.prototype.dc,cs.prototype.getSafeSeekRangeStart=cs.prototype.Ic,cs.prototype.getSegmentAvailabilityEnd=cs.prototype.Ib,cs.prototype.setUserSeekStart=cs.prototype.ag,cs.prototype.getSegmentAvailabilityStart=cs.prototype.mb,cs.prototype.isInProgress=cs.prototype.Lb,cs.prototype.isLive=cs.prototype.T,cs.prototype.offset=cs.prototype.offset,cs.prototype.notifyMaxSegmentDuration=cs.prototype.ze,cs.prototype.notifyMinSegmentStartTime=cs.prototype.Ae,cs.prototype.lockStartTime=cs.prototype.ve,cs.prototype.notifySegments=cs.prototype.lc,cs.prototype.getDelay=cs.prototype.Hg,cs.prototype.setDelay=cs.prototype.Wf,cs.prototype.setSegmentAvailabilityDuration=cs.prototype.Re,cs.prototype.setStatic=cs.prototype.$c,cs.prototype.setClockOffset=cs.prototype.Vf,cs.prototype.getPresentationStartTime=cs.prototype.Ug,cs.prototype.setDuration=cs.prototype.Sa,cs.prototype.setPresentationStartTime=cs.prototype.Zf,cs.prototype.getMaxSegmentDuration=cs.prototype.Qg,cs.prototype.getDuration=cs.prototype.getDuration,ds.prototype.release=function(){this.l=this.j=null,this.i=function(){}},ps.prototype.release=function(){this.i&&(this.i.release(),this.i=null),null!=this.j&&(this.j.stop(),this.j=null),this.h&&(this.h.release(),this.h=null),this.g=this.B=this.s=null},ps.prototype.Ce=function(){this.l=!0,gs(this)};var vs=new _t((function(){return new Map([[HTMLMediaElement.HAVE_METADATA,"loadedmetadata"],[HTMLMediaElement.HAVE_CURRENT_DATA,"loadeddata"],[HTMLMediaElement.HAVE_FUTURE_DATA,"canplay"],[HTMLMediaElement.HAVE_ENOUGH_DATA,"canplaythrough"]])}));function ys(e,t,n){var r=this;this.g=e,this.l=t,this.j=n,this.m=!1,this.h=new Hr,this.i=new As(e),ms(this.g,HTMLMediaElement.HAVE_METADATA,this.h,(function(){ws(r,r.j)}))}function bs(e){return e.m?e.g.currentTime:e.j}function xs(e,t){0<e.g.readyState?Ss(e.i,t):ms(e.g,HTMLMediaElement.HAVE_METADATA,e.h,(function(){ws(e,e.j)}))}function ws(e,t){.001>Math.abs(e.g.currentTime-t)?Ts(e):(e.h.Da(e.g,"seeking",(function(){Ts(e)})),Ss(e.i,0==e.g.currentTime?t:e.g.currentTime))}function Ts(e){e.m=!0,e.h.o(e.g,"seeking",(function(){return e.l()}))}function As(e){var t=this;this.h=e,this.m=10,this.l=this.j=this.i=0,this.g=new Rt((function(){0>=t.i||t.h.currentTime!=t.j?t.g.stop():(t.h.currentTime=t.l,t.i--)}))}function Ss(e,t){e.j=e.h.currentTime,e.l=t,e.i=e.m,e.h.currentTime=t,e.g.ea(.1)}function Es(e){this.g=e,this.j=!1,this.h=null,this.i=new Hr}function Is(e,t,n,r,i,a){var o=this;this.i=e,this.g=t.presentationTimeline,this.F=t.minBufferTime||0,this.l=n,this.C=i,this.B=null,this.s=function(e,t,n){if(!t.stallEnabled)return null;var r=t.stallSkip;return t=new ds(new hs(e),t.stallThreshold,n),function(e,t){e.i=t}(t,(function(){r?e.currentTime+=r:(e.pause(),e.play())})),t}(e,n,a),this.j=new ps(e,t.presentationTimeline,n,this.s,a),this.h=new ys(e,(function(){var e=o.j;e.m=!0,e.l=!1;var t=bs(o.h);return e=Cs(o,t),.001<Math.abs(e-t)&&(t=Date.now()/1e3,!o.B||o.B<t-1)?(o.B=t,xs(o.h,e),e=void 0):(o.C(),e=void 0),e}),function(e,t){return null==t?t=1/0>e.g.getDuration()?e.g.dc():e.g.kb():0>t&&(t=e.g.kb()+t),ks(e,_s(e,t))}(this,r)),this.m=new Rt((function(){if(0!=o.i.readyState&&!o.i.paused){var e=bs(o.h),t=o.g.dc(),n=o.g.kb();3>n-t&&(t=n-3),e<t&&(e=Cs(o,e),o.i.currentTime=e)}}))}function ks(e,t){var n=e.g.getDuration();return t>=n?n-e.l.durationBackoff:t}function Cs(e,t){var n=Math.max(e.F,e.l.rebufferingGoal),r=e.l.safeSeekOffset,i=e.g.dc(),a=e.g.kb(),o=e.g.getDuration();3>a-i&&(i=a-3);var s=e.g.Ic(n),u=e.g.Ic(r);return n=e.g.Ic(n+r),t>=o?ks(e,t):t>a?a:t<i?_o(e.i.buffered,u)?u:n:t>=s||_o(e.i.buffered,t)?t:n}function _s(e,t){var n=e.g.dc();return t<n?n:t>(e=e.g.kb())?e:t}function Ms(e){this.g=e,this.h=null,this.i=0,this.j=!1}function Rs(e,t){for(var n=(e=c(e.g)).next();!n.done;n=e.next())t(n.value)}function Ns(e,t,n){return new Ms([new So(e,e+t,(function(){return n}),0,null,null,e,e,e+t)])}function Ls(e,t,n){this.i=e,this.g=t,this.h=n}function Ds(){Ms.call(this,[]),this.l=[]}function Ps(e){var t=this;this.g=e,this.j=!1,this.i=this.g.wd(),this.h=new Rt((function(){t.g.Of(.25*t.i)}))}function Os(e){e.h.stop();var t=e.j?0:e.i;if(0<=t)try{return void(e.g.wd()!=t&&e.g.Pe(t))}catch(n){}e.h.ea(.25),0!=e.g.wd()&&e.g.Pe(0)}function Us(e){var t=this;this.h=e,this.g=new Set,this.i=new Rt((function(){Bs(t,!1)})).ea(.25)}function Bs(e,t){for(var n=c(e.g),r=n.next();!r.done;r=n.next())r.value.j(e.h.currentTime,t)}function js(e){ee.call(this),this.g=new Map,this.h=e}function Fs(e){ee.call(this);var t=this;this.g=new Set,this.i=e,this.h=new Rt((function(){for(var e=t.i(),n=c(t.g),r=n.next();!r.done;r=n.next())(r=r.value).endTime<e.start&&(t.g.delete(r),r=new G("regionremove",new Map([["region",r]])),t.dispatchEvent(r))})).ea(2)}function zs(e){ee.call(this);var t=this;this.i=e,this.g=new Map,this.l=[{Vb:null,Ub:Ks,Kb:function(e,n){return Gs(t,"enter",e,n)}},{Vb:Vs,Ub:Ks,Kb:function(e,n){return Gs(t,"enter",e,n)}},{Vb:Hs,Ub:Ks,Kb:function(e,n){return Gs(t,"enter",e,n)}},{Vb:Ks,Ub:Vs,Kb:function(e,n){return Gs(t,"exit",e,n)}},{Vb:Ks,Ub:Hs,Kb:function(e,n){return Gs(t,"exit",e,n)}},{Vb:Vs,Ub:Hs,Kb:function(e,n){return Gs(t,"skip",e,n)}},{Vb:Hs,Ub:Vs,Kb:function(e,n){return Gs(t,"skip",e,n)}}],this.h=new Hr,this.h.o(this.i,"regionremove",(function(e){t.g.delete(e.region)}))}function Gs(e,t,n,r){t=new G(t,new Map([["region",n],["seeking",r]])),e.dispatchEvent(t)}ys.prototype.release=function(){this.h&&(this.h.release(),this.h=null),null!=this.i&&(this.i.release(),this.i=null),this.l=function(){},this.g=null},As.prototype.release=function(){this.g&&(this.g.stop(),this.g=null),this.h=null},(i=Es.prototype).ge=function(){var e=this;ms(this.g,HTMLMediaElement.HAVE_CURRENT_DATA,this.i,(function(){null==e.h||0==e.h?e.j=!0:(e.i.Da(e.g,"seeking",(function(){e.j=!0})),e.g.currentTime=Math.max(0,e.g.currentTime+e.h))}))},i.release=function(){this.i&&(this.i.release(),this.i=null),this.g=null},i.ie=function(e){this.h=this.j?this.h:e},i.kd=function(){return(this.j?this.g.currentTime:this.h)||0},i.nf=function(){return 0},i.mf=function(){return 0},i.Pf=function(){},(i=Is.prototype).ge=function(){this.m.ea(.25)},i.release=function(){this.h&&(this.h.release(),this.h=null),this.j&&(this.j.release(),this.j=null),this.m&&(this.m.stop(),this.m=null),this.i=this.h=this.g=this.l=null,this.C=function(){}},i.ie=function(e){xs(this.h,e)},i.kd=function(){var e=bs(this.h);return 0<this.i.readyState&&!this.i.paused?_s(this,e):e},i.nf=function(){return this.s?this.s.s:0},i.mf=function(){return this.j.C},i.Pf=function(){this.j.Ce()},(i=Ms.prototype).release=function(){this.j||(this.g=[],this.h&&this.h.stop(),this.h=null)},i.lh=function(){this.j=!0},i.find=function(e){for(var t=this.g.length-1,n=t;0<=n;--n){var r=this.g[n],i=n<t?this.g[n+1].startTime:r.endTime;if(e>=r.startTime&&e<i)return n+this.i}return this.g.length&&e<this.g[0].startTime?this.i:null},i.get=function(e){return 0==this.g.length||0>(e-=this.i)||e>=this.g.length?null:this.g[e]},i.offset=function(e){if(!this.j)for(var t=c(this.g),n=t.next();!n.done;n=t.next())n.value.offset(e)},i.Sc=function(e){if(!this.j&&e.length){var t=Math.round(1e3*e[0].startTime)/1e3;this.g=this.g.filter((function(e){return Math.round(1e3*e.startTime)/1e3<t})),this.g.push.apply(this.g,d(e))}},i.kc=function(e,t){var n=this;e=e.filter((function(e){return e.endTime>t&&(0==n.g.length||e.endTime>n.g[0].startTime)})),this.Sc(e),this.Gb(t)},i.Gb=function(e){if(!this.j){var t=this.g.length;this.g=this.g.filter((function(t){return t.endTime>e})),this.i+=t-this.g.length}},i.wb=function(e,t,n){if(n=void 0!==n&&n,!this.j){for(;this.g.length&&this.g[this.g.length-1].startTime>=t;)this.g.pop();for(;this.g.length&&this.g[0].endTime<=e;)this.g.shift(),n||this.i++;0!=this.g.length&&(e=this.g[this.g.length-1],this.g[this.g.length-1]=new So(e.startTime,t,e.C,e.Ta,e.Ba,e.h,e.timestampOffset,e.appendWindowStart,e.appendWindowEnd,e.i,e.tilesLayout,e.B,e.g,e.status,e.l))}},i.Nd=function(e,t){var n=this;this.j||(this.h&&this.h.stop(),this.h=new Rt((function(){var e=t();e?n.g.push.apply(n.g,d(e)):(n.h.stop(),n.h=null)})),this.h.ea(e))},Ms.prototype[Symbol.iterator]=function(){return this.bc(0)},Ms.prototype.bc=function(e){var t=this.find(e);if(null==t)return null;t--;var n=this.get(t+1),r=-1;if(n&&0<n.i.length)for(var i=n.i.length-1;0<=i;--i){var a=n.i[i];if(e>=a.startTime&&e<a.endTime){t++,r=i-1;break}}return new Ls(this,t,r)},z("shaka.media.SegmentIndex",Ms),Ms.forSingleSegment=Ns,Ms.prototype.getIteratorForTime=Ms.prototype.bc,Ms.prototype.updateEvery=Ms.prototype.Nd,Ms.prototype.fit=Ms.prototype.wb,Ms.prototype.evict=Ms.prototype.Gb,Ms.prototype.mergeAndEvict=Ms.prototype.kc,Ms.prototype.offset=Ms.prototype.offset,Ms.prototype.get=Ms.prototype.get,Ms.prototype.find=Ms.prototype.find,Ms.prototype.markImmutable=Ms.prototype.lh,Ms.prototype.release=Ms.prototype.release,Ls.prototype.ug=function(){return this.g},Ls.prototype.current=function(){var e=this.i.get(this.g);return e&&0<e.i.length&&e.Pa().length&&this.h>=e.i.length&&(this.g++,this.h=0,e=this.i.get(this.g)),e&&0<e.i.length?e.i[this.h]:e},Ls.prototype.next=function(){var e=this.i.get(this.g);return e&&0<e.i.length?(this.h++,e.Pa().length&&this.h==e.i.length&&(this.g++,this.h=0)):(this.g++,this.h=0),{value:e=this.current(),done:!e}},z("shaka.media.SegmentIterator",Ls),Ls.prototype.next=Ls.prototype.next,Ls.prototype.current=Ls.prototype.current,Ls.prototype.currentPosition=Ls.prototype.ug,v(Ds,Ms),(i=Ds.prototype).clone=function(){var e=new Ds;return e.l=this.l.slice(),e},i.release=function(){for(var e=c(this.l),t=e.next();!t.done;t=e.next())t.value.release();this.l=[]},i.find=function(e){for(var t=0,n=c(this.l),r=n.next();!r.done;r=n.next()){var i=(r=r.value).find(e);if(null!=i)return i+t;t+=r.i+r.g.length}return null},i.get=function(e){for(var t=0,n=c(this.l),r=n.next();!r.done;r=n.next()){var i=(r=r.value).get(e-t);if(i)return i;t+=r.i+r.g.length}return null},i.offset=function(){},i.Sc=function(){},i.Gb=function(){},i.kc=function(){},i.wb=function(){},i.Nd=function(){},z("shaka.media.MetaSegmentIndex",Ds),Ds.prototype.updateEvery=Ds.prototype.Nd,Ds.prototype.fit=Ds.prototype.wb,Ds.prototype.mergeAndEvict=Ds.prototype.kc,Ds.prototype.evict=Ds.prototype.Gb,Ds.prototype.merge=Ds.prototype.Sc,Ds.prototype.offset=Ds.prototype.offset,Ds.prototype.get=Ds.prototype.get,Ds.prototype.find=Ds.prototype.find,Ds.prototype.release=Ds.prototype.release,Ps.prototype.release=function(){this.h&&(this.h.stop(),this.h=null),this.g=null},Ps.prototype.set=function(e){this.i=e,Os(this)},Ps.prototype.td=function(){return this.g.td()},Us.prototype.release=function(){this.i.stop();for(var e=c(this.g),t=e.next();!t.done;t=e.next())t.value.release();this.g.clear()},v(js,ee),js.prototype.release=function(){this.g.clear(),ee.prototype.release.call(this)},js.prototype.j=function(e){for(var t=c(this.g.values()),n=t.next();!n.done;n=t.next()){e:{for(var r=(n=n.value).Uc,i=r.length-1;0<=i;i--){var a=r[i];if(a.position<=e){r=a.we;break e}}r=null}if((i=r)&&(i=!((i=n.Af)===r||i&&r&&i.bandwidth==r.bandwidth&&i.audioSamplingRate==r.audioSamplingRate&&i.codecs==r.codecs&&i.contentType==r.contentType&&i.frameRate==r.frameRate&&i.height==r.height&&i.mimeType==r.mimeType&&i.channelsCount==r.channelsCount&&i.pixelAspectRatio==r.pixelAspectRatio&&i.width==r.width)),i)e:{if(i=e,a=r.contentType,(a=this.h()[a])&&0<a.length){var o=a[a.length-1].end;if(i>=a[0].start&&i<o){i=!0;break e}}i=!1}i&&(n.Af=r,JSON.stringify(r),n=new G("qualitychange",new Map([["quality",r],["position",e]])),this.dispatchEvent(n))}},v(Fs,ee),Fs.prototype.release=function(){this.g.clear(),this.h.stop(),ee.prototype.release.call(this)},v(zs,ee),zs.prototype.release=function(){this.i=null,this.g.clear(),this.h.release(),this.h=null,ee.prototype.release.call(this)},zs.prototype.j=function(e,t){for(var n=c(this.i.g),r=n.next();!r.done;r=n.next()){r=r.value;var i=this.g.get(r),a=e<r.startTime?Vs:e>r.endTime?Hs:Ks;this.g.set(r,a);for(var o=c(this.l),s=o.next();!s.done;s=o.next())(s=s.value).Vb==i&&s.Ub==a&&s.Kb(r,t)}};var Vs=1,Ks=2,Hs=3;function Ws(e,t,n,r,i){return e=Or(e,r,i),0==t&&null==n||(e.headers.Range=n?"bytes="+t+"-"+n:"bytes="+t+"-"),e}function Xs(e,t){var n=this;this.g=t,this.m=e,this.i=null,this.C=1,this.s=this.l=null,this.G=!1,this.j=new Map,this.F=!1,this.H=null,this.B=!1,this.h=new Vr((function(){return function(e){var t,n,r,i;return L((function(a){if(1==a.g){for(t=[],n=c(e.j.values()),r=n.next();!r.done;r=n.next())ou(i=r.value),t.push(su(i));return w(a,Promise.all(t),2)}e.j.clear(),e.g=null,e.m=null,e.i=null,T(a)}))}(n)}))}function qs(e,t){var n=e.j.get("video");if(n){var r=n.stream;r&&(t?(t=r.trickModeVideo)&&!n.Sb&&(Qs(e,t,!1,0,!1),n.Sb=r):(r=n.Sb)&&(n.Sb=null,Qs(e,r,!0,0,!1)))}}function Ys(e,t,n,r,i,a){n=void 0!==n&&n,r=void 0===r?0:r,i=void 0!==i&&i,a=void 0!==a&&a,e.l=t,e.F&&(t.video&&Qs(e,t.video,n,r,i,a),t.audio&&Qs(e,t.audio,n,r,i,a))}function $s(e,t){e.s=t,e.F&&Qs(e,t,!0,0,!1)}function Qs(e,t,n,r,i,a){var o=e.j.get(t.type);o||t.type!=ke?o&&(o.Sb&&(t.trickModeVideo?(o.Sb=t,t=t.trickModeVideo):o.Sb=null),o.stream!=t||i)&&(t.type==ke&&Ho(e.g.U,pn(t.mimeType,t.codecs),e.m.sequenceMode),o.stream.closeSegmentIndex&&o.stream.closeSegmentIndex(),o.stream=t,o.qa=null,o.pf=!!a,n&&(o.Cc?o.Pd=!0:o.Ia?(o.Eb=!0,o.qd=r,o.Pd=!0):(ou(o),iu(e,o,!0,r).catch((function(t){e.g&&e.g.onError(t)})))),function(e,t){var n,r;return L((function(i){if(1==i.g)return t.Ka?(n=t.stream,r=t.Ka,n.segmentIndex?i.D(2):w(i,n.createSegmentIndex(),2)):i.return();if(t.Ka!=r||t.stream!=n)return i.return();var a=e.g.vd(),o=qo(e.g.U,t.type),s=t.stream.segmentIndex.find(t.Ga?t.Ga.endTime:a),u=null==s?null:t.stream.segmentIndex.get(s);s=u&&u.Ba?u.Ba-u.Ta:null,u&&!s&&(s=(u.endTime-u.getStartTime())*(t.stream.bandwidth||0)/8),s?((u=u.h)&&(s+=(u.Ba?u.Ba-u.Ta:null)||0),a=8*s/(u=e.g.getBandwidthEstimate())<(o||0)-a-Math.max(e.m.minBufferTime||0,e.i.rebufferingGoal)||t.Ka.h.g>s):a=!1,a&&t.Ka.abort(),T(i)}))}(e,o).catch((function(t){e.g&&e.g.onError(t)}))):function(e,t){var n,r,i,a;L((function(o){switch(o.g){case 1:return n=Ce,A(o,2),w(o,Qo(e.g.U,n.ha),4);case 4:E(o,3);break;case 2:r=I(o),e.g&&e.g.onError(r);case 3:i=pn(t.mimeType,t.codecs),Ho(e.g.U,i,e.m.sequenceMode),(e.g.U.m.isTextVisible()||e.i.alwaysStreamText)&&(a=Zs(t),e.j.set(n.ha,a),au(e,a,0)),T(o)}}))}(e,t)}function Js(e,t){t.Cc||t.Eb||(t.Ia?(t.Eb=!0,t.qd=0):null==Xo(e.g.U,t.type)?null==t.eb&&au(e,t,0):(ou(t),iu(e,t,!1,0).catch((function(t){e.g&&e.g.onError(t)}))))}function Zs(e){return{stream:e,type:e.type,qa:null,Ga:null,yd:null,se:null,re:null,qe:null,Sb:null,endOfStream:!1,Ia:!1,eb:null,Eb:!1,qd:0,Pd:!1,Cc:!1,Xc:!0,ye:!1,Ee:!1,Mc:!1,Ka:null}}function eu(t,n){var r,i,a,o,s;return L((function(u){switch(u.g){case 1:if(Kr(t.h),n.Ia||null==n.eb||n.Cc)return u.return();if(n.eb=null,!n.Eb){u.D(2);break}return w(u,iu(t,n,n.Pd,n.qd),3);case 3:return u.return();case 2:if(n.stream.segmentIndex){u.D(4);break}return r=n.stream,w(u,n.stream.createSegmentIndex(),5);case 5:if(r!=n.stream)return r.closeSegmentIndex&&r.closeSegmentIndex(),n.Ia||n.eb||au(t,n,0),u.return();case 4:A(u,6),i=function(t,n){if(nu(n))return function(e,t){var n=qo(e,"video")||0;wn(e.g,t,n)}(t.g.U,n.stream.originalId||""),null;n.type==ke&&function(e){e.g&&wn(e.g,"",0)}(t.g.U);var r=t.g.vd(),i=n.Ga?n.Ga.endTime:r,a=function(e,t,n){return t==ke?null==(e=e.g).h||e.h<n?0:e.h-Math.max(n,e.g):Mo(e=Yo(e,t),n)}(t.g.U,n.type,r),o=Math.max(t.m.minBufferTime||0,t.i.rebufferingGoal,t.i.bufferingGoal)*t.C,s=t.m.presentationTimeline.getDuration()-i,u=qo(t.g.U,n.type);if(1e-6>s&&u)return n.endOfStream=!0,"video"==n.type&&(t=t.j.get(ke))&&nu(t)&&(t.endOfStream=!0),null;if(n.endOfStream=!1,a>=o)return t.i.updateIntervalSeconds/2;if(a=function(e,t,n,r){if(t.qa)return t.qa.current();if(t.Ga||r)return n=t.Ga?t.Ga.endTime:r,t.ye=!0,t.qa=t.stream.segmentIndex.bc(n),t.qa&&t.qa.next().value;e=e.i.inaccurateManifestTolerance,r=Math.max(n-e,0);var i=null;return e&&(t.qa=t.stream.segmentIndex.bc(r),i=t.qa&&t.qa.next().value),i||(t.qa=t.stream.segmentIndex.bc(n),i=t.qa&&t.qa.next().value),i}(t,n,r,u),!a)return t.i.updateIntervalSeconds;for(o=1/0,s=c(s=Array.from(t.j.values())),u=s.next();!u.done;u=s.next())nu(u=u.value)||u.qa&&!u.qa.current()||(o=Math.min(o,u.Ga?u.Ga.endTime:r));return i>=o+t.m.presentationTimeline.g?t.i.updateIntervalSeconds:(function(t,n,r,i){var a,o,s,u,l,c,d,h,f,p,g,m,v,y;return L((function(b){switch(b.g){case 1:if(a=Ce,o=n.stream,s=n.qa,n.Ia=!0,A(b,2),2==i.ec())throw new be(1,1,1011);return w(b,function(e,t,n){var r,i,a,o,s,u,l,c;return L((function(d){return r=[],i=Math.max(0,n.appendWindowStart-.1),a=n.appendWindowEnd+.01,(o=n.timestampOffset)==t.se&&i==t.re&&a==t.qe||(s=function(){var n;return L((function(r){if(1==r.g)return A(r,2),t.re=i,t.qe=a,t.se=o,w(r,function(e,t,n,r,i,a){return L((function(o){return t==Ce.ha?(a||(e.g.B=n),function(e,t,n){e.l=t,e.m=n}(e.g,r,i),o.return()):w(o,Promise.all([rs(e,t,(function(){return es(e,t)})),a?Promise.resolve():rs(e,t,(function(){return ts(e,t,n)})),rs(e,t,(function(){e.h[t].appendWindowStart=0,e.h[t].appendWindowEnd=i,e.h[t].appendWindowStart=r,ns(e,t)}))]),0)}))}(e.g.U,t.type,o,i,a,e.m.sequenceMode),4);if(2!=r.g)return E(r,0);throw n=I(r),t.re=null,t.qe=null,t.se=null,n}))},r.push(s())),!function(e,t){return e&&t?e.Jc()==t.Jc()&&e.Fc()==t.Fc()&&et(e.Pa(),t.Pa()):e==t}(n.h,t.yd)&&(t.yd=n.h)&&(u=ru(e,t,n.h),l=function(){var r,i,a;return L((function(o){switch(o.g){case 1:return A(o,2),w(o,u,4);case 4:return r=o.h,Kr(e.h),(new ei).box("moov",ti).box("trak",ti).box("mdia",ti).S("mdhd",(function(e){e=po(e.reader||0,e.version||0),n.h.timescale=e.timescale})).parse(r),i=t.stream.closedCaptions&&0<t.stream.closedCaptions.size,w(o,e.g.tf(t.type,r),5);case 5:return w(o,$o(e.g.U,t.type,r,null,i),6);case 6:E(o,0);break;case 2:throw a=I(o),t.yd=null,a}}))},e.g.oh(n.startTime,n.h),r.push(l())),e.m.sequenceMode&&(c=t.Ga?t.Ga.m:null,n.m!=c||t.ye)&&(t.ye=!1,r.push(function(e,t,n){return L((function(r){return t==Ce.ha?r.return():(rs(e,t,(function(){return es(e,t)})),w(r,rs(e,t,(function(){return ts(e,t,n)})),0))}))}(e.g.U,t.type,n.startTime))),w(d,Promise.all(r),0)}))}(t,n,i),4);case 4:return Kr(t.h),t.B?b.return():(u="video/mp4"==o.mimeType||"audio/mp4"==o.mimeType,l=e.ReadableStream,t.i.lowLatencyMode&&l&&u&&!i.l?(d=new Uint8Array(0),f=h=!1,p=function(e){var a,s,u;return L((function(l){return h?l.return():(f=!0,Kr(t.h),t.B?l.return():(d=function(e,t){var n=new Uint8Array(e.length+t.length);return n.set(e),n.set(t,e.length),n}(d,e),a=!1,s=0,(new ei).box("mdat",(function(e){s=e.size+e.start,a=!0})).parse(d,!1,!0),a?(u=d.subarray(0,s),d=d.subarray(s),w(l,tu(t,n,r,o,i,u),0)):l.D(0)))}))},w(b,ru(t,n,i,p),11)):w(b,ru(t,n,i),7));case 7:if(c=b.h,Kr(t.h),t.B)return b.return();if(!i.l){b.D(8);break}return w(b,function(t,n,r){var i,a,o,s;return L((function(u){if(1==u.g)return(i=n.l).cryptoKey?u.D(2):w(u,i.fetchKey(),3);if(!(a=i.iv))for(a=Et(new ArrayBuffer(16)),o=i.firstMediaSequenceNumber+r.g,s=a.byteLength-1;0<=s;s--)a[s]=255&o,o>>=8;return u.return(e.crypto.subtle.decrypt({name:"AES-CBC",iv:a},i.cryptoKey,t))}))}(c,i,s),9);case 9:c=b.h;case 8:return Kr(t.h),n.Eb?(n.Ia=!1,au(t,n,0),b.return()):w(b,tu(t,n,r,o,i,c),6);case 11:if(g=b.h,f){b.D(6);break}return h=!0,Kr(t.h),t.B?b.return():n.Eb?(n.Ia=!1,au(t,n,0),b.return()):w(b,tu(t,n,r,o,i,g),6);case 6:if(Kr(t.h),t.B)return b.return();n.Ga=i,s.next(),n.Ia=!1,n.Ee=!1,m=t.g.U.jb(),v=m[n.type],JSON.stringify(v),n.Eb||t.g.Ce(i.startTime,i.endTime,n.type),au(t,n,0),E(b,0);break;case 2:if(y=I(b),Kr(t.h,y),t.B)return b.return();if(n.Ia=!1,7001==y.code)n.Ia=!1,ou(n),au(t,n,0),b.D(0);else if(n.type==a.ha&&t.i.ignoreTextStreamFailures)t.j.delete(a.ha),b.D(0);else{if(3017!=y.code)return n.Mc=!0,y.severity=2,w(b,uu(t,y),0);(function(e,t,n){if(!Array.from(e.j.values()).some((function(e){return e!=t&&e.Ee}))){var r=Math.round(100*e.C);if(20<r)e.C-=.2;else{if(!(4<r))return t.Mc=!0,e.B=!0,void e.g.onError(n);e.C-=.04}t.Ee=!0}au(e,t,4)})(t,n,y),b.D(0)}}}))}(t,n,r,a).catch((function(){})),null)}(t,n),null!=i&&(au(t,n,i),n.Mc=!1),E(u,7);break;case 6:return a=I(u),w(u,uu(t,a),8);case 8:return u.return();case 7:if(o=Array.from(t.j.values()),!t.F||!o.every((function(e){return e.endOfStream}))){u.D(0);break}return w(u,t.g.U.endOfStream(),10);case 10:Kr(t.h),0!=(s=t.g.U.getDuration())&&s<t.m.presentationTimeline.getDuration()&&t.m.presentationTimeline.Sa(s),T(u)}}))}function tu(e,t,n,r,i,a){var o,s,u,l,c,d;return L((function(h){switch(h.g){case 1:return o=r.closedCaptions&&0<r.closedCaptions.size,u=null!=r.emsgSchemeIdUris&&0<r.emsgSchemeIdUris.length||e.i.dispatchAllEmsgBoxes,l=e.i.parsePrftBox&&!e.G,(u||l)&&(s=new ei),u&&s.S("emsg",(function(t){var n=r.emsgSchemeIdUris;if(0===t.version)var a=t.reader.Vc(),o=t.reader.Vc(),s=t.reader.N(),u=t.reader.N(),l=t.reader.N(),c=t.reader.N(),d=i.startTime+u/s;else s=t.reader.N(),u=(d=t.reader.Cb()/s+i.timestampOffset)-i.startTime,l=t.reader.N(),c=t.reader.N(),a=t.reader.Vc(),o=t.reader.Vc();t=t.reader.Bb(t.reader.W.byteLength-t.reader.ma()),(n&&n.includes(a)||e.i.dispatchAllEmsgBoxes)&&("urn:mpeg:dash:event:2012"==a?e.g.ph():"https://aomedia.org/emsg/ID3"==a?(n=Po(t)).length&&i&&e.g.qh([{cueTime:i.startTime,data:t,frames:n,dts:i.startTime,pts:i.startTime}],0,i.endTime):(n=new G("emsg",n=(new Map).set("detail",{startTime:d,endTime:d+l/s,schemeIdUri:a,value:o,timescale:s,presentationTimeDelta:u,eventDuration:l,id:c,messageData:t})),e.g.onEvent(n)))})),l&&s.S("prft",(function(t){e:{if(!e.G&&i.h.timescale){t.reader.N();var n=t.reader.N();if(n=1e3*n+t.reader.N()/Math.pow(2,32)*1e3,0===t.version)var r=t.reader.N();else try{r=t.reader.Cb()}catch(a){e.G=!0,r=void 0;break e}t=new Date(new Date(Date.UTC(1900,0,1,0,0,0)).getTime()+n).getTime(),r=new G("prft",r=(new Map).set("detail",{wallClockTime:t,programStartDate:new Date(t-r/i.h.timescale*1e3)})),e.g.onEvent(r),e.G=!0}r=void 0}return r})),(u||l)&&s.parse(a),w(h,function(e,t,n){var r,i,a;return L((function(o){if(1==o.g)return r=Math.max(e.i.bufferBehind,e.m.presentationTimeline.g),null==(i=Xo(e.g.U,t.type))||.01>=(a=n-i-r)?o.return():w(o,e.g.U.remove(t.type,i,i+a),2);Kr(e.h),T(o)}))}(e,t,n),2);case 2:return Kr(e.h),c=t.Xc,t.Xc=!1,d=t.pf,t.pf=!1,w(h,e.g.tf(t.type,a),3);case 3:return w(h,$o(e.g.U,t.type,a,i,o,c,d),4);case 4:Kr(e.h),T(h)}}))}function nu(e){return e&&e.type==ke&&("application/cea-608"==e.stream.mimeType||"application/cea-708"==e.stream.mimeType)}function ru(e,t,n,r){var i,a,o,s,u;return L((function(l){return 1==l.g?(i=Fr,a=Ws(n.Pa(),n.Ta,n.Ba,e.i.retryParameters,r),o=t.stream,e.g.modifySegmentRequest(a,{type:o.type,init:n instanceof Ao,duration:n.endTime-n.startTime,mimeType:o.mimeType,codecs:o.codecs,bandwidth:o.bandwidth}),s=e.g.Ob.request(i,a),t.Ka=s,w(l,s.promise,2)):(u=l.h,t.Ka=null,l.return(u.data))}))}function iu(e,t,n,r){var i,a;return L((function(o){return 1==o.g?(t.Eb=!1,t.Pd=!1,t.qd=0,t.Cc=!0,t.Ga=null,t.yd=null,t.qa=null,r?(i=e.g.vd(),a=e.g.U.getDuration(),w(o,e.g.U.remove(t.type,i+r,a),3)):w(o,Qo(e.g.U,t.type),4)):3!=o.g?(Kr(e.h),n?w(o,e.g.U.flush(t.type),3):o.D(3)):(Kr(e.h),t.Cc=!1,t.endOfStream=!1,t.Ia||t.eb||au(e,t,0),void T(o))}))}function au(e,t,n){var r=t.type;(r!=ke||e.j.has(r))&&(t.eb=new Mt((function(){var n;return L((function(r){return 1==r.g?(A(r,2),w(r,eu(e,t),4)):2!=r.g?E(r,0):(n=I(r),e.g&&e.g.onError(n),void T(r))}))})).R(n))}function ou(e){null!=e.eb&&(e.eb.stop(),e.eb=null)}function su(e){return L((function(t){return e.Ka?w(t,e.Ka.abort(),0):t.D(0)}))}function uu(e,t){return L((function(n){if(1==n.g)return w(n,Ar(e.H),2);Kr(e.h),e.g.onError(t),t.handled||e.i.failureCallback(t),T(n)}))}function lu(e,t){var n=Zl(),r=this;this.j=t,this.i=e,this.l=n,this.s=null,this.m=[],this.h=this.g=null,this.C=Promise.resolve().then((function(){return function(e){return L((function(t){if(e.B.g)t=t.D(0);else{if(0==e.m.length||e.g&&!e.g.Jb)var n=!1;else{e.g&&(e.g.bb.Qb(),e.g=null);var r=(n=e.m.shift()).create(e.l);r?(n.bb.mc(),e.g={node:r.node,payload:r.payload,Jb:r.Jb,bb:n.bb}):n.bb.Gd(),n=!0}n?n=Promise.resolve():e.g?n=function(e){var t,n;return L((function(r){switch(r.g){case 1:return e.i=e.j.Sg(e.i,e.l,e.g.node,e.g.payload),A(r,2),e.h=e.j.xg(e.i,e.l,e.g.payload),w(r,e.h.promise,4);case 4:e.h=null,e.i==e.g.node&&(e.g.bb.Ed(),e.g=null),E(r,0);break;case 2:return 7001==(t=I(r)).code?e.g.bb.Qb():e.g.bb.onError(t),e.g=null,e.h=null,n=e,w(r,e.j.handleError(e.l,t),5);case 5:n.i=r.h,T(r)}}))}(e):(e.j.nh(e.i),e.s=new Ct,n=e.s),t=w(t,n,1)}return t}))}(r)})),this.B=new Vr((function(){return function(e){var t,n;return L((function(r){if(1==r.g)return e.h&&e.h.abort(),du(e),w(r,e.C,2);for(e.g&&e.g.bb.Qb(),t=c(e.m),n=t.next();!n.done;n=t.next())n.value.bb.Qb();e.g=null,e.m=[],e.j=null,T(r)}))}(r)}))}function cu(e,t){var n={mc:function(){},Ed:function(){},Qb:function(){},onError:function(){},Gd:function(){},uj:function(){}};return e.m.push({create:t,bb:n}),e.h&&e.h.abort(),du(e),n}function du(e){e.s&&(e.s.resolve(),e.s=null)}function hu(e){var t=[],n=700<=e.fontWeight,r="italic"==e.fontStyle,i=e.textDecoration.includes("underline");return n&&t.push("b"),r&&t.push("i"),i&&t.push("u"),n=t.reduce((function(e,t){return e+"<"+t+">"}),""),t=t.reduceRight((function(e,t){return e+"</"+t+">"}),""),e.lineBreak?"\n":e.nestedCues.length?e.nestedCues.map(hu).join(""):n+e.payload+t}function fu(e,t){for(var n=(e=c(e)).next();!n.done;n=e.next())if((n=n.value).isContainer)fu(n.nestedCues,t);else{var r=n.clone();r.nestedCues=[],r.payload=hu(n),t.push(r)}return t}function pu(e){this.g=null;for(var t=c(Array.from(e.textTracks)),n=t.next();!n.done;n=t.next())(n=n.value).mode="disabled","Shaka Player TextTrack"==n.label&&(this.g=n);this.g||(this.g=e.addTextTrack("subtitles","Shaka Player TextTrack")),this.g.mode="hidden"}function gu(e){if(e.startTime>=e.endTime)return null;var t=new VTTCue(e.startTime,e.endTime,e.payload);t.lineAlign=e.lineAlign,t.positionAlign=e.positionAlign,e.size&&(t.size=e.size);try{t.align=e.textAlign}catch(n){}return"center"==e.textAlign&&"center"!=t.align&&(t.align="middle"),"vertical-lr"==e.writingMode?t.vertical="lr":"vertical-rl"==e.writingMode&&(t.vertical="rl"),1==e.lineInterpretation&&(t.snapToLines=!1),null!=e.line&&(t.line=e.line),null!=e.position&&(t.position=e.position),t}function mu(e,t){var n=e.mode;e.mode="showing"==n?"showing":"hidden";for(var r=c(Array.from(e.cues)),i=r.next();!i.done;i=r.next())(i=i.value)&&t(i)&&e.removeCue(i);e.mode=n}function vu(){}function yu(e){return document.createElement(e)}function bu(){var e=document.createElement("button");return e.setAttribute("type","button"),e}function xu(e){for(;e.firstChild;)e.removeChild(e.firstChild)}function wu(t,n){var r=this;this.j=!1,this.i=[],this.F=t,this.m=n,this.g=yu("div"),this.g.classList.add("shaka-text-container"),this.g.style.textAlign="center",this.g.style.display="flex",this.g.style.flexDirection="column",this.g.style.alignItems="center",this.g.style.justifyContent="flex-end",this.m.appendChild(this.g),this.C=new Rt((function(){Su(r)})).ea(.25),this.h=new Map,this.B=new Hr,this.B.o(document,"fullscreenchange",(function(){Su(r,!0)})),this.l=null,"ResizeObserver"in e&&(this.l=new ResizeObserver((function(){Su(r,!0)})),this.l.observe(this.g)),this.s=new Map}function Tu(e,t){for(;null!=t;){if(t==e.g)return!0;t=t.parentElement}return!1}function Au(e,t,n,r,i){for(var a=!1,o=[],s=[],u=(t=c(t)).next();!u.done;u=t.next()){u=u.value,i.push(u);var l=e.h.get(u),d=u.startTime<=r&&u.endTime>r,h=l?l.gg:null;l&&(o.push(l.je),l.Wc&&o.push(l.Wc),d||(a=!0,e.h.delete(u),l=null)),d&&(s.push(u),l?Tu(e,h)||(a=!0):(Eu(e,u,i),h=(l=e.h.get(u)).gg,a=!0)),0<u.nestedCues.length&&h&&Au(e,u.nestedCues,h,r,i),i.pop()}if(a){for(i=(r=c(o)).next();!i.done;i=r.next())(i=i.value).parentElement&&i.parentElement.removeChild(i);for(s.sort((function(e,t){return e.startTime!=t.startTime?e.startTime-t.startTime:e.endTime-t.endTime})),u=(s=c(s)).next();!u.done;u=s.next())(r=e.h.get(u.value)).Wc?(n.appendChild(r.Wc),r.Wc.appendChild(r.je)):n.appendChild(r.je)}}function Su(e,t){if(e.g){var n=e.F.currentTime;if(!e.j||void 0!==t&&t){for(var r=(t=c(e.s.values())).next();!r.done;r=t.next())xu(r.value);xu(e.g),e.h.clear(),e.s.clear()}if(e.j){t=new Map;for(var i=(r=c(e.h.keys())).next();!i.done;i=r.next())i=i.value,t.set(i,e.h.get(i));Au(e,e.i,e.g,n,[])}}}function Eu(e,t,n){var r=1<n.length,i=r?"span":"div";t.lineBreak&&(i="br"),r=!r&&0<t.nestedCues.length;var a=yu(i);if("br"!=i&&function(e,t,n,r,i){var a=t.style,o=0==n.nestedCues.length,s=1<r.length;a.whiteSpace="pre-wrap";var u=n.payload.replace(/\s+$/g,(function(e){return"".repeat(e.length)}));if(a.webkitTextStrokeColor=n.textStrokeColor,a.webkitTextStrokeWidth=n.textStrokeWidth,a.color=n.color,a.direction=n.direction,a.opacity=n.opacity,a.paddingLeft=Iu(n.linePadding,n,e.m),a.paddingRight=Iu(n.linePadding,n,e.m),a.textShadow=n.textShadow,n.backgroundImage)a.backgroundImage="url('"+n.backgroundImage+"')",a.backgroundRepeat="no-repeat",a.backgroundSize="contain",a.backgroundPosition="center",a.width="100%",a.height="100%";else{if(n.nestedCues.length)var l=t;else l=yu("span"),t.appendChild(l);n.border&&(l.style.border=n.border),i||((t=function(e,t){for(var n=e.length-1;0<=n;n--){var r=t(e[n]);if(r||0===r)return r}return null}(r,(function(e){return e.backgroundColor})))?l.style.backgroundColor=t:u&&(l.style.backgroundColor="rgba(0, 0, 0, 0.8)")),u&&(l.textContent=u)}s&&!r[r.length-1].isContainer?a.display="inline":(a.display="flex",a.flexDirection="column",a.alignItems="center",a.justifyContent="before"==n.displayAlign?"flex-start":"center"==n.displayAlign?"center":"flex-end"),o||(a.margin="0"),a.fontFamily=n.fontFamily,a.fontWeight=n.fontWeight.toString(),a.fontStyle=n.fontStyle,a.letterSpacing=n.letterSpacing,a.fontSize=Iu(n.fontSize,n,e.m),null!=n.line&&1==n.lineInterpretation&&(a.position="absolute",n.writingMode==lt?(a.width="100%",n.lineAlign==dt?a.top=n.line+"%":"end"==n.lineAlign&&(a.bottom=100-n.line+"%")):"vertical-lr"==n.writingMode?(a.height="100%",n.lineAlign==dt?a.left=n.line+"%":"end"==n.lineAlign&&(a.right=100-n.line+"%")):(a.height="100%",n.lineAlign==dt?a.right=n.line+"%":"end"==n.lineAlign&&(a.left=100-n.line+"%"))),a.lineHeight=n.lineHeight,null!=n.position&&(n.writingMode==lt?a.paddingLeft=n.position:a.paddingTop=n.position),"line-left"==n.positionAlign?a.cssFloat="left":"line-right"==n.positionAlign&&(a.cssFloat="right"),a.textAlign=n.textAlign,a.textDecoration=n.textDecoration.join(" "),a.writingMode=n.writingMode,"writingMode"in document.documentElement.style&&a.writingMode==n.writingMode||(a.webkitWritingMode=n.writingMode),n.size&&(n.writingMode==lt?a.width=n.size+"%":a.height=n.size+"%")}(e,a,t,n,r),n=null,t.region&&t.region.id)if(i=(n=t.region).id+"_"+n.width+"x"+n.height+(n.heightUnits==bt?"%":"px")+"-"+n.viewportAnchorX+"x"+n.viewportAnchorY+(n.viewportAnchorUnits==bt?"%":"px"),e.s.has(i))n=e.s.get(i);else{var o=yu("span"),s=n.heightUnits==bt?"%":"px",u=n.widthUnits==bt?"%":"px",l=n.viewportAnchorUnits==bt?"%":"px";o.id="shaka-text-region---"+i,o.classList.add("shaka-text-region"),o.style.height=n.height+s,o.style.width=n.width+u,o.style.position="absolute",o.style.top=n.viewportAnchorY+l,o.style.left=n.viewportAnchorX+l,o.style.display="flex",o.style.flexDirection="column",o.style.alignItems="center",o.style.justifyContent="before"==t.displayAlign?"flex-start":"center"==t.displayAlign?"center":"flex-end",e.s.set(i,o),n=o}i=a,r&&((i=yu("span")).classList.add("shaka-text-wrapper"),i.style.backgroundColor=t.backgroundColor,a.appendChild(i)),e.h.set(t,{je:a,gg:i,Wc:n})}function Iu(e,t,n){var r=(r=new RegExp(/(\d*\.?\d+)([a-z]+|%+)/).exec(e))?{value:Number(r[1]),unit:r[2]}:null;if(!r)return e;var i=r.value;switch(r.unit){case"%":return i/100*n.clientHeight/t.cellResolution.rows+"px";case"c":return n.clientHeight*i/t.cellResolution.rows+"px";default:return e}}function ku(e,t){this.h=e,this.g=t,this.j="",this.s=void 0,this.i=!1,this.m=!0,this.l=!1}function Cu(e,t,n){try{if(e.g.enabled){var r={d:1e3*n.duration,st:e.h.T()?zu:Fu};r.ot=function(e){var t=e.type;if(e.init)return Uu;if("video"==t)return e.codecs.includes(",")?Ou:Pu;if("audio"==t)return Du;if("text"==t)return"application/mp4"===e.mimeType?ju:Bu}(n);var i=r.ot===Pu||r.ot===Du||r.ot===Ou||r.ot===ju;i&&(r.bl=function(e,t){if(t=e.h.jb()[t],!t.length)return NaN;var n=e.h.getCurrentTime();return(e=t.find((function(e){return e.start<=n&&e.end>=n})))?1e3*(e.end-n):NaN}(e,n.type)),n.bandwidth&&(r.br=n.bandwidth/1e3),i&&r.ot!==ju&&(r.tb=function(e,t){var n=e.h.Qa();if(!n.length)return NaN;e=n[0];for(var r=(n=c(n)).next();!r.done;r=n.next())"variant"===(r=r.value).type&&r.bandwidth>e.bandwidth&&(e=r);switch(t){case Pu:return e.videoBandwidth||NaN;case Du:return e.audioBandwidth||NaN;default:return e.bandwidth}}(e,r.ot)/1e3),Mu(e,t,r)}}catch(a){q("CMCD_SEGMENT_ERROR","Could not generate segment CMCD data.",a)}}function _u(t){return t.j||(t.j=t.g.sessionId||e.crypto.randomUUID()),{v:1,sf:t.s,sid:t.j,cid:t.g.contentId,mtp:t.h.getBandwidthEstimate()/1e3}}function Mu(e,t,n){n=void 0===n?{}:n;var r=void 0===r?e.g.useHeaders:r;if(e.g.enabled){Object.assign(n,_u(e)),n.pr=e.h.xb();var i=n.ot===Pu||n.ot===Ou;if(e.l&&i&&(n.bs=!0,n.su=!0,e.l=!1),null==n.su&&(n.su=e.m),r)e=function(e){for(var t=Object.keys(e),n={},r=["Object","Request","Session","Status"],i=[{},{},{},{}],a={br:0,d:0,ot:0,tb:0,bl:1,dl:1,mtp:1,nor:1,nrr:1,su:1,cid:2,pr:2,sf:2,sid:2,st:2,v:2,bs:3,rtp:3},o=(t=c(t)).next();!o.done;o=t.next())o=o.value,i[null!=a[o]?a[o]:1][o]=e[o];for(e=0;e<i.length;e++)(a=Ru(i[e]))&&(n["CMCD-"+r[e]]=a);return n}(n),Object.keys(e).length&&Object.assign(t.headers,e);else{var a=Ru(n);a&&(t.uris=t.uris.map((function(e){return Nu(e,a)})))}}}function Ru(e){function t(e){return 100*n(e/100)}function n(e){return Math.round(e)}for(var r,i=[],a={br:n,d:n,bl:t,dl:t,mtp:t,nor:function(e){return encodeURIComponent(e)},rtp:t,tb:n},o=Object.keys(e||{}).sort(),s=(o=c(o)).next();!s.done;s=o.next()){var u=e[s=s.value];if(!(r=u,Number.isNaN(r)||null==r||""===r||!1===r||"v"===s&&1===u||"pr"==s&&1===u)){var l=a[s];l&&(u=l(u));var d;d="string"===(l=typeof u)&&"ot"!==s&&"sf"!==s&&"st"!==s?s+"="+JSON.stringify(u):"boolean"===l?s:"symbol"===l?s+"="+u.description:s+"="+u,i.push(d)}}return i.join(",")}function Nu(e,t){return!t||e.includes("offline:")?e:((e=new ae(e)).g.set("CMCD",t),e.toString())}(i=Xs.prototype).destroy=function(){return this.h.destroy()},i.configure=function(e){this.i=e,this.H=new Tr({maxAttempts:Math.max(e.retryParameters.maxAttempts,2),baseDelay:e.retryParameters.baseDelay,backoffFactor:e.retryParameters.backoffFactor,fuzzFactor:e.retryParameters.fuzzFactor,timeout:0,stallTimeout:0,connectionTimeout:0},!0)},i.start=function(){var e=this;return L((function(t){if(1==t.g)return w(t,function(e){var t,n,r,i,a,o,s,u,l,d;return L((function(h){if(1==h.g){if(t=Ce,!e.l)throw new be(2,5,5006);return n=new Map,r=new Set,e.l.audio&&(n.set(t.jd,e.l.audio),r.add(e.l.audio)),e.l.video&&(n.set(t.Ma,e.l.video),r.add(e.l.video)),e.s&&(n.set(t.ha,e.s),r.add(e.s)),i=e.g.U,a=e.i.forceTransmux,w(h,i.init(n,a,e.m.sequenceMode),2)}for(Kr(e.h),e.updateDuration(),o=c(n.keys()),s=o.next();!s.done;s=o.next())u=s.value,l=n.get(u),e.j.has(u)||(d=Zs(l),e.j.set(u,d),au(e,d,0));T(h)}))}(e),2);Kr(e.h),e.F=!0,T(t)}))},i.Xc=function(){if(this.g)for(var e=this.g.vd(),t=c(this.j.keys()),n=t.next();!n.done;n=t.next()){var r=n.value;(n=this.j.get(r)).qa=null;var i=this.g.U;if(r==ke?i=null!=(i=i.g).g&&null!=i.h&&(e>=i.g&&e<i.h):i=_o(i=Yo(i,r),e),!i){if((null!=qo(this.g.U,r)||n.Ia)&&Js(this,n),n.Ka&&(n.Ka.abort(),n.Ka=null),r===ke&&(r=this.g.U).B)for((r=r.B.g).l=0,r.h=[],r.g=[],(i=r.i).i=[],i.h=[],i.g=0,oo(r),i=(r=c(r.j.values())).next();!i.done;i=r.next())to(i.value);n.Xc=!0}}},i.updateDuration=function(){var e=this.m.presentationTimeline.getDuration();1/0>e?this.g.U.Sa(e):this.g.U.Sa(Math.pow(2,32))},lu.prototype.destroy=function(){return this.B.destroy()},(i=pu.prototype).remove=function(e,t){return!!this.g&&(mu(this.g,(function(n){return n.startTime<t&&n.endTime>e})),!0)},i.append=function(e){var t=fu(e,[]),n=[];e=this.g.cues?Array.from(this.g.cues):[];for(var r={},i=(t=c(t)).next();!i.done;r={Wb:r.Wb},i=t.next())r.Wb=i.value,e.some(function(e){return function(t){return t.startTime==e.Wb.startTime&&t.endTime==e.Wb.endTime&&t.text==e.Wb.payload}}(r))||(i=gu(r.Wb))&&n.push(i);for(r=(e=c(e=n.slice().sort((function(e,t){return e.startTime!=t.startTime?e.startTime-t.startTime:e.endTime!=t.endTime?e.endTime-t.startTime:"line"in VTTCue.prototype?n.indexOf(t)-n.indexOf(e):n.indexOf(e)-n.indexOf(t)})))).next();!r.done;r=e.next())this.g.addCue(r.value)},i.destroy=function(){return this.g&&(mu(this.g,(function(){return!0})),this.g.mode="disabled"),this.g=null,Promise.resolve()},i.isTextVisible=function(){return"showing"==this.g.mode},i.setTextVisibility=function(e){this.g.mode=e?"showing":"hidden"},z("shaka.text.SimpleTextDisplayer",pu),pu.prototype.setTextVisibility=pu.prototype.setTextVisibility,pu.prototype.isTextVisible=pu.prototype.isTextVisible,pu.prototype.destroy=pu.prototype.destroy,pu.prototype.append=pu.prototype.append,pu.prototype.remove=pu.prototype.remove,z("shaka.util.Dom",vu),vu.removeAllChildren=xu,(i=wu.prototype).append=function(e){for(var t=[].concat(d(this.i)),n={},r=(e=c(e)).next();!r.done;n={dd:n.dd},r=e.next())n.dd=r.value,t.some(function(e){return function(t){return nt(t,e.dd)}}(n))||this.i.push(n.dd);Su(this)},i.destroy=function(){this.m.removeChild(this.g),this.g=null,this.j=!1,this.i=[],this.C&&this.C.stop(),this.h.clear(),this.B&&(this.B.release(),this.B=null),this.l&&(this.l.disconnect(),this.l=null)},i.remove=function(e,t){if(!this.g)return!1;var n=this.i.length;return this.i=this.i.filter((function(n){return n.startTime<e||n.endTime>=t})),Su(this,n>this.i.length),!0},i.isTextVisible=function(){return this.j},i.setTextVisibility=function(e){this.j=e},z("shaka.text.UITextDisplayer",wu),wu.prototype.setTextVisibility=wu.prototype.setTextVisibility,wu.prototype.isTextVisible=wu.prototype.isTextVisible,wu.prototype.remove=wu.prototype.remove,wu.prototype.destroy=wu.prototype.destroy,wu.prototype.append=wu.prototype.append,z("shaka.text.WebVttGenerator",(function(){}));var Lu="m",Du="a",Pu="v",Ou="av",Uu="i",Bu="c",ju="tt",Fu="v",zu="l";function Gu(){}function Vu(e,t,n,r,i){var a,o=i in r,s=!0;for(a in t){var u=i+"."+a,l=o?r[i]:n[a];o||a in n?void 0===t[a]?void 0===l||o?delete e[a]:e[a]=Mr(l):l.constructor==Object&&t[a]&&t[a].constructor==Object?(e[a]||(e[a]=Mr(l)),u=Vu(e[a],t[a],l,r,u),s=s&&u):typeof t[a]!=typeof l||null==t[a]||"function"!=typeof t[a]&&t[a].constructor!=l.constructor?(W("Invalid config, wrong type for "+u),s=!1):("function"==typeof n[a]&&n[a].length!=t[a].length&&X("Unexpected number of arguments for "+u),e[a]=t[a]):(W("Invalid config, unrecognized key "+u),s=!1)}return s}function Ku(e,t){for(var n={},r=n,i=0,a=0;!(0>(i=e.indexOf(".",i)));)0!=i&&"\\"==e[i-1]||(r[a=e.substring(a,i).replace(/\\\./g,".")]={},r=r[a],a=i+1),i+=1;return r[e.substring(a).replace(/\\\./g,".")]=t,n}function Hu(e,t){return e&&t}function Wu(){}function Xu(e){return new ae(e=Xt(e)).ab}function qu(e,t,n){function r(e){It(a).setUint32(o,e.byteLength,!0),o+=4,a.set(Et(e),o),o+=e.byteLength}if(!n||!n.byteLength)throw new be(2,6,6015);var i;i="string"==typeof t?Yt(t,!0):t,e=Yt(e=Xt(e),!0);var a=new Uint8Array(12+e.byteLength+i.byteLength+n.byteLength),o=0;return r(e),r(i),r(n),a}function Yu(){}function $u(){var e=1/0;navigator.connection&&navigator.connection.saveData&&(e=360);var t={retryParameters:{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:3e4,stallTimeout:5e3,connectionTimeout:1e4},servers:{},clearKeys:{},advanced:{},delayLicenseRequestUntilPlayed:!1,initDataTransform:function(e,t,n){return"com.apple.fps.1_0"==n.keySystem&&"skd"==t&&(t=n.serverCertificate,e=qu(e,n=Xu(e),t)),e},logLicenseExchange:!1,updateExpirationTime:1,preferredKeySystems:[],keySystemsMapping:{},parseInbandPsshEnabled:Dt()},n={retryParameters:{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:3e4,stallTimeout:5e3,connectionTimeout:1e4},availabilityWindowOverride:NaN,disableAudio:!1,disableVideo:!1,disableText:!1,disableThumbnails:!1,defaultPresentationDelay:0,segmentRelativeVttTiming:!1,dash:{clockSyncUri:"",ignoreDrmInfo:!1,disableXlinkProcessing:!1,xlinkFailGracefully:!1,ignoreMinBufferTime:!1,autoCorrectDrift:!0,initialSegmentLimit:1e3,ignoreSuggestedPresentationDelay:!1,ignoreEmptyAdaptationSet:!1,ignoreMaxSegmentDuration:!1,keySystemsByURI:{"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:e2719d58-a985-b3c9-781a-b030af78d30e":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:79f0049a-4098-8642-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb":"com.adobe.primetime"},manifestPreprocessor:function(e){return Hu([e],e)},sequenceMode:!1},hls:{ignoreTextStreamFailures:!1,ignoreImageStreamFailures:!1,defaultAudioCodec:"mp4a.40.2",defaultVideoCodec:"avc1.42E01E",ignoreManifestProgramDateTime:!1,mediaPlaylistFullMimeType:'video/mp2t; codecs="avc1.42E01E, mp4a.40.2"',useSafariBehaviorForLive:!0,liveSegmentsDelay:3}},r={retryParameters:{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:3e4,stallTimeout:5e3,connectionTimeout:1e4},failureCallback:function(e){return Hu([e])},rebufferingGoal:2,bufferingGoal:10,bufferBehind:30,ignoreTextStreamFailures:!1,alwaysStreamText:!1,startAtSegmentBoundary:!1,gapDetectionThreshold:.5,durationBackoff:1,forceTransmux:!1,safeSeekOffset:5,stallEnabled:!0,stallThreshold:1,stallSkip:.1,useNativeHlsOnSafari:!0,inaccurateManifestTolerance:2,lowLatencyMode:!1,autoLowLatencyMode:!1,forceHTTPS:!1,preferNativeHls:!1,updateIntervalSeconds:1,dispatchAllEmsgBoxes:!1,observeQualityChanges:!1,maxDisabledTime:30,parsePrftBox:!1};(Ft("Web0S")||Pt()||Ft("CrKey"))&&(r.stallSkip=0);var i={trackSelectionCallback:function(e){return L((function(t){return t.return(e)}))},downloadSizeCallback:function(e){var t;return L((function(n){return 1==n.g?navigator.storage&&navigator.storage.estimate?w(n,navigator.storage.estimate(),3):n.return(!0):(t=n.h,n.return(t.usage+e<.95*t.quota))}))},progressCallback:function(e,t){return Hu([e,t])},usePersistentLicense:!0,numberOfParallelDownloads:5},a={drm:t,manifest:n,streaming:r,mediaSource:{sourceBufferExtraFeatures:""},offline:i,abrFactory:function(){return new rr},abr:{enabled:!0,useNetworkInformation:!0,defaultBandwidthEstimate:1e6,switchInterval:8,bandwidthUpgradeTarget:.85,bandwidthDowngradeTarget:.95,restrictions:{minWidth:0,maxWidth:1/0,minHeight:0,maxHeight:e,minPixels:0,maxPixels:1/0,minFrameRate:0,maxFrameRate:1/0,minBandwidth:0,maxBandwidth:1/0},advanced:{minTotalBytes:128e3,minBytes:16e3,fastHalfLife:2,slowHalfLife:5},restrictToElementSize:!1,restrictToScreenSize:!1,ignoreDevicePixelRatio:!1},autoShowText:3,preferredAudioLanguage:"",preferredTextLanguage:"",preferredVariantRole:"",preferredTextRole:"",preferredAudioChannelCount:2,preferredVideoCodecs:[],preferredAudioCodecs:[],preferForcedSubs:!1,preferredDecodingAttributes:[],restrictions:{minWidth:0,maxWidth:1/0,minHeight:0,maxHeight:1/0,minPixels:0,maxPixels:1/0,minFrameRate:0,maxFrameRate:1/0,minBandwidth:0,maxBandwidth:1/0},playRangeStart:0,playRangeEnd:1/0,textDisplayFactory:function(){return null},cmcd:{enabled:!1,sessionId:"",contentId:"",useHeaders:!1},lcevc:{enabled:!1,dynamicPerformanceScaling:!0,logLevel:0,drawLogo:!1}};return i.trackSelectionCallback=function(e){return L((function(t){return t.return(function(e,t){var n=e.filter((function(e){return"variant"==e.type})),r=[],i=je(t,n.map((function(e){return e.language})));i&&(r=n.filter((function(e){return De(e.language)==i}))),0==r.length&&(r=n.filter((function(e){return e.primary}))),0==r.length&&(n.map((function(e){return e.language})),r=n);var a=r.filter((function(e){return e.height&&480>=e.height}));for(a.length&&(a.sort((function(e,t){return t.height-e.height})),r=a.filter((function(e){return e.height==a[0].height}))),t=[],r.length&&(n=Math.floor(r.length/2),r.sort((function(e,t){return e.bandwidth-t.bandwidth})),t.push(r[n])),e=c(e),r=e.next();!r.done;r=e.next())(r=r.value).type!=ke&&"image"!=r.type||t.push(r);return t}(e,a.preferredAudioLanguage))}))},a}function Qu(e,t,n){var r={".drm.keySystemsMapping":"",".drm.servers":"",".drm.clearKeys":"",".drm.advanced":{distinctiveIdentifierRequired:!1,persistentStateRequired:!1,videoRobustness:"",audioRobustness:"",sessionType:"",serverCertificate:new Uint8Array(0),serverCertificateUri:"",individualizationServer:""}};return Vu(e,t,n||$u(),r,"")}function Ju(){this.g=null,this.h=[]}function Zu(e,t){if(null==e.g)e.g={timestamp:Date.now()/1e3,state:t,duration:0};else{var n=Date.now()/1e3;e.g.duration=n-e.g.timestamp,e.g.state!=t&&(e.h.push(e.g),e.g={timestamp:n,state:t,duration:0})}}function el(e,t){var n=0;e.g&&e.g.state==t&&(n+=e.g.duration);for(var r=(e=c(e.h)).next();!r.done;r=e.next())n+=(r=r.value).state==t?r.duration:0;return n}function tl(){this.i=this.h=null,this.g=[]}function nl(e,t,n){e.i!=t&&(e.i=t,e.g.push({timestamp:Date.now()/1e3,id:t.id,type:"text",fromAdaptation:n,bandwidth:null}))}function rl(){this.C=this.F=this.I=this.G=this.B=this.j=this.H=this.m=this.i=this.O=this.P=this.J=this.K=this.M=this.l=this.s=NaN,this.g=new Ju,this.h=new tl}function il(t,n){ee.call(this);var i=this;this.l=nc,this.Bd=this.g=null,this.aa=!1,this.Id=new Hr,this.gb=new Hr,this.B=new Hr,this.fb=this.i=this.Kd=this.K=this.j=this.ka=this.M=this.lf=this.V=this.sa=this.O=this.Dd=this.J=this.Za=this.F=this.I=this.m=this.H=null,this.Nc=!1,this.$e=this.C=null,this.hf=1e9,this.h=Tl(this),this.Qc={width:1/0,height:1/0},this.s=null,this.La=new vr(this.h.preferredAudioLanguage,this.h.preferredVariantRole,this.h.preferredAudioChannelCount),this.Xa=this.h.preferredTextLanguage,this.Kc=this.h.preferredTextRole,this.Ec=this.h.preferForcedSubs,this.vb=[],this.Rc=null,n&&n(this),this.H=function(e){return new Dr((function(t,n){e.C&&e.C.segmentDownloaded(t,n)}),(function(t,n,r){t=(new Map).set("headers",t).set("request",n).set("requestType",r),e.dispatchEvent(ol("downloadheadersreceived",t))}),(function(t,n,r,i){t=(new Map).set("request",t).set("error",n).set("httpResponseCode",r).set("aborted",i),e.dispatchEvent(ol("downloadfailed",t))}))}(this),this.H.Ne(this.h.streaming.forceHTTPS),this.G=null,uc&&(this.G=uc()),this.Id.o(e,"online",(function(){i.Fe()})),this.P={name:"detach"},this.X={name:"attach"},this.$={name:"unload"},this.jf={name:"manifest-parser"},this.gf={name:"manifest"},this.Ya={name:"media-source"},this.df={name:"drm-engine"},this.Z={name:"load"},this.fe={name:"src-equals-drm-engine"},this.$a={name:"src-equals"};var a=new Map;a.set(this.X,(function(e,t){return Cr(function(e,t,n){return null==t.mediaElement&&(t.mediaElement=n.mediaElement,e.gb.o(t.mediaElement,"error",(function(){var t=Gl(e);t&&Fl(e,t)}))),e.g=t.mediaElement,Promise.resolve()}(i,e,t))})),a.set(this.P,(function(e){return e.mediaElement&&(i.gb.Rb(),e.mediaElement=null),i.G&&i.G.release(),i.g=null,Cr(e=Promise.resolve())})),a.set(this.$,(function(e){return Cr(ul(i,e))})),a.set(this.Ya,(function(e){return e=function(e,t){var n,r,i,a,o;return L((function(s){if(1==s.g)return n=e.h.textDisplayFactory,r=n(),e.ef=n,i=function(e,t,n,r){return new Ko(e,t,n,r)}(t.mediaElement,r,(function(t,n,r){ll(e,t,n,r)}),e.M),i.configure(e.h.mediaSource),a=e.h.manifest,o=a.segmentRelativeVttTiming,i.J=o,w(s,i.K,2);e.I=i,T(s)}))}(i,e),Cr(e)})),a.set(this.jf,(function(e,t){return e=function(e,t,n){var r,i,a,o;return L((function(s){if(1==s.g)return t.mimeType=n.mimeType,t.uri=n.uri,r=t.uri,i=e.H,e.fb=r,a=e,w(s,na(r,i,e.h.manifest.retryParameters,t.mimeType),2);a.Kd=s.h,e.K=e.Kd(),o=Mr(e.h.manifest),n.mediaElement&&"AUDIO"===n.mediaElement.nodeName&&(o.disableVideo=!0),e.K.configure(o),T(s)}))}(i,e,t),Cr(e)})),a.set(this.gf,(function(e){return function(e,t){var n=t.uri;t=e.H,e.sa=new Fs((function(){return e.Ja()})),e.sa.addEventListener("regionadd",(function(t){t=t.region,zl(e,"timelineregionadded",t),e.G&&e.G.onDashTimedMetadata(t)})),e.ka=null,e.h.streaming.observeQualityChanges&&(e.ka=new js((function(){return e.jb()})),e.ka.addEventListener("qualitychange",(function(t){var n=t.quality;t=t.position,n=(new Map).set("mediaQuality",{bandwidth:n.bandwidth,audioSamplingRate:n.audioSamplingRate,codecs:n.codecs,contentType:n.contentType,frameRate:n.frameRate,height:n.height,mimeType:n.mimeType,channelsCount:n.channelsCount,pixelAspectRatio:n.pixelAspectRatio,width:n.width}).set("position",t),e.dispatchEvent(ol("mediaqualitychanged",n))})));var i={networkingEngine:t,modifyManifestRequest:function(t,n){var i=e.V;try{i.g.enabled&&(i.s=n.format,Mu(i,t,{ot:Lu,su:!i.i}))}catch(r){q("CMCD_MANIFEST_ERROR","Could not generate manifest CMCD data.",r)}},modifySegmentRequest:function(t,n){Cu(e.V,t,n)},filter:function(t){return Al(e,t)},makeTextStreamsForClosedCaptions:function(t){return function(e,t){for(var n=new Set,r=c(t.textStreams),i=r.next();!i.done;i=r.next())"application/cea-608"!=(i=i.value).mimeType&&"application/cea-708"!=i.mimeType||n.add(i.originalId);for(r=c(t.variants),i=r.next();!i.done;i=r.next())if((i=i.value.video)&&i.closedCaptions)for(var a=c(i.closedCaptions.keys()),o=a.next();!o.done;o=a.next())if(o=o.value,!n.has(o)){var s=o.startsWith("CC")?"application/cea-608":"application/cea-708",u=new Ds;s={id:e.hf++,originalId:o,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:u,mimeType:s,codecs:"",kind:"caption",encrypted:!1,drmInfos:[],keyIds:new Set,language:i.closedCaptions.get(o),label:null,type:ke,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:i.roles,forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null},t.textStreams.push(s),n.add(o)}}(e,t)},onTimelineRegionAdded:function(t){var n=e.sa;e:{for(var r=c(n.g),i=r.next();!i.done;i=r.next())if((i=i.value).schemeIdUri==t.schemeIdUri&&i.id==t.id&&i.startTime==t.startTime&&i.endTime==t.endTime){r=i;break e}r=null}null==r&&(n.g.add(t),t=new G("regionadd",new Map([["region",t]])),n.dispatchEvent(t))},onEvent:function(t){return e.dispatchEvent(t)},onError:function(t){return Fl(e,t)},isLowLatencyMode:function(){return e.h.streaming.lowLatencyMode},isAutoLowLatencyMode:function(){return e.h.streaming.autoLowLatencyMode},enableLowLatencyMode:function(){e.configure("streaming.lowLatencyMode",!0)},updateDuration:function(){e.j&&e.j.updateDuration()},newDrmInfo:function(t){var n=e.m?e.m.g:null;n&&e.m.C&&El(e,n.keySystem,t)}},a=Date.now()/1e3;return new Sr(function(){var t,r,o,s;return L((function(u){if(1==u.g)return t=e,w(u,e.K.start(n,i),2);if(t.i=u.h,r=ol("manifestparsed"),e.dispatchEvent(r),0==e.i.variants.length)throw new be(2,4,4036);!function(e){function t(e){return e.video&&e.audio||e.video&&e.video.codecs.includes(",")}e.variants.some(t)&&(e.variants=e.variants.filter(t))}(e.i),o=Date.now()/1e3,s=o-a,e.s.H=s,T(u)}))}(),(function(){return e.K.stop()}))}(i,e)})),a.set(this.df,(function(e){return e=function(e,t){var n,r;return L((function(i){return 1==i.g?(n=Date.now()/1e3,r=!0,e.m=hl(e,{Ob:e.H,onError:function(t){Fl(e,t)},Fd:function(t){Vl(e,t)},onExpirationUpdated:function(t,n){Kl(e,t,n)},onEvent:function(t){e.dispatchEvent(t),"drmsessionupdate"==t.type&&r&&(r=!1,e.s.j=Date.now()/1e3-n,e.M&&((t=e.M).g&&t.h.classList.add("shaka-hidden")))}}),e.m.configure(e.h.drm),w(i,Li(e.m,e.i.variants,e.i.offlineSessionIds),2)):3!=i.g?w(i,e.m.Bc(t.mediaElement),3):w(i,Al(e,e.i),0)}))}(i,e),Cr(e)})),a.set(this.Z,(function(e,t){return Cr(function(e,t,n){var r,i,a,o,s,u,l,d,h,f,p,g,m,v,y,b;return L((function(x){switch(x.g){case 1:for(t.startTime=n.startTime,null!=e.Rc&&(t.startTime=e.Rc,e.Rc=null),r=t.mediaElement,i=t.uri,e.fb=i,e.J=new Ps({wd:function(){return r.playbackRate},td:function(){return r.defaultPlaybackRate},Pe:function(e){r.playbackRate=e},Of:function(e){r.currentTime+=e}}),a=function(){return Cl(e)},o=function(){return kl(e)},e.B.o(r,"playing",a),e.B.o(r,"pause",a),e.B.o(r,"ended",a),e.B.o(r,"ratechange",o),function(e,t){if(t.lcevc.enabled){var n=e.Qa();n&&n[0]&&n[0].videoMimeType==lc.ts&&(navigator.userAgent.match(/Edge?\//)||navigator.userAgent.match(/Edge\//))&&(t.streaming.forceTransmux||X("LCEVC Warning: For MPEG-2 TS decoding the config.streaming.forceTransmux must be enabled.")),al(e),null==e.M&&(e.M=new jo(e.g,e.lf,t.lcevc),e.I&&(e.I.G=e.M))}else al(e)}(e,e.h),s=e.h.abrFactory,e.C&&e.$e==s||(e.$e=s,e.C=s(),"function"!=typeof e.C.setMediaElement&&(ur("AbrManager","Please use an AbrManager with setMediaElement function."),e.C.setMediaElement=function(){}),e.C.configure(e.h.abr)),e.La=new vr(e.h.preferredAudioLanguage,e.h.preferredVariantRole,e.h.preferredAudioChannelCount),e.Xa=e.h.preferredTextLanguage,e.Kc=e.h.preferredTextRole,e.Ec=e.h.preferForcedSubs,Hl(e.i.presentationTimeline,e.h.playRangeStart,e.h.playRangeEnd),e.C.init((function(t,n,r){e.j&&t!=e.j.l&&Nl(e,t,!0,void 0!==n&&n,void 0===r?0:r)})),e.C.setMediaElement(r),En(e.i,e.h.preferredVideoCodecs,e.h.preferredAudioCodecs,e.h.preferredAudioChannelCount,e.h.preferredDecodingAttributes),e.j=function(e){return new Xs(e.i,{vd:function(){return e.F?e.F.kd():0},getBandwidthEstimate:function(){return e.C.getBandwidthEstimate()},modifySegmentRequest:function(t,n){Cu(e.V,t,n)},U:e.I,Ob:e.H,onError:function(t){return Fl(e,t)},onEvent:function(t){return e.dispatchEvent(t)},ph:function(){e.K&&e.K.update&&e.K.update()},Ce:function(t,n,r){e.F&&e.F.Pf(),pl(e),t=(new Map).set("start",t).set("end",n).set("contentType",r),e.dispatchEvent(ol("segmentappended",t))},oh:function(t,n){(n=n.we)&&e.ka&&function(e,t,n){var r=function(e,t){var n=e.g.get(t);return n||(n={Uc:[],Af:null,contentType:t},e.g.set(t,n)),n}(e,t.contentType);!function(e,t){if((e=e.h()[t.contentType])&&0<e.length){var n=e[0].start,r=e[e.length-1].end,i=t.Uc;t.Uc=i.filter((function(e,t){return!(e.position<=n&&t+1<i.length&&i[t+1].position<=n||e.position>=r)}))}else t.Uc=[]}(e,r),e={we:t,position:n},0<=(t=(r=r.Uc).findIndex((function(e){return e.position>=n})))?r.splice(t,r[t].position==n?1:0,e):r.push(e)}(e.ka,n,t)},tf:function(t,n){var r=e.m;if(r.h.parseInbandPsshEnabled&&["audio","video"].includes(t)){var i=0,a=c((n=new ci(Et(n))).data);for(t=a.next();!t.done;t=a.next())i+=t.value.length;if(0==i)r=Promise.resolve();else{for(i=new Uint8Array(i),a=0,t=(n=c(n.data)).next();!t.done;t=n.next())t=t.value,i.set(t,a),a+=t.length;Bi(r,"cenc",i),r=r.s}}else r=Promise.resolve();return r},qh:function(t,n,r){ll(e,t,n,r)}})}(e),e.j.configure(e.h.streaming),e.l=rc,r.textTracks&&e.B.o(r.textTracks,"addtrack",(function(t){if(t.track&&"chapters"===(t=t.track).kind)dl(e,t)})),e.dispatchEvent(ol("streaming")),u=null,(l=e.j.l)||(u=Ml(e)),d=[],f=c([(h=l||u).video,h.audio]),p=f.next();!p.done;p=f.next())(g=p.value)&&!g.segmentIndex&&d.push(g.createSegmentIndex());if(!(0<d.length)){x.D(2);break}return w(x,Promise.all(d),2);case 2:if(e.F=function(e,t){return new Is(e.g,e.i,e.h.streaming,t,(function(){e.Za&&Bs(e.Za,!0),e.j&&e.j.Xc(),e.O&&pl(e)}),(function(t){return e.dispatchEvent(t)}))}(e,t.startTime),e.Za=function(e){var t=new zs(e.sa);t.addEventListener("enter",(function(t){zl(e,"timelineregionenter",t.region)})),t.addEventListener("exit",(function(t){zl(e,"timelineregionexit",t.region)})),t.addEventListener("skip",(function(t){var n=t.region;t.seeking||(zl(e,"timelineregionenter",n),zl(e,"timelineregionexit",n))}));var n=new Us(e.g);return n.g.add(t),e.ka&&n.g.add(e.ka),n}(e),m=Math.max(e.i.minBufferTime,e.h.streaming.rebufferingGoal),fl(e,m),l){x.D(4);break}if(Nl(e,u,!0,!1,0),!e.h.streaming.startAtSegmentBoundary){x.D(5);break}return v=e.F.kd(),w(x,function(e,t){var n,r,i,a,o;return L((function(s){return 1==s.g?(n=e.audio,r=e.video,i=function(e,t){var n,r,i;return L((function(a){return 1==a.g?e?w(a,e.createSegmentIndex(),2):a.return(null):(r=(n=e.segmentIndex.bc(t))?n.next().value:null)?(i=r.startTime,a.return(i)):a.return(null)}))},w(s,i(n,t),2)):3!=s.g?(a=s.h,w(s,i(r,t),3)):null!=(o=s.h)&&null!=a?s.return(Math.max(o,a)):null!=o?s.return(o):null!=a?s.return(a):s.return(t)}))}(u,v),6);case 6:y=x.h,e.F.ie(y);case 5:Dl(e,null,Bn(u));case 4:return e.F.ge(),e.yb().find((function(e){return e.active}))||((b=Xn(e.i.textStreams,e.Xa,e.Kc,e.Ec)[0]||null)&&nl(e.s.h,b,!0),u&&(b?(u.audio&&function(e,t,n){if(0==e.h.autoShowText)return!1;if(1==e.h.autoShowText)return!0;var r=De(e.h.preferredTextLanguage);return n=De(n.language),2==e.h.autoShowText?Re(n,r):3==e.h.autoShowText?(e=De(t.language),Re(n,r)&&!Re(e,n)):(X("Invalid autoShowText setting!"),!1)}(e,u.audio,b)&&(e.aa=!0),e.aa&&e.I.m.setTextVisibility(!0),Bl(e)):e.aa=!1),b&&(e.h.streaming.alwaysStreamText||e.Nb())&&$s(e.j,b)),w(x,e.j.start(),7);case 7:e.h.abr.enabled&&(e.C.enable(),jl(e)),On(e.j?e.j.l:null,e.i),Xl(e.i),Pl(e),_l(e),e.i.variants.some((function(e){return e.primary})),e.Nc=!0,e.B.Da(r,"loadedmetadata",(function(){e.s.m=Date.now()/1e3-n.Ue})),T(x)}}))}(i,e,t))})),a.set(this.fe,(function(e,t){return e=function(e,t,n){var r,i,a,o,s,u,l;return L((function(c){return 1==c.g?(r=Ce,i=Date.now()/1e3,a=!0,e.m=hl(e,{Ob:e.H,onError:function(t){Fl(e,t)},Fd:function(t){Vl(e,t)},onExpirationUpdated:function(t,n){Kl(e,t,n)},onEvent:function(t){e.dispatchEvent(t),"drmsessionupdate"==t.type&&a&&(a=!1,e.s.j=Date.now()/1e3-i)}}),e.m.configure(e.h.drm),o=n.uri||"",s=ia(o),"application/x-mpegurl"==(u=lc[s])&&Ut()&&(u="application/vnd.apple.mpegurl"),u||(u="video/mp4"),l={id:0,language:"und",disabledUntilTime:0,primary:!1,audio:null,video:{id:0,originalId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:null,mimeType:n.mimeType?n.mimeType.split(";")[0]:u,codecs:n.mimeType?vn(n.mimeType):"",encrypted:!0,drmInfos:[],keyIds:new Set,language:"und",label:null,type:r.Ma,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null},bandwidth:100,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]},e.m.V=!0,w(c,Li(e.m,[l],[]),2)):w(c,e.m.Bc(t.mediaElement),0)}))}(i,e,t),Cr(e)})),a.set(this.$a,(function(e,t){return function(e,t,n){function r(){return Cl(e)}t.uri=n.uri,t.startTime=n.startTime,e.fb=t.uri;var i=t.mediaElement;e.F=new Es(i);var a=!1;e.vb.push((function(){a=!0})),null!=t.startTime&&e.F.ie(t.startTime),e.J=new Ps({wd:function(){return i.playbackRate},td:function(){return i.defaultPlaybackRate},Pe:function(e){i.playbackRate=e},Of:function(e){i.currentTime+=e}}),fl(e,e.h.streaming.rebufferingGoal),e.B.o(i,"playing",r),e.B.o(i,"pause",r),e.B.o(i,"ended",r),e.B.o(i,"ratechange",(function(){return kl(e)})),"none"!=i.preload&&e.B.Da(i,"loadedmetadata",(function(){e.s.m=Date.now()/1e3-n.Ue})),i.audioTracks&&(e.B.o(i.audioTracks,"addtrack",(function(){return Pl(e)})),e.B.o(i.audioTracks,"removetrack",(function(){return Pl(e)})),e.B.o(i.audioTracks,"change",(function(){return Pl(e)}))),i.textTracks&&(e.B.o(i.textTracks,"addtrack",(function(t){if(t.track)switch(t=t.track,t.kind){case"metadata":!function(e,t){if("metadata"==t.kind){t.mode="hidden",e.B.o(t,"cuechange",(function(){if(t.activeCues)for(var n=c(t.activeCues),r=n.next();!r.done;r=n.next())r=r.value,cl(e,r.startTime,r.endTime,r.type,r.value),e.G&&e.G.onCueMetadataChange(r.value)}));var n=new Rt((function(){for(var t=function(e){return Array.from(e.g.textTracks).filter((function(e){return"metadata"==e.kind}))}(e),n=(t=c(t)).next();!n.done;n=t.next())n.value.mode="hidden"})).za().R(.5);e.vb.push((function(){n.stop()}))}}(e,t);break;case"chapters":dl(e,t);break;default:Pl(e)}})),e.B.o(i.textTracks,"removetrack",(function(){return Pl(e)})),e.B.o(i.textTracks,"change",(function(){return Pl(e)})));var o=ia(t.uri);i.src=function(e,t,n){try{if(!e.g.enabled)return t;var r=_u(e);e:{switch(n){case"video/webm":case"video/mp4":var i=Ou;break e;case"application/x-mpegurl":i=Lu;break e}i=void 0}return r.ot=i,r.su=!0,Nu(t,Ru(r))}catch(o){return q("CMCD_SRC_ERROR","Could not generate src CMCD data.",o),t}}(e.V,t.uri,lc[o]),(Pt()||Ft("Web0S"))&&i.load(),e.l=ic,e.dispatchEvent(ol("streaming"));var s=new Ct;return ms(i,HTMLMediaElement.HAVE_METADATA,e.B,(function(){e.F.ge(),s.resolve()})),ms(i,HTMLMediaElement.HAVE_CURRENT_DATA,e.B,(function(){return L((function(t){return 1==t.g?(function(e){var t=e.h.preferredAudioLanguage;if(""!=t){e.Md(t);var n=e.h.preferredVariantRole;""!=n&&e.Md(t,n)}}(e),ml(e).find((function(e){return"disabled"!=e.mode}))?t.D(2):w(t,new Promise((function(t){e.B.Da(i.textTracks,"change",t),new Rt(t).R(1)})),2)):a?t.return():(function(e){var t=e.h.preferredTextLanguage,n=e.h.preferForcedSubs;if(""!=t){e.Ie(t,"",n);var r=e.h.preferredTextRole;""!=r&&e.Ie(t,r,n)}}(e),void T(t))}))})),i.error?s.reject(Gl(e)):"none"==i.preload&&(X('With <video preload="none">, the browser will not load anything until play() is called. We are unable to measure load latency in a meaningful way, and we cannot provide track info yet. Please do not use preload="none" with Shaka Player.'),s.resolve()),e.B.Da(i,"error",(function(){s.reject(Gl(e))})),new Sr(s,(function(){return s.reject(new be(2,7,7001)),Promise.resolve()})).ia((function(){e.Nc=!0}))}(i,e,t)})),this.ua=new lu(this.P,{Sg:function(e,t,n,r){var a=null;return e==i.P&&(a=n==i.P?i.P:i.X),e==i.X&&(a=n==i.P||t.mediaElement!=r.mediaElement?i.P:n==i.X?i.X:n==i.Ya||n==i.Z?i.Ya:n==i.$a?i.fe:null),e==i.Ya&&(a=n==i.Z&&t.mediaElement==r.mediaElement?i.jf:i.$),e==i.jf&&(a=Jl(i.Z,i.gf,i.$,n,t,r)),e==i.gf&&(a=Jl(i.Z,i.df,i.$,n,t,r)),e==i.df&&(a=Jl(i.Z,i.Z,i.$,n,t,r)),e==i.fe&&(a=n==i.$a&&t.mediaElement==r.mediaElement?i.$a:i.$),e!=i.Z&&e!=i.$a||(a=i.$),e==i.$&&(a=r.mediaElement&&t.mediaElement==r.mediaElement?i.X:i.P),a},xg:function(e,t,n){return i.dispatchEvent(ol("onstatechange",(new Map).set("state",e.name))),a.get(e)(t,n)},handleError:function(e){return L((function(t){return 1==t.g?w(t,ul(i,e),2):t.return(e.mediaElement?i.X:i.P)}))},nh:function(e){i.dispatchEvent(ol("onstateidle",(new Map).set("state",e.name)))}}),this.kf=new Rt((function(){_n(i.i.variants,i.h.restrictions,i.Qc)&&Ml(i)})),t&&this.Bc(t,!0)}function al(e){null!=e.M&&(e.M.release(),e.M=null)}function ol(e,t){return new G(e,t)}function sl(){if(e.Promise||X("A Promise implementation or polyfill is required"),!(e.Promise&&e.Uint8Array&&Array.prototype.forEach)||Ft("Trident/"))return!1;var t=jt();return!(t&&13>t||!(e.MediaKeys&&e.navigator&&e.navigator.requestMediaKeySystemAccess&&e.MediaKeySystemAccess&&e.MediaKeySystemAccess.prototype.getConfiguration))&&(!!Nt()||Lt("application/x-mpegurl"))}function ul(e,t){var n,r,i,a,o,s,u,l,d;return L((function(h){switch(h.g){case 1:return e.l!=tc&&(e.l=nc),n=e.vb.map((function(e){return e()})),e.vb=[],w(h,Promise.all(n),2);case 2:if(e.dispatchEvent(ol("unloading")),t.mimeType=null,t.startTime=null,t.uri=null,e.sa&&(e.sa.release(),e.sa=null),t.mediaElement&&e.B.Rb(),e.kf.stop(),e.Za&&(e.Za.release(),e.Za=null),e.Dd&&(e.Dd.stop(),e.Dd=null),!e.K){h.D(3);break}return w(h,e.K.stop(),4);case 4:e.K=null,e.Kd=null;case 3:if(!e.C){h.D(5);break}return w(h,e.C.stop(),5);case 5:if(!e.j){h.D(7);break}return w(h,e.j.destroy(),8);case 8:e.j=null;case 7:if(e.J&&(e.J.release(),e.J=null),e.F&&(e.F.release(),e.F=null),!e.I){h.D(9);break}return w(h,e.I.destroy(),10);case 10:e.I=null;case 9:if(e.G&&e.G.onAssetUnload(),!t.mediaElement||!t.mediaElement.src){h.D(11);break}return w(h,new Promise((function(e){return new Rt(e).R(.1)})),12);case 12:for(t.mediaElement.removeAttribute("src"),t.mediaElement.load();t.mediaElement.lastChild;)t.mediaElement.removeChild(t.mediaElement.firstChild);case 11:if(!e.m){h.D(13);break}return w(h,e.m.destroy(),14);case 14:e.m=null;case 13:if(e.fb=null,e.O=null,e.i){for(r=c(e.i.variants),i=r.next();!i.done;i=r.next())for(a=i.value,o=c([a.audio,a.video]),s=o.next();!s.done;s=o.next())(u=s.value)&&u.segmentIndex&&u.segmentIndex.release();for(l=c(e.i.textStreams),s=l.next();!s.done;s=l.next())(d=s.value).segmentIndex&&d.segmentIndex.release()}e.i=null,e.s=new rl,e.ef=null,Il(e),T(h)}}))}function ll(e,t,n,r){for(var i=(t=c(t)).next();!i.done;i=t.next())if((i=i.value).data&&i.cueTime&&i.frames){var a=i.cueTime+n,o=r;o&&a>o&&(o=a);for(var s=c(i.frames),u=s.next();!u.done;u=s.next())cl(e,a,o,"org.id3",u.value);e.G&&e.G.onHlsTimedMetadata(i,a)}}function cl(e,t,n,r,i){t=(new Map).set("startTime",t).set("endTime",n).set("metadataType",r).set("payload",i),e.dispatchEvent(ol("metadata",t))}function dl(e,t){if(t&&"chapters"==t.kind){t.mode="hidden";var n=new Rt((function(){t.mode="hidden"})).za().R(.5);e.vb.push((function(){n.stop()}))}}function hl(e,t){return new Ni(t,e.h.drm.updateExpirationTime)}function fl(e,t){e.O=new yr,e.O.g=xr,br(e.O,t,Math.min(.5,t/2)),Il(e),e.Dd=new Rt((function(){pl(e)})).ea(.25)}function pl(e){switch(e.l){case ic:if(e.g.ended)var t=!0;else{var n=Co(e.g.buffered);t=null!=n&&n>=e.g.duration-1}break;case rc:e:if(e.g.ended||Wo(e.I))t=!0;else{if(e.i.presentationTimeline.T()){n=e.i.presentationTimeline.Ib();var r=Co(e.g.buffered);if(null!=r&&r>=n){t=!0;break e}}t=!1}break;default:t=!1}r=Mo(e.g.buffered,e.g.currentTime);var i=t,a=(n=e.O).h.get(n.g);t=n.g,r=i||r>=a?wr:xr,n.g=r,t!=r&&Il(e)}function gl(e){if(e.K){var t=Mr(e.h.manifest);e.g&&"AUDIO"===e.g.nodeName&&(t.disableVideo=!0),e.K.configure(t)}if(e.m&&e.m.configure(e.h.drm),e.j){e.j.configure(e.h.streaming);try{Sl(e,e.i)}catch(a){Fl(e,a)}e.C&&_l(e),!(t=e.j.l)||t.allowedByApplication&&t.allowedByKeySystem||Rl(e)}if(e.H&&e.H.Ne(e.h.streaming.forceHTTPS),e.I&&(e.I.configure(e.h.mediaSource),e.I.J=e.h.manifest.segmentRelativeVttTiming,t=e.h.textDisplayFactory,e.ef!=t)){var n=t(),r=e.I,i=r.m;r.m=n,i&&(n.setTextVisibility(i.isTextVisible()),i.destroy()),r.g&&(r.g.i=n),e.ef=t,e.j&&((n=(t=e.j).j.get(ke))&&Qs(t,n.stream,!0,0,!0))}e.C&&(e.C.configure(e.h.abr),e.h.abr.enabled?e.C.enable():e.C.disable(),jl(e)),e.O&&(t=e.h.streaming.rebufferingGoal,e.i&&(t=Math.max(t,e.i.minBufferTime)),br(e.O,t,Math.min(.5,t/2))),e.i&&Hl(e.i.presentationTimeline,e.h.playRangeStart,e.h.playRangeEnd)}function ml(e){return Array.from(e.g.textTracks).filter((function(e){return"metadata"!=e.kind&&"chapters"!=e.kind&&"Shaka Player TextTrack"!=e.label}))}function vl(e){return Array.from(e.g.textTracks).filter((function(e){return"chapters"==e.kind}))}function yl(e,t){var n,r;return L((function(i){switch(i.g){case 1:return n=ia(t),(r=cc[n])?i.return(r):(A(i,2),w(i,ra(t,e.H,e.h.streaming.retryParameters),4));case 4:r=i.h,E(i,3);break;case 2:I(i);case 3:if(r)return i.return(r);throw new be(1,2,2011,n)}}))}function bl(e,t,n,r,i,a,o){var s,u,l,c;return L((function(d){if(1==d.g)return"text/vtt"!=i||o.length?w(d,xl(e,t,e.H,e.h.streaming.retryParameters),3):d.D(2);2!=d.g&&(s=d.h,u=wl(e,s,i,o),l=new Blob([u],{type:"text/vtt"}),t=ss(l),i="text/vtt"),c=document.createElement("track");var h=e.V,f=t;try{if(h.g.enabled){var p=_u(h);p.ot=Bu,p.su=!0;var g=Nu(f,Ru(p))}else g=f}catch(m){q("CMCD_TEXT_TRACK_ERROR","Could not generate text track CMCD data.",m),g=f}return c.src=g,c.label=a,c.kind=r,c.srclang=n,e.g.getAttribute("crossorigin")||e.g.setAttribute("crossorigin","anonymous"),e.g.appendChild(c),d.return(c)}))}function xl(e,t,n,r){var i,a,o;return L((function(s){if(1==s.g){i=Fr,(a=Or([t],r)).method="GET";var u=e.V;try{u.g.enabled&&Mu(u,a,{ot:Bu,su:!0})}catch(l){q("CMCD_TEXT_ERROR","Could not generate text CMCD data.",l)}return w(s,n.request(i,a).promise,2)}return o=s.h,s.return(o.data)}))}function wl(e,t,n,r){var i=Sn[n];if(i)return n=i(),e={periodStart:0,segmentStart:0,segmentEnd:e.g.duration,vttOffset:0},t=Et(t),function(e,t){function n(e){for(var n=e,r=c(t),i=r.next();!i.done;i=r.next())(i=i.value).end&&i.start<e&&(n+=i.end-i.start);return(10>(e=Math.floor(n/3600))?"0":"")+e+":"+(10>(r=Math.floor(n/60%60))?"0":"")+r+":"+(10>(i=Math.floor(n%60))?"0":"")+i+"."+(100>(n=Math.floor(1e3*n%1e3))?10>n?"00":"0":"")+n}var r=fu(e,[]);e="WEBVTT\n\n";for(var i=(r=c(r)).next();!i.done;i=r.next())e+=n((i=i.value).startTime)+" --\x3e "+n(i.endTime)+function(e){var t=[];switch(e.textAlign){case"left":t.push("align:left");break;case"right":t.push("align:right");break;case it:t.push("align:middle");break;case"start":t.push("align:start");break;case"end":t.push("align:end")}switch(e.writingMode){case"vertical-lr":t.push("vertical:lr");break;case"vertical-rl":t.push("vertical:rl")}return t.length?" "+t.join(" "):""}(i)+"\n",e+=i.payload+"\n\n";return e}(t=n.parseMedia(t,e),r);throw new be(2,2,2014,n)}function Tl(e){var t=$u();return t.streaming.failureCallback=function(t){if(e.T()){var n=null;1001==t.code||1002==t.code?n=1:1003==t.code&&(n=.1),null!=n&&(t.severity=1,e.Fe(n))}},t.textDisplayFactory=function(){return e.Bd?new wu(e.g,e.Bd):new pu(e.g)},t}function Al(e,t){return L((function(n){if(1==n.g)return w(n,function(e,t){return L((function(n){if(1==n.g)return w(n,Mn(e.j?e.j.l:null,t),2);Xl(t),T(n)}))}(e,t),2);Sl(e,t),T(n)}))}function Sl(e,t){if(e.l!=tc){_n(t.variants,e.h.restrictions,e.Qc)&&e.j&&Pl(e);var n=e.m?e.m.g:null;if(n&&e.m.C)for(var r=c(t.variants),i=r.next();!i.done;i=r.next())i=i.value,El(e,n.keySystem,i.video),El(e,n.keySystem,i.audio);Wl(e,t)}}function El(e,t,n){if(n)for(var r=(n=c(n.drmInfos)).next();!r.done;r=n.next())if((r=r.value).keySystem==t)for(var i=(r=c(r.initData||[])).next();!i.done;i=r.next())i=i.value,Bi(e.m,i.initDataType,i.initData)}function Il(e){var t=e.Pc();if(e.s&&e.O&&e.F){var n=e.J;n.j=t,Os(n),e.V&&(n=e.V,t||n.i||(n.i=!0),n.i&&t&&(n.l=!0),n.m=t),Cl(e)}t=(new Map).set("buffering",t),e.dispatchEvent(ol("buffering",t))}function kl(e){var t=e.g.playbackRate;0!=t&&(e.J&&e.J.set(t),t=ol("ratechange"),e.dispatchEvent(t))}function Cl(e){if(e.s&&e.O){var t=e.s.g;e.O.g==xr?Zu(t,"buffering"):e.g.paused?Zu(t,"paused"):e.g.ended?Zu(t,"ended"):Zu(t,"playing")}}function _l(e){try{Wl(e,e.i)}catch(n){return Fl(e,n),!1}var t=e.i.variants.filter((function(e){return Hn(e)}));return t=e.La.create(t),e.C.setVariants(Array.from(t.values())),!0}function Ml(e){return _l(e)?e.C.chooseVariant():null}function Rl(e){var t=Ml(e);t&&Nl(e,t,!0,!0,0)}function Nl(e,t,n,r,i){var a=e.j.l;if(t==a)r&&Ys(e.j,t,r,i,!0);else{var o=e.s.h;o.h!=t&&(o.h=t,o.g.push({timestamp:Date.now()/1e3,id:t.id,type:"variant",fromAdaptation:n,bandwidth:t.bandwidth})),Ys(e.j,t,r,i,void 0,n),r=null,a&&(r=Bn(a)),t=Bn(t),n?Dl(e,r,t):Ol(e,r,t)}}function Ll(e,t){var n=Array.from(e.g.audioTracks).find((function(e){return e.enabled}));t.enabled=!0,t.id!==n.id&&(n.enabled=!1),Ol(e,n=Vn(n),t=Vn(t))}function Dl(e,t,n){t=(new Map).set("oldTrack",t).set("newTrack",n),e.M&&Fo(e.M,n),ql(e,n=ol("adaptation",t))}function Pl(e){ql(e,ol("trackschanged"))}function Ol(e,t,n){t=(new Map).set("oldTrack",t).set("newTrack",n),e.M&&Fo(e.M,n),ql(e,n=ol("variantchanged",t))}function Ul(e){ql(e,ol("textchanged"))}function Bl(e){ql(e,ol("texttrackvisibility"))}function jl(e){ql(e,ol("abrstatuschanged",(new Map).set("newStatus",e.h.abr.enabled)))}function Fl(e,t){if(e.l!=tc)if(function(e,t){if(1002!=t.code&&1011!=t.code||1!=t.category||!navigator.onLine)return!1;var n=e.h.streaming.maxDisabledTime;if(0==n){if(1011!=t.code)return!1;n=1}t=e.Qa().find((function(e){return e.active}));for(var r=e.i,i=c(r.variants),a=i.next();!a.done;a=i.next())(a=a.value).id===t.id&&(a.disabledUntilTime=Date.now()/1e3+n);return _n(r.variants,e.h.restrictions,e.Qc),!!(t=Ml(e))&&(r=e.jb().video.reduce((function(e,t){return e+t.end-t.start}),0),Nl(e,t,!1,!0,r),e.kf.R(n),!0)}(e,t))t.handled=!0;else{var n=ol("error",(new Map).set("detail",t));e.dispatchEvent(n),n.defaultPrevented&&(t.handled=!0)}}function zl(e,t,n){n=(new Map).set("detail",{schemeIdUri:n.schemeIdUri,value:n.value,startTime:n.startTime,endTime:n.endTime,id:n.id,eventElement:n.eventElement}),e.dispatchEvent(ol(t,n))}function Gl(e){if(!e.g.error)return null;var t=e.g.error.code;if(1==t)return null;var n=e.g.error.msExtendedCode;return n&&(0>n&&(n+=Math.pow(2,32)),n=n.toString(16)),new be(2,3,3016,t,n,e.g.error.message)}function Vl(e,t){if(e.j){var n=Object.keys(t),r=1==n.length&&"00"==n[0],i=!1;if(n.length)for(var a=(n=c(e.i.variants)).next();!a.done;a=n.next()){var o=[];(a=a.value).audio&&o.push(a.audio),a.video&&o.push(a.video);for(var s=(o=c(o)).next();!s.done;s=o.next()){var u=s.value;if(s=a.allowedByKeySystem,u.keyIds.size){a.allowedByKeySystem=!0;for(var l=(u=c(u.keyIds)).next();!l.done;l=u.next())l=l.value,l=t[r?"00":l],a.allowedByKeySystem=a.allowedByKeySystem&&!!l&&!oc.includes(l)}s!=a.allowedByKeySystem&&(i=!0)}}i&&!_l(e)||((t=e.j.l)&&!t.allowedByKeySystem&&Rl(e),i&&Pl(e))}}function Kl(e,t,n){e.K&&e.K.onExpirationUpdated&&e.K.onExpirationUpdated(t,n),t=ol("expirationupdated"),e.dispatchEvent(t)}function Hl(e,t,n){0<t&&(e.T()||e.ag(t)),n<(t=e.getDuration())&&(e.T()||e.Sa(n))}function Wl(e,t){e=e.m?e.m.ud():{};var n=Object.keys(e);n=n.length&&"00"==n[0];for(var r=!1,i=!1,a=new Set,o=new Set,s=(t=c(t.variants)).next();!s.done;s=t.next()){var u=[];(s=s.value).audio&&u.push(s.audio),s.video&&u.push(s.video);for(var l=(u=c(u)).next();!l.done;l=u.next())if((l=l.value).keyIds.size)for(var d=(l=c(l.keyIds)).next();!d.done;d=l.next()){d=d.value;var h=e[n?"00":d];h?oc.includes(h)&&o.add(h):a.add(d)}s.allowedByApplication?s.allowedByKeySystem&&(r=!0):i=!0}if(!r)throw new be(2,4,4012,e={hasAppRestrictions:i,missingKeys:Array.from(a),restrictedKeyStatuses:Array.from(o)})}function Xl(e){if(!e.variants.some(Hn))throw new be(2,4,4032)}function ql(e,t){L((function(n){if(1==n.g)return w(n,Promise.resolve(),2);e.l!=tc&&e.dispatchEvent(t),T(n)}))}function Yl(e){for(var t=new Set,n=(e=c(e)).next();!n.done;n=e.next())(n=n.value).language?t.add(De(n.language)):t.add("und");return t}function $l(e){for(var t=new Map,n=new Map,r=(e=c(e)).next();!r.done;r=e.next()){var i="und",a=[];(r=r.value).language&&(i=De(r.language)),(a="variant"==r.type?r.audioRoles:r.roles)&&a.length||(a=[""]),t.has(i)||t.set(i,new Set);for(var o=(a=c(a)).next();!o.done;o=a.next())o=o.value,t.get(i).add(o),r.label&&(n.has(i)||n.set(i,new Map),n.get(i).set(o,r.label))}var s=[];return t.forEach((function(e,t){for(var r=(e=c(e)).next();!r.done;r=e.next()){r=r.value;var i=null;n.has(t)&&n.get(t).has(r)&&(i=n.get(t).get(r)),s.push({language:t,role:r,label:i})}})),s}function Ql(){return new be(2,7,7e3)}function Jl(e,t,n,r,i,a){return r==e&&i.mediaElement==a.mediaElement&&i.uri==a.uri&&i.mimeType==a.mimeType?t:n}function Zl(){return{mediaElement:null,mimeType:null,startTime:null,Ue:NaN,uri:null}}function ec(e){return new Promise((function(t,n){e.Qb=function(){return n(Ql())},e.Ed=function(){return t()},e.onError=function(e){return n(e)},e.Gd=function(){return n(Ql())}}))}z("shaka.util.CmcdManager.StreamingFormat",{ai:"d",si:"h",Zi:"s",Ji:"o"}),z("shaka.util.ConfigUtils",Gu),Gu.convertToConfigObject=Ku,Gu.mergeConfigObjects=Vu,z("shaka.util.FairPlayUtils",Wu),Wu.commonFairPlayResponse=function(e,t){if(2===e){try{var n=Ht(t.data)}catch(i){return}e=!1,"<ckc>"===(n=n.trim()).substr(0,5)&&"</ckc>"===n.substr(-6)&&(n=n.slice(5,-6),e=!0);try{var r=JSON.parse(n);r.ckc&&(n=r.ckc,e=!0),r.CkcMessage&&(n=r.CkcMessage,e=!0),r.License&&(n=r.License,e=!0)}catch(i){}e&&(t.data=St(en(n)))}},Wu.conaxFairPlayRequest=function(e,t){2===e&&(t.headers["Content-Type"]="application/octet-stream")},Wu.ezdrmFairPlayRequest=function(e,t){2===e&&(t.headers["Content-Type"]="application/octet-stream")},Wu.verimatrixFairPlayRequest=function(e,t){2===e&&(e=Zt(e=Et(t.body)),t.headers["Content-Type"]="application/x-www-form-urlencoded",t.body=qt("spc="+e))},Wu.conaxInitDataTransform=function(t,n,r){if("skd"!==n)return t;n=r.serverCertificate,r=Xt(t).split("skd://").pop().split("?").shift(),r=e.atob(r);var i=new ArrayBuffer(2*r.length);i=new Uint16Array(i);for(var a=0,o=r.length;a<o;a++)i[a]=r.charCodeAt(a);return qu(t,i,n)},Wu.ezdrmInitDataTransform=function(e,t,n){return"skd"!==t?e:(t=n.serverCertificate,qu(e,n=Xt(e).split(";").pop(),t))},Wu.verimatrixInitDataTransform=function(e,t,n){return"skd"!==t?e:(t=n.serverCertificate,qu(e,n=Xt(e).split("skd://").pop(),t))},Wu.initDataTransform=qu,Wu.defaultGetContentId=Xu,Wu.isFairPlaySupported=function(){var e;return L((function(t){return 1==t.g?(e={initDataTypes:["cenc","sinf","skd"],videoCapabilities:[{contentType:'video/mp4; codecs="avc1.42E01E"'}]},A(t,2),w(t,navigator.requestMediaKeySystemAccess("com.apple.fps",[e]),4)):2!=t.g?t.return(!0):(I(t),t.return(!1))}))},z("shaka.util.PlayerConfiguration",Yu),Yu.mergeConfigObjects=Qu,Yu.createDefault=$u,v(il,ee),(i=il.prototype).destroy=function(){var e,t=this;return L((function(n){switch(n.g){case 1:return t.l==tc?n.return():(al(t),t.l=tc,e=cu(t.ua,(function(){return{node:t.P,payload:Zl(),Jb:!1}})),w(n,new Promise((function(t){e.mc=function(){},e.Ed=function(){t()},e.Qb=function(){t()},e.onError=function(){t()},e.Gd=function(){t()}})),2));case 2:return w(n,t.ua.destroy(),3);case 3:if(t.Id&&(t.Id.release(),t.Id=null),t.gb&&(t.gb.release(),t.gb=null),t.B&&(t.B.release(),t.B=null),t.$e=null,t.C=null,t.h=null,t.s=null,t.Bd=null,t.V=null,!t.H){n.D(4);break}return w(n,t.H.destroy(),5);case 5:t.H=null;case 4:ee.prototype.release.call(t),T(n)}}))},i.Bc=function(e,t){if(t=void 0===t||t,this.l==tc)return Promise.reject(Ql());var n=Zl();n.mediaElement=e,Nt()||(t=!1);var r=t?this.Ya:this.X;return(e=cu(this.ua,(function(){return{node:r,payload:n,Jb:!1}}))).mc=function(){},ec(e)},i.qf=function(e){this.lf=e},i.detach=function(){var e=this;if(this.l==tc)return Promise.reject(Ql());var t=cu(this.ua,(function(){return{node:e.P,payload:Zl(),Jb:!1}}));return t.mc=function(){},ec(t)},i.bf=function(e){var t=this;if(e=void 0===e||e,this.l==tc)return Promise.reject(Ql());this.Nc=!1,Nt()||(e=!1),al(this);var n=Zl(),r=cu(this.ua,(function(r){var i=r.mediaElement&&e?t.Ya:r.mediaElement?t.X:t.P;return n.mediaElement=r.mediaElement,{node:i,payload:n,Jb:!1}}));return r.mc=function(){},ec(r)},i.Ph=function(e){this.Rc=e},i.load=function(e,t,n){var r=this;if(this.Rc=null,this.Nc=!1,this.l==tc)return Promise.reject(Ql());this.dispatchEvent(ol("loading"));var i=Zl();i.uri=e,i.Ue=Date.now()/1e3,n&&(i.mimeType=n),void 0!==t&&(i.startTime=t);var a=function(e,t){if(!Nt())return!0;var n=t.mimeType,r=t.uri||"";if(n||(n=ia(r),n=lc[n]),n){if(""==(t.mediaElement||zt()).canPlayType(n))return!1;if(!Nt()||!(n in aa)&&!(ia(r)in oa)||e.h.streaming.preferNativeHls)return!0;if(Ut())return e.h.streaming.useNativeHlsOnSafari}return!1}(this,i)?this.$a:this.Z,o=cu(this.ua,(function(e){return null==e.mediaElement?null:(i.mediaElement=e.mediaElement,{node:a,payload:i,Jb:!0})}));return this.s=new rl,this.V=function(e){return new ku({getBandwidthEstimate:function(){return e.C?e.C.getBandwidthEstimate():NaN},jb:function(){return e.jb()},getCurrentTime:function(){return e.g?e.g.currentTime:0},Qa:function(){return e.Qa()},xb:function(){return e.xb()},T:function(){return e.T()}},e.h.cmcd)}(this),o.mc=function(){},new Promise((function(e,t){o.Gd=function(){return t(new be(2,7,7002))},o.Ed=function(){e(),r.dispatchEvent(ol("loaded"))},o.Qb=function(){return t(Ql())},o.onError=function(e){return t(e)}}))},i.configure=function(e,t){2==arguments.length&&"string"==typeof e&&(e=Ku(e,t)),e.streaming&&"forceTransmuxTS"in e.streaming&&(ur("streaming.forceTransmuxTS configuration","Please Use streaming.forceTransmux instead."),e.streaming.forceTransmux=e.streaming.forceTransmuxTS,delete e.streaming.forceTransmuxTS),e.streaming&&e.streaming.lowLatencyMode&&(null==e.streaming.inaccurateManifestTolerance&&(e.streaming.inaccurateManifestTolerance=0),null==e.streaming.rebufferingGoal&&(e.streaming.rebufferingGoal=.01));var n=Qu(this.h,e,Tl(this));return gl(this),n},i.getConfiguration=function(){var e=Tl(this);return Qu(e,this.h,Tl(this)),e},i.Ag=function(){if(this.g){var e=this.g.buffered.length;e=e?this.g.buffered.end(e-1):0;var t=this.getConfiguration().streaming.bufferingGoal;if(e>=(t=Math.min(this.g.currentTime+t,this.Ja().end)))return 1;if(!(e<=this.g.currentTime)&&e<t)return(e-this.g.currentTime)/(t-this.g.currentTime)}return 0},i.Ch=function(){for(var e in this.h)delete this.h[e];Qu(this.h,Tl(this),Tl(this)),gl(this)},i.If=function(){return this.l},i.Rg=function(){return this.g},i.Hc=function(){return this.H},i.le=function(){return this.fb},i.sd=function(){return this.G?this.G:null},i.T=function(){return this.i?this.i.presentationTimeline.T():!(!this.g||!this.g.src)&&1/0==this.g.duration},i.Lb=function(){return!!this.i&&this.i.presentationTimeline.Lb()},i.hc=function(){if(this.i){var e=this.i.variants;return!!e.length&&!e[0].video}return!(!this.g||!this.g.src)&&(this.g.videoTracks?0==this.g.videoTracks.length:0==this.g.videoHeight)},i.Ja=function(){if(!this.Nc)return{start:0,end:0};if(this.i){var e=this.i.presentationTimeline;return{start:e.dc(),end:e.kb()}}return this.g&&this.g.src&&(e=this.g.seekable).length?{start:e.start(0),end:e.end(e.length-1)}:{start:0,end:0}},i.dh=function(){this.T()&&(this.g.currentTime=this.Ja().end)},i.keySystem=function(){var e=this.drmInfo();return e?e.keySystem:""},i.drmInfo=function(){return this.m?this.m.g:null},i.Gc=function(){return this.m?this.m.Gc():1/0},i.ud=function(){return this.m?this.m.ud():{}},i.Pc=function(){return!!this.O&&this.O.g==xr},i.xb=function(){return this.g?this.J?this.J.i:1:0},i.Ze=function(e){0==e?X("A trick play rate of 0 is unsupported!"):(this.g.paused&&this.g.play(),this.J.set(e),this.l==rc&&(this.C.playbackRateChanged(e),qs(this.j,1<Math.abs(e))))},i.vf=function(){var e=this.J.td();this.l==ic&&this.J.set(e),this.l==rc&&(this.J.set(e),this.C.playbackRateChanged(e),qs(this.j,!1))},i.Qa=function(){if(this.i){for(var e=this.j?this.j.l:null,t=[],n=0,r=c(this.i.variants),i=r.next();!i.done;i=r.next())if(Hn(i=i.value)){var a=Bn(i);a.active=i==e,a.active||1==n||null==e||i.video!=e.video||i.audio!=e.audio||(a.active=!0),a.active&&n++,t.push(a)}return t}return this.g&&this.g.audioTracks?Array.from(this.g.audioTracks).map((function(e){return Vn(e)})):[]},i.yb=function(){if(this.i){for(var e=this.j?this.j.s:null,t=[],n=c(this.i.textStreams),r=n.next();!r.done;r=n.next()){var i=jn(r=r.value);i.active=r==e,t.push(i)}return t}return this.g&&this.g.src&&this.g.textTracks?ml(this).map((function(e){return Gn(e)})):[]},i.Jg=function(){return this.i?this.i.imageStreams.map((function(e){return Fn(e)})):[]},i.Zg=function(e,t){var n,r,i,a,o,s,u,l,c,d,h,f,p,g,m,v,y,b,x,T,A=this;return L((function(S){return 1==S.g?A.i?(n=A.i.imageStreams.find((function(t){return t.id==e})))?n.segmentIndex?S.D(3):w(S,n.createSegmentIndex(),3):S.return(null):S.D(2):2!=S.g?null==(r=n.segmentIndex.find(t))?S.return(null):(i=n.segmentIndex.get(r),a=i.tilesLayout||n.tilesLayout,(o=/(\d+)x(\d+)/.exec(a))?(s=n.width||0,u=n.height||0,l=parseInt(o[1],10),c=parseInt(o[2],10),d=s/l,h=u/c,f=l*c,p=i.j-i.startTime,g=i.B||p/f,m=i.startTime,y=v=0,1<f&&(b=Math.floor((t-i.startTime)/g),m=i.startTime+b*g,v=b%l*d,y=Math.floor(b/l)*h),x=!1,(T=i.s)&&(x=!0,h=T.height,v=T.positionX,y=T.positionY,d=T.width),S.return({imageHeight:u,imageWidth:s,height:h,positionX:v,positionY:y,startTime:m,duration:g,uris:i.Pa(),width:d,sprite:x})):S.return(null)):S.return(null)}))},i.Je=function(e){if(this.i&&this.j){var t=this.i.textStreams.find((function(t){return t.id==e.id}));t&&t!=this.j.s&&(nl(this.s.h,t,!1),$s(this.j,t),Ul(this),this.Xa=t.language)}else if(this.g&&this.g.src&&this.g.textTracks){for(var n=(t=c(t=ml(this))).next();!n.done;n=t.next())zn(n=n.value)==e.id?n.mode=this.aa?"showing":"hidden":n.mode="disabled";Ul(this)}},i.Ke=function(e,t,n){if(t=void 0!==t&&t,n=void 0===n?0:n,this.i&&this.j){this.h.abr.enabled&&X("Changing tracks while abr manager is enabled will likely result in the selected track being overriden. Consider disabling abr before calling selectVariantTrack().");var r=this.i.variants.find((function(t){return t.id==e.id}));r&&Hn(r)&&(Nl(this,r,!1,t,n),this.La=new mr(r),_l(this))}else if(this.g&&this.g.audioTracks)for(n=(t=c(t=Array.from(this.g.audioTracks))).next();!n.done;n=t.next())if(zn(n=n.value)==e.id){Ll(this,n);break}},i.zg=function(){return $l(this.Qa())},i.Xg=function(){return $l(this.yb())},i.yg=function(){return Array.from(Yl(this.Qa()))},i.Wg=function(){return Array.from(Yl(this.yb()))},i.Md=function(e,t,n){if(n=void 0===n?0:n,this.i&&this.F){this.La=new vr(e,t||"",n,""),t=function(e,t){return e.video||t.video?e.video&&t.video?Math.abs((e.video.height||0)-(t.video.height||0))+Math.abs((e.video.width||0)-(t.video.width||0)):1/0:0},e=this.j.l;var r=this.La.create(this.i.variants);n=null;for(var i=(r=c(r.values())).next();!i.done;i=r.next())i=i.value,(!n||t(n,e)>t(i,e))&&(n=i);n?(t=Bn(n),this.Ke(t,!0)):Rl(this)}else if(this.g&&this.g.audioTracks){i=Array.from(this.g.audioTracks),e=De(e),r=n=null;for(var a=(i=c(i)).next();!a.done;a=i.next()){var o=Vn(a=a.value);De(o.language)==e&&(n=a,t?o.roles.includes(t)&&(r=a):0==o.roles.length&&(r=a))}r?Ll(this,r):n&&Ll(this,n)}},i.Ie=function(e,t,n){if(n=void 0!==n&&n,this.i&&this.F)this.Xa=e,this.Kc=t||"",this.Ec=n,(e=Xn(this.i.textStreams,this.Xa,this.Kc,this.Ec)[0]||null)&&e!=this.j.s&&(nl(this.s.h,e,!1),this.h.streaming.alwaysStreamText||this.Nb())&&($s(this.j,e),Ul(this));else{var r=De(e);(e=this.yb().find((function(e){return De(e.language)==r&&(!t||e.roles.includes(t))&&e.forced==n})))&&this.Je(e)}},i.Fh=function(e){if(this.i&&this.F){for(var t=null,n=c(this.i.variants),r=n.next();!r.done;r=n.next())if((r=r.value).audio.label==e){t=r;break}null!=t&&(this.La=new vr(t.language,"",0,e),Rl(this))}},i.Nb=function(){var e=this.aa;return this.I?this.I.m.isTextVisible():this.g&&this.g.src&&this.g.textTracks?ml(this).some((function(e){return"showing"==e.mode})):e},i.Gf=function(){return this.g&&this.g.src&&this.g.textTracks?vl(this).map((function(e){return Gn(e)})):[]},i.Cg=function(e){var t=De(e),n=vl(this).filter((function(e){return De(e.language)==t}));if(!n||!n.length)return[];e=[];for(var r=new Set,i=(n=c(n)).next();!i.done;i=n.next())if((i=i.value)&&i.cues)for(var a=(i=c(i.cues)).next();!a.done;a=i.next()){var o=a.value;(a=o.id)&&""!=a||(a=o.startTime+"-"+o.endTime+"-"+o.text),o={id:a,title:o.text,startTime:o.startTime,endTime:o.endTime},r.has(a)||(e.push(o),r.add(a))}return e},i.Se=function(e){if(e=!!e,this.aa!=e){if(this.aa=e,this.l==rc)this.I.m.setTextVisibility(e),this.h.streaming.alwaysStreamText||(e?this.j.s||0<(e=Xn(this.i.textStreams,this.Xa,this.Kc,this.Ec)).length&&($s(this.j,e[0]),Ul(this)):function(e){var t=e.j.get(ke);t&&(ou(t),su(t).catch((function(){})),e.j.delete(ke)),e.s=null}(this.j));else if(this.g&&this.g.src&&this.g.textTracks)for(var t=ml(this),n=(t=c(t)).next();!n.done;n=t.next())"disabled"!=(n=n.value).mode&&(n.mode=e?"showing":"hidden");Bl(this)}},i.Tg=function(){if(!this.T())return null;var e=this.ua.l,t=0;if(this.F)t=this.F.kd();else if(e){if(null==e.startTime)return new Date;t=e.startTime}return this.i?new Date(1e3*(this.i.presentationTimeline.i+t)):this.g&&this.g.getStartDate?(e=this.g.getStartDate(),isNaN(e.getTime())?null:new Date(e.getTime()+1e3*t)):null},i.Jf=function(){if(!this.T())return null;if(this.i)return new Date(1e3*this.i.presentationTimeline.i);if(this.g&&this.g.getStartDate){var e=this.g.getStartDate();return isNaN(e.getTime())?null:e}return null},i.jb=function(){if(this.l==rc)return this.I.jb();var e={total:[],audio:[],video:[],text:[]};return this.l==ic&&(e.total=Ro(this.g.buffered)),e},i.getStats=function(){if(this.l!=rc&&this.l!=ic)return{width:NaN,height:NaN,streamBandwidth:NaN,decodedFrames:NaN,droppedFrames:NaN,corruptedFrames:NaN,stallsDetected:NaN,gapsJumped:NaN,estimatedBandwidth:NaN,completionPercent:NaN,loadLatency:NaN,manifestTimeSeconds:NaN,drmTimeSeconds:NaN,playTime:NaN,pauseTime:NaN,bufferingTime:NaN,licenseTime:NaN,liveLatency:NaN,maxSegmentDuration:NaN,switchHistory:[],stateHistory:[]};Cl(this);var e=this.g,t=e.currentTime/e.duration;if(!isNaN(t)){var n=this.s;t=Math.round(100*t),n.i=isNaN(n.i)?t:Math.max(n.i,t)}if(this.F&&(this.s.O=this.F.mf(),this.s.P=this.F.nf()),e.getVideoPlaybackQuality){n=e.getVideoPlaybackQuality(),t=this.s;var r=Number(n.totalVideoFrames);t.M=Number(n.droppedVideoFrames),t.K=r,this.s.J=Number(n.corruptedVideoFrames)}this.m?n=(n=this.m).J?n.J:NaN:n=NaN,this.s.B=n,this.l==rc&&((n=this.j.l)&&(this.s.F=(this.J?this.J.i:1)*n.bandwidth),n&&n.video&&(t=this.s,r=n.video.height||NaN,t.s=n.video.width||NaN,t.l=r),this.T()&&(n=this.Jf().valueOf()+1e3*this.Ja().end,this.s.G=(Date.now()-n)/1e3),this.i&&this.i.presentationTimeline&&(this.s.I=this.i.presentationTimeline.g),n=this.C.getBandwidthEstimate(),this.s.C=n),this.l==ic&&(n=this.s,t=e.videoHeight||NaN,n.s=e.videoWidth||NaN,n.l=t);var i=this.s;e=i.s,n=i.l,t=i.F,r=i.K;for(var a=i.M,o=i.J,s=i.P,u=i.O,l=i.C,d=i.i,h=i.m,f=i.H,p=i.j,g=el(i.g,"playing"),m=el(i.g,"paused"),v=el(i.g,"buffering"),y=i.B,b=i.G,x=i.I,w=function(e){function t(e){return{timestamp:e.timestamp,state:e.state,duration:e.duration}}for(var n=[],r=c(e.h),i=r.next();!i.done;i=r.next())n.push(t(i.value));return e.g&&n.push(t(e.g)),n}(i.g),T=[],A=(i=c(i.h.g)).next();!A.done;A=i.next())A=A.value,T.push({timestamp:A.timestamp,id:A.id,type:A.type,fromAdaptation:A.fromAdaptation,bandwidth:A.bandwidth});return{width:e,height:n,streamBandwidth:t,decodedFrames:r,droppedFrames:a,corruptedFrames:o,stallsDetected:s,gapsJumped:u,estimatedBandwidth:l,completionPercent:d,loadLatency:h,manifestTimeSeconds:f,drmTimeSeconds:p,playTime:g,pauseTime:m,bufferingTime:v,licenseTime:y,liveLatency:b,maxSegmentDuration:x,stateHistory:w,switchHistory:T}},i.lg=function(e,t,n,r,i,a,o){o=void 0!==o&&o;var s,u,l,c,d,h,f,p,g,m,v=this;return L((function(y){switch(y.g){case 1:if(v.l!=rc&&v.l!=ic)throw new be(1,7,7004);if(r){y.D(2);break}return w(y,yl(v,e),3);case 3:r=y.h;case 2:if(s=[],v.G)try{s=v.G.getServerSideCuePoints()}catch(b){}if(v.l!=ic){y.D(4);break}return o&&(n="forced"),w(y,bl(v,e,t,n,r,a||"",s),5);case 5:if(u=v.yb(),l=u.find((function(e){return e.language==t&&e.label==(a||"")&&e.kind==n})))return Pl(v),y.return(l);throw new be(1,2,2012);case 4:if(c=Ce,1/0==(d=v.i.presentationTimeline.getDuration()))throw new be(1,4,4033);if(!s.length){y.D(6);break}return w(y,xl(v,e,v.H,v.h.streaming.retryParameters),7);case 7:h=y.h,f=wl(v,h,r,s),p=new Blob([f],{type:"text/vtt"}),e=ss(p),r="text/vtt";case 6:if(g={id:v.hf++,originalId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:Ns(0,d,[e]),mimeType:r||"",codecs:i||"",kind:n,encrypted:!1,drmInfos:[],keyIds:new Set,language:t,label:a||null,type:c.ha,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],forced:!!o,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null},m=pn(g.mimeType,g.codecs),!xn(m))throw new be(2,2,2014,r);return v.i.textStreams.push(g),Pl(v),y.return(jn(g))}}))},i.mg=function(e,t){var n,r,i,a,o,s,u,l,d,h,f,p,g,m,v,y,b=this;return L((function(x){switch(x.g){case 1:if(b.l!=rc&&b.l!=ic)throw new be(1,7,7004);if(b.l==ic)throw new be(1,2,2016);if(t){x.D(2);break}return w(x,yl(b,e),3);case 3:t=x.h;case 2:if("text/vtt"!=t)throw new be(1,2,2017,e);if(n=Ce,1/0==(r=b.i.presentationTimeline.getDuration()))throw new be(1,4,4045);return w(x,xl(b,e,b.H,b.h.streaming.retryParameters),4);case 4:if(i=x.h,!(a=Sn[t]))throw new be(2,2,2014,t);for(o=a(),s={periodStart:0,segmentStart:0,segmentEnd:r,vttOffset:0},u=Et(i),l=o.parseMedia(u,s),d=[],h={},f=c(l),p=f.next();!p.done;h={uc:h.uc},p=f.next())g=p.value,h.uc=Ae([e],[g.payload])[0],m=new So(g.startTime,g.endTime,function(e){return function(){return[e.uc]}}(h),0,null,null,0,0,1/0),h.uc.includes("#xywh")&&(4===(v=h.uc.split("#xywh=")[1].split(",")).length&&m.$f({height:parseInt(v[3],10),positionX:parseInt(v[0],10),positionY:parseInt(v[1],10),width:parseInt(v[2],10)})),d.push(m);return y={id:b.hf++,originalId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new Ms(d),mimeType:t||"",codecs:"",kind:"",encrypted:!1,drmInfos:[],keyIds:new Set,language:"und",label:null,type:n.Ac,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,tilesLayout:"1x1"},b.i.imageStreams.push(y),Pl(b),x.return(Fn(y))}}))},i.kg=function(e,t,n){var r,i,a,o,s=this;return L((function(u){switch(u.g){case 1:if(s.l!=rc&&s.l!=ic)throw new be(1,7,7004);if(n){u.D(2);break}return w(u,yl(s,e),3);case 3:n=u.h;case 2:if(r=[],s.G)try{r=s.G.getServerSideCuePoints()}catch(l){}return w(u,bl(s,e,t,"chapters",n,"",r),4);case 4:if(i=u.h,a=s.Gf(),!(o=a.find((function(e){return e.language==t})))){u.D(5);break}return w(u,new Promise((function(e,t){s.B.Da(i,"load",e),s.B.Da(i,"error",(function(){t(new be(1,2,2015))}))})),6);case 6:return u.return(o);case 5:throw new be(1,2,2012)}}))},i.Oe=function(e,t){this.Qc.width=e,this.Qc.height=t},i.Fe=function(e){if(this.l==rc){var t=this.j;if(e=void 0===e?.1:e,t.h.g)t=!1;else if(t.B)t=!1;else{for(var n=c(t.j.values()),r=n.next();!r.done;r=n.next())!(r=r.value).Mc||r.Ia||r.eb||(r.Mc=!1,au(t,r,e));t=!0}}else t=!1;return t},i.Og=function(){return X("Shaka Player's internal Manifest structure is NOT covered by semantic versioning compatibility guarantees.  It may change at any time!  Please consider filing a feature request for whatever you use getManifest() for."),this.i},i.Pg=function(){return this.Kd},i.Te=function(e){this.Bd=e},z("shaka.Player",il),il.prototype.setVideoContainer=il.prototype.Te,il.prototype.getManifestParserFactory=il.prototype.Pg,il.prototype.getManifest=il.prototype.Og,il.prototype.retryStreaming=il.prototype.Fe,il.prototype.setMaxHardwareResolution=il.prototype.Oe,il.prototype.addChaptersTrack=il.prototype.kg,il.prototype.addThumbnailsTrack=il.prototype.mg,il.prototype.addTextTrackAsync=il.prototype.lg,il.prototype.getStats=il.prototype.getStats,il.prototype.getBufferedInfo=il.prototype.jb,il.prototype.getPresentationStartTimeAsDate=il.prototype.Jf,il.prototype.getPlayheadTimeAsDate=il.prototype.Tg,il.prototype.setTextTrackVisibility=il.prototype.Se,il.prototype.getChapters=il.prototype.Cg,il.prototype.getChaptersTracks=il.prototype.Gf,il.prototype.isTextTrackVisible=il.prototype.Nb,il.prototype.selectVariantsByLabel=il.prototype.Fh,il.prototype.selectTextLanguage=il.prototype.Ie,il.prototype.selectAudioLanguage=il.prototype.Md,il.prototype.getTextLanguages=il.prototype.Wg,il.prototype.getAudioLanguages=il.prototype.yg,il.prototype.getTextLanguagesAndRoles=il.prototype.Xg,il.prototype.getAudioLanguagesAndRoles=il.prototype.zg,il.prototype.selectVariantTrack=il.prototype.Ke,il.prototype.selectTextTrack=il.prototype.Je,il.prototype.getThumbnails=il.prototype.Zg,il.prototype.getImageTracks=il.prototype.Jg,il.prototype.getTextTracks=il.prototype.yb,il.prototype.getVariantTracks=il.prototype.Qa,il.prototype.cancelTrickPlay=il.prototype.vf,il.prototype.trickPlay=il.prototype.Ze,il.prototype.getPlaybackRate=il.prototype.xb,il.prototype.isBuffering=il.prototype.Pc,il.prototype.getKeyStatuses=il.prototype.ud,il.prototype.getExpiration=il.prototype.Gc,il.prototype.drmInfo=il.prototype.drmInfo,il.prototype.keySystem=il.prototype.keySystem,il.prototype.goToLive=il.prototype.dh,il.prototype.seekRange=il.prototype.Ja,il.prototype.isAudioOnly=il.prototype.hc,il.prototype.isInProgress=il.prototype.Lb,il.prototype.isLive=il.prototype.T,il.prototype.getAdManager=il.prototype.sd,il.prototype.getAssetUri=il.prototype.le,il.prototype.getNetworkingEngine=il.prototype.Hc,il.prototype.getMediaElement=il.prototype.Rg,il.prototype.getLoadMode=il.prototype.If,il.prototype.resetConfiguration=il.prototype.Ch,il.prototype.getBufferFullness=il.prototype.Ag,il.prototype.getConfiguration=il.prototype.getConfiguration,il.prototype.configure=il.prototype.configure,il.prototype.load=il.prototype.load,il.prototype.updateStartTime=il.prototype.Ph,il.prototype.unload=il.prototype.bf,il.prototype.detach=il.prototype.detach,il.prototype.attachCanvas=il.prototype.qf,il.prototype.attach=il.prototype.Bc,il.probeSupport=function(e){var t,n,r,i,a;return e=void 0===e||e,L((function(o){if(1==o.g)return t={},e?w(o,function(){var e,t,n,r,i,a;return L((function(o){return 1==o.g?(e="org.w3.clearkey com.widevine.alpha com.microsoft.playready com.microsoft.playready.recommendation com.apple.fps.1_0 com.apple.fps com.adobe.primetime".split(" "),n=[{videoCapabilities:t=[{contentType:'video/mp4; codecs="avc1.42E01E"'},{contentType:'video/webm; codecs="vp8"'}],persistentState:"required",sessionTypes:["persistent-license"]},{initDataTypes:["cenc"],videoCapabilities:t}],r=new Map,i=function(e){var t,i,a;return L((function(o){switch(o.g){case 1:if(A(o,2),"org.w3.clearkey"===e&&jt())throw Error("Unsupported keySystem");return w(o,navigator.requestMediaKeySystemAccess(e,n),4);case 4:return t=o.h,a=!!(i=t.getConfiguration().sessionTypes)&&i.includes("persistent-license"),Ft("Tizen 3")&&(a=!1),r.set(e,{persistentState:a}),w(o,t.createMediaKeys(),5);case 5:E(o,0);break;case 2:I(o),r.set(e,null),T(o)}}))},a=e.map((function(e){return i(e)})),w(o,Promise.all(a),2)):o.return(Yr(r))}))}(),3):o.D(2);2!=o.g&&(t=o.h);var s={};if(Nt()){for(var u in aa)s[u]=!0;for(var l in oa)s[l]=!0}u={mpd:"application/dash+xml",m3u8:"application/x-mpegurl",ism:"application/vnd.ms-sstr+xml"};for(var h=(l=c(["application/dash+xml","application/x-mpegurl","application/vnd.apple.mpegurl","application/vnd.ms-sstr+xml"])).next();!h.done;h=l.next())s[h=h.value]=Nt()?!!aa[h]:Lt(h);for(var f in u)s[f]=Nt()?!!oa[f]:Lt(u[f]);for(n=s,s={},u=(f=c(f='video/mp4; codecs="avc1.42E01E",video/mp4; codecs="avc3.42E01E",video/mp4; codecs="hev1.1.6.L93.90",video/mp4; codecs="hvc1.1.6.L93.90",video/mp4; codecs="hev1.2.4.L153.B0"; eotf="smpte2084",video/mp4; codecs="hvc1.2.4.L153.B0"; eotf="smpte2084",video/mp4; codecs="vp9",video/mp4; codecs="vp09.00.10.08",video/mp4; codecs="av01.0.01M.08",audio/mp4; codecs="mp4a.40.2",audio/mp4; codecs="ac-3",audio/mp4; codecs="ec-3",audio/mp4; codecs="opus",audio/mp4; codecs="flac",video/webm; codecs="vp8",video/webm; codecs="vp9",video/webm; codecs="vp09.00.10.08",audio/webm; codecs="vorbis",audio/webm; codecs="opus",video/mp2t; codecs="avc1.42E01E",video/mp2t; codecs="avc3.42E01E",video/mp2t; codecs="hvc1.1.6.L93.90",video/mp2t; codecs="mp4a.40.2",video/mp2t; codecs="ac-3",video/mp2t; codecs="ec-3",text/vtt,application/mp4; codecs="wvtt",application/ttml+xml,application/mp4; codecs="stpp"'.split(",").concat(d(ls)))).next();!u.done;u=f.next())s[u=u.value]=Nt()?!!xn(u)||(Ye(u)||ln(u)):Lt(u),s[l=u.split(";")[0]]=s[l]||s[u];for(a in r={manifest:n,media:s,drm:t},i=sc)r[a]=i[a]();return o.return(r)}))},il.isBrowserSupported=sl,il.setAdManagerFactory=function(e){uc=e},il.registerSupportPlugin=function(e,t){sc[e]=t},il.prototype.destroy=il.prototype.destroy;var tc=0,nc=1,rc=2,ic=3;il.LoadMode={DESTROYED:tc,NOT_LOADED:nc,MEDIA_SOURCE:rc,SRC_EQUALS:ic},il.version="v4.3.4";var ac=["4","3"];dr=new function(e){this.g=e,this.i=lr,this.h=cr}(new sr(Number(ac[0]),Number(ac[1])));var oc=["output-restricted","internal-error"],sc={},uc=null,lc={mp4:"video/mp4",m4v:"video/mp4",m4a:"audio/mp4",webm:"video/webm",weba:"audio/webm",mkv:"video/webm",ts:"video/mp2t",ogv:"video/ogg",ogg:"audio/ogg",mpg:"video/mpeg",mpeg:"video/mpeg",m3u8:"application/x-mpegurl",mpd:"application/dash+xml",mp3:"audio/mpeg",aac:"audio/aac",flac:"audio/flac",wav:"audio/wav"},cc={sbv:"text/x-subviewer",srt:"text/srt",vtt:"text/vtt",webvtt:"text/vtt",ttml:"application/ttml+xml",lrc:"application/x-subtitle-lrc",ssa:"text/x-ssa",ass:"text/x-ssa"};function dc(){this.h=[],this.j=this.i=this.g=0}function hc(e,t,n){var r=this;this.h=e,this.g=t,this.m=n,this.i=!1,this.l=this.g.getVolume(),this.j=new Hr,this.j.o(this.g,google.ima.AdEvent.Type.PAUSED,(function(){r.i=!0})),this.j.o(this.g,google.ima.AdEvent.Type.RESUMED,(function(){r.i=!1}))}function fc(t,n,r,i){var a=this;this.s=t,this.i=n,this.B=null,this.C=NaN,this.l=i,this.j=null,this.h=new Hr,google.ima.settings.setLocale(r),(t=new google.ima.AdDisplayContainer(this.s,this.i)).initialize(),this.m=new google.ima.AdsLoader(t),this.m.getSettings().setPlayerType("shaka-player"),this.m.getSettings().setPlayerVersion("v4.3.4"),this.g=null,this.h.Da(this.m,google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,(function(t){!function(t,n){t.l(new G("ads-loaded",(new Map).set("loadTime",Date.now()/1e3-t.C))),t.g=n.getAdsManager(t.i),t.l(new G("ima-ad-manager-loaded",(new Map).set("imaAdManager",t.g)));var r=t.g.getCuePoints();if(r.length){n=[];for(var i=(r=c(r)).next();!i.done;i=r.next())n.push({start:i.value,end:null});t.l(new G("ad-cue-points-changed",(new Map).set("cuepoints",n)))}!function(e){function t(t,n){t=(new Map).set("originalEvent",t),e.l(new G(n,t))}e.h.o(e.g,google.ima.AdErrorEvent.Type.AD_ERROR,(function(t){pc(e,t)})),e.h.o(e.g,google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,(function(t){mc(e,t)})),e.h.o(e.g,google.ima.AdEvent.Type.STARTED,(function(t){mc(e,t)})),e.h.o(e.g,google.ima.AdEvent.Type.FIRST_QUARTILE,(function(e){t(e,"ad-first-quartile")})),e.h.o(e.g,google.ima.AdEvent.Type.MIDPOINT,(function(e){t(e,"ad-midpoint")})),e.h.o(e.g,google.ima.AdEvent.Type.THIRD_QUARTILE,(function(e){t(e,"ad-third-quartile")})),e.h.o(e.g,google.ima.AdEvent.Type.COMPLETE,(function(e){t(e,"ad-complete")})),e.h.o(e.g,google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,(function(t){vc(e,t)})),e.h.o(e.g,google.ima.AdEvent.Type.ALL_ADS_COMPLETED,(function(t){vc(e,t)})),e.h.o(e.g,google.ima.AdEvent.Type.SKIPPED,(function(e){t(e,"ad-skipped")})),e.h.o(e.g,google.ima.AdEvent.Type.VOLUME_CHANGED,(function(e){t(e,"ad-volume-changed")})),e.h.o(e.g,google.ima.AdEvent.Type.VOLUME_MUTED,(function(e){t(e,"ad-muted")})),e.h.o(e.g,google.ima.AdEvent.Type.PAUSED,(function(n){e.j&&(e.j.i=!0,t(n,"ad-paused"))})),e.h.o(e.g,google.ima.AdEvent.Type.RESUMED,(function(n){e.j&&(e.j.i=!1,t(n,"ad-resumed"))})),e.h.o(e.g,google.ima.AdEvent.Type.SKIPPABLE_STATE_CHANGED,(function(n){e.j&&t(n,"ad-skip-state-changed")})),e.h.o(e.g,google.ima.AdEvent.Type.CLICK,(function(e){t(e,"ad-clicked")})),e.h.o(e.g,google.ima.AdEvent.Type.AD_PROGRESS,(function(e){t(e,"ad-progress")})),e.h.o(e.g,google.ima.AdEvent.Type.AD_BUFFERING,(function(e){t(e,"ad-buffering")})),e.h.o(e.g,google.ima.AdEvent.Type.IMPRESSION,(function(e){t(e,"ad-impression")})),e.h.o(e.g,google.ima.AdEvent.Type.DURATION_CHANGE,(function(e){t(e,"ad-duration-changed")})),e.h.o(e.g,google.ima.AdEvent.Type.USER_CLOSE,(function(e){t(e,"ad-closed")})),e.h.o(e.g,google.ima.AdEvent.Type.LOADED,(function(e){t(e,"ad-loaded")})),e.h.o(e.g,google.ima.AdEvent.Type.ALL_ADS_COMPLETED,(function(e){t(e,"all-ads-completed")})),e.h.o(e.g,google.ima.AdEvent.Type.LINEAR_CHANGED,(function(e){t(e,"ad-linear-changed")})),e.h.o(e.g,google.ima.AdEvent.Type.AD_METADATA,(function(e){t(e,"ad-metadata")})),e.h.o(e.g,google.ima.AdEvent.Type.LOG,(function(e){t(e,"ad-recoverable-error")})),e.h.o(e.g,google.ima.AdEvent.Type.AD_BREAK_READY,(function(e){t(e,"ad-break-ready")})),e.h.o(e.g,google.ima.AdEvent.Type.INTERACTION,(function(e){t(e,"ad-interaction")}))}(t);try{t.g.init(t.i.offsetWidth,t.i.offsetHeight,gc(t)?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL),t.h.o(t.i,"loadeddata",(function(){t.g.resize(t.i.offsetWidth,t.i.offsetHeight,gc(t)?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)})),"ResizeObserver"in e?(t.B=new ResizeObserver((function(){t.g.resize(t.i.offsetWidth,t.i.offsetHeight,gc(t)?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)})),t.B.observe(t.i)):t.h.o(document,"fullscreenchange",(function(){t.g.resize(t.i.offsetWidth,t.i.offsetHeight,gc(t)?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)})),t.i.addEventListener("play",(function(){t.g.start()}),{once:!0})}catch(a){vc(t,null)}}(a,t)})),this.h.o(this.m,google.ima.AdErrorEvent.Type.AD_ERROR,(function(e){pc(a,e)})),this.i.onended=function(){a.m.contentComplete()}}function pc(e,t){t.getError(),vc(e,null),e.l(new G("ad-cue-points-changed",(new Map).set("cuepoints",[])))}function gc(e){return document.fullscreenEnabled?!!document.fullscreenElement:!!(e=e.i).webkitSupportsFullscreen&&e.webkitDisplayingFullscreen}function mc(e,t){var n=t.getAd();n?(e.j=new hc(n,e.g,e.i),t=(new Map).set("ad",e.j).set("sdkAdObject",n).set("originalEvent",t),e.l(new G("ad-started",t)),e.j.isLinear()&&(e.s.setAttribute("ad-active","true"),e.i.pause())):X("The IMA SDK fired a "+t.type+" event with no associated ad. Unable to play ad!")}function vc(e,t){e.l(new G("ad-stopped",(new Map).set("originalEvent",t))),e.j&&e.j.isLinear()&&(e.s.removeAttribute("ad-active"),e.i.play())}function yc(e,t){this.i=e,this.h=null,this.g=t}function bc(e,t,n,r){var i=this;this.B=e,this.l=t,this.j=null,this.I=NaN,this.i=r,this.H=!1,this.C=this.m=this.s=null,this.F="",this.G=[],this.h=new Hr,(e=new google.ima.dai.api.UiSettings).setLocale(n),this.g=new google.ima.dai.api.StreamManager(this.l,this.B,e),this.i(new G("ima-stream-manager-loaded",(new Map).set("imaStreamManager",this.g))),this.h.o(this.g,google.ima.dai.api.StreamEvent.Type.LOADED,(function(e){!function(e,t){e.i(new G("ads-loaded",(new Map).set("loadTime",Date.now()/1e3-e.I))),t=t.getStreamData().url,e.j.resolve(t),e.j=null,e.H||e.h.o(e.l,"seeked",(function(){var t=e.l.currentTime;if(0!=t){e.g.streamTimeForContentTime(t);var n=e.g.previousCuePointForStreamTime(t);n&&!n.played&&(e.s=t,e.l.currentTime=n.start)}}))}(i,e)})),this.h.o(this.g,google.ima.dai.api.StreamEvent.Type.ERROR,(function(){i.F.length?i.j.resolve(i.F):i.j.reject("IMA Stream request returned an error and there was no backup asset uri provided."),i.j=null})),this.h.o(this.g,google.ima.dai.api.StreamEvent.Type.AD_BREAK_STARTED,(function(){})),this.h.o(this.g,google.ima.dai.api.StreamEvent.Type.STARTED,(function(e){e=e.getAd(),i.m=new yc(e,i.l),i.C&&(i.m.h=i.C),i.i(new G("ad-started",(new Map).set("ad",i.m))),i.B.setAttribute("ad-active","true")})),this.h.o(this.g,google.ima.dai.api.StreamEvent.Type.AD_BREAK_ENDED,(function(){i.B.removeAttribute("ad-active");var e=i.l.currentTime;i.s&&i.s>e&&(i.l.currentTime=i.s,i.s=null)})),this.h.o(this.g,google.ima.dai.api.StreamEvent.Type.AD_PROGRESS,(function(e){i.C=e.getStreamData().adProgressData,i.m&&(i.m.h=i.C)})),this.h.o(this.g,google.ima.dai.api.StreamEvent.Type.FIRST_QUARTILE,(function(){i.i(new G("ad-first-quartile"))})),this.h.o(this.g,google.ima.dai.api.StreamEvent.Type.MIDPOINT,(function(){i.i(new G("ad-midpoint"))})),this.h.o(this.g,google.ima.dai.api.StreamEvent.Type.THIRD_QUARTILE,(function(){i.i(new G("ad-third-quartile"))})),this.h.o(this.g,google.ima.dai.api.StreamEvent.Type.COMPLETE,(function(){i.i(new G("ad-complete")),i.i(new G("ad-stopped")),i.B.removeAttribute("ad-active"),i.m=null})),this.h.o(this.g,google.ima.dai.api.StreamEvent.Type.SKIPPED,(function(){i.i(new G("ad-skipped")),i.i(new G("ad-stopped"))})),this.h.o(this.g,google.ima.dai.api.StreamEvent.Type.CUEPOINTS_CHANGED,(function(e){var t=e.getStreamData();e=[];for(var n=(t=c(t.cuepoints)).next();!n.done;n=t.next())n=n.value,e.push({start:n.start,end:n.end});i.G=e,i.i(new G("ad-cue-points-changed",(new Map).set("cuepoints",e)))}))}function xc(){ee.call(this),this.g=this.i=null,this.h=new dc,this.j=navigator.language}function wc(e){return JSON.stringify(e,(function(e,t){if("function"!=typeof t){if(t instanceof Event||t instanceof G){var n={};for(r in t)(e=t[r])&&"object"==typeof e?"detail"==r&&(n[r]=e):r in Event||(n[r]=e);return n}if(t instanceof Error){var r=new Set(["name","message","stack"]);for(n in t)r.add(n);for(n=(e=c(Object.getOwnPropertyNames(t))).next();!n.done;n=e.next())r.add(n.value);for(e={},n=(r=c(r)).next();!n.done;n=r.next())e[n=n.value]=t[n];t={__type__:"Error",contents:e}}else if(t instanceof TimeRanges){for(r={__type__:"TimeRanges",length:t.length,start:[],end:[]},n=(t=c(Ro(t))).next();!n.done;n=t.next())e=(n=n.value).end,r.start.push(n.start),r.end.push(e);t=r}else t=t instanceof Uint8Array?{__type__:"Uint8Array",entries:Array.from(t)}:"number"==typeof t?isNaN(t)?"NaN":isFinite(t)?t:0>t?"-Infinity":"Infinity":t;return t}}))}function Tc(e){return JSON.parse(e,(function(e,t){if("NaN"==t)var n=NaN;else if("-Infinity"==t)n=-1/0;else if("Infinity"==t)n=1/0;else if(t&&"object"==typeof t&&"TimeRanges"==t.__type__)n=function(e){return{length:e.length,start:function(t){return e.start[t]},end:function(t){return e.end[t]}}}(t);else if(t&&"object"==typeof t&&"Uint8Array"==t.__type__)n=new Uint8Array(t.entries);else if(t&&"object"==typeof t&&"Error"==t.__type__){for(n in e=t.contents,t=Error(e.message),e)t[n]=e[n];n=t}else n=t;return n}))}(i=hc.prototype).getDuration=function(){return this.h.getDuration()},i.getMinSuggestedDuration=function(){return this.h.getMinSuggestedDuration()},i.getRemainingTime=function(){return this.g.getRemainingTime()},i.isPaused=function(){return this.i},i.isSkippable=function(){return 0<=this.h.getSkipTimeOffset()},i.getTimeUntilSkippable=function(){var e=this.h.getSkipTimeOffset();return e=this.getRemainingTime()-e,Math.max(e,0)},i.canSkipNow=function(){return this.g.getAdSkippableState()},i.skip=function(){return this.g.skip()},i.pause=function(){return this.g.pause()},i.play=function(){return this.g.resume()},i.getVolume=function(){return this.g.getVolume()},i.setVolume=function(e){return this.g.setVolume(e)},i.isMuted=function(){return 0==this.g.getVolume()},i.isLinear=function(){return this.h.isLinear()},i.resize=function(e,t){var n=!1,r=this.m;document.fullscreenEnabled?n=!!document.fullscreenElement:r.webkitSupportsFullscreen&&(n=r.webkitDisplayingFullscreen),this.g.resize(e,t,n?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)},i.setMuted=function(e){e?(this.l=this.getVolume(),this.setVolume(0)):this.setVolume(this.l)},i.getSequenceLength=function(){var e=this.h.getAdPodInfo();return null==e?1:e.getTotalAds()},i.getPositionInSequence=function(){var e=this.h.getAdPodInfo();return null==e?1:e.getAdPosition()},i.getTitle=function(){return this.h.getTitle()},i.getDescription=function(){return this.h.getDescription()},i.release=function(){this.g=this.h=null},z("shaka.ads.ClientSideAd",hc),hc.prototype.release=hc.prototype.release,hc.prototype.getDescription=hc.prototype.getDescription,hc.prototype.getTitle=hc.prototype.getTitle,hc.prototype.getPositionInSequence=hc.prototype.getPositionInSequence,hc.prototype.getSequenceLength=hc.prototype.getSequenceLength,hc.prototype.setMuted=hc.prototype.setMuted,hc.prototype.resize=hc.prototype.resize,hc.prototype.isLinear=hc.prototype.isLinear,hc.prototype.isMuted=hc.prototype.isMuted,hc.prototype.setVolume=hc.prototype.setVolume,hc.prototype.getVolume=hc.prototype.getVolume,hc.prototype.play=hc.prototype.play,hc.prototype.pause=hc.prototype.pause,hc.prototype.skip=hc.prototype.skip,hc.prototype.canSkipNow=hc.prototype.canSkipNow,hc.prototype.getTimeUntilSkippable=hc.prototype.getTimeUntilSkippable,hc.prototype.isSkippable=hc.prototype.isSkippable,hc.prototype.isPaused=hc.prototype.isPaused,hc.prototype.getRemainingTime=hc.prototype.getRemainingTime,hc.prototype.getMinSuggestedDuration=hc.prototype.getMinSuggestedDuration,hc.prototype.getDuration=hc.prototype.getDuration,fc.prototype.stop=function(){this.g&&this.g.stop(),this.s&&xu(this.s)},fc.prototype.release=function(){this.stop(),this.B&&this.B.disconnect(),this.h&&this.h.release(),this.g&&this.g.destroy(),this.m.destroy()},(i=yc.prototype).getDuration=function(){return this.h?this.h.duration:-1},i.getMinSuggestedDuration=function(){return this.getDuration()},i.getRemainingTime=function(){return this.h?this.h.duration-this.h.currentTime:-1},i.isPaused=function(){return this.g.paused},i.isSkippable=function(){return this.i.isSkippable()},i.getTimeUntilSkippable=function(){var e=this.i.getSkipTimeOffset();return e=this.getRemainingTime()-e,Math.max(e,0)},i.canSkipNow=function(){return 0==this.getTimeUntilSkippable()},i.skip=function(){this.g.currentTime+=this.getRemainingTime()},i.pause=function(){return this.g.pause()},i.play=function(){return this.g.play()},i.getVolume=function(){return this.g.volume},i.setVolume=function(e){this.g.volume=e},i.isMuted=function(){return this.g.muted},i.isLinear=function(){return!0},i.resize=function(){},i.setMuted=function(e){this.g.muted=e},i.getSequenceLength=function(){var e=this.i.getAdPodInfo();return null==e?1:e.getTotalAds()},i.getPositionInSequence=function(){var e=this.i.getAdPodInfo();return null==e?1:e.getAdPosition()},i.getTitle=function(){return this.i.getTitle()},i.getDescription=function(){return this.i.getDescription()},i.release=function(){this.g=this.h=this.i=null},z("shaka.ads.ServerSideAd",yc),yc.prototype.release=yc.prototype.release,yc.prototype.getDescription=yc.prototype.getDescription,yc.prototype.getTitle=yc.prototype.getTitle,yc.prototype.getPositionInSequence=yc.prototype.getPositionInSequence,yc.prototype.getSequenceLength=yc.prototype.getSequenceLength,yc.prototype.setMuted=yc.prototype.setMuted,yc.prototype.resize=yc.prototype.resize,yc.prototype.isLinear=yc.prototype.isLinear,yc.prototype.isMuted=yc.prototype.isMuted,yc.prototype.setVolume=yc.prototype.setVolume,yc.prototype.getVolume=yc.prototype.getVolume,yc.prototype.play=yc.prototype.play,yc.prototype.pause=yc.prototype.pause,yc.prototype.skip=yc.prototype.skip,yc.prototype.canSkipNow=yc.prototype.canSkipNow,yc.prototype.getTimeUntilSkippable=yc.prototype.getTimeUntilSkippable,yc.prototype.isSkippable=yc.prototype.isSkippable,yc.prototype.isPaused=yc.prototype.isPaused,yc.prototype.getRemainingTime=yc.prototype.getRemainingTime,yc.prototype.getMinSuggestedDuration=yc.prototype.getMinSuggestedDuration,yc.prototype.getDuration=yc.prototype.getDuration,bc.prototype.stop=function(){this.F="",this.s=null,this.G=[]},bc.prototype.release=function(){this.stop(),this.h&&this.h.release()},bc.prototype.onCueMetadataChange=function(e){if(e.key&&e.data){var t={};t[e.key]=e.data,this.g.onTimedMetadata(t)}},v(xc,ee),(i=xc.prototype).setLocale=function(e){this.j=e},i.initClientSide=function(t,n){var r=this;if(!e.google||!google.ima||!google.ima.AdsLoader)throw new be(2,10,1e4);this.i&&this.i.release(),this.i=new fc(t,n,this.j,(function(e){if(e&&e.type)switch(e.type){case"ads-loaded":r.h.h.push(e.loadTime);break;case"ad-started":r.h.g++;break;case"ad-complete":r.h.i++;break;case"ad-skipped":r.h.j++}r.dispatchEvent(e)}))},i.release=function(){this.i&&(this.i.release(),this.i=null),this.g&&(this.g.release(),this.g=null),ee.prototype.release.call(this)},i.onAssetUnload=function(){this.i&&this.i.stop(),this.g&&this.g.stop(),this.dispatchEvent(new G("ad-stopped")),this.h=new dc},i.requestClientSideAds=function(e){if(!this.i)throw new be(1,10,10001);var t=this.i;t.C=Date.now()/1e3,t.m.requestAds(e)},i.initServerSide=function(t,n){var r=this;if(!e.google||!google.ima||!google.ima.dai)throw new be(2,10,10002);this.g&&this.g.release(),this.g=new bc(t,n,this.j,(function(e){if(e&&e.type)switch(e.type){case"ads-loaded":r.h.h.push(e.loadTime);break;case"ad-started":r.h.g++;break;case"ad-complete":r.h.i++;break;case"ad-skipped":r.h.j++}r.dispatchEvent(e)}))},i.requestServerSideStream=function(e,t){if(t=void 0===t?"":t,!this.g)throw new be(1,10,10003);e.adTagParameters||(e.adTagParameters={});var n=e.adTagParameters;return(n.mpt||n.mpv)&&X('You have attempted to set "mpt" and/or "mpv" parameters of the ad tag. Please note that those parameters are used for Shaka adoption tracking and will be overriden.'),e.adTagParameters.mpt="shaka-player",e.adTagParameters.mpv="v4.3.4",(n=this.g).j?e=Promise.reject(new be(1,10,10004)):(e instanceof google.ima.dai.api.LiveStreamRequest&&(n.H=!0),n.j=new Ct,n.g.requestStream(e),n.F=t||"",n.I=Date.now()/1e3,e=n.j),e},i.replaceServerSideAdTagParameters=function(e){if(!this.g)throw new be(1,10,10003);(e.mpt||e.mpv)&&X('You have attempted to set "mpt" and/or "mpv" parameters of the ad tag. Please note that those parameters are used for Shaka adoption tracking and will be overriden.'),e.mpt="Shaka Player",e.mpv="v4.3.4",this.g.g.replaceAdTagParameters(e)},i.getServerSideCuePoints=function(){if(!this.g)throw new be(1,10,10003);return this.g.G},i.getStats=function(){var e=this.h;return{loadTimes:e.h,started:e.g,playedCompletely:e.i,skipped:e.j}},i.onDashTimedMetadata=function(e){if(this.g&&"urn:google:dai:2018"==e.schemeIdUri){var t=e.schemeIdUri,n=e.eventElement?e.eventElement.getAttribute("messageData"):null;this.g.g.processMetadata(t,n,e.startTime)}},i.onHlsTimedMetadata=function(e,t){this.g&&this.g.g.processMetadata("ID3",e.data,t)},i.onCueMetadataChange=function(e){this.g&&this.g.onCueMetadataChange(e)},z("shaka.ads.AdManager",xc),xc.prototype.onCueMetadataChange=xc.prototype.onCueMetadataChange,xc.prototype.onHlsTimedMetadata=xc.prototype.onHlsTimedMetadata,xc.prototype.onDashTimedMetadata=xc.prototype.onDashTimedMetadata,xc.prototype.getStats=xc.prototype.getStats,xc.prototype.getServerSideCuePoints=xc.prototype.getServerSideCuePoints,xc.prototype.replaceServerSideAdTagParameters=xc.prototype.replaceServerSideAdTagParameters,xc.prototype.requestServerSideStream=xc.prototype.requestServerSideStream,xc.prototype.initServerSide=xc.prototype.initServerSide,xc.prototype.requestClientSideAds=xc.prototype.requestClientSideAds,xc.prototype.onAssetUnload=xc.prototype.onAssetUnload,xc.prototype.release=xc.prototype.release,xc.prototype.initClientSide=xc.prototype.initClientSide,xc.prototype.setLocale=xc.prototype.setLocale,xc.ADS_LOADED="ads-loaded",xc.AD_STARTED="ad-started",xc.AD_FIRST_QUARTILE="ad-first-quartile",xc.AD_MIDPOINT="ad-midpoint",xc.AD_THIRD_QUARTILE="ad-third-quartile",xc.AD_COMPLETE="ad-complete",xc.AD_STOPPED="ad-stopped",xc.AD_SKIPPED="ad-skipped",xc.AD_VOLUME_CHANGED="ad-volume-changed",xc.AD_MUTED="ad-muted",xc.AD_PAUSED="ad-paused",xc.AD_RESUMED="ad-resumed",xc.AD_SKIP_STATE_CHANGED="ad-skip-state-changed",xc.CUEPOINTS_CHANGED="ad-cue-points-changed",xc.IMA_AD_MANAGER_LOADED="ima-ad-manager-loaded",xc.IMA_STREAM_MANAGER_LOADED="ima-stream-manager-loaded",xc.AD_CLICKED="ad-clicked",xc.AD_PROGRESS="ad-progress",xc.AD_BUFFERING="ad-buffering",xc.AD_IMPRESSION="ad-impression",xc.AD_DURATION_CHANGED="ad-duration-changed",xc.AD_CLOSED="ad-closed",xc.AD_LOADED="ad-loaded",xc.ALL_ADS_COMPLETED="all-ads-completed",xc.AD_LINEAR_CHANGED="ad-linear-changed",xc.AD_METADATA="ad-metadata",xc.AD_RECOVERABLE_ERROR="ad-recoverable-error",xc.AD_BREAK_READY="ad-break-ready",xc.AD_INTERACTION="ad-interaction",uc=function(){return new xc};var Ac="ended play playing pause pausing ratechange seeked seeking timeupdate volumechange".split(" "),Sc="buffered currentTime duration ended loop muted paused playbackRate seeking videoHeight videoWidth volume".split(" "),Ec=["loop","playbackRate"],Ic=["pause","play"],kc={getAssetUri:2,getAudioLanguages:4,getAudioLanguagesAndRoles:4,getBufferFullness:1,getBufferedInfo:2,getExpiration:2,getKeyStatuses:2,getPlaybackRate:2,getTextLanguages:4,getTextLanguagesAndRoles:4,getImageTracks:2,getThumbnails:2,isAudioOnly:10,isBuffering:1,isInProgress:1,isLive:10,isTextTrackVisible:1,keySystem:10,seekRange:1,getLoadMode:10},Cc={getConfiguration:4,getStats:5,getTextTracks:2,getVariantTracks:2},_c={getPlayheadTimeAsDate:1,getPresentationStartTimeAsDate:20},Mc=[["getConfiguration","configure"]],Rc=[["isTextTrackVisible","setTextTrackVisibility"]],Nc="addChaptersTrack addTextTrackAsync addThumbnailsTrack cancelTrickPlay configure getChapters getChaptersTracks resetConfiguration retryStreaming selectAudioLanguage selectTextLanguage selectTextTrack selectVariantTrack selectVariantsByLabel setTextTrackVisibility trickPlay updateStartTime goToLive".split(" "),Lc=["attach","attachCanvas","detach","load","unload"];function Dc(e,t,n,r,i,a,o){var s=this;this.I=e,this.O=o,this.j=new Rt(t),this.P=n,this.C=!1,this.B=r,this.H=i,this.K=a,this.h=this.m=!1,this.M="",this.s=null,this.F=function(){return jc(s)},this.G=function(e,t){switch((e=Tc(t)).type){case"event":var n=e.targetName,r=V(e.event);s.B(n,r);break;case"update":for(r in n=e.update)for(var i in e=s.g[r]||{},n[r])e[i]=n[r][i];s.C&&(s.P(),s.C=!1);break;case"asyncComplete":if(r=e.id,i=e.error,e=s.i[r],delete s.i[r],e)if(i){for(n in r=new be(i.severity,i.category,i.code),i)r[n]=i[n];e.reject(r)}else e.resolve()}},this.g={video:{},player:{}},this.J=0,this.i={},this.l=null,Wc.add(this)}function Pc(e,t,n){Kc=n,n.addUpdateListener(e.F),n.addMessageListener("urn:x-cast:com.google.shaka.v2",e.G),jc(e),zc(e,{type:"init",initState:t,appData:e.s}),e.l.resolve()}function Oc(e,t){var n=8003;switch(t.code){case"cancel":n=8004;break;case"timeout":n=8005;break;case"receiver_unavailable":n=8006}e.l.reject(new be(2,8,n,t))}function Uc(e,t){var n=e.K();e.l=new Ct,e.C=!0,Pc(e,n,t)}function Bc(e){var t=Kc;t.removeUpdateListener(e.F),t.removeMessageListener("urn:x-cast:com.google.shaka.v2",e.G)}function jc(e){var t=!!Kc&&"connected"==Kc.status;if(e.h&&!t){for(var n in e.H(),e.g)e.g[n]={};Fc(e)}e.h=t,e.M=t?Kc.receiver.friendlyName:"",e.j.za()}function Fc(e){for(var t in e.i){var n=e.i[t];delete e.i[t],n.reject(new be(1,7,7e3))}}function zc(e,t){t=wc(t);var n=Kc;try{n.sendMessage("urn:x-cast:com.google.shaka.v2",t,(function(){}),Y)}catch(r){throw t=new be(2,8,8005,r),n=new G("error",(new Map).set("detail",t)),e.B("player",n),e.$b(),t}}(i=Dc.prototype).destroy=function(){return Wc.delete(this),Fc(this),Kc&&Bc(this),this.j&&(this.j.stop(),this.j=null),this.H=this.B=null,this.h=this.m=!1,this.G=this.F=this.l=this.i=this.g=this.s=null,Promise.resolve()},i.na=function(){return this.h},i.Jd=function(){return this.M},i.init=function(){if(this.I.length)if(e.chrome&&chrome.cast&&chrome.cast.isAvailable){this.m=!0,this.j.za();var t=new chrome.cast.SessionRequest(this.I,[],null,this.O,null);t=new chrome.cast.ApiConfig(t,(function(e){for(var t=c(Wc),n=t.next();!n.done;n=t.next())Uc(n.value,e)}),(function(e){for(var t=c(Wc),n=t.next();!n.done;n=t.next())n=n.value,Vc="available"==e,n.j.za()}),"origin_scoped"),chrome.cast.initialize(t,(function(){}),(function(){})),Vc&&this.j.R(Gc),(t=Kc)&&t.status!=chrome.cast.SessionStatus.STOPPED?Uc(this,t):Kc=null}else e.__onGCastApiAvailable!==Xc&&(Hc=e.__onGCastApiAvailable||null,e.__onGCastApiAvailable=Xc)},i.Le=function(e){this.s=e,this.h&&zc(this,{type:"appData",appData:this.s})},i.cast=function(e){var t=this;return L((function(n){if(!t.m)throw new be(1,8,8e3);if(!Vc)throw new be(1,8,8001);if(t.h)throw new be(1,8,8002);return t.l=new Ct,chrome.cast.requestSession((function(n){return Pc(t,e,n)}),(function(e){return Oc(t,e)})),w(n,t.l,0)}))},i.$b=function(){if(this.h){if(Fc(this),Kc){Bc(this);try{Kc.stop((function(){}),(function(){}))}catch(yx){}Kc=null}jc(this)}},i.get=function(e,t){var n=this;if("video"==e){if(Ic.includes(t))return function(){return n.Sf.apply(n,[e,t].concat(d(D.apply(0,arguments))))}}else if("player"==e){if(_c[t]&&!this.get("player","isLive")())return function(){};if(Nc.includes(t))return function(){return n.Sf.apply(n,[e,t].concat(d(D.apply(0,arguments))))};if(Lc.includes(t))return function(){return n.yh.apply(n,[e,t].concat(d(D.apply(0,arguments))))};if(kc[t]||Cc[t])return function(){return n.g[e][t]}}return this.g[e][t]},i.set=function(e,t,n){this.g[e][t]=n,zc(this,{type:"set",targetName:e,property:t,value:n})},i.Sf=function(e,t){zc(this,{type:"call",targetName:e,methodName:t,args:D.apply(2,arguments)})},i.yh=function(e,t){var n=D.apply(2,arguments),r=new Ct,i=this.J.toString();this.J++,this.i[i]=r;try{zc(this,{type:"asyncCall",targetName:e,methodName:t,args:n,id:i})}catch(a){r.reject(a)}return r};var Gc=.02,Vc=!1,Kc=null,Hc=null,Wc=new Set;function Xc(t){if(Hc?e.__onGCastApiAvailable=Hc:delete e.__onGCastApiAvailable,Hc=null,t)for(var n=c(Wc),r=n.next();!r.done;r=n.next())r.value.init();"function"==typeof e.__onGCastApiAvailable&&e.__onGCastApiAvailable(t)}function qc(e,t,n,r){r=void 0!==r&&r,ee.call(this);var i=this;this.i=e,this.h=t,this.m=this.s=this.j=this.B=this.l=null,this.G=n,this.F=r,this.C=new Map,this.g=new Dc(n,(function(){return Qc(i)}),(function(){return Jc(i)}),(function(e,t){return td(i,e,t)}),(function(){return Zc(i)}),(function(){return $c(i)}),r),function(e){e.g.init(),e.m=new Hr;for(var t=c(Ac),n=t.next();!n.done;n=t.next())e.m.o(e.i,n.value,(function(t){e.g.na()||(t=V(t),e.j.dispatchEvent(t))}));for(var r in K)e.m.o(e.h,K[r],(function(t){e.g.na()||e.s.dispatchEvent(t)}));for(var i in e.l={},t={},e.i)t.vc=i,Object.defineProperty(e.l,t.vc,{configurable:!1,enumerable:!0,get:function(t){return function(){return ed(e,t.vc)}}(t),set:function(t){return function(n){var r=t.vc;e.g.na()?e.g.set("video",r,n):e.i[r]=n}}(t)}),t={vc:t.vc};e.B={},Yc(e,(function(t){Object.defineProperty(e.B,t,{configurable:!1,enumerable:!0,get:function(){return function(e,t){if(e.C.has(t)&&(t=e.C.get(t)),"addEventListener"==t)return function(t,n,r){return e.s.addEventListener(t,n,r)};if("removeEventListener"==t)return function(t,n,r){return e.s.removeEventListener(t,n,r)};if("getMediaElement"==t)return function(){return e.l};if("getSharedConfiguration"==t)return e.g.get("player","getConfiguration");if("getNetworkingEngine"==t)return function(){return e.h.Hc()};if("getDrmEngine"==t)return function(){return e.h.m};if("getAdManager"==t)return function(){return e.h.sd()};if("setVideoContainer"==t)return function(t){return e.h.Te(t)};if(e.g.na()){if("getManifest"==t||"drmInfo"==t)return function(){return X(t+"() does not work while casting!"),null};if("attach"==t||"detach"==t)return function(){return X(t+"() does not work while casting!"),Promise.resolve()}}return e.g.na()&&0==Object.keys(e.g.g.video).length&&(kc[t]||Cc[t])||!e.g.na()?e.h[t].bind(e.h):e.g.get("player",t)}(e,t)}})})),function(e){var t=new Map;Yc(e,(function(n,r){t.has(r)?(r=t.get(r),n.length<r.length?e.C.set(n,r):e.C.set(r,n)):t.set(r,n)}))}(e),e.j=new ee,e.j.Hd=e.l,e.s=new ee,e.s.Hd=e.B}(this)}function Yc(e,t){function n(e){return"constructor"!=e&&"function"==typeof i[e]&&!a.has(e)}var r,i=e.h,a=new Set;for(r in i)n(r)&&(a.add(r),t(r,i[r]));for(e=Object.getPrototypeOf(i),r=Object.getPrototypeOf({});e&&e!=r;){for(var o=c(Object.getOwnPropertyNames(e)),s=o.next();!s.done;s=o.next())n(s=s.value)&&(a.add(s),t(s,i[s]));e=Object.getPrototypeOf(e)}}function $c(e){var t={video:{},player:{},playerAfterLoad:{},manifest:e.h.le(),startTime:null};e.i.pause();for(var n=c(Ec),r=n.next();!r.done;r=n.next())r=r.value,t.video[r]=e.i[r];for(e.i.ended||(t.startTime=e.i.currentTime),r=(n=c(Mc)).next();!r.done;r=n.next()){var i=r.value;r=i[1],i=e.h[i[0]](),t.player[r]=i}for(r=(n=c(Rc)).next();!r.done;r=n.next())r=(i=r.value)[1],i=e.h[i[0]](),t.playerAfterLoad[r]=i;return t}function Qc(e){var t=new G("caststatuschanged");e.dispatchEvent(t)}function Jc(e){var t=new G(e.l.paused?"pause":"play");e.j.dispatchEvent(t)}function Zc(e){for(var t=c(Mc),n=t.next();!n.done;n=t.next()){var r=n.value;n=r[1],r=e.g.get("player",r[0])(),e.h[n](r)}var i=e.g.get("player","getAssetUri")();n=e.g.get("video","ended"),t=Promise.resolve();var a=e.i.autoplay;r=null,n||(r=e.g.get("video","currentTime")),i&&(e.i.autoplay=!1,t=e.h.load(i,r));var o={};for(r=(n=c(Ec)).next();!r.done;r=n.next())r=r.value,o[r]=e.g.get("video",r);t.then((function(){if(e.i){for(var t=c(Ec),n=t.next();!n.done;n=t.next())n=n.value,e.i[n]=o[n];for(n=(t=c(Rc)).next();!n.done;n=t.next()){var r=n.value;n=r[1],r=e.g.get("player",r[0])(),e.h[n](r)}e.i.autoplay=a,i&&e.i.play()}}),(function(t){t=new G("error",t=(new Map).set("detail",t)),e.h.dispatchEvent(t)}))}function ed(e,t){if("addEventListener"==t)return function(t,n,r){return e.j.addEventListener(t,n,r)};if("removeEventListener"==t)return function(t,n,r){return e.j.removeEventListener(t,n,r)};if(e.g.na()&&0==Object.keys(e.g.g.video).length){var n=e.i[t];if("function"!=typeof n)return n}return e.g.na()?e.g.get("video",t):("function"==typeof(t=e.i[t])&&(t=t.bind(e.i)),t)}function td(e,t,n){e.g.na()&&("video"==t?e.j.dispatchEvent(n):"player"==t&&e.s.dispatchEvent(n))}function nd(e,t,n,r){ee.call(this);var i=this;this.g=e,this.h=t,this.j=new Hr,this.J={video:e,player:t},this.G=n||function(){},this.K=r||function(e){return e},this.i=null,this.H=!1,this.s=!0,this.m=0,this.F=!1,this.C=!0,this.B=this.l=null,this.I=new Rt((function(){od(i)})),function(e){var t=cast.receiver.CastReceiverManager.getInstance();t.onSenderConnected=function(){return rd(e)},t.onSenderDisconnected=function(){return rd(e)},t.onSystemVolumeChanged=function(){var t=cast.receiver.CastReceiverManager.getInstance().getSystemVolume();t&&cd(e,{type:"update",update:{video:{volume:t.level,muted:t.muted}}},e.l),cd(e,{type:"event",targetName:"video",event:{type:"volumechange"}},e.l)},e.B=t.getCastMessageBus("urn:x-cast:com.google.cast.media"),e.B.onMessage=function(t){return function(e,t){var n=Tc(t.data);switch(n.type){case"PLAY":e.g.play(),dd(e);break;case"PAUSE":e.g.pause(),dd(e);break;case"SEEK":t=n.currentTime;var r=n.resumeState;null!=t&&(e.g.currentTime=Number(t)),r&&"PLAYBACK_START"==r?(e.g.play(),dd(e)):r&&"PLAYBACK_PAUSE"==r&&(e.g.pause(),dd(e));break;case"STOP":e.h.bf().then((function(){e.h&&dd(e)}));break;case"GET_STATUS":ud(e,Number(n.requestId));break;case"VOLUME":t=(r=n.volume).level,r=r.muted;var i=e.g.volume,a=e.g.muted;null!=t&&(e.g.volume=Number(t)),null!=r&&(e.g.muted=r),i==e.g.volume&&a==e.g.muted||dd(e);break;case"LOAD":e.m=0,e.F=!1,e.C=!1,t=n.media,r=n.currentTime,i=e.K(t.contentId),a=n.autoplay||!0,e.G(t.customData),a&&(e.g.autoplay=!0),e.h.load(i,r).then((function(){e.h&&ud(e)})).catch((function(t){var r="LOAD_FAILED";7==t.category&&7e3==t.code&&(r="LOAD_CANCELLED"),cd(e,{requestId:Number(n.requestId),type:r},e.B)}));break;default:cd(e,{requestId:Number(n.requestId),type:"INVALID_REQUEST",reason:"INVALID_COMMAND"},e.B)}}(e,t)},e.l=t.getCastMessageBus("urn:x-cast:com.google.shaka.v2"),e.l.onMessage=function(t){return function(e,t){var n=Tc(t.data);switch(n.type){case"init":e.m=0,e.F=!1,e.C=!0,function(e,t,n){var r,i,a,o,s,u,l,c,d,h;L((function(f){switch(f.g){case 1:for(r in t.player)i=t.player[r],e.h[r](i);return e.G(n),a=e.g.autoplay,t.manifest?(e.g.autoplay=!1,A(f,5),w(f,e.h.load(t.manifest,t.startTime),7)):w(f,Promise.resolve(),3);case 7:E(f,3);break;case 5:return o=I(f),s=(new Map).set("detail",o),u=new G("error",s),e.h&&e.h.dispatchEvent(u),f.return();case 3:if(!e.h)return f.return();for(l in t.video)c=t.video[l],e.g[l]=c;for(d in t.playerAfterLoad)h=t.playerAfterLoad[d],e.h[d](h);e.g.autoplay=a,t.manifest&&(e.g.play(),dd(e)),T(f)}}))}(e,n.initState,n.appData),od(e);break;case"appData":e.G(n.appData);break;case"set":var r=n.targetName,i=n.property;if(n=n.value,"video"==r){if(t=cast.receiver.CastReceiverManager.getInstance(),"volume"==i){t.setSystemVolumeLevel(n);break}if("muted"==i){t.setSystemVolumeMuted(n);break}}e.J[r][i]=n;break;case"call":(r=e.J[n.targetName])[n.methodName].apply(r,n.args);break;case"asyncCall":r=n.targetName,i=n.methodName,"player"==r&&"load"==i&&(e.m=0,e.F=!1);var a=n.id,o=t.senderId;n=(t=e.J[r])[i].apply(t,n.args),"player"==r&&"load"==i&&(n=n.then((function(){e.C=!0}))),n.then((function(){return ld(e,o,a,null)}),(function(t){return ld(e,o,a,t)}))}}(e,t)},t.start();for(var n=(t=c(Ac)).next();!n.done;n=t.next())e.j.o(e.g,n.value,(function(t){return ad(e,"video",t)}));for(var r in K)e.j.o(e.h,K[r],(function(t){return ad(e,"player",t)}));cast.__platform__&&cast.__platform__.canDisplayType('video/mp4; codecs="avc1.640028"; width=3840; height=2160')?e.h.Oe(3840,2160):e.h.Oe(1920,1080),e.j.o(e.g,"loadeddata",(function(){e.F=!0})),e.j.o(e.h,"loading",(function(){e.s=!1,id(e)})),e.j.o(e.g,"playing",(function(){e.s=!1,id(e)})),e.j.o(e.g,"pause",(function(){id(e)})),e.j.o(e.h,"unloading",(function(){e.s=!0,id(e)})),e.j.o(e.g,"ended",(function(){new Rt((function(){e.g&&e.g.ended&&(e.s=!0,id(e))})).R(fd)}))}(this)}function rd(e){e.m=0,e.C=!0,e.H=0!=cast.receiver.CastReceiverManager.getInstance().getSenders().length,id(e)}function id(e){var t;L((function(n){return 1==n.g?w(n,Promise.resolve(),2):e.h?(t=new G("caststatuschanged"),e.dispatchEvent(t),sd(e)||dd(e),void T(n)):n.return()}))}function ad(e,t,n){e.h&&(od(e),cd(e,{type:"event",targetName:t,event:n},e.l))}function od(e){e.I.R(hd);for(var t={video:{},player:{}},n=c(Sc),r=n.next();!r.done;r=n.next())r=r.value,t.video[r]=e.g[r];if(e.h.T())for(var i in _c)0==e.m%_c[i]&&(t.player[i]=e.h[i]());for(var a in kc)0==e.m%kc[a]&&(t.player[a]=e.h[a]());for(var o in(n=cast.receiver.CastReceiverManager.getInstance().getSystemVolume())&&(t.video.volume=n.level,t.video.muted=n.muted),cd(e,{type:"update",update:t},e.l),Cc)0==e.m%Cc[o]&&((t={player:{}}).player[o]=e.h[o](),cd(e,{type:"update",update:t},e.l));e.F&&(e.m+=1),sd(e)}function sd(e){return!(!e.C||!e.g.duration&&!e.h.T())&&(ud(e),e.C=!1,!0)}function ud(e,t){var n={contentId:e.h.le(),streamType:e.h.T()?"LIVE":"BUFFERED",contentType:""};e.h.T()||(n.duration=e.g.duration),e.i&&(n.metadata=e.i),dd(e,void 0===t?0:t,n)}function ld(e,t,n,r){e.h&&cd(e,{type:"asyncComplete",id:n,error:r},e.l,t)}function cd(e,t,n,r){e.H&&(e=wc(t),r?n.getCastChannel(r).send(e):n.broadcast(e))}function dd(e,t,n){n=void 0===n?null:n;var r={mediaSessionId:0,playbackRate:e.g.playbackRate,playerState:e.s?pd:e.h.Pc()?md:e.g.paused?vd:gd,currentTime:e.g.currentTime,supportedMediaCommands:63,volume:{level:e.g.volume,muted:e.g.muted}};n&&(r.media=n),cd(e,{requestId:void 0===t?0:t,type:"MEDIA_STATUS",status:[r]},e.B)}v(qc,ee),(i=qc.prototype).destroy=function(e){return e&&this.g.$b(),this.m&&(this.m.release(),this.m=null),e=[],this.h&&(e.push(this.h.destroy()),this.h=null),this.g&&(e.push(this.g.destroy()),this.g=null),this.B=this.l=this.i=null,ee.prototype.release.call(this),Promise.all(e)},i.zb=function(){return this.l},i.cc=function(){return this.B},i.uf=function(){return this.g.m&&Vc},i.na=function(){return this.g.na()},i.Jd=function(){return this.g.Jd()},i.cast=function(){var e,t=this;return L((function(n){return 1==n.g?(e=$c(t),w(n,t.g.cast(e),2)):t.h?w(n,t.h.bf(),0):n.return()}))},i.Le=function(e){this.g.Le(e)},i.dg=function(){!function(e){if(e.h){var t=e.K();chrome.cast.requestSession((function(n){return Pc(e,t,n)}),(function(t){return Oc(e,t)}))}}(this.g)},i.$b=function(){this.g.$b()},i.yf=function(e,t){t=void 0!==t&&t;var n=this;return L((function(r){if(1==r.g)return e==n.G&&t==n.F?r.return():(n.G=e,n.F=t,n.g.$b(),w(r,n.g.destroy(),2));n.g=null,n.g=new Dc(e,(function(){return Qc(n)}),(function(){return Jc(n)}),(function(e,t){return td(n,e,t)}),(function(){return Zc(n)}),(function(){return $c(n)}),t),n.g.init(),T(r)}))},z("shaka.cast.CastProxy",qc),qc.prototype.changeReceiverId=qc.prototype.yf,qc.prototype.forceDisconnect=qc.prototype.$b,qc.prototype.suggestDisconnect=qc.prototype.dg,qc.prototype.setAppData=qc.prototype.Le,qc.prototype.cast=qc.prototype.cast,qc.prototype.receiverName=qc.prototype.Jd,qc.prototype.isCasting=qc.prototype.na,qc.prototype.canCast=qc.prototype.uf,qc.prototype.getPlayer=qc.prototype.cc,qc.prototype.getVideo=qc.prototype.zb,qc.prototype.destroy=qc.prototype.destroy,v(nd,ee),(i=nd.prototype).isConnected=function(){return this.H},i.gh=function(){return this.s},i.Ih=function(e){this.i=e},i.sg=function(){this.i=null},i.Jh=function(e){this.i||(this.i={metadataType:cast.receiver.media.MetadataType.GENERIC}),this.i.title=e},i.Hh=function(e){this.i||(this.i={metadataType:cast.receiver.media.MetadataType.GENERIC}),this.i.images=[{url:e}]},i.Gh=function(e){this.i||(this.i={}),this.i.artist=e,this.i.metadataType=cast.receiver.media.MetadataType.MUSIC_TRACK},i.destroy=function(){var e,t=this;return L((function(n){if(1==n.g)return t.j&&(t.j.release(),t.j=null),e=[],t.h&&(e.push(t.h.destroy()),t.h=null),t.I&&(t.I.stop(),t.I=null),t.g=null,t.J=null,t.G=null,t.H=!1,t.s=!0,t.l=null,t.B=null,ee.prototype.release.call(t),w(n,Promise.all(e),2);cast.receiver.CastReceiverManager.getInstance().stop(),T(n)}))},z("shaka.cast.CastReceiver",nd),nd.prototype.destroy=nd.prototype.destroy,nd.prototype.setContentArtist=nd.prototype.Gh,nd.prototype.setContentImage=nd.prototype.Hh,nd.prototype.setContentTitle=nd.prototype.Jh,nd.prototype.clearContentMetadata=nd.prototype.sg,nd.prototype.setContentMetadata=nd.prototype.Ih,nd.prototype.isIdle=nd.prototype.gh,nd.prototype.isConnected=nd.prototype.isConnected;var hd=.5,fd=5,pd="IDLE",gd="PLAYING",md="BUFFERING",vd="PAUSED";function yd(e,t,n){var r=function(e){for(var t=[],n=(e=c(e)).next();!n.done;n=e.next())(n=xd(n.value))&&t.push(n);return t}(e),i=null;e=[];var a=[],o=new Set(r.map((function(e){return e.keyId})));if(o.delete(null),1<o.size)throw new be(2,4,4010);if(t||(a=r.filter((function(e){return"urn:mpeg:dash:mp4protection:2011"!=e.He||(i=e.init||i,!1)}))).length&&(e=function(e,t,n,r){for(var i=[],a=(t=c(t)).next();!a.done;a=t.next()){var o=n[(a=a.value).He];if(o){var s;if(s=fi(a.node,"urn:microsoft:playready","pro")){s=en(s.textContent);var u=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]);s=[{initData:di(s,u,new Set,0),initDataType:"cenc",keyId:a.keyId}]}else s=null;if(u=null,"urn:uuid:e2719d58-a985-b3c9-781a-b030af78d30e"===a.He)if(0==(u=r).size)u=null;else{var l=new Uint8Array([16,119,239,236,192,178,77,2,172,227,60,30,82,226,251,75]);u=[{initData:di(new Uint8Array([]),l,u,1),initDataType:"cenc",keyId:a.keyId}]}s=Se(o,a.init||e||s||u),(o=Td.get(o))&&(s.licenseServerUri=o(a)),i.push(s)}}return i}(i,a,n,o),0==e.length&&(e=[Se("",i)])),r.length&&(t||!a.length))for(e=[],n=(t=c(Object.values(n))).next();!n.done;n=t.next())"org.w3.clearkey"!=(n=n.value)&&e.push(Se(n,i));if(o=Array.from(o)[0]||null)for(n=(t=c(e)).next();!n.done;n=t.next())for(r=(n=c(n.value.initData)).next();!r.done;r=n.next())r.value.keyId=o;return{Bf:o,sj:i,drmInfos:e,Ff:!0}}function bd(e){return(e=fi(e.node,"urn:microsoft:playready","pro"))&&(e=function(e){var t=0,n=It(e),r=n.getUint32(t,!0);if(r!=e.byteLength)return[];e:{for(e=t+6,t=[];e<n.byteLength-1;){r=n.getUint16(e,!0),e+=2;var i=n.getUint16(e,!0);if(e+=2,1&i||i+e>n.byteLength){n=[];break e}var a=Et(n,e,i);t.push({type:r,value:a}),e+=i}n=t}return n}(e=en(e.textContent)).filter((function(e){return e.type===wd}))[0])&&(e=_i(e=Wt(e.value,!0),"WRMHEADER"))?function(e){for(var t=(e=c(e.getElementsByTagName("DATA"))).next();!t.done;t=e.next())for(var n=(t=c(t.value.childNodes)).next();!n.done;n=t.next())if((n=n.value)instanceof Element&&"LA_URL"==n.tagName)return n.textContent;return""}(e):""}function xd(e){var t=e.getAttribute("schemeIdUri"),n=mi(e,"urn:mpeg:cenc:2013","default_KID"),r=gi(e,"urn:mpeg:cenc:2013","pssh").map(yi);if(!t)return null;if(t=t.toLowerCase(),n&&(n=n.replace(/-/g,"").toLowerCase()).includes(" "))throw new be(2,4,4009);var i=[];try{i=r.map((function(e){return{initDataType:"cenc",initData:en(e),keyId:null}}))}catch(a){throw new be(2,4,4007)}return{node:e,He:t,keyId:n,init:0<i.length?i:null}}var wd=1,Td=(new Map).set("com.widevine.alpha",(function(e){return(e=fi(e.node,"urn:microsoft","laurl"))&&e.getAttribute("licenseUrl")||""})).set("com.microsoft.playready",bd).set("com.microsoft.playready.recommendation",bd).set("com.microsoft.playready.software",bd).set("com.microsoft.playready.hardware",bd).set("org.w3.clearkey",(function(e){return(e=fi(e.node,"http://dashif.org/guidelines/clearKey","Laurl"))&&"EME-1.0"===e.getAttribute("Lic_type")&&e.textContent?e.textContent:""}));function Ad(t,n,r,i,a){var o={RepresentationID:n,Number:r,Bandwidth:i,Time:a};return t.replace(/\$(RepresentationID|Number|Bandwidth|Time)?(?:%0([0-9]+)([diouxX]))?\$/g,(function(t,n,r,i){if("$$"==t)return"$";var a=o[n];if(null==a)return t;switch("RepresentationID"==n&&r&&(r=void 0),"Time"==n&&(a=Math.round(a)),i){case void 0:case"d":case"i":case"u":t=a.toString();break;case"o":t=a.toString(8);break;case"x":t=a.toString(16);break;case"X":t=a.toString(16).toUpperCase();break;default:t=a.toString()}return r=e.parseInt(r,10)||1,Array(Math.max(0,r-t.length)+1).join("0")+t}))}function Sd(e,t){var n=Ed(e,t,"timescale"),r=1;n&&(r=Ei(n)||1);var i=Ed(e,t,"duration");n=Ei(i||""),"image"==e.L.contentType&&(n=ki(i||"")),n&&(n/=r);var a=Ed(e,t,"startNumber");i=Number(Ed(e,t,"presentationTimeOffset"))||0;var o=Ii(a||"");if(null!=a&&null!=o||(o=1),a=Id(e,t,"SegmentTimeline"),t=null,a){t=r,e=e.Y.duration||1/0,a=pi(a,"S");for(var s=[],u=-i,l=0;l<a.length;++l){var c=a[l],d=a[l+1],h=xi(c,"t",Ii),f=xi(c,"d",Ii);if(c=xi(c,"r",Si),null!=h&&(h-=i),!f)break;if(h=null!=h?h:u,0>(c=c||0))if(d){if(null==(d=xi(d,"t",Ii)))break;if(h>=d)break;c=Math.ceil((d-h)/f)-1}else{if(1/0==e)break;if(h/t>=e)break;c=Math.ceil((e*t-h)/f)-1}for(0<s.length&&h!=u&&(s[s.length-1].end=h/t),d=0;d<=c;++d)u=h+f,s.push({start:h/t,end:u/t,Nh:h}),h=u}t=s}return{timescale:r,ya:n,pc:o,qb:i/r||0,cf:i,timeline:t}}function Ed(e,t,n){return[t(e.L),t(e.va),t(e.oa)].filter(Te).map((function(e){return e.getAttribute(n)})).reduce((function(e,t){return e||t}))}function Id(e,t,n){return[t(e.L),t(e.va),t(e.oa)].filter(Te).map((function(e){return hi(e,n)})).reduce((function(e,t){return e||t}))}function kd(e,t,n,r,i,a){if(a=void 0===a?0:a,mi(e,"http://www.w3.org/1999/xlink","href")){var o=function(e,t,n,r,i,a){for(var o=mi(e,"http://www.w3.org/1999/xlink","href"),s=mi(e,"http://www.w3.org/1999/xlink","actuate")||"onRequest",u=c(Array.from(e.attributes)),l=u.next();!l.done;l=u.next())"http://www.w3.org/1999/xlink"==(l=l.value).namespaceURI&&e.removeAttributeNS(l.namespaceURI,l.localName);if(5<=a)return Er(new be(2,4,4028));if("onLoad"!=s)return Er(new be(2,4,4027));var d=Ae([r],[o]);return i.request(0,Or(d,t)).ia((function(r){if(!(r=Mi(r.data,e.tagName)))return Er(new be(2,4,4001,o));for(;e.childNodes.length;)e.removeChild(e.childNodes[0]);for(;r.childNodes.length;){var s=r.childNodes[0];r.removeChild(s),e.appendChild(s)}for(s=(r=c(Array.from(r.attributes))).next();!s.done;s=r.next())e.setAttributeNode(s.value.cloneNode(!1));return kd(e,t,n,d[0],i,a+1)}))}(e,t,n,r,i,a);return n&&(o=o.ia(void 0,(function(){return kd(e,t,n,r,i,a)}))),o}o=[];for(var s=c(Array.from(e.childNodes)),u=s.next();!u.done;u=s.next())(u=u.value)instanceof Element&&("urn:mpeg:dash:resolve-to-zero:2013"==mi(u,"http://www.w3.org/1999/xlink","href")?e.removeChild(u):"SegmentTimeline"!=u.tagName&&o.push(kd(u,t,n,r,i,a)));return _r(o).ia((function(){return e}))}function Cd(e,t,n,r,i,a,o){var s,u=(new ei).S("sidx",(function(e){s=function(e,t,n,r,i,a,o){var s=[];o.reader.skip(4);var u=o.reader.N();if(0==u)throw new be(2,3,3005);if(0==o.version)var l=o.reader.N(),c=o.reader.N();else l=o.reader.Cb(),c=o.reader.Cb();o.reader.skip(2);var d=o.reader.De();for(e=e+o.size+c,c=0;c<d;c++){var h=o.reader.N(),f=(2147483648&h)>>>31;h&=2147483647;var p=o.reader.N();if(o.reader.skip(4),1==f)throw new be(2,3,3006);s.push(new So(l/u+n,(l+p)/u+n,(function(){return a}),e,e+h-1,t,n,r,i)),l+=p,e+=h}return o.parser.stop(),s}(t,r,i,a,o,n,e)}));if(e&&u.parse(e),s)return s;throw new be(2,3,3004)}function _d(e){this.h=It(e),this.g=new Qr(this.h,0)}function Md(e){var t=Rd(e);if(7<t.length)throw new be(2,3,3002);for(var n=0,r=(t=c(t)).next();!r.done;r=t.next())n=256*n+r.value;t=Rd(e);e:{for(var i=(r=c(Nd)).next();!i.done;i=r.next())if(Tt(t,new Uint8Array(i.value))){r=!0;break e}r=!1}if(r)t=e.h.byteLength-e.g.ma();else{if(8==t.length&&224&t[1])throw new be(2,3,3001);for(i=r=0;i<t.length;i++){var a=t[i];r=0==i?a&(1<<8-t.length)-1:256*r+a}t=r}return t=e.g.ma()+t<=e.h.byteLength?t:e.h.byteLength-e.g.ma(),r=It(e.h,e.g.ma(),t),e.g.skip(t),new Ld(n,r)}function Rd(e){var t=e.g.ma(),n=e.g.pb();if(0==n)throw new be(2,3,3002);return n=8-Math.floor(Math.log2(n)),e.g.skip(n-1),Et(e.h,t,n)}_d.prototype.xa=function(){return this.g.xa()};var Nd=[[255],[127,255],[63,255,255],[31,255,255,255],[15,255,255,255,255],[7,255,255,255,255,255],[3,255,255,255,255,255,255],[1,255,255,255,255,255,255,255]];function Ld(e,t){this.id=e,this.g=t}function Dd(e){if(8<e.g.byteLength)throw new be(2,3,3002);if(8==e.g.byteLength&&224&e.g.getUint8(0))throw new be(2,3,3001);for(var t=0,n=0;n<e.g.byteLength;n++){t=256*t+e.g.getUint8(n)}return t}function Pd(e){var t=new _d(e.g);if(179!=(e=Md(t)).id)throw new be(2,3,3013);if(e=Dd(e),183!=(t=Md(t)).id)throw new be(2,3,3012);t=new _d(t.g);for(var n=0;t.xa();){var r=Md(t);if(241==r.id){n=Dd(r);break}}return{Oh:e,xh:n}}function Od(e,t){if(!(t=Id(e,t,"Initialization")))return null;var n=e.L.Na,r=t.getAttribute("sourceURL");r&&(n=Ae(e.L.Na,[r])),r=0;var i=null;return(t=xi(t,"range",Ai))&&(r=t.start,i=t.end),new Ao((function(){return n}),r,i,Gd(e))}function Ud(e,t){var n=Number(Ed(e,jd,"presentationTimeOffset"))||0,r=Ed(e,jd,"timescale"),i=1;r&&(i=Ei(r)||1);var a=n/i||0,o=Od(e,jd);!function(e,t){if(zd(e,t),!Fd(e))throw new be(2,4,4002)}(e,o);var s=Rr(e);return{ac:function(){var e=Id(s,jd,"RepresentationIndex"),n=s.L.Na;return e&&(e=e.getAttribute("sourceURL"))&&(n=Ae(s.L.Na,[e])),e=Fd(s),Bd(s,t,o,n,e.start,e.end,a)}}}function Bd(e,t,n,r,i,a,o){var s,u,l,c,d,h,f,p,g,m,v,y,b,x,T;return L((function(A){if(1==A.g)return s=e.presentationTimeline,u=!e.ib||!e.Y.oe,l=e.Y.start,c=e.Y.duration,d=e.L.mimeType.split("/")[1],f=null,p=[(h=t)(r,i,a),"webm"==d?h(n.Pa(),n.Ta,n.Ba):null],h=null,w(A,Promise.all(p),2);if(g=A.h,m=g[0],v=g[1]||null,null,b=l-o,x=l,T=c?l+c:1/0,"mp4"==d)var S=Cd(m,i,r,n,b,x,T);else{if(440786851!=Md(S=new _d(v)).id)throw new be(2,3,3008);var E=Md(S);if(408125543!=E.id)throw new be(2,3,3009);S=E.g.byteOffset,E=new _d(E.g);for(var I=null;E.xa();){var k=Md(E);if(357149030==k.id){I=k;break}}if(!I)throw new be(2,3,3010);for(I=new _d(I.g),k=1e6,E=null;I.xa();){var C=Md(I);if(2807729==C.id)k=Dd(C);else if(17545==C.id)if(4==C.g.byteLength)E=C.g.getFloat32(0);else{if(8!=C.g.byteLength)throw new be(2,3,3003);E=C.g.getFloat64(0)}}if(null==E)throw new be(2,3,3011);if(E*=I=k/1e9,475249515!=(k=Md(new _d(m))).id)throw new be(2,3,3007);S=function(e,t,n,r,i,a,o,s,u){function l(){return i}var c=[];e=new _d(e.g);for(var d=null,h=null;e.xa();){var f=Md(e);if(187==f.id){var p=Pd(f);p&&(f=n*p.Oh,p=t+p.xh,null!=d&&c.push(new So(d+o,f+o,l,h,p-1,a,o,s,u)),d=f,h=p)}}return null!=d&&c.push(new So(d+o,r+o,l,h,null,a,o,s,u)),c}(k,S,I,E,r,n,b,x,T)}return y=S,s.lc(y),f=new Ms(y),u&&f.wb(x,T,!0),A.return(f)}))}function jd(e){return e.Yc}function Fd(e){var t=Id(e,jd,"RepresentationIndex");return e=Ai((e=Ed(e,jd,"indexRange"))||""),t&&(e=xi(t,"range",Ai,e)),e}function zd(e,t){var n=e.L.mimeType.split("/")[1];if(e.L.contentType!=ke&&"mp4"!=n&&"webm"!=n)throw new be(2,4,4006);if("webm"==n&&!t)throw new be(2,4,4005)}function Gd(e){var t=e.L;return{bandwidth:e.bandwidth,audioSamplingRate:t.audioSamplingRate,codecs:t.codecs,contentType:t.contentType,frameRate:t.frameRate||null,height:t.height||null,mimeType:t.mimeType,channelsCount:t.Cd,pixelAspectRatio:t.pixelAspectRatio||null,width:t.width||null}}function Vd(e,t){var n=Od(e,Kd),r=function(e){var t=function(e){return[e.L.Db,e.va.Db,e.oa.Db].filter(Te).map((function(e){return pi(e,"SegmentURL")})).reduce((function(e,t){return 0<e.length?e:t})).map((function(t){return t.getAttribute("indexRange")&&!e.Mf&&(e.Mf=!0),{mh:t.getAttribute("media"),start:(t=xi(t,"mediaRange",Ai,{start:0,end:null})).start,end:t.end}}))}(e);e=Sd(e,Kd);var n=e.pc;0==n&&(n=1);var r=0;return e.ya?r=e.ya*(n-1):e.timeline&&0<e.timeline.length&&(r=e.timeline[0].start),{ya:e.ya,startTime:r,pc:n,qb:e.qb,timeline:e.timeline,jc:t}}(e);if(!r.ya&&!r.timeline&&1<r.jc.length)throw new be(2,4,4002);if(!r.ya&&!e.Y.duration&&!r.timeline&&1==r.jc.length)throw new be(2,4,4002);if(r.timeline&&0==r.timeline.length)throw new be(2,4,4002);var i=null,a=null;e.oa.id&&e.L.id&&(a=t[e.oa.id+","+e.L.id])&&(i=a.segmentIndex);var o=function(e,t,n,r,i){var a=r.jc.length;r.timeline&&r.timeline.length!=r.jc.length&&(a=Math.min(r.timeline.length,r.jc.length));for(var o=e-r.qb,s=t?e+t:1/0,u=[],l=r.startTime,c={},d=0;d<a;c={Vd:c.Vd},d++){var h=r.jc[d];c.Vd=Ae(n,[h.mh]);var f=void 0;f=null!=r.ya?l+r.ya:r.timeline?r.timeline[d].end:l+t,u.push(new So(e+l,e+f,function(e){return function(){return e.Vd}}(c),h.start,h.end,i,o,e,s)),l=f}return u}(e.Y.start,e.Y.duration,e.L.Na,r,n);return t=!i,i?i.kc(o,e.presentationTimeline.mb()):i=new Ms(o),e.presentationTimeline.lc(o),e.ib&&e.Y.oe||i.wb(e.Y.start,e.Y.duration?e.Y.start+e.Y.duration:1/0,t),a&&(a.segmentIndex=i),{ac:function(){return i&&0!=i.g.length||i.Sc(o),Promise.resolve(i)}}}function Kd(e){return e.Db}function Hd(e,t,n,r,i,a){var o=function(e){var t=Ed(e,Wd,"initialization");if(!t)return null;var n=e.L.id,r=e.bandwidth||null,i=e.L.Na;return new Ao((function(){var e=Ad(t,n,null,r,null);return Ae(i,[e])}),0,null,Gd(e))}(e),s=function(e){var t=Sd(e,Wd),n=Ed(e,Wd,"media");return e=Ed(e,Wd,"index"),{ya:t.ya,timescale:t.timescale,pc:t.pc,qb:t.qb,cf:t.cf,timeline:t.timeline,xe:n,Oc:e}}(e);!function(e){var t=e.Oc?1:0;if(t+=e.timeline?1:0,t+=e.ya?1:0,0==t)throw new be(2,4,4002);if(1!=t&&(e.Oc&&(e.timeline=null),e.ya=null),!e.Oc&&!e.xe)throw new be(2,4,4002)}(s);var u=Rr(e);if(s.Oc)return zd(e,o),{ac:function(){var e=Ad(s.Oc,u.L.id,null,u.bandwidth||null,null);return e=Ae(u.L.Na,[e]),Bd(u,t,o,e,0,null,s.qb)}};if(s.ya)return r||"image"===e.va.contentType||(e.presentationTimeline.ze(s.ya),e.presentationTimeline.Ae(e.Y.start)),{ac:function(){return function(e,t,n,r,i){function a(e){var n=(e-p)*f,i=n+t.qb,a=n+l;return n=a+f,(a=new So(a,Math.min(n,s()),(function(){var t=Ad(m,y,e,v,i*g);return Ae(b,[t])}),0,null,r,x,l,s())).j=n,a}function o(){var e=[Math.max(u.mb(),l),Math.min(u.Ib(),s())].map((function(e){return e-l}));return[Math.ceil(e[0]/f),Math.ceil(e[1]/f)-1].map((function(e){return e+p}))}function s(){var e=null!=d&&i[d]||h;return e?l+e:1/0}var u=e.presentationTimeline,l=e.Y.start,d=e.oa.id,h=e.Y.duration,f=t.ya,p=t.pc,g=t.timescale,m=t.xe,v=e.bandwidth||null,y=e.L.id,b=e.L.Na,x=l-t.qb,w=o();e=e.ib?Math.max(w[0],w[1]-n+1):w[0],w=w[1],n=[];for(var T=e;T<=w;++T){var A=a(T);n.push(A)}var S=new Ms(n);if(n=u.Ib()<s(),T=u.T(),n||T){var E=Math.max(e,w+1);S.Nd(f,(function(){var e=u.mb();S.Gb(e);var t=c(o());t.next(),t=t.next().value;for(var n=[];E<=t;){var r=a(E);n.push(r),E++}return e>s()&&!n.length?null:n}))}return Promise.resolve(S)}(u,s,i,o,a)}};var l=null;r=r=null,e.oa.id&&e.L.id&&(r=n[r=e.oa.id+","+e.L.id])&&(l=r.segmentIndex);var d=function(e,t,n){var r=e.Y.start,i=e.Y.duration,a=r-t.qb;i=i?r+i:1/0;for(var o=[],s={},u=0;u<t.timeline.length;s={Ud:s.Ud,Yd:s.Yd,ae:s.ae,Rd:s.Rd,ce:s.ce,Sd:s.Sd},u++){var l=t.timeline[u],c=l.start,d=l.Nh;l=l.end,s.ae=u+t.pc,s.ce=d+t.cf,s.Yd=e.L.id,s.Rd=e.bandwidth||null,s.Ud=t.xe,s.Sd=e.L.Na,o.push(new So(r+c,r+l,function(e){return function(){var t=Ad(e.Ud,e.Yd,e.ae,e.Rd||null,e.ce);return Ae(e.Sd,[t]).map((function(e){return e.toString()}))}}(s),0,null,n,a,r,i))}return o}(u,s,o);n=e.Y.start;var h=e.Y.duration?e.Y.start+e.Y.duration:1/0,f=!(e.ib&&e.Y.oe);return l?(f&&new Ms(d).wb(n,h,!0),l.kc(d,e.presentationTimeline.mb())):l=new Ms(d),e.presentationTimeline.lc(d),f&&l.wb(n,h),r&&e.ib&&(r.segmentIndex=l),{ac:function(){return l&&0!=l.g.length||l.Sc(d),Promise.resolve(l)}}}function Wd(e){return e.Zc}function Xd(){this.l=[],this.g=[],this.h=[],this.j=[],this.i=[],this.m=new Set}function qd(e,t,n){var r,i,a,o,s,u,l,d,h,f,p,g,m,v,y,b,x,A,S,E,I,k,C,_,M,R,N,D;return L((function(L){switch(L.g){case 1:if(r=Ce,function(e){for(var t=(e=c(e)).next();!t.done;t=e.next()){for(var n=[],r=c((t=t.value).nd),i=r.next();!i.done;i=r.next()){i=i.value;for(var a=!1,o=c(n),s=o.next();!s.done;s=o.next())s=s.value,i.id!=s.id&&i.channelsCount==s.channelsCount&&i.language==s.language&&i.bandwidth==s.bandwidth&&i.label==s.label&&i.codecs==s.codecs&&i.mimeType==s.mimeType&&Ze(i.roles,s.roles)&&i.audioSamplingRate==s.audioSamplingRate&&i.primary==s.primary&&(a=!0);a||n.push(i)}t.nd=n}}(t),function(e){for(var t=(e=c(e)).next();!t.done;t=e.next()){for(var n=[],r=c((t=t.value).Od),i=r.next();!i.done;i=r.next()){i=i.value;for(var a=!1,o=c(n),s=o.next();!s.done;s=o.next())s=s.value,i.id!=s.id&&i.width==s.width&&i.frameRate==s.frameRate&&i.codecs==s.codecs&&i.mimeType==s.mimeType&&i.label==s.label&&Ze(i.roles,s.roles)&&$r(i.closedCaptions,s.closedCaptions)&&i.bandwidth==s.bandwidth&&(a=!0);a||n.push(i)}t.Od=n}}(t),function(e){for(var t=(e=c(e)).next();!t.done;t=e.next()){for(var n=[],r=c((t=t.value).textStreams),i=r.next();!i.done;i=r.next()){i=i.value;for(var a=!1,o=c(n),s=o.next();!s.done;s=o.next())s=s.value,i.id!=s.id&&i.language==s.language&&i.label==s.label&&i.codecs==s.codecs&&i.mimeType==s.mimeType&&i.bandwidth==s.bandwidth&&Ze(i.roles,s.roles)&&(a=!0);a||n.push(i)}t.textStreams=n}}(t),function(e){for(var t=(e=c(e)).next();!t.done;t=e.next()){for(var n=[],r=c((t=t.value).imageStreams),i=r.next();!i.done;i=r.next()){i=i.value;for(var a=!1,o=c(n),s=o.next();!s.done;s=o.next())s=s.value,i.id!=s.id&&i.width==s.width&&i.codecs==s.codecs&&i.mimeType==s.mimeType&&(a=!0);a||n.push(i)}t.imageStreams=n}}(t),!n&&1==t.length){i=t[0],e.g=i.nd,e.h=i.Od,e.j=i.textStreams,e.i=i.imageStreams,L.D(2);break}for(a=-1,o=0;o<t.length;o++)s=t[o],e.m.has(s.id)||(e.m.add(s.id),-1==a&&(a=o));if(-1==a)return L.return();for(u=t.map((function(e){return e.nd})),l=t.map((function(e){return e.Od})),d=t.map((function(e){return e.textStreams})),h=t.map((function(e){return e.imageStreams})),f=c(d),p=f.next();!p.done;p=f.next())p.value.push(fh(r.ha));for(g=c(h),m=g.next();!m.done;m=g.next())m.value.push(fh(r.Ac));return w(L,$d(e.g,u,a,eh,nh),3);case 3:return w(L,$d(e.h,l,a,eh,nh),4);case 4:return w(L,$d(e.j,d,a,eh,nh),5);case 5:return w(L,$d(e.i,h,a,eh,nh),2);case 2:if(v=0,y=[],e.h.length&&e.g.length)for(I=c(e.g),k=I.next();!k.done;k=I.next())for(C=k.value,_=c(e.h),M=_.next();!M.done;M=_.next())R=M.value,N=Wi(C.drmInfos,R.drmInfos),C.drmInfos.length&&R.drmInfos.length&&!N.length||(D=v++,y.push({id:D,language:C.language,primary:C.primary,audio:C,video:R,bandwidth:(C.bandwidth||0)+(R.bandwidth||0),drmInfos:N,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]}));else for(b=e.h.concat(e.g),x=c(b),A=x.next();!A.done;A=x.next())S=A.value,E=v++,y.push({id:E,language:S.language,primary:S.primary,audio:S.type==r.jd?S:null,video:S.type==r.Ma?S:null,bandwidth:S.bandwidth||0,drmInfos:S.drmInfos,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]});e.l=y,T(L)}}))}function Yd(e){var t,n,r,i,a,o,s,u,l,d,h,f,p,g,m,v,y,b,x,T,A,S,E,I;return L((function(k){switch(k.g){case 1:if(t=Ce,1==e.length)return k.return(e[0]);for(n=e.map((function(e){return e.filter((function(e){return e.type==t.jd}))})),r=e.map((function(e){return e.filter((function(e){return e.type==t.Ma}))})),i=e.map((function(e){return e.filter((function(e){return e.type==t.ha}))})),a=e.map((function(e){return e.filter((function(e){return e.type==t.Ac}))})),o=c(i),s=o.next();!s.done;s=o.next())s.value.push(hh(t.ha));for(u=c(a),l=u.next();!l.done;l=u.next())l.value.push(hh(t.Ac));return w(k,$d([],n,0,th,rh),2);case 2:return d=k.h,w(k,$d([],r,0,th,rh),3);case 3:return h=k.h,w(k,$d([],i,0,th,rh),4);case 4:return f=k.h,w(k,$d([],a,0,th,rh),5);case 5:if(p=k.h,g=0,h.length&&d.length)for(b=c(d),x=b.next();!x.done;x=b.next())for(T=x.value,A=c(h),S=A.next();!S.done;S=A.next())E=S.value,I=g++,E.variantIds.push(I),T.variantIds.push(I);else for(m=h.concat(d),v=c(m),y=v.next();!y.done;y=v.next())y.value.variantIds=[g++];return k.return(h.concat(d).concat(f).concat(p))}}))}function $d(e,t,n,r,i){var a,o,s,u,l,d,h,f,p,g,m,v,y,b,x,T,A,S;return L((function(E){switch(E.g){case 1:for(a=Ce,o=[],s=0;s<t.length;s++)s>=n?o.push(new Set(t[s])):o.push(new Set);u=c(e),l=u.next();case 2:if(l.done){E.D(4);break}return w(E,function(e,t,n,r,i){return L((function(a){return 1==a.g?(ih(t,e),e.matchedStreams?e.segmentIndex?w(a,Qd(e,n),2):a.D(2):a.return(!1)):(Zd(e,n,r,i),a.return(!0))}))}(l.value,t,n,i,o),5);case 5:if(!E.h)throw new be(2,4,4037);l=u.next(),E.D(2);break;case 4:for(d=c(o),h=d.next();!h.done;h=d.next())for(f=h.value,p=c(f),g=p.next();!g.done;g=p.next())m=g.value,(v=Jd(m,t,r,i,o))&&e.push(v);for(y=c(o),h=y.next();!h.done;h=y.next())for(b=h.value,x={},T=c(b),g=T.next();!g.done;x={ub:x.ub},g=T.next())if(x.ub=g.value,A=x.ub.type==a.ha&&!x.ub.language,S=x.ub.type==a.Ac&&!x.ub.tilesLayout,!A&&!S&&e.some(function(e){return function(t){return t.mimeType==e.ub.mimeType&&mn(t.codecs)==mn(e.ub.codecs)}}(x)))throw new be(2,4,4037);return E.return(e)}}))}function Qd(e,t){var n,r,i,a,o,s,u;return L((function(l){if(1==l.g){for(n=[],r=e.matchedStreams,i=c(r),a=i.next();!a.done;a=i.next())o=a.value,n.push(o.createSegmentIndex()),o.trickModeVideo&&!o.trickModeVideo.segmentIndex&&n.push(o.trickModeVideo.createSegmentIndex());return w(l,Promise.all(n),2)}if(e.segmentIndex instanceof Ds)for(s=0;s<r.length;s++)(u=r[s]).segmentIndex&&s>=t&&e.segmentIndex.l.push(u.segmentIndex);T(l)}))}function Jd(e,t,n,r,i){var a=n(e);return ih(t,a),a.createSegmentIndex&&(a.createSegmentIndex=function(){return L((function(e){return a.segmentIndex?e.D(0):(a.segmentIndex=new Ds,w(e,Qd(a,0),0))}))}),a.matchedStreams?(Zd(a,0,r,i),a):null}function Zd(e,t,n,r){for(var i=e.matchedStreams,a=0;a<i.length;a++)if(a>=t){var o=i[a];n(e,o);var s=!0;"audio"==e.type&&0==Oe(e.language,o.language)&&(s=!1),s&&r[a].delete(o)}}function eh(e){var t=Object.assign({},e);return t.originalId=null,t.createSegmentIndex=function(){return Promise.resolve()},t.closeSegmentIndex=function(){if(t.segmentIndex&&(t.segmentIndex.release(),t.segmentIndex=null),t.matchedStreams)for(var e=c(t.matchedStreams),n=e.next();!n.done;n=e.next())(n=n.value).segmentIndex&&(n.segmentIndex.release(),n.segmentIndex=null)},t.segmentIndex=null,t.emsgSchemeIdUris=[],t.keyIds=new Set,t.closedCaptions=null,t.trickModeVideo=null,t}function th(e){return(e=Object.assign({},e)).keyIds=new Set,e.segments=[],e.variantIds=[],e.closedCaptions=null,e}function nh(e,t){var n,r;e.roles=Array.from(new Set(e.roles.concat(t.roles))),t.emsgSchemeIdUris&&(e.emsgSchemeIdUris=Array.from(new Set(e.emsgSchemeIdUris.concat(t.emsgSchemeIdUris)))),e.keyIds=(n=e.keyIds,r=t.keyIds,new Set([].concat(d(n),d(r)))),null==e.originalId?e.originalId=t.originalId:e.originalId+=","+(t.originalId||"");var i=Wi(e.drmInfos,t.drmInfos);if(t.drmInfos.length&&e.drmInfos.length&&!i.length)throw new be(2,4,4038);if(e.drmInfos=i,e.encrypted=e.encrypted||t.encrypted,t.closedCaptions){e.closedCaptions||(e.closedCaptions=new Map);for(var a=(i=c(t.closedCaptions)).next();!a.done;a=i.next()){var o=c(a.value);a=o.next().value,o=o.next().value,e.closedCaptions.set(a,o)}}t.trickModeVideo?(e.trickModeVideo||(e.trickModeVideo=eh(t.trickModeVideo),e.trickModeVideo.createSegmentIndex=function(){return e.trickModeVideo.segmentIndex=e.segmentIndex.clone(),Promise.resolve()}),nh(e.trickModeVideo,t.trickModeVideo)):e.trickModeVideo&&nh(e.trickModeVideo,t)}function rh(e,t){e.roles=Array.from(new Set(e.roles.concat(t.roles)));var n=t.keyIds;if(n=new Set([].concat(d(e.keyIds),d(n))),e.keyIds=n,e.encrypted=e.encrypted&&t.encrypted,e.segments.push.apply(e.segments,d(t.segments)),t.closedCaptions)for(e.closedCaptions||(e.closedCaptions=new Map),n=(t=c(t.closedCaptions)).next();!n.done;n=t.next()){var r=c(n.value);n=r.next().value,r=r.next().value,e.closedCaptions.set(n,r)}}function ih(e,t){for(var n=[],r=(e=c(e)).next();!r.done;r=e.next()){for(var i=t,a={audio:ah,video:ah,text:oh,image:sh}[i.type],o={audio:uh,video:lh,text:ch,image:dh}[i.type],s=null,u=(r=c(r.value)).next();!u.done;u=r.next())!a(i,u=u.value)||s&&!o(i,s,u)||(s=u);if(!(i=s))return;n.push(i)}t.matchedStreams=n}function ah(e,t){var n;return!(n=t.mimeType!=e.mimeType||mn(t.codecs)!=mn(e.codecs))&&(n=e.drmInfos)&&(e=e.drmInfos,t=t.drmInfos,n=!(!e.length||!t.length||0<Wi(e,t).length)),!n}function oh(e,t){return!!e.language&&(!t.language||0!=Oe(e.language,t.language)&&t.kind==e.kind)}function sh(e){return!!e.tilesLayout}function uh(e,t,n){if(e.id==n.id)return!0;var r=Oe(e.language,t.language),i=Oe(e.language,n.language);return i>r||!(i<r)&&(e.roles.length?(r=t.roles.filter((function(t){return e.roles.includes(t)})),(i=n.roles.filter((function(t){return e.roles.includes(t)}))).length>r.length||!(i.length<r.length)&&n.roles.length<t.roles.length):!(n.roles.length||!t.roles.length)||!(n.roles.length&&!t.roles.length)&&(!(t.primary||!n.primary)||!(t.primary&&!n.primary)&&((r=ph(e.channelsCount,t.channelsCount,n.channelsCount))==mh||r!=yh&&((r=ph(e.audioSamplingRate,t.audioSamplingRate,n.audioSamplingRate))==mh||r!=yh&&!(!e.bandwidth||gh(e.bandwidth,t.bandwidth,n.bandwidth)!=mh)))))}function lh(e,t,n){if(e.id==n.id)return!0;var r=ph(e.width*e.height,t.width*t.height,n.width*n.height);if(r==mh)return!0;if(r==yh)return!1;if(e.frameRate){if((r=ph(e.frameRate,t.frameRate,n.frameRate))==mh)return!0;if(r==yh)return!1}return!(!e.bandwidth||gh(e.bandwidth,t.bandwidth,n.bandwidth)!=mh)}function ch(e,t,n){if(e.id==n.id)return!0;var r=Oe(e.language,t.language),i=Oe(e.language,n.language);if(i>r)return!0;if(i<r)return!1;if(!t.primary&&n.primary)return!0;if(t.primary&&!n.primary)return!1;if(e.roles.length){if(r=t.roles.filter((function(t){return e.roles.includes(t)})),(i=n.roles.filter((function(t){return e.roles.includes(t)}))).length>r.length)return!0;if(i.length<r.length)return!1}else{if(!n.roles.length&&t.roles.length)return!0;if(n.roles.length&&!t.roles.length)return!1}return n.mimeType==e.mimeType&&n.codecs==e.codecs&&(t.mimeType!=e.mimeType||t.codecs!=e.codecs)}function dh(e,t,n){return e.id==n.id||ph(e.width*e.height,t.width*t.height,n.width*n.height)==mh}function hh(e){return{id:0,originalId:"",primary:!1,type:e,mimeType:"",codecs:"",language:"",label:null,width:null,height:null,encrypted:!1,keyIds:new Set,segments:[],variantIds:[],roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null}}function fh(e){return{id:0,originalId:"",createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new Ms([]),mimeType:"",codecs:"",encrypted:!1,drmInfos:[],keyIds:new Set,language:"",label:null,type:e,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null}}function ph(e,t,n){if(t==e&&e!=n)return yh;if(n==e&&e!=t)return mh;if(t>e){if(n<=e||n-e<t-e)return mh;if(n-e>t-e)return yh}else{if(n>e)return yh;if(e-n<e-t)return mh;if(e-n>e-t)return yh}return vh}function gh(e,t,n){return t=Math.abs(e-t),(e=Math.abs(e-n))<t?mh:t<e?yh:vh}Xd.prototype.release=function(){for(var e=c(this.g.concat(this.h,this.j,this.i)),t=e.next();!t.done;t=e.next())(t=t.value).segmentIndex&&t.segmentIndex.release();this.g=[],this.h=[],this.j=[],this.i=[],this.l=[]};var mh=1,vh=0,yh=-1;function bh(){var e=this;this.h=this.g=null,this.m=[],this.i=null,this.I=1,this.l={},this.M={},this.j=new Xd,this.H=0,this.J=new We(5),this.G=new Rt((function(){!function(e){var t,n;L((function(r){switch(r.g){case 1:return t=0,A(r,2),w(r,xh(e),4);case 4:t=r.h,E(r,3);break;case 2:n=I(r),e.h&&(n.severity=1,e.h.onError(n));case 3:if(!e.h)return r.return();Sh(e,t),T(r)}}))}(e)})),this.s=new Nr,this.B=null,this.K=[],this.C=1/0,this.F=!1}function xh(e){var t,n,r,i,a,o,s;return L((function(u){return 1==u.g?(t=Or(e.m,e.g.retryParameters),n=e.h.networkingEngine,e.h.modifyManifestRequest(t,{format:"d"}),r=Date.now(),i=n.request(0,t),Lr(e.s,i),w(u,i.promise,2)):3!=u.g?(a=u.h,e.h?(a.uri&&!e.m.includes(a.uri)&&e.m.unshift(a.uri),w(u,function(e,t,n){var r,i,a,o;return L((function(s){if(1==s.g){if(!(r=Mi(t,"MPD")))throw new be(2,4,4001,n);return e.g.dash.disableXlinkProcessing?s.return(wh(e,r,n)):(i=e.g.dash.xlinkFailGracefully,a=kd(r,e.g.retryParameters,i,n,e.h.networkingEngine),Lr(e.s,a),w(s,a.promise,2))}return o=s.h,s.return(wh(e,o,n))}))}(e,a.data,a.uri),3)):u.return(0)):(o=Date.now(),s=(o-r)/1e3,e.J.sample(1,s),u.return(s))}))}function wh(e,t,n){var r,i,a,o,s,u,l,d,h,f,p,g,m,v,y,b,x,S,k,C,_,M,R,N,D,P,O,U,B;return L((function(j){switch(j.g){case 1:if((r=e.g.dash.manifestPreprocessor)&&r(t),i=[n],0<(a=pi(t,"Location").map(yi).filter(Te)).length&&(o=Ae(i,a),i=e.m=o),s=pi(t,"BaseURL"),u=s.map(yi),l=Ae(i,u),d=0,s&&s.length&&(d=xi(s[0],"availabilityTimeOffset",ki)||0),h=e.g.dash.ignoreMinBufferTime,f=0,h||(f=xi(t,"minBufferTime",Ti)||0),e.H=xi(t,"minimumUpdatePeriod",Ti,-1),p=xi(t,"availabilityStartTime",wi),g=xi(t,"timeShiftBufferDepth",Ti),m=e.g.dash.ignoreSuggestedPresentationDelay,v=null,m||(v=xi(t,"suggestedPresentationDelay",Ti)),y=e.g.dash.ignoreMaxSegmentDuration,b=null,y||(b=xi(t,"maxSegmentDuration",Ti)),x=t.getAttribute("type")||"static",e.i)for(S=e.i.presentationTimeline,k=c(Object.values(e.l)),C=k.next();!C.done;C=k.next())(_=C.value).segmentIndex&&_.segmentIndex.Gb(S.mb());else M=e.g.defaultPresentationDelay||1.5*f,S=new cs(p,null!=v?v:M,e.g.dash.autoCorrectDrift);return S.$c("static"==x),S.T()&&!isNaN(e.g.availabilityWindowOverride)&&(g=e.g.availabilityWindowOverride),null==g&&(g=1/0),S.Re(g),R=t.getAttribute("profiles")||"",N={ib:"static"!=x,presentationTimeline:S,oa:null,Y:null,va:null,L:null,bandwidth:0,Mf:!1,Zb:d,profiles:R.split(",")},D=function(e,t,n,r){var i=xi(r,"mediaPresentationDuration",Ti),a=[],o=0;r=pi(r,"Period");for(var s=0;s<r.length;s++){var u=r[s],l=r[s+1],c=xi(u,"start",Ti,o),d=u.id,h=xi(u,"duration",Ti),f=null;if(l){var p=xi(l,"start",Ti);null!=p&&(f=p-c)}else null!=i&&(f=i-c);if(null==f&&(f=h),!(null!==e.B&&null!==d&&null!==c&&c<e.B)||e.K.includes(d)||s+1==r.length){if(null!==c&&(null===e.B||c>e.B)&&(e.B=c),o=Th(e,t,n,{start:c,duration:f,node:u,oe:null==f||!l}),a.push(o),t.oa.id&&f&&(e.M[t.oa.id]=f),null==f){o=null;break}o=c+f}}return e.K=a.map((function(e){return e.id})),null!=i?{periods:a,duration:i,Df:!1}:{periods:a,duration:o,Df:!0}}(e,N,l,t),P=D.duration,O=D.periods,"static"!=x&&D.Df||S.Sa(P||1/0),e.C&&!e.F&&e.h.isAutoLowLatencyMode()&&(e.h.enableLowLatencyMode(),e.F=e.h.isLowLatencyMode()),e.F?S.Uf(e.C):e.C&&X("Low-latency DASH live stream detected, but low-latency streaming mode is not enabled in Shaka Player. Set streaming.lowLatencyMode configuration to true, and see https://bit.ly/3clctcj for details."),S.ze(b||1),w(j,qd(e.j,O,N.ib),2);case 2:if(e.i){e.i.variants=e.j.l,e.i.textStreams=e.j.j.slice(),e.i.imageStreams=e.j.i,e.h.filter(e.i),j.D(3);break}if(e.i={presentationTimeline:S,variants:e.j.l,textStreams:e.j.j.slice(),imageStreams:e.j.i,offlineSessionIds:[],minBufferTime:f||0,sequenceMode:e.g.dash.sequenceMode},!S.fg()){j.D(4);break}return U=pi(t,"UTCTiming"),w(j,function(e,t,n){var r,i,a,o,s,u,l,d;return L((function(h){switch(h.g){case 1:r=n.map((function(e){return{scheme:e.getAttribute("schemeIdUri"),value:e.getAttribute("value")}})),i=e.g.dash.clockSyncUri,!r.length&&i&&r.push({scheme:"urn:mpeg:dash:utc:http-head:2014",value:i}),a=c(r),o=a.next();case 2:if(o.done){h.D(4);break}switch(s=o.value,A(h,5),u=s.scheme,l=s.value,u){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":return h.D(7);case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":return h.D(8);case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":return d=Date.parse(l),h.return(isNaN(d)?0:d-Date.now());case"urn:mpeg:dash:utc:http-ntp:2014":case"urn:mpeg:dash:utc:ntp:2014":case"urn:mpeg:dash:utc:sntp:2014":X("NTP UTCTiming scheme is not supported");break;default:X("Unrecognized scheme in UTCTiming element",u)}h.D(9);break;case 7:return w(h,Ih(e,t,l,"HEAD"),10);case 10:return h.return(h.h);case 8:return w(h,Ih(e,t,l,"GET"),11);case 11:return h.return(h.h);case 9:E(h,3);break;case 5:I(h);case 3:o=a.next(),h.D(2);break;case 4:return X("A UTCTiming element should always be given in live manifests! This content may not play on clients with bad clocks!"),h.return(0)}}))}(e,l,U),5);case 5:if(B=j.h,!e.h)return j.return();S.Vf(B);case 4:S.ve();case 3:e.h.makeTextStreamsForClosedCaptions(e.i),T(j)}}))}function Th(e,t,n,r){t.oa=Eh(r.node,null,n),t.Y=r,t.oa.Zb=t.Zb,t.oa.id||(t.oa.id="__shaka_period_"+r.start);var i=pi(r.node,"EventStream");n=t.presentationTimeline.mb();for(var a=(i=c(i)).next();!a.done;a=i.next())kh(e,r.start,r.duration,a.value,n);if(n=pi(r.node,"AdaptationSet").map((function(n){return function(e,t,n){function r(e){switch(e){case 1:case 6:case 13:case 14:case 15:return"SDR";case 16:return"PQ";case 18:return"HLG"}}t.va=Eh(n,t.oa,null);var i,a=!1,o=pi(n,"Role"),s=o.map((function(e){return e.getAttribute("value")})).filter(Te),u=void 0,l=t.va.contentType==ke;l&&(u="subtitle");for(var h=(o=c(o)).next();!h.done;h=o.next()){var f=(h=h.value).getAttribute("schemeIdUri");if(null==f||"urn:mpeg:dash:role:2011"==f)switch(h=h.getAttribute("value"),h){case"main":a=!0;break;case"caption":case"subtitle":u=h}}f=pi(n,"EssentialProperty"),o=null,h=!1;for(var p=(f=c(f)).next();!p.done;p=f.next()){var g=(p=p.value).getAttribute("schemeIdUri");"http://dashif.org/guidelines/trickmode"==g?o=p.getAttribute("value"):"urn:mpeg:mpegB:cicp:TransferCharacteristics"==g?i=r(parseInt(p.getAttribute("value"),10)):h=!0}for(f=c(f=pi(n,"SupplementalProperty")),p=f.next();!p.done;p=f.next())"urn:mpeg:mpegB:cicp:TransferCharacteristics"==(p=p.value).getAttribute("schemeIdUri")&&(i=r(parseInt(p.getAttribute("value"),10)));f=pi(n,"Accessibility");var m=new Map;for(f=c(f),p=f.next();!p.done;p=f.next())if(g=p.value,p=g.getAttribute("schemeIdUri"),g=g.getAttribute("value"),"urn:scte:dash:cc:cea-608:2015"==p)if(p=1,null!=g)for(var v=c(g=g.split(";")),y=v.next();!y.done;y=v.next()){var b=y.value,x=y=void 0;b.includes("=")?(y=(b=b.split("="))[0].startsWith("CC")?b[0]:"CC"+b[0],x=b[1]||"und"):(y="CC"+p,2==g.length?p+=2:p++,x=b),m.set(y,De(x))}else m.set("CC1","und");else if("urn:scte:dash:cc:cea-708:2015"==p)if(p=1,null!=g)for(y=(g=c(g.split(";"))).next();!y.done;y=g.next())b=v=void 0,(y=y.value).includes("=")?(v="svc"+(y=y.split("="))[0],b=y[1].split(",")[0].split(":").pop()):(v="svc"+p,p++,b=y),m.set(v,De(b));else m.set("svc1","und");else"urn:mpeg:dash:role:2011"==p&&null!=g&&(s.push(g),"captions"==g&&(u="caption"));if(h)return null;h=pi(n,"ContentProtection");var A=yd(h,e.g.dash.ignoreDrmInfo,e.g.dash.keySystemsByURI),S=De(n.getAttribute("lang")||"und"),E=n.getAttribute("label");if((h=pi(n,"Label"))&&h.length&&(h=h[0],h.textContent&&(E=h.textContent)),h=pi(n,"Representation"),n=h.map((function(n){return(n=function(e,t,n,r,i,a,o,s,u,l){if(t.L=Eh(l,t.va,null),e.C=Math.min(e.C,t.L.Zb),!function(e){var t=e.Yc?1:0;return t+=e.Db?1:0,t+=e.Zc?1:0,0==t?e.contentType==ke||"application"==e.contentType:(1!=t&&(e.Yc&&(e.Db=null),e.Zc=null),!0)}(t.L))return null;var c=t.Y.start;t.bandwidth=xi(l,"bandwidth",Ei)||0;var d=t.L.contentType,h=d==ke||"application"==d;d="image"==d;try{var f=function(t,n,r){return function(e,t,n,r){var i,a,o,s,u;return L((function(l){return 1==l.g?(i=Fr,a=Ws(t,n,r,e.g.retryParameters),o=e.h.networkingEngine,s=o.request(i,a),Lr(e.s,s),w(l,s.promise,2)):(u=l.h,l.return(u.data))}))}(e,t,n,r)};if(t.L.Yc)var p=Ud(t,f);else if(t.L.Db)p=Vd(t,e.l);else if(t.L.Zc)p=Hd(t,f,e.l,!!e.i,e.g.dash.initialSegmentLimit,e.M);else{var g=t.L.Na,m=t.Y.duration||0;p={ac:function(){return Promise.resolve(Ns(c,m,g))}}}}catch(E){if((h||d)&&4002==E.code)return null;throw E}f=pi(l,"ContentProtection"),f=function(e,t,n,r){var i=yd(e,n,r);if(t.Ff)e=1==t.drmInfos.length&&!t.drmInfos[0].keySystem,n=0==i.drmInfos.length,(0==t.drmInfos.length||e&&!n)&&(t.drmInfos=i.drmInfos),t.Ff=!1;else if(0<i.drmInfos.length&&(t.drmInfos=t.drmInfos.filter((function(e){return i.drmInfos.some((function(t){return t.keySystem==e.keySystem}))})),0==t.drmInfos.length))throw new be(2,4,4008);return i.Bf||t.Bf}(f,n,e.g.dash.ignoreDrmInfo,e.g.dash.keySystemsByURI),f=new Set(f?[f]:[]);var v=!1;pi(l,"SupplementalProperty").some((function(e){return"tag:dolby.com,2018:dash:EC3_ExtensionType:2018"==e.getAttribute("schemeIdUri")&&"JOC"==e.getAttribute("value")}))&&(v=!0);var y,b,x=!1;if(h&&(x=s.includes("forced_subtitle")||s.includes("forced-subtitle")),d&&((l=pi(l,"EssentialProperty").find((function(e){return["http://dashif.org/thumbnail_tile","http://dashif.org/guidelines/thumbnail_tile"].includes(e.getAttribute("schemeIdUri"))})))&&(y=l.getAttribute("value")),!y))return null;l=t.L.codecs,t.profiles.includes("http://dashif.org/guidelines/dash-if-uhd#hevc-hdr-pq10")&&(l.includes("hvc1.2.4.L153.B0")||l.includes("hev1.2.4.L153.B0"))&&(b="PQ");var A=t.L.id?t.oa.id+","+t.L.id:"",S={id:e.I++,originalId:t.L.id,createSegmentIndex:function(){var n,r;return L((function(i){if(1==i.g)return(n=A&&t.ib&&e.l[A]?e.l[A]:S).segmentIndex?i.D(0):(r=n,w(i,p.ac(),3));r.segmentIndex=i.h,T(i)}))},closeSegmentIndex:function(){S.segmentIndex&&(S.segmentIndex.release(),S.segmentIndex=null)},segmentIndex:null,mimeType:t.L.mimeType,codecs:t.L.codecs,frameRate:t.L.frameRate,pixelAspectRatio:t.L.pixelAspectRatio,bandwidth:t.bandwidth,width:t.L.width,height:t.L.height,kind:r,encrypted:0<n.drmInfos.length,drmInfos:n.drmInfos,keyIds:f,language:i,label:a,type:t.va.contentType,primary:o,trickModeVideo:null,emsgSchemeIdUris:t.L.emsgSchemeIdUris,roles:s,forced:x,channelsCount:t.L.Cd,audioSamplingRate:t.L.audioSamplingRate,spatialAudio:v,closedCaptions:u,hdr:b,tilesLayout:y,matchedStreams:[]};return A&&t.ib&&!e.l[A]&&(e.l[A]=S),S}(e,t,A,u,S,E,a,s,m,n))&&(n.hdr=n.hdr||i),n})).filter((function(e){return!!e})),0==n.length){if(o="image"==t.va.contentType,e.g.dash.ignoreEmptyAdaptationSet||l||o)return null;throw new be(2,4,4003)}if(!t.va.contentType||"application"==t.va.contentType)for(t.va.contentType=Ch(n[0].mimeType,n[0].codecs),l=c(n),f=l.next();!f.done;f=l.next())f.value.type=t.va.contentType;for(l=c(n),f=l.next();!f.done;f=l.next())for(f=f.value,p=c(A.drmInfos),g=p.next();!g.done;g=p.next())(g=g.value).keyIds=g.keyIds&&f.keyIds?new Set([].concat(d(g.keyIds),d(f.keyIds))):g.keyIds||f.keyIds;return l=h.map((function(e){return e.getAttribute("id")})).filter(Te),{id:t.va.id||"__fake__"+e.I++,contentType:t.va.contentType,language:S,tj:a,streams:n,drmInfos:A.drmInfos,Ye:o,Bh:l}}(e,t,n)})).filter(Te),t.ib){for(r=[],a=(i=c(n)).next();!a.done;a=i.next())for(var o=(a=c(a.value.Bh)).next();!o.done;o=a.next())r.push(o.value);if(r.length!=new Set(r).size)throw new be(2,4,4018)}for(r=n.filter((function(e){return!e.Ye})),i=(n=c(n=n.filter((function(e){return e.Ye})))).next();!i.done;i=n.next()){a=(i=i.value).Ye.split(" ");for(var s=(o=c(r)).next();!s.done;s=o.next()){var u=s.value;if(a.includes(u.id)){s={};for(var l=(u=c(u.streams)).next();!l.done;s={hd:s.hd},l=u.next())s.hd=l.value,s.hd.trickModeVideo=i.streams.find(function(e){return function(t){return mn(e.hd.codecs)==mn(t.codecs)}}(s))}}}if(i=e.g.disableAudio?[]:Ah(r,"audio"),o=e.g.disableVideo?[]:Ah(r,"video"),a=e.g.disableText?[]:Ah(r,ke),n=e.g.disableThumbnails?[]:Ah(r,"image"),!o.length&&!i.length)throw new be(2,4,4004);for(r=[],s=(i=c(i)).next();!s.done;s=i.next())r.push.apply(r,d(s.value.streams));for(i=[],s=(o=c(o)).next();!s.done;s=o.next())i.push.apply(i,d(s.value.streams));for(o=[],s=(a=c(a)).next();!s.done;s=a.next())o.push.apply(o,d(s.value.streams));for(a=[],s=(n=c(n)).next();!s.done;s=n.next())a.push.apply(a,d(s.value.streams));return{id:t.oa.id,nd:r,Od:i,textStreams:o,imageStreams:a}}function Ah(e,t){return e.filter((function(e){return e.contentType==t}))}function Sh(e,t){0>e.H||e.G.R(Math.max(3,e.H-t,Xe(e.J)))}function Eh(e,t,n){t=t||{contentType:"",mimeType:"",codecs:"",emsgSchemeIdUris:[],frameRate:void 0,pixelAspectRatio:void 0,Cd:null,audioSamplingRate:null,Zb:0},n=n||t.Na;for(var r=pi(e,"BaseURL"),i=r.map(yi),a=e.getAttribute("contentType")||t.contentType,o=e.getAttribute("mimeType")||t.mimeType,s=e.getAttribute("codecs")||t.codecs,u=xi(e,"frameRate",Ci)||t.frameRate,l=e.getAttribute("sar")||t.pixelAspectRatio,d=pi(e,"InbandEventStream"),h=t.emsgSchemeIdUris.slice(),f=(d=c(d)).next();!f.done;f=d.next())f=f.value.getAttribute("schemeIdUri"),h.includes(f)||h.push(f);d=function(e){for(var t=(e=c(e)).next();!t.done;t=e.next()){var n=t.value;if((t=n.getAttribute("schemeIdUri"))&&(n=n.getAttribute("value")))switch(t){case"urn:mpeg:dash:outputChannelPositionList:2012":return n.trim().split(/ +/).length;case"urn:mpeg:dash:23003:3:audio_channel_configuration:2011":case"urn:dts:dash:audio_channel_configuration:2012":if(!(t=parseInt(n,10)))continue;return t;case"tag:dolby.com,2014:dash:audio_channel_configuration:2011":case"urn:dolby:dash:audio_channel_configuration:2011":if(!(t=parseInt(n,16)))continue;for(e=0;t;)1&t&&++e,t>>=1;return e;case"urn:mpeg:mpegB:cicp:ChannelConfiguration":if(t=[0,1,2,3,4,5,6,8,2,3,4,7,8,24,8,12,10,12,14,12,14],(n=parseInt(n,10))&&0<n&&n<t.length)return t[n]}}return null}(d=pi(e,"AudioChannelConfiguration"))||t.Cd,f=xi(e,"audioSamplingRate",Ii)||t.audioSamplingRate,a||(a=Ch(o,s));var p=hi(e,"SegmentBase"),g=hi(e,"SegmentTemplate"),m=p&&xi(p,"availabilityTimeOffset",ki)||0,v=g&&xi(g,"availabilityTimeOffset",ki)||0;return r=r&&r.length&&xi(r[0],"availabilityTimeOffset",ki)||0,r=t.Zb+r+m+v,{Na:Ae(n,i),Yc:p||t.Yc,Db:hi(e,"SegmentList")||t.Db,Zc:g||t.Zc,width:xi(e,"width",Ii)||t.width,height:xi(e,"height",Ii)||t.height,contentType:a,mimeType:o,codecs:s,frameRate:u,pixelAspectRatio:l,emsgSchemeIdUris:h,id:e.getAttribute("id"),Cd:d,audioSamplingRate:f,Zb:r}}function Ih(e,t,n,r){var i,a,o,s,u,l;return L((function(c){if(1==c.g)return i=Ae(t,[n]),(a=Or(i,e.g.retryParameters)).method=r,o=e.h.networkingEngine.request(4,a),Lr(e.s,o),w(c,o.promise,2);if(s=c.h,"HEAD"==r){if(!s.headers||!s.headers.date)return c.return(0);u=s.headers.date}else u=Ht(s.data);return l=Date.parse(u),isNaN(l)?c.return(0):c.return(l-Date.now())}))}function kh(e,t,n,r,i){for(var a=r.getAttribute("schemeIdUri")||"",o=r.getAttribute("value")||"",s=xi(r,"timescale",Ii)||1,u=(r=c(pi(r,"Event"))).next();!u.done;u=r.next()){var l=xi(u=u.value,"presentationTime",Ii)||0,d=xi(u,"duration",Ii)||0;d=(l=l/s+t)+d/s,null!=n&&(l=Math.min(l,t+n),d=Math.min(d,t+n)),d<i||(u={schemeIdUri:a,value:o,startTime:l,endTime:d,id:u.getAttribute("id")||"",eventElement:u},e.h.onTimelineRegionAdded(u))}}function Ch(e,t){return xn(pn(e,t))?ke:e.split("/")[0]}function _h(e,t,n,r){this.h=e,this.type=t,this.g=n,this.segments=r||null}function Mh(e,t,n,r){this.id=e,this.name=t,this.g=n,this.value=void 0===r?null:r}function Rh(e,t,n){return(e=e.getAttribute(t))?e.value:n||null}function Nh(e,t){if(!(e=e.getAttribute(t)))throw new be(2,4,4023,t);return e.value}function Lh(e,t,n){n=void 0===n?[]:n,this.g=t,this.i=e,this.h=n}function Dh(e,t){this.name=e,this.value=t}function Ph(e,t){return e.filter((function(e){return e.name==t}))}function Oh(e,t){return e.filter((function(e){return Nh(e,"TYPE")==t}))}function Uh(e,t){return(e=Ph(e,t)).length?e[0]:null}function Bh(e,t){var n=0;return n=void 0===n?0:n,(e=Uh(e,t))?Number(e.value):n}function jh(e,t){return Ae([e],[t])[0]}function Fh(e){this.h=e,this.g=0}function zh(e){Gh(e,/[ \t]+/gm)}function Gh(e,t){return t.lastIndex=e.g,t=null==(t=t.exec(e.h))?null:{position:t.index,length:t[0].length,results:t},e.g==e.h.length||null==t||t.position!=e.g?null:(e.g+=t.length,t.results)}function Vh(e){return e.g==e.h.length?null:(e=Gh(e,/[^ \t\n]*/gm))?e[0]:null}function Kh(){this.g=0}function Hh(e,t,n){var r=(t=(t=Ht(t)).replace(/\r\n|\r(?=[^\n]|$)/gm,"\n").trim()).split(/\n+/m);if(!/^#EXTM3U($|[ \t\n])/m.test(r[0]))throw new be(2,4,4015);t=0;for(var i=!0,a=c(r),o=a.next();!o.done;o=a.next())if(o=o.value,/^#(?!EXT)/m.test(o)||i)i=!1;else{if(o=Wh(e,o),--e.g,Xh.includes(o.name)){t=1;break}"EXT-X-STREAM-INF"==o.name&&(i=!0)}for(a=[],i=!0,o=0;o<r.length;o++){var s=r[o],u=r[o+1];if(/^#(?!EXT)/m.test(s)||i)i=!1;else{if(s=Wh(e,s),qh.includes(s.name)){if(1!=t)throw new be(2,4,4017);var l=r.splice(o,r.length-o);r=n,i=[],o=[],u=[],s=null;for(var d=(l=c(l)).next();!d.done;d=l.next())d=d.value,/^(#EXT)/.test(d)?(d=Wh(e,d),Xh.includes(d.name)?a.push(d):"EXT-X-MAP"==d.name?s=d:"EXT-X-PART"==d.name?u.push(d):"EXT-X-PRELOAD-HINT"==d.name?"PART"==Rh(d,"TYPE")?u.push(d):"MAP"==Rh(d,"TYPE")&&(d.name="EXT-X-MAP",s=d):o.push(d)):/^#(?!EXT)/m.test(d)||(d=jh(r,d.trim()),s&&o.push(s),i.push(new Lh(d,o,u)),o=[],u=[]);return u.length&&(s&&o.push(s),i.push(new Lh("",o,u))),new _h(n,t,a,i)}a.push(s),"EXT-X-STREAM-INF"==s.name&&(s.g.push(new Dh("URI",u)),i=!0)}}return new _h(n,t,a)}function Wh(e,t){e=e.g++;var n=t.match(/^#(EXT[^:]*)(?::(.*))?$/);if(!n)throw new be(2,4,4016,t);t=n[1];var r,i=n[2];if(n=[],i){var a;(a=Gh(i=new Fh(i),/^([^,=]+)(?:,|$)/g))&&(r=a[1]);for(var o=/([^=]+)=(?:"([^"]*)"|([^",]*))(?:,|$)/g;a=Gh(i,o);)n.push(new Dh(a[1],a[2]||a[3])),zh(i)}return new Mh(e,t,n,r)}(i=bh.prototype).configure=function(e){this.g=e},i.start=function(e,t){var n,r=this;return L((function(i){if(1==i.g)return r.F=t.isLowLatencyMode(),r.m=[e],r.h=t,w(i,xh(r),2);if(n=i.h,r.h&&Sh(r,n),!r.h)throw new be(2,7,7001);return i.return(r.i)}))},i.stop=function(){for(var e=c(Object.values(this.l)),t=e.next();!t.done;t=e.next())(t=t.value).segmentIndex&&t.segmentIndex.release();return this.j&&this.j.release(),this.g=this.h=null,this.m=[],this.i=null,this.l={},this.j=null,null!=this.G&&(this.G.stop(),this.G=null),this.s.destroy()},i.update=function(){var e,t=this;return L((function(n){return 1==n.g?(A(n,2),w(n,xh(t),4)):2!=n.g?E(n,0):(e=I(n),t.h&&e?(t.h.onError(e),void T(n)):n.return())}))},i.onExpirationUpdated=function(){},z("shaka.dash.DashParser",bh),oa.mpd=function(){return new bh},aa["application/dash+xml"]=function(){return new bh},aa["video/vnd.mpeg.dash.mpd"]=function(){return new bh},Mh.prototype.toString=function(){var e="#"+this.name,t=this.g?this.g.map((function(e){return e.name+"="+(isNaN(Number(e.value))?'"'+e.value+'"':e.value)})):[];return this.value&&t.unshift(this.value),0<t.length&&(e+=":"+t.join(",")),e},Mh.prototype.getAttribute=function(e){var t=this.g.filter((function(t){return t.name==e}));return t.length?t[0]:null};var Xh="EXT-X-TARGETDURATION EXT-X-MEDIA-SEQUENCE EXT-X-DISCONTINUITY-SEQUENCE EXT-X-PLAYLIST-TYPE EXT-X-I-FRAMES-ONLY EXT-X-ENDLIST EXT-X-SERVER-CONTROL EXT-X-SKIP".split(" "),qh="EXTINF EXT-X-BYTERANGE EXT-X-DISCONTINUITY EXT-X-PROGRAM-DATE-TIME EXT-X-KEY EXT-X-DATERANGE EXT-X-MAP".split(" ");function Yh(){}function $h(e){try{var t=Qh(e);return kr({uri:e,Qf:e,data:t.data,headers:{"content-type":t.contentType}})}catch(n){return Er(n)}}function Qh(t){var n=t.split(":");if(2>n.length||"data"!=n[0])throw new be(2,1,1004,t);if(2>(n=n.slice(1).join(":").split(",")).length)throw new be(2,1,1004,t);var r=n[0];t=e.decodeURIComponent(n.slice(1).join(",")),n=r.split(";"),r=n[0];var i=!1;return 1<n.length&&"base64"==n[n.length-1]&&(i=!0,n.pop()),{data:i?en(t):qt(t),contentType:r}}function Jh(){var e=this;this.g=this.i=null,this.sa=1,this.s=new Map,this.C=new Map,this.H=new Map,this.H.set("video",new Map),this.H.set("audio",new Map),this.H.set(ke,new Map),this.H.set("image",new Map),this.ka=new Set,this.h=new Map,this.j=null,this.O="",this.X=new Kh,this.P=0,this.F=-1,this.J=1/0,this.ua=!1,this.m=new Rt((function(){!function(e){var t,n;L((function(r){return 1==r.g?e.i?(A(r,2),w(r,e.update(),4)):r.return():2!=r.g?(If(e)&&(t=e.P,e.m.R(t)),E(r,0)):(n=I(r),e.i?(n.severity=1,e.i.onError(n),e.m.R(.1),void T(r)):r.return())}))}(e)})),this.aa=Df,this.G=null,this.ra=0,this.K=1/0,this.V=this.$=0,this.I=new Nr,this.M=new Map,this.B=new Map,this.Z=new Map,this.l=!1}function Zh(e,t){return If(e)?e.H.get(t.type):t.zd}function ef(e,t){var n,r,i,a,o,s,u,l,c,h,f,p,g,m,v;return L((function(y){if(1==y.g)return n=t.ld,r=new ae(n),e.l&&t.pd&&ue(r,new ve("_HLS_skip=YES")),w(y,Ef(e,r.toString()),2);if(i=y.h,!t.stream.segmentIndex)return y.return();if(1!=(a=Hh(e.X,i.data,i.uri)).type)throw new be(2,4,4017);o=Ph(a.g,"EXT-X-DEFINE"),s=rf(e,o),u=t.stream,l=Zh(e,t),c=pf(a,u.mimeType),h=c.keyIds,f=c.drmInfos,function(e,t){return e.size===t.size&&[].concat(d(e)).every((function(e){return t.has(e)}))}(u.keyIds,h)||(u.keyIds=h,u.drmInfos=f,e.i.newDrmInfo(u)),p=wf(e,a,u.type,l,s),u.segmentIndex.kc(p,e.j.mb()),p.length&&(g=Bh(a.g,"EXT-X-MEDIA-SEQUENCE"),m=l.get(g),u.segmentIndex.Gb(m)),v=p[p.length-1],Uh(a.g,"EXT-X-ENDLIST")&&(t.Lc=!0,t.Ab=v.endTime),T(y)}))}function tf(e,t,n){t.Ab+=n;for(var r=(t=c(e=Zh(e,t))).next();!r.done;r=t.next()){var i=c(r.value);r=i.next().value,i=i.next().value,e.set(r,i+n)}}function nf(e){if(If(e)){if(e.P=e.K,e.aa==Of){var t=lf(e);e.g.hls.useSafariBehaviorForLive&&(t=e.j.m),isNaN(e.g.availabilityWindowOverride)||(t=e.g.availabilityWindowOverride),e.j.Re(t)}}else e.j.Sa(lf(e));e.j.ve()}function rf(e,t){for(var n=new Map,r=(t=c(t)).next();!r.done;r=t.next()){var i=r.value;r=Rh(i,"NAME");var a=Rh(i,"VALUE");i=Rh(i,"IMPORT"),r&&a&&n.set(r,a),i&&(r=e.s.get(i))&&n.set(i,r)}return n}function af(e,t){var n=[];e.g.disableVideo||n.push(e.g.hls.defaultVideoCodec),e.g.disableAudio||n.push(e.g.hls.defaultAudioCodec),n=Rh(t,"CODECS",n.join(",")).split(/\s*,\s*/),e=new Set,t=[];for(var r=(n=c(n)).next();!r.done;r=n.next()){var i=yn(r=r.value)[0];e.has(i)||(t.push(r),e.add(i))}return t}function of(e){return De(e=Rh(e,"LANGUAGE")||"und")}function sf(e,t){var n=Nh(t,"GROUP-ID"),r="",i=Nh(t,"TYPE").toLowerCase();"subtitles"==i&&(i=ke);var a=i;if(a!=ke&&n&&e.B.has(n)&&(r=e.B.get(n)),i=Tf(Nh(t,"URI"),e.s),e.h.has(i))return e.h.get(i);var o=of(t),s=Rh(t,"NAME"),u="YES"==Rh(t,"DEFAULT"),l="audio"==a&&(l=Rh(t,"CHANNELS"))?parseInt(l.split("/")[0],10):null,c="audio"==a&&(!!(c=Rh(t,"CHANNELS"))&&c.includes("/JOC"));return r=uf(e,i,r,a,o,u,s,l,null,Rh(t,"CHARACTERISTICS"),t="YES"==Rh(t,"FORCED"),c),e.C.has(n)?e.C.get(n).push(r):e.C.set(n,[r]),e.h.has(i)?e.h.get(i):(e.h.set(i,r),r)}function uf(e,t,n,r,i,a,o,s,u,l,d,h){function f(f){var p,v,y,b,x,A,S,E,I,k,C,_,M;return L((function(R){if(1==R.g)return w(R,Ef(e,m.ld),2);if(3!=R.g)return p=R.h,f.aborted?R.return():(v=p.uri,y=Hh(e.X,p.data,v),b=If(e),w(R,hf(e,y,t,v,n,r,i,a,o,s,u,l,d,h),3));if(x=R.h,f.aborted)return R.return();if(A=x.stream,If(e)&&!b&&vf(e),m.ld=v,m.Ab=x.Ab,m.pd=x.pd,m.Lc=x.Lc,m.zd=x.zd,m.ue=!0,g.segmentIndex=A.segmentIndex,g.encrypted=A.encrypted,g.drmInfos=A.drmInfos,g.keyIds=A.keyIds,g.mimeType=A.mimeType,ls.includes(g.mimeType)&&(g.codecs=""),g.drmInfos.length&&e.i.newDrmInfo(g),r==(S=Ce).Ma||r==S.jd)for(E=c(e.h.values()),I=E.next();!I.done;I=E.next())(k=I.value).ue||k.type!=r||(k.stream.mimeType=A.mimeType,ls.includes(k.stream.mimeType)&&(k.stream.codecs=""));(function(e){if(!e.G)return!1;for(var t=[],n=[],r=(e=c(e.G.variants)).next();!r.done;r=e.next())(r=r.value).video&&t.push(r.video),r.audio&&n.push(r.audio);return!(0<t.length&&!t.some((function(e){return e.segmentIndex}))||0<n.length&&!n.some((function(e){return e.segmentIndex})))})(e)&&(e.ua?df(e,[m]):(e.ua=!0,C=Array.from(e.h.values()),_=C.filter((function(e){return e.stream.segmentIndex})),df(e,_),nf(e),0<(M=e.P)&&e.m.R(M))),T(R)}))}var p=jh(e.O,t),g=ff(e,n,r,i,a,o,s,u,l,d,h);ls.includes(g.mimeType)&&(g.codecs="");var m={stream:g,type:r,bd:t,ld:p,Ab:0,zd:new Map,pd:!1,Lc:!1,ke:-1,ue:!1},v=null,y=new AbortController;return g.createSegmentIndex=function(){return v||(y=new AbortController,v=new Promise((function(e){e(f(y.signal))})))},g.closeSegmentIndex=function(){v&&!g.segmentIndex&&y.abort(),g.segmentIndex&&(g.segmentIndex.release(),g.segmentIndex=null),v=null},m}function lf(e){for(var t=1/0,n=(e=c(e.h.values())).next();!n.done;n=e.next())(n=n.value).stream.segmentIndex&&"text"!=n.stream.type&&(t=Math.min(t,n.Ab));return t}function cf(e,t){for(var n=[],r=(t=c(t)).next();!r.done;r=t.next())(r=r.value).segmentIndex&&Rs(r.segmentIndex,(function(e){n.push(e)}));e.j.lc(n)}function df(e,t){if(!If(e))for(var n=lf(e),r=c(t),i=r.next();!i.done;i=r.next())i.value.stream.segmentIndex.wb(0,n);for(i=(n=c(t)).next();!i.done;i=n.next())i=i.value.stream,ls.includes(i.mimeType)&&(i.codecs="");cf(e,t.map((function(e){return e.stream}))),e.g.hls.ignoreManifestProgramDateTime?function(e,t){for(var n=-1==e.F,r=c(t),i=r.next();!i.done;i=r.next()){var a=(i=i.value).stream.segmentIndex,o=Zh(e,i);if(a=a.g[0]||null)for(var s=(o=c(o)).next();!s.done;s=o.next()){var u=(s=c(s.value)).next().value;if(s.next().value==a.startTime){n&&(e.F=Math.max(e.F,u)),i.ke=u;break}}}if(!(0>e.F))for(i=(t=c(t)).next();!i.done;i=t.next())(r=(n=i.value).stream.segmentIndex)&&(r.g.splice(0,e.F-n.ke),(r=r.g[0]||null)&&(r=-r.startTime,n.stream.segmentIndex.offset(r),tf(e,n,r)))}(e,t):function(e,t){if(1/0==e.J)for(var n=(t=c(t)).next();!n.done;n=t.next()){var r=n.value.stream.segmentIndex.g[0]||null;null!=r&&null!=r.g&&(e.J=Math.min(e.J,r.g))}if(1/0!=(t=e.J))for(n=(r=c(e.h.values())).next();!n.done;n=r.next()){var i=(n=n.value).stream.segmentIndex;if(null!=i){var a=i.g[0]||null;if(null==a.g)W("Missing EXT-X-PROGRAM-DATE-TIME for stream",n.bd,"Expect AV sync issues!");else for(tf(e,n,a.g-t-a.startTime),i=(n=c(i)).next();!i.done;i=n.next())i.value.Ve(t)}}}(e,t)}function hf(e,t,n,r,i,a,o,s,u,l,c,d,h,f,p){var g,m,v,y,b,x,T,A,S,E,I,k,C,_,M;return L((function(R){if(1==R.g){if(1!=t.type)throw new be(2,4,4017);return g=Ph(t.g,"EXT-X-DEFINE"),m=rf(e,g),mf(e,t),p?R.D(2):w(R,function(e,t,n,r,i){var a,o,s,u,l,c,d,h,f,p;return L((function(g){return 1==g.g?(a=Fr,o=Math.trunc((r.segments.length-1)/2),s=Tf(r.segments[o].i,i),u=new ae(s),l=u.Ha.split(".").pop(),c=Nf[t],(d=c[l])||(d=_f[l])||(d=Af(t,n))?g.return(d):((h=Or([s],e.g.retryParameters)).method="HEAD",w(g,Cf(e,h,a),2))):(f=g.h,(p=f.headers["content-type"])?g.return(p.split(";")[0]):g.return(Sf(t)))}))}(e,a,i,t,m),3)}if(2!=R.g&&(p=R.h),v=pf(t,p),y=v.drmInfos,b=v.keyIds,x=v.encrypted,T=v.ng,x&&!y.length&&!T)throw new be(2,4,4026);return A=If(e)?e.H.get(a):new Map,S=e.l,E=wf(e,t,a,A,m),S!=e.l&&mf(e,t),I=E[E.length-1].endTime,k=new Ms(E),_=!!(C=Uh(t.g,"EXT-X-SERVER-CONTROL"))&&null!=C.getAttribute("CAN-SKIP-UNTIL"),(M=ff(e,i,a,o,s,u,l,c,d,h,f)).segmentIndex=k,M.encrypted=x,M.drmInfos=y,M.keyIds=b,M.mimeType=p,R.return({stream:M,type:a,bd:n,ld:r,Ab:I,pd:_,Lc:!1,ke:-1,zd:A,ue:!1})}))}function ff(e,t,n,r,i,a,o,s,u,l,c){var d=Af(n,t)||Sf(n);return{id:e.sa++,originalId:a,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:null,mimeType:d,codecs:t,kind:n==ke?"subtitle":void 0,encrypted:!1,drmInfos:[],keyIds:new Set,language:r,label:a,type:n,primary:i,trickModeVideo:null,emsgSchemeIdUris:null,frameRate:void 0,pixelAspectRatio:void 0,width:void 0,height:void 0,bandwidth:void 0,roles:u?u.split(","):[],forced:l,channelsCount:o,audioSamplingRate:null,spatialAudio:c,closedCaptions:s,hdr:void 0,tilesLayout:void 0}}function pf(e,t){var n=[];if(e.segments)for(var r=(e=c(e.segments)).next();!r.done;r=e.next())r=Ph(r.value.g,"EXT-X-KEY"),n.push.apply(n,d(r));r=e=!1;for(var i=[],a=new Set,o=(n=c(n)).next();!o.done;o=n.next()){var s=Nh(o=o.value,"METHOD");if("NONE"!=s)if(e=!0,"AES-128"==s)r=!0;else if(s=Rh(o,"KEYFORMAT")||"identity",o=(s=Lf[s])?s(o,t):null){if(o.keyIds)for(var u=(s=c(o.keyIds)).next();!u.done;u=s.next())a.add(u.value);i.push(o)}}return{drmInfos:i,keyIds:a,encrypted:e,ng:r}}function gf(t,n,r){if(!e.crypto||!e.crypto.subtle)throw X("Web Crypto API is not available to decrypt AES-128. (Web Crypto only exists in secure origins like https)"),new be(2,4,4042);var i=0,a=Rh(n,"IV","");if(a){var o=tn(a.substr(2));if(16!=o.byteLength)throw new be(2,4,4043)}else i=Bh(r.g,"EXT-X-MEDIA-SEQUENCE");var s=Or([n=jh(r.h,Nh(n,"URI"))],t.g.retryParameters),u={method:"AES-128",iv:o,firstMediaSequenceNumber:i,fetchKey:function(){var n,r,i;return L((function(a){if(1==a.g)return w(a,Cf(t,s,6),2);if(3!=a.g){if(!(n=a.h).data||16!=n.data.byteLength)throw new be(2,4,4044);return r={name:"AES-CBC"},i=u,w(a,e.crypto.subtle.importKey("raw",n.data,r,!0,["decrypt"]),3)}i.cryptoKey=a.h,u.fetchKey=void 0,T(a)}))}};return u}function mf(e,t){var n=Uh(t.g,"EXT-X-PLAYLIST-TYPE"),r=Uh(t.g,"EXT-X-ENDLIST");if(r=n&&"VOD"==n.value||r,n=n&&"EVENT"==n.value&&!r,n=!r&&!n,r)kf(e,Df);else{if(kf(e,n?Of:Pf),!(r=Uh(t.g,"EXT-X-TARGETDURATION")))throw new be(2,4,4024,"EXT-X-TARGETDURATION");r=Number(r.value),n=Uh(t.g,"EXT-X-PART-INF"),e.l&&n?(e.$=Number(Nh(n,"PART-TARGET")),e.K=Math.min(e.$,e.K),t=Uh(t.g,"EXT-X-SERVER-CONTROL"),e.V=t?Number(Nh(t,"PART-HOLD-BACK")):0):e.K=Math.min(r,e.K),e.ra=Math.max(r,e.ra)}}function vf(e){var t=e.g.defaultPresentationDelay?e.g.defaultPresentationDelay:e.V?e.V:e.ra*e.g.hls.liveSegmentsDelay;e.j.Zf(0),e.j.Wf(t),e.j.$c(!1)}function yf(e,t,n,r){return(n=Uh(n,"EXT-X-MAP"))?(t=[r=Tf(jh(t,Nh(n,"URI")),r),Rh(n,"BYTERANGE","")].join("-"),e.Z.has(t)||(n=function(e,t){var n=0,r=null;(t=Rh(t,"BYTERANGE"))&&(n=t.split("@"),r=Number(n[0]),n=Number(n[1]),r=n+r-1);return new Ao((function(){return[e]}),n,r)}(r,n),e.Z.set(t,n)),e.Z.get(t)):null}function bf(e,t,n,r,i,a,o,s,u){var l=r.g,d=Tf(r.i,a),h=Uh(l,"EXTINF"),f=a=0,p=null;r.h.length&&!e.l&&X("Low-latency HLS live stream detected, but low-latency streaming mode is not enabled in Shaka Player. Set streaming.lowLatencyMode configuration to true, and see https://bit.ly/3clctcj for details.");var g=null;if(!e.g.hls.ignoreManifestProgramDateTime){var m=Uh(l,"EXT-X-PROGRAM-DATE-TIME");m&&m.value&&(g=wi(m.value))}if(m=Eo,Uh(l,"EXT-X-GAP")&&(m=2),!h){if(0==r.h.length)throw new be(2,4,4024,"EXTINF");if(!e.l)return null}var v=[];if(e.l)for(var y={},b=0;b<r.h.length;y={Wd:y.Wd},b++){var x=r.h[b],w=0==b?n:v[v.length-1],T=0==b?i:w.endTime,A=Number(Rh(x,"DURATION"))||e.$;if(A){A=T+A;var S=0,E=null;"EXT-X-PRELOAD-HINT"==x.name?S=(S=Rh(x,"BYTERANGE-START"))?Number(S):0:(S=(E=c(xf(w,S=Rh(x,"BYTERANGE")))).next().value,E=E.next().value),(w=Rh(x,"URI"))&&(y.Wd=jh(o,w),w=Eo,"YES"==Rh(x,"GAP")&&(w=2),v.push(new So(T,A,function(e){return function(){return[e.Wd]}}(y),S,E,t,0,0,1/0,[],"",null,null,w)))}}return a=h?i+Number(h.value.split(",")[0]):v[v.length-1].endTime,(e=Uh(l,"EXT-X-BYTERANGE"))?(f=(p=c(xf(n,e.value))).next().value,p=p.next().value):v.length&&(f=v[0].Ta,p=v[v.length-1].Ba),n="",e=null,"image"==s&&(n="1x1",s=Uh(l,"EXT-X-TILES"))&&(n=Nh(s,"LAYOUT"),(s=Rh(s,"DURATION"))&&(e=Number(s))),new So(i,a,(function(){return d.length?[d]:[]}),f,p,t,0,0,1/0,v,n,e,g,m,u)}function xf(e,t){var n=0,r=null;return t&&(n=t.split("@"),t=Number(n[0]),r=(n=n[1]?Number(n[1]):e.Ba+1)+t-1),[n,r]}function wf(e,t,n,r,i){var a=t.segments,o=void 0,s=Bh(t.g,"EXT-X-DISCONTINUITY-SEQUENCE"),u=Bh(t.g,"EXT-X-MEDIA-SEQUENCE"),l=Uh(t.g,"EXT-X-SKIP"),d=u+(l=l?Number(Rh(l,"SKIPPED-SEGMENTS")):0),h=0;If(e)&&r.has(d)&&(h=r.get(d));for(var f=[],p=null,g=0;g<a.length;g++){var m=a[g],v=0==g?h:p.endTime;d=u+l+g,Uh(m.g,"EXT-X-DISCONTINUITY")&&s++;for(var y=c(m.g),b=y.next();!b.done;b=y.next())"EXT-X-KEY"==(b=b.value).name&&(o="AES-128"==Nh(b,"METHOD")?gf(e,b,t):void 0);r.set(d,v),y=yf(e,t.h,m.g,i),!e.l&&e.i.isAutoLowLatencyMode()&&(e.i.enableLowLatencyMode(),e.l=e.i.isLowLatencyMode()),(p=m=bf(e,y,p,m,v,i,t.h,n,o))&&(m.m=s,e.g.hls.ignoreManifestProgramDateTime&&null!=e.F&&d<e.F||f.push(m))}if(t=f.some((function(e){return null!=e.g})))for(n={},r=0;r<f.length;n={tc:n.tc,sc:n.sc,cd:n.cd,rb:n.rb,rc:n.rc},r++)if(n.rb=f[r],null==n.rb.g)for(n.sc=0,n.tc=r,i=function(e){return function(){var t=f[e.tc];if(t){if(null!=t.g)return t.g+e.sc;e.sc-=t.endTime-t.startTime,e.tc+=1}return null}}(n),n.rc=0,n.cd=r,a=function(e){return function(){var t=f[e.cd];if(t){if(t!=e.rb&&(e.rc+=t.endTime-t.startTime),null!=t.g)return t.g+e.rc;--e.cd}return null}}(n);null==n.rb.g;)n.rb.g=a(),null==n.rb.g&&(n.rb.g=i());if(t)for(r=(n=c(f)).next();!r.done;r=n.next())for(r=(i=r.value).g,a=(i=c(i.i)).next();!a.done;a=i.next())(a=a.value).g=r,r+=a.endTime-a.startTime;if(e=e.J,t&&1/0!=e)for(r=(t=c(f)).next();!r.done;r=t.next())r.value.Ve(e);return f}function Tf(e,t){var n=(e=String(e).replace(/%7B/g,"{").replace(/%7D/g,"}")).match(/{\$\w*}/g);if(n)for(var r=(n=c(n)).next();!r.done;r=n.next()){var i=(r=r.value).slice(2,r.length-1),a=t.get(i);if(!a)throw new be(2,4,4039,i);e=e.replace(r,a)}return e}function Af(e,t){if(e==ke){if("vtt"==t||"wvtt"==t)return"text/vtt";if(t&&""!==t)return"application/mp4"}return"image"!=e||t&&"jpeg"!=t?"audio"==e&&"mp4a.40.34"==t?"audio/mpeg":null:"image/jpeg"}function Sf(e){return e==ke?"text/vtt":Nf[e].mp4}function Ef(e,t){return t=Or([t],e.g.retryParameters),e.i.modifyManifestRequest(t,{format:"h"}),Cf(e,t,0)}function If(e){return e.aa!=Df}function kf(e,t){e.aa=t,e.j&&e.j.$c(!If(e)),If(e)||e.m.stop()}function Cf(e,t,n){if(!e.I)throw new be(2,7,7001);return t=e.i.networkingEngine.request(n,t),Lr(e.I,t),t.promise}z("shaka.net.DataUriPlugin",Yh),Yh.parse=$h,Pr("data",$h),(i=Jh.prototype).configure=function(e){this.g=e},i.start=function(e,t){var n,r=this;return L((function(i){return 1==i.g?(r.i=t,r.l=t.isLowLatencyMode(),w(i,Ef(r,e),2)):3!=i.g?(n=i.h,r.O=n.uri,w(i,function(e,t,n){var r,i,a,o,s,u,l,d,h,f,p,g,m,v,y,b,x,S,E,k,C,_,M,R,N,D,P,O,U,B,j;return L((function(F){switch(F.g){case 1:r=Hh(e.X,t,e.O);for(var z=c(Ph(r.g,"EXT-X-DEFINE")),V=z.next();!V.done;V=z.next()){var K=V.value;V=Rh(K,"NAME"),K=Rh(K,"VALUE"),V&&K&&(e.s.has(V)||e.s.set(V,K))}if(i=[],a=[],o=[],1==r.type)return E=e.g.hls.mediaPlaylistFullMimeType,r.segments.length&&(k=new ae(r.segments[0].i),C=k.Ha.split(".").pop(),(_=_f[C])?E=_:"ts"!==C&&"mp4"!==C&&(Mf[C]?(_=Mf[C],M=e.g.hls.defaultAudioCodec,E=_+'; codecs="'+M+'"'):Rf[C]&&(_=Rf[C],R=e.g.hls.defaultVideoCodec,E=_+'; codecs="'+R+'"'))),N=E.split(";")[0],D=N.split("/")[0],P=vn(E),O=new Map,w(F,hf(e,r,n,n,P,D,"",!0,"Media Playlist",null,O,null,!1,!1,N),5);for(s=Ph(r.g,"EXT-X-MEDIA"),u=Ph(r.g,"EXT-X-STREAM-INF"),l=Ph(r.g,"EXT-X-IMAGE-STREAM-INF"),d=Ph(r.g,"EXT-X-SESSION-KEY"),V=(z=c(u)).next();!V.done;V=z.next()){var H=V.value;K=Rh(H,"AUDIO"),V=Rh(H,"VIDEO");var W=Rh(H,"SUBTITLES");if(H=af(e,H),W){var X=Ie(ke,H);e.B.set(W,X),Je(H,X)}K&&((W=Ie("audio",H))||(W=e.g.hls.defaultAudioCodec),e.B.set(K,W)),V&&((K=Ie("video",H))||(K=e.g.hls.defaultVideoCodec),e.B.set(V,K))}for(h=Ph(r.g,"EXT-X-SESSION-DATA"),f=c(h),p=f.next();!p.done;p=f.next())g=p.value,m=Rh(g,"DATA-ID"),v=Rh(g,"URI"),y=Rh(g,"LANGUAGE"),b=Rh(g,"VALUE"),x=(new Map).set("id",m),v&&x.set("uri",jh(e.O,v)),y&&x.set("language",y),b&&x.set("value",b),S=new G("sessiondata",x),e.i&&e.i.onEvent(S);for(function(e,t){t=t.filter((function(e){var t=Rh(e,"URI")||"";return"SUBTITLES"!=Rh(e,"TYPE")&&""!=t}));for(var n=(t=c(t)).next();!n.done;n=t.next())sf(e,n.value)}(e,s),V=(z=c(z=Oh(s,"CLOSED-CAPTIONS"))).next();!V.done;V=z.next())V=of(W=V.value),K=Nh(W,"GROUP-ID"),W=Nh(W,"INSTREAM-ID"),e.M.get(K)||e.M.set(K,new Map),e.M.get(K).set(W,V);return i=function(e,t,n){var r=[],i=new Set;if(0<n.length)for(var a=(n=c(n)).next();!a.done;a=n.next()){var o=Nh(a=a.value,"METHOD");if("NONE"!=o&&"AES-128"!=o&&(o=Rh(a,"KEYFORMAT")||"identity",a=(o=Lf[o])?o(a,""):null)){if(a.keyIds)for(var s=(o=c(a.keyIds)).next();!s.done;s=o.next())i.add(s.value);r.push(a)}}return t=t.map((function(t){var n=Rh(t,"FRAME-RATE"),a=Number(Rh(t,"AVERAGE-BANDWIDTH"))||Number(Nh(t,"BANDWIDTH")),o=Rh(t,"RESOLUTION"),s=(o=c(o?o.split("x"):[null,null])).next().value,u=o.next().value,l=Rh(t,"VIDEO-RANGE");t=function(e,t){var n=af(e,t),r=Rh(t,"AUDIO"),i=Rh(t,"VIDEO"),a=r||i;a=a&&e.C.has(a)?e.C.get(a):[],r={audio:r?a:[],video:i?a:[]},i=!1;var o=Nh(t,"URI"),s=r.audio.find((function(e){return e&&e.bd==o})),u=Ie("video",n),l=Ie("audio",n);return l&&!u?a="audio":!a.length&&l&&u?(a="video",n=[[u,l].join()]):r.audio.length&&s?(a="audio",i=!0):a=r.video.length&&!r.audio.length?"audio":"video",i||(e=function(e,t,n,r){var i=Tf(Nh(t,"URI"),e.s);return e.h.has(i)?e.h.get(i):(t=Rh(t,"CLOSED-CAPTIONS"),t="video"==r&&t&&"NONE"!=t?e.M.get(t):null,n=Ee(r,n),r=uf(e,i,n,r,"und",!1,null,null,t,null,!1,!1),e.h.has(i)?e.h.get(i):(e.h.set(i,r),r))}(e,t,n,a),r[e.stream.type]=[e]),r}(e,t),o=t.audio;for(var d=c(t=t.video),h=d.next();!h.done;h=d.next())(h=h.value.stream)&&(h.width=Number(s)||void 0,h.height=Number(u)||void 0,h.frameRate=Number(n)||void 0,h.hdr=l||void 0);for(n=e.g.disableAudio,o.length&&!n||(o=[null]),n=e.g.disableVideo,t.length&&!n||(t=[null]),n=[],s=(o=c(o)).next();!s.done;s=o.next())for(s=s.value,l=(u=c(t)).next();!l.done;l=u.next()){var f=l.value;(l=s?s.stream:null)&&(l.drmInfos=r,l.keyIds=i),(d=f?f.stream:null)&&(d.drmInfos=r,d.keyIds=i),h=s?s.stream.drmInfos:null;var p=f?f.stream.drmInfos:null;f=(f?f.bd:"")+" - "+(s?s.bd:""),l&&d&&h.length&&p.length&&!(0<Wi(h,p).length)||e.ka.has(f)||(l={id:e.sa++,language:l?l.language:"und",primary:!!l&&l.primary||!!d&&d.primary,audio:l,video:d,bandwidth:a,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]},n.push(l),e.ka.add(f))}return n})).reduce(xe,[]),t=t.filter((function(e){return null!=e}))}(e,u,d),a=function(e,t){var n=Oh(t,"SUBTITLES");t=n.map((function(t){if(e.g.disableText)return null;try{return sf(e,t).stream}catch(o){if(e.g.hls.ignoreTextStreamFailures)return null;throw o}}));for(var r=(n=c(n)).next();!r.done;r=n.next()){var i=Nh(r.value,"GROUP-ID");if((r=e.B.get(i))&&(i=e.C.get(i)))for(var a=(i=c(i)).next();!a.done;a=i.next())(a=a.value).stream.codecs=r,a.stream.mimeType=Af(ke,r)||Sf(ke)}return t.filter((function(e){return e}))}(e,s),w(F,function(e,t){var n,r;return L((function(i){return 1==i.g?(n=t.map((function(t){var n,r;return L((function(i){if(1==i.g)return e.g.disableThumbnails?i.return(null):(A(i,2),w(i,function(e,t){var n,r,i,a,o,s,u,l,c,d;return L((function(h){return 1==h.g?(n=Tf(Nh(t,"URI"),e.s),r=Rh(t,"CODECS","jpeg")||"",e.h.has(n)?h.return(e.h.get(n)):(i=of(t),a=Rh(t,"NAME"),o=Rh(t,"CHARACTERISTICS"),s=uf(e,n,r,"image",i,!1,a,null,null,o,!1,!1),e.h.has(n)?h.return(e.h.get(n)):(u=Rh(t,"RESOLUTION"))?w(h,s.stream.createSegmentIndex(),3):h.D(2))):(2!=h.g&&(l=s.stream.segmentIndex.get(0),c=l.tilesLayout)&&(s.stream.width=Number(u.split("x")[0])*Number(c.split("x")[0]),s.stream.height=Number(u.split("x")[1])*Number(c.split("x")[1])),(d=Rh(t,"BANDWIDTH"))&&(s.stream.bandwidth=Number(d)),e.h.set(n,s),h.return(s))}))}(e,t),4));if(2!=i.g)return n=i.h,i.return(n.stream);if(r=I(i),e.g.hls.ignoreImageStreamFailures)return i.return(null);throw r}))})),w(i,Promise.all(n),2)):(r=i.h,i.return(r.filter((function(e){return e}))))}))}(e,l),4);case 4:o=F.h,F.D(3);break;case 5:U=F.h,e.h.set(n,U),i.push({id:0,language:"und",disabledUntilTime:0,primary:!0,audio:"audio"==D?U.stream:null,video:"video"==D?U.stream:null,bandwidth:0,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]});case 3:if(!e.i)throw new be(2,7,7001);e.j=new cs(null,0),e.j.$c(!0),1==r.type&&(If(e)&&(vf(e),B=e.P,e.m.R(B)),j=Array.from(e.h.values()),df(e,j),nf(e)),e.G={presentationTimeline:e.j,variants:i,textStreams:a,imageStreams:o,offlineSessionIds:[],minBufferTime:0,sequenceMode:!0},e.i.makeTextStreamsForClosedCaptions(e.G),T(F)}}))}(r,n.data,e),3)):i.return(r.G)}))},i.stop=function(){this.m&&(this.m.stop(),this.m=null);var e=[];return this.I&&(e.push(this.I.destroy()),this.I=null),this.g=this.i=null,this.ka.clear(),this.G=null,this.h.clear(),this.C.clear(),this.B.clear(),this.s.clear(),Promise.all(e)},i.update=function(){var e,t,n,r,i,a,o,s,u=this;return L((function(l){if(1==l.g){if(!If(u))return l.return();for(e=[],t=Array.from(u.h.values()),n=t.filter((function(e){return e.stream.segmentIndex})),r=c(n),i=r.next();!i.done;i=r.next())a=i.value,e.push(ef(u,a));return w(l,Promise.all(e),2)}cf(u,n.map((function(e){return e.stream}))),o=n.some((function(e){return 0==e.Lc})),n.length&&!o&&(kf(u,Uf.jg),s=t.map((function(e){return e.Ab})),u.j.Sa(Math.min.apply(Math,d(s))),u.i.updateDuration()),T(l)}))},i.onExpirationUpdated=function(){},z("shaka.hls.HlsParser",Jh);var _f={aac:"audio/aac",ac3:"audio/ac3",ec3:"audio/ec3",mp3:"audio/mpeg"},Mf={mp4:"audio/mp4",mp4a:"audio/mp4",m4s:"audio/mp4",m4i:"audio/mp4",m4a:"audio/mp4",m4f:"audio/mp4",cmfa:"audio/mp4",ts:"video/mp2t"},Rf={mp4:"video/mp4",mp4v:"video/mp4",m4s:"video/mp4",m4i:"video/mp4",m4v:"video/mp4",m4f:"video/mp4",cmfv:"video/mp4",ts:"video/mp2t"},Nf={audio:Mf,video:Rf,text:{mp4:"application/mp4",m4s:"application/mp4",m4i:"application/mp4",m4f:"application/mp4",cmft:"application/mp4",vtt:"text/vtt",webvtt:"text/vtt",ttml:"application/ttml+xml"},image:{jpg:"image/jpeg",png:"image/png",svg:"image/svg+xml",webp:"image/webp",avif:"image/avif"}},Lf={"com.apple.streamingkeydelivery":function(t,n){if("video/mp2t"==n)throw new be(2,4,4040);if(e.shakaMediaKeysPolyfill)throw new be(2,4,4041);return Se("com.apple.fps",[{initDataType:"sinf",initData:new Uint8Array(0),keyId:null}])},"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":function(e){var t=Nh(e,"METHOD");return["SAMPLE-AES","SAMPLE-AES-CTR"].includes(t)?(t=Se("com.widevine.alpha",[{initDataType:"cenc",initData:t=Et((t=Qh(t=Nh(e,"URI"))).data)}]),(e=Rh(e,"KEYID"))&&(t.keyIds=new Set([e.toLowerCase().substr(2)])),t):null},"com.microsoft.playready":function(e){var t=Nh(e,"METHOD");return["SAMPLE-AES","SAMPLE-AES-CTR"].includes(t)?Se("com.microsoft.playready",[{initDataType:"cenc",initData:e=di(e=Et((e=Qh(e=Nh(e,"URI"))).data),t=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]),new Set,0)}]):null},identity:function(e){return e=Nh(e,"METHOD"),["SAMPLE-AES","SAMPLE-AES-CTR"].includes(e)?Se("org.w3.clearkey",null):null}},Df="VOD",Pf="EVENT",Of="LIVE",Uf={jg:Df,ii:Pf,hg:Of};function Bf(e,t,n,r,i,a){if(200<=n&&299>=n&&202!=n)return{uri:i||r,Qf:r,data:t,status:n,headers:e,fromCache:!!e["x-shaka-from-cache"]};i=null;try{i=Xt(t)}catch(o){}throw new be(401==n||403==n?2:1,1,1001,r,n,i,e,a)}function jf(){}function Ff(e,t,n,r,i){var a=new Wf;qr(t.headers).forEach((function(e,t){a.append(t,e)}));var o=new Kf,s={wf:!1,eg:!1};if(e=function(e,t,n,r,i,a,o){var s,u,l,c,d,h,f,p,g,m,v,y;return L((function(b){switch(b.g){case 1:return s=Vf,u=Hf,h=d=0,f=Date.now(),A(b,2),w(b,s(e,n),4);case 4:return l=b.h,a(zf(l.headers)),p=l.clone().body.getReader(),m=(g=l.headers.get("Content-Length"))?parseInt(g,10):0,new u({start:function(e){function t(){var n,r;return L((function(a){switch(a.g){case 1:return A(a,2),w(a,p.read(),4);case 4:n=a.h,E(a,3);break;case 2:return I(a),a.return();case 3:if(n.done){a.D(5);break}if(d+=n.value.byteLength,!o){a.D(5);break}return w(a,o(n.value),5);case 5:(100<(r=Date.now())-f||n.done)&&(i(r-f,d-h,m-d),h=d,f=r),n.done?e.close():(e.enqueue(n.value),t()),T(a)}}))}t()}}),w(b,l.arrayBuffer(),5);case 5:c=b.h,E(b,3);break;case 2:if(v=I(b),r.wf)throw new be(1,1,7001,e,t);if(r.eg)throw new be(1,1,1003,e,t);throw new be(1,1,1002,e,v,t);case 3:return y=zf(l.headers),b.return(Bf(y,c,l.status,e,l.url,t))}}))}(e,n,{body:t.body||void 0,headers:a,method:t.method,signal:o.signal,credentials:t.allowCrossSiteCredentials?"include":void 0},s,r,i,t.streamDataCallback),e=new Sr(e,(function(){return s.wf=!0,o.abort(),Promise.resolve()})),t=t.retryParameters.timeout){var u=new Rt((function(){s.eg=!0,o.abort()}));u.R(t/1e3),e.finally((function(){u.stop()}))}return e}function zf(e){var t={};return e.forEach((function(e,n){t[n.trim()]=e})),t}function Gf(){if(!e.ReadableStream)return!1;try{new ReadableStream({})}catch(yx){return!1}return!(!e.fetch||!e.AbortController)}Ft("Tizen 3")||Ft("Tizen 2")||Ot()||(oa.m3u8=function(){return new Jh},aa["application/x-mpegurl"]=function(){return new Jh},aa["application/vnd.apple.mpegurl"]=function(){return new Jh}),z("shaka.net.HttpFetchPlugin",jf),jf.isSupported=Gf,jf.parse=Ff;var Vf=e.fetch,Kf=e.AbortController,Hf=e.ReadableStream,Wf=e.Headers;function Xf(){}function qf(e,t,n,r,i){var a=new $f,o=Date.now(),s=0;return new Sr(new Promise((function(u,l){a.open(t.method,e,!0),a.responseType="arraybuffer",a.timeout=t.retryParameters.timeout,a.withCredentials=t.allowCrossSiteCredentials,a.onabort=function(){l(new be(1,1,7001,e,n))};var c=!1;for(var d in a.onreadystatechange=function(){if(2==a.readyState&&!c){var e=Yf(a);i(e),c=!0}},a.onload=function(){var t=Yf(a),r=a.response;try{var i=Bf(t,r,a.status,e,a.responseURL,n);u(i)}catch(o){l(o)}},a.onerror=function(t){l(new be(1,1,1002,e,t,n))},a.ontimeout=function(){l(new be(1,1,1003,e,n))},a.onprogress=function(e){var t=Date.now();(100<t-o||e.lengthComputable&&e.loaded==e.total)&&(r(t-o,e.loaded-s,e.total-e.loaded),s=e.loaded,o=t)},t.headers)a.setRequestHeader(d.toLowerCase(),t.headers[d]);a.send(t.body)})),(function(){return a.abort(),Promise.resolve()}))}function Yf(e){var t=e.getAllResponseHeaders().trim().split("\r\n");e={};for(var n=(t=c(t)).next();!n.done;n=t.next())e[(n=n.value.split(": "))[0].toLowerCase()]=n.slice(1).join(": ");return e}Gf()&&(Pr("http",Ff,2,!0),Pr("https",Ff,2,!0),Pr("blob",Ff,2,!0)),z("shaka.net.HttpXHRPlugin",Xf),Xf.parse=qf;var $f=e.XMLHttpRequest;function Qf(e,t,n,r){this.g=e,this.i=t,this.groupId=n,this.h=r}function Jf(e){return e.Pa().map((function(e){return"{"+encodeURI(e)+"}"})).join("")+":"+e.Ta+":"+e.Ba}function Zf(e,t){return Ws(e.g.Pa(),e.g.Ta,e.g.Ba,t.streaming.retryParameters)}function ep(){this.h=this.j=this.i=0,this.g=new Map,this.l=0}function tp(e,t){e.i+=t;var n=e.l;return e.l++,e.g.set(n,t),n}function np(e){var t=this;this.s=e,this.j=new Map,this.i=new Vr((function(){return rp(t).catch((function(){}))})),this.h=[],this.m=function(){},this.l=function(){},this.g=new ep}function rp(e){var t=e.h.map((function(e){return e()}));return e.h=[],Promise.all(t)}function ip(e,t,n,r,i,a){Kr(e.i);var o=(e.j.get(t)||Promise.resolve()).then((function(){var t,o,s,u,l,c,d;return L((function(h){if(1==h.g)return w(h,function(e,t){var n,r,i,a;return L((function(o){return 1==o.g?(n=Fr,r=e.s.request(n,t),i=function(){return r.abort()},e.h.push(i),w(o,r.promise,2)):(a=o.h,Je(e.h,i),o.return(a.data))}))}(e,n),2);if(t=h.h,e.i.g)throw new be(2,9,7001);if(i)for(u in o=Et(t),(s=new ci(o)).data)l=Number(u),c=s.data[l],d=s.g[l],e.l(c,d);e.g.close(r,t.byteLength);var f=e.g;return e.m(0==f.i?0:f.j/f.i,e.g.h),h.return(a(t))}))}));e.j.set(t,o)}function ap(e,t){var n=this;this.i=e,this.h=e.objectStore(t),this.g=new Ct,e.onabort=function(e){e.preventDefault(),n.g.reject()},e.onerror=function(e){e.preventDefault(),n.g.reject()},e.oncomplete=function(){n.g.resolve()}}function op(e,t){return new Promise((function(n,r){var i=e.h.openCursor();i.onerror=r,i.onsuccess=function(){var e;return L((function(r){if(1==r.g)return null==i.result?(n(),r.return()):(e=i.result,w(r,t(e.key,e.value,e),2));e.continue(),T(r)}))}}))}function sp(e){this.h=e,this.g=[]}function up(e,t){return lp(e,t,"readwrite")}function lp(e,t,n){var r=new ap(n=e.h.transaction([t],n),t);return e.g.push(r),r.promise().then((function(){Je(e.g,r)}),(function(){Je(e.g,r)})),r}function cp(e,t,n){this.h=new sp(e),this.i=t,this.g=n}function dp(e){return Promise.reject(new be(2,9,9011,"Cannot add new value to "+e))}function hp(e,t,n,r){t=(e=up(e.h,t)).store();for(var i={},a=(n=c(n)).next();!a.done;i={fd:i.fd},a=n.next())i.fd=a.value,t.delete(i.fd).onsuccess=function(e){return function(){return r(e.fd)}}(i);return e.promise()}function fp(e,t,n){var r,i,a,o,s,u,l;return L((function(d){if(1==d.g){for(r=lp(e.h,t,"readonly"),i=r.store(),a={},o=[],s={},u=c(n),l=u.next();!l.done;s={zc:s.zc,wc:s.wc},l=u.next())s.wc=l.value,s.zc=i.get(s.wc),s.zc.onsuccess=function(e){return function(){null==e.zc.result&&o.push(e.wc),a[e.wc]=e.zc.result}}(s);return w(d,r.promise(),2)}if(o.length)throw new be(2,9,9012,"Could not find values for "+o);return d.return(n.map((function(e){return a[e]})))}))}function pp(e){this.g=new sp(e)}function gp(){this.g=new Map}function mp(e){var t=null;if(e.g.forEach((function(e,n){e.getCells().forEach((function(e,r){e.hasFixedKeySpace()||t||(t={path:{Ra:n,Aa:r},Aa:e})}))})),t)return t;throw new be(2,9,9013,"Could not find a cell that supports add-operations")}function vp(e,t,n){if(!(e=e.g.get(t)))throw new be(2,9,9013,"Could not find mechanism with name "+t);if(!(t=e.getCells().get(n)))throw new be(2,9,9013,"Could not find cell with name "+n);return t}function yp(e,t){bp.set(e,t)}Pr("http",qf,1,!0),Pr("https",qf,1,!0),Pr("blob",qf,1,!0),ep.prototype.close=function(e,t){if(this.g.has(e)){var n=this.g.get(e);this.g.delete(e),this.j+=n,this.h+=t}},np.prototype.destroy=function(){return this.i.destroy()},ap.prototype.abort=function(){var e=this;return L((function(t){if(1==t.g){try{e.i.abort()}catch(n){}return A(t,2),w(t,e.g,4)}if(2!=t.g)return E(t,0);I(t),T(t)}))},ap.prototype.store=function(){return this.h},ap.prototype.promise=function(){return this.g},sp.prototype.destroy=function(){return Promise.all(this.g.map((function(e){return e.abort()})))},(i=cp.prototype).destroy=function(){return this.h.destroy()},i.hasFixedKeySpace=function(){return!0},i.addSegments=function(){return dp(this.i)},i.removeSegments=function(e,t){return hp(this,this.i,e,t)},i.getSegments=function(e){var t,n=this;return L((function(r){return 1==r.g?w(r,fp(n,n.i,e),2):(t=r.h,r.return(t.map((function(e){return n.zf(e)}))))}))},i.addManifests=function(){return dp(this.g)},i.updateManifest=function(){return Promise.reject(new be(2,9,9016,"Cannot modify values in "+this.g))},i.updateManifestExpiration=function(e,t){var n=up(this.h,this.g),r=n.store();return r.get(e).onsuccess=function(n){(n=n.target.result)&&(n.expiration=t,r.put(n,e))},n.promise()},i.removeManifests=function(e,t){return hp(this,this.g,e,t)},i.getManifests=function(e){var t,n=this;return L((function(r){return 1==r.g?w(r,fp(n,n.g,e),2):(t=r.h,r.return(Promise.all(t.map((function(e){return n.Dc(e)})))))}))},i.getAllManifests=function(){var e,t,n=this;return L((function(r){return 1==r.g?(e=lp(n.h,n.g,"readonly"),t=new Map,w(r,op(e,(function(e,r){var i;return L((function(a){if(1==a.g)return w(a,n.Dc(r),2);i=a.h,t.set(e,i),T(a)}))})),2)):3!=r.g?w(r,e.promise(),3):r.return(t)}))},i.zf=function(e){return e},i.Dc=function(e){return Promise.resolve(e)},i.add=function(e,t){var n,r,i,a,o,s,u,l=this;return L((function(d){if(1==d.g){for(n=up(l.h,e),r=n.store(),i=[],a={},o=c(t),s=o.next();!s.done;a={gd:a.gd},s=o.next())u=s.value,a.gd=r.add(u),a.gd.onsuccess=function(e){return function(){i.push(e.gd.result)}}(a);return w(d,n.promise(),2)}return d.return(i)}))},pp.prototype.destroy=function(){return this.g.destroy()},pp.prototype.getAll=function(){var e,t,n=this;return L((function(r){return 1==r.g?(e=lp(n.g,"session-ids","readonly"),t=[],w(r,op(e,(function(e,n){t.push(n)})),2)):3!=r.g?w(r,e.promise(),3):r.return(t)}))},pp.prototype.add=function(e){for(var t=up(this.g,"session-ids"),n=t.store(),r=(e=c(e)).next();!r.done;r=e.next())n.add(r.value);return t.promise()},pp.prototype.remove=function(e){var t,n=this;return L((function(r){return 1==r.g?w(r,op(t=up(n.g,"session-ids"),(function(t,n,r){e.includes(n.sessionId)&&r.delete()})),2):w(r,t.promise(),0)}))},gp.prototype.destroy=function(){for(var e=[],t=c(this.g.values()),n=t.next();!n.done;n=t.next())e.push(n.value.destroy());return this.g.clear(),Promise.all(e)},gp.prototype.init=function(){var e=this;bp.forEach((function(t,n){(t=t())&&e.g.set(n,t)}));for(var t=[],n=c(this.g.values()),r=n.next();!r.done;r=n.next())t.push(r.value.init());return Promise.all(t)},z("shaka.offline.StorageMuxer",gp),gp.unregister=function(e){bp.delete(e)},gp.register=yp,gp.prototype.destroy=gp.prototype.destroy;var bp=new Map;function xp(){cp.apply(this,arguments)}function wp(e,t){!function(e){var t=e.streams.filter((function(e){return"audio"==e.contentType}));if(e=e.streams.filter((function(e){return"video"==e.contentType})),!t.every((function(e){return e.variantIds}))||!e.every((function(e){return e.variantIds}))){for(var n=c(t),r=n.next();!r.done;r=n.next())r.value.variantIds=[];for(r=(n=c(e)).next();!r.done;r=n.next())r.value.variantIds=[];if(n=0,e.length&&!t.length){var i=n++,a=c(e);for(r=a.next();!r.done;r=a.next())r.value.variantIds.push(i)}if(!e.length&&t.length)for(i=n++,r=(a=c(t)).next();!r.done;r=a.next())r.value.variantIds.push(i);if(e.length&&t.length)for(r=(t=c(t)).next();!r.done;r=t.next())for(r=r.value,a=(i=c(e)).next();!a.done;a=i.next()){a=a.value;var o=n++;r.variantIds.push(o),a.variantIds.push(o)}}}(e);for(var n=c(e.streams),r=n.next();!r.done;r=n.next());return e.streams.map((function(n){return function(e,t,n){var r=e.initSegmentUri?Tp(e.initSegmentUri):null,i=t+e.presentationTimeOffset,a=t+n;return{id:e.id,originalId:null,primary:e.primary,type:e.contentType,mimeType:e.mimeType,codecs:e.codecs,frameRate:e.frameRate,pixelAspectRatio:void 0,hdr:void 0,kind:e.kind,language:e.language,label:e.label,width:e.width,height:e.height,initSegmentKey:r,encrypted:e.encrypted,keyIds:new Set([e.keyId]),segments:e.segments.map((function(e){var n=Tp(e.uri);return{startTime:t+e.startTime,endTime:t+e.endTime,dataKey:n,initSegmentKey:r,appendWindowStart:t,appendWindowEnd:a,timestampOffset:i,tilesLayout:""}})),variantIds:e.variantIds,roles:[],forced:!1,audioSamplingRate:null,channelsCount:null,spatialAudio:!1,closedCaptions:null,tilesLayout:void 0}}(n,e.startTime,t)}))}function Tp(e){var t;if((t=/^offline:[0-9]+\/[0-9]+\/([0-9]+)$/.exec(e))||(t=/^offline:segment\/([0-9]+)$/.exec(e)))return Number(t[1]);throw new be(2,9,9004,"Could not parse uri "+e)}function Ap(){cp.apply(this,arguments)}function Sp(e,t,n){return{id:e.id,originalId:e.originalId,primary:e.primary,type:e.contentType,mimeType:e.mimeType,codecs:e.codecs,frameRate:e.frameRate,pixelAspectRatio:e.pixelAspectRatio,hdr:void 0,kind:e.kind,language:e.language,label:e.label,width:e.width,height:e.height,encrypted:e.encrypted,keyIds:new Set([e.keyId]),segments:e.segments.map((function(r){return{startTime:t+r.startTime,endTime:t+r.endTime,initSegmentKey:e.initSegmentKey,appendWindowStart:t,appendWindowEnd:n,timestampOffset:t-e.presentationTimeOffset,dataKey:r.dataKey,tilesLayout:""}})),variantIds:e.variantIds,roles:[],forced:!1,audioSamplingRate:null,channelsCount:null,spatialAudio:!1,closedCaptions:null,tilesLayout:void 0}}function Ep(){cp.apply(this,arguments)}function Ip(){this.m=this.j=this.i=this.h=this.g=this.l=null}function kp(e,t,n,r){this.g=e,this.i=t,this.h=n,this.l=r,this.j=["offline:",e,"/",t,"/",n,"/",r].join("")}function Cp(e){if(null==(e=/^offline:([a-z]+)\/([^/]+)\/([^/]+)\/([0-9]+)$/.exec(e)))return null;var t=e[1];if("manifest"!=t&&"segment"!=t)return null;var n=e[2];if(!n)return null;var r=e[3];return r&&null!=t?new kp(t,n,r,Number(e[4])):null}function _p(e,t){this.h=e,this.g=t}function Mp(e,t){var n=new cs(null,0);n.Sa(t.duration);var r=t.streams.filter((function(e){return"audio"==e.type})),i=t.streams.filter((function(e){return"video"==e.type}));r=function(e,t,n,r){for(var i=new Set,a=c(t),o=a.next();!o.done;o=a.next()){var s=c(o.value.variantIds);for(o=s.next();!o.done;o=s.next())i.add(o.value)}for(a=c(n),o=a.next();!o.done;o=a.next())for(s=c(o.value.variantIds),o=s.next();!o.done;o=s.next())i.add(o.value);for(a=new Map,i=c(i),o=i.next();!o.done;o=i.next())o=o.value,a.set(o,{id:o,language:"",disabledUntilTime:0,primary:!1,audio:null,video:null,bandwidth:0,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]});for(t=c(t),i=t.next();!i.done;i=t.next())for(i=i.value,o=Rp(e,i,r),s=c(i.variantIds),i=s.next();!i.done;i=s.next())(i=a.get(i.value)).language=o.language,i.primary=i.primary||o.primary,i.audio=o;for(n=c(n),t=n.next();!t.done;t=n.next())for(i=t.value,t=Rp(e,i,r),o=c(i.variantIds),i=o.next();!i.done;i=o.next())(i=a.get(i.value)).primary=i.primary||t.primary,i.video=t;return a}(e,r,i,n),i=t.streams.filter((function(e){return e.type==ke})).map((function(t){return Rp(e,t,n)}));var a=t.streams.filter((function(e){return"image"==e.type})).map((function(t){return Rp(e,t,n)})),o=t.drmInfo?[t.drmInfo]:[];if(t.drmInfo)for(var s=c(r.values()),u=s.next();!u.done;u=s.next())(u=u.value).audio&&u.audio.encrypted&&(u.audio.drmInfos=o),u.video&&u.video.encrypted&&(u.video.drmInfos=o);return{presentationTimeline:n,minBufferTime:2,offlineSessionIds:t.sessionIds,variants:Array.from(r.values()),textStreams:i,imageStreams:a,sequenceMode:t.sequenceMode||!1}}function Rp(e,t,n){var r=t.segments.map((function(t){return function(e,t){var n=new kp("segment",e.h,e.g,t.dataKey);return new So(t.startTime,t.endTime,(function(){return[n.toString()]}),0,null,null!=t.initSegmentKey?function(e,t){var n=new kp("segment",e.h,e.g,t);return new Ao((function(){return[n.toString()]}),0,null)}(e,t.initSegmentKey):null,t.timestampOffset,t.appendWindowStart,t.appendWindowEnd,[],t.tilesLayout||"")}(e,t)}));return n.lc(r),{id:t.id,originalId:t.originalId,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new Ms(r),mimeType:t.mimeType,codecs:t.codecs,width:t.width||void 0,height:t.height||void 0,frameRate:t.frameRate,pixelAspectRatio:t.pixelAspectRatio,hdr:t.hdr,kind:t.kind,encrypted:t.encrypted,drmInfos:[],keyIds:t.keyIds,language:t.language,label:t.label,type:t.type,primary:t.primary,trickModeVideo:null,emsgSchemeIdUris:null,roles:t.roles,forced:t.forced,channelsCount:t.channelsCount,audioSamplingRate:t.audioSamplingRate,spatialAudio:t.spatialAudio,closedCaptions:t.closedCaptions,tilesLayout:t.tilesLayout}}function Np(){this.g=null}function Lp(){}function Dp(e){var t=Cp(e);return t&&"manifest"==t.g?e=kr(e={uri:e,Qf:e,data:new ArrayBuffer(0),headers:{"content-type":"application/x-offline-manifest"}}):e=t&&"segment"==t.g?function(e,t){var n=new gp;return kr(void 0).ia((function(){return n.init()})).ia((function(){return vp(n,t.Ra(),t.Aa())})).ia((function(e){return e.getSegments([t.key()])})).ia((function(e){return{uri:t,data:e[0].data,headers:{}}})).finally((function(){return n.destroy()}))}(t.key(),t):Er(new be(2,1,9004,e)),e}function Pp(e,t,n){var r,i,a,o,s,u;return L((function(l){switch(l.g){case 1:r=[];for(var d=[],h=c(n),f=h.next();!f.done;f=h.next()){f=f.value;for(var p=!1,g=c(d),m=g.next();!m.done;m=g.next())if(Op((m=m.value).info,f)){m.sessionIds.push(f.sessionId),p=!0;break}p||d.push({info:f,sessionIds:[f.sessionId]})}i=c(d),a=i.next();case 2:if(a.done){l.D(4);break}return o=a.value,s=function(e,t,n){var r,i;return L((function(a){switch(a.g){case 1:return r=new Ni({Ob:t,onError:function(){},Fd:function(){},onExpirationUpdated:function(){},onEvent:function(){}}),A(a,2),r.configure(e),w(a,function(e,t,n,r,i,a){var o=new Map;return(i={audioCapabilities:i,videoCapabilities:a,distinctiveIdentifier:"optional",persistentState:"required",sessionTypes:["persistent-license"],label:t}).drmInfos=[{keySystem:t,licenseServerUri:n,distinctiveIdentifierRequired:!1,persistentStateRequired:!0,audioRobustness:"",videoRobustness:"",serverCertificate:r,serverCertificateUri:"",initData:null,keyIds:null}],o.set(t,i),zi(e,o,[])}(r,n.info.keySystem,n.info.licenseUri,n.info.serverCertificate,n.info.audioCapabilities,n.info.videoCapabilities),4);case 4:E(a,3);break;case 2:return I(a),w(a,r.destroy(),5);case 5:case 9:return a.return([]);case 3:return A(a,6),w(a,Oi(r),8);case 8:E(a,7);break;case 6:return I(a),w(a,r.destroy(),9);case 7:return i=[],w(a,Promise.all(n.sessionIds.map((function(e){return L((function(t){return 1==t.g?(A(t,2),w(t,function(e,t){var n,r,i;return L((function(a){return 1==a.g?w(a,Gi(e,t),2):3!=a.g?(n=a.h)?(r=[],(i=e.i.get(n))&&(i.cb=new Ct,r.push(i.cb)),r.push(n.remove()),w(a,Promise.all(r),3)):a.return():(e.i.delete(n),void T(a))}))}(r,e),4)):2!=t.g?(i.push(e),E(t,0)):(I(t),void T(t))}))}))),10);case 10:return w(a,r.destroy(),11);case 11:return a.return(i)}}))}(e,t,o),w(l,s,5);case 5:u=l.h,r=r.concat(u),a=i.next(),l.D(2);break;case 4:return l.return(r)}}))}function Op(e,t){function n(e,t){return e.robustness==t.robustness&&e.contentType==t.contentType}return e.keySystem==t.keySystem&&e.licenseUri==t.licenseUri&&Ze(e.audioCapabilities,t.audioCapabilities,n)&&Ze(e.videoCapabilities,t.videoCapabilities,n)}function Up(e,t){var n=Mp(new _p(e.Ra(),e.Aa()),t),r=t.appMetadata||{};return n=Bp(n),{offlineUri:e.toString(),originalManifestUri:t.originalManifestUri,duration:t.duration,size:t.size,expiration:t.expiration,tracks:n,appMetadata:r,isIncomplete:t.isIncomplete||!1}}function Bp(e){for(var t=[],n=function(e){return e.filter((function(e){return Hn(e)}))}(e.variants),r=(n=c(n)).next();!r.done;r=n.next())t.push(Bn(r.value));for(n=(e=c(e.textStreams)).next();!n.done;n=e.next())t.push(jn(n.value));return t}function jp(){this.g={}}function Fp(e,t){var n=t.audio,r=t.video;if(n&&!r&&(e.g[n.id]=n.bandwidth||t.bandwidth),!n&&r&&(e.g[r.id]=r.bandwidth||t.bandwidth),n&&r){var i=n.bandwidth||393216,a=r.bandwidth||t.bandwidth-i;0>=a&&(a=t.bandwidth),e.g[n.id]=i,e.g[r.id]=a}}function zp(e,t){e.g[t.id]=t.bandwidth||2048}function Gp(e,t){return null==(e=e.g[t])&&(e=0),e}function Vp(e){var t=this;if(e&&e.constructor!=il)throw new be(2,9,9008);this.g=this.h=null,e?(this.h=e.h,this.g=e.Hc()):(this.h=$u(),this.g=new Dr),this.i=[],this.j=[];var n=!e;this.l=new Vr((function(){var e,r,i,a,o;return L((function(s){switch(s.g){case 1:return w(s,Promise.all(t.j.map((function(e){return rp(e)}))),2);case 2:for(e=function(){},r=[],i=c(t.i),a=i.next();!a.done;a=i.next())o=a.value,r.push(o.then(e,e));return w(s,Promise.all(r),3);case 3:if(!n){s.D(4);break}return w(s,t.g.destroy(),4);case 4:t.h=null,t.g=null,T(s)}}))}))}function Kp(){if(Nt())e:{for(var e=c(bp.values()),t=e.next();!t.done;t=e.next())if(t=(t=t.value)()){t.destroy(),e=!0;break e}e=!1}else e=!1;return e}function Hp(e){var t,n,r;return L((function(i){switch(i.g){case 1:return w(i,(t=new gp).init(),2);case 2:return w(i,mp(t),3);case 3:return n=i.h,r=new kp("manifest",n.path.Ra,n.path.Aa,e),w(i,t.destroy(),4);case 4:return w(i,(new Vp).remove(r.toString()),0)}}))}function Wp(e,t,n,r,i,a){var o,s,u,l,d,h,f,p,g,m,v;return L((function(y){switch(y.g){case 1:for(o=!1,A(y,2),s=!0,u=c(n.streams),l=u.next();!l.done;l=u.next())for(d=l.value,h=c(d.segments),f=h.next();!f.done;f=h.next())p=f.value,null!=(g=p.pendingSegmentRefId?r[p.pendingSegmentRefId]:null)&&(p.dataKey=g,p.pendingSegmentRefId=void 0),null!=(g=p.pendingInitSegmentRefId?r[p.pendingInitSegmentRefId]:null)&&(p.initSegmentKey=g,p.pendingInitSegmentRefId=void 0),p.pendingSegmentRefId&&(s=!1),p.pendingInitSegmentRefId&&(s=!1);return n.size+=i,s&&(n.isIncomplete=!1),w(y,e.updateManifest(t,n),4);case 4:o=!0,a(),E(y,0);break;case 2:return m=I(y),w(y,Hp(t),5);case 5:if(o){y.D(6);break}return v=Object.values(r),w(y,e.removeSegments(v,(function(){})),6);case 6:throw m}}))}function Xp(e){return e.variants.some((function(e){var t=e.audio&&e.audio.encrypted;return e.video&&e.video.encrypted||t}))}function qp(e){return e.variants.some((function(e){return(e.video?e.video.drmInfos:[]).concat(e.audio?e.audio.drmInfos:[]).some((function(e){return e.initData&&e.initData.length}))}))}function Yp(e,t){for(var n=[],r=c(e.streams),i=r.next();!i.done;i=r.next())i=i.value,t&&"video"==i.type?n.push({contentType:pn(i.mimeType,i.codecs),robustness:e.drmInfo.videoRobustness}):t||"audio"!=i.type||n.push({contentType:pn(i.mimeType,i.codecs),robustness:e.drmInfo.audioRobustness});return n}function $p(e,t,n){return L((function(r){return w(r,function(e,t,n,r){var i,a,o;return L((function(s){return 1==s.g?r.drmInfo?(i=function(e){var t=Array.from(e.g.keys());if(!t.length)throw new be(2,9,9e3,"No supported storage mechanisms found");return e.g.get(t[0]).getEmeSessionCell()}(n),a=r.sessionIds.map((function(e){return{sessionId:e,keySystem:r.drmInfo.keySystem,licenseUri:r.drmInfo.licenseServerUri,serverCertificate:r.drmInfo.serverCertificate,audioCapabilities:Yp(r,!1),videoCapabilities:Yp(r,!0)}})),w(s,Pp(t,e,a),2)):s.return():3!=s.g?(o=s.h,w(s,i.remove(o),3)):w(s,i.add(a.filter((function(e){return!o.includes(e.sessionId)}))),0)}))}(e.g,e.h.drm,n,t),0)}))}function Qp(e,t,n){function r(){}var i=function(e){for(var t=new Set,n=(e=c(e.streams)).next();!n.done;n=e.next())for(var r=(n=c(n.value.segments)).next();!r.done;r=n.next())null!=(r=r.value).initSegmentKey&&t.add(r.initSegmentKey),t.add(r.dataKey);return Array.from(t)}(n);return Up(t,n),Promise.all([e.removeSegments(i,r),e.removeManifests([t.key()],r)])}function Jp(e,t,n,r,i,a){var o={id:r.id,originalId:r.originalId,primary:r.primary,type:r.type,mimeType:r.mimeType,codecs:r.codecs,frameRate:r.frameRate,pixelAspectRatio:r.pixelAspectRatio,hdr:r.hdr,kind:r.kind,language:r.language,label:r.label,width:r.width||null,height:r.height||null,encrypted:r.encrypted,keyIds:r.keyIds,segments:[],variantIds:[],roles:r.roles,forced:r.forced,channelsCount:r.channelsCount,audioSamplingRate:r.audioSamplingRate,spatialAudio:r.spatialAudio,closedCaptions:r.closedCaptions,tilesLayout:r.tilesLayout},s=i.offline.numberOfParallelDownloads,u=0;return function(e,t,n){if(t=e.segmentIndex.find(t),null!=t)for(var r=e.segmentIndex.get(t);r;)n(r),r=e.segmentIndex.get(++t)}(r,n.presentationTimeline.mb(),(function(n){var i=Jf(n),l=void 0;if(!a.has(i)){var c=n.endTime-n.startTime;c=Gp(t,r.id)*c,c=tp(e.g,c),a.set(i,new Qf(n,c,u,!1))}n.h&&(l=Jf(n.h),a.has(l)||(c=.5*Gp(t,r.id),c=tp(e.g,c),a.set(l,new Qf(n.h,c,u,!0)))),o.segments.push({pendingInitSegmentRefId:l,initSegmentKey:l?0:null,startTime:n.startTime,endTime:n.endTime,appendWindowStart:n.appendWindowStart,appendWindowEnd:n.appendWindowEnd,timestampOffset:n.timestampOffset,tilesLayout:n.tilesLayout,pendingSegmentRefId:i,dataKey:0}),u=(u+1)%s})),o}function Zp(e){if(e.l.g)throw new be(2,9,7001)}function eg(){if(!Kp())throw new be(2,9,9e3)}function tg(e,t){return L((function(n){return 1==n.g?(e.i.push(t),S(n),w(n,t,4)):2!=n.g?n.return(n.h):(k(n),Je(e.i,t),C(n,0))}))}function ng(e){for(var t=new Set,n=c(e.textStreams),r=n.next();!r.done;r=n.next())t.add(r.value);for(r=(n=c(e.imageStreams)).next();!r.done;r=n.next())t.add(r.value);for(n=(e=c(e.variants)).next();!n.done;n=e.next())(n=n.value).audio&&t.add(n.audio),n.video&&t.add(n.video);return t}v(xp,cp),xp.prototype.updateManifestExpiration=function(e,t){var n,r,i,a=this;return L((function(o){return n=up(a.h,a.g),r=n.store(),i=new Ct,r.get(e).onsuccess=function(n){(n=n.target.result)?(n.expiration=t,r.put(n),i.resolve()):i.reject(new be(2,9,9012,"Could not find values for "+e))},w(o,Promise.all([n.promise(),i]),0)}))},xp.prototype.Dc=function(e){var t,n,r,i,a,o;return L((function(s){if(1==s.g){for(t=[],n=0;n<e.periods.length;++n)r=n==e.periods.length-1?e.duration:e.periods[n+1].startTime,i=r-e.periods[n].startTime,a=wp(e.periods[n],i),t.push(a);return w(s,Yd(t),2)}return o=s.h,s.return({creationTime:0,originalManifestUri:e.originalManifestUri,duration:e.duration,size:e.size,expiration:null==e.expiration?1/0:e.expiration,streams:o,sessionIds:e.sessionIds,drmInfo:e.drmInfo,appMetadata:e.appMetadata,sequenceMode:!1})}))},xp.prototype.zf=function(e){return{data:e.data}},v(Ap,cp),Ap.prototype.Dc=function(e){var t,n,r,i,a,o;return L((function(s){if(1==s.g){for(t=[],n=0;n<e.periods.length;++n){r=n==e.periods.length-1?e.duration:e.periods[n+1].startTime,i=r-e.periods[n].startTime;for(var u=e.periods[n],l=[],d=c(u.streams),h=d.next();!h.done;h=d.next())0!=(h=h.value).variantIds.length&&l.push(Sp(h,u.startTime,u.startTime+i));a=l,t.push(a)}return w(s,Yd(t),2)}return o=s.h,s.return({appMetadata:e.appMetadata,creationTime:0,drmInfo:e.drmInfo,duration:e.duration,expiration:null==e.expiration?1/0:e.expiration,originalManifestUri:e.originalManifestUri,sessionIds:e.sessionIds,size:e.size,streams:o,sequenceMode:!1})}))},v(Ep,cp),(i=Ep.prototype).hasFixedKeySpace=function(){return!1},i.addSegments=function(e){return this.add(this.i,e)},i.addManifests=function(e){return this.add(this.g,e)},i.updateManifest=function(e,t){return function(e,t,n){var r=(e=up(e.h,e.g)).store();return r.get(t).onsuccess=function(){r.put(n,t)},e.promise()}(this,e,t)},i.Dc=function(e){return null==e.expiration&&(e.expiration=1/0),Promise.resolve(e)},(i=Ip.prototype).init=function(){var t=this,n=new Ct,r=!1,i=new Rt((function(){r=!0,n.reject(new be(2,9,9017))}));i.R(2);var a=e.indexedDB.open("shaka_offline_db",5);return a.onsuccess=function(){if(!r){var e=a.result;t.l=e;var o=e.objectStoreNames;o=o.contains("manifest")&&o.contains("segment")?new xp(e,"segment","manifest"):null,t.g=o,o=(o=e.objectStoreNames).contains("manifest-v2")&&o.contains("segment-v2")?new Ap(e,"segment-v2","manifest-v2"):null,t.h=o,o=(o=e.objectStoreNames).contains("manifest-v3")&&o.contains("segment-v3")?new Ap(e,"segment-v3","manifest-v3"):null,t.i=o,o=(o=e.objectStoreNames).contains("manifest-v5")&&o.contains("segment-v5")?new Ep(e,"segment-v5","manifest-v5"):null,t.j=o,e=e.objectStoreNames.contains("session-ids")?new pp(e):null,t.m=e,i.stop(),n.resolve()}},a.onupgradeneeded=function(){for(var e=a.result,t=c(["segment-v5","manifest-v5","session-ids"]),n=t.next();!n.done;n=t.next())n=n.value,e.objectStoreNames.contains(n)||e.createObjectStore(n,{autoIncrement:!0})},a.onerror=function(e){r||(n.reject(new be(2,9,9001,a.error)),i.stop(),e.preventDefault())},n},i.destroy=function(){var e=this;return L((function(t){switch(t.g){case 1:if(!e.g){t.D(2);break}return w(t,e.g.destroy(),2);case 2:if(!e.h){t.D(4);break}return w(t,e.h.destroy(),4);case 4:if(!e.i){t.D(6);break}return w(t,e.i.destroy(),6);case 6:if(!e.j){t.D(8);break}return w(t,e.j.destroy(),8);case 8:if(!e.m){t.D(10);break}return w(t,e.m.destroy(),10);case 10:e.l&&e.l.close(),T(t)}}))},i.getCells=function(){var e=new Map;return this.g&&e.set("v1",this.g),this.h&&e.set("v2",this.h),this.i&&e.set("v3",this.i),this.j&&e.set("v5",this.j),e},i.getEmeSessionCell=function(){return this.m},i.erase=function(){var t=this;return L((function(n){switch(n.g){case 1:if(!t.g){n.D(2);break}return w(n,t.g.destroy(),2);case 2:if(!t.h){n.D(4);break}return w(n,t.h.destroy(),4);case 4:if(!t.i){n.D(6);break}return w(n,t.i.destroy(),6);case 6:if(!t.j){n.D(8);break}return w(n,t.j.destroy(),8);case 8:return t.l&&t.l.close(),w(n,function(){var t=new Ct,n=e.indexedDB.deleteDatabase("shaka_offline_db");return n.onblocked=function(){},n.onsuccess=function(){t.resolve()},n.onerror=function(e){t.reject(new be(2,9,9001,n.error)),e.preventDefault()},t}(),10);case 10:return t.l=null,t.g=null,t.h=null,t.i=null,t.j=null,w(n,t.init(),0)}}))},yp("idb",(function(){return Ft("CrKey")||Dt()||!e.indexedDB?null:new Ip})),kp.prototype.Ra=function(){return this.i},kp.prototype.Aa=function(){return this.h},kp.prototype.key=function(){return this.l},kp.prototype.toString=function(){return this.j},(i=Np.prototype).configure=function(){},i.start=function(e,t){var n,r,i,a,o,s,u=this;return L((function(l){switch(l.g){case 1:if(n=Cp(e),u.g=n,null==n||"manifest"!=n.g)throw new be(2,1,9004,e);return r=new gp,S(l),w(l,r.init(),4);case 4:return w(l,vp(r,n.Ra(),n.Aa()),5);case 5:return w(l,l.h.getManifests([n.key()]),6);case 6:return i=l.h,a=i[0],o=new _p(n.Ra(),n.Aa()),s=Mp(o,a),t.makeTextStreamsForClosedCaptions(s),l.return(s);case 2:return k(l),w(l,r.destroy(),7);case 7:C(l,0)}}))},i.stop=function(){return Promise.resolve()},i.update=function(){},i.onExpirationUpdated=function(e,t){var n,r,i,a,o,s,u,l=this;return L((function(c){switch(c.g){case 1:return n=l.g,r=new gp,A(c,2,3),w(c,r.init(),5);case 5:return w(c,vp(r,n.Ra(),n.Aa()),6);case 6:return w(c,(i=c.h).getManifests([n.key()]),7);case 7:if(a=c.h,o=a[0],s=o.sessionIds.includes(e),u=null==o.expiration||o.expiration>t,!s||!u){c.D(3);break}return w(c,i.updateManifestExpiration(n.key(),t),3);case 3:return k(c),w(c,r.destroy(),10);case 10:C(c,0);break;case 2:I(c),c.D(3)}}))},aa["application/x-offline-manifest"]=function(){return new Np},z("shaka.offline.OfflineScheme",Lp),Lp.plugin=Dp,Pr("offline",Dp),(i=Vp.prototype).destroy=function(){return this.l.destroy()},i.configure=function(e,t){return 2==arguments.length&&"string"==typeof e&&(e=Ku(e,t)),Qu(this.h,e)},i.getConfiguration=function(){var e=$u();return Qu(e,this.h,$u()),e},i.Hc=function(){return this.g},i.store=function(e,t,n){var r=this,i=this.getConfiguration(),a=new np(this.g);return this.j.push(a),t=function(e,t,n,r,i,a){var o,s,u,l,d,h,f,p,g,m,v,y,b;return L((function(x){switch(x.g){case 1:return eg(),s=o=null,u=new gp,h=d=l=null,A(x,2,3),w(x,r(),5);case 5:return o=x.h,w(x,function(e,t,n,r){var i,a,o,s,u;return L((function(l){if(1==l.g)return i=null,a=e.g,o={networkingEngine:a,modifyManifestRequest:function(){},modifySegmentRequest:function(){},filter:function(){return Promise.resolve()},makeTextStreamsForClosedCaptions:function(){},onTimelineRegionAdded:function(){},onEvent:function(){},onError:function(e){i=e},isLowLatencyMode:function(){return!1},isAutoLowLatencyMode:function(){return!1},enableLowLatencyMode:function(){},updateDuration:function(){},newDrmInfo:function(){}},n.configure(r.manifest),Zp(e),w(l,n.start(t,o),2);if(3!=l.g)return s=l.h,Zp(e),u=ng(s),w(l,Promise.all(te(u,(function(e){return e.createSegmentIndex()}))),3);if(Zp(e),i)throw i;return l.return(s)}))}(e,t,o,i),6);case 6:if(f=x.h,Zp(e),!(!f.presentationTimeline.T()&&!f.presentationTimeline.Lb()))throw new be(2,9,9005,t);return w(x,function(e,t,n,r){var i;return L((function(a){switch(a.g){case 1:return(i=new Ni({Ob:e.g,onError:n,Fd:function(){},onExpirationUpdated:function(){},onEvent:function(){}})).configure(r.drm),w(a,function(e,t,n){return e.$=!0,e.F=[],e.M=n,Di(e,t)}(i,t.variants,r.offline.usePersistentLicense),2);case 2:return w(a,Oi(i),3);case 3:return w(a,Ui(i),4);case 4:return a.return(i)}}))}(e,f,(function(e){h=h||e}),i),7);case 7:if(s=x.h,Zp(e),h)throw h;return w(x,function(e,t){var n,r,i,a,o,s,u,l,d,h,f,p,g,m,v,y,b,x,S,k,C,_,M,R,N,D,P,O;return L((function(L){switch(L.g){case 1:return n={width:1/0,height:1/0},function(e,t,n){e.variants=e.variants.filter((function(e){return Cn(e,t,n)}))}(e,t.restrictions,n),w(L,Rn(e,t.offline.usePersistentLicense),2);case 2:for(r=[],i=t.preferredAudioChannelCount,a=t.preferredDecodingAttributes,o=t.preferredVideoCodecs,s=t.preferredAudioCodecs,En(e,o,s,i,a),u=c(e.variants),l=u.next();!l.done;l=u.next())d=l.value,r.push(Bn(d));for(h=c(e.textStreams),f=h.next();!f.done;f=h.next())p=f.value,r.push(jn(p));for(g=c(e.imageStreams),m=g.next();!m.done;m=g.next())v=m.value,r.push(Fn(v));return w(L,t.offline.trackSelectionCallback(r),3);case 3:for(y=L.h,b=e.presentationTimeline.getDuration(),x=0,S=c(y),k=S.next();!k.done;k=S.next())C=k.value,_=C.bandwidth*b/8,x+=_;return A(L,4),w(L,t.offline.downloadSizeCallback(x),6);case 6:if(!L.h)throw new be(2,9,9014);E(L,5);break;case 4:if((M=I(L))instanceof be)throw M;throw new be(2,9,9015);case 5:for(R=new Set,N=new Set,D=new Set,P=c(y),k=P.next();!k.done;k=P.next())"variant"==(O=k.value).type&&R.add(O.id),"text"==O.type&&N.add(O.id),"image"==O.type&&D.add(O.id);e.variants=e.variants.filter((function(e){return R.has(e.id)})),e.textStreams=e.textStreams.filter((function(e){return N.has(e.id)})),e.imageStreams=e.imageStreams.filter((function(e){return D.has(e.id)})),function(e){e.variants.map((function(e){return e.video}));var t=new Set(e.variants.map((function(e){return e.audio})));e=e.textStreams;for(var n=c(t),r=n.next();!r.done;r=n.next())for(var i=(r=c(t)).next();!i.done;i=r.next());for(t=c(e),n=t.next();!n.done;n=t.next())for(n=c(e),r=n.next();!r.done;r=n.next());}(e),T(L)}}))}(f,i),8);case 8:return w(x,u.init(),9);case 9:return Zp(e),w(x,mp(u),10);case 10:return l=x.h,Zp(e),p=function(e,t,n,r,i,a){var o=function(e,t,n){return{offlineUri:null,originalManifestUri:e,duration:t.presentationTimeline.getDuration(),size:0,expiration:1/0,tracks:t=Bp(t),appMetadata:n,isIncomplete:!1}}(n,t,r),s=i.offline.progressCallback;!function(e,t,n){e.m=t,e.l=n}(a,(function(e,t){o.size=t,s(o,e)}),(function(t,n){u&&i.offline.usePersistentLicense&&l==n&&Bi(e,"cenc",t)}));var u=Xp(t)&&!qp(t),l=null;u&&(l=rg.get(e.g.keySystem));for(var d=new jp,h=c(t.textStreams),f=h.next();!f.done;f=h.next())d.g[f.value.id]=52;for(h=c(t.imageStreams),f=h.next();!f.done;f=h.next())zp(d,f.value);for(f=c(t.variants),h=f.next();!h.done;h=f.next())Fp(d,h.value);return d=function(e,t,n,r){for(var i=new Map,a=ng(n),o=new Map,s=(a=c(a)).next();!s.done;s=a.next()){var u=Jp(e,t,n,s=s.value,r,i);o.set(s.id,u)}for(e=c(n.variants),t=e.next();!t.done;t=e.next())(t=t.value).audio&&o.get(t.audio.id).variantIds.push(t.id),t.video&&o.get(t.video.id).variantIds.push(t.id);return{streams:Array.from(o.values()),We:Array.from(i.values())}}(a,d,t,i),a=d.streams,d=d.We,f=e.g,h=i.offline.usePersistentLicense,f&&h&&(f.initData=[]),{jh:{creationTime:Date.now(),originalManifestUri:n,duration:t.presentationTimeline.getDuration(),size:0,expiration:e.Gc(),streams:a,sessionIds:h?Fi(e):[],drmInfo:f,appMetadata:r,isIncomplete:!0,sequenceMode:t.sequenceMode},We:d}}(s,f,t,n,i,a),g=p.jh,m=p.We,w(x,l.Aa.addManifests([g]),11);case 11:if(v=x.h,Zp(e),d=v[0],Zp(e),h)throw h;return w(x,function(e,t,n,r,i,a,o,s,u){var l,d,h,f,p,g,m,v,y,b;return L((function(x){switch(x.g){case 1:if(l={},d=0,h=function(t,h){var f,p,g,m,v,y,b;return L((function(x){if(1==x.g){for(f={},p=c(t),g=p.next();!g.done;f={Fb:f.Fb},g=p.next())f.Fb=g.value,m=Zf(f.Fb,a),v=f.Fb.i,y=f.Fb.h,b=function(t){return function(n){var r,i,a;return L((function(s){if(1==s.g)return w(s,o.addSegments([{data:n}]),2);r=s.h,Zp(e),i=t.Fb.g,a=Jf(i),l[a]=r[0],d+=n.byteLength,T(s)}))}}(f),ip(i,f.Fb.groupId,m,v,y,b);return w(x,function(e){return L((function(t){return 1==t.g?w(t,Promise.all(e.j.values()),2):t.return(e.g.h)}))}(i),2)}return h?(Zp(e),function(e,t,n,r){if(t.expiration=n.Gc(),n=Fi(n),t.sessionIds=r.offline.usePersistentLicense?n:[],Xp(e)&&r.offline.usePersistentLicense&&!n.length)throw new be(2,9,9007)}(s,r,u,a),w(x,o.updateManifest(n,r),0)):x.D(0)}))},f=!1,A(x,2),!Xp(s)||!f||qp(s)){x.D(4);break}return w(x,h(t.filter((function(e){return e.h})),!0),5);case 5:return Zp(e),t=t.filter((function(e){return!e.h})),p=l,g=d,l={},d=0,w(x,Wp(o,n,r,p,g,(function(){return Zp(e)})),6);case 6:Zp(e);case 4:if(f){x.D(7);break}return w(x,h(t,!1),8);case 8:return Zp(e),m=l,v=d,l={},d=0,w(x,Wp(o,n,r,m,v,(function(){return Zp(e)})),9);case 9:Zp(e);case 7:E(x,0);break;case 2:return y=I(x),b=Object.values(l),w(x,o.removeSegments(b,(function(){})),10);case 10:throw y}}))}(e,m,d,g,a,i,l.Aa,f,s),12);case 12:return Zp(e),y=new kp("manifest",l.path.Ra,l.path.Aa,d),x.return(Up(y,g));case 3:return k(x),w(x,u.destroy(),13);case 13:if(!o){x.D(14);break}return w(x,o.stop(),14);case 14:if(!s){x.D(16);break}return w(x,s.destroy(),16);case 16:C(x,0);break;case 2:if(b=I(x),null==d){x.D(18);break}return w(x,Hp(d),18);case 18:throw h||b}}))}(this,e,t||{},(function(){var t;return L((function(a){return 1==a.g?w(a,na(e,r.g,i.manifest.retryParameters,n||null),2):(t=a.h,a.return(t()))}))}),i,a),(t=new Sr(t,(function(){return rp(a)}))).finally((function(){Je(r.j,a)})),function(e,t){var n=t.promise;return e.i.push(n),t.finally((function(){Je(e.i,n)}))}(this,t)},i.remove=function(e){return tg(this,function(e,t){var n,r,i,a,o,s;return L((function(u){switch(u.g){case 1:if(eg(),null==(n=Cp(t))||"manifest"!=n.g)throw new be(2,9,9004,t);return r=n,i=new gp,S(u),w(u,i.init(),4);case 4:return w(u,vp(i,r.Ra(),r.Aa()),5);case 5:return w(u,(a=u.h).getManifests([r.key()]),6);case 6:return o=u.h,s=o[0],w(u,Promise.all([$p(e,s,i),Qp(a,r,s)]),2);case 2:return k(u),w(u,i.destroy(),8);case 8:C(u,0)}}))}(this,e))},i.Ah=function(){return tg(this,function(e){var t,n,r,i,a,o,s,u,l,d;return L((function(h){switch(h.g){case 1:return eg(),t=e.g,n=e.h.drm,r=new gp,i=!1,S(h),w(h,r.init(),4);case 4:a=[],function(e,t){e.g.forEach((function(e){t(e.getEmeSessionCell())}))}(r,(function(e){return a.push(e)})),o=c(a),s=o.next();case 5:if(s.done){h.D(2);break}return w(h,(u=s.value).getAll(),8);case 8:return l=h.h,w(h,Pp(n,t,l),9);case 9:return d=h.h,w(h,u.remove(d),10);case 10:d.length!=l.length&&(i=!0),s=o.next(),h.D(5);break;case 2:return k(h),w(h,r.destroy(),11);case 11:C(h,3);break;case 3:return h.return(!i)}}))}(this))},i.list=function(){return tg(this,L((function(r){switch(r.g){case 1:return eg(),e=[],t=new gp,S(r),w(r,t.init(),4);case 4:return n=Promise.resolve(),function(e,t){e.g.forEach((function(e,n){e.getCells().forEach((function(e,r){t({Ra:n,Aa:r},e)}))}))}(t,(function(t,r){n=n.then((function(){return L((function(n){if(1==n.g)return w(n,r.getAllManifests(),2);n.h.forEach((function(n,r){n=Up(new kp("manifest",t.Ra,t.Aa,r),n),e.push(n)})),T(n)}))}))})),w(r,n,2);case 2:return k(r),w(r,t.destroy(),6);case 6:C(r,3);break;case 3:return r.return(e)}})));var e,t,n},z("shaka.offline.Storage",Vp),Vp.deleteAll=function(){var e;return L((function(t){return 1==t.g?(e=new gp,S(t),w(t,function(e){var t,n;return L((function(r){return 1==r.g?(t=Array.from(e.g.values()),(n=0<t.length)||bp.forEach((function(e){(e=e())&&t.push(e)})),w(r,Promise.all(t.map((function(e){return e.erase()}))),2)):n?r.D(0):w(r,Promise.all(t.map((function(e){return e.destroy()}))),0)}))}(e),2)):5!=t.g?(k(t),w(t,e.destroy(),5)):C(t,0)}))},Vp.prototype.list=Vp.prototype.list,Vp.prototype.removeEmeSessions=Vp.prototype.Ah,Vp.prototype.remove=Vp.prototype.remove,Vp.prototype.store=Vp.prototype.store,Vp.prototype.getNetworkingEngine=Vp.prototype.Hc,Vp.prototype.getConfiguration=Vp.prototype.getConfiguration,Vp.prototype.configure=Vp.prototype.configure,Vp.prototype.destroy=Vp.prototype.destroy,Vp.support=Kp;var rg=(new Map).set("org.w3.clearkey","1077efecc0b24d02ace33c1e52e2fb4b").set("com.widevine.alpha","edef8ba979d64acea3c827dcd51d21ed").set("com.microsoft.playready","9a04f07998404286ab92e65be0885f95").set("com.microsoft.playready.recommendation","9a04f07998404286ab92e65be0885f95").set("com.microsoft.playready.software","9a04f07998404286ab92e65be0885f95").set("com.microsoft.playready.hardware","9a04f07998404286ab92e65be0885f95").set("com.adobe.primetime","f239e769efa348509c16a903c6932efb");function ig(){}function ag(){for(var e=c(sg),t=e.next();!t.done;t=e.next()){t=t.value;try{t.pg()}catch(n){X("Error installing polyfill!",n)}}}function og(e,t){for(e={priority:t||0,pg:e},t=0;t<sg.length;t++)if(sg[t].priority<e.priority)return void sg.splice(t,0,e);sg.push(e)}sc.offline=Kp,z("shaka.polyfill",ig),ig.register=og,ig.installAll=ag;var sg=[];function ug(){this.g=new cg}function lg(){e.AbortController||(e.AbortController=ug,e.AbortSignal=cg)}function cg(){ee.call(this),this.h=!1,this.g=void 0,this.onabort=null}function dg(){}function hg(){if(!Object.getOwnPropertyDescriptor(Element.prototype,"ariaHidden"))for(var e=c(["ariaHidden","ariaLabel","ariaPressed","ariaSelected"]),t=e.next();!t.done;t=e.next())fg(t.value)}function fg(e){var t="aria-"+e.toLowerCase().replace(/^aria/,"");Object.defineProperty(Element.prototype,e,{get:function(){return this.getAttribute(t)},set:function(e){null==e||null==e?this.removeAttribute(t):this.setAttribute(t,e)}})}function pg(){}function gg(){ey()}function mg(){}function vg(){if(e.Document){var t=Element.prototype;t.requestFullscreen=t.requestFullscreen||t.mozRequestFullScreen||t.msRequestFullscreen||t.webkitRequestFullscreen,(t=Document.prototype).exitFullscreen=t.exitFullscreen||t.mozCancelFullScreen||t.msExitFullscreen||t.webkitCancelFullScreen,"fullscreenElement"in document||(Object.defineProperty(document,"fullscreenElement",{get:function(){return document.mozFullScreenElement||document.msFullscreenElement||document.webkitCurrentFullScreenElement||document.webkitFullscreenElement}}),Object.defineProperty(document,"fullscreenEnabled",{get:function(){return document.mozFullScreenEnabled||document.msFullscreenEnabled||document.webkitFullscreenEnabled}})),document.addEventListener("webkitfullscreenchange",yg),document.addEventListener("webkitfullscreenerror",yg),document.addEventListener("mozfullscreenchange",yg),document.addEventListener("mozfullscreenerror",yg),document.addEventListener("MSFullscreenChange",yg),document.addEventListener("MSFullscreenError",yg)}}function yg(e){var t=e.type.replace(/^(webkit|moz|MS)/,"").toLowerCase(),n=document.createEvent("Event");n.initEvent(t,e.bubbles,e.cancelable),e.target.dispatchEvent(n)}function bg(){}function xg(){var e=!0;(Ut()||Ft("PlayStation 5")||Bt()||Ft("Web0S")||Pt()||Ft("CrKey")||Ft("PC=EOS")||Ft("Hisense")||Ft("VIDAA"))&&(e=!1),e&&navigator.mediaCapabilities||(navigator.mediaCapabilities||(navigator.mediaCapabilities={}),Cg=navigator.mediaCapabilities,navigator.mediaCapabilities.decodingInfo=wg)}function wg(t){var n,r,i,a,o,s,u,l,c,d,h,f,p;return L((function(g){switch(g.g){case 1:if(n={supported:!1,powerEfficient:!0,smooth:!0,keySystemAccess:null,configuration:t},!t)return g.return(n);if(r=t.video,i=t.audio,"media-source"==t.type){if(!Nt())return g.return(n);if(r){if(Ft("CrKey")){if(!e.cast)throw new be(2,8,8e3);if(cast.__platform__&&cast.__platform__.canDisplayType){var m=r.contentType;r.width&&r.height&&(m+="; width="+r.width+"; height="+r.height),r.framerate&&(m+="; framerate="+r.framerate),"pq"===r.transferFunction&&(m+="; eotf=smpte2084"),m=cast.__platform__.canDisplayType(m)}else m=Ye(r.contentType)}else m=Ye(r.contentType);if(!m)return g.return(n)}if(i&&(a=i.contentType,!Ye(a)))return g.return(n)}else{if("file"!=t.type)return g.return(n);if(r&&(o=r.contentType,!Lt(o))||i&&(s=i.contentType,!Lt(s)))return g.return(n)}return t.keySystemConfiguration?(u=t.keySystemConfiguration,l=[],c=[],u.audio&&(d={robustness:u.audio.robustness||"",contentType:t.audio.contentType},l.push(d)),u.video&&(h={robustness:u.video.robustness||"",contentType:t.video.contentType},c.push(h)),f={initDataTypes:[u.initDataType],distinctiveIdentifier:u.distinctiveIdentifier,persistentState:u.persistentState,sessionTypes:u.sessionTypes},l.length&&(f.audioCapabilities=l),c.length&&(f.videoCapabilities=c),A(g,3),w(g,navigator.requestMediaKeySystemAccess(u.keySystem,[f]),5)):(n.supported=!0,g.return(Promise.resolve(n)));case 5:p=g.h,E(g,4);break;case 3:I(g);case 4:p&&(n.supported=!0,n.keySystemAccess=p);case 2:return g.return(n)}}))}ug.prototype.abort=function(e){var t=this.g;t.h||(t.h=!0,t.g=e,void 0===t.g&&(t.g=new DOMException("signal is aborted without reason","AbortError")),e=new G("abort"),t.onabort&&t.onabort(e),t.dispatchEvent(e))},s.Object.defineProperties(ug.prototype,{signal:{configurable:!0,enumerable:!0,get:function(){return this.g}}}),ig.AbortController=ug,ug.install=lg,v(cg,ee),s.Object.defineProperties(cg.prototype,{aborted:{configurable:!0,enumerable:!0,get:function(){return this.h}},reason:{configurable:!0,enumerable:!0,get:function(){return this.g}}}),og(lg),ig.Aria=dg,dg.install=hg,og(hg),ig.EncryptionScheme=pg,pg.install=gg,og(gg,-2),ig.Fullscreen=mg,mg.install=vg,og(vg),ig.MediaCapabilities=bg,bg.install=xg;var Tg,Ag,Sg,Eg,Ig,kg,Cg=null;function _g(){}function Mg(){var t=jt();e.MediaSource&&(e.cast&&cast.__platform__&&cast.__platform__.canDisplayType?function(){var e=MediaSource.isTypeSupported;MediaSource.isTypeSupported=function(t){var n=t.split(/ *; */);return n.shift(),n.some((function(e){return e.startsWith("codecs=")}))?cast.__platform__.canDisplayType(t):e(t)}}():t?12>=t?(Rg(),function(){var e=SourceBuffer.prototype.remove;SourceBuffer.prototype.remove=function(t,n){return e.call(this,t,n-.001)}}()):Rg():(Ft("Tizen 2")||Ft("Tizen 3")||Ft("Tizen 4"))&&function(){var e=MediaSource.isTypeSupported;MediaSource.isTypeSupported=function(t){return"opus"!=yn(t)[0]&&e(t)}}()),e.MediaSource&&MediaSource.isTypeSupported('video/webm; codecs="vp9"')&&!MediaSource.isTypeSupported('video/webm; codecs="vp09.00.10.08"')&&function(){var e=MediaSource.isTypeSupported;Ft("Web0S")||(MediaSource.isTypeSupported=function(t){var n=t.split(/ *; */),r=n.findIndex((function(e){return e.startsWith("codecs=")}));if(0>r)return e(t);var i=n[r].replace("codecs=","").replace(/"/g,"").split(/\s*,\s*/),a=i.findIndex((function(e){return e.startsWith("vp09")}));return 0<=a&&(i[a]="vp9",n[r]='codecs="'+i.join(",")+'"',t=n.join("; ")),e(t)})}()}function Rg(){var e=MediaSource.prototype.addSourceBuffer;MediaSource.prototype.addSourceBuffer=function(){var t=e.apply(this,D.apply(0,arguments));return t.abort=function(){},t}}function Ng(){}function Lg(){screen.orientation||null!=e.orientation&&function(){function t(){switch(e.orientation){case-90:n.type="landscape-secondary",n.angle=270;break;case 0:n.type="portrait-primary",n.angle=0;break;case 90:n.type="landscape-primary",n.angle=90;break;case 180:n.type="portrait-secondary",n.angle=180}}var n=new Dg;screen.orientation=n,t(),e.addEventListener("orientationchange",(function(){t();var e=new G("change");n.dispatchEvent(e)}))}()}function Dg(){ee.call(this),this.type="",this.angle=0}function Pg(){}function Og(e,t){try{var n=new jg(e,t);return Promise.resolve(n)}catch(r){return Promise.reject(r)}}function Ug(e){var t=this.mediaKeys;return t&&t!=e&&zg(t,null),delete this.mediaKeys,(this.mediaKeys=e)?zg(e,this):Promise.resolve()}function Bg(e){if(It(e=Et(e.initData)).getUint32(0,!0)+4!=e.byteLength)throw new RangeError("Malformed FairPlay init data");e=qt(e=Wt(e.subarray(4),!0));var t=new Event("encrypted");t.initDataType="skd",t.initData=St(e),this.dispatchEvent(t)}function jg(e,t){if(this.keySystem=e,e.startsWith("com.apple.fps"))for(t=(e=c(t)).next();!t.done;t=e.next()){var n=t.value;if("required"==n.persistentState)t=null;else{t={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:n.initDataTypes,sessionTypes:["temporary"],label:n.label};var r=!1,i=!1;if(n.audioCapabilities)for(var a=c(n.audioCapabilities),o=a.next();!o.done;o=a.next())(o=o.value).contentType&&(r=!0,WebKitMediaKeys.isTypeSupported(this.keySystem,o.contentType.split(";")[0])&&(t.audioCapabilities.push(o),i=!0));if(n.videoCapabilities)for(o=(n=c(n.videoCapabilities)).next();!o.done;o=n.next())(a=o.value).contentType&&(r=!0,WebKitMediaKeys.isTypeSupported(this.keySystem,a.contentType.split(";")[0])&&(t.videoCapabilities.push(a),i=!0));r||(i=WebKitMediaKeys.isTypeSupported(this.keySystem,"video/mp4")),t=i?t:null}if(t)return void(this.g=t)}throw(e=Error("Unsupported keySystem")).name="NotSupportedError",e.code=DOMException.NOT_SUPPORTED_ERR,e}function Fg(e){this.h=new WebKitMediaKeys(e),this.g=new Hr}function zg(e,t){if(e.g.Rb(),!t)return Promise.resolve();e.g.o(t,"webkitneedkey",Bg);try{return ms(t,HTMLMediaElement.HAVE_METADATA,e.g,(function(){t.webkitSetMediaKeys(e.h)})),Promise.resolve()}catch(n){return Promise.reject(n)}}function Gg(e){ee.call(this),this.i=null,this.l=e,this.g=this.h=null,this.j=new Hr,this.sessionId="",this.expiration=NaN,this.closed=new Ct,this.keyStatuses=new Kg}function Vg(e,t){var n=e.keyStatuses;n.size=null==t?0:1,n.g=t,t=new G("keystatuseschange"),e.dispatchEvent(t)}function Kg(){this.size=0,this.g=void 0}function Hg(){}function Wg(){!e.HTMLVideoElement||navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration||(navigator.requestMediaKeySystemAccess=Xg,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=qg,e.MediaKeys=Yg,e.MediaKeySystemAccess=$g,e.shakaMediaKeysPolyfill=!0)}function Xg(){return Promise.reject(Error("The key system specified is not supported."))}function qg(e){return null==e?Promise.resolve():Promise.reject(Error("MediaKeys not supported."))}function Yg(){throw new TypeError("Illegal constructor.")}function $g(){throw this.keySystem="",new TypeError("Illegal constructor.")}function Qg(){}function Jg(){if(!(!e.HTMLVideoElement||navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration)){if(HTMLMediaElement.prototype.webkitGenerateKeyRequest)dm="webkit";else if(!HTMLMediaElement.prototype.generateKeyRequest)return;navigator.requestMediaKeySystemAccess=em,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=tm,e.MediaKeys=rm,e.MediaKeySystemAccess=nm,e.shakaMediaKeysPolyfill=!0}}function Zg(e){return dm?dm+e.charAt(0).toUpperCase()+e.slice(1):e}function em(e,t){try{var n=new nm(e,t);return Promise.resolve(n)}catch(r){return Promise.reject(r)}}function tm(e){var t=this.mediaKeys;return t&&t!=e&&im(t,null),delete this.mediaKeys,(this.mediaKeys=e)&&im(e,this),Promise.resolve()}function nm(e,t){this.g=this.keySystem=e;var n=!1;"org.w3.clearkey"==e&&(this.g="webkit-org.w3.clearkey",n=!1);var r=!1,i=document.getElementsByTagName("video");i=i.length?i[0]:document.createElement("video");for(var a=(t=c(t)).next();!a.done;a=t.next()){var o={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:(a=a.value).initDataTypes,sessionTypes:["temporary"],label:a.label},s=!1;if(a.audioCapabilities)for(var u=c(a.audioCapabilities),l=u.next();!l.done;l=u.next())(l=l.value).contentType&&(s=!0,i.canPlayType(l.contentType.split(";")[0],this.g)&&(o.audioCapabilities.push(l),r=!0));if(a.videoCapabilities)for(l=(u=c(a.videoCapabilities)).next();!l.done;l=u.next())(l=l.value).contentType&&(s=!0,i.canPlayType(l.contentType,this.g)&&(o.videoCapabilities.push(l),r=!0));if(s||(r=i.canPlayType("video/mp4",this.g)||i.canPlayType("video/webm",this.g)),"required"==a.persistentState&&(n?(o.persistentState="required",o.sessionTypes=["persistent-license"]):r=!1),r)return void(this.h=o)}throw n="Unsupported keySystem","org.w3.clearkey"!=e&&"com.widevine.alpha"!=e||(n="None of the requested configurations were supported."),(e=Error(n)).name="NotSupportedError",e.code=DOMException.NOT_SUPPORTED_ERR,e}function rm(e){this.l=e,this.h=null,this.g=new Hr,this.i=[],this.j=new Map}function im(e,t){e.h=t,e.g.Rb();var n=dm;t&&(e.g.o(t,n+"needkey",(function(t){var n=new CustomEvent("encrypted");n.initDataType="cenc",n.initData=St(t.initData),e.h.dispatchEvent(n)})),e.g.o(t,n+"keymessage",(function(t){var n=am(e,t.sessionId);n&&(t=new G("message",t=(new Map).set("messageType",null==n.keyStatuses.ec()?"licenserequest":"licenserenewal").set("message",t.message)),n.h&&(n.h.resolve(),n.h=null),n.dispatchEvent(t))})),e.g.o(t,n+"keyadded",(function(t){(t=am(e,t.sessionId))&&(lm(t,"usable"),t.g&&t.g.resolve(),t.g=null)})),e.g.o(t,n+"keyerror",(function(t){var n=am(e,t.sessionId);n&&n.handleError(t)})))}function am(e,t){var n=e.j.get(t);return n||((n=e.i.shift())?(n.sessionId=t,e.j.set(t,n),n):null)}function om(e,t,n){ee.call(this),this.j=e,this.m=!1,this.g=this.h=null,this.i=t,this.l=n,this.sessionId="",this.expiration=NaN,this.closed=new Ct,this.keyStatuses=new cm}function sm(e,t,n){if(e.m)return Promise.reject(Error("The session is already initialized."));e.m=!0;try{if("persistent-license"==e.l)if(n)var r=Et(qt("LOAD_SESSION|"+n));else{var i=qt("PERSISTENT|");r=rn(i,t)}else r=Et(t)}catch(o){return Promise.reject(o)}e.h=new Ct;var a=Zg("generateKeyRequest");try{e.j[a](e.i,r)}catch(o){if("InvalidStateError"!=o.name)return e.h=null,Promise.reject(o);new Rt((function(){try{e.j[a](e.i,r)}catch(t){e.h.reject(t),e.h=null}})).R(.01)}return e.h}function um(e,t,n){if(e.g)e.g.then((function(){return um(e,t,n)})).catch((function(){return um(e,t,n)}));else{if(e.g=t,"webkit-org.w3.clearkey"==e.i){var r=Ht(n),i=JSON.parse(r);"oct"!=i.keys[0].kty&&(e.g.reject(Error("Response is not a valid JSON Web Key Set.")),e.g=null),r=en(i.keys[0].k),i=en(i.keys[0].kid)}else r=Et(n),i=null;var a=Zg("addKey");try{e.j[a](e.i,r,i,e.sessionId)}catch(o){e.g.reject(o),e.g=null}}}function lm(e,t){var n=e.keyStatuses;n.size=null==t?0:1,n.g=t,t=new G("keystatuseschange"),e.dispatchEvent(t)}function cm(){this.size=0,this.g=void 0}bg.originalMcap=Cg,og(xg,-1),ig.MediaSource=_g,_g.install=Mg,og(Mg),ig.Orientation=Ng,Ng.install=Lg,v(Dg,ee),Dg.prototype.lock=function(e){function t(e){return screen.lockOrientation?screen.lockOrientation(e):screen.mozLockOrientation?screen.mozLockOrientation(e):!!screen.msLockOrientation&&screen.msLockOrientation(e)}var n=!1;switch(e){case"natural":n=t("default");break;case"any":n=!0,this.unlock();break;default:n=t(e)}return n?Promise.resolve():((e=Error("screen.orientation.lock() is not available on this device")).name="NotSupportedError",e.code=DOMException.NOT_SUPPORTED_ERR,Promise.reject(e))},Dg.prototype.unlock=function(){screen.unlockOrientation?screen.unlockOrientation():screen.mozUnlockOrientation?screen.mozUnlockOrientation():screen.msUnlockOrientation&&screen.msUnlockOrientation()},og(Lg),ig.PatchedMediaKeysApple=Pg,Pg.uninstall=function(){Tg&&(Tg=!1,Object.defineProperty(HTMLMediaElement.prototype,"mediaKeys",Ag),HTMLMediaElement.prototype.setMediaKeys=Sg,e.MediaKeys=Eg,e.MediaKeySystemAccess=Ig,navigator.requestMediaKeySystemAccess=kg,Ag=kg=Sg=Ig=Eg=null,e.shakaMediaKeysPolyfill=!1)},Pg.install=function(t){e.HTMLVideoElement&&e.WebKitMediaKeys&&(void 0!==t&&t&&(Tg=!0,Ag=Object.getOwnPropertyDescriptor(HTMLMediaElement.prototype,"mediaKeys"),Sg=HTMLMediaElement.prototype.setMediaKeys,Eg=e.MediaKeys,Ig=e.MediaKeySystemAccess,kg=navigator.requestMediaKeySystemAccess),delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=Ug,e.MediaKeys=Fg,e.MediaKeySystemAccess=jg,navigator.requestMediaKeySystemAccess=Og,e.shakaMediaKeysPolyfill=!0)},jg.prototype.createMediaKeys=function(){var e=new Fg(this.keySystem);return Promise.resolve(e)},jg.prototype.getConfiguration=function(){return this.g},Fg.prototype.createSession=function(e){if("temporary"!=(e=e||"temporary"))throw new TypeError("Session type "+e+" is unsupported on this platform.");return new Gg(this.h)},Fg.prototype.setServerCertificate=function(){return Promise.resolve(!1)},v(Gg,ee),(i=Gg.prototype).generateRequest=function(e,t){var n=this;this.h=new Ct;try{var r=this.l.createSession("video/mp4",Et(t));this.i=r,this.sessionId=r.sessionId||"",this.j.o(this.i,"webkitkeymessage",(function(e){n.h&&(n.h.resolve(),n.h=null),e=new G("message",e=(new Map).set("messageType",null==n.keyStatuses.ec()?"license-request":"license-renewal").set("message",St(e.message))),n.dispatchEvent(e)})),this.j.o(r,"webkitkeyadded",(function(){n.g&&(Vg(n,"usable"),n.g.resolve(),n.g=null)})),this.j.o(r,"webkitkeyerror",(function(){var e=Error("EME PatchedMediaKeysApple key error");if(e.errorCode=n.i.error,null!=n.h)n.h.reject(e),n.h=null;else if(null!=n.g)n.g.reject(e),n.g=null;else switch(n.i.error.code){case WebKitMediaKeyError.MEDIA_KEYERR_OUTPUT:case WebKitMediaKeyError.MEDIA_KEYERR_HARDWARECHANGE:Vg(n,"output-not-allowed");break;default:Vg(n,"internal-error")}})),Vg(this,"status-pending")}catch(i){this.h.reject(i)}return this.h},i.load=function(){return Promise.reject(Error("MediaKeySession.load not yet supported"))},i.update=function(e){this.g=new Ct;try{this.i.update(Et(e))}catch(t){this.g.reject(t)}return this.g},i.close=function(){try{this.i.close(),this.closed.resolve(),this.j.Rb()}catch(yx){this.closed.reject(yx)}return this.closed},i.remove=function(){return Promise.reject(Error("MediaKeySession.remove is only applicable for persistent licenses, which are not supported on this platform"))},(i=Kg.prototype).ec=function(){return this.g},i.forEach=function(e){this.g&&e(this.g,ea.value())},i.get=function(e){if(this.has(e))return this.g},i.has=function(e){var t=ea.value();return!(!this.g||!Tt(e,t))},i.entries=function(){},i.keys=function(){},i.values=function(){},ig.PatchedMediaKeysNop=Hg,Hg.install=Wg,Yg.prototype.createSession=function(){},Yg.prototype.setServerCertificate=function(){},$g.prototype.getConfiguration=function(){},$g.prototype.createMediaKeys=function(){},og(Wg,-10),ig.PatchedMediaKeysWebkit=Qg,Qg.install=Jg,nm.prototype.createMediaKeys=function(){var e=new rm(this.g);return Promise.resolve(e)},nm.prototype.getConfiguration=function(){return this.h},rm.prototype.createSession=function(e){if("temporary"!=(e=e||"temporary")&&"persistent-license"!=e)throw new TypeError("Session type "+e+" is unsupported on this platform.");var t=this.h||document.createElement("video");return t.src||(t.src="about:blank"),e=new om(t,this.l,e),this.i.push(e),e},rm.prototype.setServerCertificate=function(){return Promise.resolve(!1)},v(om,ee),(i=om.prototype).handleError=function(e){var t=Error("EME v0.1b key error"),n=e.errorCode;n.systemCode=e.systemCode,t.errorCode=n,!e.sessionId&&this.h?(45==e.systemCode&&(t.message="Unsupported session type."),this.h.reject(t),this.h=null):e.sessionId&&this.g?(this.g.reject(t),this.g=null):(t=e.systemCode,e.errorCode.code==MediaKeyError.MEDIA_KEYERR_OUTPUT?lm(this,"output-restricted"):lm(this,1==t?"expired":"internal-error"))},i.generateRequest=function(e,t){return sm(this,t,null)},i.load=function(e){return"persistent-license"==this.l?sm(this,null,e):Promise.reject(Error("Not a persistent session."))},i.update=function(e){var t=new Ct;return um(this,t,e),t},i.close=function(){if("persistent-license"!=this.l){if(!this.sessionId)return this.closed.reject(Error("The session is not callable.")),this.closed;var e=Zg("cancelKeyRequest");try{this.j[e](this.i,this.sessionId)}catch(t){}}return this.closed.resolve(),this.closed},i.remove=function(){return"persistent-license"!=this.l?Promise.reject(Error("Not a persistent session.")):this.close()},(i=cm.prototype).ec=function(){return this.g},i.forEach=function(e){this.g&&e(this.g,ea.value())},i.get=function(e){if(this.has(e))return this.g},i.has=function(e){var t=ea.value();return!(!this.g||!Tt(e,t))},i.entries=function(){},i.keys=function(){},i.values=function(){};var dm="";function hm(){}function fm(){if(e.HTMLVideoElement){var t=HTMLVideoElement.prototype;t.requestPictureInPicture&&document.exitPictureInPicture||!t.webkitSupportsPresentationMode||(document.pictureInPictureEnabled=!0,document.pictureInPictureElement=null,t.requestPictureInPicture=gm,Object.defineProperty(t,"disablePictureInPicture",{get:vm,set:ym,enumerable:!0,configurable:!0}),document.exitPictureInPicture=mm,document.addEventListener("webkitpresentationmodechanged",pm,!0))}}function pm(e){if("picture-in-picture"==(e=e.target).webkitPresentationMode){document.pictureInPictureElement=e;var t=new Event("enterpictureinpicture");e.dispatchEvent(t)}else document.pictureInPictureElement==e&&(document.pictureInPictureElement=null),t=new Event("leavepictureinpicture"),e.dispatchEvent(t)}function gm(){return this.webkitSupportsPresentationMode("picture-in-picture")?(this.webkitSetPresentationMode("picture-in-picture"),document.pictureInPictureElement=this,Promise.resolve()):Promise.reject(Error("PiP not allowed by video element"))}function mm(){var e=document.pictureInPictureElement;return e?(e.webkitSetPresentationMode("inline"),document.pictureInPictureElement=null,Promise.resolve()):Promise.reject(Error("No picture in picture element found"))}function vm(){return!!this.hasAttribute("disablePictureInPicture")||!this.webkitSupportsPresentationMode("picture-in-picture")}function ym(e){e?this.setAttribute("disablePictureInPicture",""):this.removeAttribute("disablePictureInPicture")}function bm(){}function xm(){e.crypto&&("randomUUID"in e.crypto||(e.crypto.randomUUID=wm))}function wm(){var e=URL.createObjectURL(new Blob),t=e.toString();return URL.revokeObjectURL(e),t.substr(t.lastIndexOf("/")+1)}function Tm(){}function Am(){navigator.storage&&navigator.storage.estimate||!navigator.webkitTemporaryStorage||!navigator.webkitTemporaryStorage.queryUsageAndQuota||("storage"in navigator||(navigator.storage={}),navigator.storage.estimate=Sm)}function Sm(){return new Promise((function(e,t){navigator.webkitTemporaryStorage.queryUsageAndQuota((function(t,n){e({usage:t,quota:n})}),t)}))}function Em(){}function Im(){var e=Symbol.prototype;"description"in e||Object.defineProperty(e,"description",{get:km})}function km(){var e=/\((.*)\)/.exec(this.toString());return e?e[1]:void 0}function Cm(){}function _m(){if(e.HTMLMediaElement){var t=HTMLMediaElement.prototype.play;HTMLMediaElement.prototype.play=function(){var e=t.apply(this);return e&&e.catch((function(){})),e}}}function Mm(){}function Rm(){if(e.HTMLVideoElement){var t=HTMLVideoElement.prototype;!t.getVideoPlaybackQuality&&("webkitDroppedFrameCount"in t||Ot())&&(t.getVideoPlaybackQuality=Nm)}}function Nm(){return{droppedVideoFrames:this.webkitDroppedFrameCount,totalVideoFrames:this.webkitDecodedFrameCount,corruptedVideoFrames:0,creationTime:NaN,totalFrameDelay:0}}function Lm(){}function Dm(){if(!e.VTTCue&&e.TextTrackCue){var t=null,n=TextTrackCue.length;if(3==n)t=Pm;else if(6==n)t=Om;else{try{var r=!!Pm(1,2,"")}catch(i){r=!1}r&&(t=Pm)}t&&(e.VTTCue=function(e,n,r){return t(e,n,r)})}}function Pm(t,n,r){return new e.TextTrackCue(t,n,r)}function Om(t,n,r){return new e.TextTrackCue(t+"-"+n+"-"+r,t,n,r)}function Um(){}og(Jg),ig.PiPWebkit=hm,hm.install=fm,og(fm),ig.RandomUUID=bm,bm.install=xm,og(xm),ig.StorageEstimate=Tm,Tm.install=Am,og(Am),ig.Symbol=Em,Em.install=Im,og(Im),ig.VideoPlayPromise=Cm,Cm.install=_m,og(_m),ig.VideoPlaybackQuality=Mm,Mm.install=Rm,og(Rm),ig.VTTCue=Lm,Lm.install=Dm,og(Dm),Um.prototype.parseInit=function(){},Um.prototype.setSequenceMode=function(){},Um.prototype.parseMedia=function(e,t){for(var n=null,r=[],i=(e=c(e=Ht(e).split(/\r?\n/))).next();!i.done;i=e.next())if((i=i.value)&&!/^\s+$/.test(i)&&(i=Bm.exec(i))){var a=jm.exec(i[1]);i=new tt(a=60*parseInt(a[1],10)+parseFloat(a[2].replace(",",".")),t.segmentEnd?t.segmentEnd:a+2,i[2]),n&&(n.endTime=a,r.push(n)),n=i}return n&&r.push(n),r},z("shaka.text.LrcTextParser",Um),Um.prototype.parseMedia=Um.prototype.parseMedia,Um.prototype.setSequenceMode=Um.prototype.setSequenceMode,Um.prototype.parseInit=Um.prototype.parseInit;var Bm=/^\[(\d{1,2}:\d{1,2}(?:[.,]\d{1,3})?)\](.*)/,jm=/^(\d+):(\d{1,2}(?:[.,]\d{1,3})?)$/;function Fm(){}function zm(e,t,n,r,i,a,o,s,u,l,d){var h=e.parentNode;if(e.nodeType==Node.COMMENT_NODE)return null;if(e.nodeType==Node.TEXT_NODE){if(!d)return null;var f=document.createElement("span");f.textContent=e.textContent}else f=e;for(var p=null,g=c(fv),m=g.next();!m.done&&!(p=Xm(f,"backgroundImage",r,"#",m.value)[0]);m=g.next());if(g=d,("p"==e.nodeName||p)&&(d=!0),s="default"==(f.getAttribute("xml:space")||(s?"default":"preserve")),e=[],!(m=Array.from(f.childNodes).every((function(e){return e.nodeType==Node.TEXT_NODE}))))for(var v=c(f.childNodes),y=v.next();!y.done;y=v.next())(y=zm(y.value,t,n,r,i,a,o,s,u,f,d))&&e.push(y);r=null!=l,v=/\S/.test(f.textContent);var b=f.hasAttribute("begin")||f.hasAttribute("end")||f.hasAttribute("dur");if(!(b||v||"br"==f.tagName||0!=e.length||r&&!s))return null;for(v=(y=Ym(f,n)).start,y=y.end;h&&h.nodeType==Node.ELEMENT_NODE&&"tt"!=h.tagName;)v=(y=qm(h,n,v,y)).start,y=y.end,h=h.parentNode;if(null==v&&(v=0),v+=t.periodStart,y=null==y?1/0:y+t.periodStart,v=Math.max(v,t.segmentStart),y=Math.min(y,t.segmentEnd),!b&&0<e.length)for(v=1/0,y=0,n=(t=c(e)).next();!n.done;n=t.next())n=n.value,v=Math.min(v,n.startTime),y=Math.max(y,n.endTime);if("br"==f.tagName)return(i=new tt(v,y,"")).lineBreak=!0,i;if(t="",m&&(t=f.textContent,s&&(t=(t=t.trim()).replace(/\s+/g," "))),(t=new tt(v,y,t)).nestedCues=e,d||(t.isContainer=!0),u&&(t.cellResolution=u),u=Xm(f,"region",a,"")[0],f.hasAttribute("region")&&u&&u.getAttribute("xml:id")){var x=u.getAttribute("xml:id");t.region=o.filter((function(e){return e.id==x}))[0]}return o=u,l&&r&&!f.getAttribute("region")&&!f.getAttribute("style")&&(o=Xm(l,"region",a,"")[0]),function(e,t,n,r,i,a,o){a=a||o,"rtl"==Vm(t,n,i,"direction",a)&&(e.direction="rtl"),o=Vm(t,n,i,"writingMode",a),"tb"==o||"tblr"==o?e.writingMode="vertical-lr":"tbrl"==o?e.writingMode="vertical-rl":"rltb"==o||"rl"==o?e.direction="rtl":o&&(e.direction=ut),(o=Vm(t,n,i,"textAlign",!0))?(e.positionAlign=cv[o],e.lineAlign=lv[o],e.textAlign=at[o.toUpperCase()]):e.textAlign=it,(o=Vm(t,n,i,"displayAlign",!0))&&(e.displayAlign=st[o.toUpperCase()]);(o=Vm(t,n,i,"color",a))&&(e.color=o);(o=Vm(t,n,i,"backgroundColor",a))&&(e.backgroundColor=o);(o=Vm(t,n,i,"border",a))&&(e.border=o);if(o=Vm(t,n,i,"fontFamily",a))switch(o){case"monospaceSerif":e.fontFamily="Courier New,Liberation Mono,Courier,monospace";break;case"proportionalSansSerif":e.fontFamily="Arial,Helvetica,Liberation Sans,sans-serif";break;case"sansSerif":e.fontFamily="sans-serif";break;case"monospaceSansSerif":e.fontFamily="Consolas,monospace";break;case"proportionalSerif":e.fontFamily="serif";break;default:e.fontFamily=o}(o=Vm(t,n,i,"fontWeight",a))&&"bold"==o&&(e.fontWeight=700),o=Vm(t,n,i,"wrapOption",a),e.wrapLine=!o||"noWrap"!=o,(o=Vm(t,n,i,"lineHeight",a))&&o.match(tv)&&(e.lineHeight=o),(o=Vm(t,n,i,"fontSize",a))&&(o.match(tv)||o.match(ev))&&(e.fontSize=o),(o=Vm(t,n,i,"fontStyle",a))&&(e.fontStyle=vt[o.toUpperCase()]);if(r){o=r.getAttribute("imageType")||r.getAttribute("imagetype");var s=r.getAttribute("encoding");r=r.textContent.trim(),"PNG"==o&&"Base64"==s&&r&&(e.backgroundImage="data:image/png;base64,"+r)}(r=Vm(t,n,i,"textOutline",a))&&(r=r.split(" "),r[0].match(tv)?e.textStrokeColor=e.color:(e.textStrokeColor=r[0],r.shift()),r[0]&&r[0].match(tv)?e.textStrokeWidth=r[0]:e.textStrokeColor="");(r=Vm(t,n,i,"letterSpacing",a))&&r.match(tv)&&(e.letterSpacing=r),(r=Vm(t,n,i,"linePadding",a))&&r.match(tv)&&(e.linePadding=r),(a=Vm(t,n,i,"opacity",a))&&(e.opacity=parseFloat(a));(n=Km(n,i,"textDecoration"))&&Gm(e,n),(t=Hm(t,i,"textDecoration"))&&Gm(e,t)}(t,f,o,p,i,g,0==e.length),t}function Gm(e,t){for(var n=(t=c(t.split(" "))).next();!n.done;n=t.next())switch(n.value){case"underline":e.textDecoration.includes("underline")||e.textDecoration.push("underline");break;case"noUnderline":e.textDecoration.includes("underline")&&Je(e.textDecoration,"underline");break;case"lineThrough":e.textDecoration.includes("lineThrough")||e.textDecoration.push("lineThrough");break;case"noLineThrough":e.textDecoration.includes("lineThrough")&&Je(e.textDecoration,"lineThrough");break;case"overline":e.textDecoration.includes("overline")||e.textDecoration.push("overline");break;case"noOverline":e.textDecoration.includes("overline")&&Je(e.textDecoration,"overline")}}function Vm(e,t,n,r,i){return i=void 0===i||i,(e=Hm(e,n,r))?e:i?Km(t,n,r):null}function Km(e,t,n){if(!e)return null;var r=vi(e,hv,n);return r||Wm(e,t,n)}function Hm(e,t,n){var r=vi(e,hv,n);return r||Wm(e,t,n)}function Wm(e,t,n){e=Xm(e,"style",t,"");for(var r=null,i=0;i<e.length;i++){var a=mi(e[i],"urn:ebu:tt:style",n);a||(a=vi(e[i],hv,n)),a||(a=Hm(e[i],t,n)),a&&(r=a)}return r}function Xm(e,t,n,r,i){var a=[];if(!e||1>n.length)return a;var o=e;for(e=null;o&&!(e=i?mi(o,i,t):o.getAttribute(t))&&(o=o.parentNode)instanceof Element;);if(t=e)for(i=(t=c(t.split(" "))).next();!i.done;i=t.next())for(i=i.value,o=(e=c(n)).next();!o.done;o=e.next())if(r+(o=o.value).getAttribute("xml:id")==i){a.push(o);break}return a}function qm(e,t,n,r){return e=Ym(e,t),null==n?n=e.start:null!=e.start&&(n+=e.start),null==r?r=e.end:null!=e.start&&(r+=e.start),{start:n,end:r}}function Ym(e,t){var n=$m(e.getAttribute("begin"),t),r=$m(e.getAttribute("end"),t);return e=$m(e.getAttribute("dur"),t),null==r&&null!=e&&(r=n+e),{start:n,end:r}}function $m(e,t){var n=null;if(rv.test(e)){e=rv.exec(e),n=Number(e[1]);var r=Number(e[2]),i=Number(e[3]),a=Number(e[4]);n=(i+=(a+=(Number(e[5])||0)/t.h)/t.frameRate)+60*r+3600*n}else if(iv.test(e))n=Qm(iv,e);else if(av.test(e))n=Qm(av,e);else if(ov.test(e))e=ov.exec(e),n=Number(e[1])/t.frameRate;else if(sv.test(e))e=sv.exec(e),n=Number(e[1])/t.g;else if(uv.test(e))n=Qm(uv,e);else if(e)throw new be(2,2,2001,"Could not parse cue time range in TTML");return n}function Qm(e,t){return null==(e=e.exec(t))||""==e[0]?null:(Number(e[4])||0)/1e3+(Number(e[3])||0)+60*(Number(e[2])||0)+3600*(Number(e[1])||0)}function Jm(e,t,n,r){this.frameRate=Number(e)||30,this.h=Number(t)||1,this.g=Number(r),0==this.g&&(this.g=e?this.frameRate*this.h:1),n&&(e=/^(\d+) (\d+)$/g.exec(n))&&(this.frameRate*=Number(e[1])/Number(e[2]))}Sn["application/x-subtitle-lrc"]=function(){return new Um},Fm.prototype.parseInit=function(){},Fm.prototype.setSequenceMode=function(){},Fm.prototype.parseMedia=function(e,t){var n=Ht(e);if(e=[],""==n)return e;var r=_i(n,"tt");if(!r)throw new be(2,2,2005,"Failed to parse TTML.");if(!(n=r.getElementsByTagName("body")[0]))return[];var i=vi(r,dv,"frameRate"),a=vi(r,dv,"subFrameRate"),o=vi(r,dv,"frameRateMultiplier"),s=vi(r,dv,"tickRate"),u=vi(r,dv,"cellResolution"),l=r.getAttribute("xml:space")||"default",d=vi(r,hv,"extent");if("default"!=l&&"preserve"!=l)throw new be(2,2,2005,"Invalid xml:space value: "+l);l="default"==l,i=new Jm(i,a,o,s),u=u&&(u=/^(\d+) (\d+)$/.exec(u))?{columns:parseInt(u[1],10),rows:parseInt(u[2],10)}:null,a=(a=r.getElementsByTagName("metadata")[0])?function(e){return Array.from(e.childNodes).filter((function(e){return e instanceof Element}))}(a):[],o=Array.from(r.getElementsByTagName("style")),s=[];for(var h=c(r=Array.from(r.getElementsByTagName("region"))),f=h.next();!f.done;f=h.next()){var p=f.value;f=new yt;var g=p.getAttribute("xml:id");if(g){f.id=g;var m,v,y=null;d&&(y=Zm.exec(d)||nv.exec(d)),g=y?Number(y[1]):null,y=y?Number(y[2]):null,(m=Km(p,o,"extent"))&&(null!=(m=(v=Zm.exec(m))||nv.exec(m))&&(f.width=Number(m[1]),f.height=Number(m[2]),v||(null!=g&&(f.width=100*f.width/g),null!=y&&(f.height=100*f.height/y)),f.widthUnits=v||null!=g?bt:0,f.heightUnits=v||null!=y?bt:0)),(p=Km(p,o,"origin"))&&(null!=(m=(v=Zm.exec(p))||nv.exec(p))&&(f.viewportAnchorX=Number(m[1]),f.viewportAnchorY=Number(m[2]),v||(null!=y&&(f.viewportAnchorY=100*f.viewportAnchorY/y),null!=g&&(f.viewportAnchorX=100*f.viewportAnchorX/g)),f.viewportAnchorUnits=v||null!=g?bt:0))}else f=null;f&&s.push(f)}if(pi(n,"p").length)throw new be(2,2,2001,"<p> can only be inside <div> in TTML");for(h=(d=c(pi(n,"div"))).next();!h.done;h=d.next())if(pi(h.value,"span").length)throw new be(2,2,2001,"<span> can only be inside <p> in TTML");return(t=zm(n,t,i,a,o,r,s,l,u,null,!1))&&(t.backgroundColor||(t.backgroundColor="transparent"),e.push(t)),e},z("shaka.text.TtmlTextParser",Fm),Fm.prototype.parseMedia=Fm.prototype.parseMedia,Fm.prototype.setSequenceMode=Fm.prototype.setSequenceMode,Fm.prototype.parseInit=Fm.prototype.parseInit;var Zm=/^(\d{1,2}(?:\.\d+)?|100(?:\.0+)?)% (\d{1,2}(?:\.\d+)?|100(?:\.0+)?)%$/,ev=/^(\d{1,2}(?:\.\d+)?|100)%$/,tv=/^(\d+px|\d+em|\d*\.?\d+c)$/,nv=/^(\d+)px (\d+)px$/,rv=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,iv=/^(?:(\d{2,}):)?(\d{2}):(\d{2})$/,av=/^(?:(\d{2,}):)?(\d{2}):(\d{2}\.\d{2,})$/,ov=/^(\d*(?:\.\d*)?)f$/,sv=/^(\d*(?:\.\d*)?)t$/,uv=RegExp("^(?:(\\d*(?:\\.\\d*)?)h)?(?:(\\d*(?:\\.\\d*)?)m)?(?:(\\d*(?:\\.\\d*)?)s)?(?:(\\d*(?:\\.\\d*)?)ms)?$"),lv={left:dt,center:"center",right:"end",start:dt,end:"end"},cv={left:"line-left",center:"center",right:"line-right"},dv=["http://www.w3.org/ns/ttml#parameter","http://www.w3.org/2006/10/ttaf1#parameter"],hv=["http://www.w3.org/ns/ttml#styling","http://www.w3.org/2006/10/ttaf1#styling"],fv=["http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt","http://www.smpte-ra.org/schemas/2052-1/2013/smpte-tt"];function pv(){this.g=new Fm}function gv(){this.g=!1}function mv(e){for(var t=c(Object.entries(ft)),n=t.next();!n.done;n=t.next()){var r=c(n.value);n=r.next().value,r=r.next().value;var i=new tt(0,0,"");i.color=r,e.set("."+n,i)}for(n=(t=c(Object.entries(pt))).next();!n.done;n=t.next())n=(r=c(n.value)).next().value,r=r.next().value,(i=new tt(0,0,"")).backgroundColor=r,e.set("."+n,i)}function vv(e,t,n){0===n.size&&mv(n);e:{var r=e;e=[];for(var i=-1,a="",o=0;o<r.length;o++)if("/"===r[o]&&0<o&&"<"===r[o-1]){var s=r.indexOf(">",o);if(s<=o){e=r;break e}if((s=r.substring(o+1,s))&&"c"===s){var u=e.pop();u?u===s?(a+="/"+s+">",o+=s.length+1):u.startsWith("c.")?(o+=s.length+1,a+="/"+u+">"):a+=r[o]:a+=r[o]}else a+=r[o]}else"<"===r[o]?"c"!=r[i=o+1]&&(i=-1):">"===r[o]&&0<i&&(e.push(r.substr(i,o-i)),i=-1),a+=r[o];e=a}for(r=[],a=-1,i=0;i<e.length;i++)"<"===e[i]?a=i+1:">"===e[i]&&0<a&&((a=e.substr(a,i-a)).match(Av)&&r.push(a),a=-1);for(i=(r=c(r)).next();!i.done;i=r.next())i=i.value,e=e.replace("<"+i+">",'<div time="'+i+'">'),e+="</div>";e:{for(i=e,a=[],o=-1,r="",e=!1,s=0;s<i.length;s++)if("/"===i[s]){if(-1===(u=i.indexOf(">",s))){e=i;break e}if((u=i.substring(s+1,u))&&"v"==u){e=!0;var l=null;if(a.length&&(l=a[a.length-1]),l){if(l===u)r+="/"+u+">";else{if(!l.startsWith("v")){r+=i[s];continue}r+="/"+l+">"}s+=u.length+1}else r+=i[s]}else r+=i[s]}else"<"===i[s]?"v"!=i[o=s+1]&&(o=-1):">"===i[s]&&0<o&&(a.push(i.substr(o,s-o)),o=-1),r+=i[s];for(a=(i=c(a)).next();!a.done;a=i.next())o=(a=a.value).replace(" ",".voice-"),r=(r=r.replace("<"+a+">","<"+o+">")).replace("</"+a+">","</"+o+">"),e||(r+="</"+o+">");e=r}if(i=_i("<span>"+e+"</span>","span")){if(r=[],1==(i=i.childNodes).length&&((a=i[0]).nodeType==Node.TEXT_NODE||a.nodeType==Node.CDATA_SECTION_NODE))return void(t.payload=e);for(i=(e=c(i)).next();!i.done;i=e.next())bv(i.value,t,r,n);t.nestedCues=r}else t.payload=e}function yv(e,t){return e&&0<e.length?e:t}function bv(e,t,n,r){var i=t.clone();if(e.nodeType===Node.ELEMENT_NODE&&e.nodeName)for(var a=c(e.nodeName.split(/(?=[ .])+/g)),o=a.next();!o.done;o=a.next()){var s=o=o.value;if(s.startsWith(".voice-")){var u=s.split("-").pop();s='v[voice="'+u+'"]',r.has(s)||(s="v[voice="+u+"]")}switch(r.has(s)&&(s=r.get(s))&&(i.backgroundColor=yv(s.backgroundColor,i.backgroundColor),i.color=yv(s.color,i.color),i.fontFamily=yv(s.fontFamily,i.fontFamily),i.fontSize=yv(s.fontSize,i.fontSize),i.fontWeight=s.fontWeight,i.fontStyle=s.fontStyle,i.opacity=s.opacity,i.wrapLine=s.wrapLine),o){case"br":(o=t.clone()).lineBreak=!0,n.push(o);break;case"b":i.fontWeight=700;break;case"i":i.fontStyle="italic";break;case"u":i.textDecoration.push("underline");break;case"div":(o=e.getAttribute("time"))&&(o=wv(new Fh(o)))&&(i.startTime=o)}}if(bi(e))for(a=!0,r=c(e.textContent.split("\n")),e=r.next();!e.done;e=r.next())e=e.value,a||((a=t.clone()).lineBreak=!0,n.push(a)),0<e.length&&((a=i.clone()).payload=e,n.push(a)),a=!1;else for(e=(t=c(e.childNodes)).next();!e.done;e=t.next())bv(e.value,i,n,r)}function xv(e,t,n){var r;(r=/^align:(start|middle|center|end|left|right)$/.exec(t))?(t=r[1],e.textAlign="middle"==t?it:at[t.toUpperCase()]):(r=/^vertical:(lr|rl)$/.exec(t))?e.writingMode="lr"==r[1]?"vertical-lr":"vertical-rl":(r=/^size:([\d.]+)%$/.exec(t))?e.size=Number(r[1]):(r=/^position:([\d.]+)%(?:,(line-left|line-right|center|start|end))?$/.exec(t))?(e.position=Number(r[1]),r[2]&&(t=r[2],e.positionAlign="line-left"==t||"start"==t?"line-left":"line-right"==t||"end"==t?"line-right":"center")):(r=/^region:(.*)$/.exec(t))?(t=function(e,t){return e=e.filter((function(e){return e.id==t})),e.length?e[0]:null}(n,r[1]))&&(e.region=t):(n=/^line:([\d.]+)%(?:,(start|end|center))?$/.exec(t))?(e.lineInterpretation=1,e.line=Number(n[1]),n[2]&&(e.lineAlign=ht[n[2].toUpperCase()])):(n=/^line:(-?\d+)(?:,(start|end|center))?$/.exec(t))&&(e.lineInterpretation=ct,e.line=Number(n[1]),n[2]&&(e.lineAlign=ht[n[2].toUpperCase()]))}function wv(e){if(null==(e=Gh(e,Av)))return null;var t=Number(e[2]),n=Number(e[3]);return 59<t||59<n?null:Number(e[4])/1e3+n+60*t+3600*(Number(e[1])||0)}function Tv(e){var t={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&nbsp;":"","&lrm;":"","&rlm;":""},n=/&(?:amp|lt|gt|quot|#(0+)?39|nbsp|lrm|rlm);/g,r=RegExp(n.source);return e&&r.test(e)?e.replace(n,(function(e){return t[e]||"'"})):e||""}Sn["application/ttml+xml"]=function(){return new Fm},pv.prototype.parseInit=function(e){var t=!1;if((new ei).box("moov",ti).box("trak",ti).box("mdia",ti).box("minf",ti).box("stbl",ti).S("stsd",ni).box("stpp",(function(e){t=!0,e.parser.stop()})).parse(e),!t)throw new be(2,2,2007)},pv.prototype.setSequenceMode=function(){},pv.prototype.parseMedia=function(e,t){var n=this,r=!1,i=[];if((new ei).box("mdat",ii((function(e){r=!0,i=i.concat(n.g.parseMedia(e,t))}))).parse(e,!1),!r)throw new be(2,2,2007);return i},z("shaka.text.Mp4TtmlParser",pv),pv.prototype.parseMedia=pv.prototype.parseMedia,pv.prototype.setSequenceMode=pv.prototype.setSequenceMode,pv.prototype.parseInit=pv.prototype.parseInit,Sn['application/mp4; codecs="stpp"']=function(){return new pv},Sn['application/mp4; codecs="stpp.ttml"']=function(){return new pv},Sn['application/mp4; codecs="stpp.ttml.im1t"']=function(){return new pv},Sn['application/mp4; codecs="stpp.TTML.im1t"']=function(){return new pv},gv.prototype.parseInit=function(){},gv.prototype.setSequenceMode=function(e){this.g=e},gv.prototype.parseMedia=function(e,t){var n=(e=(e=Ht(e)).replace(/\r\n|\r(?=[^\n]|$)/gm,"\n")).split(/\n{2,}/m);if(!/^WEBVTT($|[ \t\n])/m.test(n[0]))throw new be(2,2,2e3);if(e=t.vttOffset,n[0].includes("X-TIMESTAMP-MAP")&&this.g){var r=n[0].match(/LOCAL:((?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{3}))/m),i=n[0].match(/MPEGTS:(\d+)/m);if(r&&i){if(null==(e=wv(new Fh(r[1]))))throw new be(2,2,2e3);for(i=Number(i[1]),r=t.segmentStart-t.periodStart;95443.7176888889<=r;)r-=95443.7176888889,i+=8589934592;e=t.periodStart+i/9e4-e}}for(t=[],r=(i=c(n[0].split("\n"))).next();!r.done;r=i.next())if(r=r.value,/^Region:/.test(r)){r=new Fh(r);var a=new yt;Vh(r),zh(r);for(var o=Vh(r);o;){var s=a,u=o;(o=/^id=(.*)$/.exec(u))?s.id=o[1]:(o=/^width=(\d{1,2}|100)%$/.exec(u))?s.width=Number(o[1]):(o=/^lines=(\d+)$/.exec(u))?(s.height=Number(o[1]),s.heightUnits=2):(o=/^regionanchor=(\d{1,2}|100)%,(\d{1,2}|100)%$/.exec(u))?(s.regionAnchorX=Number(o[1]),s.regionAnchorY=Number(o[2])):(o=/^viewportanchor=(\d{1,2}|100)%,(\d{1,2}|100)%$/.exec(u))?(s.viewportAnchorX=Number(o[1]),s.viewportAnchorY=Number(o[2])):/^scroll=up$/.exec(u)&&(s.scroll="up"),zh(r),o=Vh(r)}t.push(a)}for(mv(i=new Map),r=[],a=(n=c(n.slice(1))).next();!a.done;a=n.next()){if((1!=(a=a.value.split("\n")).length||a[0])&&!/^NOTE($|[ \t])/.test(a[0])&&"STYLE"==a[0]){for(s=[],o=-1,u=1;u<a.length;u++)a[u].includes("::cue")&&(s.push([]),o=s.length-1),-1!=o&&(s[o].push(a[u]),a[u].includes("}")&&(o=-1));for(o=(s=c(s)).next();!o.done;o=s.next()){var l=o.value;o="global",(u=l[0].match(/\((.*)\)/))&&(o=u.pop()),u=l.slice(1,-1),l[0].includes("}")&&(l=/\{(.*?)\}/.exec(l[0]))&&(u=l[1].split(";")),(l=i.get(o))||(l=new tt(0,0,""));for(var d=!1,h=0;h<u.length;h++){var f=/^\s*([^:]+):\s*(.*)/.exec(u[h]);if(f){var p=f[2].trim().replace(";","");switch(f[1].trim()){case"background-color":case"background":d=!0,l.backgroundColor=p;break;case"color":d=!0,l.color=p;break;case"font-family":d=!0,l.fontFamily=p;break;case"font-size":d=!0,l.fontSize=p;break;case"font-weight":(700<=parseInt(p,10)||"bold"==p)&&(d=!0,l.fontWeight=700);break;case"font-style":switch(p){case"normal":d=!0,l.fontStyle=mt;break;case"italic":d=!0,l.fontStyle="italic";break;case"oblique":d=!0,l.fontStyle="oblique"}break;case"opacity":d=!0,l.opacity=parseFloat(p);break;case"text-shadow":d=!0,l.textShadow=p;break;case"white-space":d=!0,l.wrapLine="noWrap"!=p}}}d&&i.set(o,l)}}if(d=e,1==a.length&&!a[0]||/^NOTE($|[ \t])/.test(a[0])||"STYLE"==a[0]||"REGION"==a[0])a=null;else{if(s=null,a[0].includes("--\x3e")||(s=a[0],a.splice(0,1)),u=wv(o=new Fh(a[0])),h=Gh(o,/[ \t]+--\x3e[ \t]+/g),l=wv(o),null==u||null==h||null==l)throw new be(2,2,2001,"Could not parse cue time range in WebVTT");for(u+=d,l+=d,d=Tv(a.slice(1).join("\n").trim()),i.has("global")?((a=i.get("global").clone()).startTime=u,a.endTime=l,a.payload=""):a=new tt(u,l,""),vv(d,a,i),zh(o),u=Vh(o);u;)xv(a,u,t),zh(o),u=Vh(o);null!=s&&(a.id=s)}a&&r.push(a)}return r},z("shaka.text.VttTextParser",gv),gv.prototype.parseMedia=gv.prototype.parseMedia,gv.prototype.setSequenceMode=gv.prototype.setSequenceMode,gv.prototype.parseInit=gv.prototype.parseInit;var Av=/(?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{2,3})/g;function Sv(){this.g=null}function Ev(e,t,n){var r,i,a;return(new ei).box("payl",ii((function(e){r=Ht(e)}))).box("iden",ii((function(e){i=Ht(e)}))).box("sttg",ii((function(e){a=Ht(e)}))).parse(e),r?function(e,t,n,r,i){if(r=new tt(r,i,""),vv(e,r,new Map),t&&(r.id=t),n)for(e=new Fh(n),t=Vh(e);t;)xv(r,t,[]),zh(e),t=Vh(e);return r}(r,i,a,t,n):null}function Iv(){}function kv(e){if(null==(e=Gh(e,/(?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{2,3})/g)))return null;var t=Number(e[2]),n=Number(e[3]);return 59<t||59<n?null:Number(e[4])/1e3+n+60*t+3600*(Number(e[1])||0)}function Cv(){this.g=new gv}function _v(e){var t="WEBVTT\n\n";if(""==e)return t;for(var n=(e=c((e=(e=e.replace(/\r+/g,"")).trim()).split("\n\n"))).next();!n.done;n=e.next())(n=n.value.split(/\n/))[0].match(/\d+/)&&n.shift(),n[0]=n[0].replace(/,/g,"."),t+=n.join("\n")+"\n\n";return t}function Mv(){}function Rv(e,t){var n=t.Fontname;if(n&&(e.fontFamily=n),(n=t.Fontsize)&&(e.fontSize=n+"px"),(n=t.PrimaryColour)&&(n=Nv(n))&&(e.color=n),(n=t.BackColour)&&(n=Nv(n))&&(e.backgroundColor=n),t.Bold&&(e.fontWeight=700),t.Italic&&(e.fontStyle="italic"),t.Underline&&e.textDecoration.push("underline"),(n=t.Spacing)&&(e.letterSpacing=n+"px"),n=t.Alignment)switch(parseInt(n,10)){case 1:e.displayAlign=ot,e.textAlign="start";break;case 2:e.displayAlign=ot,e.textAlign=it;break;case 3:e.displayAlign=ot,e.textAlign="end";break;case 5:e.displayAlign="before",e.textAlign="start";break;case 6:e.displayAlign="before",e.textAlign=it;break;case 7:e.displayAlign="before",e.textAlign="end";break;case 9:e.displayAlign="center",e.textAlign="start";break;case 10:e.displayAlign="center",e.textAlign=it;break;case 11:e.displayAlign="center",e.textAlign="end"}(t=t.AlphaLevel)&&(e.opacity=parseFloat(t))}function Nv(e){return 0<=(e=parseInt(e.replace("&H",""),16))?"rgba("+(255&e)+","+(e>>8&255)+","+(e>>16&255)+","+(e>>24&255^255)/255+")":null}function Lv(e){return 3600*((e=jv.exec(e))[1]?parseInt(e[1].replace(":",""),10):0)+60*parseInt(e[2],10)+parseFloat(e[3])}Sn["text/vtt"]=function(){return new gv},Sn['text/vtt; codecs="vtt"']=function(){return new gv},Sn['text/vtt; codecs="wvtt"']=function(){return new gv},Sv.prototype.parseInit=function(e){var t=this,n=!1;if((new ei).box("moov",ti).box("trak",ti).box("mdia",ti).S("mdhd",(function(e){e=po(e.reader,e.version),t.g=e.timescale})).box("minf",ti).box("stbl",ti).S("stsd",ni).box("wvtt",(function(){n=!0})).parse(e),!this.g)throw new be(2,2,2008);if(!n)throw new be(2,2,2008)},Sv.prototype.setSequenceMode=function(){},Sv.prototype.parseMedia=function(e,t){if(!this.g)throw new be(2,2,2008);var n,r=0,i=[],a=[],o=!1,s=!1,u=!1,l=null;if((new ei).box("moof",ti).box("traf",ti).S("tfdt",(function(e){o=!0,r=fo(e.reader,e.version).rf})).S("tfhd",(function(e){l=ho(e.reader,e.flags).Cf})).S("trun",(function(e){s=!0,i=go(e.reader,e.version,e.flags).Tf})).box("mdat",ii((function(e){u=!0,n=e}))).parse(e,!1),!u&&!o&&!s)throw new be(2,2,2008);e=r;for(var d=new Qr(n,0),h=c(i),f=h.next();!f.done;f=h.next()){var p=(f=f.value).Ge||l,g=f.Ld?r+f.Ld:e;e=g+(p||0);var m=0;do{var v=d.N();m+=v;var y=null;"vttc"==oi(d.N())?8<v&&(y=d.Bb(v-8)):d.skip(v-8),p&&y&&(v=Ev(y,t.periodStart+g/this.g,t.periodStart+e/this.g),a.push(v))}while(f.sampleSize&&m<f.sampleSize)}return a.filter(Te)},z("shaka.text.Mp4VttParser",Sv),Sv.prototype.parseMedia=Sv.prototype.parseMedia,Sv.prototype.setSequenceMode=Sv.prototype.setSequenceMode,Sv.prototype.parseInit=Sv.prototype.parseInit,Sn['application/mp4; codecs="wvtt"']=function(){return new Sv},Iv.prototype.parseInit=function(){},Iv.prototype.setSequenceMode=function(){},Iv.prototype.parseMedia=function(e){var t=Ht(e).replace(/\r+/g,"");if(e=[],""==(t=t.trim()))return e;for(var n=(t=c(t.split("\n\n"))).next();!n.done;n=t.next()){var r=new Fh((n=n.value.split("\n"))[0]),i=kv(r),a=Gh(r,/,/g);if(r=kv(r),null==i||null==a||null==r)throw new be(2,2,2001,"Could not parse cue time range in SubViewer");e.push(new tt(i,r,n.slice(1).join("\n").trim()))}return e},z("shaka.text.SbvTextParser",Iv),Iv.prototype.parseMedia=Iv.prototype.parseMedia,Iv.prototype.setSequenceMode=Iv.prototype.setSequenceMode,Iv.prototype.parseInit=Iv.prototype.parseInit,Sn["text/x-subviewer"]=function(){return new Iv},Cv.prototype.parseInit=function(){},Cv.prototype.setSequenceMode=function(){},Cv.prototype.parseMedia=function(e,t){return e=Et(qt(e=_v(e=Ht(e)))),this.g.parseMedia(e,t)},z("shaka.text.SrtTextParser",Cv),Cv.srt2webvtt=_v,Cv.prototype.parseMedia=Cv.prototype.parseMedia,Cv.prototype.setSequenceMode=Cv.prototype.setSequenceMode,Cv.prototype.parseInit=Cv.prototype.parseInit,Sn["text/srt"]=function(){return new Cv},Mv.prototype.parseInit=function(){},Mv.prototype.setSequenceMode=function(){},Mv.prototype.parseMedia=function(e){for(var t="",n="",r=(e=c(e=Ht(e).split(/\r?\n\s*\r?\n/))).next();!r.done;r=e.next()){var i=Ov.exec(r.value);i&&(r=i[1],i=i[2],"V4 Styles"==r||"V4+ Styles"==r?t=i:"Events"==r&&(n=i))}e=[],r=null;for(var a=(t=c(t.split(/\r?\n/))).next();!a.done;a=t.next())if(i=a.value,!/^\s*;/.test(i)&&(a=Uv.exec(i)))if(i=a[1].trim(),a=a[2].trim(),"Format"==i)r=a.split(Bv);else if("Style"==i){i=a.split(Bv),a={};for(var o=0;o<r.length&&o<i.length;o++)a[r[o]]=i[o];e.push(a)}for(r=[],t=null,i={},a=(n=c(n.split(/\r?\n/))).next();!a.done;i={be:i.be},a=n.next())if(a=a.value,!/^\s*;/.test(a)&&(o=Uv.exec(a)))if(a=o[1].trim(),o=o[2].trim(),"Format"==a)t=o.split(Bv);else if("Dialogue"==a){o=o.split(Bv),a={};for(var s=0;s<t.length&&s<o.length;s++)a[t[s]]=o[s];o=new tt(s=Lv(a.Start),Lv(a.End),o.slice(t.length-1).join(",").replace(/\\N/g,"\n").replace(/\{[^}]+\}/g,"")),i.be=a.Style,(a=e.find(function(e){return function(t){return t.Name==e.be}}(i)))&&Rv(o,a),r.push(o)}return r},z("shaka.text.SsaTextParser",Mv),Mv.prototype.parseMedia=Mv.prototype.parseMedia,Mv.prototype.setSequenceMode=Mv.prototype.setSequenceMode,Mv.prototype.parseInit=Mv.prototype.parseInit;var Dv,Pv,Ov=/^\s*\[([^\]]+)\]\r?\n([\s\S]*)/,Uv=/^\s*([^:]+):\s*(.*)/,Bv=/\s*,\s*/,jv=/^(\d+:)?(\d{1,2}):(\d{1,2}(?:[.]\d{1,3})?)?$/;
/*
            	 @license
            	 EME Encryption Scheme Polyfill
            	 Copyright 2019 Google LLC
            	 SPDX-License-Identifier: Apache-2.0
            	*/
function Fv(){}function zv(){Dv?console.debug("EmeEncryptionSchemePolyfill: Already installed."):navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration?(Dv=navigator.requestMediaKeySystemAccess,console.debug("EmeEncryptionSchemePolyfill: Waiting to detect encryptionScheme support."),navigator.requestMediaKeySystemAccess=Gv):console.debug("EmeEncryptionSchemePolyfill: EME not found")}function Gv(e,t){var n,r=this;return L((function(i){return 1==i.g?(console.assert(r==navigator,'bad "this" for requestMediaKeySystemAccess'),w(i,Dv.call(r,e,t),2)):Jv(n=i.h)?(console.debug("EmeEncryptionSchemePolyfill: Native encryptionScheme support found."),navigator.requestMediaKeySystemAccess=Dv,i.return(n)):(console.debug("EmeEncryptionSchemePolyfill: No native encryptionScheme support found. Patching encryptionScheme support."),navigator.requestMediaKeySystemAccess=Vv,i.return(Vv.call(r,e,t)))}))}function Vv(e,t){var n,r,i,a,o,s,u,l,d,h,f=this;return L((function(p){if(1==p.g){for(console.assert(f==navigator,'bad "this" for requestMediaKeySystemAccess'),n=Qv(e),r=[],i=c(t),a=i.next();!a.done;a=i.next())o=a.value,s=Kv(o.videoCapabilities,n),u=Kv(o.audioCapabilities,n),o.videoCapabilities&&o.videoCapabilities.length&&!s.length||o.audioCapabilities&&o.audioCapabilities.length&&!u.length||((l=Object.assign({},o)).videoCapabilities=s,l.audioCapabilities=u,r.push(l));if(!r.length)throw(d=Error("Unsupported keySystem or supportedConfigurations.")).name="NotSupportedError",d.code=DOMException.NOT_SUPPORTED_ERR,d;return w(p,Dv.call(f,e,r),2)}return h=p.h,p.return(new $v(h,n))}))}function Kv(e,t){return e?e.filter((function(e){return!e.encryptionScheme||e.encryptionScheme==t})):e}function Hv(){}function Wv(){Pv?console.debug("McEncryptionSchemePolyfill: Already installed."):navigator.mediaCapabilities?(Pv=navigator.mediaCapabilities.decodingInfo,console.debug("McEncryptionSchemePolyfill: Waiting to detect encryptionScheme support."),navigator.mediaCapabilities.decodingInfo=Xv):console.debug("McEncryptionSchemePolyfill: MediaCapabilities not found")}function Xv(e){var t,n,r,i=this;return L((function(a){switch(a.g){case 1:return console.assert(i==navigator.mediaCapabilities,'bad "this" for decodingInfo'),w(a,Pv.call(i,e),2);case 2:if(t=a.h,!e.keySystemConfiguration)return a.return(t);if((n=t.keySystemAccess)&&Jv(n))return console.debug("McEncryptionSchemePolyfill: Native encryptionScheme support found."),navigator.mediaCapabilities.decodingInfo=Pv,a.return(t);if(console.debug("McEncryptionSchemePolyfill: No native encryptionScheme support found. Patching encryptionScheme support."),navigator.mediaCapabilities.decodingInfo=qv,n){a.D(3);break}return r=t,w(a,Yv(e),4);case 4:return r.keySystemAccess=a.h,a.return(t);case 3:return a.return(qv.call(i,e))}}))}function qv(e){var t,n,r,i,a,o,s,u,l=this;return L((function(c){switch(c.g){case 1:return console.assert(l==navigator.mediaCapabilities,'bad "this" for decodingInfo'),t=null,e.keySystemConfiguration&&(n=e.keySystemConfiguration,r=n.keySystem,i=n.audio&&n.audio.encryptionScheme,a=n.video&&n.video.encryptionScheme,t=Qv(r),o={powerEfficient:!1,smooth:!1,supported:!1,keySystemAccess:null,configuration:e},i&&i!=t||a&&a!=t)?c.return(o):w(c,Pv.call(l,e),2);case 2:if((s=c.h).keySystemAccess){s.keySystemAccess=new $v(s.keySystemAccess,t),c.D(3);break}if(!e.keySystemConfiguration){c.D(3);break}return u=s,w(c,Yv(e),5);case 5:u.keySystemAccess=c.h;case 3:return c.return(s)}}))}function Yv(e){var t,n;return L((function(r){if(1==r.g){var i=e.keySystemConfiguration,a=[],o=[];return i.audio&&a.push({robustness:i.audio.robustness||"",contentType:e.audio.contentType}),i.video&&o.push({robustness:i.video.robustness||"",contentType:e.video.contentType}),i={initDataTypes:i.initDataType?[i.initDataType]:[],distinctiveIdentifier:i.distinctiveIdentifier,persistentState:i.persistentState,sessionTypes:i.sessionTypes},a.length&&(i.audioCapabilities=a),o.length&&(i.videoCapabilities=o),t=i,w(r,navigator.requestMediaKeySystemAccess(e.keySystemConfiguration.keySystem,[t]),2)}return n=r.h,r.return(n)}))}function $v(e,t){this.h=e,this.g=t,this.keySystem=e.keySystem}function Qv(e){return e.startsWith("com.widevine")||e.startsWith("com.microsoft")||e.startsWith("com.chromecast")||e.startsWith("com.adobe")||e.startsWith("org.w3")?"cenc":e.startsWith("com.apple")?"cbcs-1-9":(console.warn("EmeEncryptionSchemePolyfill: Unknown key system:",e,"Please contribute!"),null)}function Jv(e){var t=(e=e.getConfiguration()).audioCapabilities&&e.audioCapabilities[0];return!(!(e=e.videoCapabilities&&e.videoCapabilities[0]||t)||void 0===e.encryptionScheme)}function Zv(){}function ey(){zv(),Wv()}Sn["text/x-ssa"]=function(){return new Mv},z("EmeEncryptionSchemePolyfill",Fv),Fv.install=zv,z("McEncryptionSchemePolyfill",Hv),Hv.install=Wv,$v.prototype.getConfiguration=function(){var e=this.h.getConfiguration();if(e.videoCapabilities)for(var t=c(e.videoCapabilities),n=t.next();!n.done;n=t.next())n.value.encryptionScheme=this.g;if(e.audioCapabilities)for(n=(t=c(e.audioCapabilities)).next();!n.done;n=t.next())n.value.encryptionScheme=this.g;return e},$v.prototype.createMediaKeys=function(){return this.h.createMediaKeys()},z("EncryptionSchemePolyfills",Zv),Zv.install=ey,void 0!==n&&n.exports&&(n.exports=Zv);
/*
            	 @license
            	 Copyright 2013 Ali Al Dallal

            	 Licensed under the MIT license.

            	 Permission is hereby granted, free of charge, to any person obtaining a copy
            	 of this software and associated documentation files (the "Software"), to deal
            	 in the Software without restriction, including without limitation the rights
            	 to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
            	 copies of the Software, and to permit persons to whom the Software is
            	 furnished to do so, subject to the following conditions:

            	 The above copyright notice and this permission notice shall be included in
            	 all copies or substantial portions of the Software.

            	 THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
            	 IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
            	 FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
            	 AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
            	 LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
            	 OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
            	 SOFTWARE.
            	*/
for(var ty={ach:{u:"Lwo",A:"Acholi"},ady:{u:"",A:"Adyghe"},af:{u:"Afrikaans",A:"Afrikaans"},"af-NA":{u:"Afrikaans (Namibia)",A:"Afrikaans (Namibia)"},"af-ZA":{u:"Afrikaans (South Africa)",A:"Afrikaans (South Africa)"},ak:{u:"Ti",A:"Akan"},ar:{u:"",A:"Arabic"},"ar-AR":{u:"",A:"Arabic"},"ar-MA":{u:"",A:"Arabic (Morocco)"},"ar-SA":{u:" ()",A:"Arabic (Saudi Arabia)"},"ay-BO":{u:"Aymar aru",A:"Aymara"},az:{u:"Azrbaycan dili",A:"Azerbaijani"},"az-AZ":{u:"Azrbaycan dili",A:"Azerbaijani"},"be-BY":{u:"",A:"Belarusian"},bg:{u:"",A:"Bulgarian"},"bg-BG":{u:"",A:"Bulgarian"},bn:{u:"",A:"Bengali"},"bn-IN":{u:" ()",A:"Bengali (India)"},"bn-BD":{u:"()",A:"Bengali (Bangladesh)"},"bs-BA":{u:"Bosanski",A:"Bosnian"},ca:{u:"Catal",A:"Catalan"},"ca-ES":{u:"Catal",A:"Catalan"},cak:{u:"Maya Kaqchikel",A:"Kaqchikel"},"ck-US":{u:" (tsalagi)",A:"Cherokee"},cs:{u:"etina",A:"Czech"},"cs-CZ":{u:"etina",A:"Czech"},cy:{u:"Cymraeg",A:"Welsh"},"cy-GB":{u:"Cymraeg",A:"Welsh"},da:{u:"Dansk",A:"Danish"},"da-DK":{u:"Dansk",A:"Danish"},de:{u:"Deutsch",A:"German"},"de-AT":{u:"Deutsch (sterreich)",A:"German (Austria)"},"de-DE":{u:"Deutsch (Deutschland)",A:"German (Germany)"},"de-CH":{u:"Deutsch (Schweiz)",A:"German (Switzerland)"},dsb:{u:"Dolnoserbina",A:"Lower Sorbian"},el:{u:"",A:"Greek"},"el-GR":{u:"",A:"Greek (Greece)"},en:{u:"English",A:"English"},"en-GB":{u:"English (UK)",A:"English (UK)"},"en-AU":{u:"English (Australia)",A:"English (Australia)"},"en-CA":{u:"English (Canada)",A:"English (Canada)"},"en-IE":{u:"English (Ireland)",A:"English (Ireland)"},"en-IN":{u:"English (India)",A:"English (India)"},"en-PI":{u:"English (Pirate)",A:"English (Pirate)"},"en-UD":{u:"English (Upside Down)",A:"English (Upside Down)"},"en-US":{u:"English (US)",A:"English (US)"},"en-ZA":{u:"English (South Africa)",A:"English (South Africa)"},"en@pirate":{u:"English (Pirate)",A:"English (Pirate)"},eo:{u:"Esperanto",A:"Esperanto"},"eo-EO":{u:"Esperanto",A:"Esperanto"},es:{u:"Espaol",A:"Spanish"},"es-AR":{u:"Espaol (Argentine)",A:"Spanish (Argentina)"},"es-419":{u:"Espaol (Latinoamrica)",A:"Spanish (Latin America)"},"es-CL":{u:"Espaol (Chile)",A:"Spanish (Chile)"},"es-CO":{u:"Espaol (Colombia)",A:"Spanish (Colombia)"},"es-EC":{u:"Espaol (Ecuador)",A:"Spanish (Ecuador)"},"es-ES":{u:"Espaol (Espaa)",A:"Spanish (Spain)"},"es-LA":{u:"Espaol (Latinoamrica)",A:"Spanish (Latin America)"},"es-NI":{u:"Espaol (Nicaragua)",A:"Spanish (Nicaragua)"},"es-MX":{u:"Espaol (Mxico)",A:"Spanish (Mexico)"},"es-US":{u:"Espaol (Estados Unidos)",A:"Spanish (United States)"},"es-VE":{u:"Espaol (Venezuela)",A:"Spanish (Venezuela)"},et:{u:"eesti keel",A:"Estonian"},"et-EE":{u:"Eesti (Estonia)",A:"Estonian (Estonia)"},eu:{u:"Euskara",A:"Basque"},"eu-ES":{u:"Euskara",A:"Basque"},fa:{u:"",A:"Persian"},"fa-IR":{u:"",A:"Persian"},"fb-LT":{u:"Leet Speak",A:"Leet"},ff:{u:"Fulah",A:"Fulah"},fi:{u:"Suomi",A:"Finnish"},"fi-FI":{u:"Suomi",A:"Finnish"},"fo-FO":{u:"Froyskt",A:"Faroese"},fr:{u:"Franais",A:"French"},"fr-CA":{u:"Franais (Canada)",A:"French (Canada)"},"fr-FR":{u:"Franais (France)",A:"French (France)"},"fr-BE":{u:"Franais (Belgique)",A:"French (Belgium)"},"fr-CH":{u:"Franais (Suisse)",A:"French (Switzerland)"},"fy-NL":{u:"Frysk",A:"Frisian (West)"},ga:{u:"Gaeilge",A:"Irish"},"ga-IE":{u:"Gaeilge (Gaelic)",A:"Irish (Gaelic)"},gl:{u:"Galego",A:"Galician"},"gl-ES":{u:"Galego",A:"Galician"},"gn-PY":{u:"Avae'",A:"Guarani"},"gu-IN":{u:"",A:"Gujarati"},"gx-GR":{u:" ",A:"Classical Greek"},he:{u:"",A:"Hebrew"},"he-IL":{u:"",A:"Hebrew"},hi:{u:"",A:"Hindi"},"hi-IN":{u:"",A:"Hindi"},hr:{u:"Hrvatski",A:"Croatian"},"hr-HR":{u:"Hrvatski",A:"Croatian"},hsb:{u:"Hornjoserbina",A:"Upper Sorbian"},ht:{u:"Kreyl",A:"Haitian Creole"},hu:{u:"Magyar",A:"Hungarian"},"hu-HU":{u:"Magyar",A:"Hungarian"},"hy-AM":{u:"",A:"Armenian"},id:{u:"Bahasa Indonesia",A:"Indonesian"},"id-ID":{u:"Bahasa Indonesia",A:"Indonesian"},is:{u:"slenska",A:"Icelandic"},"is-IS":{u:"slenska (Iceland)",A:"Icelandic (Iceland)"},it:{u:"Italiano",A:"Italian"},"it-IT":{u:"Italiano",A:"Italian"},ja:{u:"",A:"Japanese"},"ja-JP":{u:"",A:"Japanese"},"jv-ID":{u:"Basa Jawa",A:"Javanese"},"ka-GE":{u:"",A:"Georgian"},"kk-KZ":{u:"",A:"Kazakh"},km:{u:"",A:"Khmer"},"km-KH":{u:"",A:"Khmer"},kab:{u:"Taqbaylit",A:"Kabyle"},kn:{u:"",A:"Kannada"},"kn-IN":{u:" (India)",A:"Kannada (India)"},ko:{u:"",A:"Korean"},"ko-KR":{u:" ()",A:"Korean (Korea)"},ku:{u:"Kurd",A:"Kurdish"},"ku-TR":{u:"Kurd",A:"Kurdish"},la:{u:"Latin",A:"Latin"},"la-VA":{u:"Latin",A:"Latin"},lb:{u:"Ltzebuergesch",A:"Luxembourgish"},"li-NL":{u:"Lmbrgs",A:"Limburgish"},lt:{u:"Lietuvi",A:"Lithuanian"},"lt-LT":{u:"Lietuvi",A:"Lithuanian"},lv:{u:"Latvieu",A:"Latvian"},"lv-LV":{u:"Latvieu",A:"Latvian"},mai:{u:", ",A:"Maithili"},"mg-MG":{u:"Malagasy",A:"Malagasy"},mk:{u:"",A:"Macedonian"},"mk-MK":{u:" ()",A:"Macedonian (Macedonian)"},ml:{u:"",A:"Malayalam"},"ml-IN":{u:"",A:"Malayalam"},"mn-MN":{u:"",A:"Mongolian"},mr:{u:"",A:"Marathi"},"mr-IN":{u:"",A:"Marathi"},ms:{u:"Bahasa Melayu",A:"Malay"},"ms-MY":{u:"Bahasa Melayu",A:"Malay"},mt:{u:"Malti",A:"Maltese"},"mt-MT":{u:"Malti",A:"Maltese"},my:{u:"",A:"Burmese"},nb:{u:"Norsk (bokml)",A:"Norwegian (bokmal)"},"nb-NO":{u:"Norsk (bokml)",A:"Norwegian (bokmal)"},ne:{u:"",A:"Nepali"},"ne-NP":{u:"",A:"Nepali"},nl:{u:"Nederlands",A:"Dutch"},"nl-BE":{u:"Nederlands (Belgi)",A:"Dutch (Belgium)"},"nl-NL":{u:"Nederlands (Nederland)",A:"Dutch (Netherlands)"},"nn-NO":{u:"Norsk (nynorsk)",A:"Norwegian (nynorsk)"},no:{u:"Norsk",A:"Norwegian"},oc:{u:"Occitan",A:"Occitan"},"or-IN":{u:"",A:"Oriya"},pa:{u:"",A:"Punjabi"},"pa-IN":{u:" ( )",A:"Punjabi (India)"},pl:{u:"Polski",A:"Polish"},"pl-PL":{u:"Polski",A:"Polish"},"ps-AF":{u:"",A:"Pashto"},pt:{u:"Portugus",A:"Portuguese"},"pt-BR":{u:"Portugus (Brasil)",A:"Portuguese (Brazil)"},"pt-PT":{u:"Portugus (Portugal)",A:"Portuguese (Portugal)"},"qu-PE":{u:"Qhichwa",A:"Quechua"},"rm-CH":{u:"Rumantsch",A:"Romansh"},ro:{u:"Romn",A:"Romanian"},"ro-RO":{u:"Romn",A:"Romanian"},ru:{u:"",A:"Russian"},"ru-RU":{u:"",A:"Russian"},"sa-IN":{u:"",A:"Sanskrit"},"se-NO":{u:"Davvismegiella",A:"Northern Smi"},"si-LK":{u:"",A:"Sinhala (Sri Lanka)"},sk:{u:"Slovenina",A:"Slovak"},"sk-SK":{u:"Slovenina (Slovakia)",A:"Slovak (Slovakia)"},sl:{u:"Slovenina",A:"Slovenian"},"sl-SI":{u:"Slovenina",A:"Slovenian"},"so-SO":{u:"Soomaaliga",A:"Somali"},sq:{u:"Shqip",A:"Albanian"},"sq-AL":{u:"Shqip",A:"Albanian"},sr:{u:"",A:"Serbian"},"sr-RS":{u:" (Serbia)",A:"Serbian (Serbia)"},su:{u:"Basa Sunda",A:"Sundanese"},sv:{u:"Svenska",A:"Swedish"},"sv-SE":{u:"Svenska",A:"Swedish"},sw:{u:"Kiswahili",A:"Swahili"},"sw-KE":{u:"Kiswahili",A:"Swahili (Kenya)"},ta:{u:"",A:"Tamil"},"ta-IN":{u:"",A:"Tamil"},te:{u:"",A:"Telugu"},"te-IN":{u:"",A:"Telugu"},tg:{u:" ",A:"Tajik"},"tg-TJ":{u:"",A:"Tajik"},th:{u:"",A:"Thai"},"th-TH":{u:" ()",A:"Thai (Thailand)"},tl:{u:"Filipino",A:"Filipino"},"tl-PH":{u:"Filipino",A:"Filipino"},tlh:{u:"tlhIngan-Hol",A:"Klingon"},tr:{u:"Trke",A:"Turkish"},"tr-TR":{u:"Trke",A:"Turkish"},"tt-RU":{u:"",A:"Tatar"},uk:{u:"",A:"Ukrainian"},"uk-UA":{u:"",A:"Ukrainian"},ur:{u:"",A:"Urdu"},"ur-PK":{u:"",A:"Urdu"},uz:{u:"O'zbek",A:"Uzbek"},"uz-UZ":{u:"O'zbek",A:"Uzbek"},vi:{u:"Ting Vit",A:"Vietnamese"},"vi-VN":{u:"Ting Vit",A:"Vietnamese"},"xh-ZA":{u:"isiXhosa",A:"Xhosa"},yi:{u:"",A:"Yiddish"},"yi-DE":{u:" (German)",A:"Yiddish (German)"},zh:{u:"",A:"Chinese"},"zh-HANS":{u:"",A:"Chinese Simplified"},"zh-HANT":{u:"",A:"Chinese Traditional"},"zh-CN":{u:"",A:"Chinese Simplified (China)"},"zh-HK":{u:"",A:"Chinese Traditional (Hong Kong)"},"zh-SG":{u:"",A:"Chinese Simplified (Singapore)"},"zh-TW":{u:"",A:"Chinese Traditional (Taiwan)"},"zu-ZA":{u:"isiZulu",A:"Zulu"}},ny=c(Object.keys(ty)),ry=ny.next();!ry.done;ry=ny.next()){var iy=ry.value;ty[iy.toLowerCase()]=ty[iy]}function ay(e,t){var n=this;this.parent=e,this.controls=t,this.eventManager=new Hr,this.localization=this.controls.ua,this.player=this.controls.cc(),this.video=this.controls.zb(),this.adManager=this.player.sd(),this.ad=t.getAd(),this.eventManager.o(this.adManager,"ad-started",(function(e){n.ad=e.ad})),this.eventManager.o(this.adManager,"ad-stopped",(function(){n.ad=null}))}function oy(e){return sy(e,"shaka-back-to-overflow-button")}function sy(e,t){return(e=e.getElementsByClassName(t)).length?e[0]:null}function uy(e){e&&(e=sy(e,"shaka-chosen-item"))&&e.parentElement.focus()}function ly(){var e=yu("i");return e.classList.add("material-icons-round"),e.classList.add("shaka-chosen-item"),e.textContent="done",e.ariaHidden="true",e}function cy(e,t){e&&(t?e.classList.remove("shaka-hidden"):e.classList.add("shaka-hidden"))}function dy(e,t){var n=Math.floor(e/3600),r=Math.floor(e/60%60);return 10>(e=Math.floor(e%60))&&(e="0"+e),e=r+":"+e,t&&(10>r&&(e="0"+e),e=n+":"+e),e}function hy(e,t){ay.call(this,e,t);var n=this;this.i=yu("div"),this.i.classList.add("shaka-ad-counter"),this.parent.appendChild(this.i),this.h=yu("span"),this.h.classList.add("shaka-ad-counter-span"),this.i.appendChild(this.h),this.g=new Rt((function(){var e=Math.round(n.ad.getRemainingTime()),t=n.ad.getDuration();-1!=e&&-1!=t&&(0<e?(e=dy(t-e,!1)+" / "+dy(t,!1),1<n.ad.getSequenceLength()?n.h.textContent=e:(t=n.localization.resolve("AD_TIME"),n.h.textContent=t.replace("[AD_TIME]",e))):(n.g.stop(),n.h.textContent=""))})),this.eventManager.o(this.localization,"locale-updated",(function(){})),this.eventManager.o(this.localization,"locale-changed",(function(){})),this.eventManager.o(this.adManager,"ad-started",(function(){n.g.za(),n.g.ea(.5)})),this.eventManager.o(this.adManager,"ad-stopped",(function(){n.g.stop(),n.h.textContent=""})),this.ad&&(this.g.za(),this.g.ea(.5))}function fy(e,t){ay.call(this,e,t);var n=this;this.g=yu("div"),this.g.classList.add("shaka-ad-position"),cy(this.g,!1),this.parent.appendChild(this.g),this.h=yu("span"),this.h.classList.add("shaka-ad-position-span"),this.g.appendChild(this.h),this.eventManager.o(this.localization,"locale-updated",(function(){n.ad&&py(n)})),this.eventManager.o(this.localization,"locale-changed",(function(){n.ad&&py(n)})),this.eventManager.o(this.adManager,"ad-started",(function(){py(n)})),this.eventManager.o(this.adManager,"ad-stopped",(function(){n.h.textContent="",cy(n.g,!1)})),this.ad&&py(this)}function py(e){var t=e.ad.getSequenceLength();if(1<t){var n=e.ad.getPositionInSequence();e.h.textContent=e.localization.resolve("AD_PROGRESS").replace("[AD_ON]",String(n)).replace("[NUM_ADS]",String(t)),cy(e.g,!0)}}function gy(e,t){ay.call(this,e,t);var n=this;this.button=bu(),this.parent.appendChild(this.button),this.eventManager.o(this.localization,"locale-updated",(function(){n.g()})),this.eventManager.o(this.localization,"locale-changed",(function(){n.g()})),this.eventManager.o(this.video,"play",(function(){n.g(),n.h()})),this.eventManager.o(this.video,"pause",(function(){n.g(),n.h()})),this.eventManager.o(this.video,"seeking",(function(){n.g(),n.h()})),this.eventManager.o(this.adManager,"ad-paused",(function(){n.g(),n.h()})),this.eventManager.o(this.adManager,"ad-resumed",(function(){n.g(),n.h()})),this.eventManager.o(this.adManager,"ad-started",(function(){n.g(),n.h()})),this.eventManager.o(this.button,"click",(function(){n.ad&&n.ad.isLinear()?Dy(n.controls):Ly(n.controls)})),this.ad&&(this.g(),this.h())}function my(e,t){gy.call(this,e,t),this.button.classList.add("shaka-play-button"),this.button.classList.add("shaka-no-propagation"),this.h(),this.g()}function vy(t,n){ay.call(this,t,n);var r=this;this.j=this.controls.i,this.h=this.controls.g,this.i=[],this.g=yu("div"),this.g.classList.add("shaka-no-propagation"),this.g.classList.add("shaka-context-menu"),this.g.classList.add("shaka-hidden"),this.h.appendChild(this.g),this.eventManager.o(this.h,"contextmenu",(function(e){if(r.g.classList.contains("shaka-hidden")){e.preventDefault();var t=r.h.getBoundingClientRect();r.g.style.left=e.clientX-t.left+"px",r.g.style.top=e.clientY-t.top+"px",cy(r.g,!0)}else cy(r.g,!1)})),this.eventManager.o(e,"click",(function(){cy(r.g,!1)})),function(e){for(var t=c(e.j.contextMenuElements),n=t.next();!n.done;n=t.next()){n=n.value;var r=by.get(n);r?e.i.push(r.create(e.g,e.controls)):X("Unrecognized context menu element:",n)}}(this)}function yy(e,t){by.set(e,t)}ay.prototype.release=function(){this.eventManager.release(),this.ad=this.adManager=this.video=this.player=this.localization=this.eventManager=this.controls=this.parent=null},z("shaka.ui.Element",ay),ay.prototype.release=ay.prototype.release,v(hy,ay),hy.prototype.release=function(){this.g.stop(),this.g=null,ay.prototype.release.call(this)},z("shaka.ui.AdCounter",hy),v(fy,ay),z("shaka.ui.AdPosition",fy),v(gy,ay),gy.prototype.isPaused=function(){if(this.ad&&this.ad.isLinear())var e=this.ad.isPaused();else e=(e=this.controls).s.paused&&!e.X;return e},gy.prototype.g=function(){},gy.prototype.h=function(){},z("shaka.ui.PlayButton",gy),v(my,gy),my.prototype.h=function(){this.isPaused()?this.button.setAttribute("icon","play"):this.button.setAttribute("icon","pause")},my.prototype.g=function(){var e=this.isPaused()?"PLAY":"PAUSE";this.button.ariaLabel=this.localization.resolve(e)},z("shaka.ui.BigPlayButton",my),v(vy,ay),vy.prototype.release=function(){this.h=null;for(var e=c(this.i),t=e.next();!t.done;t=e.next())t.value.release();this.i=[],ay.prototype.release.call(this)},z("shaka.ui.ContextMenu",vy),vy.registerElement=yy;var by=new Map;function xy(e,t,n,r){ay.call(this,e,t);var i=this;this.container=yu("div"),this.container.classList.add("shaka-range-container"),this.container.classList.add.apply(this.container.classList,d(n)),this.g=!1,this.bar=document.createElement("input"),this.l=new Rt((function(){i.onChangeEnd(),i.g=!1})),this.bar.classList.add("shaka-range-element"),this.bar.classList.add.apply(this.bar.classList,d(r)),this.bar.type="range",this.bar.step="any",this.bar.min="0",this.bar.max="1",this.bar.value="0",this.container.appendChild(this.bar),this.parent.appendChild(this.container),this.eventManager.o(this.bar,"mousedown",(function(){i.controls.Mb()&&(i.g=!0,i.onChangeStart())})),this.eventManager.o(this.bar,"touchstart",(function(e){i.controls.Mb()&&(i.g=!0,wy(i,e),i.onChangeStart())})),this.eventManager.o(this.bar,"input",(function(){i.onChange()})),this.eventManager.o(this.bar,"touchmove",(function(e){i.g&&(wy(i,e),i.onChange())})),this.eventManager.o(this.bar,"touchend",(function(e){i.g&&(i.g=!1,wy(i,e),i.onChangeEnd())})),this.eventManager.o(this.bar,"mouseup",(function(){i.g&&(i.g=!1,i.onChangeEnd())}))}function wy(e,t){t.preventDefault();var n=t.changedTouches[0],r=e.bar.getBoundingClientRect();t=parseFloat(e.bar.min);var i=parseFloat(e.bar.max);(n=t+(i-t)/r.width*(n.clientX-r.left))<t?n=t:n>i&&(n=i),e.bar.value=n}function Ty(e,t){xy.call(this,e,t,["shaka-seek-bar-container"],["shaka-seek-bar","shaka-no-propagation","shaka-show-controls-on-mouse-over"]);var n=this;this.j=yu("div"),this.j.classList.add("shaka-ad-markers"),this.container.insertBefore(this.j,this.container.childNodes[0]),this.m=this.controls.i,this.h=new Rt((function(){n.video.currentTime=n.getValue()})),this.s=new Rt((function(){Ay(n)})),this.B=!1,this.i=[],this.eventManager.o(this.localization,"locale-updated",(function(){return Iy(n)})),this.eventManager.o(this.localization,"locale-changed",(function(){return Iy(n)})),this.eventManager.o(this.adManager,"ad-started",(function(){Ey(n)||cy(n.container,!1)})),this.eventManager.o(this.adManager,"ad-stopped",(function(){Ey(n)&&cy(n.container,!0)})),this.eventManager.o(this.adManager,"ad-cue-points-changed",(function(e){n.i=e.cuepoints,Sy(n)})),this.eventManager.o(this.player,"unloading",(function(){n.i=[],Sy(n)})),this.setValue(this.video.currentTime),this.update(),Iy(this),this.ad&&cy(this.container,!1)}function Ay(e){if(e.i.length){for(var t=e.player.Ja(),n=t.end-t.start,r=["to right"],i=[],a=e.m.seekBarColors.adBreaks,o=!1,s=c(e.i),u=s.next();!u.done;u=s.next())if(-1!=(u=u.value).start||u.end||(o=!0),u.start>=t.start&&u.start<t.end&&!(u.end&&u.end>t.end)){var l=(u.start-t.start)/n||0,d=l+.01;u.end&&(d=(u.end-t.start)/n||0),i.push({start:l,end:d})}for(u=(t=c(i)).next();!u.done;u=t.next())n=u.value,r.push("transparent "+100*n.start+"%"),r.push(a+" "+100*n.start+"%"),r.push(a+" "+100*n.end+"%"),r.push("transparent "+100*n.end+"%");o&&(r.push("transparent 99%"),r.push(a+" 99%")),e.j.style.background="linear-gradient("+r.join(",")+")"}else e.j.style.background="transparent"}function Sy(e){Ay(e);var t=e.player.Ja();t=t.end-t.start,e.player.T()&&5<t&&e.s.ea(1)}function Ey(e){var t=e.player.Ja();return t=t.end-t.start,!(e.player.T()&&5>t)&&(null==e.ad||!e.ad.isLinear())}function Iy(e){e.bar.ariaLabel=e.localization.resolve("SEEK")}function ky(){}function Cy(t,n,r,i){ee.call(this);var a=this;this.P=!0,this.i=i,this.C=new qc(r,t,this.i.castReceiverAppId,this.i.castAndroidReceiverCompatible),this.Za=!0,this.s=this.C.zb(),this.B=r,this.F=this.C.cc(),this.sa=t,this.j=n,this.Xa=this.F.sd(),this.l=this.m=null,this.X=!1,this.G=[],this.vb=[],this.gb=!1,this.Z=new Rt((function(){a.j.style.cursor="none",a.gb=!1,Oy(a)})),this.aa=new Rt((function(){a.g.removeAttribute("shown"),a.I.R(2)})),this.I=new Rt((function(){for(var e=c(a.G),t=e.next();!t.done;t=e.next())cy(t.value,!1)})),this.La=new Rt((function(){a.Mb()&&zy(a)})),this.J=null,this.H=[],this.ua=function(){var e=new ze("en");return e.ba("ar",new Map([["AD_DURATION"," "],["AD_PROGRESS"," [AD_ON]  [NUM_ADS]"],["AD_TIME",": [AD_TIME]"],["AUTO_QUALITY",""],["BACK",""],["CAPTIONS"," "],["CAST","..."],["ENTER_LOOP_MODE","  "],["ENTER_PICTURE_IN_PICTURE",'   "  "'],["EXIT_FULL_SCREEN","   "],["EXIT_LOOP_MODE","   "],["EXIT_PICTURE_IN_PICTURE",'   "  "'],["FAST_FORWARD"," "],["FULL_SCREEN"," "],["LANGUAGE",""],["LIVE",""],["LOOP",""],["MORE_SETTINGS","  "],["MULTIPLE_LANGUAGES"," "],["MUTE"," "],["NOT_APPLICABLE"," "],["OFF",""],["ON",""],["PAUSE"," "],["PICTURE_IN_PICTURE","  "],["PLAY",""],["PLAYBACK_RATE"," "],["RESOLUTION"," "],["REWIND",""],["SEEK"," "],["SKIP_AD"," "],["SKIP_TO_LIVE","   "],["UNDETERMINED_LANGUAGE"," "],["UNMUTE"," "],["UNRECOGNIZED_LANGUAGE"," "],["VOLUME"," "]])),e.ba("de",new Map([["AD_DURATION","Dauer der Werbeanzeige"],["AD_PROGRESS","Werbung[AD_ON] von[NUM_ADS]"],["AD_TIME","Werbeanzeige: [AD_TIME]"],["AUTO_QUALITY","Automatisch"],["BACK","Zurck"],["CAPTIONS","Untertitel"],["CAST","Streamen..."],["ENTER_LOOP_MODE","In Endlosschleife spielen"],["ENTER_PICTURE_IN_PICTURE","Bild-im-Bild-Modus aktivieren"],["EXIT_FULL_SCREEN","Vollbildmodus beenden"],["EXIT_LOOP_MODE","Endlosschleife stoppen"],["EXIT_PICTURE_IN_PICTURE","Bild-im-Bild-Modus beenden"],["FAST_FORWARD","Vorspulen"],["FULL_SCREEN","Vollbildmodus"],["LANGUAGE","Sprache"],["LIVE","Live"],["LOOP","Schleife"],["MORE_SETTINGS","Weitere Einstellungen"],["MULTIPLE_LANGUAGES","Mehrere Sprachen"],["MUTE","Stummschalten"],["NOT_APPLICABLE","Nicht zutreffend"],["OFF","Aus"],["ON","Ein"],["PAUSE","Pause"],["PICTURE_IN_PICTURE","Bild im Bild"],["PLAY","Wiedergabe"],["PLAYBACK_RATE","Geschwindigkeit"],["RESOLUTION","Auflsung"],["REWIND","Zurckspulen"],["SEEK","Suche"],["SKIP_AD","berspringen"],["SKIP_TO_LIVE","Zum Live-Videostream wechseln"],["UNDETERMINED_LANGUAGE","Unbestimmt"],["UNMUTE","Stummschaltung aufheben"],["UNRECOGNIZED_LANGUAGE","Unbekannt"],["VOLUME","Lautstrke"]])),e.ba("en",new Map([["AD_DURATION","Ad duration"],["AD_PROGRESS","Ad [AD_ON] of [NUM_ADS]"],["AD_TIME","Ad: [AD_TIME]"],["AIRPLAY","AirPlay"],["AUTO_QUALITY","Auto"],["BACK","Back"],["CAPTIONS","Captions"],["CAST","Cast..."],["ENTER_LOOP_MODE","Loop the current video"],["ENTER_PICTURE_IN_PICTURE","Enter Picture-in-Picture"],["EXIT_FULL_SCREEN","Exit full screen"],["EXIT_LOOP_MODE","Stop looping the current video"],["EXIT_PICTURE_IN_PICTURE","Exit Picture-in-Picture"],["FAST_FORWARD","Fast-forward"],["FULL_SCREEN","Full screen"],["LANGUAGE","Language"],["LIVE","Live"],["LOOP","Loop"],["MORE_SETTINGS","More settings"],["MULTIPLE_LANGUAGES","Multiple languages"],["MUTE","Mute"],["NOT_APPLICABLE","Not applicable"],["OFF","Off"],["ON","On"],["PAUSE","Pause"],["PICTURE_IN_PICTURE","Picture-in-Picture"],["PLAY","Play"],["PLAYBACK_RATE","Playback speed"],["QUALITY","Quality"],["REPLAY","Replay"],["RESOLUTION","Resolution"],["REWIND","Rewind"],["SEEK","Seek"],["SKIP_AD","Skip Ad"],["SKIP_TO_LIVE","Skip ahead to live"],["STATISTICS","Statistics"],["SUBTITLE_FORCED","Forced"],["UNDETERMINED_LANGUAGE","Undetermined"],["UNMUTE","Unmute"],["UNRECOGNIZED_LANGUAGE","Unrecognized"],["VOLUME","Volume"]])),e.ba("en-GB",new Map([["AD_DURATION","Ad duration"],["AD_PROGRESS","Ad [AD_ON] of [NUM_ADS]"],["AD_TIME","Ad: [AD_TIME]"],["AUTO_QUALITY","Auto"],["BACK","Back"],["CAPTIONS","Captions"],["CAST","Cast..."],["ENTER_LOOP_MODE","Loop the current video"],["ENTER_PICTURE_IN_PICTURE","Enter picture-in-picture"],["EXIT_FULL_SCREEN","Exit full screen"],["EXIT_LOOP_MODE","Stop looping the current video"],["EXIT_PICTURE_IN_PICTURE","Exit picture-in-picture"],["FAST_FORWARD","Fast-forward"],["FULL_SCREEN","Full screen"],["LANGUAGE","Language"],["LIVE","Live"],["LOOP","Loop"],["MORE_SETTINGS","More settings"],["MULTIPLE_LANGUAGES","Multiple languages"],["MUTE","Mute"],["NOT_APPLICABLE","Not applicable"],["OFF","Off"],["ON","On"],["PAUSE","Pause"],["PICTURE_IN_PICTURE","Picture-in-picture"],["PLAY","Play"],["PLAYBACK_RATE","Playback speed"],["RESOLUTION","Resolution"],["REWIND","Rewind"],["SEEK","Seek"],["SKIP_AD","Skip ad"],["SKIP_TO_LIVE","Skip ahead to live"],["UNDETERMINED_LANGUAGE","Undetermined"],["UNMUTE","Unmute"],["UNRECOGNIZED_LANGUAGE","Unrecognised"],["VOLUME","volume"]])),e.ba("es",new Map([["AD_DURATION","Duracin del anuncio"],["AD_PROGRESS","Anuncio [AD_ON] de [NUM_ADS]"],["AD_TIME","Anuncio: [AD_TIME]"],["AUTO_QUALITY","Automtico"],["BACK","Atrs"],["CAPTIONS","Subttulos"],["CAST","Enviar..."],["ENTER_LOOP_MODE","Reproducir en bucle el vdeo actual"],["ENTER_PICTURE_IN_PICTURE","Activar el modo imagen en imagen"],["EXIT_FULL_SCREEN","Salir del modo de pantalla completa"],["EXIT_LOOP_MODE","Dejar de reproducir en bucle el vdeo actual"],["EXIT_PICTURE_IN_PICTURE","Salir del modo imagen en imagen"],["FAST_FORWARD","Avanzar rpidamente"],["FULL_SCREEN","Pantalla completa"],["LANGUAGE","Idioma"],["LIVE","En directo"],["LOOP","Reproducir en bucle"],["MORE_SETTINGS","Ms ajustes"],["MULTIPLE_LANGUAGES","Varios idiomas"],["MUTE","Silenciar"],["NOT_APPLICABLE","No aplicable"],["OFF","Desactivado"],["ON","Activado"],["PAUSE","Pausar"],["PICTURE_IN_PICTURE","Imagen en imagen"],["PLAY","Reproducir"],["PLAYBACK_RATE","Velocidad de reproduccin"],["RESOLUTION","Resolucin"],["REWIND","Rebobinar"],["SEEK","Buscar"],["SKIP_AD","Saltar anuncio"],["SKIP_TO_LIVE","Ir al vdeo en directo"],["SUBTITLE_FORCED","Forzado"],["UNDETERMINED_LANGUAGE","Sin especificar"],["UNMUTE","Activar sonido"],["UNRECOGNIZED_LANGUAGE","No reconocida"],["VOLUME","Volumen"]])),e.ba("es-419",new Map([["AD_DURATION","Duracin del anuncio"],["AD_PROGRESS","Anuncio [AD_ON] de [NUM_ADS]"],["AD_TIME","Anuncio: [AD_TIME]"],["AUTO_QUALITY","Automtico"],["BACK","Atrs"],["CAPTIONS","Subttulos"],["CAST","Transmitir..."],["ENTER_LOOP_MODE","Repetir indefinidamente el video actual"],["ENTER_PICTURE_IN_PICTURE","Ingresar al modo de pantalla en pantalla"],["EXIT_FULL_SCREEN","Salir de pantalla completa"],["EXIT_LOOP_MODE","Detener la repeticin indefinida del video actual"],["EXIT_PICTURE_IN_PICTURE","Salir del modo de pantalla en pantalla"],["FAST_FORWARD","Avanzar"],["FULL_SCREEN","Pantalla completa"],["LANGUAGE","Idioma"],["LIVE","En directo"],["LOOP","Repetir indefinidamente"],["MORE_SETTINGS","Ms opciones de configuracin"],["MULTIPLE_LANGUAGES","Varios idiomas"],["MUTE","Silenciar"],["NOT_APPLICABLE","No aplicable"],["OFF","Desactivado"],["ON","Activado"],["PAUSE","Detener"],["PICTURE_IN_PICTURE","Pantalla en pantalla"],["PLAY","Reproducir"],["PLAYBACK_RATE","Velocidad de reproduccin"],["RESOLUTION","Resolucin"],["REWIND","Retroceder"],["SEEK","Buscar"],["SKIP_AD","Omitir anuncio"],["SKIP_TO_LIVE","Adelantar hasta la transmisin en vivo"],["SUBTITLE_FORCED","Forzado"],["UNDETERMINED_LANGUAGE","Sin especificar"],["UNMUTE","Dejar de silenciar"],["UNRECOGNIZED_LANGUAGE","No reconocida"],["VOLUME","Volumen"]])),e.ba("fr",new Map([["AD_DURATION","Dure de l'annonce"],["AD_PROGRESS","Annonce[AD_ON] sur[NUM_ADS]"],["AD_TIME","Annonce: [AD_TIME]"],["AUTO_QUALITY","Automatique"],["BACK","Retour"],["CAPTIONS","Sous-titres"],["CAST","Caster"],["ENTER_LOOP_MODE","Lire en boucle la vido en cours"],["ENTER_PICTURE_IN_PICTURE","Utiliser le mode Picture-in-Picture"],["EXIT_FULL_SCREEN","Quitter le mode plein cran"],["EXIT_LOOP_MODE","Arrter la lecture en boucle de la vido en cours"],["EXIT_PICTURE_IN_PICTURE","Quitter le modePIP (Picture-in-picture)"],["FAST_FORWARD","Avance rapide"],["FULL_SCREEN","Plein cran"],["LANGUAGE","Langue"],["LIVE","En direct"],["LOOP","Rpter"],["MORE_SETTINGS","Plus de paramtres"],["MULTIPLE_LANGUAGES","Plusieurs langues"],["MUTE","Couper le son"],["NOT_APPLICABLE","Non applicable"],["OFF","Dsactive"],["ON","Active"],["PAUSE","Pause"],["PICTURE_IN_PICTURE","Picture-in-Picture"],["PLAY","Visionner"],["PLAYBACK_RATE","Vitesse de lecture"],["RESOLUTION","Rsolution"],["REWIND","Retour arrire"],["SEEK","Chercher"],["SKIP_AD","Passer l'annonce"],["SKIP_TO_LIVE","Accder  la partie la plus rcente du direct"],["UNDETERMINED_LANGUAGE","Langue indtermine"],["UNMUTE","Ractiver le son"],["UNRECOGNIZED_LANGUAGE","Non reconnu"],["VOLUME","Volume"]])),e.ba("it",new Map([["AD_DURATION","Durata dell'annuncio"],["AD_PROGRESS","Annuncio [AD_ON] di [NUM_ADS]"],["AD_TIME","Annuncio: [AD_TIME]"],["AUTO_QUALITY","Automatica"],["BACK","Indietro"],["CAPTIONS","Sottotitoli"],["CAST","Trasmetti..."],["ENTER_LOOP_MODE","Riproduci in loop il video corrente"],["ENTER_PICTURE_IN_PICTURE","Attiva Picture in picture"],["EXIT_FULL_SCREEN","Esci da schermo intero"],["EXIT_LOOP_MODE","Interrompi riproduzione in loop del video corrente"],["EXIT_PICTURE_IN_PICTURE","Esci da Picture in picture"],["FAST_FORWARD","Avanti veloce"],["FULL_SCREEN","Schermo intero"],["LANGUAGE","Lingua"],["LIVE","Dal vivo"],["LOOP","Riproduci in loop"],["MORE_SETTINGS","Altre impostazioni"],["MULTIPLE_LANGUAGES","Pi lingue"],["MUTE","Disattiva audio"],["NOT_APPLICABLE","Non applicabile"],["OFF","Disattivo"],["ON","Attivo"],["PAUSE","Metti in pausa"],["PICTURE_IN_PICTURE","Picture in picture"],["PLAY","Riproduci"],["PLAYBACK_RATE","Velocit di riproduzione"],["RESOLUTION","Risoluzione"],["REWIND","Riavvolgi"],["SEEK","Cerca"],["SKIP_AD","Salta annuncio"],["SKIP_TO_LIVE","Passa alla trasmissione dal vivo"],["UNDETERMINED_LANGUAGE","Indeterminata"],["UNMUTE","Riattiva audio"],["UNRECOGNIZED_LANGUAGE","Non riconosciuto"],["VOLUME","Volume"]])),e.ba("ja",new Map([["AD_DURATION",""],["AD_PROGRESS","[AD_ON]  [NUM_ADS] "],["AD_TIME",": [AD_TIME]"],["AUTO_QUALITY",""],["BACK",""],["CAPTIONS",""],["CAST","..."],["ENTER_LOOP_MODE",""],["ENTER_PICTURE_IN_PICTURE","  "],["EXIT_FULL_SCREEN",""],["EXIT_LOOP_MODE",""],["EXIT_PICTURE_IN_PICTURE","  "],["FAST_FORWARD",""],["FULL_SCREEN",""],["LANGUAGE",""],["LIVE",""],["LOOP",""],["MORE_SETTINGS",""],["MULTIPLE_LANGUAGES",""],["MUTE",""],["NOT_APPLICABLE",""],["OFF",""],["ON",""],["PAUSE",""],["PICTURE_IN_PICTURE","  "],["PLAY",""],["PLAYBACK_RATE",""],["RESOLUTION",""],["REWIND",""],["SEEK",""],["SKIP_AD",""],["SKIP_TO_LIVE",""],["UNDETERMINED_LANGUAGE",""],["UNMUTE",""],["UNRECOGNIZED_LANGUAGE",""],["VOLUME",""]])),e.ba("ko",new Map([["AD_DURATION"," "],["AD_PROGRESS"," [AD_ON]/[NUM_ADS]"],["AD_TIME",": [AD_TIME]"],["AUTO_QUALITY",""],["BACK",""],["CAPTIONS",""],["CAST","..."],["ENTER_LOOP_MODE","   "],["ENTER_PICTURE_IN_PICTURE","PIP  "],["EXIT_FULL_SCREEN"," "],["EXIT_LOOP_MODE","    "],["EXIT_PICTURE_IN_PICTURE","PIP  "],["FAST_FORWARD"," "],["FULL_SCREEN",""],["LANGUAGE",""],["LIVE",""],["LOOP"," "],["MORE_SETTINGS"," "],["MULTIPLE_LANGUAGES"," "],["MUTE",""],["NOT_APPLICABLE","  "],["OFF"," "],["ON",""],["PAUSE",""],["PICTURE_IN_PICTURE","PIP "],["PLAY",""],["PLAYBACK_RATE"," "],["RESOLUTION",""],["REWIND",""],["SEEK",""],["SKIP_AD"," "],["SKIP_TO_LIVE","  "],["UNDETERMINED_LANGUAGE",""],["UNMUTE"," "],["UNRECOGNIZED_LANGUAGE","  "],["VOLUME",""]])),e.ba("nl",new Map([["AD_DURATION","Advertentieduur"],["AD_PROGRESS","Advertentie [AD_ON] van [NUM_ADS]"],["AD_TIME","Advertentie: [AD_TIME]"],["AUTO_QUALITY","Automatisch"],["BACK","Terug"],["CAPTIONS","Ondertiteling"],["CAST","Casten..."],["ENTER_LOOP_MODE","De huidige video lussen"],["ENTER_PICTURE_IN_PICTURE","Scherm-in-scherm openen"],["EXIT_FULL_SCREEN","Volledig scherm sluiten"],["EXIT_LOOP_MODE","De huidige video niet meer lussen"],["EXIT_PICTURE_IN_PICTURE","Scherm-in-scherm afsluiten"],["FAST_FORWARD","Vooruitspoelen"],["FULL_SCREEN","Volledig scherm"],["LANGUAGE","Taal"],["LIVE","Live"],["LOOP","Lussen"],["MORE_SETTINGS","Meer instellingen"],["MULTIPLE_LANGUAGES","Meerdere talen"],["MUTE","Dempen"],["NOT_APPLICABLE","Niet van toepassing"],["OFF","Uit"],["ON","Aan"],["PAUSE","Onderbreken"],["PICTURE_IN_PICTURE","Scherm-in-scherm"],["PLAY","Afspelen"],["PLAYBACK_RATE","Afspeelsnelheid"],["RESOLUTION","Resolutie"],["REWIND","Terugspoelen"],["SEEK","Zoeken"],["SKIP_AD","Advertentie overslaan"],["SKIP_TO_LIVE","Doorgaan naar live"],["UNDETERMINED_LANGUAGE","Onbepaald"],["UNMUTE","Dempen opheffen"],["UNRECOGNIZED_LANGUAGE","Onbekend"],["VOLUME","Volume"]])),e.ba("pl",new Map([["AD_DURATION","Czas trwania reklamy"],["AD_PROGRESS","Reklama[AD_ON] z[NUM_ADS]"],["AD_TIME","Reklama: [AD_TIME]"],["AUTO_QUALITY","Automatycznie"],["BACK","Wstecz"],["CAPTIONS","Napisy"],["CAST","Przesyaj..."],["ENTER_LOOP_MODE","Odtwarzaj biecy film wptli"],["ENTER_PICTURE_IN_PICTURE","Wcz tryb obrazu wobrazie"],["EXIT_FULL_SCREEN","Zamknij peny ekran"],["EXIT_LOOP_MODE","Wycz odtwarzanie biecego filmu wptli"],["EXIT_PICTURE_IN_PICTURE","Wycz tryb obrazu wobrazie"],["FAST_FORWARD","Przewi do przodu"],["FULL_SCREEN","Peny ekran"],["LANGUAGE","Jzyk"],["LIVE","Na ywo"],["LOOP","Odtwarzaj wptli"],["MORE_SETTINGS","Wicej ustawie"],["MULTIPLE_LANGUAGES","Wiele jzykw"],["MUTE","Wycisz"],["NOT_APPLICABLE","Nie dotyczy"],["OFF","Wyczone"],["ON","Wczone"],["PAUSE","Wstrzymaj"],["PICTURE_IN_PICTURE","Obraz wobrazie"],["PLAY","Odtwrz"],["PLAYBACK_RATE","Szybko odtwarzania"],["RESOLUTION","Rozdzielczo"],["REWIND","Przewi do tyu"],["SEEK","Szukaj"],["SKIP_AD","Pomi reklam"],["SKIP_TO_LIVE","Przejd do transmisji na ywo"],["UNDETERMINED_LANGUAGE","Nie okrelono"],["UNMUTE","Wycz wyciszenie"],["UNRECOGNIZED_LANGUAGE","Nierozpoznany"],["VOLUME","Gono"]])),e.ba("pt-BR",new Map([["AD_DURATION","Durao do anncio"],["AD_PROGRESS","Anncio [AD_ON] de [NUM_ADS]"],["AD_TIME","Anncio: [AD_TIME]"],["AUTO_QUALITY","Automtica"],["BACK","Voltar"],["CAPTIONS","Legendas"],["CAST","Transmitir..."],["ENTER_LOOP_MODE","Repetir o vdeo atual"],["ENTER_PICTURE_IN_PICTURE","Entrar no modo picture-in-picture"],["EXIT_FULL_SCREEN","Sair do modo tela cheia"],["EXIT_LOOP_MODE","Parar repetio do vdeo atual"],["EXIT_PICTURE_IN_PICTURE","Sair de picture-in-picture"],["FAST_FORWARD","Avanar"],["FULL_SCREEN","Tela cheia"],["LANGUAGE","Idioma"],["LIVE","Ao vivo"],["LOOP","Repetir"],["MORE_SETTINGS","Mais definies"],["MULTIPLE_LANGUAGES","Vrios idiomas"],["MUTE","Desativar som"],["NOT_APPLICABLE","No relevante"],["OFF","Desativado"],["ON","Ativado"],["PAUSE","Pausar"],["PICTURE_IN_PICTURE","Picture-in-picture"],["PLAY","Reproduzir"],["PLAYBACK_RATE","Velocidade da reproduo"],["RESOLUTION","Resoluo"],["REWIND","Retroceder"],["SEEK","Procurar"],["SKIP_AD","Pular anncio"],["SKIP_TO_LIVE","Pular para transmisso ao vivo"],["UNDETERMINED_LANGUAGE","Indeterminado"],["UNMUTE","Ativar som"],["UNRECOGNIZED_LANGUAGE","No reconhecido"],["VOLUME","Volume"]])),e.ba("ru",new Map([["AD_DURATION"," "],["AD_PROGRESS"," [AD_ON]  [NUM_ADS]"],["AD_TIME",": [AD_TIME]"],["AUTO_QUALITY",""],["BACK",""],["CAPTIONS",""],["CAST","..."],["ENTER_LOOP_MODE","  "],["ENTER_PICTURE_IN_PICTURE",'   "  "'],["EXIT_FULL_SCREEN"," "],["EXIT_LOOP_MODE","   "],["EXIT_PICTURE_IN_PICTURE",'   "  "'],["FAST_FORWARD"," "],["FULL_SCREEN"," "],["LANGUAGE",""],["LIVE"," "],["LOOP",""],["MORE_SETTINGS"," "],["MULTIPLE_LANGUAGES"," "],["MUTE"," "],["NOT_APPLICABLE",""],["OFF","."],["ON","."],["PAUSE",""],["PICTURE_IN_PICTURE","  "],["PLAY",""],["PLAYBACK_RATE"," "],["RESOLUTION",""],["REWIND"," "],["SEEK",""],["SKIP_AD",""],["SKIP_TO_LIVE","     "],["UNDETERMINED_LANGUAGE"," "],["UNMUTE"," "],["UNRECOGNIZED_LANGUAGE"," "],["VOLUME",""]])),e.ba("th",new Map([["AD_DURATION",""],["AD_PROGRESS"," [AD_ON]  [NUM_ADS] "],["AD_TIME",": [AD_TIME]"],["AUTO_QUALITY",""],["BACK",""],["CAPTIONS",""],["CAST","..."],["ENTER_LOOP_MODE",""],["ENTER_PICTURE_IN_PICTURE",""],["EXIT_FULL_SCREEN",""],["EXIT_LOOP_MODE",""],["EXIT_PICTURE_IN_PICTURE",""],["FAST_FORWARD",""],["FULL_SCREEN",""],["LANGUAGE",""],["LIVE",""],["LOOP",""],["MORE_SETTINGS",""],["MULTIPLE_LANGUAGES",""],["MUTE",""],["NOT_APPLICABLE",""],["OFF",""],["ON",""],["PAUSE",""],["PICTURE_IN_PICTURE",""],["PLAY",""],["PLAYBACK_RATE",""],["RESOLUTION",""],["REWIND",""],["SEEK",""],["SKIP_AD",""],["SKIP_TO_LIVE",""],["UNDETERMINED_LANGUAGE",""],["UNMUTE",""],["UNRECOGNIZED_LANGUAGE",""],["VOLUME",""]])),e.ba("tr",new Map([["AD_DURATION","Reklam sresi"],["AD_PROGRESS","[AD_ON]/[NUM_ADS] reklam"],["AD_TIME","Reklam: [AD_TIME]"],["AUTO_QUALITY","Otomatik"],["BACK","Geri"],["CAPTIONS","Altyazlar"],["CAST","Yaynla..."],["ENTER_LOOP_MODE","Mevcut videoyu dngye al"],["ENTER_PICTURE_IN_PICTURE","Pencere iinde Pencere moduna gir"],["EXIT_FULL_SCREEN","Tam ekrandan k"],["EXIT_LOOP_MODE","Mevcut videonun dngsn durdur"],["EXIT_PICTURE_IN_PICTURE","Pencere inde Pencereden k"],["FAST_FORWARD","leri sar"],["FULL_SCREEN","Tam ekran"],["LANGUAGE","Dil"],["LIVE","Canl"],["LOOP","Dng"],["MORE_SETTINGS","Daha fazla ayar"],["MULTIPLE_LANGUAGES","Birden ok dil"],["MUTE","Sesi kapat"],["NOT_APPLICABLE","Geerli deil"],["OFF","Kapal"],["ON","Ak"],["PAUSE","Duraklat"],["PICTURE_IN_PICTURE","Pencere inde Pencere"],["PLAY","Oynat"],["PLAYBACK_RATE","alma hz"],["RESOLUTION","znrlk"],["REWIND","Geri sar"],["SEEK","Ara"],["SKIP_AD","Reklam Atla"],["SKIP_TO_LIVE","Canl yayna atla"],["UNDETERMINED_LANGUAGE","Belirsiz"],["UNMUTE","Sesi a"],["UNRECOGNIZED_LANGUAGE","Tannmayan"],["VOLUME","Ses"]])),e.ba("zh",new Map([["AD_DURATION",""],["AD_PROGRESS"," [AD_ON]/[NUM_ADS]"],["AD_TIME","[AD_TIME]"],["AUTO_QUALITY",""],["BACK",""],["CAPTIONS",""],["CAST",""],["ENTER_LOOP_MODE",""],["ENTER_PICTURE_IN_PICTURE",""],["EXIT_FULL_SCREEN",""],["EXIT_LOOP_MODE",""],["EXIT_PICTURE_IN_PICTURE",""],["FAST_FORWARD",""],["FULL_SCREEN",""],["LANGUAGE",""],["LIVE",""],["LOOP",""],["MORE_SETTINGS",""],["MULTIPLE_LANGUAGES",""],["MUTE",""],["NOT_APPLICABLE",""],["OFF",""],["ON",""],["PAUSE",""],["PICTURE_IN_PICTURE",""],["PLAY",""],["PLAYBACK_RATE",""],["RESOLUTION",""],["REWIND",""],["SEEK",""],["SKIP_AD",""],["SKIP_TO_LIVE",""],["UNDETERMINED_LANGUAGE",""],["UNMUTE",""],["UNRECOGNIZED_LANGUAGE",""],["VOLUME",""]])),e.ba("zh-TW",new Map([["AD_DURATION",""],["AD_PROGRESS"," [AD_ON]/[NUM_ADS]"],["AD_TIME","[AD_TIME]"],["AUTO_QUALITY",""],["BACK",""],["CAPTIONS",""],["CAST","..."],["ENTER_LOOP_MODE",""],["ENTER_PICTURE_IN_PICTURE",""],["EXIT_FULL_SCREEN",""],["EXIT_LOOP_MODE",""],["EXIT_PICTURE_IN_PICTURE",""],["FAST_FORWARD",""],["FULL_SCREEN",""],["LANGUAGE",""],["LIVE",""],["LOOP",""],["MORE_SETTINGS",""],["MULTIPLE_LANGUAGES",""],["MUTE",""],["NOT_APPLICABLE",""],["OFF",""],["ON",""],["PAUSE",""],["PICTURE_IN_PICTURE",""],["PLAY",""],["PLAYBACK_RATE",""],["RESOLUTION",""],["REWIND",""],["SEEK",""],["SKIP_AD",""],["SKIP_TO_LIVE",""],["UNDETERMINED_LANGUAGE",""],["UNMUTE",""],["UNRECOGNIZED_LANGUAGE",""],["VOLUME",""]])),e.xf(navigator.languages||[]),e}(),this.h=new Hr,this.configure(this.i),function(t){t.h.o(t.F,"buffering",(function(){t.P&&cy(t.$,t.F.Pc())})),t.P&&cy(t.$,t.F.Pc()),t.h.o(e,"keydown",(function(n){!function(t,n){t.ka.add(n.key);var r=t.md();"Tab"==n.key&&(t.g.classList.add("shaka-keyboard-navigation"),Oy(t),t.h.o(e,"mousedown",(function(){t.h.qc(e,"mousedown")}))),"Escape"==n.key&&t.I.za(),r&&t.ka.has("Tab")&&function(e,t){var n=e.G.filter((function(e){return!e.classList.contains("shaka-hidden")}));if(n.length){var r=n[0];if(r.childNodes.length){for(n=r.firstElementChild;n&&n.classList.contains("shaka-hidden");)n=n.nextElementSibling;for(r=r.lastElementChild;r&&r.classList.contains("shaka-hidden");)r=r.previousElementSibling;var i=document.activeElement;e.ka.has("Shift")?i==n&&(t.preventDefault(),r.focus()):i==r&&(t.preventDefault(),n.focus())}}}(t,n)}(t,n)})),t.h.o(e,"click",(function(){return t.fc()})),t.h.o(t,"submenuopen",(function(){t.fc()})),t.h.o(t.s,"play",(function(){Oy(t)})),t.h.o(t.s,"pause",(function(){Oy(t)})),t.h.o(t.j,"mousemove",(function(e){Py(t,e)})),t.h.o(t.j,"touchmove",(function(e){Py(t,e)}),{passive:!0}),t.h.o(t.j,"touchend",(function(e){Py(t,e)}),{passive:!0}),t.h.o(t.j,"mouseleave",(function(){t.J||t.Z.za()})),t.h.o(t.C,"caststatuschanged",(function(){jy(t)})),t.h.o(t.j,"keydown",(function(e){var n=document.activeElement,r=!(!n||!n.classList)&&n.classList.contains("shaka-volume-bar"),i=n&&n.classList&&n.classList.contains("shaka-seek-bar");if(t.g.contains(n)&&Py(t,e),t.i.enableKeyboardPlaybackControls)switch(n=t.i.keyboardSeekDistance,e.key){case"ArrowLeft":t.l&&!r&&0<n&&(e.preventDefault(),Fy(t,t.l.getValue()-n));break;case"ArrowRight":t.l&&!r&&0<n&&(e.preventDefault(),Fy(t,t.l.getValue()+n));break;case"Home":t.l&&Fy(t,t.F.Ja().start);break;case"End":t.l&&Fy(t,t.F.Ja().end);break;case" ":i&&By(t)}})),t.h.o(t.j,"keyup",(function(e){t.ka.delete(e.key)})),t.h.o(t.Xa,"ad-started",(function(e){t.m=e.ad,t.cg()})),t.h.o(t.Xa,"ad-stopped",(function(){t.m=null,t.Kf()})),screen.orientation&&t.h.o(screen.orientation,"change",(function(){return L((function(e){return w(e,function(e){return L((function(t){return e.s&&0!=e.s.readyState&&!e.C.na()&&e.i.enableFullscreenOnRotation&&e.xd()?screen.orientation.type.includes("landscape")&&!e.ic()?w(t,Ry(e),0):screen.orientation.type.includes("portrait")&&e.ic()?w(t,Ny(e),0):t.D(0):t.return()}))}(t),0)}))}))}(this),this.ka=new Set,jy(this),this.La.ea(.125),this.h.o(this.ua,"locale-changed",(function(e){a.Xa.setLocale(e.locales[0])}))}function _y(e){for(var t=c(e.H),n=t.next();!n.done;n=t.next())n.value.release();e.H=[]}function My(e,t){Gy.set(e,t)}function Ry(e){var t,n;return L((function(r){switch(r.g){case 1:if(A(r,2),!document.fullscreenEnabled){(t=e.B).webkitSupportsFullscreen&&t.webkitEnterFullscreen(),r.D(4);break}if(!document.pictureInPictureElement){r.D(5);break}return w(r,document.exitPictureInPicture(),5);case 5:return w(r,e.j.requestFullscreen({navigationUI:"hide"}),7);case 7:if(!e.i.forceLandscapeOnFullscreen||!screen.orientation){r.D(4);break}return A(r,9),w(r,screen.orientation.lock("landscape"),11);case 11:E(r,4,2);break;case 9:I(r,2);case 4:E(r,0);break;case 2:n=I(r),e.dispatchEvent(new G("error",(new Map).set("detail",n))),T(r)}}))}function Ny(e){var t;return L((function(n){return document.fullscreenEnabled?(screen.orientation&&screen.orientation.unlock(),w(n,document.exitFullscreen(),0)):((t=e.B).webkitSupportsFullscreen&&t.webkitExitFullscreen(),n.D(0))}))}function Ly(e){e.P&&e.s.duration&&(e.F.vf(),e.s.paused&&!e.X?e.s.play():e.s.pause())}function Dy(e){e.m&&e.m.isPaused()?e.m.play():e.m&&e.m.pause()}function Py(e,t){"mousemove"==t.type&&(e.g.classList.remove("shaka-keyboard-navigation"),Oy(e)),"touchstart"==t.type||"touchmove"==t.type||"touchend"==t.type||"keyup"==t.type?e.J=Date.now():e.J+1e3<Date.now()&&(e.J=null),e.J&&"mousemove"==t.type||(e.j.style.cursor="",e.gb=!0,e.I.stop(),e.Mb()||(zy(e),Oy(e)),e.Z.stop(),"touchend"!=t.type&&"keyup"!=t.type&&e.J||e.Z.R(3))}function Oy(t){var n=!!t.m&&t.m.isPaused(),r=t.s.paused&&!t.X,i=t.g.classList.contains("shaka-keyboard-navigation");n||(!t.m||!t.m.isLinear())&&r||t.gb||i||function(t){return!!e.matchMedia("hover: hover").matches&&t.vb.some((function(e){return e.matches(":hover")}))}(t)?(zy(t),t.g.setAttribute("shown","true"),t.aa.stop()):t.aa.R(t.i.fadeDelay)}function Uy(e){e.P&&(e.md()?e.I.za():e.i.singleClickForPlayAndPause&&By(e))}function By(e){e.m&&e.m.isLinear()?Dy(e):Ly(e)}function jy(e){var t=e.C.na();e.dispatchEvent(new G("caststatuschanged",(new Map).set("newStatus",t))),t?e.g.setAttribute("casting","true"):e.g.removeAttribute("casting")}function Fy(e,t){e.l.changeTo(t),e.Mb()&&zy(e)}function zy(e){if(e.l)if(e.l.setValue(e.s.currentTime),e.l.update(),e.l.isShowing())for(var t=c(e.G),n=t.next();!n.done;n=t.next())n.value.classList.remove("shaka-low-position");else for(n=(t=c(e.G)).next();!n.done;n=t.next())n.value.classList.add("shaka-low-position");e.dispatchEvent(new G("timeandseekrangeupdated"))}v(xy,ay),(i=xy.prototype).release=function(){this.l&&(this.l.stop(),this.l=null),ay.prototype.release.call(this)},i.setRange=function(e,t){this.bar.min=e,this.bar.max=t},i.onChangeStart=function(){},i.onChange=function(){},i.onChangeEnd=function(){},i.changeTo=function(e){this.g||(this.g=!0,this.onChangeStart());var t=parseFloat(this.bar.min),n=parseFloat(this.bar.max);this.bar.value=e>n?n:e<t?t:e,this.onChange(),this.l.R(.5)},i.getValue=function(){return parseFloat(this.bar.value)},i.setValue=function(e){this.g||(this.bar.value=e)},z("shaka.ui.RangeElement",xy),xy.prototype.setValue=xy.prototype.setValue,xy.prototype.getValue=xy.prototype.getValue,xy.prototype.changeTo=xy.prototype.changeTo,xy.prototype.onChangeEnd=xy.prototype.onChangeEnd,xy.prototype.onChange=xy.prototype.onChange,xy.prototype.onChangeStart=xy.prototype.onChangeStart,xy.prototype.setRange=xy.prototype.setRange,v(Ty,xy),(i=Ty.prototype).release=function(){this.h&&(this.h.stop(),this.h=null,this.s.stop(),this.s=null),xy.prototype.release.call(this)},i.onChangeStart=function(){this.B=!this.video.paused,this.controls.Qe(!0),this.video.pause()},i.onChange=function(){this.video.duration&&(this.update(),this.h.R(.125))},i.onChangeEnd=function(){this.h.za(),this.controls.Qe(!1),this.B&&this.video.play()},i.isShowing=function(){return!this.container.classList.contains("shaka-hidden")},i.update=function(){var e=this.m.seekBarColors,t=this.getValue(),n=this.video.buffered.length,r=n?this.video.buffered.start(0):0,i=n?this.video.buffered.end(n-1):0,a=this.player.Ja(),o=a.end-a.start;this.setRange(a.start,a.end),Ey(this)?(cy(this.container,!0),0==n?this.container.style.background=e.base:(n=(Math.max(r,a.start)-a.start)/o||0,i=(Math.min(i,a.end)-a.start)/o||0,t=(Math.min(Math.max(t,a.start),a.end)-a.start)/o||0,this.container.style.background="linear-gradient("+["to right",(this.m.showUnbufferedStart?e.base:e.played)+" "+100*n+"%",e.played+" "+100*n+"%",e.played+" "+100*t+"%",e.buffered+" "+100*t+"%",e.buffered+" "+100*i+"%",e.base+" "+100*i+"%"].join()+")")):cy(this.container,!1)},z("shaka.ui.SeekBar",Ty),ky.prototype.create=function(e,t){return new Ty(e,t)},Ty.Factory=ky,v(Cy,ee),(i=Cy.prototype).destroy=function(){var e=this;return L((function(t){switch(t.g){case 1:if(document.pictureInPictureElement!=e.B){t.D(2);break}return w(t,document.exitPictureInPicture(),2);case 2:if(e.h&&(e.h.release(),e.h=null),e.Z&&(e.Z.stop(),e.Z=null),e.aa&&(e.aa.stop(),e.aa=null),e.I&&(e.I.stop(),e.I=null),e.La&&(e.La.stop(),e.La=null),_y(e),e.g&&(e.j.removeChild(e.g),e.g=null),!e.C){t.D(4);break}return w(t,e.C.destroy(),5);case 5:e.C=null;case 4:if(!e.sa){t.D(6);break}return w(t,e.sa.destroy(),7);case 7:e.sa=null;case 6:e.F=null,e.B=null,e.s=null,e.ua=null,e.ka.clear(),ee.prototype.release.call(e),T(t)}}))},i.og=function(e){this.Za=e,jy(this)},i.ih=function(){Oy(this)},i.configure=function(e){this.i=e,this.C.yf(e.castReceiverAppId,e.castAndroidReceiverCompatible),this.l&&(this.l=null),this.fb&&(this.fb=null),this.Ya&&(this.Ya=null),this.g?(xu(this.g),_y(this)):(function(e){e.g=yu("div"),e.g.classList.add("shaka-controls-container"),e.j.appendChild(e.g),e.j.setAttribute("shaka-controls","true"),e.h.o(e.g,"touchstart",(function(t){e.s.duration&&(e.Mb()?e.J=Date.now():(Py(e,t),t.cancelable&&t.preventDefault()))}),{passive:!1}),e.h.o(e.g,"click",(function(){Uy(e)})),e.h.o(e.g,"dblclick",(function(){e.i.doubleClickForFullscreen&&e.xd()&&e.Xe()}))}(this),function(e){e.O=yu("div"),e.O.classList.add("shaka-client-side-ad-container"),cy(e.O,!1),e.h.o(e.O,"click",(function(){Uy(e)})),e.j.appendChild(e.O)}(this)),this.j.classList.add("shaka-video-container"),this.B.classList.add("shaka-video"),function(e){var t=yu("div");t.classList.add("shaka-scrim-container"),e.g.appendChild(t)}(this),this.i.addBigPlayButton&&function(e){var t=yu("div");t.classList.add("shaka-play-button-container"),e.g.appendChild(t),e.fb=new my(t,e),e.H.push(e.fb)}(this),this.i.customContextMenu&&(this.Ya=new vy(this.V,this),this.H.push(this.Ya)),this.$||function(e){e.$=yu("div"),e.$.classList.add("shaka-spinner-container"),e.j.appendChild(e.$);var t=yu("div");t.classList.add("shaka-spinner"),e.$.appendChild(t),e=document.createElementNS("http://www.w3.org/2000/svg","svg"),e.classList.add("shaka-spinner-svg"),e.setAttribute("viewBox","0 0 30 30"),t.appendChild(e),t=document.createElementNS("http://www.w3.org/2000/svg","circle"),t.classList.add("shaka-spinner-path"),t.setAttribute("cx","15"),t.setAttribute("cy","15"),t.setAttribute("r","14.5"),t.setAttribute("fill","none"),t.setAttribute("stroke-width","1"),t.setAttribute("stroke-miterlimit","10"),e.appendChild(t)}(this),this.$a=yu("div"),this.$a.classList.add("shaka-server-side-ad-container"),this.g.appendChild(this.$a),function(e){e.M=yu("div"),e.M.classList.add("shaka-bottom-controls"),e.M.classList.add("shaka-no-propagation"),e.g.appendChild(e.M),e.h.o(e.M,"click",(function(t){t.target.closest(".shaka-overflow-button")||e.fc()})),function(e){e.K=yu("div"),e.K.classList.add("shaka-ad-controls");var t=null!=e.m&&e.m.isLinear();cy(e.K,t),e.M.appendChild(e.K),t=new fy(e.K,e),e.H.push(t),t=new hy(e.K,e),e.H.push(t)}(e),e.V=yu("div"),e.V.classList.add("shaka-controls-button-panel"),e.V.classList.add("shaka-show-controls-on-mouse-over"),e.i.enableTooltips&&e.V.classList.add("shaka-tooltips-on"),e.M.appendChild(e.V);for(var t=c(e.i.controlPanelElements),n=t.next();!n.done;n=t.next())n=n.value,Gy.get(n)?(n=Gy.get(n).create(e.V,e),e.H.push(n)):X("Unrecognized control panel element requested:",n)}(this),this.G=Array.from(this.j.getElementsByClassName("shaka-settings-menu")),this.G.push.apply(this.G,d(Array.from(this.j.getElementsByClassName("shaka-overflow-menu")))),function(e){if(e.i.addSeekBar)e.l=Vy.create(e.M,e),e.H.push(e.l);else for(var t=(e=c(e.G)).next();!t.done;t=e.next())t.value.classList.add("shaka-low-position")}(this),this.vb=Array.from(this.j.getElementsByClassName("shaka-show-controls-on-mouse-over")),Oy(this);for(var t=(e=c(this.j.getElementsByClassName("shaka-no-propagation"))).next();!t.done;t=e.next()){t=t.value;var n=function(e){return e.stopPropagation()};this.h.o(t,"click",n),this.h.o(t,"dblclick",n)}},i.Me=function(e){(this.P=e)?(this.j.setAttribute("shaka-controls","true"),this.B.tabIndex=-1,this.B.controls=!1):this.j.removeAttribute("shaka-controls"),Oy(this)},i.Xf=function(e){this.B.controls=e,this.B.tabIndex=e?0:-1,e&&this.Me(!1)},i.getAd=function(){return this.m},i.Bg=function(){return this.C},i.Ng=function(){return this.ua},i.bh=function(){return this.j},i.zb=function(){return this.s},i.Mg=function(){return this.B},i.cc=function(){return this.F},i.Lg=function(){return this.sa},i.Gg=function(){return this.g},i.Vg=function(){return this.$a},i.Dg=function(){return this.O},i.Eg=function(){return this.i},i.hh=function(){return this.X},i.Qe=function(e){this.X=e},i.fh=function(){return this.Za},i.Hf=function(){return this.l?this.l.getValue():this.s.currentTime},i.Yf=function(e){this.J=e},i.md=function(){return this.G.some((function(e){return!e.classList.contains("shaka-hidden")}))},i.fc=function(){this.I.za()},i.xd=function(){return!(!document.fullscreenEnabled&&!this.B.webkitSupportsFullscreen)},i.ic=function(){if(document.fullscreenEnabled)return!!document.fullscreenElement;var e=this.B;return!!e.webkitSupportsFullscreen&&e.webkitDisplayingFullscreen},i.Xe=function(){var e=this;return L((function(t){return e.ic()?w(t,Ny(e),0):w(t,Ry(e),0)}))},i.cg=function(){cy(this.K,!0),cy(this.O,!0),this.g.setAttribute("ad-active","true")},i.Kf=function(){cy(this.K,!1),cy(this.O,!1),this.g.removeAttribute("ad-active")},i.Mb=function(){return!!this.P&&(null!=this.g.getAttribute("shown")||null!=this.g.getAttribute("casting"))},z("shaka.ui.Controls",Cy),Cy.prototype.isOpaque=Cy.prototype.Mb,Cy.prototype.hideAdUI=Cy.prototype.Kf,Cy.prototype.showAdUI=Cy.prototype.cg,Cy.prototype.toggleFullScreen=Cy.prototype.Xe,Cy.prototype.isFullScreenEnabled=Cy.prototype.ic,Cy.prototype.isFullScreenSupported=Cy.prototype.xd,Cy.prototype.hideSettingsMenus=Cy.prototype.fc,Cy.prototype.anySettingsMenusAreOpen=Cy.prototype.md,Cy.prototype.setLastTouchEventTime=Cy.prototype.Yf,Cy.prototype.getDisplayTime=Cy.prototype.Hf,Cy.prototype.isCastAllowed=Cy.prototype.fh,Cy.prototype.setSeeking=Cy.prototype.Qe,Cy.prototype.isSeeking=Cy.prototype.hh,Cy.prototype.getConfig=Cy.prototype.Eg,Cy.prototype.getClientSideAdContainer=Cy.prototype.Dg,Cy.prototype.getServerSideAdContainer=Cy.prototype.Vg,Cy.prototype.getControlsContainer=Cy.prototype.Gg,Cy.prototype.getLocalPlayer=Cy.prototype.Lg,Cy.prototype.getPlayer=Cy.prototype.cc,Cy.prototype.getLocalVideo=Cy.prototype.Mg,Cy.prototype.getVideo=Cy.prototype.zb,Cy.prototype.getVideoContainer=Cy.prototype.bh,Cy.prototype.getLocalization=Cy.prototype.Ng,Cy.prototype.getCastProxy=Cy.prototype.Bg,Cy.prototype.getAd=Cy.prototype.getAd,Cy.prototype.setEnabledNativeControls=Cy.prototype.Xf,Cy.prototype.setEnabledShakaControls=Cy.prototype.Me,Cy.prototype.configure=Cy.prototype.configure,Cy.prototype.loadComplete=Cy.prototype.ih,Cy.prototype.allowCast=Cy.prototype.og,Cy.registerSeekBar=function(e){Vy=e},Cy.registerElement=My,Cy.prototype.destroy=Cy.prototype.destroy;var Gy=new Map,Vy=new ky;function Ky(e,t){ay.call(this,e,t);var n=this;this.l=this.controls.i,this.j=this.controls.g,this.i=[],this.g=bu(),this.g.classList.add("shaka-overflow-menu-button"),this.g.classList.add("shaka-no-propagation"),this.g.classList.add("material-icons-round"),this.g.classList.add("shaka-tooltip"),this.g.textContent="more_vert",this.parent.appendChild(this.g),this.h=yu("div"),this.h.classList.add("shaka-overflow-menu"),this.h.classList.add("shaka-no-propagation"),this.h.classList.add("shaka-show-controls-on-mouse-over"),this.h.classList.add("shaka-hidden"),this.j.appendChild(this.h),function(e){for(var t=c(e.l.overflowMenuButtons),n=t.next();!n.done;n=t.next())n=n.value,qy.get(n)?(n=qy.get(n),e.i.push(n.create(e.h,e.controls))):X("Unrecognized overflow menu element requested:",n)}(this),this.eventManager.o(this.localization,"locale-updated",(function(){Wy(n)})),this.eventManager.o(this.localization,"locale-changed",(function(){Wy(n)})),this.eventManager.o(this.adManager,"ad-started",(function(){n.ad&&n.ad.isLinear()&&cy(n.g,!1)})),this.eventManager.o(this.adManager,"ad-stopped",(function(){cy(n.g,!0)})),this.eventManager.o(this.controls,"submenuopen",(function(){cy(n.h,!1)})),this.eventManager.o(this.h,"touchstart",(function(e){n.controls.Yf(Date.now()),e.stopPropagation()})),this.eventManager.o(this.g,"click",(function(){!function(e){if(e.controls.md())e.controls.fc();else{cy(e.h,!0),Oy(e.controls);var t=function(e){return 0==e.classList.contains("shaka-hidden")};ne(e.h.childNodes,t)&&re(e.h.childNodes,t)[0].focus()}}(n)})),Wy(this),this.ad&&this.ad.isLinear()&&cy(this.g,!1)}function Hy(e,t){qy.set(e,t)}function Wy(e){e.g.ariaLabel=e.localization.resolve("MORE_SETTINGS")}function Xy(){}v(Ky,ay),Ky.prototype.release=function(){this.j=null;for(var e=c(this.i),t=e.next();!t.done;t=e.next())t.value.release();this.i=[],ay.prototype.release.call(this)},z("shaka.ui.OverflowMenu",Ky),Ky.registerElement=Hy,Xy.prototype.create=function(e,t){return new Ky(e,t)},My("overflow_menu",new Xy);var qy=new Map;function Yy(t,n){ay.call(this,t,n);var r=this;this.g=bu(),this.g.classList.add("shaka-airplay-button"),this.g.classList.add("shaka-tooltip"),this.g.ariaPressed="false",this.h=yu("i"),this.h.classList.add("material-icons-round"),this.h.textContent="airplay",this.g.appendChild(this.h),e.WebKitPlaybackTargetAvailabilityEvent||this.g.classList.add("shaka-hidden"),(t=yu("label")).classList.add("shaka-overflow-button-label"),t.classList.add("shaka-overflow-menu-only"),this.j=yu("span"),t.appendChild(this.j),this.i=yu("span"),this.i.classList.add("shaka-current-selection-span"),t.appendChild(this.i),this.g.appendChild(t),this.parent.appendChild(this.g),Qy(this),$y(this),this.eventManager.o(this.localization,"locale-updated",(function(){Qy(r)})),this.eventManager.o(this.localization,"locale-changed",(function(){Qy(r)})),this.eventManager.o(this.g,"click",(function(){r.controls.zb().webkitShowPlaybackTargetPicker()})),t=this.controls.zb(),this.eventManager.o(t,"webkitplaybacktargetavailabilitychanged",(function(e){var t=r.player.If()==ic;cy(r.g,"available"==e.availability&&t)})),this.eventManager.o(t,"webkitcurrentplaybacktargetiswirelesschanged",(function(){$y(r)}))}function $y(e){var t=e.controls.zb();e.g.ariaPressed=t&&t.webkitCurrentPlaybackTargetIsWireless?"true":"false"}function Qy(e){e.g.ariaLabel=e.localization.resolve("AIRPLAY"),e.j.textContent=e.localization.resolve("AIRPLAY")}function Jy(){}function Zy(e,t,n){this.i=e,this.h=eb(this),t.dataset.shakaPlayerContainer="",t.ui=this,this.pe()&&t.classList.add("shaka-mobile"),this.g=new Cy(e,t,n,this.h),this.configure({}),n.controls||e.Te(t),t.ui=this,n.ui=this}function eb(t){var n={controlPanelElements:"play_pause time_and_duration spacer mute volume fullscreen overflow_menu".split(" "),overflowMenuButtons:"captions quality language picture_in_picture cast playback_rate".split(" "),statisticsList:"width height corruptedFrames decodedFrames droppedFrames drmTimeSeconds licenseTime liveLatency loadLatency bufferingTime manifestTimeSeconds estimatedBandwidth streamBandwidth maxSegmentDuration pauseTime playTime completionPercent".split(" "),contextMenuElements:["loop","picture_in_picture","statistics"],playbackRates:[.5,.75,1,1.25,1.5,1.75,2],fastForwardRates:[2,4,8,1],rewindRates:[-1,-2,-4,-8],addSeekBar:!0,addBigPlayButton:!1,customContextMenu:!1,castReceiverAppId:"",castAndroidReceiverCompatible:!1,clearBufferOnQualityChange:!0,showUnbufferedStart:!1,seekBarColors:{base:"rgba(255, 255, 255, 0.3)",buffered:"rgba(255, 255, 255, 0.54)",played:"rgb(255, 255, 255)",adBreaks:"rgb(255, 204, 0)"},volumeBarColors:{base:"rgba(255, 255, 255, 0.54)",level:"rgb(255, 255, 255)"},trackLabelFormat:ib,fadeDelay:0,doubleClickForFullscreen:!0,singleClickForPlayAndPause:!0,enableKeyboardPlaybackControls:!0,enableFullscreenOnRotation:!0,forceLandscapeOnFullscreen:!0,enableTooltips:!1,keyboardSeekDistance:5};return e.WebKitPlaybackTargetAvailabilityEvent&&n.overflowMenuButtons.push("airplay"),t.pe()&&(n.addBigPlayButton=!0,n.controlPanelElements=n.controlPanelElements.filter((function(e){return"play_pause"!=e&&"volume"!=e}))),n}function tb(){var e,t,n,r,i,a,o,s,u,l,d,h,f,p,g,m,v,y,b,x;return L((function(S){switch(S.g){case 1:if(ag(),!sl())return nb("shaka-ui-load-failed",ab),S.return();if(e=document.querySelectorAll("[data-shaka-player-container]"),t=document.querySelectorAll("[data-shaka-player]"),n=document.querySelectorAll("[data-shaka-player-canvas]"),!t.length&&!e.length){S.D(2);break}if(t.length&&!e.length){for(r=c(t),i=r.next();!i.done;i=r.next())if(!(a=i.value).ui){for(o=document.createElement("div"),a.parentElement.replaceChild(o,a),o.appendChild(a),s=null,u=c(n),l=u.next();!l.done;l=u.next())if((d=l.value).parentElement==o){s=d;break}s||((s=document.createElement("canvas")).classList.add("shaka-canvas-container"),o.appendChild(s)),rb(o,a,s)}S.D(2);break}h=c(e),f=h.next();case 4:if(f.done){S.D(2);break}if((p=f.value).ui){S.D(5);break}for(g=null,m=c(t),i=m.next();!i.done;i=m.next())if((v=i.value).parentElement==p){g=v;break}for(g||((g=document.createElement("video")).setAttribute("playsinline",""),p.appendChild(g)),y=null,b=c(n),l=b.next();!l.done;l=b.next())if((x=l.value).parentElement==p){y=x;break}return y||((y=document.createElement("canvas")).classList.add("shaka-canvas-container"),p.appendChild(y)),A(S,7),w(S,rb(p,g,y),9);case 9:E(S,5);break;case 7:return I(S),nb("shaka-ui-load-failed",ob),S.return();case 5:f=h.next(),S.D(4);break;case 2:nb("shaka-ui-loaded"),T(S)}}))}function nb(e,t){var n=null;null!=t&&(n={reasonCode:t}),e=new CustomEvent(e,{detail:n}),document.dispatchEvent(e)}function rb(e,t,n){var r,i,a,o,s,u,l,d,h;return L((function(f){switch(f.g){case 1:r=new il(t),i=new Zy(r,e,t),r.qf(n),a="",o=!1,e.dataset&&e.dataset.shakaPlayerCastReceiverId?(a=e.dataset.shakaPlayerCastReceiverId,o="true"===e.dataset.shakaPlayerCastAndroidReceiverCompatible):t.dataset&&t.dataset.shakaPlayerCastReceiverId&&(a=t.dataset.shakaPlayerCastReceiverId,o="true"===t.dataset.shakaPlayerCastAndroidReceiverCompatible),a.length&&i.configure({castReceiverAppId:a,castAndroidReceiverCompatible:o}),t.controls&&i.g.Xf(!0),(s=t.getAttribute("src"))&&((u=document.createElement("source")).setAttribute("src",s),t.appendChild(u),t.removeAttribute("src")),l=c(t.querySelectorAll("source")),d=l.next();case 2:if(d.done){f.D(0);break}return h=d.value,A(f,5),w(f,i.g.cc().load(h.getAttribute("src")),7);case 7:f.D(0);break;case 5:I(f);case 3:d=l.next(),f.D(2)}}))}v(Yy,ay),z("shaka.ui.AirPlayButton",Yy),Jy.prototype.create=function(e,t){return new Yy(e,t)},Hy("airplay",new Jy),My("airplay",new Jy),(i=Zy.prototype).destroy=function(){var e=this;return L((function(t){return 1==t.g?e.g?w(t,e.g.destroy(),2):t.D(2):4!=t.g?(e.g=null,e.i?w(t,e.i.destroy(),4):t.D(4)):(e.i=null,void T(t))}))},i.pe=function(){return!!/(?:iPhone|iPad|iPod|Android)/.test(navigator.userAgent)||Ut()&&1<navigator.maxTouchPoints},i.getConfiguration=function(){var e=eb(this);return Vu(e,this.h,eb(this),{},""),e},i.configure=function(e,t){2==arguments.length&&"string"==typeof e&&(e=Ku(e,t)),Vu(this.h,e,eb(this),{},""),this.h.castReceiverAppId&&!this.h.overflowMenuButtons.includes("cast")&&this.h.overflowMenuButtons.push("cast"),this.g.configure(this.h),this.g.dispatchEvent(new G("uiupdated"))},i.Fg=function(){return this.g},i.Kh=function(e){this.g.Me(e)},z("shaka.ui.Overlay",Zy),Zy.prototype.setEnabled=Zy.prototype.Kh,Zy.prototype.getControls=Zy.prototype.Fg,Zy.prototype.configure=Zy.prototype.configure,Zy.prototype.getConfiguration=Zy.prototype.getConfiguration,Zy.prototype.isMobile=Zy.prototype.pe,Zy.prototype.destroy=Zy.prototype.destroy;var ib=0;Zy.TrackLabelFormat={LANGUAGE:ib,ROLE:1,LANGUAGE_ROLE:2,LABEL:3};var ab=0,ob=1;function sb(e,t,n,r,i,a,o){function s(e,t){return e+": "+t}function u(e){return"variant"==e.type?e.audioRoles?e.audioRoles.join(", "):void 0:e.roles.join(", ")}var l=e.find((function(e){return 1==e.active})),d=oy(t);xu(t),t.appendChild(d),d=new Map;for(var h=c(e),f=h.next();!f.done;f=h.next())f=f.value,d.has(f.language)||d.set(f.language,new Set),d.get(f.language).add(u(f));for(d=new Set,l=l?s(l.language,u(l)):"",h={},f=(e=c(e)).next();!f.done;h={Va:h.Va},f=e.next()){h.Va=f.value,f=h.Va.language;var p=h.Va.forced,g=a.resolve(He.ig),m=u(h.Va),v=s(f,m);if(!d.has(v)){d.add(v);var y=bu();y.addEventListener("click",function(e){return function(){n(e.Va)}}(h));var b=yu("span");switch(y.appendChild(b),b.textContent=ub(f,a),o){case ib:p&&(b.textContent+=" ("+g+")");break;case 1:m?b.textContent=m:(X("Track #"+h.Va.id+" does not have a role, but the UI is configured to only show role."),b.textContent="?"),p&&(b.textContent+=" ("+g+")");break;case 2:m&&(b.textContent+=": "+m),p&&(b.textContent+=" ("+g+")");break;case 3:h.Va.label?b.textContent=h.Va.label:(X("Track #"+h.Va.id+" does not have a label, but the UI is configured to only show labels."),b.textContent="?")}r&&v==l&&(y.appendChild(ly()),b.classList.add("shaka-chosen-item"),y.ariaSelected="true",i.textContent=b.textContent),t.appendChild(y)}}}function ub(e,t){if(!e&&!t)return"";switch(e){case"mul":return t.resolve("MULTIPLE_LANGUAGES");case"und":return t.resolve("UNDETERMINED_LANGUAGE");case"zxx":return t.resolve("NOT_APPLICABLE")}var n=Ue(e);return e in ty?ty[e].u:n in ty?ty[n].u+" ("+e+")":t.resolve("UNRECOGNIZED_LANGUAGE")+" ("+e+")"}function lb(e,t,n){ay.call(this,e,t);var r=this;!function(e,t){e.button=bu(),e.button.classList.add("shaka-overflow-button"),e.icon=yu("i"),e.icon.classList.add("material-icons-round"),e.icon.textContent=t,e.button.appendChild(e.icon),t=yu("label"),t.classList.add("shaka-overflow-button-label"),t.classList.add("shaka-overflow-menu-only"),e.nameSpan=yu("span"),t.appendChild(e.nameSpan),e.currentSelection=yu("span"),e.currentSelection.classList.add("shaka-current-selection-span"),t.appendChild(e.currentSelection),e.button.appendChild(t),e.parent.appendChild(e.button)}(this,n),function(e){e.menu=yu("div"),e.menu.classList.add("shaka-no-propagation"),e.menu.classList.add("shaka-show-controls-on-mouse-over"),e.menu.classList.add("shaka-settings-menu"),e.menu.classList.add("shaka-hidden"),e.backButton=bu(),e.backButton.classList.add("shaka-back-to-overflow-button"),e.menu.appendChild(e.backButton),e.eventManager.o(e.backButton,"click",(function(){e.controls.fc()}));var t=yu("i");t.classList.add("material-icons-round"),t.textContent="close",e.backButton.appendChild(t),e.backSpan=yu("span"),e.backButton.appendChild(e.backSpan),e.controls.g.appendChild(e.menu)}(this),function(e){e.parent.classList.contains("shaka-overflow-menu")&&(e.backButton.firstChild.textContent="arrow_back",e.eventManager.o(e.backButton,"click",(function(){function t(e){return 0==e.classList.contains("shaka-hidden")}cy(e.parent,!0),ne(e.parent.childNodes,t)&&re(e.parent.childNodes,t)[0].focus(),Oy(e.controls)})))}(this),this.eventManager.o(this.button,"click",(function(){r.menu.classList.contains("shaka-hidden")?(r.controls.dispatchEvent(new G("submenuopen")),cy(r.menu,!0),uy(r.menu)):cy(r.menu,!1)}))}function cb(e,t){lb.call(this,e,t,"language");var n=this;this.button.classList.add("shaka-language-button"),this.button.classList.add("shaka-tooltip-status"),this.menu.classList.add("shaka-audio-languages"),this.eventManager.o(this.localization,"locale-updated",(function(){hb(n)})),this.eventManager.o(this.localization,"locale-changed",(function(){hb(n)})),this.eventManager.o(this.player,"trackschanged",(function(){var e=0<n.player.Qa().length;cy(n.button,e),db(n)})),this.eventManager.o(this.player,"variantchanged",(function(){db(n)})),hb(this),db(this)}function db(e){sb(e.player.Qa(),e.menu,(function(t){e.player.Md(t.language,t.roles[0])}),!0,e.currentSelection,e.localization,e.controls.i.trackLabelFormat),uy(e.menu),e.controls.dispatchEvent(new G("languageselectionupdated")),e.button.setAttribute("shaka-status",e.currentSelection.innerText)}function hb(e){e.backButton.ariaLabel=e.localization.resolve("BACK"),e.button.ariaLabel=e.localization.resolve("LANGUAGE"),e.nameSpan.textContent=e.localization.resolve("LANGUAGE"),e.backSpan.textContent=e.localization.resolve("LANGUAGE")}function fb(){}function pb(e,t){ay.call(this,e,t);var n=this;this.h=this.controls.C,this.g=bu(),this.g.classList.add("shaka-cast-button"),this.g.classList.add("shaka-tooltip"),this.g.ariaPressed="false",this.i=yu("i"),this.i.classList.add("material-icons-round"),this.i.textContent="cast",this.g.appendChild(this.i),(e=yu("label")).classList.add("shaka-overflow-button-label"),e.classList.add("shaka-overflow-menu-only"),this.l=yu("span"),e.appendChild(this.l),this.j=yu("span"),this.j.classList.add("shaka-current-selection-span"),e.appendChild(this.j),this.g.appendChild(e),this.parent.appendChild(this.g),vb(this),gb(this),this.eventManager.o(this.localization,"locale-updated",(function(){vb(n)})),this.eventManager.o(this.localization,"locale-changed",(function(){vb(n)})),this.eventManager.o(this.g,"click",(function(){!function(e){var t;L((function(n){return 1==n.g?e.h.na()?(e.h.dg(),n.D(0)):(A(n,3),e.g.disabled=!0,w(n,e.h.cast(),5)):3!=n.g?(e.g.disabled=!1,E(n,0)):(t=I(n),e.g.disabled=!1,8004!=t.code&&e.controls.dispatchEvent(new G("error",(new Map).set("detail",t))),void T(n))}))}(n)})),this.eventManager.o(this.controls,"caststatuschanged",(function(){gb(n)}))}function gb(e){var t=e.h.uf()&&e.controls.Za,n=e.h.na();cy(e.g,t),e.i.textContent=n?"cast_connected":"cast",t&&(e.g.ariaPressed=n?"true":"false"),mb(e)}function mb(e){e.j.textContent=e.h.na()?e.h.Jd():e.localization.resolve("OFF")}function vb(e){e.g.ariaLabel=e.localization.resolve("CAST"),e.l.textContent=e.localization.resolve("CAST"),mb(e)}function yb(){}function bb(e,t){ay.call(this,e,t);var n=this;this.g=bu(),this.g.classList.add("material-icons-round"),this.g.classList.add("shaka-fast-forward-button"),this.g.classList.add("shaka-tooltip-status"),this.g.setAttribute("shaka-status","1x"),this.g.textContent="fast_forward",this.parent.appendChild(this.g),xb(this),this.h=this.controls.i.fastForwardRates,this.eventManager.o(this.localization,"locale-updated",(function(){xb(n)})),this.eventManager.o(this.localization,"locale-changed",(function(){xb(n)})),this.eventManager.o(this.g,"click",(function(){if(n.video.duration){var e=n.h.indexOf(n.player.xb())+1;e=e!=n.h.length?n.h[e]:n.h[0],n.player.Ze(e),n.g.setAttribute("shaka-status",e+"x")}}))}function xb(e){e.g.ariaLabel=e.localization.resolve("FAST_FORWARD")}function wb(){}function Tb(e,t){ay.call(this,e,t);var n=this;this.h=this.controls.B,this.g=bu(),this.g.classList.add("shaka-fullscreen-button"),this.g.classList.add("material-icons-round"),this.g.classList.add("shaka-tooltip"),Ab(this),this.g.textContent="fullscreen",this.parent.appendChild(this.g),Sb(this),this.eventManager.o(this.localization,"locale-updated",(function(){Sb(n)})),this.eventManager.o(this.localization,"locale-changed",(function(){Sb(n)})),this.eventManager.o(this.g,"click",(function(){return L((function(e){return w(e,n.controls.Xe(),0)}))})),this.eventManager.o(document,"fullscreenchange",(function(){n.g.textContent=n.controls.ic()?"fullscreen_exit":"fullscreen",Sb(n)})),this.eventManager.o(this.h,"loadedmetadata",(function(){Ab(n)})),this.eventManager.o(this.h,"loadeddata",(function(){Ab(n)}))}function Ab(e){e.controls.xd()?e.g.classList.remove("shaka-hidden"):e.g.classList.add("shaka-hidden")}function Sb(e){e.g.ariaLabel=e.localization.resolve(e.controls.ic()?"EXIT_FULL_SCREEN":"FULL_SCREEN")}function Eb(){}function Ib(e,t){ay.call(this,e,t);var n=this;this.g=bu(),this.g.classList.add("shaka-loop-button"),this.g.classList.add("shaka-tooltip"),this.i=yu("i"),this.i.classList.add("material-icons-round"),this.i.textContent="repeat",this.g.appendChild(this.i),(e=yu("label")).classList.add("shaka-overflow-button-label"),e.classList.add("shaka-overflow-menu-only"),this.j=yu("span"),this.j.textContent=this.localization.resolve("LOOP"),e.appendChild(this.j),this.l=yu("span"),this.l.classList.add("shaka-current-selection-span"),e.appendChild(this.l),this.g.appendChild(e),kb(this),this.parent.appendChild(this.g),this.eventManager.o(this.localization,"locale-updated",(function(){kb(n)})),this.eventManager.o(this.localization,"locale-changed",(function(){kb(n)})),this.eventManager.o(this.g,"click",(function(){n.video.loop=!n.video.loop,n.h.za(),n.h.ea(1)})),this.m=this.video.loop,this.h=new Rt((function(){n.m!=n.video.loop&&(kb(n),n.m=n.video.loop)})),this.h.ea(1)}function kb(e){e.j.textContent=e.localization.resolve("LOOP"),e.l.textContent=e.localization.resolve(e.video.loop?"ON":"OFF"),e.i.textContent=e.video.loop?"repeat_on":"repeat",e.g.ariaLabel=e.localization.resolve(e.video.loop?"EXIT_LOOP_MODE":"ENTER_LOOP_MODE")}function Cb(){}function _b(e,t){ay.call(this,e,t);var n=this;this.g=bu(),this.g.classList.add("shaka-mute-button"),this.g.classList.add("material-icons-round"),this.g.classList.add("shaka-tooltip"),this.parent.appendChild(this.g),Mb(this),Rb(this),this.eventManager.o(this.localization,"locale-updated",(function(){Mb(n)})),this.eventManager.o(this.localization,"locale-changed",(function(){Mb(n)})),this.eventManager.o(this.g,"click",(function(){n.ad&&n.ad.isLinear()?n.ad.setMuted(!n.ad.isMuted()):n.video.muted=!n.video.muted})),this.eventManager.o(this.video,"volumechange",(function(){Mb(n),Rb(n)})),this.eventManager.o(this.adManager,"ad-volume-changed",(function(){Mb(n),Rb(n)})),this.eventManager.o(this.adManager,"ad-muted",(function(){Mb(n),Rb(n)})),this.eventManager.o(this.adManager,"ad-stopped",(function(){n.ad=null,Mb(n),Rb(n)}))}function Mb(e){var t=e.ad?e.ad.isMuted()?"UNMUTE":"MUTE":e.video.muted?"UNMUTE":"MUTE";e.g.ariaLabel=e.localization.resolve(t)}function Rb(e){var t=e.ad?e.ad.isMuted()?"volume_off":"volume_up":e.video.muted?"volume_off":"volume_up";e.g.textContent=t}function Nb(){}function Lb(e,t){ay.call(this,e,t);var n=this;this.l=this.controls.B,this.g=bu(),this.g.classList.add("shaka-pip-button"),this.g.classList.add("shaka-tooltip"),this.i=yu("i"),this.i.classList.add("material-icons-round"),this.i.textContent="picture_in_picture_alt",this.g.appendChild(this.i),(e=yu("label")).classList.add("shaka-overflow-button-label"),e.classList.add("shaka-overflow-menu-only"),this.j=yu("span"),this.j.textContent=this.localization.resolve("PICTURE_IN_PICTURE"),e.appendChild(this.j),this.h=yu("span"),this.h.classList.add("shaka-current-selection-span"),e.appendChild(this.h),this.g.appendChild(e),Db(this),this.parent.appendChild(this.g),document.pictureInPictureEnabled&&!this.video.disablePictureInPicture||cy(this.g,!1),this.eventManager.o(this.localization,"locale-updated",(function(){Db(n)})),this.eventManager.o(this.localization,"locale-changed",(function(){Db(n)})),this.eventManager.o(this.g,"click",(function(){!function(e){var t;L((function(n){return 1==n.g?(A(n,2),document.pictureInPictureElement?w(n,document.exitPictureInPicture(),5):(document.fullscreenElement&&document.exitFullscreen(),w(n,e.video.requestPictureInPicture(),5))):2!=n.g?E(n,0):(t=I(n),e.controls.dispatchEvent(new G("error",(new Map).set("detail",t))),void T(n))}))}(n)})),this.eventManager.o(this.l,"enterpictureinpicture",(function(){n.i.textContent="branding_watermark",n.g.ariaLabel=n.localization.resolve("EXIT_PICTURE_IN_PICTURE"),n.h.textContent=n.localization.resolve("ON")})),this.eventManager.o(this.l,"leavepictureinpicture",(function(){n.i.textContent="picture_in_picture_alt",n.g.ariaLabel=n.localization.resolve("ENTER_PICTURE_IN_PICTURE"),n.h.textContent=n.localization.resolve("OFF")})),this.eventManager.o(this.controls,"caststatuschanged",(function(e){e.newStatus?document.pictureInPictureEnabled&&!n.video.disablePictureInPicture&&cy(n.g,!1):document.pictureInPictureEnabled&&!n.video.disablePictureInPicture&&cy(n.g,!0)})),this.eventManager.o(this.player,"trackschanged",(function(){!function(e){L((function(t){return!document.pictureInPictureEnabled||e.video.disablePictureInPicture?(cy(e.g,!1),t.D(0)):e.player&&e.player.hc()?(cy(e.g,!1),document.pictureInPictureElement?w(t,document.exitPictureInPicture(),0):t.D(0)):(cy(e.g,!0),t.D(0))}))}(n)}))}function Db(e){e.j.textContent=e.localization.resolve("PICTURE_IN_PICTURE"),e.g.ariaLabel=e.localization.resolve(document.pictureInPictureElement?"EXIT_PICTURE_IN_PICTURE":"ENTER_PICTURE_IN_PICTURE"),e.h.textContent=e.localization.resolve(document.pictureInPictureElement?"ON":"OFF")}function Pb(){}function Ob(e,t){lb.call(this,e,t,"slow_motion_video");var n=this;this.button.classList.add("shaka-playbackrate-button"),this.menu.classList.add("shaka-playback-rates"),this.button.classList.add("shaka-tooltip-status"),this.eventManager.o(this.localization,"locale-updated",(function(){Ub(n)})),this.eventManager.o(this.localization,"locale-changed",(function(){Ub(n)})),this.eventManager.o(this.player,"ratechange",(function(){Bb(n,n.player.xb())})),this.g=new Map(this.controls.i.playbackRates.map((function(e){return[e+"x",e]}))),Ub(this),function(e){for(var t={},n=c(e.g.keys()),r=n.next();!r.done;t={xc:t.xc},r=n.next()){t.xc=r.value,r=bu();var i=yu("span");i.textContent=t.xc,r.appendChild(i),e.eventManager.o(r,"click",function(t){return function(){e.video.playbackRate=e.g.get(t.xc),e.video.defaultPlaybackRate=e.g.get(t.xc)}}(t)),e.menu.appendChild(r)}uy(e.menu)}(this),Bb(this,this.player.xb())}function Ub(e){e.backButton.ariaLabel=e.localization.resolve("BACK"),e.button.ariaLabel=e.localization.resolve("PLAYBACK_RATE"),e.nameSpan.textContent=e.localization.resolve("PLAYBACK_RATE"),e.backSpan.textContent=e.localization.resolve("PLAYBACK_RATE")}function Bb(e,t){var n=sy(e.menu,"material-icons-round shaka-chosen-item");if(n){var r=n.parentElement;r.removeAttribute("aria-selected"),r.getElementsByTagName("span")[0].classList.remove("shaka-chosen-item"),r.removeChild(n)}(n=Array.from(e.menu.querySelectorAll("span")).find((function(n){return e.g.get(n.textContent)==t})))&&((r=n.parentElement).appendChild(ly()),r.ariaSelected="true",n.classList.add("shaka-chosen-item")),e.currentSelection.textContent=t+"x",e.button.setAttribute("shaka-status",t+"x")}function jb(){}function Fb(e,t){ay.call(this,e,t);var n=this;this.g=bu(),this.g.classList.add("shaka-current-time"),zb(this,"0:00"),this.parent.appendChild(this.g),this.eventManager.o(this.g,"click",(function(){n.player.T()&&(n.video.currentTime=n.player.Ja().end)})),this.eventManager.o(this.controls,"timeandseekrangeupdated",(function(){var e=n.controls.X,t=n.controls.Hf(),r=n.video.duration,i=n.player.Ja(),a=i.end-i.start;n.player.T()?(r=3600<=a,1<=(t=Math.max(0,Math.floor(i.end-t)))||e?(zb(n,"- "+dy(t,r)),n.g.disabled=!1):(zb(n,n.localization.resolve("LIVE")),n.g.disabled=!0)):(t=dy(t,e=3600<=r),r&&(t+=" / "+dy(r,e)),zb(n,t),n.g.disabled=!0)})),this.eventManager.o(this.player,"trackschanged",(function(){n.player.T()&&(n.g.ariaLabel=n.localization.resolve("SKIP_TO_LIVE"))}))}function zb(e,t){t!=e.g.textContent&&(e.g.textContent=t)}function Gb(){}function Vb(e,t){lb.call(this,e,t,"settings");var n=this;this.button.classList.add("shaka-resolution-button"),this.button.classList.add("shaka-tooltip-status"),this.menu.classList.add("shaka-resolutions"),this.eventManager.o(this.localization,"locale-updated",(function(){Hb(n)})),this.eventManager.o(this.localization,"locale-changed",(function(){Hb(n)})),this.eventManager.o(this.player,"variantchanged",(function(){Kb(n)})),this.eventManager.o(this.player,"trackschanged",(function(){Kb(n)})),this.eventManager.o(this.player,"abrstatuschanged",(function(){Kb(n)})),Kb(this)}function Kb(e){var t=e.player.Qa(),n=t.find((function(e){return e.active}));n&&(t=t.filter((function(e){return e.language==n.language&&e.channelsCount==n.channelsCount}))),t=t.filter((function(n,r){return(e.player.hc()?t.findIndex((function(e){return e.bandwidth==n.bandwidth})):t.findIndex((function(e){return e.height==n.height})))==r})),e.player.hc()?t.sort((function(e,t){return t.bandwidth-e.bandwidth})):t.sort((function(e,t){return t.height-e.height}));var r=oy(e.menu);xu(e.menu),e.menu.appendChild(r),r=e.player.getConfiguration().abr.enabled;for(var i={},a=c(t),o=a.next();!o.done;i={Yb:i.Yb},o=a.next()){i.Yb=o.value,(o=bu()).classList.add("explicit-resolution"),e.eventManager.o(o,"click",function(t){return function(){var n=t.Yb;e.player.configure({abr:{enabled:!1}}),e.player.Ke(n,e.controls.i.clearBufferOnQualityChange)}}(i));var s=yu("span");s.textContent=e.player.hc()?Math.round(i.Yb.bandwidth/1e3)+" kbits/s":i.Yb.height+"p",o.appendChild(s),r||i.Yb!=n||(o.ariaSelected="true",o.appendChild(ly()),s.classList.add("shaka-chosen-item"),e.currentSelection.textContent=s.textContent),e.menu.appendChild(o)}(i=bu()).classList.add("shaka-enable-abr-button"),e.eventManager.o(i,"click",(function(){e.player.configure({abr:{enabled:!0}}),Kb(e)})),e.g=yu("span"),e.g.classList.add("shaka-auto-span"),e.g.textContent=e.localization.resolve("AUTO_QUALITY"),i.appendChild(e.g),r&&(i.ariaSelected="true",i.appendChild(ly()),e.g.classList.add("shaka-chosen-item"),e.currentSelection.textContent=e.localization.resolve("AUTO_QUALITY")),e.button.setAttribute("shaka-status",e.currentSelection.textContent),e.menu.appendChild(i),uy(e.menu),e.controls.dispatchEvent(new G("resolutionselectionupdated")),Hb(e)}function Hb(e){var t=e.player.hc()?"QUALITY":"RESOLUTION";e.button.ariaLabel=e.localization.resolve(t),e.backButton.ariaLabel=e.localization.resolve(t),e.backSpan.textContent=e.localization.resolve(t),e.nameSpan.textContent=e.localization.resolve(t),e.g.textContent=e.localization.resolve("AUTO_QUALITY"),e.player.getConfiguration().abr.enabled&&(e.currentSelection.textContent=e.localization.resolve("AUTO_QUALITY"))}function Wb(){}function Xb(e,t){ay.call(this,e,t);var n=this;this.g=bu(),this.g.classList.add("material-icons-round"),this.g.classList.add("shaka-rewind-button"),this.g.classList.add("shaka-tooltip-status"),this.g.setAttribute("shaka-status",this.localization.resolve("OFF")),this.g.textContent="fast_rewind",this.parent.appendChild(this.g),qb(this),this.h=this.controls.i.rewindRates,this.eventManager.o(this.localization,"locale-updated",(function(){qb(n)})),this.eventManager.o(this.localization,"locale-changed",(function(){qb(n)})),this.eventManager.o(this.g,"click",(function(){if(n.video.duration){var e=n.h.indexOf(n.player.xb())+1;e=e!=n.h.length?n.h[e]:n.h[0],n.player.Ze(e),n.g.setAttribute("shaka-status",e+"x")}}))}function qb(e){e.g.ariaLabel=e.localization.resolve("REWIND")}function Yb(){}function $b(e,t){ay.call(this,e,t);var n=this;this.j=yu("div"),this.j.classList.add("shaka-skip-ad-container"),this.parent.appendChild(this.j),this.h=yu("div"),this.h.classList.add("shaka-skip-ad-counter"),cy(this.h,!1),this.j.appendChild(this.h),this.g=bu(),this.g.classList.add("shaka-skip-ad-button"),this.g.disabled=!0,cy(this.g,!1),this.g.classList.add("shaka-no-propagation"),this.j.appendChild(this.g),Qb(this),this.i=new Rt((function(){var e=Math.round(n.ad.getTimeUntilSkippable());0<e?n.h.textContent=e:(n.i.stop(),cy(n.h,!1))})),this.eventManager.o(this.localization,"locale-updated",(function(){Qb(n)})),this.eventManager.o(this.localization,"locale-changed",(function(){Qb(n)})),this.eventManager.o(this.adManager,"ad-started",(function(){Jb(n)})),this.eventManager.o(this.adManager,"ad-skip-state-changed",(function(){n.ad.canSkipNow()&&(n.g.disabled=!1,n.i.stop(),cy(n.h,!1))})),this.eventManager.o(this.adManager,"ad-stopped",(function(){n.i.stop(),n.g.disabled=!0,cy(n.g,!1),cy(n.h,!1)})),this.eventManager.o(this.g,"click",(function(){n.ad.skip()})),this.ad&&Jb(this)}function Qb(e){e.g.textContent=e.localization.resolve("SKIP_AD")}function Jb(e){e.ad.isSkippable()&&(cy(e.g,!0),cy(e.h,!0),e.h.textContent="",e.i.za(),e.i.ea(.5))}function Zb(e,t){gy.call(this,e,t),this.button.classList.add("shaka-small-play-button"),this.button.classList.add("material-icons-round"),this.button.classList.add("shaka-tooltip"),this.h(),this.g()}function ex(){}function tx(e,t){ay.call(this,e,t),(e=yu("div")).classList.add("shaka-spacer"),e.ariaHidden="true",this.parent.appendChild(e)}function nx(){}function rx(e,t){function n(e){return dy(s.h[e],!1)+" (m)"}function r(e){return Math.round(s.h[e]/1e3)+" (kbits/s)"}function i(e){return s.h[e].toFixed(2)+" (s)"}function a(e){return s.h[e]+" (frames)"}function o(e){return s.h[e]+" (px)"}ay.call(this,e,t);var s=this;this.i=bu(),this.i.classList.add("shaka-statistics-button"),this.j=yu("i"),this.j.classList.add("material-icons-round"),this.j.textContent="insert_chart_outlined",this.i.appendChild(this.j),(e=yu("label")).classList.add("shaka-overflow-button-label"),this.s=yu("span"),e.appendChild(this.s),this.m=yu("span"),this.m.classList.add("shaka-current-selection-span"),e.appendChild(this.m),this.i.appendChild(e),this.parent.appendChild(this.i),this.g=yu("div"),this.g.classList.add("shaka-no-propagation"),this.g.classList.add("shaka-show-controls-on-mouse-over"),this.g.classList.add("shaka-statistics-container"),this.g.classList.add("shaka-hidden"),this.controls.g.appendChild(this.g),this.F=[],this.G=["stateHistory","switchHistory"],this.h=this.player.getStats(),this.B={},this.C={width:o,height:o,completionPercent:function(e){return s.h[e]+" (%)"},bufferingTime:i,drmTimeSeconds:i,licenseTime:i,liveLatency:i,loadLatency:i,manifestTimeSeconds:i,estimatedBandwidth:r,streamBandwidth:r,maxSegmentDuration:n,pauseTime:n,playTime:n,corruptedFrames:a,decodedFrames:a,droppedFrames:a,stallsDetected:function(e){return s.h[e]+" (stalls)"},gapsJumped:function(e){return s.h[e]+" (gaps)"}},this.l=new Rt((function(){s.h=s.player.getStats();for(var e=c(s.F),t=e.next();!t.done;t=e.next())t=t.value,s.B[t].textContent=s.C[t](t)})),ix(this),function(e){for(var t=c(e.controls.i.statisticsList),n=t.next();!n.done;n=t.next())if((n=n.value)in e.h&&!e.G.includes(n)){var r=e.g,i=r.appendChild,a=e,o=yu("div"),s=yu("label");s.textContent=n+":",o.appendChild(s),(s=yu("span")).textContent=a.C[n](n),o.appendChild(s),a.B[n]=s,i.call(r,o),e.F.push(n)}else X("Unrecognized statistic element:",n)}(this),this.eventManager.o(this.localization,"locale-updated",(function(){ix(s)})),this.eventManager.o(this.localization,"locale-changed",(function(){ix(s)})),this.eventManager.o(this.i,"click",(function(){cy(s.parent,!1),s.g.classList.contains("shaka-hidden")?(s.j.textContent="insert_chart",s.l.ea(.1),cy(s.g,!0)):(s.j.textContent="insert_chart_outlined",s.l.stop(),cy(s.g,!1)),ix(s)}))}function ix(e){e.s.textContent=e.localization.resolve("STATISTICS"),e.i.ariaLabel=e.localization.resolve("STATISTICS"),e.m.textContent=e.localization.resolve(e.g.classList.contains("shaka-hidden")?"OFF":"ON")}function ax(){}function ox(e,t){lb.call(this,e,t,"closed_caption");var n=this;this.button.classList.add("shaka-caption-button"),this.button.classList.add("shaka-tooltip-status"),this.menu.classList.add("shaka-text-languages"),this.player&&this.player.Nb()?this.button.ariaPressed="true":this.button.ariaPressed="false",function(e){var t=bu();t.ariaSelected="true",e.menu.appendChild(t),t.appendChild(ly()),e.g=yu("span"),e.g.classList.add("shaka-auto-span"),t.appendChild(e.g)}(this),this.eventManager.o(this.localization,"locale-updated",(function(){lx(n),ux(n)})),this.eventManager.o(this.localization,"locale-changed",(function(){lx(n),ux(n)})),this.eventManager.o(this.player,"texttrackvisibility",(function(){sx(n),ux(n)})),this.eventManager.o(this.player,"textchanged",(function(){ux(n)})),this.eventManager.o(this.player,"trackschanged",(function(){cx(n)})),sx(this),lx(this),ux(this),cx(this)}function sx(e){e.player.Nb()?(e.icon.textContent="closed_caption",e.button.ariaPressed="true"):(e.icon.textContent="closed_caption_disabled",e.button.ariaPressed="false"),e.controls.dispatchEvent(new G("captionselectionupdated"))}function ux(e){var t=e.player.yb();sb(t,e.menu,(function(t){return function(e,t){return L((function(n){return e.player.Je(t),w(n,e.player.Se(!0),0)}))}(e,t)}),e.player.Nb(),e.currentSelection,e.localization,e.controls.i.trackLabelFormat),(t=bu()).classList.add("shaka-turn-captions-off-button"),e.eventManager.o(t,"click",(function(){e.player.Se(!1),ux(e)})),t.appendChild(e.g),e.menu.appendChild(t),e.player.Nb()||(t.ariaSelected="true",t.appendChild(ly()),e.g.classList.add("shaka-chosen-item"),e.currentSelection.textContent=e.localization.resolve("OFF")),e.button.setAttribute("shaka-status",e.currentSelection.textContent),uy(e.menu),e.controls.dispatchEvent(new G("captionselectionupdated"))}function lx(e){e.button.ariaLabel=e.localization.resolve("CAPTIONS"),e.backButton.ariaLabel=e.localization.resolve("BACK"),e.nameSpan.textContent=e.localization.resolve("CAPTIONS"),e.backSpan.textContent=e.localization.resolve("CAPTIONS"),e.g.textContent=e.localization.resolve("OFF")}function cx(e){var t=0<e.player.yb().length;cy(e.button,t),ux(e)}function dx(){}function hx(e,t){xy.call(this,e,t,["shaka-volume-bar-container"],["shaka-volume-bar"]);var n=this;this.h=this.controls.i,this.eventManager.o(this.video,"volumechange",(function(){return fx(n)})),this.eventManager.o(this.adManager,"ad-volume-changed",(function(){return px(n)})),this.eventManager.o(this.adManager,"ad-muted",(function(){return px(n)})),this.eventManager.o(this.adManager,"ad-stopped",(function(){return fx(n)})),this.eventManager.o(this.localization,"locale-updated",(function(){return mx(n)})),this.eventManager.o(this.localization,"locale-changed",(function(){return mx(n)})),fx(this),mx(this),this.ad&&this.onChange()}function fx(e){e.video.muted?e.setValue(0):e.setValue(e.video.volume),gx(e)}function px(e){var t=e.ad.getVolume();e.setValue(t),gx(e)}function gx(e){var t=e.h.volumeBarColors,n=["to right"];n.push(t.level+100*e.getValue()+"%"),n.push(t.base+100*e.getValue()+"%"),n.push(t.base+"100%"),e.container.style.background="linear-gradient("+n.join(",")+")"}function mx(e){e.bar.ariaLabel=e.localization.resolve("VOLUME")}function vx(){}Zy.FailReasonCode={NO_BROWSER_SUPPORT:ab,PLAYER_FAILED_TO_LOAD:ob},"complete"==document.readyState?L((function(e){if(1==e.g)return w(e,Promise.resolve(),2);tb(),T(e)})):e.addEventListener("load",tb),v(lb,ay),z("shaka.ui.SettingsMenu",lb),v(cb,lb),z("shaka.ui.AudioLanguageSelection",cb),fb.prototype.create=function(e,t){return new cb(e,t)},Hy("language",new fb),My("language",new fb),v(pb,ay),z("shaka.ui.CastButton",pb),yb.prototype.create=function(e,t){return new pb(e,t)},Hy("cast",new yb),My("cast",new yb),v(bb,ay),z("shaka.ui.FastForwardButton",bb),wb.prototype.create=function(e,t){return new bb(e,t)},My("fast_forward",new wb),v(Tb,ay),z("shaka.ui.FullscreenButton",Tb),Eb.prototype.create=function(e,t){return new Tb(e,t)},My("fullscreen",new Eb),v(Ib,ay),Ib.prototype.release=function(){this.h.stop(),this.h=null,ay.prototype.release.call(this)},z("shaka.ui.LoopButton",Ib),Cb.prototype.create=function(e,t){return new Ib(e,t)},Hy("loop",new Cb),My("loop",new Cb),yy("loop",new Cb),v(_b,ay),z("shaka.ui.MuteButton",_b),Nb.prototype.create=function(e,t){return new _b(e,t)},My("mute",new Nb),v(Lb,ay),z("shaka.ui.PipButton",Lb),Pb.prototype.create=function(e,t){return new Lb(e,t)},Hy("picture_in_picture",new Pb),My("picture_in_picture",new Pb),yy("picture_in_picture",new Pb),v(Ob,lb),z("shaka.ui.PlaybackRateSelection",Ob),jb.prototype.create=function(e,t){return new Ob(e,t)},Hy("playback_rate",new jb),My("playback_rate",new jb),v(Fb,ay),z("shaka.ui.PresentationTimeTracker",Fb),Gb.prototype.create=function(e,t){return new Fb(e,t)},My("time_and_duration",new Gb),v(Vb,lb),z("shaka.ui.ResolutionSelection",Vb),Wb.prototype.create=function(e,t){return new Vb(e,t)},Hy("quality",new Wb),My("quality",new Wb),v(Xb,ay),z("shaka.ui.RewindButton",Xb),Yb.prototype.create=function(e,t){return new Xb(e,t)},My("rewind",new Yb),v($b,ay),$b.prototype.release=function(){this.i.stop(),this.i=null,ay.prototype.release.call(this)},z("shaka.ui.SkipAdButton",$b),v(Zb,gy),Zb.prototype.h=function(){this.button.textContent=this.video.ended?"replay":this.isPaused()?"play_arrow":"pause"},Zb.prototype.g=function(){if(this.video.ended)this.button.ariaLabel=this.localization.resolve("REPLAY");else{var e=this.isPaused()?"PLAY":"PAUSE";this.button.ariaLabel=this.localization.resolve(e)}},z("shaka.ui.SmallPlayButton",Zb),ex.prototype.create=function(e,t){return new Zb(e,t)},My("play_pause",new ex),v(tx,ay),z("shaka.ui.Spacer",tx),nx.prototype.create=function(e,t){return new tx(e,t)},My("spacer",new nx),v(rx,ay),rx.prototype.release=function(){this.l.stop(),this.l=null,ay.prototype.release.call(this)},z("shaka.ui.StatisticsButton",rx),ax.prototype.create=function(e,t){return new rx(e,t)},Hy("statistics",new ax),yy("statistics",new ax),v(ox,lb),z("shaka.ui.TextSelection",ox),dx.prototype.create=function(e,t){return new ox(e,t)},Hy("captions",new dx),My("captions",new dx),v(hx,xy),hx.prototype.onChange=function(){this.ad&&this.ad.isLinear()?this.ad.setVolume(this.getValue()):(this.video.volume=this.getValue(),this.video.muted=0==this.video.volume)},z("shaka.ui.VolumeBar",hx),vx.prototype.create=function(e,t){return new hx(e,t)},My("volume",new vx)}.call(n,t,t,void 0),n.shaka)e[r]=n.shaka[r]}()}(Js);var Zs={videoStyles:{position:"absolute",width:"1920px",height:"1080px",top:"0px",left:"0px",zIndex:"150"}},eu=e=>{console.error("Error code:",e.code,"object",e)};function tu(){return tu=w(b().mark((function e(){var t,n,r,i;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Qs.polyfill.installAll(),(r=document.createElement("div")).id="video-container",document.body.appendChild(r),null===document.getElementById("video-player")?(n=document.createElement("video")).id="video-player":n=document.getElementById("video-player"),r.appendChild(n),Object.assign(n.style,Zs.videoStyles),t=new Js.Player(n),window.player=t,i=new Js.ui.Overlay(t,r,n),i.getControls().addEventListener("error",console.error),t.addEventListener("error",console.error),document.querySelectorAll(".shaka-spinner")[0].remove(),document.querySelectorAll(".shaka-controls-container")[0].remove(),e.prev=17,e.next=20,t.load({streamUrl:vs,type:"mp4",track:""});case 20:(new Qs.util.EventManager).listen(t,"buffering",(e=>{n.style.zIndex="0",0==e.buffering&&(n.style.zIndex="150",n.play())})),e.next=27;break;case 24:e.prev=24,e.t0=e.catch(17),eu(e.t0);case 27:case"end":return e.stop()}}),e,null,[[17,24]])}))),tu.apply(this,arguments)}var nu=()=>{var e,t=document.getElementById("video-container"),n=document.getElementById("video-player"),r=E(Ee(!1),2),i=r[0],a=r[1];return ke((()=>{a(!0),function(){tu.apply(this,arguments)}(),a(!1)})),Re((()=>{e.setFocus()})),i()?Er(Vs,{}):Er(mr,{ref(t){"function"==typeof e?e(t):e=t},onKeyPress:e=>function(e){switch(null===n&&(n=document.getElementById("video-player")),e.code){case"Enter":case"Space":Ys.playPause(n);break;case"Backspace":Ys.shouldPause()?null===t&&(t=document.getElementById("video-container")).remove():n.style.display="none"}}(e),get style(){return{zIndex:110,color:Oi.black}}})},ru=()=>Er(gr,{children:"Not Found"}),iu=new URL("AppCoreExtensions-legacy-jf1Ivds3.js",T.meta.url).href;Qn.debug=!1,Qn.fontSettings.fontFamily="Ubuntu",Qn.fontSettings.color=4294967295,Qn.rendererOptions={coreExtensionModule:iu,numImageWorkers:2,deviceLogicalPixelRatio:1280===window.innerWidth?2/3:1,enableInspector:!0,boundsMargin:20},Ar((()=>Er(fi,{root:ia,get children(){return[Er(ui,{path:"",component:Hs}),Er(ui,{path:"/browse/:category",component:Hs}),Er(ui,{path:"/details/:type/:id",component:qs}),Er(ui,{path:"/video",component:nu}),Er(ui,{path:"/*all",component:ru})]}})))}}}))}();
//# sourceMappingURL=index-legacy-temqOWfi.js.map
